webpackJsonp([0],{"/UCc":function(t,e,n){"use strict";function i(t){return!!(t&&t.constructor&&t.call&&t.apply)}function r(t){return!(!t||"object"!=typeof t||i(t))}e.isFunction=i,e.isObject=r,e.isPlainObject=function(t){return r(t)&&t.constructor===Object}},0:function(t,e,n){t.exports=n("cDNt")},"0iWC":function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n("LMZF"),a=n("cqO5"),s=(n("xHJr"),n("iWCm")),u=n("Qe4K");e.PolylineDirective=function(t){function e(e,n){var i=t.call(this,[])||this;return i.displayChange=new o.EventEmitter,i.strokeChange=new o.EventEmitter,i.colorChange=new o.EventEmitter,i.weightChange=new o.EventEmitter,i.opacityChange=new o.EventEmitter,i.lineCapChange=new o.EventEmitter,i.lineJoinChange=new o.EventEmitter,i.dashArrayChange=new o.EventEmitter,i.dashOffsetChange=new o.EventEmitter,i.fillChange=new o.EventEmitter,i.fillColorChange=new o.EventEmitter,i.fillOpacityChange=new o.EventEmitter,i.fillRuleChange=new o.EventEmitter,i.classNameChange=new o.EventEmitter,i.styleChange=new o.EventEmitter,i.latLngsChange=new o.EventEmitter,i.geoJSONChange=new o.EventEmitter,i.addEvent=new o.EventEmitter,i.removeEvent=new o.EventEmitter,i.popupopenEvent=new o.EventEmitter,i.popupcloseEvent=new o.EventEmitter,i.tooltipopenEvent=new o.EventEmitter,i.tooltipcloseEvent=new o.EventEmitter,i.clickEvent=new o.EventEmitter,i.dbclickEvent=new o.EventEmitter,i.mousedownEvent=new o.EventEmitter,i.mouseoverEvent=new o.EventEmitter,i.mouseoutEvent=new o.EventEmitter,i.contextmenuEvent=new o.EventEmitter,n.ref=i,i.feature=i.feature||{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:[]}},i.feature.properties=i.feature.properties||{},i.on("remove",function(){i.displayChange.emit(!1)}),i.on("add",function(){i.displayChange.emit(!0)}),e.ref.addLayer(i),i.on("add",function(t){i.addEvent.emit(t)}),i.on("remove",function(t){i.removeEvent.emit(t)}),i.on("popupopen",function(t){i.popupopenEvent.emit(t)}),i.on("popupclose",function(t){i.popupcloseEvent.emit(t)}),i.on("tooltipopen",function(t){i.tooltipopenEvent.emit(t)}),i.on("tooltipclose",function(t){i.tooltipcloseEvent.emit(t)}),i.on("click",function(t){i.clickEvent.emit(t)}),i.on("dbclick",function(t){i.dbclickEvent.emit(t)}),i.on("mousedown",function(t){i.mousedownEvent.emit(t)}),i.on("mouseover",function(t){i.mouseoverEvent.emit(t)}),i.on("mouseout",function(t){i.mouseoutEvent.emit(t)}),i.on("contextmenu",function(t){i.contextmenuEvent.emit(t)}),i}return r(e,t),e.prototype.ngOnDestroy=function(){this.removeFrom(this._map)},e.prototype.setLatLngs=function(e){return t.prototype.setLatLngs.call(this,e),this.latLngsChange.emit(this._latlngs),this.geoJSONChange.emit(this.geoJSON),this},e.prototype.addLatLng=function(e){return t.prototype.addLatLng.call(this,e),this.latLngsChange.emit(this._latlngs),this.geoJSONChange.emit(this.geoJSON),this},Object.defineProperty(e.prototype,"latLngs",{get:function(){return this._latlngs},set:function(t){this.setLatLngs(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"geoJSON",{get:function(){return this.toGeoJSON()},set:function(t){this.feature.properties=t.properties;var e=t.geometry.type;if("LineString"!==e&&"MultiLineString"!==e)throw new Error("Unsupported geometry type: "+e);this.setLatLngs(u.lng2lat(t.geometry.coordinates))},enumerable:!0,configurable:!0}),e.prototype.setStyle=function(e){return t.prototype.setStyle.call(this,e),e.hasOwnProperty("stroke")&&this.strokeChange.emit(e.stroke),e.hasOwnProperty("color")&&this.colorChange.emit(e.color),e.hasOwnProperty("weight")&&this.weightChange.emit(e.weight),e.hasOwnProperty("opacity")&&this.opacityChange.emit(e.opacity),e.hasOwnProperty("lineCap")&&this.lineCapChange.emit(e.lineCap),e.hasOwnProperty("lineJoin")&&this.lineJoinChange.emit(e.lineJoin),e.hasOwnProperty("dashArray")&&this.dashArrayChange.emit(e.dashArray),e.hasOwnProperty("dashOffset")&&this.dashOffsetChange.emit(e.dashOffset),e.hasOwnProperty("fill")&&this.fillChange.emit(e.fill),e.hasOwnProperty("fillColor")&&this.fillColorChange.emit(e.fillColor),e.hasOwnProperty("fillOpacity")&&this.fillOpacityChange.emit(e.fillOpacity),e.hasOwnProperty("fillRule")&&this.fillRuleChange.emit(e.fillRule),e.hasOwnProperty("className")&&this.classNameChange.emit(e.className),this.styleChange.emit(e),this},Object.defineProperty(e.prototype,"opacity",{get:function(){return this.options.opacity},set:function(t){this.setStyle({opacity:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stroke",{get:function(){return this.options.stroke},set:function(t){this.setStyle({stroke:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return this.options.color},set:function(t){this.setStyle({color:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"weight",{get:function(){return this.options.weight},set:function(t){this.setStyle({weight:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lineCap",{get:function(){return this.options.lineCap},set:function(t){this.setStyle({lineCap:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lineJoin",{get:function(){return this.options.lineJoin},set:function(t){this.setStyle({lineJoin:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dashArray",{get:function(){return this.options.dashArray},set:function(t){this.setStyle({dashArray:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dashOffset",{get:function(){return this.options.dashOffset},set:function(t){this.setStyle({dashOffset:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fill",{get:function(){return this.options.fill},set:function(t){this.setStyle({fill:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fillColor",{get:function(){return this.options.fillColor},set:function(t){this.setStyle({fillColor:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fillOpacity",{get:function(){return this.options.fillOpacity},set:function(t){this.setStyle({fillOpacity:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fillRule",{get:function(){return this.options.fillRule},set:function(t){this.setStyle({fillRule:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"className",{get:function(){return this.options.className},set:function(t){this.setStyle({className:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return this.options},set:function(t){this.setStyle(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"display",{get:function(){var t;try{t=this.getElement()}catch(t){return!1}return"none"!==t.style.display&&!!t.parentElement},set:function(t){if(this.display!==t){var e;try{e=this.getElement()}catch(t){return}this.displayChange.emit(t),e.style.display=t?"":"none"}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"interactive",{get:function(){return this.options.interactive},set:function(t){var e=this._map;this.options.interactive=t,this.onRemove(e),this.onAdd(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"smoothFactor",{get:function(){return this.options.smoothFactor},set:function(t){this.options.smoothFactor=t,this.redraw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"noClip",{get:function(){return this.options.noClip},set:function(t){this.options.noClip=t,this.redraw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"properties",{get:function(){return this.feature.properties},set:function(t){this.feature.properties=t,this.geoJSONChange.emit(this.geoJSON)},enumerable:!0,configurable:!0}),e.decorators=[{type:o.Directive,args:[{providers:[s.LayerProvider],selector:"yaga-polyline"}]}],e.propDecorators={displayChange:[{type:o.Output}],strokeChange:[{type:o.Output}],colorChange:[{type:o.Output}],weightChange:[{type:o.Output}],opacityChange:[{type:o.Output}],lineCapChange:[{type:o.Output}],lineJoinChange:[{type:o.Output}],dashArrayChange:[{type:o.Output}],dashOffsetChange:[{type:o.Output}],fillChange:[{type:o.Output}],fillColorChange:[{type:o.Output}],fillOpacityChange:[{type:o.Output}],fillRuleChange:[{type:o.Output}],classNameChange:[{type:o.Output}],styleChange:[{type:o.Output}],latLngsChange:[{type:o.Output}],geoJSONChange:[{type:o.Output}],addEvent:[{type:o.Output,args:["add"]}],removeEvent:[{type:o.Output,args:["remove"]}],popupopenEvent:[{type:o.Output,args:["popupopen"]}],popupcloseEvent:[{type:o.Output,args:["popupclose"]}],tooltipopenEvent:[{type:o.Output,args:["tooltipopen"]}],tooltipcloseEvent:[{type:o.Output,args:["tooltipclose"]}],clickEvent:[{type:o.Output,args:["click"]}],dbclickEvent:[{type:o.Output,args:["dbclick"]}],mousedownEvent:[{type:o.Output,args:["mousedown"]}],mouseoverEvent:[{type:o.Output,args:["mouseover"]}],mouseoutEvent:[{type:o.Output,args:["mouseout"]}],contextmenuEvent:[{type:o.Output,args:["contextmenu"]}],latLngs:[{type:o.Input}],geoJSON:[{type:o.Input}],opacity:[{type:o.Input}],stroke:[{type:o.Input}],color:[{type:o.Input}],weight:[{type:o.Input}],lineCap:[{type:o.Input}],lineJoin:[{type:o.Input}],dashArray:[{type:o.Input}],dashOffset:[{type:o.Input}],fill:[{type:o.Input}],fillColor:[{type:o.Input}],fillOpacity:[{type:o.Input}],fillRule:[{type:o.Input}],className:[{type:o.Input}],style:[{type:o.Input}],display:[{type:o.Input}],interactive:[{type:o.Input}],smoothFactor:[{type:o.Input}],noClip:[{type:o.Input}],properties:[{type:o.Input}]},e}(a.Polyline)},"1j/l":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i=Array.isArray||function(t){return t&&"number"==typeof t.length}},"2e2V":function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n("LMZF"),a=n("cqO5");n("stdA"),e.DivIconDirective=function(t){function e(e,n){var i=t.call(this,{})||this;return i.markerProvider=n,i.updateEvent=new o.EventEmitter,i.contentHtml=e.nativeElement,"function"==typeof MutationObserver?new MutationObserver(function(){i.markerProvider.ref.setIcon(i),i.updateEvent.emit({target:i,type:"update"})}).observe(i.contentHtml,{attributes:!0,characterData:!0,childList:!0,subtree:!0}):i.contentHtml.addEventListener("DOMSubtreeModified",function(){i.markerProvider.ref.setIcon(i),i.updateEvent.emit({target:i,type:"update"})}),n.ref.setIcon(i),i}return r(e,t),Object.defineProperty(e.prototype,"iconSize",{get:function(){return this.options.iconSize},set:function(t){this.options.iconSize=t,this.markerProvider.ref.setIcon(this),this.updateEvent.emit({target:this,type:"update"})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"iconAnchor",{get:function(){return this.options.iconAnchor},set:function(t){this.options.iconAnchor=t,this.markerProvider.ref.setIcon(this),this.updateEvent.emit({target:this,type:"update"})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"popupAnchor",{get:function(){return this.options.popupAnchor},set:function(t){this.options.popupAnchor=t,this.markerProvider.ref.setIcon(this),this.updateEvent.emit({target:this,type:"update"})},enumerable:!0,configurable:!0}),e.prototype.createIcon=function(e){return-1===(e=t.prototype.createIcon.call(this,e)).getAttribute("class").split(" ").indexOf("yaga-div-icon")&&e.setAttribute("class",e.getAttribute("class")+" yaga-div-icon"),e.appendChild(this.contentHtml.cloneNode(!0)),e},e.decorators=[{type:o.Directive,args:[{selector:"yaga-div-icon"}]}],e.propDecorators={updateEvent:[{type:o.Output,args:["update"]}],iconSize:[{type:o.Input}],iconAnchor:[{type:o.Input}],popupAnchor:[{type:o.Input}]},e}(a.DivIcon)},"2jIh":function(t,e,n){"use strict";(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.a=n}).call(e,n("fRUx"))},"2kLc":function(t,e,n){"use strict";e.a=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var n=Number.POSITIVE_INFINITY,s=null,u=t[t.length-1];return Object(o.a)(u)?(s=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(n=t.pop())):"number"==typeof u&&(n=t.pop()),null===s&&1===t.length&&t[0]instanceof i.Observable?t[0]:Object(a.a)(n)(new r.a(t,s))};var i=n("AP4T"),r=n("Oryw"),o=n("3iOE"),a=n("bywS")},"3iOE":function(t,e,n){"use strict";e.a=function(t){return t&&"function"==typeof t.schedule}},"5JxN":function(t,e,n){"use strict";var i=n("LMZF"),r=n("kP2E"),o=n("eaoh");function a(t){return new r.NgRedux(t)}e._ngReduxFactory=a,e.NgReduxModule=function(){function t(){}return t.decorators=[{type:i.NgModule,args:[{providers:[o.DevToolsExtension,{provide:r.NgRedux,useFactory:a,deps:[i.NgZone]}]}]}],t}()},"5jKg":function(t,e,n){"use strict";e.a=function(t,e){return function(n){return n.lift(new a(t,e))}};var i=n("6Xbx"),r=n("lI6h"),o=n("qgI0"),a=function(){function t(t,e){this.project=t,this.resultSelector=e}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.project,this.resultSelector))},t}(),s=function(t){function e(e,n,i){t.call(this,e),this.project=n,this.resultSelector=i,this.index=0}return Object(i.c)(e,t),e.prototype._next=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(t){return void this.destination.error(t)}this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){var i=this.innerSubscription;i&&i.unsubscribe(),this.add(this.innerSubscription=Object(o.a)(this,t,e,n))},e.prototype._complete=function(){var e=this.innerSubscription;e&&!e.closed||t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.innerSubscription=null},e.prototype.notifyComplete=function(e){this.remove(e),this.innerSubscription=null,this.isStopped&&t.prototype._complete.call(this)},e.prototype.notifyNext=function(t,e,n,i,r){this.resultSelector?this._tryNotifyNext(t,e,n,i):this.destination.next(e)},e.prototype._tryNotifyNext=function(t,e,n,i){var r;try{r=this.resultSelector(t,e,n,i)}catch(t){return void this.destination.error(t)}this.destination.next(r)},e}(r.a)},"6KUg":function(t,e,n){"use strict";var i=n("kP2E");e.NgRedux=i.NgRedux;var r=n("eaoh");e.DevToolsExtension=r.DevToolsExtension;var o=n("lBzb");e.select=o.select;var a=n("5JxN");e.NgReduxModule=a.NgReduxModule},"6S6c":function(t,e,n){"use strict";e.a=function(t,e){return Object(i.a)(t,e)(this)};var i=n("LaOa")},"6Xbx":function(t,e,n){"use strict";e.c=function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},n.d(e,"a",function(){return r}),e.b=function(t,e,n,i){var r,o=arguments.length,a=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(o<3?r(a):o>3?r(e,n,a):r(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},e.d=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},r=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}},"8Ut3":function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i=n("6Xbx"),r=function(t){function e(e,n){t.call(this),this.value=e,this.scheduler=n,this._isScalar=!0,n&&(this._isScalar=!1)}return Object(i.c)(e,t),e.create=function(t,n){return new e(t,n)},e.dispatch=function(t){var e=t.value,n=t.subscriber;t.done?n.complete():(n.next(e),n.closed||(t.done=!0,this.schedule(t)))},e.prototype._subscribe=function(t){var n=this.value,i=this.scheduler;if(i)return i.schedule(e.dispatch,0,{done:!1,value:n,subscriber:t});t.next(n),t.closed||t.complete()},e}(n("AP4T").Observable)},"8ofh":function(t,e,n){"use strict";e.a=function(t){return i=t,o};var i,r=n("NePw");function o(){try{return i.apply(this,arguments)}catch(t){return r.a.e=t,r.a}}},ABGK:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("AP4T"),r=n("6Xbx"),o=n("E9/g"),a=n("8ofh"),s=n("NePw"),u=function(){function t(t,e){this.compare=t,this.keySelector=e}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.compare,this.keySelector))},t}(),l=function(t){function e(e,n,i){t.call(this,e),this.keySelector=i,this.hasKey=!1,"function"==typeof n&&(this.compare=n)}return Object(r.c)(e,t),e.prototype.compare=function(t,e){return t===e},e.prototype._next=function(t){var e=t;if(this.keySelector&&(e=Object(a.a)(this.keySelector)(t))===s.a)return this.destination.error(s.a.e);var n=!1;if(this.hasKey){if((n=Object(a.a)(this.compare)(this.key,e))===s.a)return this.destination.error(s.a.e)}else this.hasKey=!0;!1===Boolean(n)&&(this.key=e,this.destination.next(t))},e}(o.a);i.Observable.prototype.distinctUntilChanged=function(t,e){return function(t,e){return function(n){return n.lift(new u(t,e))}}(t,e)(this)}},AP4T:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("xIGM"),r=n("E9/g"),o=n("V7AE"),a=n("grVA"),s=n("mz3w");n.d(e,"Observable",function(){return u});var u=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var i=this.operator,s=function(t,e,n){if(t){if(t instanceof r.a)return t;if(t[o.a])return t[o.a]()}return t||e||n?new r.a(t,e,n):new r.a(a.a)}(t,e,n);if(i?i.call(s,this.source):s.add(this.source||!s.syncErrorThrowable?this._subscribe(s):this._trySubscribe(s)),s.syncErrorThrowable&&(s.syncErrorThrowable=!1,s.syncErrorThrown))throw s.syncErrorValue;return s},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.syncErrorThrown=!0,t.syncErrorValue=e,t.error(e)}},t.prototype.forEach=function(t,e){var n=this;if(e||(i.a.Rx&&i.a.Rx.config&&i.a.Rx.config.Promise?e=i.a.Rx.config.Promise:i.a.Promise&&(e=i.a.Promise)),!e)throw new Error("no Promise impl found");return new e(function(e,i){var r;r=n.subscribe(function(e){if(r)try{t(e)}catch(t){i(t),r.unsubscribe()}else t(e)},i,e)})},t.prototype._subscribe=function(t){return this.source.subscribe(t)},t.prototype[s.a]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return 0===t.length?this:((n=t)?1===n.length?n[0]:function(t){return n.reduce(function(t,e){return e(t)},t)}:function(){})(this);var n},t.prototype.toPromise=function(t){var e=this;if(t||(i.a.Rx&&i.a.Rx.config&&i.a.Rx.config.Promise?t=i.a.Rx.config.Promise:i.a.Promise&&(t=i.a.Promise)),!t)throw new Error("no Promise impl found");return new t(function(t,n){var i;e.subscribe(function(t){return i=t},function(t){return n(t)},function(){return t(i)})})},t.create=function(e){return new t(e)},t}()},AYro:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r,o=n("2jIh"),a="object"==typeof self&&self&&self.Object===Object&&self,s=(o.a||a||Function("return this")()).Symbol,u=Object.prototype,l=u.hasOwnProperty,c=u.toString,p=s?s.toStringTag:void 0,h=Object.prototype.toString,f=s?s.toStringTag:void 0,d=(i=Object.getPrototypeOf,r=Object,function(t){return i(r(t))}),m=Function.prototype,y=Object.prototype,g=m.toString,v=y.hasOwnProperty,_=g.call(Object),b=function(t){if(!function(t){return null!=t&&"object"==typeof t}(t)||"[object Object]"!=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":f&&f in Object(t)?function(t){var e=l.call(t,p),n=t[p];try{t[p]=void 0;var i=!0}catch(t){}var r=c.call(t);return i&&(e?t[p]=n:delete t[p]),r}(t):function(t){return h.call(t)}(t)}(t))return!1;var e=d(t);if(null===e)return!0;var n=v.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&g.call(n)==_},x=n("R1KX"),w={INIT:"@@redux/INIT"};function E(t,e,n){var i;if("function"==typeof e&&"undefined"==typeof n&&(n=e,e=void 0),"undefined"!=typeof n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(E)(t,e)}if("function"!=typeof t)throw new Error("Expected the reducer to be a function.");var r=t,o=e,a=[],s=a,u=!1;function l(){s===a&&(s=a.slice())}function c(){return o}function p(t){if("function"!=typeof t)throw new Error("Expected listener to be a function.");var e=!0;return l(),s.push(t),function(){if(e){e=!1,l();var n=s.indexOf(t);s.splice(n,1)}}}function h(t){if(!b(t))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if("undefined"==typeof t.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(u)throw new Error("Reducers may not dispatch actions.");try{u=!0,o=r(o,t)}finally{u=!1}for(var e=a=s,n=0;n<e.length;n++)(0,e[n])();return t}return h({type:w.INIT}),(i={dispatch:h,subscribe:p,getState:c,replaceReducer:function(t){if("function"!=typeof t)throw new Error("Expected the nextReducer to be a function.");r=t,h({type:w.INIT})}})[x.a]=function(){var t,e=p;return(t={subscribe:function(t){if("object"!=typeof t)throw new TypeError("Expected the observer to be an object.");function n(){t.next&&t.next(c())}return n(),{unsubscribe:e(n)}}})[x.a]=function(){return this},t},i}function C(t,e){var n=e&&e.type;return"Given action "+(n&&'"'+n.toString()+'"'||"an action")+', reducer "'+t+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function O(t){for(var e=Object.keys(t),n={},i=0;i<e.length;i++){var r=e[i];"function"==typeof t[r]&&(n[r]=t[r])}var o=Object.keys(n),a=void 0;try{!function(t){Object.keys(t).forEach(function(e){var n=t[e];if("undefined"==typeof n(void 0,{type:w.INIT}))throw new Error('Reducer "'+e+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if("undefined"==typeof n(void 0,{type:"@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".")}))throw new Error('Reducer "'+e+"\" returned undefined when probed with a random type. Don't try to handle "+w.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')})}(n)}catch(t){a=t}return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1];if(a)throw a;for(var i=!1,r={},s=0;s<o.length;s++){var u=o[s],l=t[u],c=(0,n[u])(l,e);if("undefined"==typeof c){var p=C(u,e);throw new Error(p)}r[u]=c,i=i||c!==l}return i?r:t}}function P(t,e){return function(){return e(t.apply(void 0,arguments))}}function S(t,e){if("function"==typeof t)return P(t,e);if("object"!=typeof t||null===t)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===t?"null":typeof t)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var n=Object.keys(t),i={},r=0;r<n.length;r++){var o=n[r],a=t[o];"function"==typeof a&&(i[o]=P(a,e))}return i}function T(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return 0===e.length?function(t){return t}:1===e.length?e[0]:e.reduce(function(t,e){return function(){return t(e.apply(void 0,arguments))}})}var k=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t};function A(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return function(n,i,r){var o,a=t(n,i,r),s=a.dispatch,u={getState:a.getState,dispatch:function(t){return s(t)}};return o=e.map(function(t){return t(u)}),s=T.apply(void 0,o)(a.dispatch),k({},a,{dispatch:s})}}}n.d(e,"createStore",function(){return E}),n.d(e,"combineReducers",function(){return O}),n.d(e,"bindActionCreators",function(){return S}),n.d(e,"applyMiddleware",function(){return A}),n.d(e,"compose",function(){return T})},B1iP:function(t,e,n){"use strict";e.a=function(t){return"function"==typeof t}},C0ll:function(t,e,n){"use strict";e.omit=function(t,e){var n=Object.assign({},t);return e.forEach(function(t){return delete n[t]}),n}},DUns:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n("LMZF"),a=n("cqO5"),s=n("KG7u");n("xHJr"),n("iWCm"),e.ImageOverlayDirective=function(t){function e(e,n){var i=t.call(this,s.TRANSPARENT_PIXEL,[[0,0],[1,1]],{})||this;return i.urlChange=new o.EventEmitter,i.displayChange=new o.EventEmitter,i.opacityChange=new o.EventEmitter,i.boundsChange=new o.EventEmitter,i.northChange=new o.EventEmitter,i.eastChange=new o.EventEmitter,i.southChange=new o.EventEmitter,i.westChange=new o.EventEmitter,i.addEvent=new o.EventEmitter,i.removeEvent=new o.EventEmitter,i.popupopenEvent=new o.EventEmitter,i.popupcloseEvent=new o.EventEmitter,i.tooltipopenEvent=new o.EventEmitter,i.tooltipcloseEvent=new o.EventEmitter,i.clickEvent=new o.EventEmitter,i.dbclickEvent=new o.EventEmitter,i.mousedownEvent=new o.EventEmitter,i.mouseoverEvent=new o.EventEmitter,i.mouseoutEvent=new o.EventEmitter,i.contextmenuEvent=new o.EventEmitter,n.ref=i,i.on("remove",function(){i.displayChange.emit(!1)}),i.on("add",function(){i.displayChange.emit(!0)}),e.ref.addLayer(i),i.on("add",function(t){i.addEvent.emit(t)}),i.on("remove",function(t){i.removeEvent.emit(t)}),i.on("popupopen",function(t){i.popupopenEvent.emit(t)}),i.on("popupclose",function(t){i.popupcloseEvent.emit(t)}),i.on("tooltipopen",function(t){i.tooltipopenEvent.emit(t)}),i.on("tooltipclose",function(t){i.tooltipcloseEvent.emit(t)}),i.on("click",function(t){i.clickEvent.emit(t)}),i.on("dbclick",function(t){i.dbclickEvent.emit(t)}),i.on("mousedown",function(t){i.mousedownEvent.emit(t)}),i.on("mouseover",function(t){i.mouseoverEvent.emit(t)}),i.on("mouseout",function(t){i.mouseoutEvent.emit(t)}),i.on("contextmenu",function(t){i.contextmenuEvent.emit(t)}),i}return r(e,t),e.prototype.ngOnDestroy=function(){this.removeFrom(this._map)},e.prototype.setUrl=function(e){if(this.url!==e)return this.urlChange.emit(e),t.prototype.setUrl.call(this,e)},Object.defineProperty(e.prototype,"url",{get:function(){return this._url},set:function(t){this.setUrl(t)},enumerable:!0,configurable:!0}),e.prototype.setOpacity=function(e){if(this.opacity!==e)return this.opacityChange.emit(e),t.prototype.setOpacity.call(this,e)},Object.defineProperty(e.prototype,"opacity",{get:function(){return this.options.opacity},set:function(t){this.setOpacity(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"display",{get:function(){var t,e;try{t=this.getPane(),e=this.getElement()}catch(t){return!1}for(var n=0;n<t.children.length;n+=1)if(t.children[n]===e)return!0;return!1},set:function(t){if(this.display!==t){var e,n,i,r,o;try{e=this.getPane(),n=this.getElement(),i=this._map,r=this.getEvents(),o=Object.keys(r)}catch(t){return}if(t){e.appendChild(n);for(var a=0,s=o;a<s.length;a++)i.on(c=s[a],r[c],this)}else{e.removeChild(n);for(var u=0,l=o;u<l.length;u++){var c;i.off(c=l[u],r[c],this)}}}},enumerable:!0,configurable:!0}),e.prototype.setBounds=function(e){return t.prototype.setBounds.call(this,a.latLngBounds(e)),this.boundsChange.emit(this.bounds),this.northChange.emit(this.north),this.eastChange.emit(this.east),this.southChange.emit(this.south),this.westChange.emit(this.west),this},Object.defineProperty(e.prototype,"bounds",{get:function(){return this.getBounds()},set:function(t){this.setBounds(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"north",{get:function(){return this.getBounds().getNorth()},set:function(e){var n=this.getBounds();t.prototype.setBounds.call(this,a.latLngBounds([[n.getSouth(),n.getWest()],[e,n.getEast()]])),this.boundsChange.emit(this.bounds),this.northChange.emit(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"east",{get:function(){return this.getBounds().getEast()},set:function(e){var n=this.getBounds();t.prototype.setBounds.call(this,a.latLngBounds([[n.getSouth(),n.getWest()],[n.getNorth(),e]])),this.boundsChange.emit(this.bounds),this.eastChange.emit(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"south",{get:function(){return this.getBounds().getSouth()},set:function(e){var n=this.getBounds();t.prototype.setBounds.call(this,a.latLngBounds([[e,n.getWest()],[n.getNorth(),n.getEast()]])),this.boundsChange.emit(this.bounds),this.southChange.emit(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"west",{get:function(){return this.getBounds().getWest()},set:function(e){var n=this.getBounds();t.prototype.setBounds.call(this,a.latLngBounds([[n.getSouth(),e],[n.getNorth(),n.getEast()]])),this.boundsChange.emit(this.bounds),this.westChange.emit(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"crossOrigin",{get:function(){return this.options.crossOrigin},set:function(t){this.options.crossOrigin=t,this.getElement().crossOrigin=t?"":void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alt",{get:function(){return this.getElement().getAttribute("alt")},set:function(t){this.options.alt=t,this.getElement().alt=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"interactive",{get:function(){return this.options.interactive},set:function(t){this.options.interactive=t,this.onRemove(this._map),this.onAdd(this._map)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"attribution",{get:function(){return this.getAttribution()},set:function(t){this._map&&this._map.attributionControl&&(this._map.attributionControl.removeAttribution(this.getAttribution()),this._map.attributionControl.addAttribution(t)),this.options.attribution=t},enumerable:!0,configurable:!0}),e.decorators=[{type:o.Directive,args:[{selector:"yaga-image-overlay"}]}],e.propDecorators={urlChange:[{type:o.Output}],displayChange:[{type:o.Output}],opacityChange:[{type:o.Output}],boundsChange:[{type:o.Output}],northChange:[{type:o.Output}],eastChange:[{type:o.Output}],southChange:[{type:o.Output}],westChange:[{type:o.Output}],addEvent:[{type:o.Output,args:["add"]}],removeEvent:[{type:o.Output,args:["remove"]}],popupopenEvent:[{type:o.Output,args:["popupopen"]}],popupcloseEvent:[{type:o.Output,args:["popupclose"]}],tooltipopenEvent:[{type:o.Output,args:["tooltipopen"]}],tooltipcloseEvent:[{type:o.Output,args:["tooltipclose"]}],clickEvent:[{type:o.Output,args:["click"]}],dbclickEvent:[{type:o.Output,args:["dbclick"]}],mousedownEvent:[{type:o.Output,args:["mousedown"]}],mouseoverEvent:[{type:o.Output,args:["mouseover"]}],mouseoutEvent:[{type:o.Output,args:["mouseout"]}],contextmenuEvent:[{type:o.Output,args:["contextmenu"]}],url:[{type:o.Input}],opacity:[{type:o.Input}],display:[{type:o.Input}],bounds:[{type:o.Input}],north:[{type:o.Input}],east:[{type:o.Input}],south:[{type:o.Input}],west:[{type:o.Input}],crossOrigin:[{type:o.Input}],alt:[{type:o.Input}],interactive:[{type:o.Input}],attribution:[{type:o.Input}]},e}(a.ImageOverlay)},"E9/g":function(t,e,n){"use strict";n.d(e,"a",function(){return u});var i=n("6Xbx"),r=n("B1iP"),o=n("qLnt"),a=n("grVA"),s=n("V7AE"),u=function(t){function e(n,i,r){switch(t.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=a.a;break;case 1:if(!n){this.destination=a.a;break}if("object"==typeof n){n instanceof e?(this.syncErrorThrowable=n.syncErrorThrowable,this.destination=n,this.destination.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,n));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,n,i,r)}}return Object(i.c)(e,t),e.prototype[s.a]=function(){return this},e.create=function(t,n,i){var r=new e(t,n,i);return r.syncErrorThrowable=!1,r},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parent,e=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=e,this},e}(o.a),l=function(t){function e(e,n,i,o){var s;t.call(this),this._parentSubscriber=e;var u=this;Object(r.a)(n)?s=n:n&&(s=n.next,i=n.error,o=n.complete,n!==a.a&&(u=Object.create(n),Object(r.a)(u.unsubscribe)&&this.add(u.unsubscribe.bind(u)),u.unsubscribe=this.unsubscribe.bind(this))),this._context=u,this._next=s,this._error=i,this._complete=o}return Object(i.c)(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber;if(this._error)e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else{if(!e.syncErrorThrowable)throw this.unsubscribe(),t;e.syncErrorValue=t,e.syncErrorThrown=!0,this.unsubscribe()}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){throw this.unsubscribe(),t}},e.prototype.__tryOrSetError=function(t,e,n){try{e.call(this._context,n)}catch(e){return t.syncErrorValue=e,t.syncErrorThrown=!0,!0}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(u)},EaVi:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n("LMZF"),a=n("cqO5"),s=n("xHJr"),u=n("iWCm");e.FeatureGroupDirective=function(t){function e(e,n,i){var r=t.call(this)||this;return r.displayChange=new o.EventEmitter,r.layeraddEvent=new o.EventEmitter,r.layerremoveEvent=new o.EventEmitter,r.addEvent=new o.EventEmitter,r.removeEvent=new o.EventEmitter,r.popupopenEvent=new o.EventEmitter,r.popupcloseEvent=new o.EventEmitter,r.tooltipopenEvent=new o.EventEmitter,r.tooltipcloseEvent=new o.EventEmitter,i.ref=r,n.ref=r,r.on("remove",function(){r._map=null,r.displayChange.emit(!1)}),r.on("add",function(){r.displayChange.emit(!0)}),r.addTo(e.ref),r.parentLayerGroup=e.ref,r.on("layeradd",function(t){r.layeraddEvent.emit(t)}),r.on("layerremove",function(t){r.layerremoveEvent.emit(t)}),r.on("add",function(t){r.addEvent.emit(t)}),r.on("remove",function(t){r.removeEvent.emit(t)}),r.on("popupopen",function(t){r.popupopenEvent.emit(t)}),r.on("popupclose",function(t){r.popupcloseEvent.emit(t)}),r.on("tooltipopen",function(t){r.tooltipopenEvent.emit(t)}),r.on("tooltipclose",function(t){r.tooltipcloseEvent.emit(t)}),r}return r(e,t),e.prototype.ngOnDestroy=function(){this.removeFrom(this._map)},Object.defineProperty(e.prototype,"display",{get:function(){return!!this._map},set:function(t){t?this.addTo(this.parentLayerGroup):this.parentLayerGroup.removeLayer(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"attribution",{get:function(){return this.getAttribution()},set:function(t){this._map&&this._map.attributionControl&&(this._map.attributionControl.removeAttribution(this.getAttribution()),this._map.attributionControl.addAttribution(t)),this.options.attribution=t},enumerable:!0,configurable:!0}),e.prototype.removeFrom=function(e){return this.displayChange.emit(!1),t.prototype.removeFrom.call(this,e)},Object.defineProperty(e.prototype,"style",{get:function(){return{}},set:function(t){this.setStyle(t)},enumerable:!0,configurable:!0}),e.decorators=[{type:o.Directive,args:[{providers:[s.LayerGroupProvider,u.LayerProvider],selector:"yaga-feature-group"}]}],e.propDecorators={displayChange:[{type:o.Output}],layeraddEvent:[{type:o.Output,args:["layeradd"]}],layerremoveEvent:[{type:o.Output,args:["layerremove"]}],addEvent:[{type:o.Output,args:["add"]}],removeEvent:[{type:o.Output,args:["remove"]}],popupopenEvent:[{type:o.Output,args:["popupopen"]}],popupcloseEvent:[{type:o.Output,args:["popupclose"]}],tooltipopenEvent:[{type:o.Output,args:["tooltipopen"]}],tooltipcloseEvent:[{type:o.Output,args:["tooltipclose"]}],display:[{type:o.Input}],attribution:[{type:o.Input}],style:[{type:o.Input}]},e}(a.FeatureGroup)},"Ecq+":function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i=n("6Xbx"),r=function(t){function e(e){t.call(this),this.scheduler=e}return Object(i.c)(e,t),e.create=function(t){return new e(t)},e.dispatch=function(t){t.subscriber.complete()},e.prototype._subscribe=function(t){var n=this.scheduler;if(n)return n.schedule(e.dispatch,0,{subscriber:t});t.complete()},e}(n("AP4T").Observable)},FScj:function(t,e,n){"use strict";e.getIn=function t(e,n){if(!e)return e;if("function"==typeof e.getIn)return e.getIn(n);var i=n[0],r=n.slice(1);return void 0!==e[i]?0===r.length?e[i]:t(e[i],r):void 0}},GQSG:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("AP4T"),r=n("dmC+");i.Observable.prototype.map=r.a},H6Ze:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("LMZF");e.LayersControlProvider=function(){function t(){}return t.decorators=[{type:i.Injectable}],t}()},HZkj:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n("LMZF"),a=n("cqO5"),s=(n("TB0K"),n("nnmj"));e.ScaleControlDirective=function(t){function e(e){var n=t.call(this)||this;return n.displayChange=new o.EventEmitter,n.zIndexChange=new o.EventEmitter,n.positionChange=new o.EventEmitter,n.addEvent=new o.EventEmitter,n.removeEvent=new o.EventEmitter,n.clickEvent=new o.EventEmitter,n.dbclickEvent=new o.EventEmitter,n.mousedownEvent=new o.EventEmitter,n.mouseoverEvent=new o.EventEmitter,n.mouseoutEvent=new o.EventEmitter,e.ref.addControl(n),n.getContainer().addEventListener("click",function(t){n.clickEvent.emit(s.enhanceMouseEvent(t,n._map))}),n.getContainer().addEventListener("dbclick",function(t){n.dbclickEvent.emit(s.enhanceMouseEvent(t,n._map))}),n.getContainer().addEventListener("mousedown",function(t){n.mousedownEvent.emit(s.enhanceMouseEvent(t,n._map))}),n.getContainer().addEventListener("mouseover",function(t){n.mouseoverEvent.emit(s.enhanceMouseEvent(t,n._map))}),n.getContainer().addEventListener("mouseout",function(t){n.mouseoutEvent.emit(s.enhanceMouseEvent(t,n._map))}),n}return r(e,t),e.prototype.ngOnDestroy=function(){this._map.removeControl(this)},e.prototype.remove=function(){return t.prototype.remove.call(this),this.displayChange.emit(!1),this.removeEvent.emit({target:this,type:"remove"}),this},e.prototype.addTo=function(e){return t.prototype.addTo.call(this,e),this.displayChange.emit(!0),this.addEvent.emit({target:this,type:"add"}),this},e.prototype.setPosition=function(e){return t.prototype.setPosition.call(this,e),this.positionChange.emit(e),this},Object.defineProperty(e.prototype,"opacity",{get:function(){return parseFloat(this.getContainer().style.opacity)},set:function(t){this.getContainer().style.opacity=t.toString()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"display",{get:function(){return!(!this._map||"none"===this.getContainer().style.display)},set:function(t){this._map&&(this.getContainer().style.display=t?"":"none")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this.getPosition()},set:function(t){this.setPosition(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"zIndex",{get:function(){return parseInt(this.getContainer().style.zIndex,10)},set:function(t){t||(t=0),this.getContainer().style.zIndex=t.toString()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxWidth",{get:function(){return this.options.maxWidth},set:function(t){this.options.maxWidth=t,this._update()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"metric",{get:function(){return this.options.metric},set:function(t){for(;this.getContainer().hasChildNodes();)this.getContainer().removeChild(this.getContainer().lastChild);this.options.metric=t,this._addScales(this.options,"leaflet-control-scale-line",this.getContainer()),this._update()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imperial",{get:function(){return this.options.imperial},set:function(t){for(;this.getContainer().hasChildNodes();)this.getContainer().removeChild(this.getContainer().lastChild);this.options.imperial=t,this._addScales(this.options,"leaflet-control-scale-line",this.getContainer()),this._update()},enumerable:!0,configurable:!0}),e.decorators=[{type:o.Directive,args:[{selector:"yaga-scale-control"}]}],e.propDecorators={displayChange:[{type:o.Output}],zIndexChange:[{type:o.Output}],positionChange:[{type:o.Output}],addEvent:[{type:o.Output,args:["add"]}],removeEvent:[{type:o.Output,args:["remove"]}],clickEvent:[{type:o.Output,args:["click"]}],dbclickEvent:[{type:o.Output,args:["dbclick"]}],mousedownEvent:[{type:o.Output,args:["mousedown"]}],mouseoverEvent:[{type:o.Output,args:["mouseover"]}],mouseoutEvent:[{type:o.Output,args:["mouseout"]}],opacity:[{type:o.Input}],display:[{type:o.Input}],position:[{type:o.Input}],zIndex:[{type:o.Input}],maxWidth:[{type:o.Input}],metric:[{type:o.Input}],imperial:[{type:o.Input}]},e}(a.Control.Scale)},KG7u:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TRANSPARENT_PIXEL="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=",e.ANIMATION_DELAY=50,e.EXAMPLE_CONTENT="Vel ipsum odit quia velit omnis illo voluptatem ut. Aperiam porro voluptates maiores.",e.OSM_TILE_LAYER_URL="http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",e.IMAGE_OVERLAY_URL="http://live.osgeo.org/_images/osgeolive_menu6.png",e.EXAMPLE_WMS_LAYER_URL="http://www.wms.nrw.de/geobasis/wms_nw_dtk?",e.EXAMPLE_WMS_LAYER_NAMES=["nw_dtk_col"],e.ATTRIBUTION_PREFIX='<a href="https://yagajs.org" title="YAGA">YAGA</a> | <a href="https://leaflet-ng2.yagajs.org" title="Leaflet in Angular2">leaflet-ng2</a>',e.DEFAULT_STYLE={}},KRwF:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var i=n("6Xbx"),r=n("xIGM"),o=function(t){function e(e,n){t.call(this),this.promise=e,this.scheduler=n}return Object(i.c)(e,t),e.create=function(t,n){return new e(t,n)},e.prototype._subscribe=function(t){var e=this,n=this.promise,i=this.scheduler;if(null==i)this._isScalar?t.closed||(t.next(this.value),t.complete()):n.then(function(n){e.value=n,e._isScalar=!0,t.closed||(t.next(n),t.complete())},function(e){t.closed||t.error(e)}).then(null,function(t){r.a.setTimeout(function(){throw t})});else if(this._isScalar){if(!t.closed)return i.schedule(a,0,{value:this.value,subscriber:t})}else n.then(function(n){e.value=n,e._isScalar=!0,t.closed||t.add(i.schedule(a,0,{value:n,subscriber:t}))},function(e){t.closed||t.add(i.schedule(s,0,{err:e,subscriber:t}))}).then(null,function(t){r.a.setTimeout(function(){throw t})})},e}(n("AP4T").Observable);function a(t){var e=t.subscriber;e.closed||(e.next(t.value),e.complete())}function s(t){var e=t.subscriber;e.closed||e.error(t.err)}},LMZF:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),(function(t){n.d(e,"createPlatform",function(){return rn}),n.d(e,"assertPlatform",function(){return an}),n.d(e,"destroyPlatform",function(){return sn}),n.d(e,"getPlatform",function(){return un}),n.d(e,"PlatformRef",function(){return ln}),n.d(e,"ApplicationRef",function(){return pn}),n.d(e,"enableProdMode",function(){return tn}),n.d(e,"isDevMode",function(){return en}),n.d(e,"createPlatformFactory",function(){return on}),n.d(e,"NgProbeToken",function(){return nn}),n.d(e,"APP_ID",function(){return ee}),n.d(e,"PACKAGE_ROOT_URL",function(){return ue}),n.d(e,"PLATFORM_INITIALIZER",function(){return oe}),n.d(e,"PLATFORM_ID",function(){return ae}),n.d(e,"APP_BOOTSTRAP_LISTENER",function(){return se}),n.d(e,"APP_INITIALIZER",function(){return $t}),n.d(e,"ApplicationInitStatus",function(){return te}),n.d(e,"DebugElement",function(){return Rn}),n.d(e,"DebugNode",function(){return Dn}),n.d(e,"asNativeElements",function(){return jn}),n.d(e,"getDebugNode",function(){return Vn}),n.d(e,"Testability",function(){return Ge}),n.d(e,"TestabilityRegistry",function(){return We}),n.d(e,"setTestabilityGetter",function(){return Ke}),n.d(e,"TRANSLATIONS",function(){return pi}),n.d(e,"TRANSLATIONS_FORMAT",function(){return hi}),n.d(e,"LOCALE_ID",function(){return ci}),n.d(e,"MissingTranslationStrategy",function(){return fi}),n.d(e,"ApplicationModule",function(){return gi}),n.d(e,"wtfCreateScope",function(){return ze}),n.d(e,"wtfLeave",function(){return De}),n.d(e,"wtfStartTimeRange",function(){return Re}),n.d(e,"wtfEndTimeRange",function(){return je}),n.d(e,"Type",function(){return Lt}),n.d(e,"EventEmitter",function(){return Ne}),n.d(e,"ErrorHandler",function(){return Ot}),n.d(e,"Sanitizer",function(){return _i}),n.d(e,"SecurityContext",function(){return vi}),n.d(e,"ANALYZE_FOR_ENTRY_COMPONENTS",function(){return y}),n.d(e,"Attribute",function(){return g}),n.d(e,"ContentChild",function(){return b}),n.d(e,"ContentChildren",function(){return _}),n.d(e,"Query",function(){return v}),n.d(e,"ViewChild",function(){return w}),n.d(e,"ViewChildren",function(){return x}),n.d(e,"Component",function(){return S}),n.d(e,"Directive",function(){return P}),n.d(e,"HostBinding",function(){return I}),n.d(e,"HostListener",function(){return L}),n.d(e,"Input",function(){return k}),n.d(e,"Output",function(){return A}),n.d(e,"Pipe",function(){return T}),n.d(e,"CUSTOM_ELEMENTS_SCHEMA",function(){return M}),n.d(e,"NO_ERRORS_SCHEMA",function(){return z}),n.d(e,"NgModule",function(){return D}),n.d(e,"ViewEncapsulation",function(){return R}),n.d(e,"Version",function(){return j}),n.d(e,"VERSION",function(){return N}),n.d(e,"forwardRef",function(){return $}),n.d(e,"resolveForwardRef",function(){return tt}),n.d(e,"Injector",function(){return ot}),n.d(e,"ReflectiveInjector",function(){return Xt}),n.d(e,"ResolvedReflectiveFactory",function(){return Zt}),n.d(e,"ReflectiveKey",function(){return At}),n.d(e,"InjectionToken",function(){return u}),n.d(e,"Inject",function(){return B}),n.d(e,"Optional",function(){return F}),n.d(e,"Injectable",function(){return V}),n.d(e,"Self",function(){return Z}),n.d(e,"SkipSelf",function(){return U}),n.d(e,"Host",function(){return q}),n.d(e,"NgZone",function(){return Be}),n.d(e,"RenderComponentType",function(){return fn}),n.d(e,"Renderer",function(){return mn}),n.d(e,"Renderer2",function(){return _n}),n.d(e,"RendererFactory2",function(){return gn}),n.d(e,"RendererStyleFlags2",function(){return vn}),n.d(e,"RootRenderer",function(){return yn}),n.d(e,"COMPILER_OPTIONS",function(){return fe}),n.d(e,"Compiler",function(){return he}),n.d(e,"CompilerFactory",function(){return de}),n.d(e,"ModuleWithComponentFactories",function(){return ce}),n.d(e,"ComponentFactory",function(){return ye}),n.d(e,"ComponentRef",function(){return me}),n.d(e,"ComponentFactoryResolver",function(){return we}),n.d(e,"ElementRef",function(){return bn}),n.d(e,"NgModuleFactory",function(){return Pe}),n.d(e,"NgModuleRef",function(){return Oe}),n.d(e,"NgModuleFactoryLoader",function(){return xn}),n.d(e,"getModuleFactory",function(){return Cn}),n.d(e,"QueryList",function(){return On}),n.d(e,"SystemJsNgModuleLoader",function(){return Tn}),n.d(e,"SystemJsNgModuleLoaderConfig",function(){return Pn}),n.d(e,"TemplateRef",function(){return An}),n.d(e,"ViewContainerRef",function(){return In}),n.d(e,"EmbeddedViewRef",function(){return zn}),n.d(e,"ViewRef",function(){return Mn}),n.d(e,"ChangeDetectionStrategy",function(){return E}),n.d(e,"ChangeDetectorRef",function(){return Ln}),n.d(e,"DefaultIterableDiffer",function(){return Jn}),n.d(e,"IterableDiffers",function(){return ri}),n.d(e,"KeyValueDiffers",function(){return oi}),n.d(e,"SimpleChange",function(){return Hn}),n.d(e,"WrappedValue",function(){return qn}),n.d(e,"platformCore",function(){return li}),n.d(e,"\u0275ALLOW_MULTIPLE_PLATFORMS",function(){return $e}),n.d(e,"\u0275APP_ID_RANDOM_PROVIDER",function(){return ie}),n.d(e,"\u0275devModeEqual",function(){return Un}),n.d(e,"\u0275isListLikeIterable",function(){return Gn}),n.d(e,"\u0275ChangeDetectorStatus",function(){return C}),n.d(e,"\u0275isDefaultChangeDetectionStrategy",function(){return O}),n.d(e,"\u0275Console",function(){return le}),n.d(e,"\u0275ComponentFactory",function(){return ye}),n.d(e,"\u0275CodegenComponentFactoryResolver",function(){return Ee}),n.d(e,"\u0275ReflectionCapabilities",function(){return Dt}),n.d(e,"\u0275RenderDebugInfo",function(){return dn}),n.d(e,"\u0275global",function(){return W}),n.d(e,"\u0275looseIdentical",function(){return Y}),n.d(e,"\u0275stringify",function(){return Q}),n.d(e,"\u0275makeDecorator",function(){return h}),n.d(e,"\u0275isObservable",function(){return Qt}),n.d(e,"\u0275isPromise",function(){return Yt}),n.d(e,"\u0275clearOverrides",function(){return Ka}),n.d(e,"\u0275overrideComponentView",function(){return Wa}),n.d(e,"\u0275overrideProvider",function(){return Ga}),n.d(e,"\u0275NOT_FOUND_CHECK_ONLY_ELEMENT_INJECTOR",function(){return vo}),n.d(e,"\u0275defineComponent",function(){return eu}),n.d(e,"\u0275detectChanges",function(){return tu}),n.d(e,"\u0275renderComponent",function(){return $s}),n.d(e,"\u0275C",function(){return Fs}),n.d(e,"\u0275D",function(){return Bs}),n.d(e,"\u0275E",function(){return ks}),n.d(e,"\u0275T",function(){return js}),n.d(e,"\u0275V",function(){return qs}),n.d(e,"\u0275b",function(){return Xs}),n.d(e,"\u0275b1",function(){return Js}),n.d(e,"\u0275c",function(){return Vs}),n.d(e,"\u0275cR",function(){return Zs}),n.d(e,"\u0275cr",function(){return Us}),n.d(e,"\u0275e",function(){return Ms}),n.d(e,"\u0275p",function(){return zs}),n.d(e,"\u0275s",function(){return Rs}),n.d(e,"\u0275t",function(){return Ns}),n.d(e,"\u0275v",function(){return Hs}),n.d(e,"\u0275registerModuleFactory",function(){return En}),n.d(e,"\u0275EMPTY_ARRAY",function(){return yr}),n.d(e,"\u0275EMPTY_MAP",function(){return gr}),n.d(e,"\u0275and",function(){return vr}),n.d(e,"\u0275ccf",function(){return jr}),n.d(e,"\u0275cmf",function(){return Xa}),n.d(e,"\u0275crt",function(){return Ni}),n.d(e,"\u0275did",function(){return so}),n.d(e,"\u0275eld",function(){return _r}),n.d(e,"\u0275elementEventFullName",function(){return Ji}),n.d(e,"\u0275getComponentViewDefinitionFactory",function(){return Nr}),n.d(e,"\u0275inlineInterpolate",function(){return dr}),n.d(e,"\u0275interpolate",function(){return fr}),n.d(e,"\u0275mod",function(){return Tr}),n.d(e,"\u0275mpd",function(){return Sr}),n.d(e,"\u0275ncd",function(){return Ao}),n.d(e,"\u0275nov",function(){return Xr}),n.d(e,"\u0275pid",function(){return uo}),n.d(e,"\u0275prd",function(){return lo}),n.d(e,"\u0275pad",function(){return Mo}),n.d(e,"\u0275pod",function(){return zo}),n.d(e,"\u0275ppd",function(){return Lo}),n.d(e,"\u0275qud",function(){return Oo}),n.d(e,"\u0275ted",function(){return Ro}),n.d(e,"\u0275unv",function(){return Di}),n.d(e,"\u0275vid",function(){return Bo}),n.d(e,"AUTO_STYLE",function(){return fu}),n.d(e,"trigger",function(){return du}),n.d(e,"animate",function(){return mu}),n.d(e,"group",function(){return yu}),n.d(e,"sequence",function(){return gu}),n.d(e,"style",function(){return vu}),n.d(e,"state",function(){return _u}),n.d(e,"keyframes",function(){return bu}),n.d(e,"transition",function(){return xu}),n.d(e,"\u0275bf",function(){return au}),n.d(e,"\u0275bg",function(){return su}),n.d(e,"\u0275bk",function(){return pu}),n.d(e,"\u0275bh",function(){return uu}),n.d(e,"\u0275bj",function(){return cu}),n.d(e,"\u0275bi",function(){return lu}),n.d(e,"\u0275bl",function(){return hu}),n.d(e,"\u0275be",function(){return ou}),n.d(e,"\u0275n",function(){return di}),n.d(e,"\u0275o",function(){return mi}),n.d(e,"\u0275q",function(){return yi}),n.d(e,"\u0275i",function(){return ne}),n.d(e,"\u0275j",function(){return si}),n.d(e,"\u0275k",function(){return ui}),n.d(e,"\u0275l",function(){return Kn}),n.d(e,"\u0275m",function(){return ei}),n.d(e,"\u0275f",function(){return Jt}),n.d(e,"\u0275g",function(){return Bt}),n.d(e,"\u0275h",function(){return qt}),n.d(e,"\u0275r",function(){return Le}),n.d(e,"\u0275w",function(){return Te}),n.d(e,"\u0275u",function(){return Se}),n.d(e,"\u0275z",function(){return Ie}),n.d(e,"\u0275x",function(){return ke}),n.d(e,"\u0275y",function(){return Ae}),n.d(e,"\u0275bc",function(){return cs}),n.d(e,"\u0275a",function(){return d}),n.d(e,"\u0275d",function(){return m}),n.d(e,"\u0275ba",function(){return co}),n.d(e,"\u0275bb",function(){return Si});var i=n("6Xbx"),r=n("AP4T"),o=n("2kLc"),a=n("URbD"),s=n("TO51"),u=function(){function t(t){this._desc=t,this.ngMetadataName="InjectionToken"}return t.prototype.toString=function(){return"InjectionToken "+this._desc},t}(),l="__annotations__",c="__paramaters__",p="__prop__metadata__";function h(t,e,n,i){var r=f(e);function o(t){if(this instanceof o)return r.call(this,t),this;var e=new o(t),n=function(t){return(t.hasOwnProperty(l)?t[l]:Object.defineProperty(t,l,{value:[]})[l]).push(e),t};return i&&i(n),n}return n&&(o.prototype=Object.create(n.prototype)),o.prototype.ngMetadataName=t,o.annotationCls=o,o}function f(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(t){var i=t.apply(void 0,e);for(var r in i)this[r]=i[r]}}}function d(t,e,n){var i=f(e);function r(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(this instanceof r)return i.apply(this,t),this;var n,o=new((n=r).bind.apply(n,[void 0].concat(t)));return a.annotation=o,a;function a(t,e,n){for(var i=t.hasOwnProperty(c)?t[c]:Object.defineProperty(t,c,{value:[]})[c];i.length<=n;)i.push(null);return(i[n]=i[n]||[]).push(o),t}}return n&&(r.prototype=Object.create(n.prototype)),r.prototype.ngMetadataName=t,r.annotationCls=r,r}function m(t,e,n){var i=f(e);function r(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(this instanceof r)return i.apply(this,t),this;var n,o=new((n=r).bind.apply(n,[void 0].concat(t)));return function(t,e){var n=t.constructor,i=n.hasOwnProperty(p)?n[p]:Object.defineProperty(n,p,{value:{}})[p];i[e]=i.hasOwnProperty(e)&&i[e]||[],i[e].unshift(o)}}return n&&(r.prototype=Object.create(n.prototype)),r.prototype.ngMetadataName=t,r.annotationCls=r,r}var y=new u("AnalyzeForEntryComponents"),g=d("Attribute",function(t){return{attributeName:t}}),v=function(){},_=m("ContentChildren",function(t,e){return void 0===e&&(e={}),Object(i.a)({selector:t,first:!1,isViewQuery:!1,descendants:!1},e)},v),b=m("ContentChild",function(t,e){return void 0===e&&(e={}),Object(i.a)({selector:t,first:!0,isViewQuery:!1,descendants:!0},e)},v),x=m("ViewChildren",function(t,e){return void 0===e&&(e={}),Object(i.a)({selector:t,first:!1,isViewQuery:!0,descendants:!0},e)},v),w=m("ViewChild",function(t,e){return Object(i.a)({selector:t,first:!0,isViewQuery:!0,descendants:!0},e)},v),E=function(){var t={OnPush:0,Default:1};return t[t.OnPush]="OnPush",t[t.Default]="Default",t}(),C=function(){var t={CheckOnce:0,Checked:1,CheckAlways:2,Detached:3,Errored:4,Destroyed:5};return t[t.CheckOnce]="CheckOnce",t[t.Checked]="Checked",t[t.CheckAlways]="CheckAlways",t[t.Detached]="Detached",t[t.Errored]="Errored",t[t.Destroyed]="Destroyed",t}();function O(t){return null==t||t===E.Default}var P=h("Directive",function(t){return void 0===t&&(t={}),t}),S=h("Component",function(t){return void 0===t&&(t={}),Object(i.a)({changeDetection:E.Default},t)},P),T=h("Pipe",function(t){return Object(i.a)({pure:!0},t)}),k=m("Input",function(t){return{bindingPropertyName:t}}),A=m("Output",function(t){return{bindingPropertyName:t}}),I=m("HostBinding",function(t){return{hostPropertyName:t}}),L=m("HostListener",function(t,e){return{eventName:t,args:e}}),M={name:"custom-elements"},z={name:"no-errors-schema"},D=h("NgModule",function(t){return t}),R=function(){var t={Emulated:0,Native:1,None:2};return t[t.Emulated]="Emulated",t[t.Native]="Native",t[t.None]="None",t}(),j=function(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")},N=new j("5.2.3"),B=d("Inject",function(t){return{token:t}}),F=d("Optional"),V=h("Injectable"),Z=d("Self"),U=d("SkipSelf"),q=d("Host"),H="undefined"!=typeof window&&window,G="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,W=H||"undefined"!=typeof t&&t||G,K=null;function X(){if(!K){var t=W.Symbol;if(t&&t.iterator)K=t.iterator;else for(var e=Object.getOwnPropertyNames(Map.prototype),n=0;n<e.length;++n){var i=e[n];"entries"!==i&&"size"!==i&&Map.prototype[i]===Map.prototype.entries&&(K=i)}}return K}function J(t){Zone.current.scheduleMicroTask("scheduleMicrotask",t)}function Y(t,e){return t===e||"number"==typeof t&&"number"==typeof e&&isNaN(t)&&isNaN(e)}function Q(t){if("string"==typeof t)return t;if(t instanceof Array)return"["+t.map(Q).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return""+t.overriddenName;if(t.name)return""+t.name;var e=t.toString();if(null==e)return""+e;var n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function $(t){return t.__forward_ref__=$,t.toString=function(){return Q(this())},t}function tt(t){return"function"==typeof t&&t.hasOwnProperty("__forward_ref__")&&t.__forward_ref__===$?t():t}var et="__source",nt=new Object,it=nt,rt=function(){function t(){}return t.prototype.get=function(t,e){if(void 0===e&&(e=nt),e===nt)throw new Error("NullInjectorError: No provider for "+Q(t)+"!");return e},t}(),ot=function(){function t(){}return t.create=function(t,e){return Array.isArray(t)?new mt(t,e):new mt(t.providers,t.parent,t.name||null)},t.THROW_IF_NOT_FOUND=nt,t.NULL=new rt,t}(),at=function(t){return t},st=[],ut=at,lt=function(){return Array.prototype.slice.call(arguments)},ct={},pt=function(t){for(var e in t)if(t[e]===ct)return e;throw Error("!prop")}({provide:String,useValue:ct}),ht=ot.NULL,ft=/\n/gm,dt="\u0275",mt=function(){function t(t,e,n){void 0===e&&(e=ht),void 0===n&&(n=null),this.parent=e,this.source=n;var i=this._records=new Map;i.set(ot,{token:ot,fn:at,deps:st,value:this,useNew:!1}),function t(e,n){if(n)if((n=tt(n))instanceof Array)for(var i=0;i<n.length;i++)t(e,n[i]);else{if("function"==typeof n)throw vt("Function/Class not supported",n);if(!n||"object"!=typeof n||!n.provide)throw vt("Unexpected provider",n);var r=tt(n.provide),o=function(t){var e=function(t){var e=st,n=t.deps;if(n&&n.length){e=[];for(var i=0;i<n.length;i++){var r=6;if((u=tt(n[i]))instanceof Array)for(var o=0,a=u;o<a.length;o++){var s=a[o];s instanceof F||s==F?r|=1:s instanceof U||s==U?r&=-3:s instanceof Z||s==Z?r&=-5:u=s instanceof B?s.token:tt(s)}e.push({token:u,options:r})}}else if(t.useExisting){var u;e=[{token:u=tt(t.useExisting),options:6}]}else if(!(n||pt in t))throw vt("'deps' required",t);return e}(t),n=at,i=st,r=!1,o=tt(t.provide);if(pt in t)i=t.useValue;else if(t.useFactory)n=t.useFactory;else if(t.useExisting);else if(t.useClass)r=!0,n=tt(t.useClass);else{if("function"!=typeof o)throw vt("StaticProvider does not have [useValue|useFactory|useExisting|useClass] or [provide] is not newable",t);r=!0,n=o}return{deps:e,fn:n,useNew:r,value:i}}(n);if(!0===n.multi){var a=e.get(r);if(a){if(a.fn!==lt)throw yt(r)}else e.set(r,a={token:n.provide,deps:[],useNew:!1,fn:lt,value:st});a.deps.push({token:r=n,options:6})}var s=e.get(r);if(s&&s.fn==lt)throw yt(r);e.set(r,o)}}(i,t)}return t.prototype.get=function(t,e){var n=this._records.get(t);try{return function t(e,n,i,r,o){try{return function(e,n,i,r,o){var a,s;if(n){if((a=n.value)==ut)throw Error(dt+"Circular dependency");if(a===st){n.value=ut;var u=n.useNew,l=n.fn,c=n.deps,p=st;if(c.length){p=[];for(var h=0;h<c.length;h++){var f=c[h],d=f.options,m=2&d?i.get(f.token):void 0;p.push(t(f.token,m,i,m||4&d?r:ht,1&d?null:ot.THROW_IF_NOT_FOUND))}}n.value=a=u?new((s=l).bind.apply(s,[void 0].concat(p))):l.apply(void 0,p)}}else a=r.get(e,o);return a}(e,n,i,r,o)}catch(t){throw t instanceof Error||(t=new Error(t)),(t.ngTempTokenPath=t.ngTempTokenPath||[]).unshift(e),n&&n.value==ut&&(n.value=st),t}}(t,n,this._records,this.parent,e)}catch(e){var i=e.ngTempTokenPath;throw t[et]&&i.unshift(t[et]),e.message=gt("\n"+e.message,i,this.source),e.ngTokenPath=i,e.ngTempTokenPath=null,e}},t.prototype.toString=function(){var t=[];return this._records.forEach(function(e,n){return t.push(Q(n))}),"StaticInjector["+t.join(", ")+"]"},t}();function yt(t){return vt("Cannot mix multi providers and regular providers",t)}function gt(t,e,n){void 0===n&&(n=null),t=t&&"\n"===t.charAt(0)&&t.charAt(1)==dt?t.substr(2):t;var i=Q(e);if(e instanceof Array)i=e.map(Q).join(" -> ");else if("object"==typeof e){var r=[];for(var o in e)if(e.hasOwnProperty(o)){var a=e[o];r.push(o+":"+("string"==typeof a?JSON.stringify(a):Q(a)))}i="{"+r.join(", ")+"}"}return"StaticInjectorError"+(n?"("+n+")":"")+"["+i+"]: "+t.replace(ft,"\n  ")}function vt(t,e){return new Error(gt(t,e))}var _t="ngDebugContext",bt="ngOriginalError",xt="ngErrorLogger";function wt(t){return t[_t]}function Et(t){return t[bt]}function Ct(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t.error.apply(t,e)}var Ot=function(){function t(){this._console=console}return t.prototype.handleError=function(t){var e=this._findOriginalError(t),n=this._findContext(t),i=function(t){return t[xt]||Ct}(t);i(this._console,"ERROR",t),e&&i(this._console,"ORIGINAL ERROR",e),n&&i(this._console,"ERROR CONTEXT",n)},t.prototype._findContext=function(t){return t?wt(t)?wt(t):this._findContext(Et(t)):null},t.prototype._findOriginalError=function(t){for(var e=Et(t);e&&Et(e);)e=Et(e);return e},t}();function Pt(t){return t.length>1?" ("+function(t){for(var e=[],n=0;n<t.length;++n){if(e.indexOf(t[n])>-1)return e.push(t[n]),e;e.push(t[n])}return e}(t.slice().reverse()).map(function(t){return Q(t.token)}).join(" -> ")+")":""}function St(t,e,n,i){var r=[e],o=n(r),a=i?function(t,e){var n=o+" caused by: "+(e instanceof Error?e.message:e),i=Error(n);return i[bt]=e,i}(0,i):Error(o);return a.addKey=Tt,a.keys=r,a.injectors=[t],a.constructResolvingMessage=n,a[bt]=i,a}function Tt(t,e){this.injectors.push(t),this.keys.push(e),this.message=this.constructResolvingMessage(this.keys)}function kt(t,e){for(var n=[],i=0,r=e.length;i<r;i++){var o=e[i];n.push(o&&0!=o.length?o.map(Q).join(" "):"?")}return Error("Cannot resolve all parameters for '"+Q(t)+"'("+n.join(", ")+"). Make sure that all the parameters are decorated with Inject or have valid type annotations and that '"+Q(t)+"' is decorated with Injectable.")}var At=function(){function t(t,e){if(this.token=t,this.id=e,!t)throw new Error("Token must be defined!");this.displayName=Q(this.token)}return t.get=function(t){return It.get(tt(t))},Object.defineProperty(t,"numberOfKeys",{get:function(){return It.numberOfKeys},enumerable:!0,configurable:!0}),t}(),It=new(function(){function t(){this._allKeys=new Map}return t.prototype.get=function(t){if(t instanceof At)return t;if(this._allKeys.has(t))return this._allKeys.get(t);var e=new At(t,At.numberOfKeys);return this._allKeys.set(t,e),e},Object.defineProperty(t.prototype,"numberOfKeys",{get:function(){return this._allKeys.size},enumerable:!0,configurable:!0}),t}()),Lt=Function;function Mt(t){return"function"==typeof t}var zt=/^function\s+\S+\(\)\s*{[\s\S]+\.apply\(this,\s*arguments\)/,Dt=function(){function t(t){this._reflect=t||W.Reflect}return t.prototype.isReflectionEnabled=function(){return!0},t.prototype.factory=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return new(t.bind.apply(t,[void 0].concat(e)))}},t.prototype._zipTypesAndAnnotations=function(t,e){var n;n="undefined"==typeof t?new Array(e.length):new Array(t.length);for(var i=0;i<n.length;i++)n[i]="undefined"==typeof t?[]:t[i]!=Object?[t[i]]:[],e&&null!=e[i]&&(n[i]=n[i].concat(e[i]));return n},t.prototype._ownParameters=function(t,e){if(zt.exec(t.toString()))return null;if(t.parameters&&t.parameters!==e.parameters)return t.parameters;var n=t.ctorParameters;if(n&&n!==e.ctorParameters){var i="function"==typeof n?n():n,r=i.map(function(t){return t&&t.type}),o=i.map(function(t){return t&&Rt(t.decorators)});return this._zipTypesAndAnnotations(r,o)}var a=t.hasOwnProperty(c)&&t[c],s=this._reflect&&this._reflect.getOwnMetadata&&this._reflect.getOwnMetadata("design:paramtypes",t);return s||a?this._zipTypesAndAnnotations(s,a):new Array(t.length).fill(void 0)},t.prototype.parameters=function(t){if(!Mt(t))return[];var e=jt(t),n=this._ownParameters(t,e);return n||e===Object||(n=this.parameters(e)),n||[]},t.prototype._ownAnnotations=function(t,e){if(t.annotations&&t.annotations!==e.annotations){var n=t.annotations;return"function"==typeof n&&n.annotations&&(n=n.annotations),n}return t.decorators&&t.decorators!==e.decorators?Rt(t.decorators):t.hasOwnProperty(l)?t[l]:null},t.prototype.annotations=function(t){if(!Mt(t))return[];var e=jt(t),n=this._ownAnnotations(t,e)||[];return(e!==Object?this.annotations(e):[]).concat(n)},t.prototype._ownPropMetadata=function(t,e){if(t.propMetadata&&t.propMetadata!==e.propMetadata){var n=t.propMetadata;return"function"==typeof n&&n.propMetadata&&(n=n.propMetadata),n}if(t.propDecorators&&t.propDecorators!==e.propDecorators){var i=t.propDecorators,r={};return Object.keys(i).forEach(function(t){r[t]=Rt(i[t])}),r}return t.hasOwnProperty(p)?t[p]:null},t.prototype.propMetadata=function(t){if(!Mt(t))return{};var e=jt(t),n={};if(e!==Object){var i=this.propMetadata(e);Object.keys(i).forEach(function(t){n[t]=i[t]})}var r=this._ownPropMetadata(t,e);return r&&Object.keys(r).forEach(function(t){var e=[];n.hasOwnProperty(t)&&e.push.apply(e,n[t]),e.push.apply(e,r[t]),n[t]=e}),n},t.prototype.hasLifecycleHook=function(t,e){return t instanceof Lt&&e in t.prototype},t.prototype.guards=function(t){return{}},t.prototype.getter=function(t){return new Function("o","return o."+t+";")},t.prototype.setter=function(t){return new Function("o","v","return o."+t+" = v;")},t.prototype.method=function(t){return new Function("o","args","if (!o."+t+") throw new Error('\""+t+"\" is undefined');\n        return o."+t+".apply(o, args);")},t.prototype.importUri=function(t){return"object"==typeof t&&t.filePath?t.filePath:"./"+Q(t)},t.prototype.resourceUri=function(t){return"./"+Q(t)},t.prototype.resolveIdentifier=function(t,e,n,i){return i},t.prototype.resolveEnum=function(t,e){return t[e]},t}();function Rt(t){return t?t.map(function(t){var e=t.type.annotationCls;return new(e.bind.apply(e,[void 0].concat(t.args?t.args:[])))}):[]}function jt(t){var e=Object.getPrototypeOf(t.prototype);return(e?e.constructor:null)||Object}var Nt=new(function(){function t(t){this.reflectionCapabilities=t}return t.prototype.updateCapabilities=function(t){this.reflectionCapabilities=t},t.prototype.factory=function(t){return this.reflectionCapabilities.factory(t)},t.prototype.parameters=function(t){return this.reflectionCapabilities.parameters(t)},t.prototype.annotations=function(t){return this.reflectionCapabilities.annotations(t)},t.prototype.propMetadata=function(t){return this.reflectionCapabilities.propMetadata(t)},t.prototype.hasLifecycleHook=function(t,e){return this.reflectionCapabilities.hasLifecycleHook(t,e)},t.prototype.getter=function(t){return this.reflectionCapabilities.getter(t)},t.prototype.setter=function(t){return this.reflectionCapabilities.setter(t)},t.prototype.method=function(t){return this.reflectionCapabilities.method(t)},t.prototype.importUri=function(t){return this.reflectionCapabilities.importUri(t)},t.prototype.resourceUri=function(t){return this.reflectionCapabilities.resourceUri(t)},t.prototype.resolveIdentifier=function(t,e,n,i){return this.reflectionCapabilities.resolveIdentifier(t,e,n,i)},t.prototype.resolveEnum=function(t,e){return this.reflectionCapabilities.resolveEnum(t,e)},t}())(new Dt),Bt=function(){function t(t,e,n){this.key=t,this.optional=e,this.visibility=n}return t.fromKey=function(e){return new t(e,!1,null)},t}(),Ft=[],Vt=function(t,e,n){this.key=t,this.resolvedFactories=e,this.multiProvider=n,this.resolvedFactory=this.resolvedFactories[0]},Zt=function(t,e){this.factory=t,this.dependencies=e};function Ut(t){return new Vt(At.get(t.provide),[function(t){var e,n;if(t.useClass){var i=tt(t.useClass);e=Nt.factory(i),n=Ht(i)}else t.useExisting?(e=function(t){return t},n=[Bt.fromKey(At.get(t.useExisting))]):t.useFactory?(e=t.useFactory,n=function(t,e){if(e){var n=e.map(function(t){return[t]});return e.map(function(e){return Gt(t,e,n)})}return Ht(t)}(t.useFactory,t.deps)):(e=function(){return t.useValue},n=Ft);return new Zt(e,n)}(t)],t.multi||!1)}function qt(t){var e=function(t,e){for(var n=0;n<t.length;n++){var i=t[n],r=e.get(i.key.id);if(r){if(i.multiProvider!==r.multiProvider)throw Error("Cannot mix multi providers and regular providers, got: "+r+" "+i);if(i.multiProvider)for(var o=0;o<i.resolvedFactories.length;o++)r.resolvedFactories.push(i.resolvedFactories[o]);else e.set(i.key.id,i)}else{var a;a=i.multiProvider?new Vt(i.key,i.resolvedFactories.slice(),i.multiProvider):i,e.set(i.key.id,a)}}return e}(function t(e,n){return e.forEach(function(e){if(e instanceof Lt)n.push({provide:e,useClass:e});else if(e&&"object"==typeof e&&void 0!==e.provide)n.push(e);else{if(!(e instanceof Array))throw Error("Invalid provider - only instances of Provider and Type are allowed, got: "+e);t(e,n)}}),n}(t,[]).map(Ut),new Map);return Array.from(e.values())}function Ht(t){var e=Nt.parameters(t);if(!e)return[];if(e.some(function(t){return null==t}))throw kt(t,e);return e.map(function(n){return Gt(t,n,e)})}function Gt(t,e,n){var i=null,r=!1;if(!Array.isArray(e))return Wt(e instanceof B?e.token:e,r,null);for(var o=null,a=0;a<e.length;++a){var s=e[a];s instanceof Lt?i=s:s instanceof B?i=s.token:s instanceof F?r=!0:s instanceof Z||s instanceof U?o=s:s instanceof u&&(i=s)}if(null!=(i=tt(i)))return Wt(i,r,o);throw kt(t,n)}function Wt(t,e,n){return new Bt(At.get(t),e,n)}var Kt=new Object,Xt=function(){function t(){}return t.resolve=function(t){return qt(t)},t.resolveAndCreate=function(e,n){var i=t.resolve(e);return t.fromResolvedProviders(i,n)},t.fromResolvedProviders=function(t,e){return new Jt(t,e)},t}(),Jt=function(){function t(t,e){this._constructionCounter=0,this._providers=t,this.parent=e||null;var n=t.length;this.keyIds=new Array(n),this.objs=new Array(n);for(var i=0;i<n;i++)this.keyIds[i]=t[i].key.id,this.objs[i]=Kt}return t.prototype.get=function(t,e){return void 0===e&&(e=it),this._getByKey(At.get(t),null,e)},t.prototype.resolveAndCreateChild=function(t){var e=Xt.resolve(t);return this.createChildFromResolved(e)},t.prototype.createChildFromResolved=function(e){var n=new t(e);return n.parent=this,n},t.prototype.resolveAndInstantiate=function(t){return this.instantiateResolved(Xt.resolve([t])[0])},t.prototype.instantiateResolved=function(t){return this._instantiateProvider(t)},t.prototype.getProviderAtIndex=function(t){if(t<0||t>=this._providers.length)throw function(t){return Error("Index "+t+" is out-of-bounds.")}(t);return this._providers[t]},t.prototype._new=function(t){if(this._constructionCounter++>this._getMaxNumberOfObjects())throw St(this,t.key,function(t){return"Cannot instantiate cyclic dependency!"+Pt(t)});return this._instantiateProvider(t)},t.prototype._getMaxNumberOfObjects=function(){return this.objs.length},t.prototype._instantiateProvider=function(t){if(t.multiProvider){for(var e=new Array(t.resolvedFactories.length),n=0;n<t.resolvedFactories.length;++n)e[n]=this._instantiate(t,t.resolvedFactories[n]);return e}return this._instantiate(t,t.resolvedFactories[0])},t.prototype._instantiate=function(t,e){var n,i,r,o=this,a=e.factory;try{n=e.dependencies.map(function(t){return o._getByReflectiveDependency(t)})}catch(e){throw e.addKey&&e.addKey(this,t.key),e}try{i=a.apply(void 0,n)}catch(e){throw St(this,t.key,function(t){var e=Q(t[0].token);return r.message+": Error during instantiation of "+e+"!"+Pt(t)+"."},r=e)}return i},t.prototype._getByReflectiveDependency=function(t){return this._getByKey(t.key,t.visibility,t.optional?null:it)},t.prototype._getByKey=function(e,n,i){return e===t.INJECTOR_KEY?this:n instanceof Z?this._getByKeySelf(e,i):this._getByKeyDefault(e,i,n)},t.prototype._getObjByKeyId=function(t){for(var e=0;e<this.keyIds.length;e++)if(this.keyIds[e]===t)return this.objs[e]===Kt&&(this.objs[e]=this._new(this._providers[e])),this.objs[e];return Kt},t.prototype._throwOrNull=function(t,e){if(e!==it)return e;throw function(t,e){return St(t,e,function(t){return"No provider for "+Q(t[0].token)+"!"+Pt(t)})}(this,t)},t.prototype._getByKeySelf=function(t,e){var n=this._getObjByKeyId(t.id);return n!==Kt?n:this._throwOrNull(t,e)},t.prototype._getByKeyDefault=function(e,n,i){var r;for(r=i instanceof U?this.parent:this;r instanceof t;){var o=r,a=o._getObjByKeyId(e.id);if(a!==Kt)return a;r=o.parent}return null!==r?r.get(e.token,n):this._throwOrNull(e,n)},Object.defineProperty(t.prototype,"displayName",{get:function(){return"ReflectiveInjector(providers: ["+function(t,e){for(var n=new Array(t._providers.length),i=0;i<t._providers.length;++i)n[i]=' "'+t.getProviderAtIndex(i).key.displayName+'" ';return n}(this).join(", ")+"])"},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return this.displayName},t.INJECTOR_KEY=At.get(ot),t}();function Yt(t){return!!t&&"function"==typeof t.then}function Qt(t){return!!t&&"function"==typeof t.subscribe}var $t=new u("Application Initializer"),te=function(){function t(t){var e=this;this.appInits=t,this.initialized=!1,this.done=!1,this.donePromise=new Promise(function(t,n){e.resolve=t,e.reject=n})}return t.prototype.runInitializers=function(){var t=this;if(!this.initialized){var e=[],n=function(){t.done=!0,t.resolve()};if(this.appInits)for(var i=0;i<this.appInits.length;i++){var r=this.appInits[i]();Yt(r)&&e.push(r)}Promise.all(e).then(function(){n()}).catch(function(e){t.reject(e)}),0===e.length&&n(),this.initialized=!0}},t}(),ee=new u("AppId");function ne(){return""+re()+re()+re()}var ie={provide:ee,useFactory:ne,deps:[]};function re(){return String.fromCharCode(97+Math.floor(25*Math.random()))}var oe=new u("Platform Initializer"),ae=new u("Platform ID"),se=new u("appBootstrapListener"),ue=new u("Application Packages Root URL"),le=function(){function t(){}return t.prototype.log=function(t){console.log(t)},t.prototype.warn=function(t){console.warn(t)},t.ctorParameters=function(){return[]},t}(),ce=function(t,e){this.ngModuleFactory=t,this.componentFactories=e};function pe(){throw new Error("Runtime compiler is not loaded")}var he=function(){function t(){}return t.prototype.compileModuleSync=function(t){throw pe()},t.prototype.compileModuleAsync=function(t){throw pe()},t.prototype.compileModuleAndAllComponentsSync=function(t){throw pe()},t.prototype.compileModuleAndAllComponentsAsync=function(t){throw pe()},t.prototype.clearCache=function(){},t.prototype.clearCacheFor=function(t){},t}(),fe=new u("compilerOptions"),de=function(){},me=function(){},ye=function(){};function ge(t){var e=Error("No component factory found for "+Q(t)+". Did you add it to @NgModule.entryComponents?");return e[be]=t,e}var ve,_e,be="ngComponent",xe=function(){function t(){}return t.prototype.resolveComponentFactory=function(t){throw ge(t)},t}(),we=function(){function t(){}return t.NULL=new xe,t}(),Ee=function(){function t(t,e,n){this._parent=e,this._ngModule=n,this._factories=new Map;for(var i=0;i<t.length;i++){var r=t[i];this._factories.set(r.componentType,r)}}return t.prototype.resolveComponentFactory=function(t){var e=this._factories.get(t);if(!e&&this._parent&&(e=this._parent.resolveComponentFactory(t)),!e)throw ge(t);return new Ce(e,this._ngModule)},t}(),Ce=function(t){function e(e,n){var i=t.call(this)||this;return i.factory=e,i.ngModule=n,i.selector=e.selector,i.componentType=e.componentType,i.ngContentSelectors=e.ngContentSelectors,i.inputs=e.inputs,i.outputs=e.outputs,i}return Object(i.c)(e,t),e.prototype.create=function(t,e,n,i){return this.factory.create(t,e,n,i||this.ngModule)},e}(ye),Oe=function(){},Pe=function(){};function Se(){var t=W.wtf;return!(!t||!(ve=t.trace)||(_e=ve.events,0))}function Te(t,e){return void 0===e&&(e=null),_e.createScope(t,e)}function ke(t,e){return ve.leaveScope(t,e),e}function Ae(t,e){return ve.beginTimeRange(t,e)}function Ie(t){ve.endTimeRange(t)}var Le=Se();function Me(t,e){return null}var ze=Le?Te:function(t,e){return Me},De=Le?ke:function(t,e){return e},Re=Le?Ae:function(t,e){return null},je=Le?Ie:function(t){return null},Ne=function(t){function e(e){void 0===e&&(e=!1);var n=t.call(this)||this;return n.__isAsync=e,n}return Object(i.c)(e,t),e.prototype.emit=function(e){t.prototype.next.call(this,e)},e.prototype.subscribe=function(e,n,i){var r,o=function(t){return null},a=function(){return null};return e&&"object"==typeof e?(r=this.__isAsync?function(t){setTimeout(function(){return e.next(t)})}:function(t){e.next(t)},e.error&&(o=this.__isAsync?function(t){setTimeout(function(){return e.error(t)})}:function(t){e.error(t)}),e.complete&&(a=this.__isAsync?function(){setTimeout(function(){return e.complete()})}:function(){e.complete()})):(r=this.__isAsync?function(t){setTimeout(function(){return e(t)})}:function(t){e(t)},n&&(o=this.__isAsync?function(t){setTimeout(function(){return n(t)})}:function(t){n(t)}),i&&(a=this.__isAsync?function(){setTimeout(function(){return i()})}:function(){i()})),t.prototype.subscribe.call(this,r,o,a)},e}(s.a),Be=function(){function t(t){var e,n=t.enableLongStackTrace,i=void 0!==n&&n;if(this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ne(!1),this.onMicrotaskEmpty=new Ne(!1),this.onStable=new Ne(!1),this.onError=new Ne(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),(e=this)._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:function(t,n,i,r,o,a){try{return Ue(e),t.invokeTask(i,r,o,a)}finally{qe(e)}},onInvoke:function(t,n,i,r,o,a,s){try{return Ue(e),t.invoke(i,r,o,a,s)}finally{qe(e)}},onHasTask:function(t,n,i,r){t.hasTask(i,r),n===i&&("microTask"==r.change?(e.hasPendingMicrotasks=r.microTask,Ze(e)):"macroTask"==r.change&&(e.hasPendingMacrotasks=r.macroTask))},onHandleError:function(t,n,i,r){return t.handleError(i,r),e.runOutsideAngular(function(){return e.onError.emit(r)}),!1}})}return t.isInAngularZone=function(){return!0===Zone.current.get("isAngularZone")},t.assertInAngularZone=function(){if(!t.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")},t.assertNotInAngularZone=function(){if(t.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")},t.prototype.run=function(t,e,n){return this._inner.run(t,e,n)},t.prototype.runTask=function(t,e,n,i){var r=this._inner,o=r.scheduleEventTask("NgZoneEvent: "+i,t,Ve,Fe,Fe);try{return r.runTask(o,e,n)}finally{r.cancelTask(o)}},t.prototype.runGuarded=function(t,e,n){return this._inner.runGuarded(t,e,n)},t.prototype.runOutsideAngular=function(t){return this._outer.run(t)},t}();function Fe(){}var Ve={};function Ze(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(function(){return t.onStable.emit(null)})}finally{t.isStable=!0}}}function Ue(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function qe(t){t._nesting--,Ze(t)}var He=function(){function t(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ne,this.onMicrotaskEmpty=new Ne,this.onStable=new Ne,this.onError=new Ne}return t.prototype.run=function(t){return t()},t.prototype.runGuarded=function(t){return t()},t.prototype.runOutsideAngular=function(t){return t()},t.prototype.runTask=function(t){return t()},t}(),Ge=function(){function t(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this._watchAngularEvents()}return t.prototype._watchAngularEvents=function(){var t=this;this._ngZone.onUnstable.subscribe({next:function(){t._didWork=!0,t._isZoneStable=!1}}),this._ngZone.runOutsideAngular(function(){t._ngZone.onStable.subscribe({next:function(){Be.assertNotInAngularZone(),J(function(){t._isZoneStable=!0,t._runCallbacksIfReady()})}})})},t.prototype.increasePendingRequestCount=function(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount},t.prototype.decreasePendingRequestCount=function(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount},t.prototype.isStable=function(){return this._isZoneStable&&0==this._pendingCount&&!this._ngZone.hasPendingMacrotasks},t.prototype._runCallbacksIfReady=function(){var t=this;this.isStable()?J(function(){for(;0!==t._callbacks.length;)t._callbacks.pop()(t._didWork);t._didWork=!1}):this._didWork=!0},t.prototype.whenStable=function(t){this._callbacks.push(t),this._runCallbacksIfReady()},t.prototype.getPendingRequestCount=function(){return this._pendingCount},t.prototype.findProviders=function(t,e,n){return[]},t}(),We=function(){function t(){this._applications=new Map,Je.addToWindow(this)}return t.prototype.registerApplication=function(t,e){this._applications.set(t,e)},t.prototype.unregisterApplication=function(t){this._applications.delete(t)},t.prototype.unregisterAllApplications=function(){this._applications.clear()},t.prototype.getTestability=function(t){return this._applications.get(t)||null},t.prototype.getAllTestabilities=function(){return Array.from(this._applications.values())},t.prototype.getAllRootElements=function(){return Array.from(this._applications.keys())},t.prototype.findTestabilityInTree=function(t,e){return void 0===e&&(e=!0),Je.findTestabilityInTree(this,t,e)},t.ctorParameters=function(){return[]},t}();function Ke(t){Je=t}var Xe,Je=new(function(){function t(){}return t.prototype.addToWindow=function(t){},t.prototype.findTestabilityInTree=function(t,e,n){return null},t}()),Ye=!0,Qe=!1,$e=new u("AllowMultipleToken");function tn(){if(Qe)throw new Error("Cannot enable prod mode after platform setup.");Ye=!1}function en(){return Qe=!0,Ye}var nn=function(t,e){this.name=t,this.token=e};function rn(t){if(Xe&&!Xe.destroyed&&!Xe.injector.get($e,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Xe=t.get(ln);var e=t.get(oe,null);return e&&e.forEach(function(t){return t()}),Xe}function on(t,e,n){void 0===n&&(n=[]);var i="Platform: "+e,r=new u(i);return function(e){void 0===e&&(e=[]);var o=un();if(!o||o.injector.get($e,!1))if(t)t(n.concat(e).concat({provide:r,useValue:!0}));else{var a=n.concat(e).concat({provide:r,useValue:!0});rn(ot.create({providers:a,name:i}))}return an(r)}}function an(t){var e=un();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}function sn(){Xe&&!Xe.destroyed&&Xe.destroy()}function un(){return Xe&&!Xe.destroyed?Xe:null}var ln=function(){function t(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}return t.prototype.bootstrapModuleFactory=function(t,e){var n,i=this,r="noop"===(n=e?e.ngZone:void 0)?new He:("zone.js"===n?void 0:n)||new Be({enableLongStackTrace:en()}),o=[{provide:Be,useValue:r}];return r.run(function(){var e=ot.create({providers:o,parent:i.injector,name:t.moduleType.name}),n=t.create(e),a=n.injector.get(Ot,null);if(!a)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.onDestroy(function(){return hn(i._modules,n)}),r.runOutsideAngular(function(){return r.onError.subscribe({next:function(t){a.handleError(t)}})}),function(t,e,r){try{var o=((a=n.injector.get(te)).runInitializers(),a.donePromise.then(function(){return i._moduleDoBootstrap(n),n}));return Yt(o)?o.catch(function(n){throw e.runOutsideAngular(function(){return t.handleError(n)}),n}):o}catch(n){throw e.runOutsideAngular(function(){return t.handleError(n)}),n}var a}(a,r)})},t.prototype.bootstrapModule=function(t,e){var n=this;void 0===e&&(e=[]);var i=this.injector.get(de),r=cn({},e);return i.createCompiler([r]).compileModuleAsync(t).then(function(t){return n.bootstrapModuleFactory(t,r)})},t.prototype._moduleDoBootstrap=function(t){var e=t.injector.get(pn);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(function(t){return e.bootstrap(t)});else{if(!t.instance.ngDoBootstrap)throw new Error("The module "+Q(t.instance.constructor)+' was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.');t.instance.ngDoBootstrap(e)}this._modules.push(t)},t.prototype.onDestroy=function(t){this._destroyListeners.push(t)},Object.defineProperty(t.prototype,"injector",{get:function(){return this._injector},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(function(t){return t.destroy()}),this._destroyListeners.forEach(function(t){return t()}),this._destroyed=!0},Object.defineProperty(t.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!0,configurable:!0}),t}();function cn(t,e){return Array.isArray(e)?e.reduce(cn,t):Object(i.a)({},t,e)}var pn=function(){function t(t,e,n,i,s,u){var l=this;this._zone=t,this._console=e,this._injector=n,this._exceptionHandler=i,this._componentFactoryResolver=s,this._initStatus=u,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=en(),this._zone.onMicrotaskEmpty.subscribe({next:function(){l._zone.run(function(){l.tick()})}});var c=new r.Observable(function(t){l._stable=l._zone.isStable&&!l._zone.hasPendingMacrotasks&&!l._zone.hasPendingMicrotasks,l._zone.runOutsideAngular(function(){t.next(l._stable),t.complete()})}),p=new r.Observable(function(t){var e;l._zone.runOutsideAngular(function(){e=l._zone.onStable.subscribe(function(){Be.assertNotInAngularZone(),J(function(){l._stable||l._zone.hasPendingMacrotasks||l._zone.hasPendingMicrotasks||(l._stable=!0,t.next(!0))})})});var n=l._zone.onUnstable.subscribe(function(){Be.assertInAngularZone(),l._stable&&(l._stable=!1,l._zone.runOutsideAngular(function(){t.next(!1)}))});return function(){e.unsubscribe(),n.unsubscribe()}});this.isStable=Object(o.a)(c,a.a.call(p))}return t.prototype.bootstrap=function(t,e){var n,i=this;if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");n=t instanceof ye?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);var r=n instanceof Ce?null:this._injector.get(Oe),o=n.create(ot.NULL,[],e||n.selector,r);o.onDestroy(function(){i._unloadComponent(o)});var a=o.injector.get(Ge,null);return a&&o.injector.get(We).registerApplication(o.location.nativeElement,a),this._loadComponent(o),en()&&this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode."),o},t.prototype.tick=function(){var e=this;if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");var n=t._tickScope();try{this._runningTick=!0,this._views.forEach(function(t){return t.detectChanges()}),this._enforceNoNewChanges&&this._views.forEach(function(t){return t.checkNoChanges()})}catch(t){this._zone.runOutsideAngular(function(){return e._exceptionHandler.handleError(t)})}finally{this._runningTick=!1,De(n)}},t.prototype.attachView=function(t){var e=t;this._views.push(e),e.attachToAppRef(this)},t.prototype.detachView=function(t){var e=t;hn(this._views,e),e.detachFromAppRef()},t.prototype._loadComponent=function(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(se,[]).concat(this._bootstrapListeners).forEach(function(e){return e(t)})},t.prototype._unloadComponent=function(t){this.detachView(t.hostView),hn(this.components,t)},t.prototype.ngOnDestroy=function(){this._views.slice().forEach(function(t){return t.destroy()})},Object.defineProperty(t.prototype,"viewCount",{get:function(){return this._views.length},enumerable:!0,configurable:!0}),t._tickScope=ze("ApplicationRef#tick()"),t}();function hn(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)}var fn=function(t,e,n,i,r,o){this.id=t,this.templateUrl=e,this.slotCount=n,this.encapsulation=i,this.styles=r,this.animations=o},dn=function(){},mn=function(){},yn=function(){},gn=function(){},vn=function(){var t={Important:1,DashCase:2};return t[t.Important]="Important",t[t.DashCase]="DashCase",t}(),_n=function(){},bn=function(t){this.nativeElement=t},xn=function(){},wn=new Map;function En(t,e){var n=wn.get(t);if(n)throw new Error("Duplicate module registered for "+t+" - "+n.moduleType.name+" vs "+e.moduleType.name);wn.set(t,e)}function Cn(t){var e=wn.get(t);if(!e)throw new Error("No module with ID "+t+" loaded");return e}var On=function(){function t(){this.dirty=!0,this._results=[],this.changes=new Ne}return t.prototype.map=function(t){return this._results.map(t)},t.prototype.filter=function(t){return this._results.filter(t)},t.prototype.find=function(t){return this._results.find(t)},t.prototype.reduce=function(t,e){return this._results.reduce(t,e)},t.prototype.forEach=function(t){this._results.forEach(t)},t.prototype.some=function(t){return this._results.some(t)},t.prototype.toArray=function(){return this._results.slice()},t.prototype[X()]=function(){return this._results[X()]()},t.prototype.toString=function(){return this._results.toString()},t.prototype.reset=function(t){this._results=function t(e){return e.reduce(function(e,n){var i=Array.isArray(n)?t(n):n;return e.concat(i)},[])}(t),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]},t.prototype.notifyOnChanges=function(){this.changes.emit(this)},t.prototype.setDirty=function(){this.dirty=!0},t.prototype.destroy=function(){this.changes.complete(),this.changes.unsubscribe()},t}(),Pn=function(){},Sn={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"},Tn=function(){function t(t,e){this._compiler=t,this._config=e||Sn}return t.prototype.load=function(t){return this._compiler instanceof he?this.loadFactory(t):this.loadAndCompile(t)},t.prototype.loadAndCompile=function(t){var e=this,i=t.split("#"),r=i[0],o=i[1];return void 0===o&&(o="default"),n("YuZA")(r).then(function(t){return t[o]}).then(function(t){return kn(t,r,o)}).then(function(t){return e._compiler.compileModuleAsync(t)})},t.prototype.loadFactory=function(t){var e=t.split("#"),i=e[0],r=e[1],o="NgFactory";return void 0===r&&(r="default",o=""),n("YuZA")(this._config.factoryPathPrefix+i+this._config.factoryPathSuffix).then(function(t){return t[r+o]}).then(function(t){return kn(t,i,r)})},t}();function kn(t,e,n){if(!t)throw new Error("Cannot find '"+n+"' in '"+e+"'");return t}var An=function(){},In=function(){},Ln=function(){},Mn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),e}(Ln),zn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),e}(Mn),Dn=function(){function t(t,e,n){this._debugContext=n,this.nativeNode=t,e&&e instanceof Rn?e.addChild(this):this.parent=null,this.listeners=[]}return Object.defineProperty(t.prototype,"injector",{get:function(){return this._debugContext.injector},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"componentInstance",{get:function(){return this._debugContext.component},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"context",{get:function(){return this._debugContext.context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"references",{get:function(){return this._debugContext.references},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"providerTokens",{get:function(){return this._debugContext.providerTokens},enumerable:!0,configurable:!0}),t}(),Rn=function(t){function e(e,n,i){var r=t.call(this,e,n,i)||this;return r.properties={},r.attributes={},r.classes={},r.styles={},r.childNodes=[],r.nativeElement=e,r}return Object(i.c)(e,t),e.prototype.addChild=function(t){t&&(this.childNodes.push(t),t.parent=this)},e.prototype.removeChild=function(t){var e=this.childNodes.indexOf(t);-1!==e&&(t.parent=null,this.childNodes.splice(e,1))},e.prototype.insertChildrenAfter=function(t,e){var n,i=this,r=this.childNodes.indexOf(t);-1!==r&&((n=this.childNodes).splice.apply(n,[r+1,0].concat(e)),e.forEach(function(t){t.parent&&t.parent.removeChild(t),t.parent=i}))},e.prototype.insertBefore=function(t,e){var n=this.childNodes.indexOf(t);-1===n?this.addChild(e):(e.parent&&e.parent.removeChild(e),e.parent=this,this.childNodes.splice(n,0,e))},e.prototype.query=function(t){return this.queryAll(t)[0]||null},e.prototype.queryAll=function(t){var e=[];return Nn(this,t,e),e},e.prototype.queryAllNodes=function(t){var e=[];return Bn(this,t,e),e},Object.defineProperty(e.prototype,"children",{get:function(){return this.childNodes.filter(function(t){return t instanceof e})},enumerable:!0,configurable:!0}),e.prototype.triggerEventHandler=function(t,e){this.listeners.forEach(function(n){n.name==t&&n.callback(e)})},e}(Dn);function jn(t){return t.map(function(t){return t.nativeElement})}function Nn(t,e,n){t.childNodes.forEach(function(t){t instanceof Rn&&(e(t)&&n.push(t),Nn(t,e,n))})}function Bn(t,e,n){t instanceof Rn&&t.childNodes.forEach(function(t){e(t)&&n.push(t),t instanceof Rn&&Bn(t,e,n)})}var Fn=new Map;function Vn(t){return Fn.get(t)||null}function Zn(t){Fn.set(t.nativeNode,t)}function Un(t,e){var n=Gn(t),i=Gn(e);return n&&i?function(t,e,n){for(var i=t[X()](),r=e[X()]();;){var o=i.next(),a=r.next();if(o.done&&a.done)return!0;if(o.done||a.done)return!1;if(!n(o.value,a.value))return!1}}(t,e,Un):!(n||!t||"object"!=typeof t&&"function"!=typeof t||i||!e||"object"!=typeof e&&"function"!=typeof e)||Y(t,e)}var qn=function(){function t(t){this.wrapped=t}return t.wrap=function(e){return new t(e)},t.unwrap=function(e){return t.isWrapped(e)?e.wrapped:e},t.isWrapped=function(e){return e instanceof t},t}(),Hn=function(){function t(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}return t.prototype.isFirstChange=function(){return this.firstChange},t}();function Gn(t){return!!Wn(t)&&(Array.isArray(t)||!(t instanceof Map)&&X()in t)}function Wn(t){return null!==t&&("function"==typeof t||"object"==typeof t)}var Kn=function(){function t(){}return t.prototype.supports=function(t){return Gn(t)},t.prototype.create=function(t){return new Jn(t)},t}(),Xn=function(t,e){return e},Jn=function(){function t(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Xn}return t.prototype.forEachItem=function(t){var e;for(e=this._itHead;null!==e;e=e._next)t(e)},t.prototype.forEachOperation=function(t){for(var e=this._itHead,n=this._removalsHead,i=0,r=null;e||n;){var o=!n||e&&e.currentIndex<ti(n,i,r)?e:n,a=ti(o,i,r),s=o.currentIndex;if(o===n)i--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)i++;else{r||(r=[]);var u=a-i,l=s-i;if(u!=l){for(var c=0;c<u;c++){var p=c<r.length?r[c]:r[c]=0,h=p+c;l<=h&&h<u&&(r[c]=p+1)}r[o.previousIndex]=l-u}}a!==s&&t(o,a,s)}},t.prototype.forEachPreviousItem=function(t){var e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)},t.prototype.forEachAddedItem=function(t){var e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)},t.prototype.forEachMovedItem=function(t){var e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)},t.prototype.forEachRemovedItem=function(t){var e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)},t.prototype.forEachIdentityChange=function(t){var e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)},t.prototype.diff=function(t){if(null==t&&(t=[]),!Gn(t))throw new Error("Error trying to diff '"+Q(t)+"'. Only arrays and iterables are allowed");return this.check(t)?this:null},t.prototype.onDestroy=function(){},t.prototype.check=function(t){var e=this;this._reset();var n,i,r,o=this._itHead,a=!1;if(Array.isArray(t)){this.length=t.length;for(var s=0;s<this.length;s++)r=this._trackByFn(s,i=t[s]),null!==o&&Y(o.trackById,r)?(a&&(o=this._verifyReinsertion(o,i,r,s)),Y(o.item,i)||this._addIdentityChange(o,i)):(o=this._mismatch(o,i,r,s),a=!0),o=o._next}else n=0,function(t,e){if(Array.isArray(t))for(var n=0;n<t.length;n++)e(t[n]);else for(var i=t[X()](),r=void 0;!(r=i.next()).done;)e(r.value)}(t,function(t){r=e._trackByFn(n,t),null!==o&&Y(o.trackById,r)?(a&&(o=e._verifyReinsertion(o,t,r,n)),Y(o.item,t)||e._addIdentityChange(o,t)):(o=e._mismatch(o,t,r,n),a=!0),o=o._next,n++}),this.length=n;return this._truncate(o),this.collection=t,this.isDirty},Object.defineProperty(t.prototype,"isDirty",{get:function(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead},enumerable:!0,configurable:!0}),t.prototype._reset=function(){if(this.isDirty){var t=void 0,e=void 0;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=e)t.previousIndex=t.currentIndex,e=t._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}},t.prototype._mismatch=function(t,e,n,i){var r;return null===t?r=this._itTail:(r=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,i))?(Y(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,r,i)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Y(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,r,i)):t=this._addAfter(new Yn(e,n),r,i),t},t.prototype._verifyReinsertion=function(t,e,n,i){var r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==r?t=this._reinsertAfter(r,t._prev,i):t.currentIndex!=i&&(t.currentIndex=i,this._addToMoves(t,i)),t},t.prototype._truncate=function(t){for(;null!==t;){var e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)},t.prototype._reinsertAfter=function(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);var i=t._prevRemoved,r=t._nextRemoved;return null===i?this._removalsHead=r:i._nextRemoved=r,null===r?this._removalsTail=i:r._prevRemoved=i,this._insertAfter(t,e,n),this._addToMoves(t,n),t},t.prototype._moveAfter=function(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t},t.prototype._addAfter=function(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t},t.prototype._insertAfter=function(t,e,n){var i=null===e?this._itHead:e._next;return t._next=i,t._prev=e,null===i?this._itTail=t:i._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new $n),this._linkedRecords.put(t),t.currentIndex=n,t},t.prototype._remove=function(t){return this._addToRemovals(this._unlink(t))},t.prototype._unlink=function(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);var e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t},t.prototype._addToMoves=function(t,e){return t.previousIndex===e?t:(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t,t)},t.prototype._addToRemovals=function(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new $n),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t},t.prototype._addIdentityChange=function(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t},t}(),Yn=function(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null},Qn=function(){function t(){this._head=null,this._tail=null}return t.prototype.add=function(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)},t.prototype.get=function(t,e){var n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Y(n.trackById,t))return n;return null},t.prototype.remove=function(t){var e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head},t}(),$n=function(){function t(){this.map=new Map}return t.prototype.put=function(t){var e=t.trackById,n=this.map.get(e);n||(n=new Qn,this.map.set(e,n)),n.add(t)},t.prototype.get=function(t,e){var n=this.map.get(t);return n?n.get(t,e):null},t.prototype.remove=function(t){var e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t},Object.defineProperty(t.prototype,"isEmpty",{get:function(){return 0===this.map.size},enumerable:!0,configurable:!0}),t.prototype.clear=function(){this.map.clear()},t}();function ti(t,e,n){var i=t.previousIndex;if(null===i)return i;var r=0;return n&&i<n.length&&(r=n[i]),i+e+r}var ei=function(){function t(){}return t.prototype.supports=function(t){return t instanceof Map||Wn(t)},t.prototype.create=function(){return new ni},t}(),ni=function(){function t(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}return Object.defineProperty(t.prototype,"isDirty",{get:function(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead},enumerable:!0,configurable:!0}),t.prototype.forEachItem=function(t){var e;for(e=this._mapHead;null!==e;e=e._next)t(e)},t.prototype.forEachPreviousItem=function(t){var e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)},t.prototype.forEachChangedItem=function(t){var e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)},t.prototype.forEachAddedItem=function(t){var e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)},t.prototype.forEachRemovedItem=function(t){var e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)},t.prototype.diff=function(t){if(t){if(!(t instanceof Map||Wn(t)))throw new Error("Error trying to diff '"+Q(t)+"'. Only maps and objects are allowed")}else t=new Map;return this.check(t)?this:null},t.prototype.onDestroy=function(){},t.prototype.check=function(t){var e=this;this._reset();var n=this._mapHead;if(this._appendAfter=null,this._forEach(t,function(t,i){if(n&&n.key===i)e._maybeAddToChanges(n,t),e._appendAfter=n,n=n._next;else{var r=e._getOrCreateRecordForKey(i,t);n=e._insertBeforeOrAppend(n,r)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(var i=n;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty},t.prototype._insertBeforeOrAppend=function(t,e){if(t){var n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null},t.prototype._getOrCreateRecordForKey=function(t,e){if(this._records.has(t)){var n=this._records.get(t);this._maybeAddToChanges(n,e);var i=n._prev,r=n._next;return i&&(i._next=r),r&&(r._prev=i),n._next=null,n._prev=null,n}var o=new ii(t);return this._records.set(t,o),o.currentValue=e,this._addToAdditions(o),o},t.prototype._reset=function(){if(this.isDirty){var t=void 0;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}},t.prototype._maybeAddToChanges=function(t,e){Y(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))},t.prototype._addToAdditions=function(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)},t.prototype._addToChanges=function(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)},t.prototype._forEach=function(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(function(n){return e(t[n],n)})},t}(),ii=function(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null},ri=function(){function t(t){this.factories=t}return t.create=function(e,n){if(null!=n){var i=n.factories.slice();return new t(e=e.concat(i))}return new t(e)},t.extend=function(e){return{provide:t,useFactory:function(n){if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return t.create(e,n)},deps:[[t,new U,new F]]}},t.prototype.find=function(t){var e,n=this.factories.find(function(e){return e.supports(t)});if(null!=n)return n;throw new Error("Cannot find a differ supporting object '"+t+"' of type '"+((e=t).name||typeof e)+"'")},t}(),oi=function(){function t(t){this.factories=t}return t.create=function(e,n){if(n){var i=n.factories.slice();e=e.concat(i)}return new t(e)},t.extend=function(e){return{provide:t,useFactory:function(n){if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return t.create(e,n)},deps:[[t,new U,new F]]}},t.prototype.find=function(t){var e=this.factories.find(function(e){return e.supports(t)});if(e)return e;throw new Error("Cannot find a differ supporting object '"+t+"'")},t}(),ai=[new ei],si=new ri([new Kn]),ui=new oi(ai),li=on(null,"core",[{provide:ae,useValue:"unknown"},{provide:ln,deps:[ot]},{provide:We,deps:[]},{provide:le,deps:[]}]),ci=new u("LocaleId"),pi=new u("Translations"),hi=new u("TranslationsFormat"),fi=function(){var t={Error:0,Warning:1,Ignore:2};return t[t.Error]="Error",t[t.Warning]="Warning",t[t.Ignore]="Ignore",t}();function di(){return si}function mi(){return ui}function yi(t){return t||"en-US"}var gi=function(t){},vi=function(){var t={NONE:0,HTML:1,STYLE:2,SCRIPT:3,URL:4,RESOURCE_URL:5};return t[t.NONE]="NONE",t[t.HTML]="HTML",t[t.STYLE]="STYLE",t[t.SCRIPT]="SCRIPT",t[t.URL]="URL",t[t.RESOURCE_URL]="RESOURCE_URL",t}(),_i=function(){};function bi(t,e,n){var i=t.state,r=1792&i;return r===e?(t.state=-1793&i|n,t.initIndex=-1,!0):r===n}function xi(t,e,n){return(1792&t.state)===e&&t.initIndex<=n&&(t.initIndex=n+1,!0)}function wi(t,e){return t.nodes[e]}function Ei(t,e){return t.nodes[e]}function Ci(t,e){return t.nodes[e]}function Oi(t,e){return t.nodes[e]}function Pi(t,e){return t.nodes[e]}var Si=function(){},Ti={setCurrentNode:void 0,createRootView:void 0,createEmbeddedView:void 0,createComponentView:void 0,createNgModuleRef:void 0,overrideProvider:void 0,overrideComponentView:void 0,clearOverrides:void 0,checkAndUpdateView:void 0,checkNoChangesView:void 0,destroyView:void 0,resolveDep:void 0,createDebugContext:void 0,handleEvent:void 0,updateDirectives:void 0,updateRenderer:void 0,dirtyParentQueries:void 0};function ki(t,e,n,i){var r="ExpressionChangedAfterItHasBeenCheckedError: Expression has changed after it was checked. Previous value: '"+e+"'. Current value: '"+n+"'.";return i&&(r+=" It seems like the view has been created after its parent and its children have been dirty checked. Has it been created in a change detection hook ?"),function(t,e){var n=new Error(t);return Ai(n,e),n}(r,t)}function Ai(t,e){t[_t]=e,t[xt]=e.logError.bind(e)}function Ii(t){return new Error("ViewDestroyedError: Attempt to use a destroyed view: "+t)}var Li=function(){},Mi=new Map;function zi(t){var e=Mi.get(t);return e||(e=Q(t)+"_"+Mi.size,Mi.set(t,e)),e}function Di(t,e,n,i){if(qn.isWrapped(i)){i=qn.unwrap(i);var r=t.def.nodes[e].bindingIndex+n,o=qn.unwrap(t.oldValues[r]);t.oldValues[r]=new qn(o)}return i}var Ri="$$undefined",ji="$$empty";function Ni(t){return{id:Ri,styles:t.styles,encapsulation:t.encapsulation,data:t.data}}var Bi=0;function Fi(t){if(t&&t.id===Ri){var e=null!=t.encapsulation&&t.encapsulation!==R.None||t.styles.length||Object.keys(t.data).length;t.id=e?"c"+Bi++:ji}return t&&t.id===ji&&(t=null),t||null}function Vi(t,e,n,i){return!(!(2&t.state)&&Y(t.oldValues[e.bindingIndex+n],i))}function Zi(t,e,n,i){return!!Vi(t,e,n,i)&&(t.oldValues[e.bindingIndex+n]=i,!0)}function Ui(t,e,n,i){var r=t.oldValues[e.bindingIndex+n];if(1&t.state||!Un(r,i)){var o=e.bindings[n].name;throw ki(Ti.createDebugContext(t,e.nodeIndex),o+": "+r,o+": "+i,0!=(1&t.state))}}function qi(t){for(var e=t;e;)2&e.def.flags&&(e.state|=8),e=e.viewContainerParent||e.parent}function Hi(t,e){for(var n=t;n&&n!==e;)n.state|=64,n=n.viewContainerParent||n.parent}function Gi(t,e,n,i){try{return qi(33554432&t.def.nodes[e].flags?Ei(t,e).componentView:t),Ti.handleEvent(t,e,n,i)}catch(e){t.root.errorHandler.handleError(e)}}function Wi(t){return t.parent?Ei(t.parent,t.parentNodeDef.nodeIndex):null}function Ki(t){return t.parent?t.parentNodeDef.parent:null}function Xi(t,e){switch(201347067&e.flags){case 1:return Ei(t,e.nodeIndex).renderElement;case 2:return wi(t,e.nodeIndex).renderText}}function Ji(t,e){return t?t+":"+e:e}function Yi(t){return!!t.parent&&!!(32768&t.parentNodeDef.flags)}function Qi(t){return!(!t.parent||32768&t.parentNodeDef.flags)}function $i(t){return 1<<t%32}function tr(t){var e={},n=0,i={};return t&&t.forEach(function(t){var r=t[0],o=t[1];"number"==typeof r?(e[r]=o,n|=$i(r)):i[r]=o}),{matchedQueries:e,references:i,matchedQueryIds:n}}function er(t,e){return t.map(function(t){var n,i;return Array.isArray(t)?(i=t[0],n=t[1]):(i=0,n=t),n&&("function"==typeof n||"object"==typeof n)&&e&&Object.defineProperty(n,et,{value:e,configurable:!0}),{flags:i,token:n,tokenKey:zi(n)}})}function nr(t,e,n){var i=n.renderParent;return i?0==(1&i.flags)||0==(33554432&i.flags)||i.element.componentRendererType&&i.element.componentRendererType.encapsulation===R.Native?Ei(t,n.renderParent.nodeIndex).renderElement:void 0:e}var ir=new WeakMap;function rr(t){var e=ir.get(t);return e||((e=t(function(){return Li})).factory=t,ir.set(t,e)),e}function or(t,e,n,i,r){3===e&&(n=t.renderer.parentNode(Xi(t,t.def.lastRenderRootNode))),ar(t,e,0,t.def.nodes.length-1,n,i,r)}function ar(t,e,n,i,r,o,a){for(var s=n;s<=i;s++){var u=t.def.nodes[s];11&u.flags&&ur(t,u,e,r,o,a),s+=u.childCount}}function sr(t,e,n,i,r,o){for(var a=t;a&&!Yi(a);)a=a.parent;for(var s=a.parent,u=Ki(a),l=u.nodeIndex+u.childCount,c=u.nodeIndex+1;c<=l;c++){var p=s.def.nodes[c];p.ngContentIndex===e&&ur(s,p,n,i,r,o),c+=p.childCount}if(!s.parent){var h=t.root.projectableNodes[e];if(h)for(c=0;c<h.length;c++)lr(t,h[c],n,i,r,o)}}function ur(t,e,n,i,r,o){if(8&e.flags)sr(t,e.ngContent.index,n,i,r,o);else{var a=Xi(t,e);if(3===n&&33554432&e.flags&&48&e.bindingFlags?(16&e.bindingFlags&&lr(t,a,n,i,r,o),32&e.bindingFlags&&lr(Ei(t,e.nodeIndex).componentView,a,n,i,r,o)):lr(t,a,n,i,r,o),16777216&e.flags)for(var s=Ei(t,e.nodeIndex).viewContainer._embeddedViews,u=0;u<s.length;u++)or(s[u],n,i,r,o);1&e.flags&&!e.element.name&&ar(t,n,e.nodeIndex+1,e.nodeIndex+e.childCount,i,r,o)}}function lr(t,e,n,i,r,o){var a=t.renderer;switch(n){case 1:a.appendChild(i,e);break;case 2:a.insertBefore(i,e,r);break;case 3:a.removeChild(i,e);break;case 0:o.push(e)}}var cr=/^:([^:]+):(.+)$/;function pr(t){if(":"===t[0]){var e=t.match(cr);return[e[1],e[2]]}return["",t]}function hr(t){for(var e=0,n=0;n<t.length;n++)e|=t[n].flags;return e}function fr(t,e){for(var n="",i=0;i<2*t;i+=2)n=n+e[i]+mr(e[i+1]);return n+e[2*t]}function dr(t,e,n,i,r,o,a,s,u,l,c,p,h,f,d,m,y,g,v,_){switch(t){case 1:return e+mr(n)+i;case 2:return e+mr(n)+i+mr(r)+o;case 3:return e+mr(n)+i+mr(r)+o+mr(a)+s;case 4:return e+mr(n)+i+mr(r)+o+mr(a)+s+mr(u)+l;case 5:return e+mr(n)+i+mr(r)+o+mr(a)+s+mr(u)+l+mr(c)+p;case 6:return e+mr(n)+i+mr(r)+o+mr(a)+s+mr(u)+l+mr(c)+p+mr(h)+f;case 7:return e+mr(n)+i+mr(r)+o+mr(a)+s+mr(u)+l+mr(c)+p+mr(h)+f+mr(d)+m;case 8:return e+mr(n)+i+mr(r)+o+mr(a)+s+mr(u)+l+mr(c)+p+mr(h)+f+mr(d)+m+mr(y)+g;case 9:return e+mr(n)+i+mr(r)+o+mr(a)+s+mr(u)+l+mr(c)+p+mr(h)+f+mr(d)+m+mr(y)+g+mr(v)+_;default:throw new Error("Does not support more than 9 expressions")}}function mr(t){return null!=t?t.toString():""}var yr=[],gr={};function vr(t,e,n,i,r,o){t|=1;var a=tr(e);return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,flags:t,checkIndex:-1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:a.matchedQueries,matchedQueryIds:a.matchedQueryIds,references:a.references,ngContentIndex:n,childCount:i,bindings:[],bindingFlags:0,outputs:[],element:{ns:null,name:null,attrs:null,template:o?rr(o):null,componentProvider:null,componentView:null,componentRendererType:null,publicProviders:null,allProviders:null,handleEvent:r||Li},provider:null,text:null,query:null,ngContent:null}}function _r(t,e,n,i,r,o,a,s,u,l,c,p){void 0===a&&(a=[]),l||(l=Li);var h=tr(n),f=h.matchedQueries,d=h.references,m=h.matchedQueryIds,y=null,g=null;o&&(y=(A=pr(o))[0],g=A[1]),s=s||[];for(var v=new Array(s.length),_=0;_<s.length;_++){var b=s[_],x=b[0],w=b[2],E=pr(b[1]),C=E[0],O=E[1],P=void 0,S=void 0;switch(15&x){case 4:S=w;break;case 1:case 8:P=w}v[_]={flags:x,ns:C,name:O,nonMinifiedName:O,securityContext:P,suffix:S}}u=u||[];var T=new Array(u.length);for(_=0;_<u.length;_++){var k=u[_];T[_]={type:0,target:k[0],eventName:k[1],propName:null}}var A,I=(a=a||[]).map(function(t){var e=t[1],n=pr(t[0]);return[n[0],n[1],e]});return p=Fi(p),c&&(e|=33554432),{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:e|=1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:f,matchedQueryIds:m,references:d,ngContentIndex:i,childCount:r,bindings:v,bindingFlags:hr(v),outputs:T,element:{ns:y,name:g,attrs:I,template:null,componentProvider:null,componentView:c||null,componentRendererType:p,publicProviders:null,allProviders:null,handleEvent:l||Li},provider:null,text:null,query:null,ngContent:null}}function br(t,e,n){var i,r=n.element,o=t.root.selectorOrNode,a=t.renderer;if(t.parent||!o){i=r.name?a.createElement(r.name,r.ns):a.createComment("");var s=nr(t,e,n);s&&a.appendChild(s,i)}else i=a.selectRootElement(o);if(r.attrs)for(var u=0;u<r.attrs.length;u++){var l=r.attrs[u];a.setAttribute(i,l[1],l[2],l[0])}return i}function xr(t,e,n,i){for(var r=0;r<n.outputs.length;r++){var o=n.outputs[r],a=wr(t,n.nodeIndex,Ji(o.target,o.eventName)),s=o.target,u=t;"component"===o.target&&(s=null,u=e);var l=u.renderer.listen(s||i,o.eventName,a);t.disposables[n.outputIndex+r]=l}}function wr(t,e,n){return function(i){return Gi(t,e,n,i)}}function Er(t,e,n,i){if(!Zi(t,e,n,i))return!1;var r=e.bindings[n],o=Ei(t,e.nodeIndex),a=o.renderElement,s=r.name;switch(15&r.flags){case 1:!function(t,e,n,i,r,o){var a=e.securityContext,s=a?t.root.sanitizer.sanitize(a,o):o;s=null!=s?s.toString():null;var u=t.renderer;null!=o?u.setAttribute(n,r,s,i):u.removeAttribute(n,r,i)}(t,r,a,r.ns,s,i);break;case 2:!function(t,e,n,i){var r=t.renderer;i?r.addClass(e,n):r.removeClass(e,n)}(t,a,s,i);break;case 4:!function(t,e,n,i,r){var o=t.root.sanitizer.sanitize(vi.STYLE,r);if(null!=o){o=o.toString();var a=e.suffix;null!=a&&(o+=a)}else o=null;var s=t.renderer;null!=o?s.setStyle(n,i,o):s.removeStyle(n,i)}(t,r,a,s,i);break;case 8:!function(t,e,n,i,r){var o=e.securityContext,a=o?t.root.sanitizer.sanitize(o,r):r;t.renderer.setProperty(n,i,a)}(33554432&e.flags&&32&r.flags?o.componentView:t,r,a,s,i)}return!0}var Cr=new Object,Or=zi(ot),Pr=zi(Oe);function Sr(t,e,n,i){return n=tt(n),{index:-1,deps:er(i,Q(e)),flags:t,token:e,value:n}}function Tr(t){for(var e={},n=0;n<t.length;n++){var i=t[n];i.index=n,e[zi(i.token)]=i}return{factory:null,providersByKey:e,providers:t}}function kr(t,e,n){if(void 0===n&&(n=ot.THROW_IF_NOT_FOUND),8&e.flags)return e.token;if(2&e.flags&&(n=null),1&e.flags)return t._parent.get(e.token,n);var i=e.tokenKey;switch(i){case Or:case Pr:return t}var r=t._def.providersByKey[i];if(r){var o=t._providers[r.index];return void 0===o&&(o=t._providers[r.index]=Ar(t,r)),o===Cr?void 0:o}return t._parent.get(e.token,n)}function Ar(t,e){var n;switch(201347067&e.flags){case 512:n=function(t,e,n){var i=n.length;switch(i){case 0:return new e;case 1:return new e(kr(t,n[0]));case 2:return new e(kr(t,n[0]),kr(t,n[1]));case 3:return new e(kr(t,n[0]),kr(t,n[1]),kr(t,n[2]));default:for(var r=new Array(i),o=0;o<i;o++)r[o]=kr(t,n[o]);return new(e.bind.apply(e,[void 0].concat(r)))}}(t,e.value,e.deps);break;case 1024:n=function(t,e,n){var i=n.length;switch(i){case 0:return e();case 1:return e(kr(t,n[0]));case 2:return e(kr(t,n[0]),kr(t,n[1]));case 3:return e(kr(t,n[0]),kr(t,n[1]),kr(t,n[2]));default:for(var r=Array(i),o=0;o<i;o++)r[o]=kr(t,n[o]);return e.apply(void 0,r)}}(t,e.value,e.deps);break;case 2048:n=kr(t,e.deps[0]);break;case 256:n=e.value}return void 0===n?Cr:n}function Ir(t,e){var n=t.viewContainer._embeddedViews;if((null==e||e>=n.length)&&(e=n.length-1),e<0)return null;var i=n[e];return i.viewContainerParent=null,Dr(n,e),Ti.dirtyParentQueries(i),Mr(i),i}function Lr(t,e,n){var i=e?Xi(e,e.def.lastRenderRootNode):t.renderElement;or(n,2,n.renderer.parentNode(i),n.renderer.nextSibling(i),void 0)}function Mr(t){or(t,3,null,null,void 0)}function zr(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Dr(t,e){e>=t.length-1?t.pop():t.splice(e,1)}var Rr=new Object;function jr(t,e,n,i,r,o){return new Br(t,e,n,i,r,o)}function Nr(t){return t.viewDefFactory}var Br=function(t){function e(e,n,i,r,o,a){var s=t.call(this)||this;return s.selector=e,s.componentType=n,s._inputs=r,s._outputs=o,s.ngContentSelectors=a,s.viewDefFactory=i,s}return Object(i.c)(e,t),Object.defineProperty(e.prototype,"inputs",{get:function(){var t=[],e=this._inputs;for(var n in e)t.push({propName:n,templateName:e[n]});return t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outputs",{get:function(){var t=[];for(var e in this._outputs)t.push({propName:e,templateName:this._outputs[e]});return t},enumerable:!0,configurable:!0}),e.prototype.create=function(t,e,n,i){if(!i)throw new Error("ngModule should be provided");var r=rr(this.viewDefFactory),o=r.nodes[0].element.componentProvider.nodeIndex,a=Ti.createRootView(t,e||[],n,r,i,Rr),s=Ci(a,o).instance;return n&&a.renderer.setAttribute(Ei(a,0).renderElement,"ng-version",N.full),new Fr(a,new qr(a),s)},e}(ye),Fr=function(t){function e(e,n,i){var r=t.call(this)||this;return r._view=e,r._viewRef=n,r._component=i,r._elDef=r._view.def.nodes[0],r.hostView=n,r.changeDetectorRef=n,r.instance=i,r}return Object(i.c)(e,t),Object.defineProperty(e.prototype,"location",{get:function(){return new bn(Ei(this._view,this._elDef.nodeIndex).renderElement)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"injector",{get:function(){return new Kr(this._view,this._elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"componentType",{get:function(){return this._component.constructor},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){this._viewRef.destroy()},e.prototype.onDestroy=function(t){this._viewRef.onDestroy(t)},e}(me);function Vr(t,e,n){return new Zr(t,e,n)}var Zr=function(){function t(t,e,n){this._view=t,this._elDef=e,this._data=n,this._embeddedViews=[]}return Object.defineProperty(t.prototype,"element",{get:function(){return new bn(this._data.renderElement)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"injector",{get:function(){return new Kr(this._view,this._elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parentInjector",{get:function(){for(var t=this._view,e=this._elDef.parent;!e&&t;)e=Ki(t),t=t.parent;return t?new Kr(t,e):new Kr(this._view,null)},enumerable:!0,configurable:!0}),t.prototype.clear=function(){for(var t=this._embeddedViews.length-1;t>=0;t--){var e=Ir(this._data,t);Ti.destroyView(e)}},t.prototype.get=function(t){var e=this._embeddedViews[t];if(e){var n=new qr(e);return n.attachToViewContainerRef(this),n}return null},Object.defineProperty(t.prototype,"length",{get:function(){return this._embeddedViews.length},enumerable:!0,configurable:!0}),t.prototype.createEmbeddedView=function(t,e,n){var i=t.createEmbeddedView(e||{});return this.insert(i,n),i},t.prototype.createComponent=function(t,e,n,i,r){var o=n||this.parentInjector;r||t instanceof Ce||(r=o.get(Oe));var a=t.create(o,i,void 0,r);return this.insert(a.hostView,e),a},t.prototype.insert=function(t,e){if(t.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");var n,i,r,o,a=t;return r=a._view,o=(n=this._data).viewContainer._embeddedViews,null!==(i=e)&&void 0!==i||(i=o.length),r.viewContainerParent=this._view,zr(o,i,r),function(t,e){var n=Wi(e);if(n&&n!==t&&!(16&e.state)){e.state|=16;var i=n.template._projectedViews;i||(i=n.template._projectedViews=[]),i.push(e),function(t,n){if(!(4&n.flags)){e.parent.def.nodeFlags|=4,n.flags|=4;for(var i=n.parent;i;)i.childFlags|=4,i=i.parent}}(0,e.parentNodeDef)}}(n,r),Ti.dirtyParentQueries(r),Lr(n,i>0?o[i-1]:null,r),a.attachToViewContainerRef(this),t},t.prototype.move=function(t,e){if(t.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");var n,i,r,o,a,s=this._embeddedViews.indexOf(t._view);return r=e,a=(o=(n=this._data).viewContainer._embeddedViews)[i=s],Dr(o,i),null==r&&(r=o.length),zr(o,r,a),Ti.dirtyParentQueries(a),Mr(a),Lr(n,r>0?o[r-1]:null,a),t},t.prototype.indexOf=function(t){return this._embeddedViews.indexOf(t._view)},t.prototype.remove=function(t){var e=Ir(this._data,t);e&&Ti.destroyView(e)},t.prototype.detach=function(t){var e=Ir(this._data,t);return e?new qr(e):null},t}();function Ur(t){return new qr(t)}var qr=function(){function t(t){this._view=t,this._viewContainerRef=null,this._appRef=null}return Object.defineProperty(t.prototype,"rootNodes",{get:function(){return or(this._view,0,void 0,void 0,t=[]),t;var t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"context",{get:function(){return this._view.context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"destroyed",{get:function(){return 0!=(128&this._view.state)},enumerable:!0,configurable:!0}),t.prototype.markForCheck=function(){qi(this._view)},t.prototype.detach=function(){this._view.state&=-5},t.prototype.detectChanges=function(){var t=this._view.root.rendererFactory;t.begin&&t.begin();try{Ti.checkAndUpdateView(this._view)}finally{t.end&&t.end()}},t.prototype.checkNoChanges=function(){Ti.checkNoChangesView(this._view)},t.prototype.reattach=function(){this._view.state|=4},t.prototype.onDestroy=function(t){this._view.disposables||(this._view.disposables=[]),this._view.disposables.push(t)},t.prototype.destroy=function(){this._appRef?this._appRef.detachView(this):this._viewContainerRef&&this._viewContainerRef.detach(this._viewContainerRef.indexOf(this)),Ti.destroyView(this._view)},t.prototype.detachFromAppRef=function(){this._appRef=null,Mr(this._view),Ti.dirtyParentQueries(this._view)},t.prototype.attachToAppRef=function(t){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t},t.prototype.attachToViewContainerRef=function(t){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=t},t}();function Hr(t,e){return new Gr(t,e)}var Gr=function(t){function e(e,n){var i=t.call(this)||this;return i._parentView=e,i._def=n,i}return Object(i.c)(e,t),e.prototype.createEmbeddedView=function(t){return new qr(Ti.createEmbeddedView(this._parentView,this._def,this._def.element.template,t))},Object.defineProperty(e.prototype,"elementRef",{get:function(){return new bn(Ei(this._parentView,this._def.nodeIndex).renderElement)},enumerable:!0,configurable:!0}),e}(An);function Wr(t,e){return new Kr(t,e)}var Kr=function(){function t(t,e){this.view=t,this.elDef=e}return t.prototype.get=function(t,e){return void 0===e&&(e=ot.THROW_IF_NOT_FOUND),Ti.resolveDep(this.view,this.elDef,!!this.elDef&&0!=(33554432&this.elDef.flags),{flags:0,token:t,tokenKey:zi(t)},e)},t}();function Xr(t,e){var n=t.def.nodes[e];if(1&n.flags){var i=Ei(t,n.nodeIndex);return n.element.template?i.template:i.renderElement}if(2&n.flags)return wi(t,n.nodeIndex).renderText;if(20240&n.flags)return Ci(t,n.nodeIndex).instance;throw new Error("Illegal state: read nodeValue for node index "+e)}function Jr(t){return new Yr(t.renderer)}var Yr=function(){function t(t){this.delegate=t}return t.prototype.selectRootElement=function(t){return this.delegate.selectRootElement(t)},t.prototype.createElement=function(t,e){var n=pr(e),i=this.delegate.createElement(n[1],n[0]);return t&&this.delegate.appendChild(t,i),i},t.prototype.createViewRoot=function(t){return t},t.prototype.createTemplateAnchor=function(t){var e=this.delegate.createComment("");return t&&this.delegate.appendChild(t,e),e},t.prototype.createText=function(t,e){var n=this.delegate.createText(e);return t&&this.delegate.appendChild(t,n),n},t.prototype.projectNodes=function(t,e){for(var n=0;n<e.length;n++)this.delegate.appendChild(t,e[n])},t.prototype.attachViewAfter=function(t,e){for(var n=this.delegate.parentNode(t),i=this.delegate.nextSibling(t),r=0;r<e.length;r++)this.delegate.insertBefore(n,e[r],i)},t.prototype.detachView=function(t){for(var e=0;e<t.length;e++){var n=t[e],i=this.delegate.parentNode(n);this.delegate.removeChild(i,n)}},t.prototype.destroyView=function(t,e){for(var n=0;n<e.length;n++)this.delegate.destroyNode(e[n])},t.prototype.listen=function(t,e,n){return this.delegate.listen(t,e,n)},t.prototype.listenGlobal=function(t,e,n){return this.delegate.listen(t,e,n)},t.prototype.setElementProperty=function(t,e,n){this.delegate.setProperty(t,e,n)},t.prototype.setElementAttribute=function(t,e,n){var i=pr(e),r=i[0],o=i[1];null!=n?this.delegate.setAttribute(t,o,n,r):this.delegate.removeAttribute(t,o,r)},t.prototype.setBindingDebugInfo=function(t,e,n){},t.prototype.setElementClass=function(t,e,n){n?this.delegate.addClass(t,e):this.delegate.removeClass(t,e)},t.prototype.setElementStyle=function(t,e,n){null!=n?this.delegate.setStyle(t,e,n):this.delegate.removeStyle(t,e)},t.prototype.invokeElementMethod=function(t,e,n){t[e].apply(t,n)},t.prototype.setText=function(t,e){this.delegate.setValue(t,e)},t.prototype.animate=function(){throw new Error("Renderer.animate is no longer supported!")},t}();function Qr(t,e,n,i){return new $r(t,e,n,i)}var $r=function(){function t(t,e,n,i){this._moduleType=t,this._parent=e,this._bootstrapComponents=n,this._def=i,this._destroyListeners=[],this._destroyed=!1,this.injector=this,function(t){for(var e=t._def,n=t._providers=new Array(e.providers.length),i=0;i<e.providers.length;i++){var r=e.providers[i];4096&r.flags||(n[i]=Ar(t,r))}}(this)}return t.prototype.get=function(t,e){return void 0===e&&(e=ot.THROW_IF_NOT_FOUND),kr(this,{token:t,tokenKey:zi(t),flags:0},e)},Object.defineProperty(t.prototype,"instance",{get:function(){return this.get(this._moduleType)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"componentFactoryResolver",{get:function(){return this.get(we)},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){if(this._destroyed)throw new Error("The ng module "+Q(this.instance.constructor)+" has already been destroyed.");this._destroyed=!0,function(t,e){for(var n=t._def,i=0;i<n.providers.length;i++)if(131072&n.providers[i].flags){var r=t._providers[i];r&&r!==Cr&&r.ngOnDestroy()}}(this),this._destroyListeners.forEach(function(t){return t()})},t.prototype.onDestroy=function(t){this._destroyListeners.push(t)},t}(),to=zi(mn),eo=zi(_n),no=zi(bn),io=zi(In),ro=zi(An),oo=zi(Ln),ao=zi(ot);function so(t,e,n,i,r,o,a,s){var u=[];if(a)for(var l in a){var c=a[l];u[c[0]]={flags:8,name:l,nonMinifiedName:c[1],ns:null,securityContext:null,suffix:null}}var p=[];if(s)for(var h in s)p.push({type:1,propName:h,target:null,eventName:s[h]});return co(t,e|=16384,n,i,r,r,o,u,p)}function uo(t,e,n){return co(-1,t|=16,null,0,e,e,n)}function lo(t,e,n,i,r){return co(-1,t,e,0,n,i,r)}function co(t,e,n,i,r,o,a,s,u){var l=tr(n),c=l.matchedQueries,p=l.references,h=l.matchedQueryIds;u||(u=[]),s||(s=[]),o=tt(o);var f=er(a,Q(r));return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:e,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:c,matchedQueryIds:h,references:p,ngContentIndex:-1,childCount:i,bindings:s,bindingFlags:hr(s),outputs:u,element:null,provider:{token:r,value:o,deps:f},text:null,query:null,ngContent:null}}function po(t,e){return yo(t,e)}function ho(t,e){for(var n=t;n.parent&&!Yi(n);)n=n.parent;return go(n.parent,Ki(n),!0,e.provider.value,e.provider.deps)}function fo(t,e){var n=go(t,e.parent,(32768&e.flags)>0,e.provider.value,e.provider.deps);if(e.outputs.length)for(var i=0;i<e.outputs.length;i++){var r=e.outputs[i],o=n[r.propName].subscribe(mo(t,e.parent.nodeIndex,r.eventName));t.disposables[e.outputIndex+i]=o.unsubscribe.bind(o)}return n}function mo(t,e,n){return function(i){return Gi(t,e,n,i)}}function yo(t,e){var n=(8192&e.flags)>0,i=e.provider;switch(201347067&e.flags){case 512:return go(t,e.parent,n,i.value,i.deps);case 1024:return function(t,e,n,i,r){var o=r.length;switch(o){case 0:return i();case 1:return i(_o(t,e,n,r[0]));case 2:return i(_o(t,e,n,r[0]),_o(t,e,n,r[1]));case 3:return i(_o(t,e,n,r[0]),_o(t,e,n,r[1]),_o(t,e,n,r[2]));default:for(var a=Array(o),s=0;s<o;s++)a[s]=_o(t,e,n,r[s]);return i.apply(void 0,a)}}(t,e.parent,n,i.value,i.deps);case 2048:return _o(t,e.parent,n,i.deps[0]);case 256:return i.value}}function go(t,e,n,i,r){var o=r.length;switch(o){case 0:return new i;case 1:return new i(_o(t,e,n,r[0]));case 2:return new i(_o(t,e,n,r[0]),_o(t,e,n,r[1]));case 3:return new i(_o(t,e,n,r[0]),_o(t,e,n,r[1]),_o(t,e,n,r[2]));default:for(var a=new Array(o),s=0;s<o;s++)a[s]=_o(t,e,n,r[s]);return new(i.bind.apply(i,[void 0].concat(a)))}}var vo={};function _o(t,e,n,i,r){if(void 0===r&&(r=ot.THROW_IF_NOT_FOUND),8&i.flags)return i.token;var o=t;2&i.flags&&(r=null);var a=i.tokenKey;for(a===oo&&(n=!(!e||!e.element.componentView)),e&&1&i.flags&&(n=!1,e=e.parent);t;){if(e)switch(a){case to:return Jr(bo(t,e,n));case eo:return bo(t,e,n).renderer;case no:return new bn(Ei(t,e.nodeIndex).renderElement);case io:return Ei(t,e.nodeIndex).viewContainer;case ro:if(e.element.template)return Ei(t,e.nodeIndex).template;break;case oo:return Ur(bo(t,e,n));case ao:return Wr(t,e);default:var s=(n?e.element.allProviders:e.element.publicProviders)[a];if(s){var u=Ci(t,s.nodeIndex);return u||(u={instance:yo(t,s)},t.nodes[s.nodeIndex]=u),u.instance}}n=Yi(t),e=Ki(t),t=t.parent}var l=o.root.injector.get(i.token,vo);return l!==vo||r===vo?l:o.root.ngModule.injector.get(i.token,r)}function bo(t,e,n){var i;if(n)i=Ei(t,e.nodeIndex).componentView;else for(i=t;i.parent&&!Yi(i);)i=i.parent;return i}function xo(t,e,n,i,r,o){if(32768&n.flags){var a=Ei(t,n.parent.nodeIndex).componentView;2&a.def.flags&&(a.state|=8)}if(e.instance[n.bindings[i].name]=r,524288&n.flags){o=o||{};var s=qn.unwrap(t.oldValues[n.bindingIndex+i]);o[n.bindings[i].nonMinifiedName]=new Hn(s,r,0!=(2&t.state))}return t.oldValues[n.bindingIndex+i]=r,o}function wo(t,e){if(t.def.nodeFlags&e)for(var n=t.def.nodes,i=0,r=0;r<n.length;r++){var o=n[r],a=o.parent;for(!a&&o.flags&e&&Co(t,r,o.flags&e,i++),0==(o.childFlags&e)&&(r+=o.childCount);a&&1&a.flags&&r===a.nodeIndex+a.childCount;)a.directChildFlags&e&&(i=Eo(t,a,e,i)),a=a.parent}}function Eo(t,e,n,i){for(var r=e.nodeIndex+1;r<=e.nodeIndex+e.childCount;r++){var o=t.def.nodes[r];o.flags&n&&Co(t,r,o.flags&n,i++),r+=o.childCount}return i}function Co(t,e,n,i){var r=Ci(t,e);if(r){var o=r.instance;o&&(Ti.setCurrentNode(t,e),1048576&n&&xi(t,512,i)&&o.ngAfterContentInit(),2097152&n&&o.ngAfterContentChecked(),4194304&n&&xi(t,768,i)&&o.ngAfterViewInit(),8388608&n&&o.ngAfterViewChecked(),131072&n&&o.ngOnDestroy())}}function Oo(t,e,n){var i=[];for(var r in n)i.push({propName:r,bindingType:n[r]});return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:t,childFlags:0,directChildFlags:0,childMatchedQueries:0,ngContentIndex:-1,matchedQueries:{},matchedQueryIds:0,references:{},childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:{id:e,filterId:$i(e),bindings:i},ngContent:null}}function Po(t){for(var e=t.def.nodeMatchedQueries;t.parent&&Qi(t);){var n=t.parentNodeDef;t=t.parent;for(var i=n.nodeIndex+n.childCount,r=0;r<=i;r++)67108864&(o=t.def.nodes[r]).flags&&536870912&o.flags&&(o.query.filterId&e)===o.query.filterId&&Pi(t,r).setDirty(),!(1&o.flags&&r+o.childCount<n.nodeIndex)&&67108864&o.childFlags&&536870912&o.childFlags||(r+=o.childCount)}if(134217728&t.def.nodeFlags)for(r=0;r<t.def.nodes.length;r++){var o;134217728&(o=t.def.nodes[r]).flags&&536870912&o.flags&&Pi(t,r).setDirty(),r+=o.childCount}}function So(t,e){var n=Pi(t,e.nodeIndex);if(n.dirty){var i,r=void 0;if(67108864&e.flags){var o=e.parent.parent;r=To(t,o.nodeIndex,o.nodeIndex+o.childCount,e.query,[]),i=Ci(t,e.parent.nodeIndex).instance}else 134217728&e.flags&&(r=To(t,0,t.def.nodes.length-1,e.query,[]),i=t.component);n.reset(r);for(var a=e.query.bindings,s=!1,u=0;u<a.length;u++){var l=a[u],c=void 0;switch(l.bindingType){case 0:c=n.first;break;case 1:c=n,s=!0}i[l.propName]=c}s&&n.notifyOnChanges()}}function To(t,e,n,i,r){for(var o=e;o<=n;o++){var a=t.def.nodes[o],s=a.matchedQueries[i.id];if(null!=s&&r.push(ko(t,a,s)),1&a.flags&&a.element.template&&(a.element.template.nodeMatchedQueries&i.filterId)===i.filterId){var u=Ei(t,o);if((a.childMatchedQueries&i.filterId)===i.filterId&&(To(t,o+1,o+a.childCount,i,r),o+=a.childCount),16777216&a.flags)for(var l=u.viewContainer._embeddedViews,c=0;c<l.length;c++){var p=l[c],h=Wi(p);h&&h===u&&To(p,0,p.def.nodes.length-1,i,r)}var f=u.template._projectedViews;if(f)for(c=0;c<f.length;c++){var d=f[c];To(d,0,d.def.nodes.length-1,i,r)}}(a.childMatchedQueries&i.filterId)!==i.filterId&&(o+=a.childCount)}return r}function ko(t,e,n){if(null!=n)switch(n){case 1:return Ei(t,e.nodeIndex).renderElement;case 0:return new bn(Ei(t,e.nodeIndex).renderElement);case 2:return Ei(t,e.nodeIndex).template;case 3:return Ei(t,e.nodeIndex).viewContainer;case 4:return Ci(t,e.nodeIndex).instance}}function Ao(t,e){return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:8,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:t,childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:null,ngContent:{index:e}}}function Io(t,e,n){var i=nr(t,e,n);i&&sr(t,n.ngContent.index,1,i,null,void 0)}function Lo(t,e){return Do(128,t,new Array(e+1))}function Mo(t,e){return Do(32,t,new Array(e))}function zo(t,e){for(var n=Object.keys(e),i=n.length,r=new Array(i),o=0;o<i;o++){var a=n[o];r[e[a]]=a}return Do(64,t,r)}function Do(t,e,n){for(var i=new Array(n.length),r=0;r<n.length;r++){var o=n[r];i[r]={flags:8,name:o,ns:null,nonMinifiedName:o,securityContext:null,suffix:null}}return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:t,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:-1,childCount:0,bindings:i,bindingFlags:hr(i),outputs:[],element:null,provider:null,text:null,query:null,ngContent:null}}function Ro(t,e,n){for(var i=new Array(n.length-1),r=1;r<n.length;r++)i[r-1]={flags:8,name:null,ns:null,nonMinifiedName:null,securityContext:null,suffix:n[r]};return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:2,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:e,childCount:0,bindings:i,bindingFlags:8,outputs:[],element:null,provider:null,text:{prefix:n[0]},query:null,ngContent:null}}function jo(t,e,n){var i,r=t.renderer;i=r.createText(n.text.prefix);var o=nr(t,e,n);return o&&r.appendChild(o,i),{renderText:i}}function No(t,e){return(null!=t?t.toString():"")+e.suffix}function Bo(t,e,n,i){for(var r=0,o=0,a=0,s=0,u=0,l=null,c=null,p=!1,h=!1,f=null,d=0;d<e.length;d++){var m=e[d];if(m.nodeIndex=d,m.parent=l,m.bindingIndex=r,m.outputIndex=o,m.renderParent=c,a|=m.flags,u|=m.matchedQueryIds,m.element){var y=m.element;y.publicProviders=l?l.element.publicProviders:Object.create(null),y.allProviders=y.publicProviders,p=!1,h=!1,m.element.template&&(u|=m.element.template.nodeMatchedQueries)}if(Vo(l,m,e.length),r+=m.bindings.length,o+=m.outputs.length,!c&&3&m.flags&&(f=m),20224&m.flags){p||(p=!0,l.element.publicProviders=Object.create(l.element.publicProviders),l.element.allProviders=l.element.publicProviders);var g=0!=(32768&m.flags);0==(8192&m.flags)||g?l.element.publicProviders[zi(m.provider.token)]=m:(h||(h=!0,l.element.allProviders=Object.create(l.element.publicProviders)),l.element.allProviders[zi(m.provider.token)]=m),g&&(l.element.componentProvider=m)}if(l?(l.childFlags|=m.flags,l.directChildFlags|=m.flags,l.childMatchedQueries|=m.matchedQueryIds,m.element&&m.element.template&&(l.childMatchedQueries|=m.element.template.nodeMatchedQueries)):s|=m.flags,m.childCount>0)l=m,Fo(m)||(c=m);else for(;l&&d===l.nodeIndex+l.childCount;){var v=l.parent;v&&(v.childFlags|=l.childFlags,v.childMatchedQueries|=l.childMatchedQueries),c=(l=v)&&Fo(l)?l.renderParent:l}}return{factory:null,nodeFlags:a,rootNodeFlags:s,nodeMatchedQueries:u,flags:t,nodes:e,updateDirectives:n||Li,updateRenderer:i||Li,handleEvent:function(t,n,i,r){return e[n].element.handleEvent(t,i,r)},bindingCount:r,outputCount:o,lastRenderRootNode:f}}function Fo(t){return 0!=(1&t.flags)&&null===t.element.name}function Vo(t,e,n){var i=e.element&&e.element.template;if(i){if(!i.lastRenderRootNode)throw new Error("Illegal State: Embedded templates without nodes are not allowed!");if(i.lastRenderRootNode&&16777216&i.lastRenderRootNode.flags)throw new Error("Illegal State: Last root node of a template can't have embedded views, at index "+e.nodeIndex+"!")}if(20224&e.flags&&0==(1&(t?t.flags:0)))throw new Error("Illegal State: StaticProvider/Directive nodes need to be children of elements or anchors, at index "+e.nodeIndex+"!");if(e.query){if(67108864&e.flags&&(!t||0==(16384&t.flags)))throw new Error("Illegal State: Content Query nodes need to be children of directives, at index "+e.nodeIndex+"!");if(134217728&e.flags&&t)throw new Error("Illegal State: View Query nodes have to be top level nodes, at index "+e.nodeIndex+"!")}if(e.childCount){var r=t?t.nodeIndex+t.childCount:n-1;if(e.nodeIndex<=r&&e.nodeIndex+e.childCount>r)throw new Error("Illegal State: childCount of node leads outside of parent, at index "+e.nodeIndex+"!")}}function Zo(t,e,n,i){var r=Ho(t.root,t.renderer,t,e,n);return Go(r,t.component,i),Wo(r),r}function Uo(t,e,n){var i=Ho(t,t.renderer,null,null,e);return Go(i,n,n),Wo(i),i}function qo(t,e,n,i){var r,o=e.element.componentRendererType;return r=o?t.root.rendererFactory.createRenderer(i,o):t.root.renderer,Ho(t.root,r,t,e.element.componentProvider,n)}function Ho(t,e,n,i,r){var o=new Array(r.nodes.length),a=r.outputCount?new Array(r.outputCount):null;return{def:r,parent:n,viewContainerParent:null,parentNodeDef:i,context:null,component:null,nodes:o,state:13,root:t,renderer:e,oldValues:new Array(r.bindingCount),disposables:a,initIndex:-1}}function Go(t,e,n){t.component=e,t.context=n}function Wo(t){var e;Yi(t)&&(e=Ei(t.parent,t.parentNodeDef.parent.nodeIndex).renderElement);for(var n=t.def,i=t.nodes,r=0;r<n.nodes.length;r++){var o=n.nodes[r];Ti.setCurrentNode(t,r);var a=void 0;switch(201347067&o.flags){case 1:var s=br(t,e,o),u=void 0;if(33554432&o.flags){var l=rr(o.element.componentView);u=Ti.createComponentView(t,o,l,s)}xr(t,u,o,s),a={renderElement:s,componentView:u,viewContainer:null,template:o.element.template?Hr(t,o):void 0},16777216&o.flags&&(a.viewContainer=Vr(t,o,a));break;case 2:a=jo(t,e,o);break;case 512:case 1024:case 2048:case 256:(a=i[r])||4096&o.flags||(a={instance:po(t,o)});break;case 16:a={instance:ho(t,o)};break;case 16384:(a=i[r])||(a={instance:fo(t,o)}),32768&o.flags&&Go(Ei(t,o.parent.nodeIndex).componentView,a.instance,a.instance);break;case 32:case 64:case 128:a={value:void 0};break;case 67108864:case 134217728:a=new On;break;case 8:Io(t,e,o),a=void 0}i[r]=a}na(t,ea.CreateViewNodes),aa(t,201326592,268435456,0)}function Ko(t){Yo(t),Ti.updateDirectives(t,1),ia(t,ea.CheckNoChanges),Ti.updateRenderer(t,1),na(t,ea.CheckNoChanges),t.state&=-97}function Xo(t){1&t.state?(t.state&=-2,t.state|=2):t.state&=-3,bi(t,0,256),Yo(t),Ti.updateDirectives(t,0),ia(t,ea.CheckAndUpdate),aa(t,67108864,536870912,0);var e=bi(t,256,512);wo(t,2097152|(e?1048576:0)),Ti.updateRenderer(t,0),na(t,ea.CheckAndUpdate),aa(t,134217728,536870912,0),wo(t,8388608|((e=bi(t,512,768))?4194304:0)),2&t.def.flags&&(t.state&=-9),t.state&=-97,bi(t,768,1024)}function Jo(t,e,n,i,r,o,a,s,u,l,c,p,h){return 0===n?function(t,e,n,i,r,o,a,s,u,l,c,p){switch(201347067&e.flags){case 1:return function(t,e,n,i,r,o,a,s,u,l,c,p){var h=e.bindings.length,f=!1;return h>0&&Er(t,e,0,n)&&(f=!0),h>1&&Er(t,e,1,i)&&(f=!0),h>2&&Er(t,e,2,r)&&(f=!0),h>3&&Er(t,e,3,o)&&(f=!0),h>4&&Er(t,e,4,a)&&(f=!0),h>5&&Er(t,e,5,s)&&(f=!0),h>6&&Er(t,e,6,u)&&(f=!0),h>7&&Er(t,e,7,l)&&(f=!0),h>8&&Er(t,e,8,c)&&(f=!0),h>9&&Er(t,e,9,p)&&(f=!0),f}(t,e,n,i,r,o,a,s,u,l,c,p);case 2:return function(t,e,n,i,r,o,a,s,u,l,c,p){var h=!1,f=e.bindings,d=f.length;if(d>0&&Zi(t,e,0,n)&&(h=!0),d>1&&Zi(t,e,1,i)&&(h=!0),d>2&&Zi(t,e,2,r)&&(h=!0),d>3&&Zi(t,e,3,o)&&(h=!0),d>4&&Zi(t,e,4,a)&&(h=!0),d>5&&Zi(t,e,5,s)&&(h=!0),d>6&&Zi(t,e,6,u)&&(h=!0),d>7&&Zi(t,e,7,l)&&(h=!0),d>8&&Zi(t,e,8,c)&&(h=!0),d>9&&Zi(t,e,9,p)&&(h=!0),h){var m=e.text.prefix;d>0&&(m+=No(n,f[0])),d>1&&(m+=No(i,f[1])),d>2&&(m+=No(r,f[2])),d>3&&(m+=No(o,f[3])),d>4&&(m+=No(a,f[4])),d>5&&(m+=No(s,f[5])),d>6&&(m+=No(u,f[6])),d>7&&(m+=No(l,f[7])),d>8&&(m+=No(c,f[8])),d>9&&(m+=No(p,f[9]));var y=wi(t,e.nodeIndex).renderText;t.renderer.setValue(y,m)}return h}(t,e,n,i,r,o,a,s,u,l,c,p);case 16384:return function(t,e,n,i,r,o,a,s,u,l,c,p){var h=Ci(t,e.nodeIndex),f=h.instance,d=!1,m=void 0,y=e.bindings.length;return y>0&&Vi(t,e,0,n)&&(d=!0,m=xo(t,h,e,0,n,m)),y>1&&Vi(t,e,1,i)&&(d=!0,m=xo(t,h,e,1,i,m)),y>2&&Vi(t,e,2,r)&&(d=!0,m=xo(t,h,e,2,r,m)),y>3&&Vi(t,e,3,o)&&(d=!0,m=xo(t,h,e,3,o,m)),y>4&&Vi(t,e,4,a)&&(d=!0,m=xo(t,h,e,4,a,m)),y>5&&Vi(t,e,5,s)&&(d=!0,m=xo(t,h,e,5,s,m)),y>6&&Vi(t,e,6,u)&&(d=!0,m=xo(t,h,e,6,u,m)),y>7&&Vi(t,e,7,l)&&(d=!0,m=xo(t,h,e,7,l,m)),y>8&&Vi(t,e,8,c)&&(d=!0,m=xo(t,h,e,8,c,m)),y>9&&Vi(t,e,9,p)&&(d=!0,m=xo(t,h,e,9,p,m)),m&&f.ngOnChanges(m),65536&e.flags&&xi(t,256,e.nodeIndex)&&f.ngOnInit(),262144&e.flags&&f.ngDoCheck(),d}(t,e,n,i,r,o,a,s,u,l,c,p);case 32:case 64:case 128:return function(t,e,n,i,r,o,a,s,u,l,c,p){var h=e.bindings,f=!1,d=h.length;if(d>0&&Zi(t,e,0,n)&&(f=!0),d>1&&Zi(t,e,1,i)&&(f=!0),d>2&&Zi(t,e,2,r)&&(f=!0),d>3&&Zi(t,e,3,o)&&(f=!0),d>4&&Zi(t,e,4,a)&&(f=!0),d>5&&Zi(t,e,5,s)&&(f=!0),d>6&&Zi(t,e,6,u)&&(f=!0),d>7&&Zi(t,e,7,l)&&(f=!0),d>8&&Zi(t,e,8,c)&&(f=!0),d>9&&Zi(t,e,9,p)&&(f=!0),f){var m=Oi(t,e.nodeIndex),y=void 0;switch(201347067&e.flags){case 32:y=new Array(h.length),d>0&&(y[0]=n),d>1&&(y[1]=i),d>2&&(y[2]=r),d>3&&(y[3]=o),d>4&&(y[4]=a),d>5&&(y[5]=s),d>6&&(y[6]=u),d>7&&(y[7]=l),d>8&&(y[8]=c),d>9&&(y[9]=p);break;case 64:y={},d>0&&(y[h[0].name]=n),d>1&&(y[h[1].name]=i),d>2&&(y[h[2].name]=r),d>3&&(y[h[3].name]=o),d>4&&(y[h[4].name]=a),d>5&&(y[h[5].name]=s),d>6&&(y[h[6].name]=u),d>7&&(y[h[7].name]=l),d>8&&(y[h[8].name]=c),d>9&&(y[h[9].name]=p);break;case 128:var g=n;switch(d){case 1:y=g.transform(n);break;case 2:y=g.transform(i);break;case 3:y=g.transform(i,r);break;case 4:y=g.transform(i,r,o);break;case 5:y=g.transform(i,r,o,a);break;case 6:y=g.transform(i,r,o,a,s);break;case 7:y=g.transform(i,r,o,a,s,u);break;case 8:y=g.transform(i,r,o,a,s,u,l);break;case 9:y=g.transform(i,r,o,a,s,u,l,c);break;case 10:y=g.transform(i,r,o,a,s,u,l,c,p)}}m.value=y}return f}(t,e,n,i,r,o,a,s,u,l,c,p);default:throw"unreachable"}}(t,e,i,r,o,a,s,u,l,c,p,h):function(t,e,n){switch(201347067&e.flags){case 1:return function(t,e,n){for(var i=!1,r=0;r<n.length;r++)Er(t,e,r,n[r])&&(i=!0);return i}(t,e,n);case 2:return function(t,e,n){for(var i=e.bindings,r=!1,o=0;o<n.length;o++)Zi(t,e,o,n[o])&&(r=!0);if(r){var a="";for(o=0;o<n.length;o++)a+=No(n[o],i[o]);a=e.text.prefix+a;var s=wi(t,e.nodeIndex).renderText;t.renderer.setValue(s,a)}return r}(t,e,n);case 16384:return function(t,e,n){for(var i=Ci(t,e.nodeIndex),r=i.instance,o=!1,a=void 0,s=0;s<n.length;s++)Vi(t,e,s,n[s])&&(o=!0,a=xo(t,i,e,s,n[s],a));return a&&r.ngOnChanges(a),65536&e.flags&&xi(t,256,e.nodeIndex)&&r.ngOnInit(),262144&e.flags&&r.ngDoCheck(),o}(t,e,n);case 32:case 64:case 128:return function(t,e,n){for(var i=e.bindings,r=!1,o=0;o<n.length;o++)Zi(t,e,o,n[o])&&(r=!0);if(r){var a=Oi(t,e.nodeIndex),s=void 0;switch(201347067&e.flags){case 32:s=n;break;case 64:for(s={},o=0;o<n.length;o++)s[i[o].name]=n[o];break;case 128:var u=n[0],l=n.slice(1);s=u.transform.apply(u,l)}a.value=s}return r}(t,e,n);default:throw"unreachable"}}(t,e,i)}function Yo(t){var e=t.def;if(4&e.nodeFlags)for(var n=0;n<e.nodes.length;n++){var i=e.nodes[n];if(4&i.flags){var r=Ei(t,n).template._projectedViews;if(r)for(var o=0;o<r.length;o++){var a=r[o];a.state|=32,Hi(a,t)}}else 0==(4&i.childFlags)&&(n+=i.childCount)}}function Qo(t,e,n,i,r,o,a,s,u,l,c,p,h){return 0===n?function(t,e,n,i,r,o,a,s,u,l,c,p){var h=e.bindings.length;h>0&&Ui(t,e,0,n),h>1&&Ui(t,e,1,i),h>2&&Ui(t,e,2,r),h>3&&Ui(t,e,3,o),h>4&&Ui(t,e,4,a),h>5&&Ui(t,e,5,s),h>6&&Ui(t,e,6,u),h>7&&Ui(t,e,7,l),h>8&&Ui(t,e,8,c),h>9&&Ui(t,e,9,p)}(t,e,i,r,o,a,s,u,l,c,p,h):function(t,e,n){for(var i=0;i<n.length;i++)Ui(t,e,i,n[i])}(t,e,i),!1}function $o(t,e){if(Pi(t,e.nodeIndex).dirty)throw ki(Ti.createDebugContext(t,e.nodeIndex),"Query "+e.query.id+" not dirty","Query "+e.query.id+" dirty",0!=(1&t.state))}function ta(t){if(!(128&t.state)){if(ia(t,ea.Destroy),na(t,ea.Destroy),wo(t,131072),t.disposables)for(var e=0;e<t.disposables.length;e++)t.disposables[e]();!function(t){if(16&t.state){var e=Wi(t);if(e){var n=e.template._projectedViews;n&&(Dr(n,n.indexOf(t)),Ti.dirtyParentQueries(t))}}}(t),t.renderer.destroyNode&&function(t){for(var e=t.def.nodes.length,n=0;n<e;n++){var i=t.def.nodes[n];1&i.flags?t.renderer.destroyNode(Ei(t,n).renderElement):2&i.flags?t.renderer.destroyNode(wi(t,n).renderText):(67108864&i.flags||134217728&i.flags)&&Pi(t,n).destroy()}}(t),Yi(t)&&t.renderer.destroy(),t.state|=128}}var ea=function(){var t={CreateViewNodes:0,CheckNoChanges:1,CheckNoChangesProjectedViews:2,CheckAndUpdate:3,CheckAndUpdateProjectedViews:4,Destroy:5};return t[t.CreateViewNodes]="CreateViewNodes",t[t.CheckNoChanges]="CheckNoChanges",t[t.CheckNoChangesProjectedViews]="CheckNoChangesProjectedViews",t[t.CheckAndUpdate]="CheckAndUpdate",t[t.CheckAndUpdateProjectedViews]="CheckAndUpdateProjectedViews",t[t.Destroy]="Destroy",t}();function na(t,e){var n=t.def;if(33554432&n.nodeFlags)for(var i=0;i<n.nodes.length;i++){var r=n.nodes[i];33554432&r.flags?ra(Ei(t,i).componentView,e):0==(33554432&r.childFlags)&&(i+=r.childCount)}}function ia(t,e){var n=t.def;if(16777216&n.nodeFlags)for(var i=0;i<n.nodes.length;i++){var r=n.nodes[i];if(16777216&r.flags)for(var o=Ei(t,i).viewContainer._embeddedViews,a=0;a<o.length;a++)ra(o[a],e);else 0==(16777216&r.childFlags)&&(i+=r.childCount)}}function ra(t,e){var n=t.state;switch(e){case ea.CheckNoChanges:0==(128&n)&&(12==(12&n)?Ko(t):64&n&&oa(t,ea.CheckNoChangesProjectedViews));break;case ea.CheckNoChangesProjectedViews:0==(128&n)&&(32&n?Ko(t):64&n&&oa(t,e));break;case ea.CheckAndUpdate:0==(128&n)&&(12==(12&n)?Xo(t):64&n&&oa(t,ea.CheckAndUpdateProjectedViews));break;case ea.CheckAndUpdateProjectedViews:0==(128&n)&&(32&n?Xo(t):64&n&&oa(t,e));break;case ea.Destroy:ta(t);break;case ea.CreateViewNodes:Wo(t)}}function oa(t,e){ia(t,e),na(t,e)}function aa(t,e,n,i){if(t.def.nodeFlags&e&&t.def.nodeFlags&n)for(var r=t.def.nodes.length,o=0;o<r;o++){var a=t.def.nodes[o];if(a.flags&e&&a.flags&n)switch(Ti.setCurrentNode(t,a.nodeIndex),i){case 0:So(t,a);break;case 1:$o(t,a)}a.childFlags&e&&a.childFlags&n||(o+=a.childCount)}}var sa=!1;function ua(){if(!sa){sa=!0;var t=en()?{setCurrentNode:Aa,createRootView:ca,createEmbeddedView:ha,createComponentView:fa,createNgModuleRef:da,overrideProvider:ga,overrideComponentView:va,clearOverrides:_a,checkAndUpdateView:Ea,checkNoChangesView:Ca,destroyView:Oa,createDebugContext:function(t,e){return new Fa(t,e)},handleEvent:Ia,updateDirectives:La,updateRenderer:Ma}:{setCurrentNode:function(){},createRootView:la,createEmbeddedView:Zo,createComponentView:qo,createNgModuleRef:Qr,overrideProvider:Li,overrideComponentView:Li,clearOverrides:Li,checkAndUpdateView:Xo,checkNoChangesView:Ko,destroyView:ta,createDebugContext:function(t,e){return new Fa(t,e)},handleEvent:function(t,e,n,i){return t.def.handleEvent(t,e,n,i)},updateDirectives:function(t,e){return t.def.updateDirectives(0===e?xa:wa,t)},updateRenderer:function(t,e){return t.def.updateRenderer(0===e?xa:wa,t)}};Ti.setCurrentNode=t.setCurrentNode,Ti.createRootView=t.createRootView,Ti.createEmbeddedView=t.createEmbeddedView,Ti.createComponentView=t.createComponentView,Ti.createNgModuleRef=t.createNgModuleRef,Ti.overrideProvider=t.overrideProvider,Ti.overrideComponentView=t.overrideComponentView,Ti.clearOverrides=t.clearOverrides,Ti.checkAndUpdateView=t.checkAndUpdateView,Ti.checkNoChangesView=t.checkNoChangesView,Ti.destroyView=t.destroyView,Ti.resolveDep=_o,Ti.createDebugContext=t.createDebugContext,Ti.handleEvent=t.handleEvent,Ti.updateDirectives=t.updateDirectives,Ti.updateRenderer=t.updateRenderer,Ti.dirtyParentQueries=Po}}function la(t,e,n,i,r,o){return Uo(pa(t,r,r.injector.get(gn),e,n),i,o)}function ca(t,e,n,i,r,o){var a=r.injector.get(gn),s=pa(t,r,new qa(a),e,n),u=ba(i);return Za(ka.create,Uo,null,[s,u,o])}function pa(t,e,n,i,r){var o=e.injector.get(_i),a=e.injector.get(Ot);return{ngModule:e,injector:t,projectableNodes:i,selectorOrNode:r,sanitizer:o,rendererFactory:n,renderer:n.createRenderer(null,null),errorHandler:a}}function ha(t,e,n,i){var r=ba(n);return Za(ka.create,Zo,null,[t,e,r,i])}function fa(t,e,n,i){return n=ya.get(e.element.componentProvider.provider.token)||ba(n),Za(ka.create,qo,null,[t,e,n,i])}function da(t,e,n,i){return Qr(t,e,n,function(t){var e=function(t){var e=!1,n=!1;return 0===ma.size?{hasOverrides:e,hasDeprecatedOverrides:n}:(t.providers.forEach(function(t){var i=ma.get(t.token);3840&t.flags&&i&&(e=!0,n=n||i.deprecatedBehavior)}),{hasOverrides:e,hasDeprecatedOverrides:n})}(t),n=e.hasDeprecatedOverrides;return e.hasOverrides?(function(t){for(var e=0;e<t.providers.length;e++){var i=t.providers[e];n&&(i.flags|=4096);var r=ma.get(i.token);r&&(i.flags=-3841&i.flags|r.flags,i.deps=er(r.deps),i.value=r.value)}}(t=t.factory(function(){return Li})),t):t}(i))}var ma=new Map,ya=new Map;function ga(t){ma.set(t.token,t)}function va(t,e){var n=rr(rr(Nr(e)).nodes[0].element.componentView);ya.set(t,n)}function _a(){ma.clear(),ya.clear()}function ba(t){if(0===ma.size)return t;var e=function(t){for(var e=[],n=null,i=0;i<t.nodes.length;i++){var r=t.nodes[i];1&r.flags&&(n=r),n&&3840&r.flags&&ma.has(r.provider.token)&&(e.push(n.nodeIndex),n=null)}return e}(t);if(0===e.length)return t;t=t.factory(function(){return Li});for(var n=0;n<e.length;n++)i(t,e[n]);return t;function i(t,e){for(var n=e+1;n<t.nodes.length;n++){var i=t.nodes[n];if(1&i.flags)return;if(3840&i.flags){var r=i.provider,o=ma.get(r.token);o&&(i.flags=-3841&i.flags|o.flags,r.deps=er(o.deps),r.value=o.value)}}}}function xa(t,e,n,i,r,o,a,s,u,l,c,p,h){var f=t.def.nodes[e];return Jo(t,f,n,i,r,o,a,s,u,l,c,p,h),224&f.flags?Oi(t,e).value:void 0}function wa(t,e,n,i,r,o,a,s,u,l,c,p,h){var f=t.def.nodes[e];return Qo(t,f,n,i,r,o,a,s,u,l,c,p,h),224&f.flags?Oi(t,e).value:void 0}function Ea(t){return Za(ka.detectChanges,Xo,null,[t])}function Ca(t){return Za(ka.checkNoChanges,Ko,null,[t])}function Oa(t){return Za(ka.destroy,ta,null,[t])}var Pa,Sa,Ta,ka=function(){var t={create:0,detectChanges:1,checkNoChanges:2,destroy:3,handleEvent:4};return t[t.create]="create",t[t.detectChanges]="detectChanges",t[t.checkNoChanges]="checkNoChanges",t[t.destroy]="destroy",t[t.handleEvent]="handleEvent",t}();function Aa(t,e){Sa=t,Ta=e}function Ia(t,e,n,i){return Aa(t,e),Za(ka.handleEvent,t.def.handleEvent,null,[t,e,n,i])}function La(t,e){if(128&t.state)throw Ii(ka[Pa]);return Aa(t,Na(t,0)),t.def.updateDirectives(function(t,n,i){for(var r=[],o=3;o<arguments.length;o++)r[o-3]=arguments[o];var a=t.def.nodes[n];return 0===e?za(t,a,i,r):Da(t,a,i,r),16384&a.flags&&Aa(t,Na(t,n)),224&a.flags?Oi(t,a.nodeIndex).value:void 0},t)}function Ma(t,e){if(128&t.state)throw Ii(ka[Pa]);return Aa(t,Ba(t,0)),t.def.updateRenderer(function(t,n,i){for(var r=[],o=3;o<arguments.length;o++)r[o-3]=arguments[o];var a=t.def.nodes[n];return 0===e?za(t,a,i,r):Da(t,a,i,r),3&a.flags&&Aa(t,Ba(t,n)),224&a.flags?Oi(t,a.nodeIndex).value:void 0},t)}function za(t,e,n,i){if(Jo.apply(void 0,[t,e,n].concat(i))){var r=1===n?i[0]:i;if(16384&e.flags){for(var o={},a=0;a<e.bindings.length;a++){var s=e.bindings[a],u=r[a];8&s.flags&&(o[(h=s.nonMinifiedName,"ng-reflect-"+(h=h.replace(/[$@]/g,"_").replace(Ra,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"-"+t[1].toLowerCase()})))]=ja(u))}var l=e.parent,c=Ei(t,l.nodeIndex).renderElement;if(l.element.name)for(var p in o)null!=(u=o[p])?t.renderer.setAttribute(c,p,u):t.renderer.removeAttribute(c,p);else t.renderer.setValue(c,"bindings="+JSON.stringify(o,null,2))}}var h}function Da(t,e,n,i){Qo.apply(void 0,[t,e,n].concat(i))}var Ra=/([A-Z])/g;function ja(t){try{return null!=t?t.toString().slice(0,30):t}catch(t){return"[ERROR] Exception while trying to serialize the value"}}function Na(t,e){for(var n=e;n<t.def.nodes.length;n++){var i=t.def.nodes[n];if(16384&i.flags&&i.bindings&&i.bindings.length)return n}return null}function Ba(t,e){for(var n=e;n<t.def.nodes.length;n++){var i=t.def.nodes[n];if(3&i.flags&&i.bindings&&i.bindings.length)return n}return null}var Fa=function(){function t(t,e){this.view=t,this.nodeIndex=e,null==e&&(this.nodeIndex=e=0),this.nodeDef=t.def.nodes[e];for(var n=this.nodeDef,i=t;n&&0==(1&n.flags);)n=n.parent;if(!n)for(;!n&&i;)n=Ki(i),i=i.parent;this.elDef=n,this.elView=i}return Object.defineProperty(t.prototype,"elOrCompView",{get:function(){return Ei(this.elView,this.elDef.nodeIndex).componentView||this.view},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"injector",{get:function(){return Wr(this.elView,this.elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"component",{get:function(){return this.elOrCompView.component},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"context",{get:function(){return this.elOrCompView.context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"providerTokens",{get:function(){var t=[];if(this.elDef)for(var e=this.elDef.nodeIndex+1;e<=this.elDef.nodeIndex+this.elDef.childCount;e++){var n=this.elView.def.nodes[e];20224&n.flags&&t.push(n.provider.token),e+=n.childCount}return t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"references",{get:function(){var t={};if(this.elDef){Va(this.elView,this.elDef,t);for(var e=this.elDef.nodeIndex+1;e<=this.elDef.nodeIndex+this.elDef.childCount;e++){var n=this.elView.def.nodes[e];20224&n.flags&&Va(this.elView,n,t),e+=n.childCount}}return t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"componentRenderElement",{get:function(){var t=function(t){for(;t&&!Yi(t);)t=t.parent;return t.parent?Ei(t.parent,Ki(t).nodeIndex):null}(this.elOrCompView);return t?t.renderElement:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderNode",{get:function(){return 2&this.nodeDef.flags?Xi(this.view,this.nodeDef):Xi(this.elView,this.elDef)},enumerable:!0,configurable:!0}),t.prototype.logError=function(t){for(var e,n,i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r];2&this.nodeDef.flags?(e=this.view.def,n=this.nodeDef.nodeIndex):(e=this.elView.def,n=this.elDef.nodeIndex);var o=function(t,e){for(var n=-1,i=0;i<=e;i++)3&t.nodes[i].flags&&n++;return n}(e,n),a=-1;e.factory(function(){return++a===o?(e=t.error).bind.apply(e,[t].concat(i)):Li;var e}),a<o&&(t.error("Illegal state: the ViewDefinitionFactory did not call the logger!"),t.error.apply(t,i))},t}();function Va(t,e,n){for(var i in e.references)n[i]=ko(t,e,e.references[i])}function Za(t,e,n,i){var r=Pa,o=Sa,a=Ta;try{Pa=t;var s=e.apply(n,i);return Sa=o,Ta=a,Pa=r,s}catch(t){if(wt(t)||!Sa)throw t;throw function(t,e){return t instanceof Error||(t=new Error(t.toString())),Ai(t,e),t}(t,Ua())}}function Ua(){return Sa?new Fa(Sa,Ta):null}var qa=function(){function t(t){this.delegate=t}return t.prototype.createRenderer=function(t,e){return new Ha(this.delegate.createRenderer(t,e))},t.prototype.begin=function(){this.delegate.begin&&this.delegate.begin()},t.prototype.end=function(){this.delegate.end&&this.delegate.end()},t.prototype.whenRenderingDone=function(){return this.delegate.whenRenderingDone?this.delegate.whenRenderingDone():Promise.resolve(null)},t}(),Ha=function(){function t(t){this.delegate=t,this.data=this.delegate.data}return t.prototype.destroyNode=function(t){!function(t){Fn.delete(t.nativeNode)}(Vn(t)),this.delegate.destroyNode&&this.delegate.destroyNode(t)},t.prototype.destroy=function(){this.delegate.destroy()},t.prototype.createElement=function(t,e){var n=this.delegate.createElement(t,e),i=Ua();if(i){var r=new Rn(n,null,i);r.name=t,Zn(r)}return n},t.prototype.createComment=function(t){var e=this.delegate.createComment(t),n=Ua();return n&&Zn(new Dn(e,null,n)),e},t.prototype.createText=function(t){var e=this.delegate.createText(t),n=Ua();return n&&Zn(new Dn(e,null,n)),e},t.prototype.appendChild=function(t,e){var n=Vn(t),i=Vn(e);n&&i&&n instanceof Rn&&n.addChild(i),this.delegate.appendChild(t,e)},t.prototype.insertBefore=function(t,e,n){var i=Vn(t),r=Vn(e),o=Vn(n);i&&r&&i instanceof Rn&&i.insertBefore(o,r),this.delegate.insertBefore(t,e,n)},t.prototype.removeChild=function(t,e){var n=Vn(t),i=Vn(e);n&&i&&n instanceof Rn&&n.removeChild(i),this.delegate.removeChild(t,e)},t.prototype.selectRootElement=function(t){var e=this.delegate.selectRootElement(t),n=Ua();return n&&Zn(new Rn(e,null,n)),e},t.prototype.setAttribute=function(t,e,n,i){var r=Vn(t);r&&r instanceof Rn&&(r.attributes[i?i+":"+e:e]=n),this.delegate.setAttribute(t,e,n,i)},t.prototype.removeAttribute=function(t,e,n){var i=Vn(t);i&&i instanceof Rn&&(i.attributes[n?n+":"+e:e]=null),this.delegate.removeAttribute(t,e,n)},t.prototype.addClass=function(t,e){var n=Vn(t);n&&n instanceof Rn&&(n.classes[e]=!0),this.delegate.addClass(t,e)},t.prototype.removeClass=function(t,e){var n=Vn(t);n&&n instanceof Rn&&(n.classes[e]=!1),this.delegate.removeClass(t,e)},t.prototype.setStyle=function(t,e,n,i){var r=Vn(t);r&&r instanceof Rn&&(r.styles[e]=n),this.delegate.setStyle(t,e,n,i)},t.prototype.removeStyle=function(t,e,n){var i=Vn(t);i&&i instanceof Rn&&(i.styles[e]=null),this.delegate.removeStyle(t,e,n)},t.prototype.setProperty=function(t,e,n){var i=Vn(t);i&&i instanceof Rn&&(i.properties[e]=n),this.delegate.setProperty(t,e,n)},t.prototype.listen=function(t,e,n){if("string"!=typeof t){var i=Vn(t);i&&i.listeners.push(new function(t,e){this.name=t,this.callback=e}(e,n))}return this.delegate.listen(t,e,n)},t.prototype.parentNode=function(t){return this.delegate.parentNode(t)},t.prototype.nextSibling=function(t){return this.delegate.nextSibling(t)},t.prototype.setValue=function(t,e){return this.delegate.setValue(t,e)},t}();function Ga(t){return ua(),Ti.overrideProvider(t)}function Wa(t,e){return ua(),Ti.overrideComponentView(t,e)}function Ka(){return ua(),Ti.clearOverrides()}function Xa(t,e,n){return new Ja(t,e,n)}var Ja=function(t){function e(e,n,i){var r=t.call(this)||this;return r.moduleType=e,r._bootstrapComponents=n,r._ngModuleDefFactory=i,r}return Object(i.c)(e,t),e.prototype.create=function(t){ua();var e=rr(this._ngModuleDefFactory);return Ti.createNgModuleRef(this.moduleType,t||ot.NULL,this._bootstrapComponents,e)},e}(Pe);function Ya(t){return"string"==typeof t?'"'+t+'"':""+t}function Qa(t,e,n,i){t!=e&&es(t,e,n,"==",i)}function $a(t,e){ts(t,null,e)}function ts(t,e,n){t==e&&es(t,e,n,"!=")}function es(t,e,n,i,r){throw void 0===r&&(r=Ya),new Error("ASSERT: expected "+n+" "+i+" "+r(e)+" but was "+r(t)+"!")}function ns(t,e){ts(t,null,"node"),Qa(3&t.flags,e,"Node.type",is)}function is(t){return 1==t?"Projection":0==t?"Container":2==t?"View":3==t?"Element":"??? "+t+" ???"}function rs(t,e,n,i){ngDevMode&&ns(t,0),ngDevMode&&ns(e,2);var r=function(t){for(var e=t;e;){ngDevMode&&ns(e,0);var n=e.data.renderParent;if(null!==n)return n.native;var i=e.parent;if(ngDevMode&&$a(i,"container.parent"),3==(3&i.flags))return null;ngDevMode&&ns(i,2),e=i.parent}return null}(t),o=e.child;if(r)for(;o;){var a=3&o.flags,s=null,u=t.view.renderer,l=u.listen;if(3===a)n?l?u.insertBefore(r,o.native,i):r.insertBefore(o.native,i,!0):l?u.removeChild(r,o.native):r.removeChild(o.native),s=o.next;else if(0===a){var c=o.data;n?l?u.appendChild(r,o.native):r.appendChild(o.native):l?u.removeChild(r,o.native):r.removeChild(o.native),s=c.views.length?c.views[0].child:null}else s=1===a?o.data[0]:o.child;if(null===s){for(;o&&!o.next;)(o=o.parent)===e&&(o=null);o=o&&o.next}else o=s}}function os(t,e){var n=t.data.views,i=n[e];return e>0&&as(n[e-1],i.next),n.splice(e,1),function(t){for(var e=t;e;){var n=null;if(e.views&&e.views.length?n=e.views[0].data:e.child?n=e.child:e.next&&(us(e),n=e.next),null==n){for(;e&&!e.next;)us(e),e=ss(e,t);us(e||t),n=e&&e.next}e=n}}(i.data),rs(t,i,!1),t.query&&t.query.removeView(t,i,e),i}function as(t,e){t.next=e,t.data.next=e?e.data:null}function ss(t,e){var n;return(n=t.node)&&2==(3&n.flags)?n.parent.data:t.parent===e?null:t.parent}function us(t){if(t.cleanup){for(var e=t.cleanup,n=0;n<e.length-1;n+=2)"string"==typeof e[n]?(e[n+1].removeEventListener(e[n],e[n+2],e[n+3]),n+=2):e[n].call(e[n+1]);t.cleanup=null}}function ls(t,e,n){if(null!==e&&3==(3&t.flags)&&(t.view!==n||null===t.data)){var i=n.renderer;return i.listen?i.appendChild(t.native,e):t.native.appendChild(e),!0}return!1}function cs(t){return"function"==typeof t?t.name||t:"string"==typeof t?t:null==t?"":""+t}"undefined"==typeof ngDevMode&&("undefined"!=typeof window&&(window.ngDevMode=!0),"undefined"!=typeof self&&(self.ngDevMode=!0),"undefined"!=typeof t&&(t.ngDevMode=!0));var ps,hs,fs,ds,ms,ys,gs,vs,_s,bs,xs,ws=function(){var t={Important:1,DashCase:2};return t[t.Important]="Important",t[t.DashCase]="DashCase",t}(),Es={createRenderer:function(t,e){return document}},Cs="__ngHostLNode__";function Os(t,e){var n=ys;return _s=t.data,bs=t.bindingStartIndex||0,ms=t.ngStaticData,vs=t.creationMode,xs=t.viewHookStartIndex,ps=t.renderer,null!=e&&(fs=e,ds=!0),ys=t,n}function Ps(t){!function(){if(null!=xs){for(var t=xs,e=t;t<_s.length;)_s[t+1].call(_s[t+2]),16===_s[t]&&(e<t&&(_s[e]=_s[t],_s[e+1]=_s[t+1],_s[e+2]=_s[t+2]),e+=3),t+=3;_s.length=e}}(),Os(t,null)}function Ss(t,e,n){return{parent:ys,id:t,node:null,data:[],ngStaticData:n,cleanup:null,renderer:e,child:null,tail:null,next:null,bindingStartIndex:null,creationMode:!0,viewHookStartIndex:null}}function Ts(t,e,n,i){var r=ds?fs:fs&&fs.parent,o=(ds?gs:fs&&fs.query)||r&&r.query&&r.query.child(),a=null!=i,s={flags:e,native:n,view:ys,parent:r,child:null,next:null,nodeInjector:r?r.nodeInjector:null,data:a?i:null,query:o,staticData:null};return 2==(2&e)&&a&&(ngDevMode&&Qa(i.node,null,"viewState.node"),i.node=s),null!=t&&(ngDevMode&&Qa(_s.length,t,"data.length not in sequence"),_s[t]=s,t>=ms.length?ms[t]=null:s.staticData=ms[t],ds?(gs=null,fs.view!==ys&&2!=(3&fs.flags)||(ngDevMode&&Qa(fs.child,null,"previousNode.child"),fs.child=s)):fs&&(ngDevMode&&Qa(fs.next,null,"previousNode.next"),fs.next=s)),fs=s,ds=!0,s}function ks(t,e,n,i){var r,o;if(null==e){var a=_s[t];o=a&&a.native}else{ngDevMode&&Qa(ys.bindingStartIndex,null,"bindingStartIndex");var s="string"!=typeof e,u=s?e.tag:e;if(null===u)throw"for now name is required";o=ps.createElement(u);var l=null;if(s){var c=As(e.template);l=Ws(Ss(-1,hs.createRenderer(o,e.rendererType),c))}null==(r=Ts(t,3,o,l)).staticData&&(ngDevMode&&Qs(t-1),r.staticData=ms[t]=Ds(u,n||null,null,i||null)),n&&function(t,e){ngDevMode&&Qa(e.length%2,0,"attrs.length % 2");for(var n=ps.setAttribute,i=0;i<e.length;i+=2)n?ps.setAttribute(t,e[i],e[1|i]):t.setAttribute(e[i],e[1|i])}(o,n),ls(r.parent,o,ys)}return o}function As(t){return t.ngStaticData||(t.ngStaticData=[])}function Is(t,e){return new Error("Renderer: "+t+" ["+cs(e)+"]")}function Ls(t,e){ngDevMode&&Qs(-1),hs=t;var n=t.createRenderer(null,null),i="string"==typeof e?n.selectRootElement?n.selectRootElement(e):n.querySelector(e):e;if(ngDevMode&&!i)throw Is("string"==typeof e?"Host node with selector not found:":"Host node is required:",e);return i}function Ms(){ds?ds=!1:(ngDevMode&&Ys(),fs=fs.parent),ngDevMode&&ns(fs,3);var t=fs.query;t&&t.addNode(fs)}function zs(t,e,n){if(n!==Ks){var i=_s[t],r=i.staticData;void 0===r.inputs&&(r.inputs=null,r=function(t,e,n){void 0===n&&(n=!1);for(var i=t>>12,r=i,o=i+((4092&t)>>2);r<o;r++){var a=ms[r],s=n?a.inputs:a.outputs;for(var u in s)if(s.hasOwnProperty(u)){var l=s[u],c=n?e.inputs||(e.inputs={}):e.outputs||(e.outputs={});c.hasOwnProperty(u)?c[u].push(r,l):c[u]=[r,l]}}return e}(i.flags,r,!0));var o,a=r.inputs;if(a&&(o=a[e]))!function(t,e){for(var n=0;n<t.length;n+=2)ngDevMode&&Qs(t[n]),_s[t[n]][t[1|n]]=e}(o,n);else{var s=i.native;ps.setProperty?ps.setProperty(s,e,n):s.setProperty?s.setProperty(e,n):s[e]=n}}}function Ds(t,e,n,i){return{tagName:t,attrs:e,localNames:i?[i,-1]:null,initialInputs:void 0,inputs:void 0,outputs:void 0,containerStatic:n}}function Rs(t,e,n,i){if(n!==Ks){var r=_s[t];null==n?ps.removeStyle?ps.removeStyle(r.native,e,ws.DashCase):r.native.style.removeProperty(e):ps.setStyle?ps.setStyle(r.native,e,i?cs(n)+i:cs(n),ws.DashCase):r.native.style.setProperty(e,i?cs(n)+i:cs(n))}}function js(t,e){ngDevMode&&Qa(ys.bindingStartIndex,null,"bindingStartIndex");var n=null!=e?ps.createText?ps.createText(cs(e)):ps.createTextNode(cs(e)):null,i=Ts(t,3,n);ds=!1,ls(i.parent,n,ys)}function Ns(t,e){var n=t<_s.length&&_s[t];n&&n.native?e!==Ks&&(ps.setValue?ps.setValue(n.native,cs(e)):n.native.textContent=cs(e)):n?(n.native=ps.createText?ps.createText(cs(e)):ps.createTextNode(cs(e)),function(t,e){var n=t.parent;if(3==(3&n.flags)&&(n.view!==e||null===n.data)){for(var i=t.next,r=null;i&&null===(r=i.native);)i=i.next;var o=e.renderer;o.listen?o.insertBefore(n.native,t.native,r):n.native.insertBefore(t.native,r,!1)}}(n,ys)):js(t,e)}function Bs(t,e,n,i){var r;if(null==e)ngDevMode&&Qs(t),r=_s[t];else{ngDevMode&&Qa(ys.bindingStartIndex,null,"bindingStartIndex"),ngDevMode&&Qa(ds,!0,"isParent");var o=fs.flags;if(0==(4092&o)?o=t<<12|4|3&o:o+=4,fs.flags=o,ngDevMode&&Qs(t-1),Object.defineProperty(e,Cs,{enumerable:!1,value:fs}),_s[t]=r=e,t>=ms.length&&(ms[t]=n,i)){ngDevMode&&$a(fs.staticData,"previousOrParentNode.staticData");var a=fs.staticData;(a.localNames||(a.localNames=[])).push(i,t)}var s=n.diPublic;s&&s(n);var u=fs.staticData;u&&u.attrs&&function(t,e,i){var r=((4092&fs.flags)>>2)-1,o=i.initialInputs;(void 0===o||r>=o.length)&&(o=function(t,e,n){var i=n.initialInputs||(n.initialInputs=[]);i[t]=null;for(var r=n.attrs,o=0;o<r.length;o+=2){var a=e[r[o]];void 0!==a&&(i[t]||(i[t]=[])).push(a,r[1|o])}return i}(r,n.inputs,i));var a=o[r];if(a)for(var s=0;s<a.length;s+=2)t[a[s]]=a[1|s]}(r,0,u)}return r}function Fs(t,e,n,i,r){ngDevMode&&Qa(ys.bindingStartIndex,null,"bindingStartIndex");var o=ps.createComment(ngDevMode?"container":""),a=null,s=ds?fs:fs.parent;ngDevMode&&ts(s,null,"currentParent"),ls(s,o,ys)&&(a=s);var u=Ts(t,0,o,{views:[],nextIndex:0,renderParent:a,template:null==e?null:e,next:null,parent:ys});null==u.staticData&&(u.staticData=ms[t]=Ds(n||null,i||null,[],r||null)),Ws(u.data)}function Vs(){ds?ds=!1:(ngDevMode&&Ys(),fs=fs.parent),ngDevMode&&ns(fs,0);var t=fs.query;t&&t.addNode(fs)}function Zs(t){ngDevMode&&Qs(t),fs=_s[t],ngDevMode&&ns(fs,0),ds=!0,fs.data.nextIndex=0}function Us(){ds?ds=!1:(ngDevMode&&ns(fs,2),ngDevMode&&Ys(),fs=fs.parent),ngDevMode&&ns(fs,0);var t=fs;ngDevMode&&ns(t,0);for(var e=t.data.nextIndex;e<t.data.views.length;)os(t,e)}function qs(t){var e=ds?fs:fs.parent;ngDevMode&&ns(e,0);var n=e.data,i=n.views,r=!vs&&n.nextIndex<i.length&&i[n.nextIndex],o=r&&t===r.data.id;if(o)fs=i[n.nextIndex++],ngDevMode&&ns(fs,2),ds=!0,Os(r.data,fs);else{var a=Ss(t,ps,function(t,e){ngDevMode&&ns(e,0);var n=e.staticData.containerStatic;return(t>=n.length||null==n[t])&&(n[t]=[]),n[t]}(t,e));Os(a,Ts(null,2,null,a)),n.nextIndex++}return!o}function Hs(){ds=!1;var t=fs=ys.node,e=fs.parent;ngDevMode&&ns(t,2),ngDevMode&&ns(e,0);var n=e.data,i=n.nextIndex<=n.views.length?n.views[n.nextIndex-1]:null;(null==i||i.data.id!==t.data.id)&&(function(t,e,n){var i=t.data,r=i.views;n>0&&as(r[n-1],e),n<r.length&&r[n].data.id!==e.data.id?(as(e,r[n]),r.splice(n,0,e)):n>=r.length&&r.push(e),i.nextIndex<=n&&i.nextIndex++,null!==t.data.renderParent&&rs(t,e,!0,function(e,n,i){var r=n.views;return e+1<r.length?r[e+1].child.native:t.native}(n,i)),t.query&&t.query.insertView(t,e,n)}(e,t,n.nextIndex-1),ys.creationMode=!1),Ps(ys.parent),ngDevMode&&Qa(ds,!1,"isParent"),ngDevMode&&ns(fs,2)}ys=Ss(null,null,[]);var Gs=function(t,e,n){ngDevMode&&Qs(e);var i=_s[e];ngDevMode&&ns(i,3),ngDevMode&&ts(i.data,null,"isComponent"),ngDevMode&&Qs(t);var r=i.data;ngDevMode&&ts(r,null,"hostView");var o=_s[t],a=Os(r,i);try{n(o,vs)}finally{r.creationMode=!1,Ps(a)}};function Ws(t){return ys.tail?ys.tail.next=t:ys.child=t,ys.tail=t,t}var Ks={};function Xs(t){var e,n,i;return(e=vs)?("number"!=typeof ys.bindingStartIndex&&(bs=ys.bindingStartIndex=_s.length),_s[bs++]=t):((e=t!==Ks&&(i=t,!((n=_s[bs])!=n&&i!=i)&&n!==i))&&(_s[bs]=t),bs++),e?t:Ks}function Js(t,e,n){return Xs(e)===Ks?Ks:t+cs(e)+n}function Ys(){ts(fs.parent,null,"isParent")}function Qs(t,e){var n,i;null==e&&(e=_s),(n=e?e.length:0)<(i=t)&&es(n,i,"data.length",">")}function $s(t,e){void 0===e&&(e={});var n,i=e.rendererFactory||Es,r=t.ngComponentDef,o=Ls(i,e.host||r.tag),a=Os(Ss(-1,i.createRenderer(o,r.rendererType),[]),null);try{ds=!1,fs=null,Ts(0,3,o,Ss(-1,ps,As(r.template))),n=Bs(1,r.n(),r)}finally{Ps(a)}return e.features&&e.features.forEach(function(t){return t(n,r)}),tu(n),n}function tu(t){ngDevMode&&$a(t,"component");var e=t[Cs];ngDevMode&&!e&&Is("Not a directive instance",t),ngDevMode&&$a(e.data,"hostNode.data"),function(t,n,i,r){var o=Os(n,e);try{hs.begin&&hs.begin(),i.constructor.ngComponentDef.r(1,0)}finally{hs.end&&hs.end(),n.creationMode=!1,Ps(o)}}(0,e.view,t)}function eu(t){var e={type:t.type,diPublic:null,n:t.factory,tag:t.tag||null,template:t.template||null,r:t.refresh||function(e,n){Gs(e,n,t.template)},h:t.hostBindings||iu,inputs:ru(t.inputs),outputs:ru(t.outputs),methods:ru(t.methods),rendererType:Fi(t.rendererType)||null},n=t.features;return n&&n.forEach(function(t){return t(e)}),e}var nu={};function iu(){}function ru(t){if(null==t)return nu;var e={};for(var n in t)e[t[n]]=n;return e}function ou(t,e){return{type:7,name:t,definitions:e,options:{}}}function au(t,e){return void 0===e&&(e=null),{type:4,styles:e,timings:t}}function su(t,e){return void 0===e&&(e=null),{type:3,steps:t,options:e}}function uu(t,e){return void 0===e&&(e=null),{type:2,steps:t,options:e}}function lu(t){return{type:6,styles:t,offset:null}}function cu(t,e,n){return{type:0,name:t,styles:e,options:n}}function pu(t){return{type:5,steps:t}}function hu(t,e,n){return void 0===n&&(n=null),{type:1,expr:t,animation:e,options:n}}var fu="*";function du(t,e){return ou(t,e)}function mu(t,e){return au(t,e)}function yu(t){return su(t)}function gu(t){return uu(t)}function vu(t){return lu(t)}function _u(t,e){return cu(t,e)}function bu(t){return pu(t)}function xu(t,e){return hu(t,e)}}).call(e,n("fRUx"))},LaOa:function(t,e,n){"use strict";e.a=function(t,e){return function(n){return n.lift(new o(t,e))}};var i=n("6Xbx"),r=n("E9/g"),o=function(){function t(t,e){this.predicate=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.predicate,this.thisArg))},t}(),a=function(t){function e(e,n,i){t.call(this,e),this.predicate=n,this.thisArg=i,this.count=0}return Object(i.c)(e,t),e.prototype._next=function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}e&&this.destination.next(t)},e}(r.a)},"N/q0":function(t,e,n){var i,r;r=function(){return function t(e,n,r){function o(s,u){if(!n[s]){if(!e[s]){if(!u&&"function"==typeof i&&i)return i(s,!0);if(a)return a(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[s]={exports:{}};e[s][0].call(c.exports,function(t){return o(e[s][1][t]||t)},c,c.exports,t,e,n,r)}return n[s].exports}for(var a="function"==typeof i&&i,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(t,e,n){function i(t){var e=0;if(t&&t.length>0){e+=Math.abs(r(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(r(t[n]))}return e}function r(t){var e,n,i,r,s,u,l=0,c=t.length;if(c>2){for(u=0;u<c;u++)u===c-2?(i=c-2,r=c-1,s=0):u===c-1?(i=c-1,r=0,s=1):(i=u,r=u+1,s=u+2),e=t[i],n=t[r],l+=(o(t[s][0])-o(e[0]))*Math.sin(o(n[1]));l=l*a.RADIUS*a.RADIUS/2}return l}function o(t){return t*Math.PI/180}var a=t("wgs84");e.exports.geometry=function t(e){var n,r=0;switch(e.type){case"Polygon":return i(e.coordinates);case"MultiPolygon":for(n=0;n<e.coordinates.length;n++)r+=i(e.coordinates[n]);return r;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(n=0;n<e.geometries.length;n++)r+=t(e.geometries[n]);return r}},e.exports.ring=r},{wgs84:37}],2:[function(t,e,n){var i;i=function(){"use strict";return function(){var t=new Float32Array(3);t[0]=0,t[1]=0,t[2]=0}(),function(){var t=new Float32Array(4);t[0]=0,t[1]=0,t[2]=0,t[3]=0}(),{vec3:{transformMat3:function(t,e,n){var i=e[0],r=e[1],o=e[2];return t[0]=i*n[0]+r*n[3]+o*n[6],t[1]=i*n[1]+r*n[4]+o*n[7],t[2]=i*n[2]+r*n[5]+o*n[8],t}},vec4:{transformMat4:function(t,e,n){var i=e[0],r=e[1],o=e[2],a=e[3];return t[0]=n[0]*i+n[4]*r+n[8]*o+n[12]*a,t[1]=n[1]*i+n[5]*r+n[9]*o+n[13]*a,t[2]=n[2]*i+n[6]*r+n[10]*o+n[14]*a,t[3]=n[3]*i+n[7]*r+n[11]*o+n[15]*a,t}},mat2:{create:function(){var t=new Float32Array(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},rotate:function(t,e,n){var i=e[0],r=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=i*u+o*s,t[1]=r*u+a*s,t[2]=i*-s+o*u,t[3]=r*-s+a*u,t},scale:function(t,e,n){var i=e[1],r=e[2],o=e[3],a=n[0],s=n[1];return t[0]=e[0]*a,t[1]=i*a,t[2]=r*s,t[3]=o*s,t}},mat3:{create:function(){var t=new Float32Array(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},fromRotation:function(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=n,t[2]=0,t[3]=-n,t[4]=i,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}},mat4:{create:function(){var t=new Float32Array(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},identity:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},translate:function(t,e,n){var i,r,o,a,s,u,l,c,p,h,f,d,m=n[0],y=n[1],g=n[2];return e===t?(t[12]=e[0]*m+e[4]*y+e[8]*g+e[12],t[13]=e[1]*m+e[5]*y+e[9]*g+e[13],t[14]=e[2]*m+e[6]*y+e[10]*g+e[14],t[15]=e[3]*m+e[7]*y+e[11]*g+e[15]):(r=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],p=e[8],h=e[9],f=e[10],d=e[11],t[0]=i=e[0],t[1]=r,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=l,t[7]=c,t[8]=p,t[9]=h,t[10]=f,t[11]=d,t[12]=i*m+s*y+p*g+e[12],t[13]=r*m+u*y+h*g+e[13],t[14]=o*m+l*y+f*g+e[14],t[15]=a*m+c*y+d*g+e[15]),t},scale:function(t,e,n){var i=n[0],r=n[1],o=n[2];return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},multiply:function(t,e,n){var i=e[0],r=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],p=e[8],h=e[9],f=e[10],d=e[11],m=e[12],y=e[13],g=e[14],v=e[15],_=n[0],b=n[1],x=n[2],w=n[3];return t[0]=_*i+b*s+x*p+w*m,t[1]=_*r+b*u+x*h+w*y,t[2]=_*o+b*l+x*f+w*g,t[3]=_*a+b*c+x*d+w*v,t[4]=(_=n[4])*i+(b=n[5])*s+(x=n[6])*p+(w=n[7])*m,t[5]=_*r+b*u+x*h+w*y,t[6]=_*o+b*l+x*f+w*g,t[7]=_*a+b*c+x*d+w*v,t[8]=(_=n[8])*i+(b=n[9])*s+(x=n[10])*p+(w=n[11])*m,t[9]=_*r+b*u+x*h+w*y,t[10]=_*o+b*l+x*f+w*g,t[11]=_*a+b*c+x*d+w*v,t[12]=(_=n[12])*i+(b=n[13])*s+(x=n[14])*p+(w=n[15])*m,t[13]=_*r+b*u+x*h+w*y,t[14]=_*o+b*l+x*f+w*g,t[15]=_*a+b*c+x*d+w*v,t},perspective:function(t,e,n,i,r){var o=1/Math.tan(e/2),a=1/(i-r);return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(r+i)*a,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*r*i*a,t[15]=0,t},rotateX:function(t,e,n){var i=Math.sin(n),r=Math.cos(n),o=e[4],a=e[5],s=e[6],u=e[7],l=e[8],c=e[9],p=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*r+l*i,t[5]=a*r+c*i,t[6]=s*r+p*i,t[7]=u*r+h*i,t[8]=l*r-o*i,t[9]=c*r-a*i,t[10]=p*r-s*i,t[11]=h*r-u*i,t},rotateZ:function(t,e,n){var i=Math.sin(n),r=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],l=e[4],c=e[5],p=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*r+l*i,t[1]=a*r+c*i,t[2]=s*r+p*i,t[3]=u*r+h*i,t[4]=l*r-o*i,t[5]=c*r-a*i,t[6]=p*r-s*i,t[7]=h*r-u*i,t},invert:function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],a=e[4],s=e[5],u=e[6],l=e[7],c=e[8],p=e[9],h=e[10],f=e[11],d=e[12],m=e[13],y=e[14],g=e[15],v=n*s-i*a,_=n*u-r*a,b=n*l-o*a,x=i*u-r*s,w=i*l-o*s,E=r*l-o*u,C=c*m-p*d,O=c*y-h*d,P=c*g-f*d,S=p*y-h*m,T=p*g-f*m,k=h*g-f*y,A=v*k-_*T+b*S+x*P-w*O+E*C;return A?(t[0]=(s*k-u*T+l*S)*(A=1/A),t[1]=(r*T-i*k-o*S)*A,t[2]=(m*E-y*w+g*x)*A,t[3]=(h*w-p*E-f*x)*A,t[4]=(u*P-a*k-l*O)*A,t[5]=(n*k-r*P+o*O)*A,t[6]=(y*b-d*E-g*_)*A,t[7]=(c*E-h*b+f*_)*A,t[8]=(a*T-s*P+l*C)*A,t[9]=(i*P-n*T-o*C)*A,t[10]=(d*w-m*b+g*v)*A,t[11]=(p*b-c*w-f*v)*A,t[12]=(s*O-a*S-u*C)*A,t[13]=(n*S-i*O+r*C)*A,t[14]=(m*_-d*x-y*v)*A,t[15]=(c*x-p*_+h*v)*A,t):null},ortho:function(t,e,n,i,r,o,a){var s=1/(e-n),u=1/(i-r),l=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+n)*s,t[13]=(r+i)*u,t[14]=(a+o)*l,t[15]=1,t}}}},"object"==typeof n&&"undefined"!=typeof e?e.exports=i():this.glMatrix=i()},{}],3:[function(t,e,n){"use strict";function i(t){return!!("undefined"!=typeof window&&"undefined"!=typeof document&&Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray&&Function.prototype&&Function.prototype.bind&&Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions&&"JSON"in window&&"parse"in JSON&&"stringify"in JSON&&function(){if(!("Worker"in window&&"Blob"in window))return!1;var t,e,n=new Blob([""],{type:"text/javascript"}),i=URL.createObjectURL(n);try{e=new Worker(i),t=!0}catch(e){t=!1}return e&&e.terminate(),URL.revokeObjectURL(i),t}()&&"Uint8ClampedArray"in window&&function(t){return void 0===r[t]&&(r[t]=function(t){var e=document.createElement("canvas"),n=Object.create(i.webGLContextAttributes);return n.failIfMajorPerformanceCaveat=t,e.probablySupportsContext?e.probablySupportsContext("webgl",n)||e.probablySupportsContext("experimental-webgl",n):e.supportsContext?e.supportsContext("webgl",n)||e.supportsContext("experimental-webgl",n):e.getContext("webgl",n)||e.getContext("experimental-webgl",n)}(t)),r[t]}(t&&t.failIfMajorPerformanceCaveat))}"undefined"!=typeof e&&e.exports?e.exports=i:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=i);var r={};i.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}},{}],4:[function(t,e,n){"use strict";function i(t,e){this.x=t,this.y=e}e.exports=i,i.prototype={clone:function(){return new i(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[2]*this.x+t[3]*this.y;return this.x=t[0]*this.x+t[1]*this.y,this.y=e,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),n=Math.sin(t),i=n*this.x+e*this.y;return this.x=e*this.x-n*this.y,this.y=i,this},_rotateAround:function(t,e){var n=Math.cos(t),i=Math.sin(t),r=e.y+i*(this.x-e.x)+n*(this.y-e.y);return this.x=e.x+n*(this.x-e.x)-i*(this.y-e.y),this.y=r,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},i.convert=function(t){return t instanceof i?t:Array.isArray(t)?new i(t[0],t[1]):t}},{}],5:[function(t,e,n){var i;i=function(){function t(t,e,n){n=n||{},this.w=t||64,this.h=e||64,this.autoResize=!!n.autoResize,this.shelves=[],this.freebins=[],this.stats={},this.bins={},this.maxId=0}function e(t,e,n){this.x=0,this.y=t,this.w=this.free=e,this.h=n}return t.prototype.pack=function(t,e){t=[].concat(t),e=e||{};for(var n,i,r,o,a=[],s=0;s<t.length;s++)if(n=t[s].w||t[s].width,i=t[s].h||t[s].height,r=t[s].id,n&&i){if(!(o=this.packOne(n,i,r)))continue;e.inPlace&&(t[s].x=o.x,t[s].y=o.y,t[s].id=o.id),a.push(o)}return this.shrink(),a},t.prototype.packOne=function(t,n,i){var r,o,a,s,u,l,c,p,h={freebin:-1,shelf:-1,waste:1/0},f=0;if("string"==typeof i||"number"==typeof i){if(r=this.getBin(i))return this.ref(r),r;"number"==typeof i&&(this.maxId=Math.max(i,this.maxId))}else i=++this.maxId;for(s=0;s<this.freebins.length;s++){if(n===(r=this.freebins[s]).maxh&&t===r.maxw)return this.allocFreebin(s,t,n,i);n>r.maxh||t>r.maxw||n<=r.maxh&&t<=r.maxw&&(a=r.maxw*r.maxh-t*n)<h.waste&&(h.waste=a,h.freebin=s)}for(s=0;s<this.shelves.length;s++)if(f+=(o=this.shelves[s]).h,!(t>o.free)){if(n===o.h)return this.allocShelf(s,t,n,i);n>o.h||n<o.h&&(a=(o.h-n)*t)<h.waste&&(h.freebin=-1,h.waste=a,h.shelf=s)}return-1!==h.freebin?this.allocFreebin(h.freebin,t,n,i):-1!==h.shelf?this.allocShelf(h.shelf,t,n,i):n<=this.h-f&&t<=this.w?(o=new e(f,this.w,n),this.allocShelf(this.shelves.push(o)-1,t,n,i)):this.autoResize?(u=l=this.h,((c=p=this.w)<=u||t>c)&&(p=2*Math.max(t,c)),(u<c||n>u)&&(l=2*Math.max(n,u)),this.resize(p,l),this.packOne(t,n,i)):null},t.prototype.allocFreebin=function(t,e,n,i){var r=this.freebins.splice(t,1)[0];return r.id=i,r.w=e,r.h=n,r.refcount=0,this.bins[i]=r,this.ref(r),r},t.prototype.allocShelf=function(t,e,n,i){var r=this.shelves[t].alloc(e,n,i);return this.bins[i]=r,this.ref(r),r},t.prototype.shrink=function(){if(this.shelves.length>0){for(var t=0,e=0,n=0;n<this.shelves.length;n++){var i=this.shelves[n];e+=i.h,t=Math.max(i.w-i.free,t)}this.resize(t,e)}},t.prototype.getBin=function(t){return this.bins[t]},t.prototype.ref=function(t){if(1==++t.refcount){var e=t.h;this.stats[e]=1+(0|this.stats[e])}return t.refcount},t.prototype.unref=function(t){return 0===t.refcount?0:(0==--t.refcount&&(this.stats[t.h]--,delete this.bins[t.id],this.freebins.push(t)),t.refcount)},t.prototype.clear=function(){this.shelves=[],this.freebins=[],this.stats={},this.bins={},this.maxId=0},t.prototype.resize=function(t,e){this.w=t,this.h=e;for(var n=0;n<this.shelves.length;n++)this.shelves[n].resize(t);return!0},e.prototype.alloc=function(t,e,n){if(t>this.free||e>this.h)return null;var i=this.x;return this.x+=t,this.free-=t,new function(t,e,n,i,r,o,a){this.id=t,this.x=e,this.y=n,this.w=i,this.h=r,this.maxw=o||i,this.maxh=a||r,this.refcount=0}(n,i,this.y,t,e,t,this.h)},e.prototype.resize=function(t){return this.free+=t-this.w,this.w=t,!0},t},"object"==typeof n&&"undefined"!=typeof e?e.exports=i():this.ShelfPack=i()},{}],6:[function(t,e,n){"use strict";function i(t,e,n,i,r,o){this.fontSize=t||24,this.buffer=void 0===e?3:e,this.cutoff=i||.25,this.fontFamily=r||"sans-serif",this.fontWeight=o||"normal",this.radius=n||8;var a=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=a,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.d=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Int16Array(a),this.middle=Math.round(a/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function r(t,e,n,i,r,a,s){for(var u=0;u<e;u++){for(var l=0;l<n;l++)i[l]=t[l*e+u];for(o(i,r,a,s,n),l=0;l<n;l++)t[l*e+u]=r[l]}for(l=0;l<n;l++){for(u=0;u<e;u++)i[u]=t[l*e+u];for(o(i,r,a,s,e),u=0;u<e;u++)t[l*e+u]=Math.sqrt(r[u])}}function o(t,e,n,i,r){n[0]=0,i[0]=-a,i[1]=+a;for(var o=1,s=0;o<r;o++){for(var u=(t[o]+o*o-(t[n[s]]+n[s]*n[s]))/(2*o-2*n[s]);u<=i[s];)u=(t[o]+o*o-(t[n[--s]]+n[s]*n[s]))/(2*o-2*n[s]);n[++s]=o,i[s]=u,i[s+1]=+a}for(o=0,s=0;o<r;o++){for(;i[s+1]<o;)s++;e[o]=(o-n[s])*(o-n[s])+t[n[s]]}}e.exports=i;var a=1e20;i.prototype.draw=function(t){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(t,this.buffer,this.middle);for(var e=this.ctx.getImageData(0,0,this.size,this.size),n=new Uint8ClampedArray(this.size*this.size),i=0;i<this.size*this.size;i++){var o=e.data[4*i+3]/255;this.gridOuter[i]=1===o?0:0===o?a:Math.pow(Math.max(0,.5-o),2),this.gridInner[i]=1===o?a:0===o?0:Math.pow(Math.max(0,o-.5),2)}for(r(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),r(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),i=0;i<this.size*this.size;i++)n[i]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[i]-this.gridInner[i])/this.radius+this.cutoff))));return n}},{}],7:[function(t,e,n){function i(t,e,n,i){this.cx=3*t,this.bx=3*(n-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(i-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=i,this.p2x=n,this.p2y=i}e.exports=i,i.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},i.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},i.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},i.prototype.solveCurveX=function(t,e){var n,i,r,o,a;for(void 0===e&&(e=1e-6),r=t,a=0;a<8;a++){if(o=this.sampleCurveX(r)-t,Math.abs(o)<e)return r;var s=this.sampleCurveDerivativeX(r);if(Math.abs(s)<1e-6)break;r-=o/s}if(i=1,(r=t)<(n=0))return n;if(r>i)return i;for(;n<i;){if(o=this.sampleCurveX(r),Math.abs(o-t)<e)return r;t>o?n=r:i=r,r=.5*(i-n)+n}return r},i.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))}},{}],8:[function(t,e,n){e.exports.VectorTile=t("./lib/vectortile.js"),e.exports.VectorTileFeature=t("./lib/vectortilefeature.js"),e.exports.VectorTileLayer=t("./lib/vectortilelayer.js")},{"./lib/vectortile.js":9,"./lib/vectortilefeature.js":10,"./lib/vectortilelayer.js":11}],9:[function(t,e,n){"use strict";function i(t,e,n){if(3===t){var i=new r(n,n.readVarint()+n.pos);i.length&&(e[i.name]=i)}}var r=t("./vectortilelayer");e.exports=function(t,e){this.layers=t.readFields(i,{},e)}},{"./vectortilelayer":11}],10:[function(t,e,n){"use strict";function i(t,e,n,i,o){this.properties={},this.extent=n,this.type=0,this._pbf=t,this._geometry=-1,this._keys=i,this._values=o,t.readFields(r,this,e)}function r(t,e,n){1==t?e.id=n.readVarint():2==t?function(t,e){for(var n=t.readVarint()+t.pos;t.pos<n;){var i=e._keys[t.readVarint()],r=e._values[t.readVarint()];e.properties[i]=r}}(n,e):3==t?e.type=n.readVarint():4==t&&(e._geometry=n.pos)}function o(t){for(var e,n,i=0,r=0,o=t.length,a=o-1;r<o;a=r++)i+=((n=t[a]).x-(e=t[r]).x)*(e.y+n.y);return i}var a=t("@mapbox/point-geometry");e.exports=i,i.types=["Unknown","Point","LineString","Polygon"],i.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,n=t.readVarint()+t.pos,i=1,r=0,o=0,s=0,u=[];t.pos<n;){if(!r){var l=t.readVarint();i=7&l,r=l>>3}if(r--,1===i||2===i)o+=t.readSVarint(),s+=t.readSVarint(),1===i&&(e&&u.push(e),e=[]),e.push(new a(o,s));else{if(7!==i)throw new Error("unknown command "+i);e&&e.push(e[0].clone())}}return e&&u.push(e),u},i.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,n=1,i=0,r=0,o=0,a=1/0,s=-1/0,u=1/0,l=-1/0;t.pos<e;){if(!i){var c=t.readVarint();n=7&c,i=c>>3}if(i--,1===n||2===n)r+=t.readSVarint(),o+=t.readSVarint(),r<a&&(a=r),r>s&&(s=r),o<u&&(u=o),o>l&&(l=o);else if(7!==n)throw new Error("unknown command "+n)}return[a,u,s,l]},i.prototype.toGeoJSON=function(t,e,n){function r(t){for(var e=0;e<t.length;e++){var n=t[e];t[e]=[360*(n.x+l)/u-180,360/Math.PI*Math.atan(Math.exp((180-360*(n.y+c)/u)*Math.PI/180))-90]}}var a,s,u=this.extent*Math.pow(2,n),l=this.extent*t,c=this.extent*e,p=this.loadGeometry(),h=i.types[this.type];switch(this.type){case 1:var f=[];for(a=0;a<p.length;a++)f[a]=p[a][0];r(p=f);break;case 2:for(a=0;a<p.length;a++)r(p[a]);break;case 3:for(p=function(t){var e=t.length;if(e<=1)return[t];for(var n,i,r=[],a=0;a<e;a++){var s=o(t[a]);0!==s&&(void 0===i&&(i=s<0),i===s<0?(n&&r.push(n),n=[t[a]]):n.push(t[a]))}return n&&r.push(n),r}(p),a=0;a<p.length;a++)for(s=0;s<p[a].length;s++)r(p[a][s])}1===p.length?p=p[0]:h="Multi"+h;var d={type:"Feature",geometry:{type:h,coordinates:p},properties:this.properties};return"id"in this&&(d.id=this.id),d}},{"@mapbox/point-geometry":4}],11:[function(t,e,n){"use strict";function i(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(r,this,e),this.length=this._features.length}function r(t,e,n){15===t?e.version=n.readVarint():1===t?e.name=n.readString():5===t?e.extent=n.readVarint():2===t?e._features.push(n.pos):3===t?e._keys.push(n.readString()):4===t&&e._values.push(function(t){for(var e=null,n=t.readVarint()+t.pos;t.pos<n;){var i=t.readVarint()>>3;e=1===i?t.readString():2===i?t.readFloat():3===i?t.readDouble():4===i?t.readVarint64():5===i?t.readVarint():6===i?t.readSVarint():7===i?t.readBoolean():null}return e}(n))}var o=t("./vectortilefeature.js");e.exports=i,i.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new o(this._pbf,e,this.extent,this._keys,this._values)}},{"./vectortilefeature.js":10}],12:[function(t,e,n){var i;i=this,function(t){function e(t,e,i){var r=n(256*t,256*(e=Math.pow(2,i)-e-1),i),o=n(256*(t+1),256*(e+1),i);return r[0]+","+r[1]+","+o[0]+","+o[1]}function n(t,e,n){var i=2*Math.PI*6378137/256/Math.pow(2,n);return[t*i-2*Math.PI*6378137/2,e*i-2*Math.PI*6378137/2]}t.getURL=function(t,n,i,r,o,a){return a=a||{},t+"?"+["bbox="+e(i,r,o),"format="+(a.format||"image/png"),"service="+(a.service||"WMS"),"version="+(a.version||"1.1.1"),"request="+(a.request||"GetMap"),"srs="+(a.srs||"EPSG:3857"),"width="+(a.width||256),"height="+(a.height||256),"layers="+n].join("&")},t.getTileBBox=e,t.getMercCoords=n,Object.defineProperty(t,"__esModule",{value:!0})}("object"==typeof n&&"undefined"!=typeof e?n:i.WhooTS=i.WhooTS||{})},{}],13:[function(t,e,n){function i(t){return(t=Math.round(t))<0?0:t>255?255:t}function r(t){return i("%"===t[t.length-1]?parseFloat(t)/100*255:parseInt(t))}function o(t){return function(t){return t<0?0:t>1?1:t}("%"===t[t.length-1]?parseFloat(t)/100:parseFloat(t))}function a(t,e,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}var s={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};try{n.parseCSSColor=function(t){var e,n=t.replace(/ /g,"").toLowerCase();if(n in s)return s[n].slice();if("#"===n[0])return 4===n.length?(e=parseInt(n.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===n.length&&(e=parseInt(n.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var u=n.indexOf("("),l=n.indexOf(")");if(-1!==u&&l+1===n.length){var c=n.substr(0,u),p=n.substr(u+1,l-(u+1)).split(","),h=1;switch(c){case"rgba":if(4!==p.length)return null;h=o(p.pop());case"rgb":return 3!==p.length?null:[r(p[0]),r(p[1]),r(p[2]),h];case"hsla":if(4!==p.length)return null;h=o(p.pop());case"hsl":if(3!==p.length)return null;var f=(parseFloat(p[0])%360+360)%360/360,d=o(p[1]),m=o(p[2]),y=m<=.5?m*(d+1):m+d-m*d,g=2*m-y;return[i(255*a(g,y,f+1/3)),i(255*a(g,y,f)),i(255*a(g,y,f-1/3)),h];default:return null}}return null}}catch(t){}},{}],14:[function(t,e,n){"use strict";function i(t,e,n){n=n||2;var i,s,u,l,c,f,m,y=e&&e.length,g=y?e[0]*n:t.length,v=r(t,0,g,n,!0),_=[];if(!v)return _;if(y&&(v=function(t,e,n,i){var a,s,u,l=[];for(a=0,s=e.length;a<s;a++)(u=r(t,e[a]*i,a<s-1?e[a+1]*i:t.length,i,!1))===u.next&&(u.steiner=!0),l.push(d(u));for(l.sort(p),a=0;a<l.length;a++)h(l[a],n),n=o(n,n.next);return n}(t,e,v,n)),t.length>80*n){i=u=t[0],s=l=t[1];for(var b=n;b<g;b+=n)f=t[b+1],(c=t[b])<i&&(i=c),f<s&&(s=f),c>u&&(u=c),f>l&&(l=f);m=0!==(m=Math.max(u-i,l-s))?1/m:0}return a(v,_,n,i,s,m),_}function r(t,e,n,i,r){var o,a;if(r===O(t,e,n,i)>0)for(o=e;o<n;o+=i)a=w(o,t[o],t[o+1],a);else for(o=n-i;o>=e;o-=i)a=w(o,t[o],t[o+1],a);return a&&v(a,a.next)&&(E(a),a=a.next),a}function o(t,e){if(!t)return t;e||(e=t);var n,i=t;do{if(n=!1,i.steiner||!v(i,i.next)&&0!==g(i.prev,i,i.next))i=i.next;else{if(E(i),(i=e=i.prev)===i.next)break;n=!0}}while(n||i!==e);return e}function a(t,e,n,i,r,p,h){if(t){!h&&p&&function(t,e,n,i){var r=t;do{null===r.z&&(r.z=f(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,n,i,r,o,a,s,u,l=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,i=n,s=0,e=0;e<l&&(s++,i=i.nextZ);e++);for(u=l;s>0||u>0&&i;)0!==s&&(0===u||!i||n.z<=i.z)?(r=n,n=n.nextZ,s--):(r=i,i=i.nextZ,u--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;n=i}o.nextZ=null,l*=2}while(a>1)}(r)}(t,i,r,p);for(var d,m,y=t;t.prev!==t.next;)if(d=t.prev,m=t.next,p?u(t,i,r,p):s(t))e.push(d.i/n),e.push(t.i/n),e.push(m.i/n),E(t),t=m.next,y=m.next;else if((t=m)===y){h?1===h?a(t=l(t,e,n),e,n,i,r,p,2):2===h&&c(t,e,n,i,r,p):a(o(t),e,n,i,r,p,1);break}}}function s(t){var e=t.prev,n=t,i=t.next;if(g(e,n,i)>=0)return!1;for(var r=t.next.next;r!==t.prev;){if(m(e.x,e.y,n.x,n.y,i.x,i.y,r.x,r.y)&&g(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function u(t,e,n,i){var r=t.prev,o=t,a=t.next;if(g(r,o,a)>=0)return!1;for(var s=r.x>o.x?r.x>a.x?r.x:a.x:o.x>a.x?o.x:a.x,u=r.y>o.y?r.y>a.y?r.y:a.y:o.y>a.y?o.y:a.y,l=f(r.x<o.x?r.x<a.x?r.x:a.x:o.x<a.x?o.x:a.x,r.y<o.y?r.y<a.y?r.y:a.y:o.y<a.y?o.y:a.y,e,n,i),c=f(s,u,e,n,i),p=t.prevZ,h=t.nextZ;p&&p.z>=l&&h&&h.z<=c;){if(p!==t.prev&&p!==t.next&&m(r.x,r.y,o.x,o.y,a.x,a.y,p.x,p.y)&&g(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,h!==t.prev&&h!==t.next&&m(r.x,r.y,o.x,o.y,a.x,a.y,h.x,h.y)&&g(h.prev,h,h.next)>=0)return!1;h=h.nextZ}for(;p&&p.z>=l;){if(p!==t.prev&&p!==t.next&&m(r.x,r.y,o.x,o.y,a.x,a.y,p.x,p.y)&&g(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;h&&h.z<=c;){if(h!==t.prev&&h!==t.next&&m(r.x,r.y,o.x,o.y,a.x,a.y,h.x,h.y)&&g(h.prev,h,h.next)>=0)return!1;h=h.nextZ}return!0}function l(t,e,n){var i=t;do{var r=i.prev,o=i.next.next;!v(r,o)&&_(r,i,i.next,o)&&b(r,o)&&b(o,r)&&(e.push(r.i/n),e.push(i.i/n),e.push(o.i/n),E(i),E(i.next),i=t=o),i=i.next}while(i!==t);return i}function c(t,e,n,i,r,s){var u=t;do{for(var l=u.next.next;l!==u.prev;){if(u.i!==l.i&&y(u,l)){var c=x(u,l);return u=o(u,u.next),c=o(c,c.next),a(u,e,n,i,r,s),void a(c,e,n,i,r,s)}l=l.next}u=u.next}while(u!==t)}function p(t,e){return t.x-e.x}function h(t,e){if(e=function(t,e){var n,i=e,r=t.x,o=t.y,a=-1/0;do{if(o<=i.y&&o>=i.next.y&&i.next.y!==i.y){var s=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(s<=r&&s>a){if(a=s,s===r){if(o===i.y)return i;if(o===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!n)return null;if(r===a)return n.prev;var u,l=n,c=n.x,p=n.y,h=1/0;for(i=n.next;i!==l;)r>=i.x&&i.x>=c&&r!==i.x&&m(o<p?r:a,o,c,p,o<p?a:r,o,i.x,i.y)&&((u=Math.abs(o-i.y)/(r-i.x))<h||u===h&&i.x>n.x)&&b(i,t)&&(n=i,h=u),i=i.next;return n}(t,e)){var n=x(e,t);o(n,n.next)}}function f(t,e,n,i,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function d(t){var e=t,n=t;do{e.x<n.x&&(n=e),e=e.next}while(e!==t);return n}function m(t,e,n,i,r,o,a,s){return(r-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(i-s)-(n-a)*(e-s)>=0&&(n-a)*(o-s)-(r-a)*(i-s)>=0}function y(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&_(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&b(t,e)&&b(e,t)&&function(t,e){var n=t,i=!1,r=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==t);return i}(t,e)}function g(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function v(t,e){return t.x===e.x&&t.y===e.y}function _(t,e,n,i){return!!(v(t,e)&&v(n,i)||v(t,i)&&v(n,e))||g(t,e,n)>0!=g(t,e,i)>0&&g(n,i,t)>0!=g(n,i,e)>0}function b(t,e){return g(t.prev,t,t.next)<0?g(t,e,t.next)>=0&&g(t,t.prev,e)>=0:g(t,e,t.prev)<0||g(t,t.next,e)<0}function x(t,e){var n=new C(t.i,t.x,t.y),i=new C(e.i,e.x,e.y),r=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function w(t,e,n,i){var r=new C(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function E(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function C(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function O(t,e,n,i){for(var r=0,o=e,a=n-i;o<n;o+=i)r+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return r}e.exports=i,e.exports.default=i,i.deviation=function(t,e,n,i){var r=e&&e.length,o=Math.abs(O(t,0,r?e[0]*n:t.length,n));if(r)for(var a=0,s=e.length;a<s;a++)o-=Math.abs(O(t,e[a]*n,a<s-1?e[a+1]*n:t.length,n));var u=0;for(a=0;a<i.length;a+=3){var l=i[a]*n,c=i[a+1]*n,p=i[a+2]*n;u+=Math.abs((t[l]-t[p])*(t[c+1]-t[l+1])-(t[l]-t[c])*(t[p+1]-t[l+1]))}return 0===o&&0===u?0:Math.abs((u-o)/o)},i.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},i=0,r=0;r<t.length;r++){for(var o=0;o<t[r].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[r][o][a]);r>0&&n.holes.push(i+=t[r-1].length)}return n}},{}],15:[function(t,e,n){function i(t,e){return function(n){return t(n,e)}}function r(t,e){t[0]=o(t[0],e=!!e);for(var n=1;n<t.length;n++)t[n]=o(t[n],!e);return t}function o(t,e){return function(t){return a.ring(t)>=0}(t)===e?t:t.reverse()}var a=t("@mapbox/geojson-area");e.exports=function t(e,n){switch(e&&e.type||null){case"FeatureCollection":return e.features=e.features.map(i(t,n)),e;case"Feature":return e.geometry=t(e.geometry,n),e;case"Polygon":case"MultiPolygon":return function(t,e){return"Polygon"===t.type?t.coordinates=r(t.coordinates,e):"MultiPolygon"===t.type&&(t.coordinates=t.coordinates.map(i(r,e))),t}(e,n);default:return e}}},{"@mapbox/geojson-area":1}],16:[function(t,e,n){"use strict";function i(t,e,n,i,r){for(var o=0;o<t.length;o+=3){var a=t[o+r];a>=n&&a<=i&&(e.push(t[o]),e.push(t[o+1]),e.push(t[o+2]))}}function r(t,e,n,i,r,o){for(var l=[],c=0===r?s:u,p=0;p<t.length-3;p+=3){var h=t[p],f=t[p+1],d=t[p+2],m=t[p+3],y=t[p+4],g=0===r?h:f,v=0===r?m:y,_=!1;g<n?v>=n&&c(l,h,f,m,y,n):g>i?v<=i&&c(l,h,f,m,y,i):a(l,h,f,d),v<n&&g>=n&&(c(l,h,f,m,y,n),_=!0),v>i&&g<=i&&(c(l,h,f,m,y,i),_=!0),!o&&_&&(l.size=t.size,e.push(l),l=[])}var b=t.length-3;h=t[b],f=t[b+1],d=t[b+2],(g=0===r?h:f)>=n&&g<=i&&a(l,h,f,d),b=l.length-3,o&&b>=3&&(l[b]!==l[0]||l[b+1]!==l[1])&&a(l,l[0],l[1],l[2]),l.length&&(l.size=t.size,e.push(l))}function o(t,e,n,i,o,a){for(var s=0;s<t.length;s++)r(t[s],e,n,i,o,a)}function a(t,e,n,i){t.push(e),t.push(n),t.push(i)}function s(t,e,n,i,r,o){t.push(o),t.push(n+(o-e)*(r-n)/(i-e)),t.push(1)}function u(t,e,n,i,r,o){t.push(e+(o-n)*(i-e)/(r-n)),t.push(o),t.push(1)}e.exports=function(t,e,n,a,s,u,c){if(a/=e,u>=(n/=e)&&c<=a)return t;if(u>a||c<n)return null;for(var p=[],h=0;h<t.length;h++){var f=t[h],d=f.geometry,m=f.type,y=0===s?f.minX:f.minY,g=0===s?f.maxX:f.maxY;if(y>=n&&g<=a)p.push(f);else if(!(y>a||g<n)){var v=[];if("Point"===m||"MultiPoint"===m)i(d,v,n,a,s);else if("LineString"===m)r(d,v,n,a,s,!1);else if("MultiLineString"===m)o(d,v,n,a,s,!1);else if("Polygon"===m)o(d,v,n,a,s,!0);else if("MultiPolygon"===m)for(var _=0;_<d.length;_++){var b=[];o(d[_],b,n,a,s,!0),b.length&&v.push(b)}v.length&&("LineString"!==m&&"MultiLineString"!==m||(1===v.length?(m="LineString",v=v[0]):m="MultiLineString"),"Point"!==m&&"MultiPoint"!==m||(m=3===v.length?"Point":"MultiPoint"),p.push(l(f.id,m,v,f.tags)))}}return p.length?p:null};var l=t("./feature")},{"./feature":18}],17:[function(t,e,n){"use strict";function i(t,e,n){if(e.geometry){var s=e.geometry.coordinates,u=e.geometry.type,l=n*n,p=[];if("Point"===u)r(s,p);else if("MultiPoint"===u)for(var h=0;h<s.length;h++)r(s[h],p);else if("LineString"===u)o(s,p,l,!1);else if("MultiLineString"===u)a(s,p,l,!1);else if("Polygon"===u)a(s,p,l,!0);else{if("MultiPolygon"!==u){if("GeometryCollection"===u){for(h=0;h<e.geometry.geometries.length;h++)i(t,{geometry:e.geometry.geometries[h],properties:e.properties},n);return}throw new Error("Input data is not a valid GeoJSON object.")}for(h=0;h<s.length;h++){var f=[];a(s[h],f,l,!0),p.push(f)}}t.push(c(e.id,u,p,e.properties))}}function r(t,e){e.push(s(t[0])),e.push(u(t[1])),e.push(0)}function o(t,e,n,i){for(var r,o,a=0,c=0;c<t.length;c++){var p=s(t[c][0]),h=u(t[c][1]);e.push(p),e.push(h),e.push(0),c>0&&(a+=i?(r*h-p*o)/2:Math.sqrt(Math.pow(p-r,2)+Math.pow(h-o,2))),r=p,o=h}var f=e.length-3;e[2]=1,l(e,0,f,n),e[f+2]=1,e.size=Math.abs(a)}function a(t,e,n,i){for(var r=0;r<t.length;r++){var a=[];o(t[r],a,n,i),e.push(a)}}function s(t){return t/360+.5}function u(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}e.exports=function(t,e){var n=[];if("FeatureCollection"===t.type)for(var r=0;r<t.features.length;r++)i(n,t.features[r],e);else i(n,"Feature"===t.type?t:{geometry:t},e);return n};var l=t("./simplify"),c=t("./feature")},{"./feature":18,"./simplify":20}],18:[function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n+=3)t.minX=Math.min(t.minX,e[n]),t.minY=Math.min(t.minY,e[n+1]),t.maxX=Math.max(t.maxX,e[n]),t.maxY=Math.max(t.maxY,e[n+1])}e.exports=function(t,e,n,r){var o={id:t||null,type:e,geometry:n,tags:r,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(t){var e=t.geometry,n=t.type;if("Point"===n||"MultiPoint"===n||"LineString"===n)i(t,e);else if("Polygon"===n||"MultiLineString"===n)for(var r=0;r<e.length;r++)i(t,e[r]);else if("MultiPolygon"===n)for(r=0;r<e.length;r++)for(var o=0;o<e[r].length;o++)i(t,e[r][o])}(o),o}},{}],19:[function(t,e,n){"use strict";function i(t,e){var n=(e=this.options=function(t,e){for(var n in e)t[n]=e[n];return t}(Object.create(this.options),e)).debug;if(n&&console.time("preprocess data"),e.maxZoom<0||e.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");var i=o(t,e.tolerance/((1<<e.maxZoom)*e.extent));this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(i=u(i,e.buffer/e.extent)).length&&this.splitTile(i,0,0,0),n&&(i.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function r(t,e,n){return 32*((1<<t)*n+e)+t}e.exports=function(t,e){return new i(t,e)};var o=t("./convert"),a=t("./transform"),s=t("./clip"),u=t("./wrap"),l=t("./tile");i.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,debug:0},i.prototype.splitTile=function(t,e,n,i,o,a,u){for(var c=[t,e,n,i],p=this.options,h=p.debug;c.length;){i=c.pop(),n=c.pop(),e=c.pop(),t=c.pop();var f=1<<e,d=r(e,n,i),m=this.tiles[d],y=e===p.maxZoom?0:p.tolerance/(f*p.extent);if(!m&&(h>1&&console.time("creation"),m=this.tiles[d]=l(t,f,n,i,y,e===p.maxZoom),this.tileCoords.push({z:e,x:n,y:i}),h)){h>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,n,i,m.numFeatures,m.numPoints,m.numSimplified),console.timeEnd("creation"));var g="z"+e;this.stats[g]=(this.stats[g]||0)+1,this.total++}if(m.source=t,o){if(e===p.maxZoom||e===o)continue;var v=1<<o-e;if(n!==Math.floor(a/v)||i!==Math.floor(u/v))continue}else if(e===p.indexMaxZoom||m.numPoints<=p.indexMaxPoints)continue;if(m.source=null,0!==t.length){h>1&&console.time("clipping");var _,b,x,w,E,C,O=.5*p.buffer/p.extent,P=.5-O,S=.5+O,T=1+O;_=b=x=w=null,E=s(t,f,n-O,n+S,0,m.minX,m.maxX),C=s(t,f,n+P,n+T,0,m.minX,m.maxX),t=null,E&&(_=s(E,f,i-O,i+S,1,m.minY,m.maxY),b=s(E,f,i+P,i+T,1,m.minY,m.maxY),E=null),C&&(x=s(C,f,i-O,i+S,1,m.minY,m.maxY),w=s(C,f,i+P,i+T,1,m.minY,m.maxY),C=null),h>1&&console.timeEnd("clipping"),c.push(_||[],e+1,2*n,2*i),c.push(b||[],e+1,2*n,2*i+1),c.push(x||[],e+1,2*n+1,2*i),c.push(w||[],e+1,2*n+1,2*i+1)}}},i.prototype.getTile=function(t,e,n){var i=this.options,o=i.extent,s=i.debug;if(t<0||t>24)return null;var u=1<<t,l=r(t,e=(e%u+u)%u,n);if(this.tiles[l])return a.tile(this.tiles[l],o);s>1&&console.log("drilling down to z%d-%d-%d",t,e,n);for(var c,p=t,h=e,f=n;!c&&p>0;)p--,h=Math.floor(h/2),f=Math.floor(f/2),c=this.tiles[r(p,h,f)];return c&&c.source?(s>1&&console.log("found parent tile z%d-%d-%d",p,h,f),s>1&&console.time("drilling down"),this.splitTile(c.source,p,h,f,t,e,n),s>1&&console.timeEnd("drilling down"),this.tiles[l]?a.tile(this.tiles[l],o):null):null}},{"./clip":16,"./convert":17,"./tile":21,"./transform":22,"./wrap":23}],20:[function(t,e,n){"use strict";function i(t,e,n,i,r,o){var a=r-n,s=o-i;if(0!==a||0!==s){var u=((t-n)*a+(e-i)*s)/(a*a+s*s);u>1?(n=r,i=o):u>0&&(n+=a*u,i+=s*u)}return(a=t-n)*a+(s=e-i)*s}e.exports=function t(e,n,r,o){for(var a,s=o,u=e[n],l=e[n+1],c=e[r],p=e[r+1],h=n+3;h<r;h+=3){var f=i(e[h],e[h+1],u,l,c,p);f>s&&(a=h,s=f)}s>o&&(a-n>3&&t(e,n,a,o),e[a+2]=s,r-a>3&&t(e,a,r,o))}},{}],21:[function(t,e,n){"use strict";function i(t,e,n,i){var o=e.geometry,a=e.type,s=[];if("Point"===a||"MultiPoint"===a)for(var u=0;u<o.length;u+=3)s.push(o[u]),s.push(o[u+1]),t.numPoints++,t.numSimplified++;else if("LineString"===a)r(s,o,t,n,i,!1,!1);else if("MultiLineString"===a||"Polygon"===a)for(u=0;u<o.length;u++)r(s,o[u],t,n,i,"Polygon"===a,0===u);else if("MultiPolygon"===a)for(var l=0;l<o.length;l++){var c=o[l];for(u=0;u<c.length;u++)r(s,c[u],t,n,i,!0,0===u)}if(s.length){var p={geometry:s,type:"Polygon"===a||"MultiPolygon"===a?3:"LineString"===a||"MultiLineString"===a?2:1,tags:e.tags||null};null!==e.id&&(p.id=e.id),t.features.push(p)}}function r(t,e,n,i,r,o,a){var s=i*i;if(!r&&e.size<(o?s:i))n.numPoints+=e.length/3;else{for(var u=[],l=0;l<e.length;l+=3)(r||e[l+2]>s)&&(n.numSimplified++,u.push(e[l]),u.push(e[l+1])),n.numPoints++;o&&function(t,e){for(var n=0,i=0,r=t.length,o=r-2;i<r;o=i,i+=2)n+=(t[i]-t[o])*(t[i+1]+t[o+1]);if(n>0===e)for(i=0,r=t.length;i<r/2;i+=2){var a=t[i],s=t[i+1];t[i]=t[r-2-i],t[i+1]=t[r-1-i],t[r-2-i]=a,t[r-1-i]=s}}(u,a),t.push(u)}}e.exports=function(t,e,n,r,o,a){for(var s={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:r,z2:e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},u=0;u<t.length;u++){s.numFeatures++,i(s,t[u],o,a);var l=t[u].minX,c=t[u].minY,p=t[u].maxX,h=t[u].maxY;l<s.minX&&(s.minX=l),c<s.minY&&(s.minY=c),p>s.maxX&&(s.maxX=p),h>s.maxY&&(s.maxY=h)}return s}},{}],22:[function(t,e,n){"use strict";function i(t,e,n,i,r,o){return[Math.round(n*(t*i-r)),Math.round(n*(e*i-o))]}n.tile=function(t,e){if(t.transformed)return t;var n,r,o,a=t.z2,s=t.x,u=t.y;for(n=0;n<t.features.length;n++){var l=t.features[n],c=l.geometry,p=l.type;if(l.geometry=[],1===p)for(r=0;r<c.length;r+=2)l.geometry.push(i(c[r],c[r+1],e,a,s,u));else for(r=0;r<c.length;r++){var h=[];for(o=0;o<c[r].length;o+=2)h.push(i(c[r][o],c[r][o+1],e,a,s,u));l.geometry.push(h)}}return t.transformed=!0,t},n.point=i},{}],23:[function(t,e,n){"use strict";function i(t,e){for(var n=[],i=0;i<t.length;i++){var o,s=t[i],u=s.type;if("Point"===u||"MultiPoint"===u||"LineString"===u)o=r(s.geometry,e);else if("MultiLineString"===u||"Polygon"===u){o=[];for(var l=0;l<s.geometry.length;l++)o.push(r(s.geometry[l],e))}else if("MultiPolygon"===u)for(o=[],l=0;l<s.geometry.length;l++){for(var c=[],p=0;p<s.geometry[l].length;p++)c.push(r(s.geometry[l][p],e));o.push(c)}n.push(a(s.id,u,o,s.tags))}return n}function r(t,e){var n=[];n.size=t.size;for(var i=0;i<t.length;i+=3)n.push(t[i]+e,t[i+1],t[i+2]);return n}var o=t("./clip"),a=t("./feature");e.exports=function(t,e){var n=t,r=o(t,1,-1-e,e,0,-1,2),a=o(t,1,1-e,2+e,0,-1,2);return(r||a)&&(n=o(t,1,-e,1+e,0,-1,2)||[],r&&(n=i(r,1).concat(n)),a&&(n=n.concat(i(a,-1)))),n}},{"./clip":16,"./feature":18}],24:[function(t,e,n){"use strict";function i(t,e,n){var i=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var o=new Int32Array(this.arrayBuffer);t=o[0],this.d=(e=o[1])+2*(n=o[2]);for(var a=0;a<this.d*this.d;a++){var s=o[r+a],u=o[r+a+1];i.push(s===u?null:o.subarray(s,u))}var l=o[r+i.length+1];this.keys=o.subarray(o[r+i.length],l),this.bboxes=o.subarray(l),this.insert=this._insertReadonly}else{this.d=e+2*n;for(var c=0;c<this.d*this.d;c++)i.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=n,this.scale=e/t,this.uid=0;var p=n/e*t;this.min=-p,this.max=t+p}e.exports=i;var r=3;i.prototype.insert=function(t,e,n,i,r){this._forEachCell(e,n,i,r,this._insertCell,this.uid++),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(i),this.bboxes.push(r)},i.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},i.prototype._insertCell=function(t,e,n,i,r,o){this.cells[r].push(o)},i.prototype.query=function(t,e,n,i){var r=this.min,o=this.max;if(t<=r&&e<=r&&o<=n&&o<=i)return Array.prototype.slice.call(this.keys);var a=[];return this._forEachCell(t,e,n,i,this._queryCell,a,{}),a},i.prototype._queryCell=function(t,e,n,i,r,o,a){var s=this.cells[r];if(null!==s)for(var u=this.keys,l=this.bboxes,c=0;c<s.length;c++){var p=s[c];if(void 0===a[p]){var h=4*p;t<=l[h+2]&&e<=l[h+3]&&n>=l[h+0]&&i>=l[h+1]?(a[p]=!0,o.push(u[p])):a[p]=!1}}},i.prototype._forEachCell=function(t,e,n,i,r,o,a){for(var s=this._convertToCellCoord(t),u=this._convertToCellCoord(e),l=this._convertToCellCoord(n),c=this._convertToCellCoord(i),p=s;p<=l;p++)for(var h=u;h<=c;h++)if(r.call(this,t,e,n,i,this.d*h+p,o,a))return},i.prototype._convertToCellCoord=function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))},i.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,e=r+this.cells.length+1+1,n=0,i=0;i<this.cells.length;i++)n+=this.cells[i].length;var o=new Int32Array(e+n+this.keys.length+this.bboxes.length);o[0]=this.extent,o[1]=this.n,o[2]=this.padding;for(var a=e,s=0;s<t.length;s++){var u=t[s];o[r+s]=a,o.set(u,a),a+=u.length}return o[r+t.length]=a,o.set(this.keys,a),o[r+t.length+1]=a+=this.keys.length,o.set(this.bboxes,a),a+=this.bboxes.length,o.buffer}},{}],25:[function(t,e,n){n.read=function(t,e,n,i,r){var o,a,s=8*r-i-1,u=(1<<s)-1,l=u>>1,c=-7,p=n?r-1:0,h=n?-1:1,f=t[e+p];for(p+=h,o=f&(1<<-c)-1,f>>=-c,c+=s;c>0;o=256*o+t[e+p],p+=h,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=i;c>0;a=256*a+t[e+p],p+=h,c-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,i),o-=l}return(f?-1:1)*a*Math.pow(2,o-i)},n.write=function(t,e,n,i,r,o){var a,s,u,l=8*o-r-1,c=(1<<l)-1,p=c>>1,h=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,f=i?0:o-1,d=i?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+p>=1?h/u:h*Math.pow(2,1-p))*u>=2&&(a++,u/=2),a+p>=c?(s=0,a=c):a+p>=1?(s=(e*u-1)*Math.pow(2,r),a+=p):(s=e*Math.pow(2,p-1)*Math.pow(2,r),a=0));r>=8;t[n+f]=255&s,f+=d,s/=256,r-=8);for(a=a<<r|s,l+=r;l>0;t[n+f]=255&a,f+=d,a/=256,l-=8);t[n+f-d]|=128*m}},{}],26:[function(t,e,n){"use strict";function i(t,e,n,i,s){e=e||r,n=n||o,s=s||Array,this.nodeSize=i||64,this.points=t,this.ids=new s(t.length),this.coords=new s(2*t.length);for(var u=0;u<t.length;u++)this.ids[u]=u,this.coords[2*u]=e(t[u]),this.coords[2*u+1]=n(t[u]);a(this.ids,this.coords,this.nodeSize,0,this.ids.length-1,0)}function r(t){return t[0]}function o(t){return t[1]}var a=t("./sort"),s=t("./range"),u=t("./within");e.exports=function(t,e,n,r,o){return new i(t,e,n,r,o)},i.prototype={range:function(t,e,n,i){return s(this.ids,this.coords,t,e,n,i,this.nodeSize)},within:function(t,e,n){return u(this.ids,this.coords,t,e,n,this.nodeSize)}}},{"./range":27,"./sort":28,"./within":29}],27:[function(t,e,n){"use strict";e.exports=function(t,e,n,i,r,o,a){for(var s,u,l=[0,t.length-1,0],c=[];l.length;){var p=l.pop(),h=l.pop(),f=l.pop();if(h-f<=a)for(var d=f;d<=h;d++)u=e[2*d+1],(s=e[2*d])>=n&&s<=r&&u>=i&&u<=o&&c.push(t[d]);else{var m=Math.floor((f+h)/2);u=e[2*m+1],(s=e[2*m])>=n&&s<=r&&u>=i&&u<=o&&c.push(t[m]);var y=(p+1)%2;(0===p?n<=s:i<=u)&&(l.push(f),l.push(m-1),l.push(y)),(0===p?r>=s:o>=u)&&(l.push(m+1),l.push(h),l.push(y))}}return c}},{}],28:[function(t,e,n){"use strict";function i(t,e,n,i){r(t,n,i),r(e,2*n,2*i),r(e,2*n+1,2*i+1)}function r(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}e.exports=function t(e,n,r,o,a,s){if(!(a-o<=r)){var u=Math.floor((o+a)/2);(function t(e,n,r,o,a,s){for(;a>o;){if(a-o>600){var u=a-o+1,l=r-o+1,c=Math.log(u),p=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*p*(u-p)/u)*(l-u/2<0?-1:1);t(e,n,r,Math.max(o,Math.floor(r-l*p/u+h)),Math.min(a,Math.floor(r+(u-l)*p/u+h)),s)}var f=n[2*r+s],d=o,m=a;for(i(e,n,o,r),n[2*a+s]>f&&i(e,n,o,a);d<m;){for(i(e,n,d,m),d++,m--;n[2*d+s]<f;)d++;for(;n[2*m+s]>f;)m--}n[2*o+s]===f?i(e,n,o,m):i(e,n,++m,a),m<=r&&(o=m+1),r<=m&&(a=m-1)}})(e,n,u,o,a,s%2),t(e,n,r,o,u-1,s+1),t(e,n,r,u+1,a,s+1)}}},{}],29:[function(t,e,n){"use strict";function i(t,e,n,i){var r=t-n,o=e-i;return r*r+o*o}e.exports=function(t,e,n,r,o,a){for(var s=[0,t.length-1,0],u=[],l=o*o;s.length;){var c=s.pop(),p=s.pop(),h=s.pop();if(p-h<=a)for(var f=h;f<=p;f++)i(e[2*f],e[2*f+1],n,r)<=l&&u.push(t[f]);else{var d=Math.floor((h+p)/2),m=e[2*d],y=e[2*d+1];i(m,y,n,r)<=l&&u.push(t[d]);var g=(c+1)%2;(0===c?n-o<=m:r-o<=y)&&(s.push(h),s.push(d-1),s.push(g)),(0===c?n+o>=m:r+o>=y)&&(s.push(d+1),s.push(p),s.push(g))}}return u}},{}],30:[function(t,e,n){"use strict";function i(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}function r(t){return t.type===i.Bytes?t.readVarint()+t.pos:t.pos+1}function o(t,e,n){return n?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function a(t,e,n){var i=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.ceil(Math.log(e)/(7*Math.LN2));n.realloc(i);for(var r=n.pos-1;r>=t;r--)n.buf[r+i]=n.buf[r]}function s(t,e){for(var n=0;n<t.length;n++)e.writeVarint(t[n])}function u(t,e){for(var n=0;n<t.length;n++)e.writeSVarint(t[n])}function l(t,e){for(var n=0;n<t.length;n++)e.writeFloat(t[n])}function c(t,e){for(var n=0;n<t.length;n++)e.writeDouble(t[n])}function p(t,e){for(var n=0;n<t.length;n++)e.writeBoolean(t[n])}function h(t,e){for(var n=0;n<t.length;n++)e.writeFixed32(t[n])}function f(t,e){for(var n=0;n<t.length;n++)e.writeSFixed32(t[n])}function d(t,e){for(var n=0;n<t.length;n++)e.writeFixed64(t[n])}function m(t,e){for(var n=0;n<t.length;n++)e.writeSFixed64(t[n])}function y(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function g(t,e,n){t[n]=e,t[n+1]=e>>>8,t[n+2]=e>>>16,t[n+3]=e>>>24}function v(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}e.exports=i;var _=t("ieee754");i.Varint=0,i.Fixed64=1,i.Bytes=2,i.Fixed32=5,i.prototype={destroy:function(){this.buf=null},readFields:function(t,e,n){for(n=n||this.length;this.pos<n;){var i=this.readVarint(),r=i>>3,o=this.pos;this.type=7&i,t(r,e,this),this.pos===o&&this.skip(i)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=y(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=v(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=y(this.buf,this.pos)+4294967296*y(this.buf,this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=y(this.buf,this.pos)+4294967296*v(this.buf,this.pos+4);return this.pos+=8,t},readFloat:function(){var t=_.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=_.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,n,i=this.buf;return e=127&(n=i[this.pos++]),n<128?e:(e|=(127&(n=i[this.pos++]))<<7,n<128?e:(e|=(127&(n=i[this.pos++]))<<14,n<128?e:(e|=(127&(n=i[this.pos++]))<<21,n<128?e:function(t,e,n){var i,r,a=n.buf;if(i=(112&(r=a[n.pos++]))>>4,r<128)return o(t,i,e);if(i|=(127&(r=a[n.pos++]))<<3,r<128)return o(t,i,e);if(i|=(127&(r=a[n.pos++]))<<10,r<128)return o(t,i,e);if(i|=(127&(r=a[n.pos++]))<<17,r<128)return o(t,i,e);if(i|=(127&(r=a[n.pos++]))<<24,r<128)return o(t,i,e);if(i|=(1&(r=a[n.pos++]))<<31,r<128)return o(t,i,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(n=i[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=function(t,e,n){for(var i="",r=e;r<n;){var o,a,s,u=t[r],l=null,c=u>239?4:u>223?3:u>191?2:1;if(r+c>n)break;1===c?u<128&&(l=u):2===c?128==(192&(o=t[r+1]))&&(l=(31&u)<<6|63&o)<=127&&(l=null):3===c?(a=t[r+2],128==(192&(o=t[r+1]))&&128==(192&a)&&((l=(15&u)<<12|(63&o)<<6|63&a)<=2047||l>=55296&&l<=57343)&&(l=null)):4===c&&(a=t[r+2],s=t[r+3],128==(192&(o=t[r+1]))&&128==(192&a)&&128==(192&s)&&((l=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||l>=1114112)&&(l=null)),null===l?(l=65533,c=1):l>65535&&(l-=65536,i+=String.fromCharCode(l>>>10&1023|55296),l=56320|1023&l),i+=String.fromCharCode(l),r+=c}return i}(this.buf,this.pos,t);return this.pos=t,e},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){var n=r(this);for(t=t||[];this.pos<n;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){var e=r(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){var e=r(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){var e=r(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){var e=r(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){var e=r(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){var e=r(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){var e=r(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){var e=r(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===i.Varint)for(;this.buf[this.pos++]>127;);else if(e===i.Bytes)this.pos=this.readVarint()+this.pos;else if(e===i.Fixed32)this.pos+=4;else{if(e!==i.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var n=new Uint8Array(e);n.set(this.buf),this.buf=n,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),g(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),g(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),g(this.buf,-1&t,this.pos),g(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),g(this.buf,-1&t,this.pos),g(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var n,i;if(t>=0?(n=t%4294967296|0,i=t/4294967296|0):(i=~(-t/4294967296),4294967295^(n=~(-t%4294967296))?n=n+1|0:(n=0,i=i+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,n){n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,n.buf[n.pos]=127&(t>>>=7)}(n,0,e),function(t,e){var n=(7&t)<<4;e.buf[e.pos++]|=n|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(i,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,n){for(var i,r,o=0;o<e.length;o++){if((i=e.charCodeAt(o))>55295&&i<57344){if(!r){i>56319||o+1===e.length?(t[n++]=239,t[n++]=191,t[n++]=189):r=i;continue}if(i<56320){t[n++]=239,t[n++]=191,t[n++]=189,r=i;continue}i=r-55296<<10|i-56320|65536,r=null}else r&&(t[n++]=239,t[n++]=191,t[n++]=189,r=null);i<128?t[n++]=i:(i<2048?t[n++]=i>>6|192:(i<65536?t[n++]=i>>12|224:(t[n++]=i>>18|240,t[n++]=i>>12&63|128),t[n++]=i>>6&63|128),t[n++]=63&i|128)}return n}(this.buf,t,this.pos);var n=this.pos-e;n>=128&&a(e,n,this),this.pos=e-1,this.writeVarint(n),this.pos+=n},writeFloat:function(t){this.realloc(4),_.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),_.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var n=0;n<e;n++)this.buf[this.pos++]=t[n]},writeRawMessage:function(t,e){this.pos++;var n=this.pos;t(e,this);var i=this.pos-n;i>=128&&a(n,i,this),this.pos=n-1,this.writeVarint(i),this.pos+=i},writeMessage:function(t,e,n){this.writeTag(t,i.Bytes),this.writeRawMessage(e,n)},writePackedVarint:function(t,e){this.writeMessage(t,s,e)},writePackedSVarint:function(t,e){this.writeMessage(t,u,e)},writePackedBoolean:function(t,e){this.writeMessage(t,p,e)},writePackedFloat:function(t,e){this.writeMessage(t,l,e)},writePackedDouble:function(t,e){this.writeMessage(t,c,e)},writePackedFixed32:function(t,e){this.writeMessage(t,h,e)},writePackedSFixed32:function(t,e){this.writeMessage(t,f,e)},writePackedFixed64:function(t,e){this.writeMessage(t,d,e)},writePackedSFixed64:function(t,e){this.writeMessage(t,m,e)},writeBytesField:function(t,e){this.writeTag(t,i.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,i.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,i.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,i.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,i.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,i.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,i.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,i.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,i.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,i.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}}},{ieee754:25}],31:[function(t,e,n){"use strict";function i(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function r(t,e){return t<e?-1:t>e?1:0}e.exports=function t(e,n,o,a,s){for(o=o||0,a=a||e.length-1,s=s||r;a>o;){if(a-o>600){var u=a-o+1,l=n-o+1,c=Math.log(u),p=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*p*(u-p)/u)*(l-u/2<0?-1:1);t(e,n,Math.max(o,Math.floor(n-l*p/u+h)),Math.min(a,Math.floor(n+(u-l)*p/u+h)),s)}var f=e[n],d=o,m=a;for(i(e,o,n),s(e[a],f)>0&&i(e,o,a);d<m;){for(i(e,d,m),d++,m--;s(e[d],f)<0;)d++;for(;s(e[m],f)>0;)m--}0===s(e[o],f)?i(e,o,m):i(e,++m,a),m<=n&&(o=m+1),n<=m&&(a=m-1)}}},{}],32:[function(t,e,n){"use strict";function i(t){this.options=c(Object.create(this.options),t),this.trees=new Array(this.options.maxZoom+1)}function r(t,e,n,i,r){return{x:t,y:e,zoom:1/0,id:i,properties:r,parentId:-1,numPoints:n}}function o(t,e){var n=t.geometry.coordinates;return{x:u(n[0]),y:l(n[1]),zoom:1/0,id:e,parentId:-1}}function a(t){return{type:"Feature",properties:s(t),geometry:{type:"Point",coordinates:[function(t){return 360*(t-.5)}(t.x),function(t){var e=(180-360*t)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}(t.y)]}}}function s(t){var e=t.numPoints,n=e>=1e4?Math.round(e/1e3)+"k":e>=1e3?Math.round(e/100)/10+"k":e;return c(c({},t.properties),{cluster:!0,cluster_id:t.id,point_count:e,point_count_abbreviated:n})}function u(t){return t/360+.5}function l(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function c(t,e){for(var n in e)t[n]=e[n];return t}function p(t){return t.x}function h(t){return t.y}var f=t("kdbush");e.exports=function(t){return new i(t)},i.prototype={options:{minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,reduce:null,initial:function(){return{}},map:function(t){return t}},load:function(t){var e=this.options.log;e&&console.time("total time");var n="prepare "+t.length+" points";e&&console.time(n),this.points=t;var i=t.map(o);e&&console.timeEnd(n);for(var r=this.options.maxZoom;r>=this.options.minZoom;r--){var a=+Date.now();this.trees[r+1]=f(i,p,h,this.options.nodeSize,Float32Array),i=this._cluster(i,r),e&&console.log("z%d: %d clusters in %dms",r,i.length,+Date.now()-a)}return this.trees[this.options.minZoom]=f(i,p,h,this.options.nodeSize,Float32Array),e&&console.timeEnd("total time"),this},getClusters:function(t,e){for(var n=this.trees[this._limitZoom(e)],i=n.range(u(t[0]),l(t[3]),u(t[2]),l(t[1])),r=[],o=0;o<i.length;o++){var s=n.points[i[o]];r.push(s.numPoints?a(s):this.points[s.id])}return r},getChildren:function(t,e){for(var n=this.trees[e+1].points[t],i=this.options.radius/(this.options.extent*Math.pow(2,e)),r=this.trees[e+1].within(n.x,n.y,i),o=[],s=0;s<r.length;s++){var u=this.trees[e+1].points[r[s]];u.parentId===t&&o.push(u.numPoints?a(u):this.points[u.id])}return o},getLeaves:function(t,e,n,i){var r=[];return this._appendLeaves(r,t,e,n=n||10,i=i||0,0),r},getTile:function(t,e,n){var i=this.trees[this._limitZoom(t)],r=Math.pow(2,t),o=this.options.radius/this.options.extent,a=(n-o)/r,s=(n+1+o)/r,u={features:[]};return this._addTileFeatures(i.range((e-o)/r,a,(e+1+o)/r,s),i.points,e,n,r,u),0===e&&this._addTileFeatures(i.range(1-o/r,a,1,s),i.points,r,n,r,u),e===r-1&&this._addTileFeatures(i.range(0,a,o/r,s),i.points,-1,n,r,u),u.features.length?u:null},getClusterExpansionZoom:function(t,e){for(;e<this.options.maxZoom;){var n=this.getChildren(t,e);if(e++,1!==n.length)break;t=n[0].properties.cluster_id}return e},_appendLeaves:function(t,e,n,i,r,o){for(var a=this.getChildren(e,n),s=0;s<a.length;s++){var u=a[s].properties;if(u.cluster?o+u.point_count<=r?o+=u.point_count:o=this._appendLeaves(t,u.cluster_id,n+1,i,r,o):o<r?o++:t.push(a[s]),t.length===i)break}return o},_addTileFeatures:function(t,e,n,i,r,o){for(var a=0;a<t.length;a++){var u=e[t[a]];o.features.push({type:1,geometry:[[Math.round(this.options.extent*(u.x*r-n)),Math.round(this.options.extent*(u.y*r-i))]],tags:u.numPoints?s(u):this.points[u.id].properties})}},_limitZoom:function(t){return Math.max(this.options.minZoom,Math.min(t,this.options.maxZoom+1))},_cluster:function(t,e){for(var n=[],i=this.options.radius/(this.options.extent*Math.pow(2,e)),o=0;o<t.length;o++){var a=t[o];if(!(a.zoom<=e)){a.zoom=e;var s=this.trees[e+1],u=s.within(a.x,a.y,i),l=a.numPoints||1,c=a.x*l,p=a.y*l,h=null;this.options.reduce&&(h=this.options.initial(),this._accumulate(h,a));for(var f=0;f<u.length;f++){var d=s.points[u[f]];if(e<d.zoom){var m=d.numPoints||1;d.zoom=e,c+=d.x*m,p+=d.y*m,l+=m,d.parentId=o,this.options.reduce&&this._accumulate(h,d)}}1===l?n.push(a):(a.parentId=o,n.push(r(c/l,p/l,l,o,h)))}}return n},_accumulate:function(t,e){var n=e.numPoints?e.properties:this.options.map(this.points[e.id].properties);this.options.reduce(t,n)}}},{kdbush:26}],33:[function(t,e,n){"use strict";function i(t,e){if(!(this instanceof i))return new i(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||r,this.length>0)for(var n=this.length>>1;n>=0;n--)this._down(n)}function r(t,e){return t<e?-1:t>e?1:0}e.exports=i,i.prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var t=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t}},peek:function(){return this.data[0]},_up:function(t){for(var e=this.data,n=this.compare,i=e[t];t>0;){var r=t-1>>1,o=e[r];if(n(i,o)>=0)break;e[t]=o,t=r}e[t]=i},_down:function(t){for(var e=this.data,n=this.compare,i=this.length,r=i>>1,o=e[t];t<r;){var a=1+(t<<1),s=a+1,u=e[a];if(s<i&&n(e[s],u)<0&&(a=s,u=e[s]),n(u,o)>=0)break;e[t]=u,t=a}e[t]=o}}},{}],34:[function(t,e,n){function i(t){var e=new p;return function(t,e){for(var n in t.layers)e.writeMessage(3,r,t.layers[n])}(t,e),e.finish()}function r(t,e){e.writeVarintField(15,t.version||1),e.writeStringField(1,t.name||""),e.writeVarintField(5,t.extent||4096);var n,i={keys:[],values:[],keycache:{},valuecache:{}};for(n=0;n<t.length;n++)i.feature=t.feature(n),e.writeMessage(2,o,i);var r=i.keys;for(n=0;n<r.length;n++)e.writeStringField(3,r[n]);var a=i.values;for(n=0;n<a.length;n++)e.writeMessage(4,c,a[n])}function o(t,e){var n=t.feature;void 0!==n.id&&e.writeVarintField(1,n.id),e.writeMessage(2,a,t),e.writeVarintField(3,n.type),e.writeMessage(4,l,n)}function a(t,e){var n=t.feature,i=t.keys,r=t.values,o=t.keycache,a=t.valuecache;for(var s in n.properties){var u=o[s];void 0===u&&(i.push(s),o[s]=u=i.length-1),e.writeVarint(u);var l=n.properties[s],c=typeof l;"string"!==c&&"boolean"!==c&&"number"!==c&&(l=JSON.stringify(l));var p=c+":"+l,h=a[p];void 0===h&&(r.push(l),a[p]=h=r.length-1),e.writeVarint(h)}}function s(t,e){return(e<<3)+(7&t)}function u(t){return t<<1^t>>31}function l(t,e){for(var n=t.loadGeometry(),i=t.type,r=0,o=0,a=n.length,l=0;l<a;l++){var c=n[l],p=1;1===i&&(p=c.length),e.writeVarint(s(1,p));for(var h=0;h<c.length;h++){1===h&&1!==i&&e.writeVarint(s(2,c.length-1));var f=c[h].x-r,d=c[h].y-o;e.writeVarint(u(f)),e.writeVarint(u(d)),r+=f,o+=d}}}function c(t,e){var n=typeof t;"string"===n?e.writeStringField(1,t):"boolean"===n?e.writeBooleanField(7,t):"number"===n&&(t%1!=0?e.writeDoubleField(3,t):t<0?e.writeSVarintField(6,t):e.writeVarintField(5,t))}var p=t("pbf"),h=t("./lib/geojson_wrapper");e.exports=i,e.exports.fromVectorTileJs=i,e.exports.fromGeojsonVt=function(t){var e={};for(var n in t)e[n]=new h(t[n].features),e[n].name=n;return i({layers:e})},e.exports.GeoJSONWrapper=h},{"./lib/geojson_wrapper":35,pbf:30}],35:[function(t,e,n){"use strict";function i(t){this.features=t,this.length=t.length}function r(t){this.id="number"==typeof t.id?t.id:void 0,this.type=t.type,this.rawGeometry=1===t.type?[t.geometry]:t.geometry,this.properties=t.tags,this.extent=4096}var o=t("@mapbox/point-geometry"),a=t("@mapbox/vector-tile").VectorTileFeature;e.exports=i,i.prototype.feature=function(t){return new r(this.features[t])},r.prototype.loadGeometry=function(){var t=this.rawGeometry;this.geometry=[];for(var e=0;e<t.length;e++){for(var n=t[e],i=[],r=0;r<n.length;r++)i.push(new o(n[r][0],n[r][1]));this.geometry.push(i)}return this.geometry},r.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var t=this.geometry,e=1/0,n=-1/0,i=1/0,r=-1/0,o=0;o<t.length;o++)for(var a=t[o],s=0;s<a.length;s++){var u=a[s];e=Math.min(e,u.x),n=Math.max(n,u.x),i=Math.min(i,u.y),r=Math.max(r,u.y)}return[e,i,n,r]},r.prototype.toGeoJSON=a.prototype.toGeoJSON},{"@mapbox/point-geometry":4,"@mapbox/vector-tile":8}],36:[function(t,e,n){var i=arguments[3],r=arguments[4],o=arguments[5],a=JSON.stringify;e.exports=function(t,e){for(var n,s=Object.keys(o),u=0,l=s.length;u<l;u++){var c=o[h=s[u]].exports;if(c===t||c&&c.default===t){n=h;break}}if(!n){n=Math.floor(Math.pow(16,8)*Math.random()).toString(16);var p={};for(u=0,l=s.length;u<l;u++){var h;p[h=s[u]]=h}r[n]=["function(require,module,exports){"+t+"(self); }",p]}var f=Math.floor(Math.pow(16,8)*Math.random()).toString(16),d={};d[n]=n,r[f]=["function(require,module,exports){var f = require("+a(n)+");(f.default ? f.default : f)(self);}",d];var m={};!function t(e){for(var n in m[e]=!0,r[e][1]){var i=r[e][1][n];m[i]||t(i)}}(f);var y="("+i+")({"+Object.keys(m).map(function(t){return a(t)+":["+r[t][0]+","+a(r[t][1])+"]"}).join(",")+"},{},["+a(f)+"])",g=window.URL||window.webkitURL||window.mozURL||window.msURL,v=new Blob([y],{type:"text/javascript"});if(e&&e.bare)return v;var _=g.createObjectURL(v),b=new Worker(_);return b.objectURL=_,b}},{}],37:[function(t,e,n){e.exports.RADIUS=6378137,e.exports.FLATTENING=1/298.257223563,e.exports.POLAR_RADIUS=6356752.3142},{}],38:[function(t,e,n){e.exports={version:"0.44.1"}},{}],39:[function(t,e,n){"use strict";var i=t("../util/struct_array").StructArray,r=t("../util/struct_array").Struct,o=t("../util/web_worker_transfer").register,a=t("@mapbox/point-geometry"),s=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var n=this.length;this.resize(n+1);var i=2*n;return this.int16[i+0]=t,this.int16[i+1]=e,n},e}(i);s.prototype.bytesPerElement=4,o("StructArrayLayout2i4",s);var u=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,i){var r=this.length;this.resize(r+1);var o=4*r;return this.int16[o+0]=t,this.int16[o+1]=e,this.int16[o+2]=n,this.int16[o+3]=i,r},e}(i);u.prototype.bytesPerElement=8,o("StructArrayLayout4i8",u);var l=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,i,r,o){var a=this.length;this.resize(a+1);var s=6*a;return this.int16[s+0]=t,this.int16[s+1]=e,this.int16[s+2]=n,this.int16[s+3]=i,this.int16[s+4]=r,this.int16[s+5]=o,a},e}(i);l.prototype.bytesPerElement=12,o("StructArrayLayout2i4i12",l);var c=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,i,r,o,a,s){var u=this.length;this.resize(u+1);var l=6*u,c=12*u;return this.int16[l+0]=t,this.int16[l+1]=e,this.int16[l+2]=n,this.int16[l+3]=i,this.uint8[c+8]=r,this.uint8[c+9]=o,this.uint8[c+10]=a,this.uint8[c+11]=s,u},e}(i);c.prototype.bytesPerElement=12,o("StructArrayLayout4i4ub12",c);var p=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,i,r,o,a,s){var u=this.length;this.resize(u+1);var l=8*u;return this.int16[l+0]=t,this.int16[l+1]=e,this.int16[l+2]=n,this.int16[l+3]=i,this.uint16[l+4]=r,this.uint16[l+5]=o,this.uint16[l+6]=a,this.uint16[l+7]=s,u},e}(i);p.prototype.bytesPerElement=16,o("StructArrayLayout4i4ui16",p);var h=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var i=this.length;this.resize(i+1);var r=3*i;return this.float32[r+0]=t,this.float32[r+1]=e,this.float32[r+2]=n,i},e}(i);h.prototype.bytesPerElement=12,o("StructArrayLayout3f12",h);var f=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.uint32[1*e+0]=t,e},e}(i);f.prototype.bytesPerElement=4,o("StructArrayLayout1ul4",f);var d=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,i,r,o,a,s,u,l,c){var p=this.length;this.resize(p+1);var h=12*p,f=6*p;return this.int16[h+0]=t,this.int16[h+1]=e,this.int16[h+2]=n,this.int16[h+3]=i,this.int16[h+4]=r,this.int16[h+5]=o,this.uint32[f+3]=a,this.uint16[h+8]=s,this.uint16[h+9]=u,this.int16[h+10]=l,this.int16[h+11]=c,p},e}(i);d.prototype.bytesPerElement=24,o("StructArrayLayout6i1ul2ui2i24",d);var m=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,i,r,o){var a=this.length;this.resize(a+1);var s=6*a;return this.int16[s+0]=t,this.int16[s+1]=e,this.int16[s+2]=n,this.int16[s+3]=i,this.int16[s+4]=r,this.int16[s+5]=o,a},e}(i);m.prototype.bytesPerElement=12,o("StructArrayLayout2i2i2i12",m);var y=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var n=this.length;this.resize(n+1);var i=4*n;return this.uint8[i+0]=t,this.uint8[i+1]=e,n},e}(i);y.prototype.bytesPerElement=4,o("StructArrayLayout2ub4",y);var g=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,i,r,o,a,s,u,l,c,p,h,f){var d=this.length;this.resize(d+1);var m=20*d,y=10*d,g=40*d;return this.int16[m+0]=t,this.int16[m+1]=e,this.uint16[m+2]=n,this.uint16[m+3]=i,this.uint32[y+2]=r,this.uint32[y+3]=o,this.uint32[y+4]=a,this.uint16[m+10]=s,this.uint16[m+11]=u,this.uint16[m+12]=l,this.float32[y+7]=c,this.float32[y+8]=p,this.uint8[g+36]=h,this.uint8[g+37]=f,d},e}(i);g.prototype.bytesPerElement=40,o("StructArrayLayout2i2ui3ul3ui2f2ub40",g);var v=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.float32[1*e+0]=t,e},e}(i);v.prototype.bytesPerElement=4,o("StructArrayLayout1f4",v);var _=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var i=this.length;this.resize(i+1);var r=3*i;return this.int16[r+0]=t,this.int16[r+1]=e,this.int16[r+2]=n,i},e}(i);_.prototype.bytesPerElement=6,o("StructArrayLayout3i6",_);var b=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var i=this.length;this.resize(i+1);var r=4*i;return this.uint32[2*i+0]=t,this.uint16[r+2]=e,this.uint16[r+3]=n,i},e}(i);b.prototype.bytesPerElement=8,o("StructArrayLayout1ul2ui8",b);var x=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var i=this.length;this.resize(i+1);var r=3*i;return this.uint16[r+0]=t,this.uint16[r+1]=e,this.uint16[r+2]=n,i},e}(i);x.prototype.bytesPerElement=6,o("StructArrayLayout3ui6",x);var w=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var n=this.length;this.resize(n+1);var i=2*n;return this.uint16[i+0]=t,this.uint16[i+1]=e,n},e}(i);w.prototype.bytesPerElement=4,o("StructArrayLayout2ui4",w);var E=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var n=this.length;this.resize(n+1);var i=2*n;return this.float32[i+0]=t,this.float32[i+1]=e,n},e}(i);E.prototype.bytesPerElement=8,o("StructArrayLayout2f8",E);var C=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,i){var r=this.length;this.resize(r+1);var o=4*r;return this.float32[o+0]=t,this.float32[o+1]=e,this.float32[o+2]=n,this.float32[o+3]=i,r},e}(i);C.prototype.bytesPerElement=16,o("StructArrayLayout4f16",C);var O=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={anchorPointX:{},anchorPointY:{},x1:{},y1:{},x2:{},y2:{},featureIndex:{},sourceLayerIndex:{},bucketIndex:{},radius:{},signedDistanceFromAnchor:{},anchorPoint:{}};return n.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorPointX.set=function(t){this._structArray.int16[this._pos2+0]=t},n.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},n.anchorPointY.set=function(t){this._structArray.int16[this._pos2+1]=t},n.x1.get=function(){return this._structArray.int16[this._pos2+2]},n.x1.set=function(t){this._structArray.int16[this._pos2+2]=t},n.y1.get=function(){return this._structArray.int16[this._pos2+3]},n.y1.set=function(t){this._structArray.int16[this._pos2+3]=t},n.x2.get=function(){return this._structArray.int16[this._pos2+4]},n.x2.set=function(t){this._structArray.int16[this._pos2+4]=t},n.y2.get=function(){return this._structArray.int16[this._pos2+5]},n.y2.set=function(t){this._structArray.int16[this._pos2+5]=t},n.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},n.featureIndex.set=function(t){this._structArray.uint32[this._pos4+3]=t},n.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},n.sourceLayerIndex.set=function(t){this._structArray.uint16[this._pos2+8]=t},n.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},n.bucketIndex.set=function(t){this._structArray.uint16[this._pos2+9]=t},n.radius.get=function(){return this._structArray.int16[this._pos2+10]},n.radius.set=function(t){this._structArray.int16[this._pos2+10]=t},n.signedDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+11]},n.signedDistanceFromAnchor.set=function(t){this._structArray.int16[this._pos2+11]=t},n.anchorPoint.get=function(){return new a(this.anchorPointX,this.anchorPointY)},Object.defineProperties(e.prototype,n),e}(r);O.prototype.size=24;var P=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new O(this,t)},e}(d);o("CollisionBoxArray",P);var S=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={anchorX:{},anchorY:{},glyphStartIndex:{},numGlyphs:{},vertexStartIndex:{},lineStartIndex:{},lineLength:{},segment:{},lowerSize:{},upperSize:{},lineOffsetX:{},lineOffsetY:{},writingMode:{},hidden:{}};return n.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorX.set=function(t){this._structArray.int16[this._pos2+0]=t},n.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},n.anchorY.set=function(t){this._structArray.int16[this._pos2+1]=t},n.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},n.glyphStartIndex.set=function(t){this._structArray.uint16[this._pos2+2]=t},n.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},n.numGlyphs.set=function(t){this._structArray.uint16[this._pos2+3]=t},n.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},n.vertexStartIndex.set=function(t){this._structArray.uint32[this._pos4+2]=t},n.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},n.lineStartIndex.set=function(t){this._structArray.uint32[this._pos4+3]=t},n.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},n.lineLength.set=function(t){this._structArray.uint32[this._pos4+4]=t},n.segment.get=function(){return this._structArray.uint16[this._pos2+10]},n.segment.set=function(t){this._structArray.uint16[this._pos2+10]=t},n.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},n.lowerSize.set=function(t){this._structArray.uint16[this._pos2+11]=t},n.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},n.upperSize.set=function(t){this._structArray.uint16[this._pos2+12]=t},n.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},n.lineOffsetX.set=function(t){this._structArray.float32[this._pos4+7]=t},n.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},n.lineOffsetY.set=function(t){this._structArray.float32[this._pos4+8]=t},n.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},n.writingMode.set=function(t){this._structArray.uint8[this._pos1+36]=t},n.hidden.get=function(){return this._structArray.uint8[this._pos1+37]},n.hidden.set=function(t){this._structArray.uint8[this._pos1+37]=t},Object.defineProperties(e.prototype,n),e}(r);S.prototype.size=40;var T=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new S(this,t)},e}(g);o("PlacedSymbolArray",T);var k=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={offsetX:{}};return n.offsetX.get=function(){return this._structArray.float32[this._pos4+0]},n.offsetX.set=function(t){this._structArray.float32[this._pos4+0]=t},Object.defineProperties(e.prototype,n),e}(r);k.prototype.size=4;var A=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getoffsetX=function(t){return this.float32[1*t+0]},e.prototype.get=function(t){return new k(this,t)},e}(v);o("GlyphOffsetArray",A);var I=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={x:{},y:{},tileUnitDistanceFromAnchor:{}};return n.x.get=function(){return this._structArray.int16[this._pos2+0]},n.x.set=function(t){this._structArray.int16[this._pos2+0]=t},n.y.get=function(){return this._structArray.int16[this._pos2+1]},n.y.set=function(t){this._structArray.int16[this._pos2+1]=t},n.tileUnitDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+2]},n.tileUnitDistanceFromAnchor.set=function(t){this._structArray.int16[this._pos2+2]=t},Object.defineProperties(e.prototype,n),e}(r);I.prototype.size=6;var L=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getx=function(t){return this.int16[3*t+0]},e.prototype.gety=function(t){return this.int16[3*t+1]},e.prototype.gettileUnitDistanceFromAnchor=function(t){return this.int16[3*t+2]},e.prototype.get=function(t){return new I(this,t)},e}(_);o("SymbolLineVertexArray",L);var M=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={featureIndex:{},sourceLayerIndex:{},bucketIndex:{}};return n.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},n.featureIndex.set=function(t){this._structArray.uint32[this._pos4+0]=t},n.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},n.sourceLayerIndex.set=function(t){this._structArray.uint16[this._pos2+2]=t},n.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},n.bucketIndex.set=function(t){this._structArray.uint16[this._pos2+3]=t},Object.defineProperties(e.prototype,n),e}(r);M.prototype.size=8;var z=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new M(this,t)},e}(b);o("FeatureIndexArray",z),e.exports={StructArrayLayout2i4:s,StructArrayLayout4i8:u,StructArrayLayout2i4i12:l,StructArrayLayout4i4ub12:c,StructArrayLayout4i4ui16:p,StructArrayLayout3f12:h,StructArrayLayout1ul4:f,StructArrayLayout6i1ul2ui2i24:d,StructArrayLayout2i2i2i12:m,StructArrayLayout2ub4:y,StructArrayLayout2i2ui3ul3ui2f2ub40:g,StructArrayLayout1f4:v,StructArrayLayout3i6:_,StructArrayLayout1ul2ui8:b,StructArrayLayout3ui6:x,StructArrayLayout2ui4:w,StructArrayLayout2f8:E,StructArrayLayout4f16:C,PosArray:s,RasterBoundsArray:u,CircleLayoutArray:s,FillLayoutArray:s,FillExtrusionLayoutArray:l,HeatmapLayoutArray:s,LineLayoutArray:c,SymbolLayoutArray:p,SymbolDynamicLayoutArray:h,SymbolOpacityArray:f,CollisionBoxLayoutArray:m,CollisionCircleLayoutArray:m,CollisionVertexArray:y,TriangleIndexArray:x,LineIndexArray:w,CollisionBoxArray:P,PlacedSymbolArray:T,GlyphOffsetArray:A,SymbolLineVertexArray:L,FeatureIndexArray:z}},{"../util/struct_array":271,"../util/web_worker_transfer":278,"@mapbox/point-geometry":4}],40:[function(t,e,n){"use strict";e.exports={deserialize:function(t,e){var n={};if(!e)return n;for(var i=0,r=t;i<r.length;i+=1){var o=r[i],a=o.layerIds.map(function(t){return e.getLayer(t)}).filter(Boolean);if(0!==a.length){o.layers=a;for(var s=0,u=a;s<u.length;s+=1)n[u[s].id]=o}}return n}}},{}],41:[function(t,e,n){"use strict";var i=t("../../util/struct_array");e.exports=(0,i.createLayout)([{name:"a_pos",components:2,type:"Int16"}],4)},{"../../util/struct_array":271}],42:[function(t,e,n){"use strict";function i(t,e,n,i,r){t.emplaceBack(2*e+(i+1)/2,2*n+(r+1)/2)}var r=t("../array_types").CircleLayoutArray,o=t("./circle_attributes").members,a=t("../segment").SegmentVector,s=t("../program_configuration").ProgramConfigurationSet,u=t("../index_array_type").TriangleIndexArray,l=t("../load_geometry"),c=t("../extent"),p=t("../../util/web_worker_transfer").register,h=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.layoutVertexArray=new r,this.indexArray=new u,this.segments=new a,this.programConfigurations=new s(o,t.layers,t.zoom)};h.prototype.populate=function(t,e){for(var n=this,i=0,r=t;i<r.length;i+=1){var o=r[i],a=o.feature,s=o.index,u=o.sourceLayerIndex;if(n.layers[0]._featureFilter({zoom:n.zoom},a)){var c=l(a);n.addFeature(a,c),e.featureIndex.insert(a,c,s,u,n.index)}}},h.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},h.prototype.upload=function(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,o),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.programConfigurations.upload(t)},h.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},h.prototype.addFeature=function(t,e){for(var n=this,r=0,o=e;r<o.length;r+=1)for(var a=0,s=o[r];a<s.length;a+=1){var u=s[a],l=u.x,p=u.y;if(!(l<0||l>=c||p<0||p>=c)){var h=n.segments.prepareSegment(4,n.layoutVertexArray,n.indexArray),f=h.vertexLength;i(n.layoutVertexArray,l,p,-1,-1),i(n.layoutVertexArray,l,p,1,-1),i(n.layoutVertexArray,l,p,1,1),i(n.layoutVertexArray,l,p,-1,1),n.indexArray.emplaceBack(f,f+1,f+2),n.indexArray.emplaceBack(f,f+3,f+2),h.vertexLength+=4,h.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t)},p("CircleBucket",h,{omit:["layers"]}),e.exports=h},{"../../util/web_worker_transfer":278,"../array_types":39,"../extent":53,"../index_array_type":55,"../load_geometry":56,"../program_configuration":58,"../segment":60,"./circle_attributes":41}],43:[function(t,e,n){arguments[4][41][0].apply(n,arguments)},{"../../util/struct_array":271,dup:41}],44:[function(t,e,n){"use strict";var i=t("../array_types").FillLayoutArray,r=t("./fill_attributes").members,o=t("../segment").SegmentVector,a=t("../program_configuration").ProgramConfigurationSet,s=t("../index_array_type"),u=s.LineIndexArray,l=s.TriangleIndexArray,c=t("../load_geometry"),p=t("earcut"),h=t("../../util/classify_rings"),f=t("../../util/web_worker_transfer").register,d=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.layoutVertexArray=new i,this.indexArray=new l,this.indexArray2=new u,this.programConfigurations=new a(r,t.layers,t.zoom),this.segments=new o,this.segments2=new o};d.prototype.populate=function(t,e){for(var n=this,i=0,r=t;i<r.length;i+=1){var o=r[i],a=o.feature,s=o.index,u=o.sourceLayerIndex;if(n.layers[0]._featureFilter({zoom:n.zoom},a)){var l=c(a);n.addFeature(a,l),e.featureIndex.insert(a,l,s,u,n.index)}}},d.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},d.prototype.upload=function(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,r),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2),this.programConfigurations.upload(t)},d.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},d.prototype.addFeature=function(t,e){for(var n=this,i=0,r=h(e,500);i<r.length;i+=1){for(var o=r[i],a=0,s=0,u=o;s<u.length;s+=1)a+=u[s].length;for(var l=n.segments.prepareSegment(a,n.layoutVertexArray,n.indexArray),c=l.vertexLength,f=[],d=[],m=0,y=o;m<y.length;m+=1){var g=y[m];if(0!==g.length){g!==o[0]&&d.push(f.length/2);var v=n.segments2.prepareSegment(g.length,n.layoutVertexArray,n.indexArray2),_=v.vertexLength;n.layoutVertexArray.emplaceBack(g[0].x,g[0].y),n.indexArray2.emplaceBack(_+g.length-1,_),f.push(g[0].x),f.push(g[0].y);for(var b=1;b<g.length;b++)n.layoutVertexArray.emplaceBack(g[b].x,g[b].y),n.indexArray2.emplaceBack(_+b-1,_+b),f.push(g[b].x),f.push(g[b].y);v.vertexLength+=g.length,v.primitiveLength+=g.length}}for(var x=p(f,d),w=0;w<x.length;w+=3)n.indexArray.emplaceBack(c+x[w],c+x[w+1],c+x[w+2]);l.vertexLength+=a,l.primitiveLength+=x.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t)},f("FillBucket",d,{omit:["layers"]}),e.exports=d},{"../../util/classify_rings":255,"../../util/web_worker_transfer":278,"../array_types":39,"../index_array_type":55,"../load_geometry":56,"../program_configuration":58,"../segment":60,"./fill_attributes":43,earcut:14}],45:[function(t,e,n){"use strict";var i=t("../../util/struct_array");e.exports=(0,i.createLayout)([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4)},{"../../util/struct_array":271}],46:[function(t,e,n){"use strict";function i(t,e,n,i,r,o,a,s){t.emplaceBack(e,n,2*Math.floor(i*v)+a,r*v*2,o*v*2,Math.round(s))}function r(t,e){return t.x===e.x&&(t.x<0||t.x>d)||t.y===e.y&&(t.y<0||t.y>d)}function o(t){return t.every(function(t){return t.x<0})||t.every(function(t){return t.x>d})||t.every(function(t){return t.y<0})||t.every(function(t){return t.y>d})}var a=t("../array_types").FillExtrusionLayoutArray,s=t("./fill_extrusion_attributes").members,u=t("../segment"),l=u.SegmentVector,c=u.MAX_VERTEX_ARRAY_LENGTH,p=t("../program_configuration").ProgramConfigurationSet,h=t("../index_array_type").TriangleIndexArray,f=t("../load_geometry"),d=t("../extent"),m=t("earcut"),y=t("../../util/classify_rings"),g=t("../../util/web_worker_transfer").register,v=Math.pow(2,13),_=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.layoutVertexArray=new a,this.indexArray=new h,this.programConfigurations=new p(s,t.layers,t.zoom),this.segments=new l};_.prototype.populate=function(t,e){for(var n=this,i=0,r=t;i<r.length;i+=1){var o=r[i],a=o.feature,s=o.index,u=o.sourceLayerIndex;if(n.layers[0]._featureFilter({zoom:n.zoom},a)){var l=f(a);n.addFeature(a,l),e.featureIndex.insert(a,l,s,u,n.index)}}},_.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},_.prototype.upload=function(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,s),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.programConfigurations.upload(t)},_.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},_.prototype.addFeature=function(t,e){for(var n=this,a=0,s=y(e,500);a<s.length;a+=1){for(var u=s[a],l=0,p=0,h=u;p<h.length;p+=1)l+=h[p].length;for(var f=n.segments.prepareSegment(4,n.layoutVertexArray,n.indexArray),d=0,g=u;d<g.length;d+=1){var v=g[d];if(0!==v.length&&!o(v))for(var _=0,b=0;b<v.length;b++){var x=v[b];if(b>=1){var w=v[b-1];if(!r(x,w)){f.vertexLength+4>c&&(f=n.segments.prepareSegment(4,n.layoutVertexArray,n.indexArray));var E=x.sub(w)._perp()._unit(),C=w.dist(x);_+C>32768&&(_=0),i(n.layoutVertexArray,x.x,x.y,E.x,E.y,0,0,_),i(n.layoutVertexArray,x.x,x.y,E.x,E.y,0,1,_),i(n.layoutVertexArray,w.x,w.y,E.x,E.y,0,0,_+=C),i(n.layoutVertexArray,w.x,w.y,E.x,E.y,0,1,_);var O=f.vertexLength;n.indexArray.emplaceBack(O,O+1,O+2),n.indexArray.emplaceBack(O+1,O+2,O+3),f.vertexLength+=4,f.primitiveLength+=2}}}}f.vertexLength+l>c&&(f=n.segments.prepareSegment(l,n.layoutVertexArray,n.indexArray));for(var P=[],S=[],T=f.vertexLength,k=0,A=u;k<A.length;k+=1){var I=A[k];if(0!==I.length){I!==u[0]&&S.push(P.length/2);for(var L=0;L<I.length;L++){var M=I[L];i(n.layoutVertexArray,M.x,M.y,0,0,1,1,0),P.push(M.x),P.push(M.y)}}}for(var z=m(P,S),D=0;D<z.length;D+=3)n.indexArray.emplaceBack(T+z[D],T+z[D+1],T+z[D+2]);f.primitiveLength+=z.length/3,f.vertexLength+=l}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t)},g("FillExtrusionBucket",_,{omit:["layers"]}),e.exports=_},{"../../util/classify_rings":255,"../../util/web_worker_transfer":278,"../array_types":39,"../extent":53,"../index_array_type":55,"../load_geometry":56,"../program_configuration":58,"../segment":60,"./fill_extrusion_attributes":45,earcut:14}],47:[function(t,e,n){"use strict";var i=t("./circle_bucket"),r=t("../../util/web_worker_transfer").register,o=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(i);r("HeatmapBucket",o,{omit:["layers"]}),e.exports=o},{"../../util/web_worker_transfer":278,"./circle_bucket":42}],48:[function(t,e,n){"use strict";var i=t("../../util/struct_array");e.exports=(0,i.createLayout)([{name:"a_pos_normal",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4)},{"../../util/struct_array":271}],49:[function(t,e,n){"use strict";function i(t,e,n,i,r,o,a){t.emplaceBack(e.x,e.y,i?1:0,r?1:-1,Math.round(f*n.x)+128,Math.round(f*n.y)+128,1+(0===o?0:o<0?-1:1)|(a*m&63)<<2,a*m>>6)}var r=t("../array_types").LineLayoutArray,o=t("./line_attributes").members,a=t("../segment").SegmentVector,s=t("../program_configuration").ProgramConfigurationSet,u=t("../index_array_type").TriangleIndexArray,l=t("../load_geometry"),c=t("../extent"),p=t("@mapbox/vector-tile").VectorTileFeature.types,h=t("../../util/web_worker_transfer").register,f=63,d=Math.cos(Math.PI/180*37.5),m=.5,y=Math.pow(2,14)/m,g=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.layoutVertexArray=new r,this.indexArray=new u,this.programConfigurations=new s(o,t.layers,t.zoom),this.segments=new a};g.prototype.populate=function(t,e){for(var n=this,i=0,r=t;i<r.length;i+=1){var o=r[i],a=o.feature,s=o.index,u=o.sourceLayerIndex;if(n.layers[0]._featureFilter({zoom:n.zoom},a)){var c=l(a);n.addFeature(a,c),e.featureIndex.insert(a,c,s,u,n.index)}}},g.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},g.prototype.upload=function(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,o),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.programConfigurations.upload(t)},g.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},g.prototype.addFeature=function(t,e){for(var n=this.layers[0].layout,i=n.get("line-join").evaluate(t),r=n.get("line-cap"),o=n.get("line-miter-limit"),a=n.get("line-round-limit"),s=0,u=e;s<u.length;s+=1)this.addLine(u[s],t,i,r,o,a)},g.prototype.addLine=function(t,e,n,i,r,o){for(var a=this,s="Polygon"===p[e.type],u=t.length;u>=2&&t[u-1].equals(t[u-2]);)u--;for(var l=0;l<u-1&&t[l].equals(t[l+1]);)l++;if(!(u<(s?3:2))){"bevel"===n&&(r=1.05);var h=c/(512*this.overscaling)*15,f=t[l],m=this.segments.prepareSegment(10*u,this.layoutVertexArray,this.indexArray);this.distance=0;var y,g,v,_=i,b=s?"butt":i,x=!0,w=void 0,E=void 0,C=void 0,O=void 0;this.e1=this.e2=this.e3=-1,s&&(O=f.sub(y=t[u-2])._unit()._perp());for(var P=l;P<u;P++)if(!(E=s&&P===u-1?t[l+1]:t[P+1])||!t[P].equals(E)){O&&(C=O),y&&(w=y),y=t[P],O=E?E.sub(y)._unit()._perp():C;var S=(C=C||O).add(O);0===S.x&&0===S.y||S._unit();var T=S.x*O.x+S.y*O.y,k=0!==T?1/T:1/0,A=T<d&&w&&E;if(A&&P>l){var I=y.dist(w);if(I>2*h){var L=y.sub(y.sub(w)._mult(h/I)._round());a.distance+=L.dist(w),a.addCurrentVertex(L,a.distance,C.mult(1),0,0,!1,m),w=L}}var M=w&&E,z=M?n:E?_:b;if(M&&"round"===z&&(k<o?z="miter":k<=2&&(z="fakeround")),"miter"===z&&k>r&&(z="bevel"),"bevel"===z&&(k>2&&(z="flipbevel"),k<r&&(z="miter")),w&&(a.distance+=y.dist(w)),"miter"===z)S._mult(k),a.addCurrentVertex(y,a.distance,S,0,0,!1,m);else if("flipbevel"===z){if(k>100)S=O.clone().mult(-1);else{var D=C.x*O.y-C.y*O.x>0?-1:1,R=k*C.add(O).mag()/C.sub(O).mag();S._perp()._mult(R*D)}a.addCurrentVertex(y,a.distance,S,0,0,!1,m),a.addCurrentVertex(y,a.distance,S.mult(-1),0,0,!1,m)}else if("bevel"===z||"fakeround"===z){var j=C.x*O.y-C.y*O.x>0,N=-Math.sqrt(k*k-1);if(j?(v=0,g=N):(g=0,v=N),x||a.addCurrentVertex(y,a.distance,C,g,v,!1,m),"fakeround"===z){for(var B=Math.floor(8*(.5-(T-.5))),F=void 0,V=0;V<B;V++)F=O.mult((V+1)/(B+1))._add(C)._unit(),a.addPieSliceVertex(y,a.distance,F,j,m);a.addPieSliceVertex(y,a.distance,S,j,m);for(var Z=B-1;Z>=0;Z--)F=C.mult((Z+1)/(B+1))._add(O)._unit(),a.addPieSliceVertex(y,a.distance,F,j,m)}E&&a.addCurrentVertex(y,a.distance,O,-g,-v,!1,m)}else"butt"===z?(x||a.addCurrentVertex(y,a.distance,C,0,0,!1,m),E&&a.addCurrentVertex(y,a.distance,O,0,0,!1,m)):"square"===z?(x||(a.addCurrentVertex(y,a.distance,C,1,1,!1,m),a.e1=a.e2=-1),E&&a.addCurrentVertex(y,a.distance,O,-1,-1,!1,m)):"round"===z&&(x||(a.addCurrentVertex(y,a.distance,C,0,0,!1,m),a.addCurrentVertex(y,a.distance,C,1,1,!0,m),a.e1=a.e2=-1),E&&(a.addCurrentVertex(y,a.distance,O,-1,-1,!0,m),a.addCurrentVertex(y,a.distance,O,0,0,!1,m)));if(A&&P<u-1){var U=y.dist(E);if(U>2*h){var q=y.add(E.sub(y)._mult(h/U)._round());a.distance+=q.dist(y),a.addCurrentVertex(q,a.distance,O.mult(1),0,0,!1,m),y=q}}x=!1}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e)}},g.prototype.addCurrentVertex=function(t,e,n,r,o,a,s){var u,l=this.layoutVertexArray,c=this.indexArray;u=n.clone(),r&&u._sub(n.perp()._mult(r)),i(l,t,u,a,!1,r,e),this.e3=s.vertexLength++,this.e1>=0&&this.e2>=0&&(c.emplaceBack(this.e1,this.e2,this.e3),s.primitiveLength++),this.e1=this.e2,this.e2=this.e3,u=n.mult(-1),o&&u._sub(n.perp()._mult(o)),i(l,t,u,a,!0,-o,e),this.e3=s.vertexLength++,this.e1>=0&&this.e2>=0&&(c.emplaceBack(this.e1,this.e2,this.e3),s.primitiveLength++),this.e1=this.e2,this.e2=this.e3,e>y/2&&(this.distance=0,this.addCurrentVertex(t,this.distance,n,r,o,a,s))},g.prototype.addPieSliceVertex=function(t,e,n,r,o){n=n.mult(r?-1:1);var a=this.indexArray;i(this.layoutVertexArray,t,n,!1,r,0,e),this.e3=o.vertexLength++,this.e1>=0&&this.e2>=0&&(a.emplaceBack(this.e1,this.e2,this.e3),o.primitiveLength++),r?this.e2=this.e3:this.e1=this.e3},h("LineBucket",g,{omit:["layers"]}),e.exports=g},{"../../util/web_worker_transfer":278,"../array_types":39,"../extent":53,"../index_array_type":55,"../load_geometry":56,"../program_configuration":58,"../segment":60,"./line_attributes":48,"@mapbox/vector-tile":8}],50:[function(t,e,n){"use strict";var i=t("../../util/struct_array").createLayout,r={symbolLayoutAttributes:i([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"}]),dynamicLayoutAttributes:i([{name:"a_projected_pos",components:3,type:"Float32"}],4),placementOpacityAttributes:i([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),collisionVertexAttributes:i([{name:"a_placed",components:2,type:"Uint8"}],4),collisionBox:i([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"},{type:"Int16",name:"radius"},{type:"Int16",name:"signedDistanceFromAnchor"}]),collisionBoxLayout:i([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),collisionCircleLayout:i([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),placement:i([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"hidden"}]),glyphOffset:i([{type:"Float32",name:"offsetX"}]),lineVertex:i([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}])};e.exports=r},{"../../util/struct_array":271}],51:[function(t,e,n){"use strict";function i(t,e,n,i,r,o,a,s){t.emplaceBack(e,n,Math.round(64*i),Math.round(64*r),o,a,s?s[0]:0,s?s[1]:0)}function r(t,e,n){t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n)}var o=t("./symbol_attributes"),a=o.symbolLayoutAttributes,s=o.collisionVertexAttributes,u=o.collisionBoxLayout,l=o.collisionCircleLayout,c=o.dynamicLayoutAttributes,p=t("../array_types"),h=p.SymbolLayoutArray,f=p.SymbolDynamicLayoutArray,d=p.SymbolOpacityArray,m=p.CollisionBoxLayoutArray,y=p.CollisionCircleLayoutArray,g=p.CollisionVertexArray,v=p.PlacedSymbolArray,_=p.GlyphOffsetArray,b=p.SymbolLineVertexArray,x=t("@mapbox/point-geometry"),w=t("../segment").SegmentVector,E=t("../program_configuration").ProgramConfigurationSet,C=t("../index_array_type"),O=C.TriangleIndexArray,P=C.LineIndexArray,S=t("../../symbol/transform_text"),T=t("../../symbol/mergelines"),k=t("../../util/script_detection"),A=t("../load_geometry"),I=t("@mapbox/vector-tile").VectorTileFeature.types,L=t("../../util/verticalize_punctuation"),M=(t("../../symbol/anchor"),t("../../symbol/symbol_size").getSizeData),z=t("../../util/web_worker_transfer").register,D=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}],R=function(t){this.layoutVertexArray=new h,this.indexArray=new O,this.programConfigurations=t,this.segments=new w,this.dynamicLayoutVertexArray=new f,this.opacityVertexArray=new d,this.placedSymbolArray=new v};R.prototype.upload=function(t,e){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,a.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,e),this.programConfigurations.upload(t),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,c.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,D,!0),this.opacityVertexBuffer.itemSize=1},R.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},z("SymbolBuffers",R);var j=function(t,e,n){this.layoutVertexArray=new t,this.layoutAttributes=e,this.indexArray=new n,this.segments=new w,this.collisionVertexArray=new g};j.prototype.upload=function(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,s.members,!0)},j.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},z("CollisionBuffers",j);var N=function(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.pixelRatio=t.pixelRatio;var e=this.layers[0]._unevaluatedLayout._values;this.textSizeData=M(this.zoom,e["text-size"]),this.iconSizeData=M(this.zoom,e["icon-size"]);var n=this.layers[0].layout;this.sortFeaturesByY=n.get("text-allow-overlap")||n.get("icon-allow-overlap")||n.get("text-ignore-placement")||n.get("icon-ignore-placement")};N.prototype.createArrays=function(){this.text=new R(new E(a.members,this.layers,this.zoom,function(t){return/^text/.test(t)})),this.icon=new R(new E(a.members,this.layers,this.zoom,function(t){return/^icon/.test(t)})),this.collisionBox=new j(m,u.members,P),this.collisionCircle=new j(y,l.members,O),this.glyphOffsetArray=new _,this.lineVertexArray=new b},N.prototype.populate=function(t,e){var n=this.layers[0],i=n.layout,r=i.get("text-font"),o=i.get("text-field"),a=i.get("icon-image"),s=("constant"!==o.value.kind||o.value.value.length>0)&&("constant"!==r.value.kind||r.value.value.length>0),u="constant"!==a.value.kind||a.value.value&&a.value.value.length>0;if(this.features=[],s||u){for(var l=e.iconDependencies,c=e.glyphDependencies,p={zoom:this.zoom},h=0,f=t;h<f.length;h+=1){var d=f[h],m=d.feature,y=d.index,g=d.sourceLayerIndex;if(n._featureFilter(p,m)){var v=void 0;s&&(v=n.getValueAndResolveTokens("text-field",m),v=S(v,n,m));var _=void 0;if(u&&(_=n.getValueAndResolveTokens("icon-image",m)),v||_){var b={text:v,icon:_,index:y,sourceLayerIndex:g,geometry:A(m),properties:m.properties,type:I[m.type]};if(void 0!==m.id&&(b.id=m.id),this.features.push(b),_&&(l[_]=!0),v)for(var x=r.evaluate(m).join(","),w=c[x]=c[x]||{},E="map"===i.get("text-rotation-alignment")&&"line"===i.get("symbol-placement"),C=k.allowsVerticalWritingMode(v),O=0;O<v.length;O++)if(w[v.charCodeAt(O)]=!0,E&&C){var P=L.lookup[v.charAt(O)];P&&(w[P.charCodeAt(0)]=!0)}}}}"line"===i.get("symbol-placement")&&(this.features=T(this.features))}},N.prototype.isEmpty=function(){return 0===this.symbolInstances.length},N.prototype.upload=function(t){this.text.upload(t,this.sortFeaturesByY),this.icon.upload(t,this.sortFeaturesByY),this.collisionBox.upload(t),this.collisionCircle.upload(t)},N.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.collisionBox.destroy(),this.collisionCircle.destroy()},N.prototype.addToLineVertexArray=function(t,e){var n=this.lineVertexArray.length;if(void 0!==t.segment){for(var i=t.dist(e[t.segment+1]),r=t.dist(e[t.segment]),o={},a=t.segment+1;a<e.length;a++)o[a]={x:e[a].x,y:e[a].y,tileUnitDistanceFromAnchor:i},a<e.length-1&&(i+=e[a+1].dist(e[a]));for(var s=t.segment||0;s>=0;s--)o[s]={x:e[s].x,y:e[s].y,tileUnitDistanceFromAnchor:r},s>0&&(r+=e[s-1].dist(e[s]));for(var u=0;u<e.length;u++){var l=o[u];this.lineVertexArray.emplaceBack(l.x,l.y,l.tileUnitDistanceFromAnchor)}}return{lineStartIndex:n,lineLength:this.lineVertexArray.length-n}},N.prototype.addSymbols=function(t,e,n,o,a,s,u,l,c,p){for(var h=t.indexArray,f=t.layoutVertexArray,d=t.dynamicLayoutVertexArray,m=t.segments.prepareSegment(4*e.length,t.layoutVertexArray,t.indexArray),y=this.glyphOffsetArray.length,g=m.vertexLength,v=0,_=e;v<_.length;v+=1){var b=_[v],x=b.tl,w=b.tr,E=b.bl,C=b.br,O=b.tex,P=m.vertexLength,S=b.glyphOffset[1];i(f,l.x,l.y,x.x,S+x.y,O.x,O.y,n),i(f,l.x,l.y,w.x,S+w.y,O.x+O.w,O.y,n),i(f,l.x,l.y,E.x,S+E.y,O.x,O.y+O.h,n),i(f,l.x,l.y,C.x,S+C.y,O.x+O.w,O.y+O.h,n),r(d,l,0),h.emplaceBack(P,P+1,P+2),h.emplaceBack(P+1,P+2,P+3),m.vertexLength+=4,m.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(b.glyphOffset[0])}t.placedSymbolArray.emplaceBack(l.x,l.y,y,this.glyphOffsetArray.length-y,g,c,p,l.segment,n?n[0]:0,n?n[1]:0,o[0],o[1],u,!1),t.programConfigurations.populatePaintArrays(t.layoutVertexArray.length,s)},N.prototype._addCollisionDebugVertex=function(t,e,n,i,r){return e.emplaceBack(0,0),t.emplaceBack(n.x,n.y,i.x,i.y,Math.round(r.x),Math.round(r.y))},N.prototype.addCollisionDebugVertices=function(t,e,n,i,r,o,a,s){var u=r.segments.prepareSegment(4,r.layoutVertexArray,r.indexArray),l=u.vertexLength,c=r.layoutVertexArray,p=r.collisionVertexArray;if(this._addCollisionDebugVertex(c,p,o,a.anchor,new x(t,e)),this._addCollisionDebugVertex(c,p,o,a.anchor,new x(n,e)),this._addCollisionDebugVertex(c,p,o,a.anchor,new x(n,i)),this._addCollisionDebugVertex(c,p,o,a.anchor,new x(t,i)),u.vertexLength+=4,s){var h=r.indexArray;h.emplaceBack(l,l+1,l+2),h.emplaceBack(l,l+2,l+3),u.primitiveLength+=2}else{var f=r.indexArray;f.emplaceBack(l,l+1),f.emplaceBack(l+1,l+2),f.emplaceBack(l+2,l+3),f.emplaceBack(l+3,l),u.primitiveLength+=4}},N.prototype.generateCollisionDebugBuffers=function(){for(var t=this,e=0,n=t.symbolInstances;e<n.length;e+=1){var i=n[e];i.textCollisionFeature={boxStartIndex:i.textBoxStartIndex,boxEndIndex:i.textBoxEndIndex},i.iconCollisionFeature={boxStartIndex:i.iconBoxStartIndex,boxEndIndex:i.iconBoxEndIndex};for(var r=0;r<2;r++){var o=i[0===r?"textCollisionFeature":"iconCollisionFeature"];if(o)for(var a=o.boxStartIndex;a<o.boxEndIndex;a++){var s=t.collisionBoxArray.get(a),u=s.radius>0;t.addCollisionDebugVertices(s.x1,s.y1,s.x2,s.y2,u?t.collisionCircle:t.collisionBox,s.anchorPoint,i,u)}}}},N.prototype.deserializeCollisionBoxes=function(t,e,n,i,r){for(var o={},a=e;a<n;a++){var s=t.get(a);if(0===s.radius){o.textBox={x1:s.x1,y1:s.y1,x2:s.x2,y2:s.y2,anchorPointX:s.anchorPointX,anchorPointY:s.anchorPointY};break}o.textCircles||(o.textCircles=[]),o.textCircles.push(s.anchorPointX,s.anchorPointY,s.radius,s.signedDistanceFromAnchor,1)}for(var u=i;u<r;u++){var l=t.get(u);if(0===l.radius){o.iconBox={x1:l.x1,y1:l.y1,x2:l.x2,y2:l.y2,anchorPointX:l.anchorPointX,anchorPointY:l.anchorPointY};break}}return o},N.prototype.hasTextData=function(){return this.text.segments.get().length>0},N.prototype.hasIconData=function(){return this.icon.segments.get().length>0},N.prototype.hasCollisionBoxData=function(){return this.collisionBox.segments.get().length>0},N.prototype.hasCollisionCircleData=function(){return this.collisionCircle.segments.get().length>0},N.prototype.sortFeatures=function(t){var e=this;if(this.sortFeaturesByY&&this.sortedAngle!==t&&(this.sortedAngle=t,!(this.text.segments.get().length>1||this.icon.segments.get().length>1))){for(var n=[],i=0;i<this.symbolInstances.length;i++)n.push(i);var r=Math.sin(t),o=Math.cos(t);n.sort(function(t,n){var i=e.symbolInstances[t],a=e.symbolInstances[n];return(r*i.anchor.x+o*i.anchor.y|0)-(r*a.anchor.x+o*a.anchor.y|0)||a.featureIndex-i.featureIndex}),this.text.indexArray.clear(),this.icon.indexArray.clear();for(var a=0,s=n;a<s.length;a+=1){for(var u=s[a],l=0,c=e.symbolInstances[u].placedTextSymbolIndices;l<c.length;l+=1)for(var p=e.text.placedSymbolArray.get(c[l]),h=p.vertexStartIndex+4*p.numGlyphs,f=p.vertexStartIndex;f<h;f+=4)e.text.indexArray.emplaceBack(f,f+1,f+2),e.text.indexArray.emplaceBack(f+1,f+2,f+3);var d=e.icon.placedSymbolArray.get(u);if(d.numGlyphs){var m=d.vertexStartIndex;e.icon.indexArray.emplaceBack(m,m+1,m+2),e.icon.indexArray.emplaceBack(m+1,m+2,m+3)}}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},z("SymbolBucket",N,{omit:["layers","collisionBoxArray","features","compareText"],shallow:["symbolInstances"]}),N.MAX_GLYPHS=65535,N.addDynamicAttributes=r,e.exports=N},{"../../symbol/anchor":213,"../../symbol/mergelines":221,"../../symbol/symbol_size":228,"../../symbol/transform_text":229,"../../util/script_detection":269,"../../util/verticalize_punctuation":277,"../../util/web_worker_transfer":278,"../array_types":39,"../index_array_type":55,"../load_geometry":56,"../program_configuration":58,"../segment":60,"./symbol_attributes":50,"@mapbox/point-geometry":4,"@mapbox/vector-tile":8}],52:[function(t,e,n){"use strict";var i=t("../util/image").RGBAImage,r=t("../util/util"),o=t("../util/web_worker_transfer").register,a=function(t,e,n){if(t<=0)throw new RangeError("Level must have positive dimension");this.dim=t,this.border=e,this.stride=this.dim+2*this.border,this.data=n||new Int32Array((this.dim+2*this.border)*(this.dim+2*this.border))};a.prototype.set=function(t,e,n){this.data[this._idx(t,e)]=n+65536},a.prototype.get=function(t,e){return this.data[this._idx(t,e)]-65536},a.prototype._idx=function(t,e){if(t<-this.border||t>=this.dim+this.border||e<-this.border||e>=this.dim+this.border)throw new RangeError("out of range source coordinates for DEM data");return(e+this.border)*this.stride+(t+this.border)},o("Level",a);var s=function(t,e,n){this.uid=t,this.scale=e||1,this.level=n||new a(256,512),this.loaded=!!n};s.prototype.loadFromImage=function(t){if(t.height!==t.width)throw new RangeError("DEM tiles must be square");for(var e=this.level=new a(t.width,t.width/2),n=t.data,i=0;i<e.dim;i++)for(var r=0;r<e.dim;r++){var o=4*(i*e.dim+r);e.set(r,i,this.scale*((256*n[o]*256+256*n[o+1]+n[o+2])/10-1e4))}for(var s=0;s<e.dim;s++)e.set(-1,s,e.get(0,s)),e.set(e.dim,s,e.get(e.dim-1,s)),e.set(s,-1,e.get(s,0)),e.set(s,e.dim,e.get(s,e.dim-1));e.set(-1,-1,e.get(0,0)),e.set(e.dim,-1,e.get(e.dim-1,0)),e.set(-1,e.dim,e.get(0,e.dim-1)),e.set(e.dim,e.dim,e.get(e.dim-1,e.dim-1)),this.loaded=!0},s.prototype.getPixels=function(){return new i({width:this.level.dim+2*this.level.border,height:this.level.dim+2*this.level.border},new Uint8Array(this.level.data.buffer))},s.prototype.backfillBorder=function(t,e,n){var i=this.level,o=t.level;if(i.dim!==o.dim)throw new Error("level mismatch (dem dimension)");var a=e*i.dim,s=e*i.dim+i.dim,u=n*i.dim,l=n*i.dim+i.dim;switch(e){case-1:a=s-1;break;case 1:s=a+1}switch(n){case-1:u=l-1;break;case 1:l=u+1}for(var c=r.clamp(a,-i.border,i.dim+i.border),p=r.clamp(s,-i.border,i.dim+i.border),h=r.clamp(u,-i.border,i.dim+i.border),f=r.clamp(l,-i.border,i.dim+i.border),d=-e*i.dim,m=-n*i.dim,y=h;y<f;y++)for(var g=c;g<p;g++)i.set(g,y,o.get(g+d,y+m))},o("DEMData",s),e.exports={DEMData:s,Level:a}},{"../util/image":263,"../util/util":275,"../util/web_worker_transfer":278}],53:[function(t,e,n){"use strict";e.exports=8192},{}],54:[function(t,e,n){"use strict";function i(t,e){return e-t}t("@mapbox/point-geometry");var r=t("./load_geometry"),o=t("./extent"),a=t("../style-spec/feature_filter"),s=t("grid-index"),u=t("../util/dictionary_coder"),l=t("@mapbox/vector-tile"),c=t("pbf"),p=t("../util/vectortile_to_geojson"),h=t("../util/util").arraysIntersect,f=(t("../source/tile_id"),t("../util/web_worker_transfer").register),d=t("./array_types").FeatureIndexArray,m=function(t,e,n,i){this.tileID=t,this.overscaling=e,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=n||new s(o,16,0),this.featureIndexArray=i||new d};m.prototype.insert=function(t,e,n,i,r){var o=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,i,r);for(var a=0;a<e.length;a++){for(var s=e[a],u=[1/0,1/0,-1/0,-1/0],l=0;l<s.length;l++){var c=s[l];u[0]=Math.min(u[0],c.x),u[1]=Math.min(u[1],c.y),u[2]=Math.max(u[2],c.x),u[3]=Math.max(u[3],c.y)}this.grid.insert(o,u[0],u[1],u[2],u[3])}},m.prototype.query=function(t,e){this.vtLayers||(this.vtLayers=new l.VectorTile(new c(this.rawTileData)).layers,this.sourceLayerCoder=new u(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]));for(var n={},r=t.params||{},s=o/t.tileSize/t.scale,p=a(r.filter),h=t.queryGeometry,f=t.additionalRadius*s,d=1/0,m=1/0,y=-1/0,g=-1/0,v=0;v<h.length;v++)for(var _=h[v],b=0;b<_.length;b++){var x=_[b];d=Math.min(d,x.x),m=Math.min(m,x.y),y=Math.max(y,x.x),g=Math.max(g,x.y)}var w=this.grid.query(d-f,m-f,y+f,g+f);w.sort(i),this.filterMatching(n,w,this.featureIndexArray,h,p,r.layers,e,t.bearing,s);var E=t.collisionIndex?t.collisionIndex.queryRenderedSymbols(h,this.tileID,o/t.tileSize,t.collisionBoxArray,t.sourceID,t.bucketInstanceIds):[];return E.sort(),this.filterMatching(n,E,t.collisionBoxArray,h,p,r.layers,e,t.bearing,s),n},m.prototype.filterMatching=function(t,e,n,i,o,a,s,u,l){for(var c,f=this,d=0;d<e.length;d++){var m=e[d];if(m!==c){c=m;var y=n.get(m),g=f.bucketLayerIDs[y.bucketIndex];if(!a||h(a,g)){var v=f.sourceLayerCoder.decode(y.sourceLayerIndex),_=f.vtLayers[v].feature(y.featureIndex);if(o({zoom:f.tileID.overscaledZ},_))for(var b=null,x=0;x<g.length;x++){var w=g[x];if(!(a&&a.indexOf(w)<0)){var E=s[w];if(E&&("symbol"===E.type||(b||(b=r(_)),E.queryIntersectsFeature(i,_,b,f.z,u,l)))){var C=new p(_,f.z,f.x,f.y);C.layer=E.serialize();var O=t[w];void 0===O&&(O=t[w]=[]),O.push({featureIndex:m,feature:C})}}}}}}},m.prototype.hasLayer=function(t){for(var e=0,n=this.bucketLayerIDs;e<n.length;e+=1)for(var i=0,r=n[e];i<r.length;i+=1)if(t===r[i])return!0;return!1},f("FeatureIndex",m,{omit:["rawTileData","sourceLayerCoder"]}),e.exports=m},{"../source/tile_id":114,"../style-spec/feature_filter":148,"../util/dictionary_coder":257,"../util/util":275,"../util/vectortile_to_geojson":276,"../util/web_worker_transfer":278,"./array_types":39,"./extent":53,"./load_geometry":56,"@mapbox/point-geometry":4,"@mapbox/vector-tile":8,"grid-index":24,pbf:30}],55:[function(t,e,n){"use strict";e.exports={LineIndexArray:t("./array_types").LineIndexArray,TriangleIndexArray:t("./array_types").TriangleIndexArray}},{"./array_types":39}],56:[function(t,e,n){"use strict";var i=t("../util/util"),r=t("./extent"),o={min:-1*Math.pow(2,15),max:Math.pow(2,15)-1};e.exports=function(t){for(var e=r/t.extent,n=t.loadGeometry(),a=0;a<n.length;a++)for(var s=n[a],u=0;u<s.length;u++){var l=s[u];l.x=Math.round(l.x*e),l.y=Math.round(l.y*e),(l.x<o.min||l.x>o.max||l.y<o.min||l.y>o.max)&&i.warnOnce("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return n}},{"../util/util":275,"./extent":53}],57:[function(t,e,n){"use strict";var i=t("../util/struct_array");e.exports=(0,i.createLayout)([{name:"a_pos",type:"Int16",components:2}])},{"../util/struct_array":271}],58:[function(t,e,n){"use strict";function i(t){return[o(255*t.r,255*t.g),o(255*t.b,255*t.a)]}function r(t,e){return{"text-opacity":"opacity","icon-opacity":"opacity","text-color":"fill_color","icon-color":"fill_color","text-halo-color":"halo_color","icon-halo-color":"halo_color","text-halo-blur":"halo_blur","icon-halo-blur":"halo_blur","text-halo-width":"halo_width","icon-halo-width":"halo_width","line-gap-width":"gapwidth"}[t]||t.replace(e+"-","").replace(/-/g,"_")}var o=t("../shaders/encode_attribute").packUint8ToFloat,a=(t("../style-spec/util/color"),t("../util/web_worker_transfer").register),s=t("../style/properties").PossiblyEvaluatedPropertyValue,u=t("./array_types"),l=u.StructArrayLayout1f4,c=u.StructArrayLayout2f8,p=u.StructArrayLayout4f16,h=function(t,e,n){this.value=t,this.name=e,this.type=n,this.statistics={max:-1/0}};h.prototype.defines=function(){return["#define HAS_UNIFORM_u_"+this.name]},h.prototype.populatePaintArray=function(){},h.prototype.upload=function(){},h.prototype.destroy=function(){},h.prototype.setUniforms=function(t,e,n,i){var r=i.constantOr(this.value),o=t.gl;"color"===this.type?o.uniform4f(e.uniforms["u_"+this.name],r.r,r.g,r.b,r.a):o.uniform1f(e.uniforms["u_"+this.name],r)};var f=function(t,e,n){this.expression=t,this.name=e,this.type=n,this.statistics={max:-1/0};var i="color"===n?c:l;this.paintVertexAttributes=[{name:"a_"+e,type:"Float32",components:"color"===n?2:1,offset:0}],this.paintVertexArray=new i};f.prototype.defines=function(){return[]},f.prototype.populatePaintArray=function(t,e){var n=this.paintVertexArray,r=n.length;n.reserve(t);var o=this.expression.evaluate({zoom:0},e);if("color"===this.type)for(var a=i(o),s=r;s<t;s++)n.emplaceBack(a[0],a[1]);else{for(var u=r;u<t;u++)n.emplaceBack(o);this.statistics.max=Math.max(this.statistics.max,o)}},f.prototype.upload=function(t){this.paintVertexArray&&(this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes))},f.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},f.prototype.setUniforms=function(t,e){t.gl.uniform1f(e.uniforms["a_"+this.name+"_t"],0)};var d=function(t,e,n,i,r){this.expression=t,this.name=e,this.type=n,this.useIntegerZoom=i,this.zoom=r,this.statistics={max:-1/0};var o="color"===n?p:c;this.paintVertexAttributes=[{name:"a_"+e,type:"Float32",components:"color"===n?4:2,offset:0}],this.paintVertexArray=new o};d.prototype.defines=function(){return[]},d.prototype.populatePaintArray=function(t,e){var n=this.paintVertexArray,r=n.length;n.reserve(t);var o=this.expression.evaluate({zoom:this.zoom},e),a=this.expression.evaluate({zoom:this.zoom+1},e);if("color"===this.type)for(var s=i(o),u=i(a),l=r;l<t;l++)n.emplaceBack(s[0],s[1],u[0],u[1]);else{for(var c=r;c<t;c++)n.emplaceBack(o,a);this.statistics.max=Math.max(this.statistics.max,o,a)}},d.prototype.upload=function(t){this.paintVertexArray&&(this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes))},d.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},d.prototype.interpolationFactor=function(t){return this.expression.interpolationFactor(this.useIntegerZoom?Math.floor(t):t,this.zoom,this.zoom+1)},d.prototype.setUniforms=function(t,e,n){t.gl.uniform1f(e.uniforms["a_"+this.name+"_t"],this.interpolationFactor(n.zoom))};var m=function(){this.binders={},this.cacheKey="",this._buffers=[]};m.createDynamic=function(t,e,n){var i=new m,o=[];for(var a in t.paint._values)if(n(a)){var u=t.paint.get(a);if(u instanceof s&&u.property.specification["property-function"]){var l=r(a,t.type),c=u.property.specification.type,p=u.property.useIntegerZoom;"constant"===u.value.kind?(i.binders[a]=new h(u.value,l,c),o.push("/u_"+l)):"source"===u.value.kind?(i.binders[a]=new f(u.value,l,c),o.push("/a_"+l)):(i.binders[a]=new d(u.value,l,c,p,e),o.push("/z_"+l))}}return i.cacheKey=o.sort().join(""),i},m.prototype.populatePaintArrays=function(t,e){for(var n in this.binders)this.binders[n].populatePaintArray(t,e)},m.prototype.defines=function(){var t=[];for(var e in this.binders)t.push.apply(t,this.binders[e].defines());return t},m.prototype.setUniforms=function(t,e,n,i){for(var r in this.binders)this.binders[r].setUniforms(t,e,i,n.get(r))},m.prototype.getPaintVertexBuffers=function(){return this._buffers},m.prototype.upload=function(t){var e=this;for(var n in e.binders)e.binders[n].upload(t);var i=[];for(var r in e.binders){var o=e.binders[r];(o instanceof f||o instanceof d)&&o.paintVertexBuffer&&i.push(o.paintVertexBuffer)}this._buffers=i},m.prototype.destroy=function(){for(var t in this.binders)this.binders[t].destroy()};var y=function(t,e,n,i){void 0===i&&(i=function(){return!0}),this.programConfigurations={};for(var r=0,o=e;r<o.length;r+=1){var a=o[r];this.programConfigurations[a.id]=m.createDynamic(a,n,i),this.programConfigurations[a.id].layoutAttributes=t}};y.prototype.populatePaintArrays=function(t,e){for(var n in this.programConfigurations)this.programConfigurations[n].populatePaintArrays(t,e)},y.prototype.get=function(t){return this.programConfigurations[t]},y.prototype.upload=function(t){for(var e in this.programConfigurations)this.programConfigurations[e].upload(t)},y.prototype.destroy=function(){for(var t in this.programConfigurations)this.programConfigurations[t].destroy()},a("ConstantBinder",h),a("SourceExpressionBinder",f),a("CompositeExpressionBinder",d),a("ProgramConfiguration",m,{omit:["_buffers"]}),a("ProgramConfigurationSet",y),e.exports={ProgramConfiguration:m,ProgramConfigurationSet:y}},{"../shaders/encode_attribute":96,"../style-spec/util/color":153,"../style/properties":188,"../util/web_worker_transfer":278,"./array_types":39}],59:[function(t,e,n){"use strict";var i=t("../util/struct_array");e.exports=(0,i.createLayout)([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}])},{"../util/struct_array":271}],60:[function(t,e,n){"use strict";var i=t("../util/util").warnOnce,r=t("../util/web_worker_transfer").register,o=Math.pow(2,16)-1,a=function(t){void 0===t&&(t=[]),this.segments=t};a.prototype.prepareSegment=function(t,n,r){var a=this.segments[this.segments.length-1];return t>o&&i("Max vertices per segment is "+o+": bucket requested "+t),(!a||a.vertexLength+t>e.exports.MAX_VERTEX_ARRAY_LENGTH)&&this.segments.push(a={vertexOffset:n.length,primitiveOffset:r.length,vertexLength:0,primitiveLength:0}),a},a.prototype.get=function(){return this.segments},a.prototype.destroy=function(){for(var t=0,e=this.segments;t<e.length;t+=1){var n=e[t];for(var i in n.vaos)n.vaos[i].destroy()}},r("SegmentVector",a),e.exports={SegmentVector:a,MAX_VERTEX_ARRAY_LENGTH:o}},{"../util/util":275,"../util/web_worker_transfer":278}],61:[function(t,e,n){"use strict";var i=function(t,e,n){this.column=t,this.row=e,this.zoom=n};i.prototype.clone=function(){return new i(this.column,this.row,this.zoom)},i.prototype.zoomTo=function(t){return this.clone()._zoomTo(t)},i.prototype.sub=function(t){return this.clone()._sub(t)},i.prototype._zoomTo=function(t){var e=Math.pow(2,t-this.zoom);return this.column*=e,this.row*=e,this.zoom=t,this},i.prototype._sub=function(t){return t=t.zoomTo(this.zoom),this.column-=t.column,this.row-=t.row,this},e.exports=i},{}],62:[function(t,e,n){"use strict";var i=t("../util/util").wrap,r=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid LngLat object: ("+t+", "+e+")");if(this.lng=+t,this.lat=+e,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};r.prototype.wrap=function(){return new r(i(this.lng,-180,180),this.lat)},r.prototype.toArray=function(){return[this.lng,this.lat]},r.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},r.prototype.toBounds=function(e){var n=360*e/40075017,i=n/Math.cos(Math.PI/180*this.lat);return new(t("./lng_lat_bounds"))(new r(this.lng-i,this.lat-n),new r(this.lng+i,this.lat+n))},r.convert=function(t){if(t instanceof r)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new r(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new r(Number(t.lng),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")},e.exports=r},{"../util/util":275,"./lng_lat_bounds":63}],63:[function(t,e,n){"use strict";var i=t("./lng_lat"),r=function(t,e){t&&(e?this.setSouthWest(t).setNorthEast(e):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))};r.prototype.setNorthEast=function(t){return this._ne=t instanceof i?new i(t.lng,t.lat):i.convert(t),this},r.prototype.setSouthWest=function(t){return this._sw=t instanceof i?new i(t.lng,t.lat):i.convert(t),this},r.prototype.extend=function(t){var e,n,o=this._sw,a=this._ne;if(t instanceof i)e=t,n=t;else{if(!(t instanceof r))return Array.isArray(t)?t.every(Array.isArray)?this.extend(r.convert(t)):this.extend(i.convert(t)):this;if(n=t._ne,!(e=t._sw)||!n)return this}return o||a?(o.lng=Math.min(e.lng,o.lng),o.lat=Math.min(e.lat,o.lat),a.lng=Math.max(n.lng,a.lng),a.lat=Math.max(n.lat,a.lat)):(this._sw=new i(e.lng,e.lat),this._ne=new i(n.lng,n.lat)),this},r.prototype.getCenter=function(){return new i((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},r.prototype.getSouthWest=function(){return this._sw},r.prototype.getNorthEast=function(){return this._ne},r.prototype.getNorthWest=function(){return new i(this.getWest(),this.getNorth())},r.prototype.getSouthEast=function(){return new i(this.getEast(),this.getSouth())},r.prototype.getWest=function(){return this._sw.lng},r.prototype.getSouth=function(){return this._sw.lat},r.prototype.getEast=function(){return this._ne.lng},r.prototype.getNorth=function(){return this._ne.lat},r.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},r.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},r.prototype.isEmpty=function(){return!(this._sw&&this._ne)},r.convert=function(t){return!t||t instanceof r?t:new r(t)},e.exports=r},{"./lng_lat":62}],64:[function(t,e,n){"use strict";var i=t("./lng_lat"),r=t("@mapbox/point-geometry"),o=t("./coordinate"),a=t("../util/util"),s=t("../style-spec/util/interpolate").number,u=t("../util/tile_cover"),l=t("../source/tile_id").UnwrappedTileID,c=t("../data/extent"),p=t("@mapbox/gl-matrix"),h=p.vec4,f=p.mat4,d=p.mat2,m=function(t,e,n){this.tileSize=512,this._renderWorldCopies=void 0===n||n,this._minZoom=t||0,this._maxZoom=e||22,this.latRange=[-85.05113,85.05113],this.width=0,this.height=0,this._center=new i(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._posMatrixCache={},this._alignedPosMatrixCache={}},y={minZoom:{},maxZoom:{},renderWorldCopies:{},worldSize:{},centerPoint:{},size:{},bearing:{},pitch:{},fov:{},zoom:{},center:{},unmodified:{},x:{},y:{},point:{}};m.prototype.clone=function(){var t=new m(this._minZoom,this._maxZoom,this._renderWorldCopies);return t.tileSize=this.tileSize,t.latRange=this.latRange,t.width=this.width,t.height=this.height,t._center=this._center,t.zoom=this.zoom,t.angle=this.angle,t._fov=this._fov,t._pitch=this._pitch,t._unmodified=this._unmodified,t._calcMatrices(),t},y.minZoom.get=function(){return this._minZoom},y.minZoom.set=function(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))},y.maxZoom.get=function(){return this._maxZoom},y.maxZoom.set=function(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))},y.renderWorldCopies.get=function(){return this._renderWorldCopies},y.worldSize.get=function(){return this.tileSize*this.scale},y.centerPoint.get=function(){return this.size._div(2)},y.size.get=function(){return new r(this.width,this.height)},y.bearing.get=function(){return-this.angle/Math.PI*180},y.bearing.set=function(t){var e=-a.wrap(t,-180,180)*Math.PI/180;this.angle!==e&&(this._unmodified=!1,this.angle=e,this._calcMatrices(),this.rotationMatrix=d.create(),d.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},y.pitch.get=function(){return this._pitch/Math.PI*180},y.pitch.set=function(t){var e=a.clamp(t,0,60)/180*Math.PI;this._pitch!==e&&(this._unmodified=!1,this._pitch=e,this._calcMatrices())},y.fov.get=function(){return this._fov/Math.PI*180},y.fov.set=function(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())},y.zoom.get=function(){return this._zoom},y.zoom.set=function(t){var e=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==e&&(this._unmodified=!1,this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom,this._constrain(),this._calcMatrices())},y.center.get=function(){return this._center},y.center.set=function(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._constrain(),this._calcMatrices())},m.prototype.coveringZoomLevel=function(t){return(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize))},m.prototype.getVisibleUnwrappedCoordinates=function(t){var e=this.pointCoordinate(new r(0,0),0),n=this.pointCoordinate(new r(this.width,0),0),i=Math.floor(e.column),o=Math.floor(n.column),a=[new l(0,t)];if(this._renderWorldCopies)for(var s=i;s<=o;s++)0!==s&&a.push(new l(s,t));return a},m.prototype.coveringTiles=function(t){var e=this.coveringZoomLevel(t),n=e;if(void 0!==t.minzoom&&e<t.minzoom)return[];void 0!==t.maxzoom&&e>t.maxzoom&&(e=t.maxzoom);var i=this.pointCoordinate(this.centerPoint,e),o=new r(i.column-.5,i.row-.5),a=[this.pointCoordinate(new r(0,0),e),this.pointCoordinate(new r(this.width,0),e),this.pointCoordinate(new r(this.width,this.height),e),this.pointCoordinate(new r(0,this.height),e)];return u(e,a,t.reparseOverscaled?n:e,this._renderWorldCopies).sort(function(t,e){return o.dist(t.canonical)-o.dist(e.canonical)})},m.prototype.resize=function(t,e){this.width=t,this.height=e,this.pixelsToGLUnits=[2/t,-2/e],this._constrain(),this._calcMatrices()},y.unmodified.get=function(){return this._unmodified},m.prototype.zoomScale=function(t){return Math.pow(2,t)},m.prototype.scaleZoom=function(t){return Math.log(t)/Math.LN2},m.prototype.project=function(t){return new r(this.lngX(t.lng),this.latY(t.lat))},m.prototype.unproject=function(t){return new i(this.xLng(t.x),this.yLat(t.y))},y.x.get=function(){return this.lngX(this.center.lng)},y.y.get=function(){return this.latY(this.center.lat)},y.point.get=function(){return new r(this.x,this.y)},m.prototype.lngX=function(t){return(180+t)*this.worldSize/360},m.prototype.latY=function(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))*this.worldSize/360},m.prototype.xLng=function(t){return 360*t/this.worldSize-180},m.prototype.yLat=function(t){return 360/Math.PI*Math.atan(Math.exp((180-360*t/this.worldSize)*Math.PI/180))-90},m.prototype.setLocationAtPoint=function(t,e){var n=this.pointCoordinate(e)._sub(this.pointCoordinate(this.centerPoint));this.center=this.coordinateLocation(this.locationCoordinate(t)._sub(n)),this._renderWorldCopies&&(this.center=this.center.wrap())},m.prototype.locationPoint=function(t){return this.coordinatePoint(this.locationCoordinate(t))},m.prototype.pointLocation=function(t){return this.coordinateLocation(this.pointCoordinate(t))},m.prototype.locationCoordinate=function(t){return new o(this.lngX(t.lng)/this.tileSize,this.latY(t.lat)/this.tileSize,this.zoom).zoomTo(this.tileZoom)},m.prototype.coordinateLocation=function(t){var e=t.zoomTo(this.zoom);return new i(this.xLng(e.column*this.tileSize),this.yLat(e.row*this.tileSize))},m.prototype.pointCoordinate=function(t,e){void 0===e&&(e=this.tileZoom);var n=[t.x,t.y,0,1],i=[t.x,t.y,1,1];h.transformMat4(n,n,this.pixelMatrixInverse),h.transformMat4(i,i,this.pixelMatrixInverse);var r=n[3],a=i[3],u=n[1]/r,l=i[1]/a,c=n[2]/r,p=i[2]/a,f=c===p?0:(0-c)/(p-c);return new o(s(n[0]/r,i[0]/a,f)/this.tileSize,s(u,l,f)/this.tileSize,this.zoom)._zoomTo(e)},m.prototype.coordinatePoint=function(t){var e=t.zoomTo(this.zoom),n=[e.column*this.tileSize,e.row*this.tileSize,0,1];return h.transformMat4(n,n,this.pixelMatrix),new r(n[0]/n[3],n[1]/n[3])},m.prototype.calculatePosMatrix=function(t,e){void 0===e&&(e=!1);var n=t.key,i=e?this._alignedPosMatrixCache:this._posMatrixCache;if(i[n])return i[n];var r=t.canonical,o=this.worldSize/this.zoomScale(r.z),a=r.x+Math.pow(2,r.z)*t.wrap,s=f.identity(new Float64Array(16));return f.translate(s,s,[a*o,r.y*o,0]),f.scale(s,s,[o/c,o/c,1]),f.multiply(s,e?this.alignedProjMatrix:this.projMatrix,s),i[n]=new Float32Array(s),i[n]},m.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var t,e,n,i,o=-90,a=90,s=-180,u=180,l=this.size,c=this._unmodified;if(this.latRange){var p=this.latRange;o=this.latY(p[1]),t=(a=this.latY(p[0]))-o<l.y?l.y/(a-o):0}if(this.lngRange){var h=this.lngRange;s=this.lngX(h[0]),e=(u=this.lngX(h[1]))-s<l.x?l.x/(u-s):0}var f=Math.max(e||0,t||0);if(f)return this.center=this.unproject(new r(e?(u+s)/2:this.x,t?(a+o)/2:this.y)),this.zoom+=this.scaleZoom(f),this._unmodified=c,void(this._constraining=!1);if(this.latRange){var d=this.y,m=l.y/2;d-m<o&&(i=o+m),d+m>a&&(i=a-m)}if(this.lngRange){var y=this.x,g=l.x/2;y-g<s&&(n=s+g),y+g>u&&(n=u-g)}void 0===n&&void 0===i||(this.center=this.unproject(new r(void 0!==n?n:this.x,void 0!==i?i:this.y))),this._unmodified=c,this._constraining=!1}},m.prototype._calcMatrices=function(){if(this.height){this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var t=this._fov/2,e=Math.PI/2+this._pitch,n=Math.sin(t)*this.cameraToCenterDistance/Math.sin(Math.PI-e-t),i=this.x,r=this.y,o=1.01*(Math.cos(Math.PI/2-this._pitch)*n+this.cameraToCenterDistance),a=new Float64Array(16);f.perspective(a,this._fov,this.width/this.height,1,o),f.scale(a,a,[1,-1,1]),f.translate(a,a,[0,0,-this.cameraToCenterDistance]),f.rotateX(a,a,this._pitch),f.rotateZ(a,a,this.angle),f.translate(a,a,[-i,-r,0]);var s=this.worldSize/(2*Math.PI*6378137*Math.abs(Math.cos(this.center.lat*(Math.PI/180))));f.scale(a,a,[1,1,s,1]),this.projMatrix=a;var u=this.width%2/2,l=this.height%2/2,c=Math.cos(this.angle),p=Math.sin(this.angle),h=i-Math.round(i)+c*u+p*l,d=r-Math.round(r)+c*l+p*u,m=new Float64Array(a);if(f.translate(m,m,[h>.5?h-1:h,d>.5?d-1:d,0]),this.alignedProjMatrix=m,a=f.create(),f.scale(a,a,[this.width/2,-this.height/2,1]),f.translate(a,a,[1,-1,0]),this.pixelMatrix=f.multiply(new Float64Array(16),a,this.projMatrix),!(a=f.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=a,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Object.defineProperties(m.prototype,y),e.exports=m},{"../data/extent":53,"../source/tile_id":114,"../style-spec/util/interpolate":158,"../util/tile_cover":273,"../util/util":275,"./coordinate":61,"./lng_lat":62,"@mapbox/gl-matrix":2,"@mapbox/point-geometry":4}],65:[function(t,e,n){"use strict";var i=t("../style-spec/util/color"),r=function(t,e,n){this.blendFunction=t,this.blendColor=e,this.mask=n};r.disabled=new r(r.Replace=[1,0],i.transparent,[!1,!1,!1,!1]),r.unblended=new r(r.Replace,i.transparent,[!0,!0,!0,!0]),r.alphaBlended=new r([1,771],i.transparent,[!0,!0,!0,!0]),e.exports=r},{"../style-spec/util/color":153}],66:[function(t,e,n){"use strict";var i=t("./index_buffer"),r=t("./vertex_buffer"),o=t("./framebuffer"),a=(t("./depth_mode"),t("./stencil_mode"),t("./color_mode")),s=t("../util/util"),u=t("./value"),l=u.ClearColor,c=u.ClearDepth,p=u.ClearStencil,h=u.ColorMask,f=u.DepthMask,d=u.StencilMask,m=u.StencilFunc,y=u.StencilOp,g=u.StencilTest,v=u.DepthRange,_=u.DepthTest,b=u.DepthFunc,x=u.Blend,w=u.BlendFunc,E=u.BlendColor,C=u.Program,O=u.LineWidth,P=u.ActiveTextureUnit,S=u.Viewport,T=u.BindFramebuffer,k=u.BindRenderbuffer,A=u.BindTexture,I=u.BindVertexBuffer,L=u.BindElementBuffer,M=u.BindVertexArrayOES,z=u.PixelStoreUnpack,D=u.PixelStoreUnpackPremultiplyAlpha,R=function(t){this.gl=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.lineWidthRange=t.getParameter(t.ALIASED_LINE_WIDTH_RANGE),this.clearColor=new l(this),this.clearDepth=new c(this),this.clearStencil=new p(this),this.colorMask=new h(this),this.depthMask=new f(this),this.stencilMask=new d(this),this.stencilFunc=new m(this),this.stencilOp=new y(this),this.stencilTest=new g(this),this.depthRange=new v(this),this.depthTest=new _(this),this.depthFunc=new b(this),this.blend=new x(this),this.blendFunc=new w(this),this.blendColor=new E(this),this.program=new C(this),this.lineWidth=new O(this),this.activeTexture=new P(this),this.viewport=new S(this),this.bindFramebuffer=new T(this),this.bindRenderbuffer=new k(this),this.bindTexture=new A(this),this.bindVertexBuffer=new I(this),this.bindElementBuffer=new L(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new M(this),this.pixelStoreUnpack=new z(this),this.pixelStoreUnpackPremultiplyAlpha=new D(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=t.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&t.getExtension("OES_texture_half_float_linear")};R.prototype.createIndexBuffer=function(t,e){return new i(this,t,e)},R.prototype.createVertexBuffer=function(t,e,n){return new r(this,t,e,n)},R.prototype.createRenderbuffer=function(t,e,n){var i=this.gl,r=i.createRenderbuffer();return this.bindRenderbuffer.set(r),i.renderbufferStorage(i.RENDERBUFFER,t,e,n),this.bindRenderbuffer.set(null),r},R.prototype.createFramebuffer=function(t,e){return new o(this,t,e)},R.prototype.clear=function(t){var e=t.color,n=t.depth,i=this.gl,r=0;e&&(r|=i.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),void 0!==n&&(r|=i.DEPTH_BUFFER_BIT,this.clearDepth.set(n),this.depthMask.set(!0)),i.clear(r)},R.prototype.setDepthMode=function(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)},R.prototype.setStencilMode=function(t){t.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)},R.prototype.setColorMode=function(t){s.deepEqual(t.blendFunction,a.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(t.blendFunction),this.blendColor.set(t.blendColor)),this.colorMask.set(t.mask)},e.exports=R},{"../util/util":275,"./color_mode":65,"./depth_mode":67,"./framebuffer":68,"./index_buffer":69,"./stencil_mode":70,"./value":71,"./vertex_buffer":72}],67:[function(t,e,n){"use strict";var i=function(t,e,n){this.func=t,this.mask=e,this.range=n};i.ReadOnly=!1,i.ReadWrite=!0,i.disabled=new i(519,i.ReadOnly,[0,1]),e.exports=i},{}],68:[function(t,e,n){"use strict";var i=t("./value"),r=i.ColorAttachment,o=i.DepthAttachment,a=function(t,e,n){this.context=t,this.width=e,this.height=n;var i=this.framebuffer=t.gl.createFramebuffer();this.colorAttachment=new r(t,i),this.depthAttachment=new o(t,i)};a.prototype.destroy=function(){var t=this.context.gl,e=this.colorAttachment.get();e&&t.deleteTexture(e);var n=this.depthAttachment.get();n&&t.deleteRenderbuffer(n),t.deleteFramebuffer(this.framebuffer)},e.exports=a},{"./value":71}],69:[function(t,e,n){"use strict";var i=function(t,e,n){this.context=t;var i=t.gl;this.buffer=i.createBuffer(),this.dynamicDraw=Boolean(n),this.unbindVAO(),t.bindElementBuffer.set(this.buffer),i.bufferData(i.ELEMENT_ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};i.prototype.unbindVAO=function(){this.context.extVertexArrayObject&&this.context.bindVertexArrayOES.set(null)},i.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},i.prototype.updateData=function(t){var e=this.context.gl;this.unbindVAO(),this.bind(),e.bufferSubData(e.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)},i.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)},e.exports=i},{}],70:[function(t,e,n){"use strict";var i=function(t,e,n,i,r,o){this.test=t,this.ref=e,this.mask=n,this.fail=i,this.depthFail=r,this.pass=o};i.disabled=new i({func:519,mask:0},0,0,7680,7680,7680),e.exports=i},{}],71:[function(t,e,n){"use strict";var i=t("../style-spec/util/color"),r=t("../util/util"),o=function(t){this.context=t,this.current=i.transparent};o.prototype.get=function(){return this.current},o.prototype.set=function(t){var e=this.current;t.r===e.r&&t.g===e.g&&t.b===e.b&&t.a===e.a||(this.context.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t)};var a=function(t){this.context=t,this.current=1};a.prototype.get=function(){return this.current},a.prototype.set=function(t){this.current!==t&&(this.context.gl.clearDepth(t),this.current=t)};var s=function(t){this.context=t,this.current=0};s.prototype.get=function(){return this.current},s.prototype.set=function(t){this.current!==t&&(this.context.gl.clearStencil(t),this.current=t)};var u=function(t){this.context=t,this.current=[!0,!0,!0,!0]};u.prototype.get=function(){return this.current},u.prototype.set=function(t){var e=this.current;t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]||(this.context.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t)};var l=function(t){this.context=t,this.current=!0};l.prototype.get=function(){return this.current},l.prototype.set=function(t){this.current!==t&&(this.context.gl.depthMask(t),this.current=t)};var c=function(t){this.context=t,this.current=255};c.prototype.get=function(){return this.current},c.prototype.set=function(t){this.current!==t&&(this.context.gl.stencilMask(t),this.current=t)};var p=function(t){this.context=t,this.current={func:t.gl.ALWAYS,ref:0,mask:255}};p.prototype.get=function(){return this.current},p.prototype.set=function(t){var e=this.current;t.func===e.func&&t.ref===e.ref&&t.mask===e.mask||(this.context.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t)};var h=function(t){this.context=t;var e=this.context.gl;this.current=[e.KEEP,e.KEEP,e.KEEP]};h.prototype.get=function(){return this.current},h.prototype.set=function(t){var e=this.current;t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]||(this.context.gl.stencilOp(t[0],t[1],t[2]),this.current=t)};var f=function(t){this.context=t,this.current=!1};f.prototype.get=function(){return this.current},f.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;t?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),this.current=t}};var d=function(t){this.context=t,this.current=[0,1]};d.prototype.get=function(){return this.current},d.prototype.set=function(t){var e=this.current;t[0]===e[0]&&t[1]===e[1]||(this.context.gl.depthRange(t[0],t[1]),this.current=t)};var m=function(t){this.context=t,this.current=!1};m.prototype.get=function(){return this.current},m.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;t?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),this.current=t}};var y=function(t){this.context=t,this.current=t.gl.LESS};y.prototype.get=function(){return this.current},y.prototype.set=function(t){this.current!==t&&(this.context.gl.depthFunc(t),this.current=t)};var g=function(t){this.context=t,this.current=!1};g.prototype.get=function(){return this.current},g.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;t?e.enable(e.BLEND):e.disable(e.BLEND),this.current=t}};var v=function(t){this.context=t;var e=this.context.gl;this.current=[e.ONE,e.ZERO]};v.prototype.get=function(){return this.current},v.prototype.set=function(t){var e=this.current;t[0]===e[0]&&t[1]===e[1]||(this.context.gl.blendFunc(t[0],t[1]),this.current=t)};var _=function(t){this.context=t,this.current=i.transparent};_.prototype.get=function(){return this.current},_.prototype.set=function(t){var e=this.current;t.r===e.r&&t.g===e.g&&t.b===e.b&&t.a===e.a||(this.context.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t)};var b=function(t){this.context=t,this.current=null};b.prototype.get=function(){return this.current},b.prototype.set=function(t){this.current!==t&&(this.context.gl.useProgram(t),this.current=t)};var x=function(t){this.context=t,this.current=1};x.prototype.get=function(){return this.current},x.prototype.set=function(t){var e=this.context.lineWidthRange,n=r.clamp(t,e[0],e[1]);this.current!==n&&(this.context.gl.lineWidth(n),this.current=t)};var w=function(t){this.context=t,this.current=t.gl.TEXTURE0};w.prototype.get=function(){return this.current},w.prototype.set=function(t){this.current!==t&&(this.context.gl.activeTexture(t),this.current=t)};var E=function(t){this.context=t;var e=this.context.gl;this.current=[0,0,e.drawingBufferWidth,e.drawingBufferHeight]};E.prototype.get=function(){return this.current},E.prototype.set=function(t){var e=this.current;t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]||(this.context.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t)};var C=function(t){this.context=t,this.current=null};C.prototype.get=function(){return this.current},C.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;e.bindFramebuffer(e.FRAMEBUFFER,t),this.current=t}};var O=function(t){this.context=t,this.current=null};O.prototype.get=function(){return this.current},O.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;e.bindRenderbuffer(e.RENDERBUFFER,t),this.current=t}};var P=function(t){this.context=t,this.current=null};P.prototype.get=function(){return this.current},P.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;e.bindTexture(e.TEXTURE_2D,t),this.current=t}};var S=function(t){this.context=t,this.current=null};S.prototype.get=function(){return this.current},S.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;e.bindBuffer(e.ARRAY_BUFFER,t),this.current=t}};var T=function(t){this.context=t,this.current=null};T.prototype.get=function(){return this.current},T.prototype.set=function(t){var e=this.context.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),this.current=t};var k=function(t){this.context=t,this.current=null};k.prototype.get=function(){return this.current},k.prototype.set=function(t){this.current!==t&&this.context.extVertexArrayObject&&(this.context.extVertexArrayObject.bindVertexArrayOES(t),this.current=t)};var A=function(t){this.context=t,this.current=4};A.prototype.get=function(){return this.current},A.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;e.pixelStorei(e.UNPACK_ALIGNMENT,t),this.current=t}};var I=function(t){this.context=t,this.current=!1};I.prototype.get=function(){return this.current},I.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t}};var L=function(t,e){this.context=t,this.current=null,this.parent=e};L.prototype.get=function(){return this.current};var M=function(t){function e(e,n){t.call(this,e,n),this.dirty=!1}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){if(this.dirty||this.current!==t){var e=this.context.gl;this.context.bindFramebuffer.set(this.parent),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}},e.prototype.setDirty=function(){this.dirty=!0},e}(L),z=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;this.context.bindFramebuffer.set(this.parent),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t),this.current=t}},e}(L);e.exports={ClearColor:o,ClearDepth:a,ClearStencil:s,ColorMask:u,DepthMask:l,StencilMask:c,StencilFunc:p,StencilOp:h,StencilTest:f,DepthRange:d,DepthTest:m,DepthFunc:y,Blend:g,BlendFunc:v,BlendColor:_,Program:b,LineWidth:x,ActiveTextureUnit:w,Viewport:E,BindFramebuffer:C,BindRenderbuffer:O,BindTexture:P,BindVertexBuffer:S,BindElementBuffer:T,BindVertexArrayOES:k,PixelStoreUnpack:A,PixelStoreUnpackPremultiplyAlpha:I,ColorAttachment:M,DepthAttachment:z}},{"../style-spec/util/color":153,"../util/util":275}],72:[function(t,e,n){"use strict";var i={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},r=function(t,e,n,i){this.length=e.length,this.attributes=n,this.itemSize=e.bytesPerElement,this.dynamicDraw=i,this.context=t;var r=t.gl;this.buffer=r.createBuffer(),t.bindVertexBuffer.set(this.buffer),r.bufferData(r.ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};r.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},r.prototype.updateData=function(t){var e=this.context.gl;this.bind(),e.bufferSubData(e.ARRAY_BUFFER,0,t.arrayBuffer)},r.prototype.enableAttributes=function(t,e){for(var n=0;n<this.attributes.length;n++){var i=e.attributes[this.attributes[n].name];void 0!==i&&t.enableVertexAttribArray(i)}},r.prototype.setVertexAttribPointers=function(t,e,n){for(var r=this,o=0;o<this.attributes.length;o++){var a=r.attributes[o],s=e.attributes[a.name];void 0!==s&&t.vertexAttribPointer(s,a.components,t[i[a.type]],!1,r.itemSize,a.offset+r.itemSize*(n||0))}},r.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)},e.exports=r},{}],73:[function(t,e,n){"use strict";var i=t("@mapbox/mapbox-gl-supported"),r=t("./util/browser"),o=t("../package.json").version,a=t("./ui/map"),s=t("./ui/control/navigation_control"),u=t("./ui/control/geolocate_control"),l=t("./ui/control/attribution_control"),c=t("./ui/control/scale_control"),p=t("./ui/control/fullscreen_control"),h=t("./ui/popup"),f=t("./ui/marker"),d=t("./style/style"),m=t("./geo/lng_lat"),y=t("./geo/lng_lat_bounds"),g=t("@mapbox/point-geometry"),v=t("./util/evented"),_=t("./util/config"),b=t("./source/rtl_text_plugin");e.exports={version:o,supported:i,workerCount:Math.max(Math.floor(r.hardwareConcurrency/2),1),setRTLTextPlugin:b.setRTLTextPlugin,Map:a,NavigationControl:s,GeolocateControl:u,AttributionControl:l,ScaleControl:c,FullscreenControl:p,Popup:h,Marker:f,Style:d,LngLat:m,LngLatBounds:y,Point:g,Evented:v,config:_,get accessToken(){return _.ACCESS_TOKEN},set accessToken(t){_.ACCESS_TOKEN=t}}},{"../package.json":38,"./geo/lng_lat":62,"./geo/lng_lat_bounds":63,"./source/rtl_text_plugin":109,"./style/style":190,"./ui/control/attribution_control":232,"./ui/control/fullscreen_control":233,"./ui/control/geolocate_control":234,"./ui/control/navigation_control":236,"./ui/control/scale_control":237,"./ui/map":247,"./ui/marker":248,"./ui/popup":249,"./util/browser":252,"./util/config":256,"./util/evented":260,"@mapbox/mapbox-gl-supported":3,"@mapbox/point-geometry":4}],74:[function(t,e,n){"use strict";var i=t("./pattern"),r=t("../gl/stencil_mode"),o=t("../gl/depth_mode");e.exports=function(t,e,n){var a=n.paint.get("background-color"),s=n.paint.get("background-opacity");if(0!==s){var u=t.context,l=u.gl,c=t.transform,p=c.tileSize,h=n.paint.get("background-pattern"),f=h||1!==a.a||1!==s?"translucent":"opaque";if(t.renderPass===f){var d;if(u.setStencilMode(r.disabled),u.setDepthMode(t.depthModeForSublayer(0,"opaque"===f?o.ReadWrite:o.ReadOnly)),u.setColorMode(t.colorModeForRenderPass()),h){if(i.isPatternMissing(h,t))return;d=t.useProgram("backgroundPattern"),i.prepare(h,t,d),t.tileExtentPatternVAO.bind(u,d,t.tileExtentBuffer,[])}else d=t.useProgram("background"),l.uniform4fv(d.uniforms.u_color,[a.r,a.g,a.b,a.a]),t.tileExtentVAO.bind(u,d,t.tileExtentBuffer,[]);l.uniform1f(d.uniforms.u_opacity,s);for(var m=0,y=c.coveringTiles({tileSize:p});m<y.length;m+=1){var g=y[m];h&&i.setTile({tileID:g,tileSize:p},t,d),l.uniformMatrix4fv(d.uniforms.u_matrix,!1,t.transform.calculatePosMatrix(g.toUnwrapped())),l.drawArrays(l.TRIANGLE_STRIP,0,t.tileExtentBuffer.length)}}}}},{"../gl/depth_mode":67,"../gl/stencil_mode":70,"./pattern":91}],75:[function(t,e,n){"use strict";var i=t("../source/pixels_to_tile_units"),r=t("../gl/stencil_mode"),o=t("../gl/depth_mode");e.exports=function(t,e,n,a){if("translucent"===t.renderPass){var s=n.paint.get("circle-opacity"),u=n.paint.get("circle-stroke-width"),l=n.paint.get("circle-stroke-opacity");if(0!==s.constantOr(1)||0!==u.constantOr(1)&&0!==l.constantOr(1)){var c=t.context,p=c.gl;c.setDepthMode(t.depthModeForSublayer(0,o.ReadOnly)),c.setStencilMode(r.disabled),c.setColorMode(t.colorModeForRenderPass());for(var h=!0,f=0;f<a.length;f++){var d=a[f],m=e.getTile(d),y=m.getBucket(n);if(y){var g=t.context.program.get(),v=y.programConfigurations.get(n.id),_=t.useProgram("circle",v);if((h||_.program!==g)&&(v.setUniforms(c,_,n.paint,{zoom:t.transform.zoom}),h=!1),p.uniform1f(_.uniforms.u_camera_to_center_distance,t.transform.cameraToCenterDistance),p.uniform1i(_.uniforms.u_scale_with_map,"map"===n.paint.get("circle-pitch-scale")?1:0),"map"===n.paint.get("circle-pitch-alignment")){p.uniform1i(_.uniforms.u_pitch_with_map,1);var b=i(m,1,t.transform.zoom);p.uniform2f(_.uniforms.u_extrude_scale,b,b)}else p.uniform1i(_.uniforms.u_pitch_with_map,0),p.uniform2fv(_.uniforms.u_extrude_scale,t.transform.pixelsToGLUnits);p.uniformMatrix4fv(_.uniforms.u_matrix,!1,t.translatePosMatrix(d.posMatrix,m,n.paint.get("circle-translate"),n.paint.get("circle-translate-anchor"))),_.draw(c,p.TRIANGLES,n.id,y.layoutVertexBuffer,y.indexBuffer,y.segments,v)}}}}}},{"../gl/depth_mode":67,"../gl/stencil_mode":70,"../source/pixels_to_tile_units":104}],76:[function(t,e,n){"use strict";function i(t,e,n,i,s){var u=t.context,l=u.gl,c=t.useProgram(s?"collisionCircle":"collisionBox");u.setDepthMode(o.disabled),u.setStencilMode(a.disabled),u.setColorMode(t.colorModeForRenderPass());for(var p=0;p<i.length;p++){var h=i[p],f=e.getTile(h),d=f.getBucket(n);if(d){var m=s?d.collisionCircle:d.collisionBox;if(m){l.uniformMatrix4fv(c.uniforms.u_matrix,!1,h.posMatrix),s||u.lineWidth.set(1),l.uniform1f(c.uniforms.u_camera_to_center_distance,t.transform.cameraToCenterDistance);var y=r(f,1,t.transform.zoom),g=Math.pow(2,t.transform.zoom-f.tileID.overscaledZ);l.uniform1f(c.uniforms.u_pixels_to_tile_units,y),l.uniform2f(c.uniforms.u_extrude_scale,t.transform.pixelsToGLUnits[0]/(y*g),t.transform.pixelsToGLUnits[1]/(y*g)),c.draw(u,s?l.TRIANGLES:l.LINES,n.id,m.layoutVertexBuffer,m.indexBuffer,m.segments,null,m.collisionVertexBuffer,null)}}}}var r=t("../source/pixels_to_tile_units"),o=t("../gl/depth_mode"),a=t("../gl/stencil_mode");e.exports=function(t,e,n,r){i(t,e,n,r,!1),i(t,e,n,r,!0)}},{"../gl/depth_mode":67,"../gl/stencil_mode":70,"../source/pixels_to_tile_units":104}],77:[function(t,e,n){"use strict";function i(t,e,n){var i=t.context,f=i.gl;i.lineWidth.set(1*r.devicePixelRatio);var d=n.posMatrix,m=t.useProgram("debug");i.setDepthMode(c.disabled),i.setStencilMode(p.disabled),i.setColorMode(t.colorModeForRenderPass()),f.uniformMatrix4fv(m.uniforms.u_matrix,!1,d),f.uniform4f(m.uniforms.u_color,1,0,0,1),t.debugVAO.bind(i,m,t.debugBuffer,[]),f.drawArrays(f.LINE_STRIP,0,t.debugBuffer.length);for(var y=function(t,e,n,i){i=i||1;var r,o,a,s,u,l,c,p,f=[];for(r=0,o=t.length;r<o;r++)if(u=h[t[r]]){for(p=null,a=0,s=u[1].length;a<s;a+=2)-1===u[1][a]&&-1===u[1][a+1]?p=null:(l=e+u[1][a]*i,c=200-u[1][a+1]*i,p&&f.push(p.x,p.y,l,c),p={x:l,y:c});e+=u[0]*i}return f}(n.toString(),50,0,5),g=new u,v=0;v<y.length;v+=2)g.emplaceBack(y[v],y[v+1]);var _=i.createVertexBuffer(g,l.members);(new s).bind(i,m,_,[]),f.uniform4f(m.uniforms.u_color,1,1,1,1);for(var b=e.getTile(n).tileSize,x=a/(Math.pow(2,t.transform.zoom-n.overscaledZ)*b),w=[[-1,-1],[-1,1],[1,-1],[1,1]],E=0;E<w.length;E++){var C=w[E];f.uniformMatrix4fv(m.uniforms.u_matrix,!1,o.translate([],d,[x*C[0],x*C[1],0])),f.drawArrays(f.LINES,0,_.length)}f.uniform4f(m.uniforms.u_color,0,0,0,1),f.uniformMatrix4fv(m.uniforms.u_matrix,!1,d),f.drawArrays(f.LINES,0,_.length)}var r=t("../util/browser"),o=t("@mapbox/gl-matrix").mat4,a=t("../data/extent"),s=t("./vertex_array_object"),u=t("../data/array_types").PosArray,l=t("../data/pos_attributes"),c=t("../gl/depth_mode"),p=t("../gl/stencil_mode");e.exports=function(t,e,n){for(var r=0;r<n.length;r++)i(t,e,n[r])};var h={" ":[16,[]],"!":[10,[5,21,5,7,-1,-1,5,2,4,1,5,0,6,1,5,2]],'"':[16,[4,21,4,14,-1,-1,12,21,12,14]],"#":[21,[11,25,4,-7,-1,-1,17,25,10,-7,-1,-1,4,12,18,12,-1,-1,3,6,17,6]],$:[20,[8,25,8,-4,-1,-1,12,25,12,-4,-1,-1,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],"%":[24,[21,21,3,0,-1,-1,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,-1,-1,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7]],"&":[26,[23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2]],"'":[10,[5,19,4,20,5,21,6,20,6,18,5,16,4,15]],"(":[14,[11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7]],")":[14,[3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7]],"*":[16,[8,21,8,9,-1,-1,3,18,13,12,-1,-1,13,18,3,12]],"+":[26,[13,18,13,0,-1,-1,4,9,22,9]],",":[10,[6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"-":[26,[4,9,22,9]],".":[10,[5,2,4,1,5,0,6,1,5,2]],"/":[22,[20,25,2,-7]],0:[20,[9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21]],1:[20,[6,17,8,18,11,21,11,0]],2:[20,[4,16,4,17,5,19,6,20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0]],3:[20,[5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],4:[20,[13,21,3,7,18,7,-1,-1,13,21,13,0]],5:[20,[15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],6:[20,[16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7]],7:[20,[17,21,7,0,-1,-1,3,21,17,21]],8:[20,[8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21]],9:[20,[16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3]],":":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,5,2,4,1,5,0,6,1,5,2]],";":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"<":[24,[20,18,4,9,20,0]],"=":[26,[4,12,22,12,-1,-1,4,6,22,6]],">":[24,[4,18,20,9,4,0]],"?":[18,[3,16,3,17,4,19,5,20,7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,-1,-1,9,2,8,1,9,0,10,1,9,2]],"@":[27,[18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,-1,-1,12,16,10,14,9,11,9,8,10,6,11,5,-1,-1,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,-1,-1,19,16,18,8,18,6,19,5]],A:[18,[9,21,1,0,-1,-1,9,21,17,0,-1,-1,4,7,14,7]],B:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,-1,-1,4,11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0]],C:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5]],D:[21,[4,21,4,0,-1,-1,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0]],E:[19,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11,-1,-1,4,0,17,0]],F:[18,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11]],G:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,-1,-1,13,8,18,8]],H:[22,[4,21,4,0,-1,-1,18,21,18,0,-1,-1,4,11,18,11]],I:[8,[4,21,4,0]],J:[16,[12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7]],K:[21,[4,21,4,0,-1,-1,18,21,4,7,-1,-1,9,12,18,0]],L:[17,[4,21,4,0,-1,-1,4,0,16,0]],M:[24,[4,21,4,0,-1,-1,4,21,12,0,-1,-1,20,21,12,0,-1,-1,20,21,20,0]],N:[22,[4,21,4,0,-1,-1,4,21,18,0,-1,-1,18,21,18,0]],O:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21]],P:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10]],Q:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,-1,-1,12,4,18,-2]],R:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,-1,-1,11,11,18,0]],S:[20,[17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],T:[16,[8,21,8,0,-1,-1,1,21,15,21]],U:[22,[4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21]],V:[18,[1,21,9,0,-1,-1,17,21,9,0]],W:[24,[2,21,7,0,-1,-1,12,21,7,0,-1,-1,12,21,17,0,-1,-1,22,21,17,0]],X:[20,[3,21,17,0,-1,-1,17,21,3,0]],Y:[18,[1,21,9,11,9,0,-1,-1,17,21,9,11]],Z:[20,[17,21,3,0,-1,-1,3,21,17,21,-1,-1,3,0,17,0]],"[":[14,[4,25,4,-7,-1,-1,5,25,5,-7,-1,-1,4,25,11,25,-1,-1,4,-7,11,-7]],"\\":[14,[0,21,14,-3]],"]":[14,[9,25,9,-7,-1,-1,10,25,10,-7,-1,-1,3,25,10,25,-1,-1,3,-7,10,-7]],"^":[16,[6,15,8,18,10,15,-1,-1,3,12,8,17,13,12,-1,-1,8,17,8,0]],_:[16,[0,-2,16,-2]],"`":[10,[6,21,5,20,4,18,4,16,5,15,6,16,5,17]],a:[19,[15,14,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],b:[19,[4,21,4,0,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],c:[18,[15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],d:[19,[15,21,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],e:[18,[3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],f:[12,[10,21,8,21,6,20,5,17,5,0,-1,-1,2,14,9,14]],g:[19,[15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],h:[19,[4,21,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],i:[8,[3,21,4,20,5,21,4,22,3,21,-1,-1,4,14,4,0]],j:[10,[5,21,6,20,7,21,6,22,5,21,-1,-1,6,14,6,-3,5,-6,3,-7,1,-7]],k:[17,[4,21,4,0,-1,-1,14,14,4,4,-1,-1,8,8,15,0]],l:[8,[4,21,4,0]],m:[30,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0,-1,-1,15,10,18,13,20,14,23,14,25,13,26,10,26,0]],n:[19,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],o:[19,[8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14]],p:[19,[4,14,4,-7,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],q:[19,[15,14,15,-7,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],r:[13,[4,14,4,0,-1,-1,4,8,5,11,7,13,9,14,12,14]],s:[17,[14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3]],t:[12,[5,21,5,4,6,1,8,0,10,0,-1,-1,2,14,9,14]],u:[19,[4,14,4,4,5,1,7,0,10,0,12,1,15,4,-1,-1,15,14,15,0]],v:[16,[2,14,8,0,-1,-1,14,14,8,0]],w:[22,[3,14,7,0,-1,-1,11,14,7,0,-1,-1,11,14,15,0,-1,-1,19,14,15,0]],x:[17,[3,14,14,0,-1,-1,14,14,3,0]],y:[16,[2,14,8,0,-1,-1,14,14,8,0,6,-4,4,-6,2,-7,1,-7]],z:[17,[14,14,3,0,-1,-1,3,14,14,14,-1,-1,3,0,14,0]],"{":[14,[9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,-1,-1,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,-1,-1,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7]],"|":[8,[4,25,4,-7]],"}":[14,[5,25,7,24,8,23,9,21,9,19,8,17,7,16,6,14,6,12,8,10,-1,-1,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,-1,-1,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7]],"~":[24,[3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,-1,-1,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12]]}},{"../data/array_types":39,"../data/extent":53,"../data/pos_attributes":57,"../gl/depth_mode":67,"../gl/stencil_mode":70,"../util/browser":252,"./vertex_array_object":95,"@mapbox/gl-matrix":2}],78:[function(t,e,n){"use strict";function i(t,e,n,i,r){if(!s.isPatternMissing(n.paint.get("fill-pattern"),t))for(var o=!0,a=0,u=i;a<u.length;a+=1){var l=u[a],c=e.getTile(l),p=c.getBucket(n);p&&(t.context.setStencilMode(t.stencilModeForClipping(l)),r(t,e,n,c,l,p,o),o=!1)}}function r(t,e,n,i,r,o,s){var u=t.context.gl,l=o.programConfigurations.get(n.id);a("fill",n.paint.get("fill-pattern"),t,l,n,i,r,s).draw(t.context,u.TRIANGLES,n.id,o.layoutVertexBuffer,o.indexBuffer,o.segments,l)}function o(t,e,n,i,r,o,s){var u=t.context.gl,l=o.programConfigurations.get(n.id),c=a("fillOutline",n.getPaintProperty("fill-outline-color")?null:n.paint.get("fill-pattern"),t,l,n,i,r,s);u.uniform2f(c.uniforms.u_world,u.drawingBufferWidth,u.drawingBufferHeight),c.draw(t.context,u.LINES,n.id,o.layoutVertexBuffer,o.indexBuffer2,o.segments2,l)}function a(t,e,n,i,r,o,a,u){var l,c=n.context.program.get();return e?(l=n.useProgram(t+"Pattern",i),(u||l.program!==c)&&(i.setUniforms(n.context,l,r.paint,{zoom:n.transform.zoom}),s.prepare(e,n,l)),s.setTile(o,n,l)):(l=n.useProgram(t,i),(u||l.program!==c)&&i.setUniforms(n.context,l,r.paint,{zoom:n.transform.zoom})),n.context.gl.uniformMatrix4fv(l.uniforms.u_matrix,!1,n.translatePosMatrix(a.posMatrix,o,r.paint.get("fill-translate"),r.paint.get("fill-translate-anchor"))),l}var s=t("./pattern"),u=t("../style-spec/util/color"),l=t("../gl/depth_mode");e.exports=function(t,e,n,a){var s=n.paint.get("fill-color"),c=n.paint.get("fill-opacity");if(0!==c.constantOr(1)){var p=t.context;p.setColorMode(t.colorModeForRenderPass());var h=n.paint.get("fill-pattern")||1!==s.constantOr(u.transparent).a||1!==c.constantOr(0)?"translucent":"opaque";t.renderPass===h&&(p.setDepthMode(t.depthModeForSublayer(1,"opaque"===t.renderPass?l.ReadWrite:l.ReadOnly)),i(t,e,n,a,r)),"translucent"===t.renderPass&&n.paint.get("fill-antialias")&&(p.lineWidth.set(2),p.setDepthMode(t.depthModeForSublayer(n.getPaintProperty("fill-outline-color")?2:0,l.ReadOnly)),i(t,e,n,a,o))}}},{"../gl/depth_mode":67,"../style-spec/util/color":153,"./pattern":91}],79:[function(t,e,n){"use strict";function i(t,e,n,i,r,a,s){var u=t.context,c=u.gl,h=n.paint.get("fill-extrusion-pattern"),f=t.context.program.get(),d=a.programConfigurations.get(n.id),m=t.useProgram(h?"fillExtrusionPattern":"fillExtrusion",d);if((s||m.program!==f)&&d.setUniforms(u,m,n.paint,{zoom:t.transform.zoom}),h){if(o.isPatternMissing(h,t))return;o.prepare(h,t,m),o.setTile(i,t,m),c.uniform1f(m.uniforms.u_height_factor,-Math.pow(2,r.overscaledZ)/i.tileSize/8)}t.context.gl.uniformMatrix4fv(m.uniforms.u_matrix,!1,t.translatePosMatrix(r.posMatrix,i,n.paint.get("fill-extrusion-translate"),n.paint.get("fill-extrusion-translate-anchor"))),function(t,e){var n=e.context.gl,i=e.style.light,r=i.properties.get("position"),o=[r.x,r.y,r.z],a=l.create();"viewport"===i.properties.get("anchor")&&l.fromRotation(a,-e.transform.angle),p.transformMat3(o,o,a);var s=i.properties.get("color");n.uniform3fv(t.uniforms.u_lightpos,o),n.uniform1f(t.uniforms.u_lightintensity,i.properties.get("intensity")),n.uniform3f(t.uniforms.u_lightcolor,s.r,s.g,s.b)}(m,t),m.draw(u,c.TRIANGLES,n.id,a.layoutVertexBuffer,a.indexBuffer,a.segments,d)}var r=t("@mapbox/gl-matrix"),o=t("./pattern"),a=t("./texture"),s=t("../style-spec/util/color"),u=t("../gl/depth_mode"),l=r.mat3,c=r.mat4,p=r.vec3,h=t("../gl/stencil_mode");e.exports=function(t,e,n,r){if(0!==n.paint.get("fill-extrusion-opacity"))if("offscreen"===t.renderPass){!function(t,e){var n=t.context,i=n.gl,r=e.viewportFrame;if(t.depthRboNeedsClear&&t.setupOffscreenDepthRenderbuffer(),!r){var o=new a(n,{width:t.width,height:t.height,data:null},i.RGBA);o.bind(i.LINEAR,i.CLAMP_TO_EDGE),(r=e.viewportFrame=n.createFramebuffer(t.width,t.height)).colorAttachment.set(o.texture)}n.bindFramebuffer.set(r.framebuffer),r.depthAttachment.set(t.depthRbo),t.depthRboNeedsClear&&(n.clear({depth:1}),t.depthRboNeedsClear=!1),n.clear({color:s.transparent}),n.setStencilMode(h.disabled),n.setDepthMode(new u(i.LEQUAL,u.ReadWrite,[0,1])),n.setColorMode(t.colorModeForRenderPass())}(t,n);for(var o=!0,l=0,p=r;l<p.length;l+=1){var f=p[l],d=e.getTile(f),m=d.getBucket(n);m&&(i(t,0,n,d,f,m,o),o=!1)}}else"translucent"===t.renderPass&&function(t,e){var n=e.viewportFrame;if(n){var i=t.context,r=i.gl,o=t.useProgram("extrusionTexture");i.setStencilMode(h.disabled),i.setDepthMode(u.disabled),i.setColorMode(t.colorModeForRenderPass()),i.activeTexture.set(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,n.colorAttachment.get()),r.uniform1f(o.uniforms.u_opacity,e.paint.get("fill-extrusion-opacity")),r.uniform1i(o.uniforms.u_image,0);var a=c.create();c.ortho(a,0,t.width,t.height,0,0,1),r.uniformMatrix4fv(o.uniforms.u_matrix,!1,a),r.uniform2f(o.uniforms.u_world,r.drawingBufferWidth,r.drawingBufferHeight),t.viewportVAO.bind(i,o,t.viewportBuffer,[]),r.drawArrays(r.TRIANGLE_STRIP,0,4)}}(t,n)}},{"../gl/depth_mode":67,"../gl/stencil_mode":70,"../style-spec/util/color":153,"./pattern":91,"./texture":93,"@mapbox/gl-matrix":2}],80:[function(t,e,n){"use strict";var i=t("@mapbox/gl-matrix").mat4,r=t("./texture"),o=t("../source/pixels_to_tile_units"),a=t("../style-spec/util/color"),s=t("../gl/depth_mode"),u=t("../gl/stencil_mode"),l=t("../gl/color_mode");e.exports=function(t,e,n,c){if(0!==n.paint.get("heatmap-opacity"))if("offscreen"===t.renderPass){var p=t.context,h=p.gl;p.setDepthMode(t.depthModeForSublayer(0,s.ReadOnly)),p.setStencilMode(u.disabled),function(t,e,n){var i=t.gl;t.activeTexture.set(i.TEXTURE1),t.viewport.set([0,0,e.width/4,e.height/4]);var r=n.heatmapFbo;if(r)i.bindTexture(i.TEXTURE_2D,r.colorAttachment.get()),t.bindFramebuffer.set(r.framebuffer);else{var o=i.createTexture();i.bindTexture(i.TEXTURE_2D,o),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),function t(e,n,i,r){var o=e.gl;o.texImage2D(o.TEXTURE_2D,0,o.RGBA,n.width/4,n.height/4,0,o.RGBA,e.extTextureHalfFloat?e.extTextureHalfFloat.HALF_FLOAT_OES:o.UNSIGNED_BYTE,null),r.colorAttachment.set(i),e.extTextureHalfFloat&&o.checkFramebufferStatus(o.FRAMEBUFFER)!==o.FRAMEBUFFER_COMPLETE&&(e.extTextureHalfFloat=null,r.colorAttachment.setDirty(),t(e,n,i,r))}(t,e,o,r=n.heatmapFbo=t.createFramebuffer(e.width/4,e.height/4))}}(p,t,n),p.clear({color:a.transparent}),p.setColorMode(new l([h.ONE,h.ONE],a.transparent,[!0,!0,!0,!0]));for(var f=!0,d=0;d<c.length;d++){var m=c[d];if(!e.hasRenderableParent(m)){var y=e.getTile(m),g=y.getBucket(n);if(g){var v=t.context.program.get(),_=g.programConfigurations.get(n.id),b=t.useProgram("heatmap",_),x=t.transform.zoom;(f||b.program!==v)&&(_.setUniforms(t.context,b,n.paint,{zoom:x}),f=!1),h.uniform1f(b.uniforms.u_extrude_scale,o(y,1,x)),h.uniform1f(b.uniforms.u_intensity,n.paint.get("heatmap-intensity")),h.uniformMatrix4fv(b.uniforms.u_matrix,!1,m.posMatrix),b.draw(p,h.TRIANGLES,n.id,g.layoutVertexBuffer,g.indexBuffer,g.segments,_)}}}p.viewport.set([0,0,t.width,t.height])}else"translucent"===t.renderPass&&(t.context.setColorMode(t.colorModeForRenderPass()),function(t,e){var n=t.context,o=n.gl,a=e.heatmapFbo;if(a){n.activeTexture.set(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,a.colorAttachment.get()),n.activeTexture.set(o.TEXTURE1);var u=e.colorRampTexture;u||(u=e.colorRampTexture=new r(n,e.colorRamp,o.RGBA)),u.bind(o.LINEAR,o.CLAMP_TO_EDGE),n.setDepthMode(s.disabled);var l=t.useProgram("heatmapTexture"),c=e.paint.get("heatmap-opacity");o.uniform1f(l.uniforms.u_opacity,c),o.uniform1i(l.uniforms.u_image,0),o.uniform1i(l.uniforms.u_color_ramp,1);var p=i.create();i.ortho(p,0,t.width,t.height,0,0,1),o.uniformMatrix4fv(l.uniforms.u_matrix,!1,p),o.uniform2f(l.uniforms.u_world,o.drawingBufferWidth,o.drawingBufferHeight),t.viewportVAO.bind(t.context,l,t.viewportBuffer,[]),o.drawArrays(o.TRIANGLE_STRIP,0,4)}}(t,n))}},{"../gl/color_mode":65,"../gl/depth_mode":67,"../gl/stencil_mode":70,"../source/pixels_to_tile_units":104,"../style-spec/util/color":153,"./texture":93,"@mapbox/gl-matrix":2}],81:[function(t,e,n){"use strict";function i(t,e,n){var i=t.context,r=i.gl,a=e.fbo;if(a){var s=t.useProgram("hillshade"),u=t.transform.calculatePosMatrix(e.tileID.toUnwrapped());!function(t,e,n){var i=n.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===n.paint.get("hillshade-illumination-anchor")&&(i-=e.transform.angle),e.context.gl.uniform2f(t.uniforms.u_light,n.paint.get("hillshade-exaggeration"),i)}(s,t,n);var l=function(t,e){var n=e.toCoordinate(),i=new o(n.column,n.row+1,n.zoom);return[t.transform.coordinateLocation(n).lat,t.transform.coordinateLocation(i).lat]}(t,e.tileID);i.activeTexture.set(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,a.colorAttachment.get()),r.uniformMatrix4fv(s.uniforms.u_matrix,!1,u),r.uniform2fv(s.uniforms.u_latrange,l),r.uniform1i(s.uniforms.u_image,0);var c=n.paint.get("hillshade-shadow-color");r.uniform4f(s.uniforms.u_shadow,c.r,c.g,c.b,c.a);var p=n.paint.get("hillshade-highlight-color");r.uniform4f(s.uniforms.u_highlight,p.r,p.g,p.b,p.a);var h=n.paint.get("hillshade-accent-color");if(r.uniform4f(s.uniforms.u_accent,h.r,h.g,h.b,h.a),e.maskedBoundsBuffer&&e.maskedIndexBuffer&&e.segments)s.draw(i,r.TRIANGLES,n.id,e.maskedBoundsBuffer,e.maskedIndexBuffer,e.segments);else{var f=t.rasterBoundsBuffer;t.rasterBoundsVAO.bind(i,s,f,[]),r.drawArrays(r.TRIANGLE_STRIP,0,f.length)}}}function r(t,e){var n=t.context,i=n.gl;if(e.dem&&e.dem.level){var r=e.dem.level.dim,o=e.dem.getPixels();if(n.activeTexture.set(i.TEXTURE1),n.pixelStoreUnpackPremultiplyAlpha.set(!1),e.demTexture=e.demTexture||t.getTileTexture(e.tileSize),e.demTexture){var l=e.demTexture;l.update(o,!1),l.bind(i.NEAREST,i.CLAMP_TO_EDGE)}else e.demTexture=new a(n,o,i.RGBA,!1),e.demTexture.bind(i.NEAREST,i.CLAMP_TO_EDGE);n.activeTexture.set(i.TEXTURE0);var c=e.fbo;if(!c){var p=new a(n,{width:r,height:r,data:null},i.RGBA);p.bind(i.LINEAR,i.CLAMP_TO_EDGE),(c=e.fbo=n.createFramebuffer(r,r)).colorAttachment.set(p.texture)}n.bindFramebuffer.set(c.framebuffer),n.viewport.set([0,0,r,r]);var h=u.create();u.ortho(h,0,s,-s,0,0,1),u.translate(h,h,[0,-s,0]);var f=t.useProgram("hillshadePrepare");i.uniformMatrix4fv(f.uniforms.u_matrix,!1,h),i.uniform1f(f.uniforms.u_zoom,e.tileID.overscaledZ),i.uniform2fv(f.uniforms.u_dimension,[2*r,2*r]),i.uniform1i(f.uniforms.u_image,1);var d=t.rasterBoundsBuffer;t.rasterBoundsVAO.bind(n,f,d,[]),i.drawArrays(i.TRIANGLE_STRIP,0,d.length),e.needsHillshadePrepare=!1}}var o=t("../geo/coordinate"),a=t("./texture"),s=t("../data/extent"),u=t("@mapbox/gl-matrix").mat4,l=t("../gl/stencil_mode"),c=t("../gl/depth_mode");e.exports=function(t,e,n,o){if("offscreen"===t.renderPass||"translucent"===t.renderPass){var a=t.context;a.setDepthMode(t.depthModeForSublayer(0,c.ReadOnly)),a.setStencilMode(l.disabled),a.setColorMode(t.colorModeForRenderPass());for(var s=0,u=o;s<u.length;s+=1){var p=e.getTile(u[s]);p.needsHillshadePrepare&&"offscreen"===t.renderPass?r(t,p):"translucent"===t.renderPass&&i(t,p,n)}a.viewport.set([0,0,t.width,t.height])}}},{"../data/extent":53,"../geo/coordinate":61,"../gl/depth_mode":67,"../gl/stencil_mode":70,"./texture":93,"@mapbox/gl-matrix":2}],82:[function(t,e,n){"use strict";function i(t,e,n,i,a,s,u,l,c){var p,h,f,d,m=e.context,y=m.gl,g=a.paint.get("line-dasharray"),v=a.paint.get("line-pattern");if(l||c){var _=1/o(n,1,e.transform.tileZoom);if(g){p=e.lineAtlas.getDash(g.from,"round"===a.layout.get("line-cap")),h=e.lineAtlas.getDash(g.to,"round"===a.layout.get("line-cap"));var b=p.width*g.fromScale,x=h.width*g.toScale;y.uniform2f(t.uniforms.u_patternscale_a,_/b,-p.height/2),y.uniform2f(t.uniforms.u_patternscale_b,_/x,-h.height/2),y.uniform1f(t.uniforms.u_sdfgamma,e.lineAtlas.width/(256*Math.min(b,x)*r.devicePixelRatio)/2)}else if(v){if(f=e.imageManager.getPattern(v.from),d=e.imageManager.getPattern(v.to),!f||!d)return;y.uniform2f(t.uniforms.u_pattern_size_a,f.displaySize[0]*v.fromScale/_,d.displaySize[1]),y.uniform2f(t.uniforms.u_pattern_size_b,d.displaySize[0]*v.toScale/_,d.displaySize[1]);var w=e.imageManager.getPixelSize();y.uniform2fv(t.uniforms.u_texsize,[w.width,w.height])}y.uniform2f(t.uniforms.u_gl_units_to_pixels,1/e.transform.pixelsToGLUnits[0],1/e.transform.pixelsToGLUnits[1])}l&&(g?(y.uniform1i(t.uniforms.u_image,0),m.activeTexture.set(y.TEXTURE0),e.lineAtlas.bind(m),y.uniform1f(t.uniforms.u_tex_y_a,p.y),y.uniform1f(t.uniforms.u_tex_y_b,h.y),y.uniform1f(t.uniforms.u_mix,g.t)):v&&(y.uniform1i(t.uniforms.u_image,0),m.activeTexture.set(y.TEXTURE0),e.imageManager.bind(m),y.uniform2fv(t.uniforms.u_pattern_tl_a,f.tl),y.uniform2fv(t.uniforms.u_pattern_br_a,f.br),y.uniform2fv(t.uniforms.u_pattern_tl_b,d.tl),y.uniform2fv(t.uniforms.u_pattern_br_b,d.br),y.uniform1f(t.uniforms.u_fade,v.t))),m.setStencilMode(e.stencilModeForClipping(s));var E=e.translatePosMatrix(s.posMatrix,n,a.paint.get("line-translate"),a.paint.get("line-translate-anchor"));y.uniformMatrix4fv(t.uniforms.u_matrix,!1,E),y.uniform1f(t.uniforms.u_ratio,1/o(n,1,e.transform.zoom)),t.draw(m,y.TRIANGLES,a.id,i.layoutVertexBuffer,i.indexBuffer,i.segments,u)}var r=t("../util/browser"),o=t("../source/pixels_to_tile_units"),a=t("../gl/depth_mode");e.exports=function(t,e,n,r){if("translucent"===t.renderPass&&0!==n.paint.get("line-opacity").constantOr(1)){var o=t.context;o.setDepthMode(t.depthModeForSublayer(0,a.ReadOnly)),o.setColorMode(t.colorModeForRenderPass());for(var s,u=n.paint.get("line-dasharray")?"lineSDF":n.paint.get("line-pattern")?"linePattern":"line",l=!0,c=0,p=r;c<p.length;c+=1){var h=p[c],f=e.getTile(h),d=f.getBucket(n);if(d){var m=d.programConfigurations.get(n.id),y=t.context.program.get(),g=t.useProgram(u,m),v=l||g.program!==y,_=s!==f.tileID.overscaledZ;v&&m.setUniforms(t.context,g,n.paint,{zoom:t.transform.zoom}),i(g,t,f,d,n,h,m,v,_),s=f.tileID.overscaledZ,l=!1}}}}},{"../gl/depth_mode":67,"../source/pixels_to_tile_units":104,"../util/browser":252}],83:[function(t,e,n){"use strict";function i(t,e,n,i,o){var s=i.paint.get("raster-fade-duration");if(s>0){var u=a.now(),l=(u-t.timeAdded)/s,c=e?(u-e.timeAdded)/s:-1,p=n.getSource(),h=o.coveringZoomLevel({tileSize:p.tileSize,roundZoom:p.roundZoom}),f=!e||Math.abs(e.tileID.overscaledZ-h)>Math.abs(t.tileID.overscaledZ-h),d=f&&t.refreshedUponExpiration?1:r.clamp(f?l:1-c,0,1);return t.refreshedUponExpiration&&l>=1&&(t.refreshedUponExpiration=!1),e?{opacity:1,mix:1-d}:{opacity:d,mix:0}}return{opacity:1,mix:0}}var r=t("../util/util"),o=t("../source/image_source"),a=t("../util/browser"),s=t("../gl/stencil_mode"),u=t("../gl/depth_mode");e.exports=function(t,e,n,r){if("translucent"===t.renderPass&&0!==n.paint.get("raster-opacity")){var a=t.context,l=a.gl,c=e.getSource(),p=t.useProgram("raster");a.setStencilMode(s.disabled),a.setColorMode(t.colorModeForRenderPass()),l.uniform1f(p.uniforms.u_brightness_low,n.paint.get("raster-brightness-min")),l.uniform1f(p.uniforms.u_brightness_high,n.paint.get("raster-brightness-max")),l.uniform1f(p.uniforms.u_saturation_factor,function(t){return t>0?1-1/(1.001-t):-t}(n.paint.get("raster-saturation"))),l.uniform1f(p.uniforms.u_contrast_factor,function(t){return t>0?1/(1-t):1+t}(n.paint.get("raster-contrast"))),l.uniform3fv(p.uniforms.u_spin_weights,function(t){t*=Math.PI/180;var e=Math.sin(t),n=Math.cos(t);return[(2*n+1)/3,(-Math.sqrt(3)*e-n+1)/3,(Math.sqrt(3)*e-n+1)/3]}(n.paint.get("raster-hue-rotate"))),l.uniform1f(p.uniforms.u_buffer_scale,1),l.uniform1i(p.uniforms.u_image0,0),l.uniform1i(p.uniforms.u_image1,1);for(var h=r.length&&r[0].overscaledZ,f=0,d=r;f<d.length;f+=1){var m=d[f];a.setDepthMode(t.depthModeForSublayer(m.overscaledZ-h,1===n.paint.get("raster-opacity")?u.ReadWrite:u.ReadOnly,l.LESS));var y=e.getTile(m),g=t.transform.calculatePosMatrix(m.toUnwrapped(),!0);y.registerFadeDuration(n.paint.get("raster-fade-duration")),l.uniformMatrix4fv(p.uniforms.u_matrix,!1,g);var v=e.findLoadedParent(m,0,{}),_=i(y,v,e,n,t.transform),b=void 0,x=void 0;if(a.activeTexture.set(l.TEXTURE0),y.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE,l.LINEAR_MIPMAP_NEAREST),a.activeTexture.set(l.TEXTURE1),v?(v.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE,l.LINEAR_MIPMAP_NEAREST),b=Math.pow(2,v.tileID.overscaledZ-y.tileID.overscaledZ),x=[y.tileID.canonical.x*b%1,y.tileID.canonical.y*b%1]):y.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE,l.LINEAR_MIPMAP_NEAREST),l.uniform2fv(p.uniforms.u_tl_parent,x||[0,0]),l.uniform1f(p.uniforms.u_scale_parent,b||1),l.uniform1f(p.uniforms.u_fade_t,_.mix),l.uniform1f(p.uniforms.u_opacity,_.opacity*n.paint.get("raster-opacity")),c instanceof o){var w=c.boundsBuffer;c.boundsVAO.bind(a,p,w,[]),l.drawArrays(l.TRIANGLE_STRIP,0,w.length)}else if(y.maskedBoundsBuffer&&y.maskedIndexBuffer&&y.segments)p.draw(a,l.TRIANGLES,n.id,y.maskedBoundsBuffer,y.maskedIndexBuffer,y.segments);else{var E=t.rasterBoundsBuffer;t.rasterBoundsVAO.bind(a,p,E,[]),l.drawArrays(l.TRIANGLE_STRIP,0,E.length)}}}}},{"../gl/depth_mode":67,"../gl/stencil_mode":70,"../source/image_source":102,"../util/browser":252,"../util/util":275}],84:[function(t,e,n){"use strict";function i(t,e,n,i,a,s,c,h,f,m){var y=t.context,g=y.gl,v=t.transform,_="map"===h,b="map"===f,x=_&&"line"===n.layout.get("symbol-placement"),w=_&&!b&&!x;y.setDepthMode(b?t.depthModeForSublayer(0,d.ReadOnly):d.disabled);for(var E,C=0,O=i;C<O.length;C+=1){var P=O[C],S=e.getTile(P),T=S.getBucket(n);if(T){var k=a?T.text:T.icon;if(k&&k.segments.get().length){var A=k.programConfigurations.get(n.id),I=a||T.sdfIcons,L=a?T.textSizeData:T.iconSizeData;if(E||(E=t.useProgram(I?"symbolSDF":"symbolIcon",A),A.setUniforms(t.context,E,n.paint,{zoom:t.transform.zoom}),r(E,t,0,a,w,b,L)),y.activeTexture.set(g.TEXTURE0),g.uniform1i(E.uniforms.u_texture,0),a)S.glyphAtlasTexture.bind(g.LINEAR,g.CLAMP_TO_EDGE),g.uniform2fv(E.uniforms.u_texsize,S.glyphAtlasTexture.size);else{var M=1!==n.layout.get("icon-size").constantOr(0)||T.iconsNeedLinear;S.iconAtlasTexture.bind(I||t.options.rotating||t.options.zooming||M||b||0!==v.pitch?g.LINEAR:g.NEAREST,g.CLAMP_TO_EDGE),g.uniform2fv(E.uniforms.u_texsize,S.iconAtlasTexture.size)}g.uniformMatrix4fv(E.uniforms.u_matrix,!1,t.translatePosMatrix(P.posMatrix,S,s,c));var z=u(S,1,t.transform.zoom),D=l.getLabelPlaneMatrix(P.posMatrix,b,_,t.transform,z),R=l.getGlCoordMatrix(P.posMatrix,b,_,t.transform,z);g.uniformMatrix4fv(E.uniforms.u_gl_coord_matrix,!1,t.translatePosMatrix(R,S,s,c,!0)),x?(g.uniformMatrix4fv(E.uniforms.u_label_plane_matrix,!1,p),l.updateLineLabels(T,P.posMatrix,t,a,D,R,b,m)):g.uniformMatrix4fv(E.uniforms.u_label_plane_matrix,!1,D),g.uniform1f(E.uniforms.u_fade_change,t.options.fadeDuration?t.symbolFadeChange:1),o(E,0,t,n,0,k,a,I,b)}}}}function r(t,e,n,i,r,o,a){var s=e.context.gl,u=e.transform;s.uniform1i(t.uniforms.u_pitch_with_map,o?1:0),s.uniform1f(t.uniforms.u_is_text,i?1:0),s.uniform1f(t.uniforms.u_pitch,u.pitch/360*2*Math.PI);var l="constant"===a.functionType||"camera"===a.functionType;s.uniform1i(t.uniforms.u_is_size_zoom_constant,"constant"===a.functionType||"source"===a.functionType?1:0),s.uniform1i(t.uniforms.u_is_size_feature_constant,l?1:0),s.uniform1f(t.uniforms.u_camera_to_center_distance,u.cameraToCenterDistance);var p=c.evaluateSizeForZoom(a,u.zoom,h.properties[i?"text-size":"icon-size"]);void 0!==p.uSizeT&&s.uniform1f(t.uniforms.u_size_t,p.uSizeT),void 0!==p.uSize&&s.uniform1f(t.uniforms.u_size,p.uSize),s.uniform1f(t.uniforms.u_aspect_ratio,u.width/u.height),s.uniform1i(t.uniforms.u_rotate_symbol,r?1:0)}function o(t,e,n,i,r,o,s,u,l){var c=n.context,p=c.gl,h=n.transform;if(u){var f=0!==i.paint.get(s?"text-halo-width":"icon-halo-width").constantOr(1),d=l?Math.cos(h._pitch)*h.cameraToCenterDistance:1;p.uniform1f(t.uniforms.u_gamma_scale,d),f&&(p.uniform1f(t.uniforms.u_is_halo,1),a(o,i,c,t)),p.uniform1f(t.uniforms.u_is_halo,0)}a(o,i,c,t)}function a(t,e,n,i){i.draw(n,n.gl.TRIANGLES,e.id,t.layoutVertexBuffer,t.indexBuffer,t.segments,t.programConfigurations.get(e.id),t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer)}var s=t("./draw_collision_debug"),u=t("../source/pixels_to_tile_units"),l=t("../symbol/projection"),c=t("../symbol/symbol_size"),p=t("@mapbox/gl-matrix").mat4.identity(new Float32Array(16)),h=t("../style/style_layer/symbol_style_layer_properties").layout,f=t("../gl/stencil_mode"),d=t("../gl/depth_mode");e.exports=function(t,e,n,r){if("translucent"===t.renderPass){var o=t.context;o.setStencilMode(f.disabled),o.setColorMode(t.colorModeForRenderPass()),0!==n.paint.get("icon-opacity").constantOr(1)&&i(t,e,n,r,!1,n.paint.get("icon-translate"),n.paint.get("icon-translate-anchor"),n.layout.get("icon-rotation-alignment"),n.layout.get("icon-pitch-alignment"),n.layout.get("icon-keep-upright")),0!==n.paint.get("text-opacity").constantOr(1)&&i(t,e,n,r,!0,n.paint.get("text-translate"),n.paint.get("text-translate-anchor"),n.layout.get("text-rotation-alignment"),n.layout.get("text-pitch-alignment"),n.layout.get("text-keep-upright")),e.map.showCollisionBoxes&&s(t,e,n,r)}}},{"../gl/depth_mode":67,"../gl/stencil_mode":70,"../source/pixels_to_tile_units":104,"../style/style_layer/symbol_style_layer_properties":209,"../symbol/projection":224,"../symbol/symbol_size":228,"./draw_collision_debug":76,"@mapbox/gl-matrix":2}],85:[function(t,e,n){"use strict";var i=t("@mapbox/shelf-pack"),r=t("../util/image").AlphaImage;e.exports={makeGlyphAtlas:function(t){var e=new r({width:0,height:0}),n={},o=new i(0,0,{autoResize:!0});for(var a in t){var s=t[a],u=n[a]={};for(var l in s){var c=s[+l];if(c&&0!==c.bitmap.width&&0!==c.bitmap.height){var p=o.packOne(c.bitmap.width+2,c.bitmap.height+2);e.resize({width:o.w,height:o.h}),r.copy(c.bitmap,e,{x:0,y:0},{x:p.x+1,y:p.y+1},c.bitmap),u[l]={rect:p,metrics:c.metrics}}}}return o.shrink(),e.resize({width:o.w,height:o.h}),{image:e,positions:n}}}},{"../util/image":263,"@mapbox/shelf-pack":5}],86:[function(t,e,n){"use strict";var i=t("../style/load_glyph_range"),r=t("@mapbox/tiny-sdf"),o=t("../util/is_char_in_unicode_block"),a=t("../util/util").asyncAll,s=t("../util/image").AlphaImage,u=function(t,e){this.requestTransform=t,this.localIdeographFontFamily=e,this.entries={}};u.prototype.setURL=function(t){this.url=t},u.prototype.getGlyphs=function(t,e){var n=this,r=[];for(var o in t)for(var s=0,u=t[o];s<u.length;s+=1)r.push({stack:o,id:u[s]});a(r,function(t,e){var r=t.stack,o=t.id,a=n.entries[r];a||(a=n.entries[r]={glyphs:{},requests:{}});var s=a.glyphs[o];if(void 0===s)if(s=n._tinySDF(a,r,o))e(null,{stack:r,id:o,glyph:s});else{var u=Math.floor(o/256);if(256*u>65535)e(new Error("glyphs > 65535 not supported"));else{var l=a.requests[u];l||(l=a.requests[u]=[],i(r,u,n.url,n.requestTransform,function(t,e){if(e)for(var n in e)a.glyphs[+n]=e[+n];for(var i=0,r=l;i<r.length;i+=1)(0,r[i])(t,e);delete a.requests[u]})),l.push(function(t,n){t?e(t):n&&e(null,{stack:r,id:o,glyph:n[o]||null})})}}else e(null,{stack:r,id:o,glyph:s})},function(t,n){if(t)e(t);else if(n){for(var i={},r=0,o=n;r<o.length;r+=1){var a=o[r],s=a.stack,u=a.id,l=a.glyph;(i[s]||(i[s]={}))[u]=l&&{id:l.id,bitmap:l.bitmap.clone(),metrics:l.metrics}}e(null,i)}})},u.prototype._tinySDF=function(t,e,n){var i=this.localIdeographFontFamily;if(i&&(o["CJK Unified Ideographs"](n)||o["Hangul Syllables"](n))){var a=t.tinySDF;if(!a){var u="400";/bold/i.test(e)?u="900":/medium/i.test(e)?u="500":/light/i.test(e)&&(u="200"),a=t.tinySDF=new r(24,3,8,.25,i,u)}return{id:n,bitmap:new s({width:30,height:30},a.draw(String.fromCharCode(n))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},e.exports=u},{"../style/load_glyph_range":184,"../util/image":263,"../util/is_char_in_unicode_block":265,"../util/util":275,"@mapbox/tiny-sdf":6}],87:[function(t,e,n){"use strict";function i(t,e){var n=e.pixelRatio,i={x:t.x+a,y:t.y+a,w:t.w-2*a,h:t.h-2*a};return{pixelRatio:n,textureRect:i,tl:[i.x,i.y],br:[i.x+i.w,i.y+i.h],displaySize:[i.w/n,i.h/n]}}var r=t("@mapbox/shelf-pack"),o=t("../util/image").RGBAImage,a=1;e.exports={imagePosition:i,makeImageAtlas:function(t){var e=new o({width:0,height:0}),n={},s=new r(0,0,{autoResize:!0});for(var u in t){var l=t[u],c=s.packOne(l.data.width+2*a,l.data.height+2*a);e.resize({width:s.w,height:s.h}),o.copy(l.data,e,{x:0,y:0},{x:c.x+a,y:c.y+a},l.data),n[u]=i(c,l)}return s.shrink(),e.resize({width:s.w,height:s.h}),{image:e,positions:n}}}},{"../util/image":263,"@mapbox/shelf-pack":5}],88:[function(t,e,n){"use strict";var i=t("@mapbox/shelf-pack"),r=t("../util/image").RGBAImage,o=t("./image_atlas").imagePosition,a=t("./texture"),s=function(){this.images={},this.loaded=!1,this.requestors=[],this.shelfPack=new i(64,64,{autoResize:!0}),this.patterns={},this.atlasImage=new r({width:64,height:64}),this.dirty=!0};s.prototype.isLoaded=function(){return this.loaded},s.prototype.setLoaded=function(t){if(this.loaded!==t&&(this.loaded=t,t)){for(var e=0,n=this.requestors;e<n.length;e+=1){var i=n[e];this._notify(i.ids,i.callback)}this.requestors=[]}},s.prototype.getImage=function(t){return this.images[t]},s.prototype.addImage=function(t,e){this.images[t]=e},s.prototype.removeImage=function(t){delete this.images[t];var e=this.patterns[t];e&&(this.shelfPack.unref(e.bin),delete this.patterns[t])},s.prototype.getImages=function(t,e){var n=!0;if(!this.isLoaded())for(var i=0,r=t;i<r.length;i+=1)this.images[r[i]]||(n=!1);this.isLoaded()||n?this._notify(t,e):this.requestors.push({ids:t,callback:e})},s.prototype._notify=function(t,e){for(var n={},i=0,r=t;i<r.length;i+=1){var o=r[i],a=this.images[o];a&&(n[o]={data:a.data.clone(),pixelRatio:a.pixelRatio,sdf:a.sdf})}e(null,n)},s.prototype.getPixelSize=function(){return{width:this.shelfPack.w,height:this.shelfPack.h}},s.prototype.getPattern=function(t){var e=this.patterns[t];if(e)return e.position;var n=this.getImage(t);if(!n)return null;var i=this.shelfPack.packOne(n.data.width+2,n.data.height+2);if(!i)return null;this.atlasImage.resize(this.getPixelSize());var a=n.data,s=this.atlasImage,u=i.x+1,l=i.y+1,c=a.width,p=a.height;r.copy(a,s,{x:0,y:0},{x:u,y:l},{width:c,height:p}),r.copy(a,s,{x:0,y:p-1},{x:u,y:l-1},{width:c,height:1}),r.copy(a,s,{x:0,y:0},{x:u,y:l+p},{width:c,height:1}),r.copy(a,s,{x:c-1,y:0},{x:u-1,y:l},{width:1,height:p}),r.copy(a,s,{x:0,y:0},{x:u+c,y:l},{width:1,height:p}),this.dirty=!0;var h=o(i,n);return this.patterns[t]={bin:i,position:h},h},s.prototype.bind=function(t){var e=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new a(t,this.atlasImage,e.RGBA),this.atlasTexture.bind(e.LINEAR,e.CLAMP_TO_EDGE)},e.exports=s},{"../util/image":263,"./image_atlas":87,"./texture":93,"@mapbox/shelf-pack":5}],89:[function(t,e,n){"use strict";var i=t("../util/util"),r=function(t,e){this.width=t,this.height=e,this.nextRow=0,this.bytes=4,this.data=new Uint8Array(this.width*this.height*this.bytes),this.positions={}};r.prototype.getDash=function(t,e){var n=t.join(",")+String(e);return this.positions[n]||(this.positions[n]=this.addDash(t,e)),this.positions[n]},r.prototype.addDash=function(t,e){var n=this,r=e?7:0,o=2*r+1;if(this.nextRow+o>this.height)return i.warnOnce("LineAtlas out of space"),null;for(var a=0,s=0;s<t.length;s++)a+=t[s];for(var u=this.width/a,l=u/2,c=t.length%2==1,p=-r;p<=r;p++)for(var h=n.width*(n.nextRow+r+p),f=c?-t[t.length-1]:0,d=t[0],m=1,y=0;y<this.width;y++){for(;d<y/u;)f=d,d+=t[m],c&&m===t.length-1&&(d+=t[0]),m++;var g=Math.abs(y-f*u),v=Math.abs(y-d*u),_=Math.min(g,v),b=m%2==1,x=void 0;if(e){var w=r?p/r*(l+1):0;if(b){var E=l-Math.abs(w);x=Math.sqrt(_*_+E*E)}else x=l-Math.sqrt(_*_+w*w)}else x=(b?1:-1)*_;n.data[3+4*(h+y)]=Math.max(0,Math.min(255,x+128))}var C={y:(this.nextRow+r+.5)/this.height,height:2*r/this.height,width:a};return this.nextRow+=o,this.dirty=!0,C},r.prototype.bind=function(t){var e=t.gl;this.texture?(e.bindTexture(e.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.width,this.height,e.RGBA,e.UNSIGNED_BYTE,this.data))):(this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.width,this.height,0,e.RGBA,e.UNSIGNED_BYTE,this.data))},e.exports=r},{"../util/util":275}],90:[function(t,e,n){"use strict";var i=t("../util/browser"),r=t("@mapbox/gl-matrix").mat4,o=t("../source/source_cache"),a=t("../data/extent"),s=t("../source/pixels_to_tile_units"),u=t("../util/util"),l=t("./vertex_array_object"),c=t("../data/array_types"),p=c.RasterBoundsArray,h=c.PosArray,f=t("../data/raster_bounds_attributes"),d=t("../data/pos_attributes"),m=t("../data/program_configuration").ProgramConfiguration,y=t("../symbol/cross_tile_symbol_index"),g=t("../shaders"),v=t("./program"),_=t("../gl/context"),b=t("../gl/depth_mode"),x=t("../gl/stencil_mode"),w=t("../gl/color_mode"),E=(t("./texture"),t("./tile_mask")),C=t("../style-spec/util/color"),O={symbol:t("./draw_symbol"),circle:t("./draw_circle"),heatmap:t("./draw_heatmap"),line:t("./draw_line"),fill:t("./draw_fill"),"fill-extrusion":t("./draw_fill_extrusion"),hillshade:t("./draw_hillshade"),raster:t("./draw_raster"),background:t("./draw_background"),debug:t("./draw_debug")},P=function(t,e){this.context=new _(t),this.transform=e,this._tileTextures={},this.setup(),this.numSublayers=o.maxUnderzooming+o.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.depthRboNeedsClear=!0,this.emptyProgramConfiguration=new m,this.crossTileSymbolIndex=new y};P.prototype.resize=function(t,e){var n=this.context.gl;if(this.width=t*i.devicePixelRatio,this.height=e*i.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var r=0,o=this.style._order;r<o.length;r+=1)this.style._layers[o[r]].resize();this.depthRbo&&(n.deleteRenderbuffer(this.depthRbo),this.depthRbo=null)},P.prototype.setup=function(){var t=this.context,e=new h;e.emplaceBack(0,0),e.emplaceBack(a,0),e.emplaceBack(0,a),e.emplaceBack(a,a),this.tileExtentBuffer=t.createVertexBuffer(e,d.members),this.tileExtentVAO=new l,this.tileExtentPatternVAO=new l;var n=new h;n.emplaceBack(0,0),n.emplaceBack(a,0),n.emplaceBack(a,a),n.emplaceBack(0,a),n.emplaceBack(0,0),this.debugBuffer=t.createVertexBuffer(n,d.members),this.debugVAO=new l;var i=new p;i.emplaceBack(0,0,0,0),i.emplaceBack(a,0,a,0),i.emplaceBack(0,a,0,a),i.emplaceBack(a,a,a,a),this.rasterBoundsBuffer=t.createVertexBuffer(i,f.members),this.rasterBoundsVAO=new l;var r=new h;r.emplaceBack(0,0),r.emplaceBack(1,0),r.emplaceBack(0,1),r.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(r,d.members),this.viewportVAO=new l},P.prototype.clearStencil=function(){var t=this.context,e=t.gl;t.setColorMode(w.disabled),t.setDepthMode(b.disabled),t.setStencilMode(new x({func:e.ALWAYS,mask:0},0,255,e.ZERO,e.ZERO,e.ZERO));var n=r.create();r.ortho(n,0,this.width,this.height,0,0,1),r.scale(n,n,[e.drawingBufferWidth,e.drawingBufferHeight,0]);var i=this.useProgram("clippingMask");e.uniformMatrix4fv(i.uniforms.u_matrix,!1,n),this.viewportVAO.bind(t,i,this.viewportBuffer,[]),e.drawArrays(e.TRIANGLE_STRIP,0,4)},P.prototype._renderTileClippingMasks=function(t){var e=this,n=this.context,i=n.gl;n.setColorMode(w.disabled),n.setDepthMode(b.disabled);var r=1;this._tileClippingMaskIDs={};for(var o=0,a=t;o<a.length;o+=1){var s=a[o],u=e._tileClippingMaskIDs[s.key]=r++;n.setStencilMode(new x({func:i.ALWAYS,mask:0},u,255,i.KEEP,i.KEEP,i.REPLACE));var l=e.useProgram("clippingMask");i.uniformMatrix4fv(l.uniforms.u_matrix,!1,s.posMatrix),e.tileExtentVAO.bind(e.context,l,e.tileExtentBuffer,[]),i.drawArrays(i.TRIANGLE_STRIP,0,e.tileExtentBuffer.length)}},P.prototype.stencilModeForClipping=function(t){var e=this.context.gl;return new x({func:e.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,e.KEEP,e.KEEP,e.REPLACE)},P.prototype.colorModeForRenderPass=function(){var t=this.context.gl;return this._showOverdrawInspector?new w([t.CONSTANT_COLOR,t.ONE],new C(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?w.unblended:w.alphaBlended},P.prototype.depthModeForSublayer=function(t,e,n){var i=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new b(n||this.context.gl.LEQUAL,e,[i-1+this.depthRange,i])},P.prototype.render=function(t,e){var n=this;for(var r in this.style=t,this.options=e,this.lineAtlas=t.lineAtlas,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.symbolFadeChange=t.placement.symbolFadeChange(i.now()),t.sourceCaches){var o=n.style.sourceCaches[r];o.used&&o.prepare(n.context)}var a=this.style._order,s=u.filterObject(this.style.sourceCaches,function(t){return"raster"===t.getSource().type||"raster-dem"===t.getSource().type});for(var l in s)!function(t){var e=s[l],i=e.getVisibleCoordinates().map(function(t){return e.getTile(t)});E(i,n.context)}();this.renderPass="offscreen";var c,p=[];this.depthRboNeedsClear=!0;for(var h=0;h<a.length;h++){var f=n.style._layers[a[h]];f.hasOffscreenPass()&&!f.isHidden(n.transform.zoom)&&(f.source!==(c&&c.id)&&(p=[],(c=n.style.sourceCaches[f.source])&&(p=c.getVisibleCoordinates()).reverse()),p.length&&n.renderLayer(n,c,f,p))}this.context.bindFramebuffer.set(null),this.context.clear({color:e.showOverdrawInspector?C.black:C.transparent,depth:1}),this._showOverdrawInspector=e.showOverdrawInspector,this.depthRange=(t._order.length+2)*this.numSublayers*this.depthEpsilon,this.renderPass="opaque";var d,m=[];for(this.currentLayer=a.length-1;this.currentLayer>=0;this.currentLayer--){var y=n.style._layers[a[n.currentLayer]];y.source!==(d&&d.id)&&(m=[],(d=n.style.sourceCaches[y.source])&&(n.clearStencil(),m=d.getVisibleCoordinates(),d.getSource().isTileClipped&&n._renderTileClippingMasks(m))),n.renderLayer(n,d,y,m)}this.renderPass="translucent";var g,v=[];for(this.currentLayer=0;this.currentLayer<a.length;this.currentLayer++){var _=n.style._layers[a[n.currentLayer]];_.source!==(g&&g.id)&&(v=[],(g=n.style.sourceCaches[_.source])&&(n.clearStencil(),v=g.getVisibleCoordinates(),g.getSource().isTileClipped&&n._renderTileClippingMasks(v)),v.reverse()),n.renderLayer(n,g,_,v)}if(this.options.showTileBoundaries){var b=this.style.sourceCaches[Object.keys(this.style.sourceCaches)[0]];b&&O.debug(this,b,b.getVisibleCoordinates())}},P.prototype.setupOffscreenDepthRenderbuffer=function(){var t=this.context;this.depthRbo||(this.depthRbo=t.createRenderbuffer(t.gl.DEPTH_COMPONENT16,this.width,this.height))},P.prototype.renderLayer=function(t,e,n,i){n.isHidden(this.transform.zoom)||("background"===n.type||i.length)&&(this.id=n.id,O[n.type](t,e,n,i))},P.prototype.translatePosMatrix=function(t,e,n,i,o){if(!n[0]&&!n[1])return t;var a=o?"map"===i?this.transform.angle:0:"viewport"===i?-this.transform.angle:0;if(a){var u=Math.sin(a),l=Math.cos(a);n=[n[0]*l-n[1]*u,n[0]*u+n[1]*l]}var c=[o?n[0]:s(e,n[0],this.transform.zoom),o?n[1]:s(e,n[1],this.transform.zoom),0],p=new Float32Array(16);return r.translate(p,t,c),p},P.prototype.saveTileTexture=function(t){var e=this._tileTextures[t.size[0]];e?e.push(t):this._tileTextures[t.size[0]]=[t]},P.prototype.getTileTexture=function(t){var e=this._tileTextures[t];return e&&e.length>0?e.pop():null},P.prototype._createProgramCached=function(t,e){this.cache=this.cache||{};var n=""+t+(e.cacheKey||"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[n]||(this.cache[n]=new v(this.context,g[t],e,this._showOverdrawInspector)),this.cache[n]},P.prototype.useProgram=function(t,e){var n=this._createProgramCached(t,e||this.emptyProgramConfiguration);return this.context.program.set(n.program),n},e.exports=P},{"../data/array_types":39,"../data/extent":53,"../data/pos_attributes":57,"../data/program_configuration":58,"../data/raster_bounds_attributes":59,"../gl/color_mode":65,"../gl/context":66,"../gl/depth_mode":67,"../gl/stencil_mode":70,"../shaders":97,"../source/pixels_to_tile_units":104,"../source/source_cache":111,"../style-spec/util/color":153,"../symbol/cross_tile_symbol_index":218,"../util/browser":252,"../util/util":275,"./draw_background":74,"./draw_circle":75,"./draw_debug":77,"./draw_fill":78,"./draw_fill_extrusion":79,"./draw_heatmap":80,"./draw_hillshade":81,"./draw_line":82,"./draw_raster":83,"./draw_symbol":84,"./program":92,"./texture":93,"./tile_mask":94,"./vertex_array_object":95,"@mapbox/gl-matrix":2}],91:[function(t,e,n){"use strict";var i=t("../source/pixels_to_tile_units");n.isPatternMissing=function(t,e){if(!t)return!1;var n=e.imageManager.getPattern(t.from),i=e.imageManager.getPattern(t.to);return!n||!i},n.prepare=function(t,e,n){var i=e.context,r=i.gl,o=e.imageManager.getPattern(t.from),a=e.imageManager.getPattern(t.to);r.uniform1i(n.uniforms.u_image,0),r.uniform2fv(n.uniforms.u_pattern_tl_a,o.tl),r.uniform2fv(n.uniforms.u_pattern_br_a,o.br),r.uniform2fv(n.uniforms.u_pattern_tl_b,a.tl),r.uniform2fv(n.uniforms.u_pattern_br_b,a.br);var s=e.imageManager.getPixelSize();r.uniform2fv(n.uniforms.u_texsize,[s.width,s.height]),r.uniform1f(n.uniforms.u_mix,t.t),r.uniform2fv(n.uniforms.u_pattern_size_a,o.displaySize),r.uniform2fv(n.uniforms.u_pattern_size_b,a.displaySize),r.uniform1f(n.uniforms.u_scale_a,t.fromScale),r.uniform1f(n.uniforms.u_scale_b,t.toScale),i.activeTexture.set(r.TEXTURE0),e.imageManager.bind(e.context)},n.setTile=function(t,e,n){var r=e.context.gl;r.uniform1f(n.uniforms.u_tile_units_to_pixels,1/i(t,1,e.transform.tileZoom));var o=Math.pow(2,t.tileID.overscaledZ),a=t.tileSize*Math.pow(2,e.transform.tileZoom)/o,s=a*(t.tileID.canonical.x+t.tileID.wrap*o),u=a*t.tileID.canonical.y;r.uniform2f(n.uniforms.u_pixel_coord_upper,s>>16,u>>16),r.uniform2f(n.uniforms.u_pixel_coord_lower,65535&s,65535&u)}},{"../source/pixels_to_tile_units":104}],92:[function(t,e,n){"use strict";var i=t("../util/browser"),r=t("../shaders"),o=(t("../data/program_configuration"),t("./vertex_array_object")),a=(t("../gl/context"),function(t,e,n,o){var a=this,s=t.gl;this.program=s.createProgram();var u=n.defines().concat("#define DEVICE_PIXEL_RATIO "+i.devicePixelRatio.toFixed(1));o&&u.push("#define OVERDRAW_INSPECTOR;");var l=u.concat(r.prelude.fragmentSource,e.fragmentSource).join("\n"),c=u.concat(r.prelude.vertexSource,e.vertexSource).join("\n"),p=s.createShader(s.FRAGMENT_SHADER);s.shaderSource(p,l),s.compileShader(p),s.attachShader(this.program,p);var h=s.createShader(s.VERTEX_SHADER);s.shaderSource(h,c),s.compileShader(h),s.attachShader(this.program,h);for(var f=n.layoutAttributes||[],d=0;d<f.length;d++)s.bindAttribLocation(a.program,d,f[d].name);s.linkProgram(this.program),this.numAttributes=s.getProgramParameter(this.program,s.ACTIVE_ATTRIBUTES),this.attributes={},this.uniforms={};for(var m=0;m<this.numAttributes;m++){var y=s.getActiveAttrib(a.program,m);y&&(a.attributes[y.name]=s.getAttribLocation(a.program,y.name))}for(var g=s.getProgramParameter(this.program,s.ACTIVE_UNIFORMS),v=0;v<g;v++){var _=s.getActiveUniform(a.program,v);_&&(a.uniforms[_.name]=s.getUniformLocation(a.program,_.name))}});a.prototype.draw=function(t,e,n,i,r,a,s,u,l){for(var c,p=t.gl,h=(c={},c[p.LINES]=2,c[p.TRIANGLES]=3,c)[e],f=0,d=a.get();f<d.length;f+=1){var m=d[f],y=m.vaos||(m.vaos={});(y[n]||(y[n]=new o)).bind(t,this,i,s?s.getPaintVertexBuffers():[],r,m.vertexOffset,u,l),p.drawElements(e,m.primitiveLength*h,p.UNSIGNED_SHORT,m.primitiveOffset*h*2)}},e.exports=a},{"../data/program_configuration":58,"../gl/context":66,"../shaders":97,"../util/browser":252,"./vertex_array_object":95}],93:[function(t,e,n){"use strict";var i=t("../util/window"),r=i.HTMLImageElement,o=i.HTMLCanvasElement,a=i.HTMLVideoElement,s=i.ImageData,u=function(t,e,n,i){this.context=t,this.size=[e.width,e.height],this.format=n,this.texture=t.gl.createTexture(),this.update(e,i)};u.prototype.update=function(t,e){var n=t.width,i=t.height;this.size=[n,i];var u=this.context,l=u.gl;l.bindTexture(l.TEXTURE_2D,this.texture),u.pixelStoreUnpack.set(1),this.format===l.RGBA&&!1!==e&&u.pixelStoreUnpackPremultiplyAlpha.set(!0),t instanceof r||t instanceof o||t instanceof a||t instanceof s?l.texImage2D(l.TEXTURE_2D,0,this.format,this.format,l.UNSIGNED_BYTE,t):l.texImage2D(l.TEXTURE_2D,0,this.format,n,i,0,this.format,l.UNSIGNED_BYTE,t.data)},u.prototype.bind=function(t,e,n){var i=this.context.gl;i.bindTexture(i.TEXTURE_2D,this.texture),t!==this.filter&&(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,t),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,n||t),this.filter=t),e!==this.wrap&&(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,e),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,e),this.wrap=e)},u.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null},e.exports=u},{"../util/window":254}],94:[function(t,e,n){"use strict";function i(t,e,n,r,o){for(var s=0;s<n.length;s++){var u=n[s];if(r.isLessThan(u.tileID))break;if(e.key===u.tileID.key)return;if(u.tileID.isChildOf(e)){for(var l=e.children(1/0),c=0;c<l.length;c++)i(t,l[c],n.slice(s),r,o);return}}var p=e.overscaledZ-t.overscaledZ,h=new a(p,e.canonical.x-(t.canonical.x<<p),e.canonical.y-(t.canonical.y<<p));o[h.key]=o[h.key]||h}var r=t("../source/tile_id"),o=r.OverscaledTileID,a=r.CanonicalTileID;e.exports=function(t,e){for(var n=t.sort(function(t,e){return t.tileID.isLessThan(e.tileID)?-1:e.tileID.isLessThan(t.tileID)?1:0}),r=0;r<n.length;r++){var a={},s=n[r],u=n.slice(r+1);i(s.tileID.wrapped(),s.tileID,u,new o(0,s.tileID.wrap+1,0,0,0),a),s.setMask(a,e)}}},{"../source/tile_id":114}],95:[function(t,e,n){"use strict";var i=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};i.prototype.bind=function(t,e,n,i,r,o,a,s){this.context=t;for(var u=this.boundPaintVertexBuffers.length!==i.length,l=0;!u&&l<i.length;l++)this.boundPaintVertexBuffers[l]!==i[l]&&(u=!0);t.extVertexArrayObject&&this.vao&&this.boundProgram===e&&this.boundLayoutVertexBuffer===n&&!u&&this.boundIndexBuffer===r&&this.boundVertexOffset===o&&this.boundDynamicVertexBuffer===a&&this.boundDynamicVertexBuffer2===s?(t.bindVertexArrayOES.set(this.vao),a&&a.bind(),r&&r.dynamicDraw&&r.bind(),s&&s.bind()):this.freshBind(e,n,i,r,o,a,s)},i.prototype.freshBind=function(t,e,n,i,r,o,a){var s,u=t.numAttributes,l=this.context,c=l.gl;if(l.extVertexArrayObject)this.vao&&this.destroy(),this.vao=l.extVertexArrayObject.createVertexArrayOES(),l.bindVertexArrayOES.set(this.vao),s=0,this.boundProgram=t,this.boundLayoutVertexBuffer=e,this.boundPaintVertexBuffers=n,this.boundIndexBuffer=i,this.boundVertexOffset=r,this.boundDynamicVertexBuffer=o,this.boundDynamicVertexBuffer2=a;else{s=l.currentNumAttributes||0;for(var p=u;p<s;p++)c.disableVertexAttribArray(p)}e.enableAttributes(c,t);for(var h=0,f=n;h<f.length;h+=1)f[h].enableAttributes(c,t);o&&o.enableAttributes(c,t),a&&a.enableAttributes(c,t),e.bind(),e.setVertexAttribPointers(c,t,r);for(var d=0,m=n;d<m.length;d+=1){var y=m[d];y.bind(),y.setVertexAttribPointers(c,t,r)}o&&(o.bind(),o.setVertexAttribPointers(c,t,r)),i&&i.bind(),a&&(a.bind(),a.setVertexAttribPointers(c,t,r)),l.currentNumAttributes=u},i.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)},e.exports=i},{}],96:[function(t,e,n){"use strict";var i=t("../util/util");n.packUint8ToFloat=function(t,e){return 256*(t=i.clamp(Math.floor(t),0,255))+i.clamp(Math.floor(e),0,255)}},{"../util/util":275}],97:[function(t,e,n){"use strict";var i={prelude:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif\n\n// Unpack a pair of values that have been packed into a single float.\n// The packed values are assumed to be 8-bit unsigned integers, and are\n// packed like so:\n// packedValue = floor(input[0]) * 256 + input[1],\nvec2 unpack_float(const float packedValue) {\n    int packedIntValue = int(packedValue);\n    int v0 = packedIntValue / 256;\n    return vec2(v0, packedIntValue - v0 * 256);\n}\n\nvec2 unpack_opacity(const float packedOpacity) {\n    int intOpacity = int(packedOpacity) / 2;\n    return vec2(float(intOpacity) / 127.0, mod(packedOpacity, 2.0));\n}\n\n// To minimize the number of attributes needed, we encode a 4-component\n// color into a pair of floats (i.e. a vec2) as follows:\n// [ floor(color.r * 255) * 256 + color.g * 255,\n//   floor(color.b * 255) * 256 + color.g * 255 ]\nvec4 decode_color(const vec2 encodedColor) {\n    return vec4(\n        unpack_float(encodedColor[0]) / 255.0,\n        unpack_float(encodedColor[1]) / 255.0\n    );\n}\n\n// Unpack a pair of paint values and interpolate between them.\nfloat unpack_mix_vec2(const vec2 packedValue, const float t) {\n    return mix(packedValue[0], packedValue[1], t);\n}\n\n// Unpack a pair of paint values and interpolate between them.\nvec4 unpack_mix_vec4(const vec4 packedColors, const float t) {\n    vec4 minColor = decode_color(vec2(packedColors[0], packedColors[1]));\n    vec4 maxColor = decode_color(vec2(packedColors[2], packedColors[3]));\n    return mix(minColor, maxColor, t);\n}\n\n// The offset depends on how many pixels are between the world origin and the edge of the tile:\n// vec2 offset = mod(pixel_coord, size)\n//\n// At high zoom levels there are a ton of pixels between the world origin and the edge of the tile.\n// The glsl spec only guarantees 16 bits of precision for highp floats. We need more than that.\n//\n// The pixel_coord is passed in as two 16 bit values:\n// pixel_coord_upper = floor(pixel_coord / 2^16)\n// pixel_coord_lower = mod(pixel_coord, 2^16)\n//\n// The offset is calculated in a series of steps that should preserve this precision:\nvec2 get_pattern_pos(const vec2 pixel_coord_upper, const vec2 pixel_coord_lower,\n    const vec2 pattern_size, const float tile_units_to_pixels, const vec2 pos) {\n\n    vec2 offset = mod(mod(mod(pixel_coord_upper, pattern_size) * 256.0, pattern_size) * 256.0 + pixel_coord_lower, pattern_size);\n    return (tile_units_to_pixels * pos + offset) / pattern_size;\n}\n"},background:{fragmentSource:"uniform vec4 u_color;\nuniform float u_opacity;\n\nvoid main() {\n    gl_FragColor = u_color * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},backgroundPattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\nuniform float u_opacity;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\nvoid main() {\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    gl_FragColor = mix(color1, color2, u_mix) * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\n}\n"},circle:{fragmentSource:"#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\n\nvarying vec3 v_data;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize mediump float radius\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize highp vec4 stroke_color\n    #pragma mapbox: initialize mediump float stroke_width\n    #pragma mapbox: initialize lowp float stroke_opacity\n\n    vec2 extrude = v_data.xy;\n    float extrude_length = length(extrude);\n\n    lowp float antialiasblur = v_data.z;\n    float antialiased_blur = -max(blur, antialiasblur);\n\n    float opacity_t = smoothstep(0.0, antialiased_blur, extrude_length - 1.0);\n\n    float color_t = stroke_width < 0.01 ? 0.0 : smoothstep(\n        antialiased_blur,\n        0.0,\n        extrude_length - radius / (radius + stroke_width)\n    );\n\n    gl_FragColor = opacity_t * mix(color * opacity, stroke_color * stroke_opacity, color_t);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform bool u_scale_with_map;\nuniform bool u_pitch_with_map;\nuniform vec2 u_extrude_scale;\nuniform highp float u_camera_to_center_distance;\n\nattribute vec2 a_pos;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\n\nvarying vec3 v_data;\n\nvoid main(void) {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize mediump float radius\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize highp vec4 stroke_color\n    #pragma mapbox: initialize mediump float stroke_width\n    #pragma mapbox: initialize lowp float stroke_opacity\n\n    // unencode the extrusion vector that we snuck into the a_pos vector\n    vec2 extrude = vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\n\n    // multiply a_pos by 0.5, since we had it * 2 in order to sneak\n    // in extrusion data\n    vec2 circle_center = floor(a_pos * 0.5);\n    if (u_pitch_with_map) {\n        vec2 corner_position = circle_center;\n        if (u_scale_with_map) {\n            corner_position += extrude * (radius + stroke_width) * u_extrude_scale;\n        } else {\n            // Pitching the circle with the map effectively scales it with the map\n            // To counteract the effect for pitch-scale: viewport, we rescale the\n            // whole circle based on the pitch scaling effect at its central point\n            vec4 projected_center = u_matrix * vec4(circle_center, 0, 1);\n            corner_position += extrude * (radius + stroke_width) * u_extrude_scale * (projected_center.w / u_camera_to_center_distance);\n        }\n\n        gl_Position = u_matrix * vec4(corner_position, 0, 1);\n    } else {\n        gl_Position = u_matrix * vec4(circle_center, 0, 1);\n\n        if (u_scale_with_map) {\n            gl_Position.xy += extrude * (radius + stroke_width) * u_extrude_scale * u_camera_to_center_distance;\n        } else {\n            gl_Position.xy += extrude * (radius + stroke_width) * u_extrude_scale * gl_Position.w;\n        }\n    }\n\n    // This is a minimum blur distance that serves as a faux-antialiasing for\n    // the circle. since blur is a ratio of the circle's size and the intent is\n    // to keep the blur at roughly 1px, the two are inversely related.\n    lowp float antialiasblur = 1.0 / DEVICE_PIXEL_RATIO / (radius + stroke_width);\n\n    v_data = vec3(extrude.x, extrude.y, antialiasblur);\n}\n"},clippingMask:{fragmentSource:"void main() {\n    gl_FragColor = vec4(1.0);\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},heatmap:{fragmentSource:"#pragma mapbox: define highp float weight\n\nuniform highp float u_intensity;\nvarying vec2 v_extrude;\n\n// Gaussian kernel coefficient: 1 / sqrt(2 * PI)\n#define GAUSS_COEF 0.3989422804014327\n\nvoid main() {\n    #pragma mapbox: initialize highp float weight\n\n    // Kernel density estimation with a Gaussian kernel of size 5x5\n    float d = -0.5 * 3.0 * 3.0 * dot(v_extrude, v_extrude);\n    float val = weight * u_intensity * GAUSS_COEF * exp(d);\n\n    gl_FragColor = vec4(val, 1.0, 1.0, 1.0);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\n\nuniform mat4 u_matrix;\nuniform float u_extrude_scale;\nuniform float u_opacity;\nuniform float u_intensity;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_extrude;\n\n// Effective \"0\" in the kernel density texture to adjust the kernel size to;\n// this empirically chosen number minimizes artifacts on overlapping kernels\n// for typical heatmap cases (assuming clustered source)\nconst highp float ZERO = 1.0 / 255.0 / 16.0;\n\n// Gaussian kernel coefficient: 1 / sqrt(2 * PI)\n#define GAUSS_COEF 0.3989422804014327\n\nvoid main(void) {\n    #pragma mapbox: initialize highp float weight\n    #pragma mapbox: initialize mediump float radius\n\n    // unencode the extrusion vector that we snuck into the a_pos vector\n    vec2 unscaled_extrude = vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\n\n    // This 'extrude' comes in ranging from [-1, -1], to [1, 1].  We'll use\n    // it to produce the vertices of a square mesh framing the point feature\n    // we're adding to the kernel density texture.  We'll also pass it as\n    // a varying, so that the fragment shader can determine the distance of\n    // each fragment from the point feature.\n    // Before we do so, we need to scale it up sufficiently so that the\n    // kernel falls effectively to zero at the edge of the mesh.\n    // That is, we want to know S such that\n    // weight * u_intensity * GAUSS_COEF * exp(-0.5 * 3.0^2 * S^2) == ZERO\n    // Which solves to:\n    // S = sqrt(-2.0 * log(ZERO / (weight * u_intensity * GAUSS_COEF))) / 3.0\n    float S = sqrt(-2.0 * log(ZERO / weight / u_intensity / GAUSS_COEF)) / 3.0;\n\n    // Pass the varying in units of radius\n    v_extrude = S * unscaled_extrude;\n\n    // Scale by radius and the zoom-based scale factor to produce actual\n    // mesh position\n    vec2 extrude = v_extrude * radius * u_extrude_scale;\n\n    // multiply a_pos by 0.5, since we had it * 2 in order to sneak\n    // in extrusion data\n    vec4 pos = vec4(floor(a_pos * 0.5) + extrude, 0, 1);\n\n    gl_Position = u_matrix * pos;\n}\n"},heatmapTexture:{fragmentSource:"uniform sampler2D u_image;\nuniform sampler2D u_color_ramp;\nuniform float u_opacity;\nvarying vec2 v_pos;\n\nvoid main() {\n    float t = texture2D(u_image, v_pos).r;\n    vec4 color = texture2D(u_color_ramp, vec2(t, 0.5));\n    gl_FragColor = color * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(0.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_world;\nattribute vec2 a_pos;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos * u_world, 0, 1);\n\n    v_pos.x = a_pos.x;\n    v_pos.y = 1.0 - a_pos.y;\n}\n"},collisionBox:{fragmentSource:"\nvarying float v_placed;\nvarying float v_notUsed;\n\nvoid main() {\n\n    float alpha = 0.5;\n\n    // Red = collision, hide label\n    gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0) * alpha;\n\n    // Blue = no collision, label is showing\n    if (v_placed > 0.5) {\n        gl_FragColor = vec4(0.0, 0.0, 1.0, 0.5) * alpha;\n    }\n\n    if (v_notUsed > 0.5) {\n        // This box not used, fade it out\n        gl_FragColor *= .1;\n    }\n}",vertexSource:"attribute vec2 a_pos;\nattribute vec2 a_anchor_pos;\nattribute vec2 a_extrude;\nattribute vec2 a_placed;\n\nuniform mat4 u_matrix;\nuniform vec2 u_extrude_scale;\nuniform float u_camera_to_center_distance;\n\nvarying float v_placed;\nvarying float v_notUsed;\n\nvoid main() {\n    vec4 projectedPoint = u_matrix * vec4(a_anchor_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    highp float collision_perspective_ratio = 0.5 + 0.5 * (u_camera_to_center_distance / camera_to_anchor_distance);\n\n    gl_Position = u_matrix * vec4(a_pos, 0.0, 1.0);\n    gl_Position.xy += a_extrude * u_extrude_scale * gl_Position.w * collision_perspective_ratio;\n\n    v_placed = a_placed.x;\n    v_notUsed = a_placed.y;\n}\n"},collisionCircle:{fragmentSource:"\nvarying float v_placed;\nvarying float v_notUsed;\nvarying float v_radius;\nvarying vec2 v_extrude;\nvarying vec2 v_extrude_scale;\n\nvoid main() {\n    float alpha = 0.5;\n\n    // Red = collision, hide label\n    vec4 color = vec4(1.0, 0.0, 0.0, 1.0) * alpha;\n\n    // Blue = no collision, label is showing\n    if (v_placed > 0.5) {\n        color = vec4(0.0, 0.0, 1.0, 0.5) * alpha;\n    }\n\n    if (v_notUsed > 0.5) {\n        // This box not used, fade it out\n        color *= .2;\n    }\n\n    float extrude_scale_length = length(v_extrude_scale);\n    float extrude_length = length(v_extrude) * extrude_scale_length;\n    float stroke_width = 15.0 * extrude_scale_length;\n    float radius = v_radius * extrude_scale_length;\n\n    float distance_to_edge = abs(extrude_length - radius);\n    float opacity_t = smoothstep(-stroke_width, 0.0, -distance_to_edge);\n\n    gl_FragColor = opacity_t * color;\n}\n",vertexSource:"attribute vec2 a_pos;\nattribute vec2 a_anchor_pos;\nattribute vec2 a_extrude;\nattribute vec2 a_placed;\n\nuniform mat4 u_matrix;\nuniform vec2 u_extrude_scale;\nuniform float u_camera_to_center_distance;\n\nvarying float v_placed;\nvarying float v_notUsed;\nvarying float v_radius;\n\nvarying vec2 v_extrude;\nvarying vec2 v_extrude_scale;\n\nvoid main() {\n    vec4 projectedPoint = u_matrix * vec4(a_anchor_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    highp float collision_perspective_ratio = 0.5 + 0.5 * (u_camera_to_center_distance / camera_to_anchor_distance);\n\n    gl_Position = u_matrix * vec4(a_pos, 0.0, 1.0);\n\n    highp float padding_factor = 1.2; // Pad the vertices slightly to make room for anti-alias blur\n    gl_Position.xy += a_extrude * u_extrude_scale * padding_factor * gl_Position.w * collision_perspective_ratio;\n\n    v_placed = a_placed.x;\n    v_notUsed = a_placed.y;\n    v_radius = abs(a_extrude.y); // We don't pitch the circles, so both units of the extrusion vector are equal in magnitude to the radius\n\n    v_extrude = a_extrude * padding_factor;\n    v_extrude_scale = u_extrude_scale * u_camera_to_center_distance * collision_perspective_ratio;\n}\n"},debug:{fragmentSource:"uniform highp vec4 u_color;\n\nvoid main() {\n    gl_FragColor = u_color;\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},fill:{fragmentSource:"#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_FragColor = color * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},fillOutline:{fragmentSource:"#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_pos;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    float dist = length(v_pos - gl_FragCoord.xy);\n    float alpha = 1.0 - smoothstep(0.0, 1.0, dist);\n    gl_FragColor = outline_color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\nuniform vec2 u_world;\n\nvarying vec2 v_pos;\n\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n}\n"},fillOutlinePattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    // find distance to outline for alpha interpolation\n\n    float dist = length(v_pos - gl_FragCoord.xy);\n    float alpha = 1.0 - smoothstep(0.0, 1.0, dist);\n\n\n    gl_FragColor = mix(color1, color2, u_mix) * alpha * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_world;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\n\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n}\n"},fillPattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    gl_FragColor = mix(color1, color2, u_mix) * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\n}\n"},fillExtrusion:{fragmentSource:"varying vec4 v_color;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define highp vec4 color\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n    #pragma mapbox: initialize highp vec4 color\n\n    gl_FragColor = v_color;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec3 u_lightcolor;\nuniform lowp vec3 u_lightpos;\nuniform lowp float u_lightintensity;\n\nattribute vec2 a_pos;\nattribute vec4 a_normal_ed;\n\nvarying vec4 v_color;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\n#pragma mapbox: define highp vec4 color\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n    #pragma mapbox: initialize highp vec4 color\n\n    vec3 normal = a_normal_ed.xyz;\n\n    base = max(0.0, base);\n    height = max(0.0, height);\n\n    float t = mod(normal.x, 2.0);\n\n    gl_Position = u_matrix * vec4(a_pos, t > 0.0 ? height : base, 1);\n\n    // Relative luminance (how dark/bright is the surface color?)\n    float colorvalue = color.r * 0.2126 + color.g * 0.7152 + color.b * 0.0722;\n\n    v_color = vec4(0.0, 0.0, 0.0, 1.0);\n\n    // Add slight ambient lighting so no extrusions are totally black\n    vec4 ambientlight = vec4(0.03, 0.03, 0.03, 1.0);\n    color += ambientlight;\n\n    // Calculate cos(theta), where theta is the angle between surface normal and diffuse light ray\n    float directional = clamp(dot(normal / 16384.0, u_lightpos), 0.0, 1.0);\n\n    // Adjust directional so that\n    // the range of values for highlight/shading is narrower\n    // with lower light intensity\n    // and with lighter/brighter surface colors\n    directional = mix((1.0 - u_lightintensity), max((1.0 - colorvalue + u_lightintensity), 1.0), directional);\n\n    // Add gradient along z axis of side surfaces\n    if (normal.y != 0.0) {\n        directional *= clamp((t + base) * pow(height / 150.0, 0.5), mix(0.7, 0.98, 1.0 - u_lightintensity), 1.0);\n    }\n\n    // Assign final color based on surface + ambient light color, diffuse light directional, and light color\n    // with lower bounds adjusted to hue of light\n    // so that shading is tinted with the complementary (opposite) color to the light color\n    v_color.r += clamp(color.r * directional * u_lightcolor.r, mix(0.0, 0.3, 1.0 - u_lightcolor.r), 1.0);\n    v_color.g += clamp(color.g * directional * u_lightcolor.g, mix(0.0, 0.3, 1.0 - u_lightcolor.g), 1.0);\n    v_color.b += clamp(color.b * directional * u_lightcolor.b, mix(0.0, 0.3, 1.0 - u_lightcolor.b), 1.0);\n}\n"},fillExtrusionPattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec4 v_lighting;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    vec4 mixedColor = mix(color1, color2, u_mix);\n\n    gl_FragColor = mixedColor * v_lighting;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\nuniform float u_height_factor;\n\nuniform vec3 u_lightcolor;\nuniform lowp vec3 u_lightpos;\nuniform lowp float u_lightintensity;\n\nattribute vec2 a_pos;\nattribute vec4 a_normal_ed;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec4 v_lighting;\nvarying float v_directional;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n\n    vec3 normal = a_normal_ed.xyz;\n    float edgedistance = a_normal_ed.w;\n\n    base = max(0.0, base);\n    height = max(0.0, height);\n\n    float t = mod(normal.x, 2.0);\n    float z = t > 0.0 ? height : base;\n\n    gl_Position = u_matrix * vec4(a_pos, z, 1);\n\n    vec2 pos = normal.x == 1.0 && normal.y == 0.0 && normal.z == 16384.0\n        ? a_pos // extrusion top\n        : vec2(edgedistance, z * u_height_factor); // extrusion side\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, pos);\n\n    v_lighting = vec4(0.0, 0.0, 0.0, 1.0);\n    float directional = clamp(dot(normal / 16383.0, u_lightpos), 0.0, 1.0);\n    directional = mix((1.0 - u_lightintensity), max((0.5 + u_lightintensity), 1.0), directional);\n\n    if (normal.y != 0.0) {\n        directional *= clamp((t + base) * pow(height / 150.0, 0.5), mix(0.7, 0.98, 1.0 - u_lightintensity), 1.0);\n    }\n\n    v_lighting.rgb += clamp(directional * u_lightcolor, mix(vec3(0.0), vec3(0.3), 1.0 - u_lightcolor), vec3(1.0));\n}\n"},extrusionTexture:{fragmentSource:"uniform sampler2D u_image;\nuniform float u_opacity;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_FragColor = texture2D(u_image, v_pos) * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(0.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_world;\nattribute vec2 a_pos;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos * u_world, 0, 1);\n\n    v_pos.x = a_pos.x;\n    v_pos.y = 1.0 - a_pos.y;\n}\n"},hillshadePrepare:{fragmentSource:"#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform sampler2D u_image;\nvarying vec2 v_pos;\nuniform vec2 u_dimension;\nuniform float u_zoom;\n\nfloat getElevation(vec2 coord, float bias) {\n    // Convert encoded elevation value to meters\n    vec4 data = texture2D(u_image, coord) * 255.0;\n    return (data.r + data.g * 256.0 + data.b * 256.0 * 256.0) / 4.0;\n}\n\nvoid main() {\n    vec2 epsilon = 1.0 / u_dimension;\n\n    // queried pixels:\n    // +-----------+\n    // |   |   |   |\n    // | a | b | c |\n    // |   |   |   |\n    // +-----------+\n    // |   |   |   |\n    // | d | e | f |\n    // |   |   |   |\n    // +-----------+\n    // |   |   |   |\n    // | g | h | i |\n    // |   |   |   |\n    // +-----------+\n\n    float a = getElevation(v_pos + vec2(-epsilon.x, -epsilon.y), 0.0);\n    float b = getElevation(v_pos + vec2(0, -epsilon.y), 0.0);\n    float c = getElevation(v_pos + vec2(epsilon.x, -epsilon.y), 0.0);\n    float d = getElevation(v_pos + vec2(-epsilon.x, 0), 0.0);\n    float e = getElevation(v_pos, 0.0);\n    float f = getElevation(v_pos + vec2(epsilon.x, 0), 0.0);\n    float g = getElevation(v_pos + vec2(-epsilon.x, epsilon.y), 0.0);\n    float h = getElevation(v_pos + vec2(0, epsilon.y), 0.0);\n    float i = getElevation(v_pos + vec2(epsilon.x, epsilon.y), 0.0);\n\n    // here we divide the x and y slopes by 8 * pixel size\n    // where pixel size (aka meters/pixel) is:\n    // circumference of the world / (pixels per tile * number of tiles)\n    // which is equivalent to: 8 * 40075016.6855785 / (512 * pow(2, u_zoom))\n    // which can be reduced to: pow(2, 19.25619978527 - u_zoom)\n    // we want to vertically exaggerate the hillshading though, because otherwise\n    // it is barely noticeable at low zooms. to do this, we multiply this by some\n    // scale factor pow(2, (u_zoom - 14) * a) where a is an arbitrary value and 14 is the\n    // maxzoom of the tile source. here we use a=0.3 which works out to the\n    // expression below. see nickidlugash's awesome breakdown for more info\n    // https://github.com/mapbox/mapbox-gl-js/pull/5286#discussion_r148419556\n    float exaggeration = u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;\n\n    vec2 deriv = vec2(\n        (c + f + f + i) - (a + d + d + g),\n        (g + h + h + i) - (a + b + b + c)\n    ) /  pow(2.0, (u_zoom - 14.0) * exaggeration + 19.2562 - u_zoom);\n\n    gl_FragColor = clamp(vec4(\n        deriv.x / 2.0 + 0.5,\n        deriv.y / 2.0 + 0.5,\n        1.0,\n        1.0), 0.0, 1.0);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = (a_texture_pos / 8192.0) / 2.0 + 0.25;\n}\n"},hillshade:{fragmentSource:"uniform sampler2D u_image;\nvarying vec2 v_pos;\n\nuniform vec2 u_latrange;\nuniform vec2 u_light;\nuniform vec4 u_shadow;\nuniform vec4 u_highlight;\nuniform vec4 u_accent;\n\n#define PI 3.141592653589793\n\nvoid main() {\n    vec4 pixel = texture2D(u_image, v_pos);\n\n    vec2 deriv = ((pixel.rg * 2.0) - 1.0);\n\n    // We divide the slope by a scale factor based on the cosin of the pixel's approximate latitude\n    // to account for mercator projection distortion. see #4807 for details\n    float scaleFactor = cos(radians((u_latrange[0] - u_latrange[1]) * (1.0 - v_pos.y) + u_latrange[1]));\n    // We also multiply the slope by an arbitrary z-factor of 1.25\n    float slope = atan(1.25 * length(deriv) / scaleFactor);\n    float aspect = deriv.x != 0.0 ? atan(deriv.y, -deriv.x) : PI / 2.0 * (deriv.y > 0.0 ? 1.0 : -1.0);\n\n    float intensity = u_light.x;\n    // We add PI to make this property match the global light object, which adds PI/2 to the light's azimuthal\n    // position property to account for 0deg corresponding to north/the top of the viewport in the style spec\n    // and the original shader was written to accept (-illuminationDirection - 90) as the azimuthal.\n    float azimuth = u_light.y + PI;\n\n    // We scale the slope exponentially based on intensity, using a calculation similar to\n    // the exponential interpolation function in the style spec:\n    // https://github.com/mapbox/mapbox-gl-js/blob/master/src/style-spec/expression/definitions/interpolate.js#L217-L228\n    // so that higher intensity values create more opaque hillshading.\n    float base = 1.875 - intensity * 1.75;\n    float maxValue = 0.5 * PI;\n    float scaledSlope = intensity != 0.5 ? ((pow(base, slope) - 1.0) / (pow(base, maxValue) - 1.0)) * maxValue : slope;\n\n    // The accent color is calculated with the cosine of the slope while the shade color is calculated with the sine\n    // so that the accent color's rate of change eases in while the shade color's eases out.\n    float accent = cos(scaledSlope);\n    // We multiply both the accent and shade color by a clamped intensity value\n    // so that intensities >= 0.5 do not additionally affect the color values\n    // while intensity values < 0.5 make the overall color more transparent.\n    vec4 accent_color = (1.0 - accent) * u_accent * clamp(intensity * 2.0, 0.0, 1.0);\n    float shade = abs(mod((aspect + azimuth) / PI + 0.5, 2.0) - 1.0);\n    vec4 shade_color = mix(u_shadow, u_highlight, shade) * sin(scaledSlope) * clamp(intensity * 2.0, 0.0, 1.0);\n    gl_FragColor = accent_color * (1.0 - shade_color.a) + shade_color;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = a_texture_pos / 8192.0;\n}\n"},line:{fragmentSource:"#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_width2;\nvarying vec2 v_normal;\nvarying float v_gamma_scale;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\n// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float width\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + ANTIALIASING;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_width2 = vec2(outset, inset);\n}\n"},linePattern:{fragmentSource:"uniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_fade;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    float x_a = mod(v_linesofar / u_pattern_size_a.x, 1.0);\n    float x_b = mod(v_linesofar / u_pattern_size_b.x, 1.0);\n    float y_a = 0.5 + (v_normal.y * v_width2.s / u_pattern_size_a.y);\n    float y_b = 0.5 + (v_normal.y * v_width2.s / u_pattern_size_b.y);\n    vec2 pos_a = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, vec2(x_a, y_a));\n    vec2 pos_b = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, vec2(x_b, y_b));\n\n    vec4 color = mix(texture2D(u_image, pos_a), texture2D(u_image, pos_b), u_fade);\n\n    gl_FragColor = color * alpha * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\n// We scale the distance before adding it to the buffers so that we can store\n// long distances for long segments. Use this value to unscale the distance.\n#define LINE_DISTANCE_SCALE 2.0\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize mediump float width\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n    float a_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\n\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + ANTIALIASING;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_linesofar = a_linesofar;\n    v_width2 = vec2(outset, inset);\n}\n"},lineSDF:{fragmentSource:"\nuniform sampler2D u_image;\nuniform float u_sdfgamma;\nuniform float u_mix;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float width\n    #pragma mapbox: initialize lowp float floorwidth\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    float sdfdist_a = texture2D(u_image, v_tex_a).a;\n    float sdfdist_b = texture2D(u_image, v_tex_b).a;\n    float sdfdist = mix(sdfdist_a, sdfdist_b, u_mix);\n    alpha *= smoothstep(0.5 - u_sdfgamma / floorwidth, 0.5 + u_sdfgamma / floorwidth, sdfdist);\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\n// We scale the distance before adding it to the buffers so that we can store\n// long distances for long segments. Use this value to unscale the distance.\n#define LINE_DISTANCE_SCALE 2.0\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_patternscale_a;\nuniform float u_tex_y_a;\nuniform vec2 u_patternscale_b;\nuniform float u_tex_y_b;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float width\n    #pragma mapbox: initialize lowp float floorwidth\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n    float a_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\n\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + ANTIALIASING;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist =outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_tex_a = vec2(a_linesofar * u_patternscale_a.x / floorwidth, normal.y * u_patternscale_a.y + u_tex_y_a);\n    v_tex_b = vec2(a_linesofar * u_patternscale_b.x / floorwidth, normal.y * u_patternscale_b.y + u_tex_y_b);\n\n    v_width2 = vec2(outset, inset);\n}\n"},raster:{fragmentSource:"uniform float u_fade_t;\nuniform float u_opacity;\nuniform sampler2D u_image0;\nuniform sampler2D u_image1;\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nuniform float u_brightness_low;\nuniform float u_brightness_high;\n\nuniform float u_saturation_factor;\nuniform float u_contrast_factor;\nuniform vec3 u_spin_weights;\n\nvoid main() {\n\n    // read and cross-fade colors from the main and parent tiles\n    vec4 color0 = texture2D(u_image0, v_pos0);\n    vec4 color1 = texture2D(u_image1, v_pos1);\n    if (color0.a > 0.0) {\n        color0.rgb = color0.rgb / color0.a;\n    }\n    if (color1.a > 0.0) {\n        color1.rgb = color1.rgb / color1.a;\n    }\n    vec4 color = mix(color0, color1, u_fade_t);\n    color.a *= u_opacity;\n    vec3 rgb = color.rgb;\n\n    // spin\n    rgb = vec3(\n        dot(rgb, u_spin_weights.xyz),\n        dot(rgb, u_spin_weights.zxy),\n        dot(rgb, u_spin_weights.yzx));\n\n    // saturation\n    float average = (color.r + color.g + color.b) / 3.0;\n    rgb += (average - rgb) * u_saturation_factor;\n\n    // contrast\n    rgb = (rgb - 0.5) * u_contrast_factor + 0.5;\n\n    // brightness\n    vec3 u_high_vec = vec3(u_brightness_low, u_brightness_low, u_brightness_low);\n    vec3 u_low_vec = vec3(u_brightness_high, u_brightness_high, u_brightness_high);\n\n    gl_FragColor = vec4(mix(u_high_vec, u_low_vec, rgb) * color.a, color.a);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_tl_parent;\nuniform float u_scale_parent;\nuniform float u_buffer_scale;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    // We are using Int16 for texture position coordinates to give us enough precision for\n    // fractional coordinates. We use 8192 to scale the texture coordinates in the buffer\n    // as an arbitrarily high number to preserve adequate precision when rendering.\n    // This is also the same value as the EXTENT we are using for our tile buffer pos coordinates,\n    // so math for modifying either is consistent.\n    v_pos0 = (((a_texture_pos / 8192.0) - 0.5) / u_buffer_scale ) + 0.5;\n    v_pos1 = (v_pos0 * u_scale_parent) + u_tl_parent;\n}\n"},symbolIcon:{fragmentSource:"uniform sampler2D u_texture;\n\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_tex;\nvarying float v_fade_opacity;\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    lowp float alpha = opacity * v_fade_opacity;\n    gl_FragColor = texture2D(u_texture, v_tex) * alpha;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"const float PI = 3.141592653589793;\n\nattribute vec4 a_pos_offset;\nattribute vec4 a_data;\nattribute vec3 a_projected_pos;\nattribute float a_fade_opacity;\n\nuniform bool u_is_size_zoom_constant;\nuniform bool u_is_size_feature_constant;\nuniform highp float u_size_t; // used to interpolate between zoom stops when size is a composite function\nuniform highp float u_size; // used when size is both zoom and feature constant\nuniform highp float u_camera_to_center_distance;\nuniform highp float u_pitch;\nuniform bool u_rotate_symbol;\nuniform highp float u_aspect_ratio;\nuniform float u_fade_change;\n\n#pragma mapbox: define lowp float opacity\n\nuniform mat4 u_matrix;\nuniform mat4 u_label_plane_matrix;\nuniform mat4 u_gl_coord_matrix;\n\nuniform bool u_is_text;\nuniform bool u_pitch_with_map;\n\nuniform vec2 u_texsize;\n\nvarying vec2 v_tex;\nvarying float v_fade_opacity;\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 a_pos = a_pos_offset.xy;\n    vec2 a_offset = a_pos_offset.zw;\n\n    vec2 a_tex = a_data.xy;\n    vec2 a_size = a_data.zw;\n\n    highp float segment_angle = -a_projected_pos[2];\n\n    float size;\n    if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = mix(a_size[0], a_size[1], u_size_t) / 10.0;\n    } else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = a_size[0] / 10.0;\n    } else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {\n        size = u_size;\n    } else {\n        size = u_size;\n    }\n\n    vec4 projectedPoint = u_matrix * vec4(a_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    // See comments in symbol_sdf.vertex\n    highp float distance_ratio = u_pitch_with_map ?\n        camera_to_anchor_distance / u_camera_to_center_distance :\n        u_camera_to_center_distance / camera_to_anchor_distance;\n    highp float perspective_ratio = 0.5 + 0.5 * distance_ratio;\n\n    size *= perspective_ratio;\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    highp float symbol_rotation = 0.0;\n    if (u_rotate_symbol) {\n        // See comments in symbol_sdf.vertex\n        vec4 offsetProjectedPoint = u_matrix * vec4(a_pos + vec2(1, 0), 0, 1);\n\n        vec2 a = projectedPoint.xy / projectedPoint.w;\n        vec2 b = offsetProjectedPoint.xy / offsetProjectedPoint.w;\n\n        symbol_rotation = atan((b.y - a.y) / u_aspect_ratio, b.x - a.x);\n    }\n\n    highp float angle_sin = sin(segment_angle + symbol_rotation);\n    highp float angle_cos = cos(segment_angle + symbol_rotation);\n    mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\n\n    vec4 projected_pos = u_label_plane_matrix * vec4(a_projected_pos.xy, 0.0, 1.0);\n    gl_Position = u_gl_coord_matrix * vec4(projected_pos.xy / projected_pos.w + rotation_matrix * (a_offset / 64.0 * fontScale), 0.0, 1.0);\n\n    v_tex = a_tex / u_texsize;\n    vec2 fade_opacity = unpack_opacity(a_fade_opacity);\n    float fade_change = fade_opacity[1] > 0.5 ? u_fade_change : -u_fade_change;\n    v_fade_opacity = max(0.0, min(1.0, fade_opacity[0] + fade_change));\n}\n"},symbolSDF:{fragmentSource:"#define SDF_PX 8.0\n#define EDGE_GAMMA 0.105/DEVICE_PIXEL_RATIO\n\nuniform bool u_is_halo;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n\nuniform sampler2D u_texture;\nuniform highp float u_gamma_scale;\nuniform bool u_is_text;\n\nvarying vec2 v_data0;\nvarying vec3 v_data1;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 fill_color\n    #pragma mapbox: initialize highp vec4 halo_color\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float halo_width\n    #pragma mapbox: initialize lowp float halo_blur\n\n    vec2 tex = v_data0.xy;\n    float gamma_scale = v_data1.x;\n    float size = v_data1.y;\n    float fade_opacity = v_data1[2];\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    lowp vec4 color = fill_color;\n    highp float gamma = EDGE_GAMMA / (fontScale * u_gamma_scale);\n    lowp float buff = (256.0 - 64.0) / 256.0;\n    if (u_is_halo) {\n        color = halo_color;\n        gamma = (halo_blur * 1.19 / SDF_PX + EDGE_GAMMA) / (fontScale * u_gamma_scale);\n        buff = (6.0 - halo_width / fontScale) / SDF_PX;\n    }\n\n    lowp float dist = texture2D(u_texture, tex).a;\n    highp float gamma_scaled = gamma * gamma_scale;\n    highp float alpha = smoothstep(buff - gamma_scaled, buff + gamma_scaled, dist);\n\n    gl_FragColor = color * (alpha * opacity * fade_opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"const float PI = 3.141592653589793;\n\nattribute vec4 a_pos_offset;\nattribute vec4 a_data;\nattribute vec3 a_projected_pos;\nattribute float a_fade_opacity;\n\n// contents of a_size vary based on the type of property value\n// used for {text,icon}-size.\n// For constants, a_size is disabled.\n// For source functions, we bind only one value per vertex: the value of {text,icon}-size evaluated for the current feature.\n// For composite functions:\n// [ text-size(lowerZoomStop, feature),\n//   text-size(upperZoomStop, feature) ]\nuniform bool u_is_size_zoom_constant;\nuniform bool u_is_size_feature_constant;\nuniform highp float u_size_t; // used to interpolate between zoom stops when size is a composite function\nuniform highp float u_size; // used when size is both zoom and feature constant\n\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n\nuniform mat4 u_matrix;\nuniform mat4 u_label_plane_matrix;\nuniform mat4 u_gl_coord_matrix;\n\nuniform bool u_is_text;\nuniform bool u_pitch_with_map;\nuniform highp float u_pitch;\nuniform bool u_rotate_symbol;\nuniform highp float u_aspect_ratio;\nuniform highp float u_camera_to_center_distance;\nuniform float u_fade_change;\n\nuniform vec2 u_texsize;\n\nvarying vec2 v_data0;\nvarying vec3 v_data1;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 fill_color\n    #pragma mapbox: initialize highp vec4 halo_color\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float halo_width\n    #pragma mapbox: initialize lowp float halo_blur\n\n    vec2 a_pos = a_pos_offset.xy;\n    vec2 a_offset = a_pos_offset.zw;\n\n    vec2 a_tex = a_data.xy;\n    vec2 a_size = a_data.zw;\n\n    highp float segment_angle = -a_projected_pos[2];\n    float size;\n\n    if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = mix(a_size[0], a_size[1], u_size_t) / 10.0;\n    } else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = a_size[0] / 10.0;\n    } else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {\n        size = u_size;\n    } else {\n        size = u_size;\n    }\n\n    vec4 projectedPoint = u_matrix * vec4(a_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    // If the label is pitched with the map, layout is done in pitched space,\n    // which makes labels in the distance smaller relative to viewport space.\n    // We counteract part of that effect by multiplying by the perspective ratio.\n    // If the label isn't pitched with the map, we do layout in viewport space,\n    // which makes labels in the distance larger relative to the features around\n    // them. We counteract part of that effect by dividing by the perspective ratio.\n    highp float distance_ratio = u_pitch_with_map ?\n        camera_to_anchor_distance / u_camera_to_center_distance :\n        u_camera_to_center_distance / camera_to_anchor_distance;\n    highp float perspective_ratio = 0.5 + 0.5 * distance_ratio;\n\n    size *= perspective_ratio;\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    highp float symbol_rotation = 0.0;\n    if (u_rotate_symbol) {\n        // Point labels with 'rotation-alignment: map' are horizontal with respect to tile units\n        // To figure out that angle in projected space, we draw a short horizontal line in tile\n        // space, project it, and measure its angle in projected space.\n        vec4 offsetProjectedPoint = u_matrix * vec4(a_pos + vec2(1, 0), 0, 1);\n\n        vec2 a = projectedPoint.xy / projectedPoint.w;\n        vec2 b = offsetProjectedPoint.xy / offsetProjectedPoint.w;\n\n        symbol_rotation = atan((b.y - a.y) / u_aspect_ratio, b.x - a.x);\n    }\n\n    highp float angle_sin = sin(segment_angle + symbol_rotation);\n    highp float angle_cos = cos(segment_angle + symbol_rotation);\n    mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\n\n    vec4 projected_pos = u_label_plane_matrix * vec4(a_projected_pos.xy, 0.0, 1.0);\n    gl_Position = u_gl_coord_matrix * vec4(projected_pos.xy / projected_pos.w + rotation_matrix * (a_offset / 64.0 * fontScale), 0.0, 1.0);\n    float gamma_scale = gl_Position.w;\n\n    vec2 tex = a_tex / u_texsize;\n    vec2 fade_opacity = unpack_opacity(a_fade_opacity);\n    float fade_change = fade_opacity[1] > 0.5 ? u_fade_change : -u_fade_change;\n    float interpolated_fade_opacity = max(0.0, min(1.0, fade_opacity[0] + fade_change));\n\n    v_data0 = vec2(tex.x, tex.y);\n    v_data1 = vec3(gamma_scale, size, interpolated_fade_opacity);\n}\n"}},r=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,o=function(t){var e=i[t],n={};e.fragmentSource=e.fragmentSource.replace(r,function(t,e,i,r,o){return n[o]=!0,"define"===e?"\n#ifndef HAS_UNIFORM_u_"+o+"\nvarying "+i+" "+r+" "+o+";\n#else\nuniform "+i+" "+r+" u_"+o+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+o+"\n    "+i+" "+r+" "+o+" = u_"+o+";\n#endif\n"}),e.vertexSource=e.vertexSource.replace(r,function(t,e,i,r,o){var a="float"===r?"vec2":"vec4";return n[o]?"define"===e?"\n#ifndef HAS_UNIFORM_u_"+o+"\nuniform lowp float a_"+o+"_t;\nattribute "+i+" "+a+" a_"+o+";\nvarying "+i+" "+r+" "+o+";\n#else\nuniform "+i+" "+r+" u_"+o+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+o+" = unpack_mix_"+a+"(a_"+o+", a_"+o+"_t);\n#else\n    "+i+" "+r+" "+o+" = u_"+o+";\n#endif\n":"define"===e?"\n#ifndef HAS_UNIFORM_u_"+o+"\nuniform lowp float a_"+o+"_t;\nattribute "+i+" "+a+" a_"+o+";\n#else\nuniform "+i+" "+r+" u_"+o+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+i+" "+r+" "+o+" = unpack_mix_"+a+"(a_"+o+", a_"+o+"_t);\n#else\n    "+i+" "+r+" "+o+" = u_"+o+";\n#endif\n"})};for(var a in i)o(a);e.exports=i},{}],98:[function(t,e,n){"use strict";var i=t("./image_source"),r=t("../util/window"),o=t("../data/raster_bounds_attributes"),a=t("../render/vertex_array_object"),s=t("../render/texture"),u=function(t){function e(e,n,i,r){t.call(this,e,n,i,r),this.options=n,this.animate=void 0===n.animate||n.animate}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.load=function(){this.canvas=this.canvas||r.document.getElementById(this.options.canvas),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire("error",new Error("Canvas dimensions cannot be less than or equal to zero.")):(this.play=function(){this._playing=!0,this.map._rerender()},this.pause=function(){this._playing=!1},this._finishLoading())},e.prototype.getCanvas=function(){return this.canvas},e.prototype.onAdd=function(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()},e.prototype.onRemove=function(){this.pause()},e.prototype.prepare=function(){var t=this,e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var n=this.map.painter.context,i=n.gl;for(var r in this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,o.members)),this.boundsVAO||(this.boundsVAO=new a),this.texture?e?this.texture.update(this.canvas):this._playing&&(this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE),i.texSubImage2D(i.TEXTURE_2D,0,0,0,i.RGBA,i.UNSIGNED_BYTE,this.canvas)):(this.texture=new s(n,this.canvas,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE)),t.tiles){var u=t.tiles[r];"loaded"!==u.state&&(u.state="loaded",u.texture=t.texture)}}},e.prototype.serialize=function(){return{type:"canvas",canvas:this.canvas,coordinates:this.coordinates}},e.prototype.hasTransition=function(){return this._playing},e.prototype._hasInvalidDimensions=function(){for(var t=0,e=[this.canvas.width,this.canvas.height];t<e.length;t+=1){var n=e[t];if(isNaN(n)||n<=0)return!0}return!1},e}(i);e.exports=u},{"../data/raster_bounds_attributes":59,"../render/texture":93,"../render/vertex_array_object":95,"../util/window":254,"./image_source":102}],99:[function(t,e,n){"use strict";var i=t("../util/evented"),r=t("../util/util"),o=t("../util/window"),a=t("../data/extent"),s=t("../util/ajax").ResourceType,u=t("../util/browser"),l=function(t){function e(e,n,i,o){t.call(this),this.id=e,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this.dispatcher=i,this.setEventedParent(o),this._data=n.data,this._options=r.extend({},n),this._collectResourceTiming=n.collectResourceTiming,this._resourceTiming=[],void 0!==n.maxzoom&&(this.maxzoom=n.maxzoom),n.type&&(this.type=n.type);var s=a/this.tileSize;this.workerOptions=r.extend({source:this.id,cluster:n.cluster||!1,geojsonVtOptions:{buffer:(void 0!==n.buffer?n.buffer:128)*s,tolerance:(void 0!==n.tolerance?n.tolerance:.375)*s,extent:a,maxZoom:this.maxzoom},superclusterOptions:{maxZoom:void 0!==n.clusterMaxZoom?Math.min(n.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:a,radius:(n.clusterRadius||50)*s,log:!1}},n.workerOptions)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.load=function(){var t=this;this.fire("dataloading",{dataType:"source"}),this._updateWorkerData(function(e){if(e)t.fire("error",{error:e});else{var n={dataType:"source",sourceDataType:"metadata"};t._collectResourceTiming&&t._resourceTiming&&t._resourceTiming.length>0&&(n.resourceTiming=t._resourceTiming,t._resourceTiming=[]),t.fire("data",n)}})},e.prototype.onAdd=function(t){this.map=t,this.load()},e.prototype.setData=function(t){var e=this;return this._data=t,this.fire("dataloading",{dataType:"source"}),this._updateWorkerData(function(t){if(t)return e.fire("error",{error:t});var n={dataType:"source",sourceDataType:"content"};e._collectResourceTiming&&e._resourceTiming&&e._resourceTiming.length>0&&(n.resourceTiming=e._resourceTiming,e._resourceTiming=[]),e.fire("data",n)}),this},e.prototype._updateWorkerData=function(t){var e=this,n=r.extend({},this.workerOptions),i=this._data;"string"==typeof i?(n.request=this.map._transformRequest(function(t){var e=o.document.createElement("a");return e.href=t,e.href}(i),s.Source),n.request.collectResourceTiming=this._collectResourceTiming):n.data=JSON.stringify(i),this.workerID=this.dispatcher.send(this.type+".loadData",n,function(n,i){e._loaded=!0,i&&i.resourceTiming&&i.resourceTiming[e.id]&&(e._resourceTiming=i.resourceTiming[e.id].slice(0)),t(n)},this.workerID)},e.prototype.loadTile=function(t,e){var n=this,i=void 0===t.workerID||"expired"===t.state?"loadTile":"reloadTile",r={type:this.type,uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:u.devicePixelRatio,overscaling:t.tileID.overscaleFactor(),showCollisionBoxes:this.map.showCollisionBoxes};t.workerID=this.dispatcher.send(i,r,function(r,o){return t.unloadVectorData(),t.aborted?e(null):r?e(r):(t.loadVectorData(o,n.map.painter,"reloadTile"===i),e(null))},this.workerID)},e.prototype.abortTile=function(t){t.aborted=!0},e.prototype.unloadTile=function(t){t.unloadVectorData(),this.dispatcher.send("removeTile",{uid:t.uid,type:this.type,source:this.id},null,t.workerID)},e.prototype.onRemove=function(){this.dispatcher.broadcast("removeSource",{type:this.type,source:this.id})},e.prototype.serialize=function(){return r.extend({},this._options,{type:this.type,data:this._data})},e.prototype.hasTransition=function(){return!1},e}(i);e.exports=l},{"../data/extent":53,"../util/ajax":251,"../util/browser":252,"../util/evented":260,"../util/util":275,"../util/window":254}],100:[function(t,e,n){"use strict";function i(t,e){var n=t.source,i=t.tileID.canonical;if(!this._geoJSONIndexes[n])return e(null,null);var r=this._geoJSONIndexes[n].getTile(i.z,i.x,i.y);if(!r)return e(null,null);var o=new s(r.features),a=u(o);0===a.byteOffset&&a.byteLength===a.buffer.byteLength||(a=new Uint8Array(a)),e(null,{vectorTile:o,rawData:a.buffer})}var r=t("../util/ajax"),o=t("../util/performance"),a=t("geojson-rewind"),s=t("./geojson_wrapper"),u=t("vt-pbf"),l=t("supercluster"),c=t("geojson-vt"),p=function(t){function e(e,n,r){t.call(this,e,n,i),r&&(this.loadGeoJSON=r),this._geoJSONIndexes={}}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.loadData=function(t,e){var n=this;this.loadGeoJSON(t,function(i,r){if(i||!r)return e(i);if("object"!=typeof r)return e(new Error("Input data is not a valid GeoJSON object."));a(r,!0);try{n._geoJSONIndexes[t.source]=t.cluster?l(t.superclusterOptions).load(r.features):c(r,t.geojsonVtOptions)}catch(i){return e(i)}n.loaded[t.source]={};var s={};if(t.request&&t.request.collectResourceTiming){var u=o.getEntriesByName(t.request.url);u&&(s.resourceTiming={},s.resourceTiming[t.source]=JSON.parse(JSON.stringify(u)))}e(null,s)})},e.prototype.reloadTile=function(e,n){var i=this.loaded[e.source];return i&&i[e.uid]?t.prototype.reloadTile.call(this,e,n):this.loadTile(e,n)},e.prototype.loadGeoJSON=function(t,e){if(t.request)r.getJSON(t.request,e);else{if("string"!=typeof t.data)return e(new Error("Input data is not a valid GeoJSON object."));try{return e(null,JSON.parse(t.data))}catch(t){return e(new Error("Input data is not a valid GeoJSON object."))}}},e.prototype.removeSource=function(t,e){this._geoJSONIndexes[t.source]&&delete this._geoJSONIndexes[t.source],e()},e}(t("./vector_tile_worker_source"));e.exports=p},{"../util/ajax":251,"../util/performance":268,"./geojson_wrapper":101,"./vector_tile_worker_source":116,"geojson-rewind":15,"geojson-vt":19,supercluster:32,"vt-pbf":34}],101:[function(t,e,n){"use strict";var i=t("@mapbox/point-geometry"),r=t("@mapbox/vector-tile").VectorTileFeature.prototype.toGeoJSON,o=t("../data/extent"),a=function(t){this._feature=t,this.extent=o,this.type=t.type,this.properties=t.tags,"id"in t&&!isNaN(t.id)&&(this.id=parseInt(t.id,10))};a.prototype.loadGeometry=function(){if(1===this._feature.type){for(var t=[],e=0,n=this._feature.geometry;e<n.length;e+=1){var r=n[e];t.push([new i(r[0],r[1])])}return t}for(var o=[],a=0,s=this._feature.geometry;a<s.length;a+=1){for(var u=[],l=0,c=s[a];l<c.length;l+=1){var p=c[l];u.push(new i(p[0],p[1]))}o.push(u)}return o},a.prototype.toGeoJSON=function(t,e,n){return r.call(this,t,e,n)};var s=function(t){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=o,this.length=t.length,this._features=t};s.prototype.feature=function(t){return new a(this._features[t])},e.exports=s},{"../data/extent":53,"@mapbox/point-geometry":4,"@mapbox/vector-tile":8}],102:[function(t,e,n){"use strict";var i=t("../util/util"),r=t("./tile_id").CanonicalTileID,o=t("../geo/lng_lat"),a=t("@mapbox/point-geometry"),s=t("../util/evented"),u=t("../util/ajax"),l=t("../util/browser"),c=t("../data/extent"),p=t("../data/array_types").RasterBoundsArray,h=t("../data/raster_bounds_attributes"),f=t("../render/vertex_array_object"),d=t("../render/texture"),m=function(t){function e(e,n,i,r){t.call(this),this.id=e,this.dispatcher=i,this.coordinates=n.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this.setEventedParent(r),this.options=n}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.load=function(){var t=this;this.fire("dataloading",{dataType:"source"}),this.url=this.options.url,u.getImage(this.map._transformRequest(this.url,u.ResourceType.Image),function(e,n){e?t.fire("error",{error:e}):n&&(t.image=l.getImageData(n),t._finishLoading())})},e.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire("data",{dataType:"source",sourceDataType:"metadata"}))},e.prototype.onAdd=function(t){this.map=t,this.load()},e.prototype.setCoordinates=function(t){this.coordinates=t;var e=this.map,n=t.map(function(t){return e.transform.locationCoordinate(o.convert(t)).zoomTo(0)}),s=this.centerCoord=i.getCoordinatesCenter(n);s.column=Math.floor(s.column),s.row=Math.floor(s.row),this.tileID=new r(s.zoom,s.column,s.row),this.minzoom=this.maxzoom=s.zoom;var u=n.map(function(t){var e=t.zoomTo(s.zoom);return new a(Math.round((e.column-s.column)*c),Math.round((e.row-s.row)*c))});return this._boundsArray=new p,this._boundsArray.emplaceBack(u[0].x,u[0].y,0,0),this._boundsArray.emplaceBack(u[1].x,u[1].y,c,0),this._boundsArray.emplaceBack(u[3].x,u[3].y,0,c),this._boundsArray.emplaceBack(u[2].x,u[2].y,c,c),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire("data",{dataType:"source",sourceDataType:"content"}),this},e.prototype.prepare=function(){var t=this;if(0!==Object.keys(this.tiles).length&&this.image){var e=this.map.painter.context,n=e.gl;for(var i in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,h.members)),this.boundsVAO||(this.boundsVAO=new f),this.texture||(this.texture=new d(e,this.image,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE)),t.tiles){var r=t.tiles[i];"loaded"!==r.state&&(r.state="loaded",r.texture=t.texture)}}},e.prototype.loadTile=function(t,e){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={},e(null)):(t.state="errored",e(null))},e.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},e.prototype.hasTransition=function(){return!1},e}(s);e.exports=m},{"../data/array_types":39,"../data/extent":53,"../data/raster_bounds_attributes":59,"../geo/lng_lat":62,"../render/texture":93,"../render/vertex_array_object":95,"../util/ajax":251,"../util/browser":252,"../util/evented":260,"../util/util":275,"./tile_id":114,"@mapbox/point-geometry":4}],103:[function(t,e,n){"use strict";var i=t("../util/util"),r=t("../util/ajax"),o=t("../util/browser"),a=t("../util/mapbox").normalizeSourceURL;e.exports=function(t,e,n){var s=function(t,e){if(t)return n(t);if(e){var r=i.pick(e,["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds"]);e.vector_layers&&(r.vectorLayers=e.vector_layers,r.vectorLayerIds=r.vectorLayers.map(function(t){return t.id})),n(null,r)}};t.url?r.getJSON(e(a(t.url),r.ResourceType.Source),s):o.frame(function(){return s(null,t)})}},{"../util/ajax":251,"../util/browser":252,"../util/mapbox":267,"../util/util":275}],104:[function(t,e,n){"use strict";var i=t("../data/extent");e.exports=function(t,e,n){return e*(i/(t.tileSize*Math.pow(2,n-t.tileID.overscaledZ)))}},{"../data/extent":53}],105:[function(t,e,n){"use strict";function i(t,e){var n=t.tileID,i=e.tileID;return n.overscaledZ-i.overscaledZ||n.canonical.y-i.canonical.y||n.wrap-i.wrap||n.canonical.x-i.canonical.x}n.rendered=function(t,e,n,r,o,a,s){var u=t.tilesIn(n);u.sort(i);for(var l=[],c=0,p=u;c<p.length;c+=1){var h=p[c];l.push({wrappedTileID:h.tileID.wrapped().key,queryResults:h.tile.queryRenderedFeatures(e,h.queryGeometry,h.scale,r,a,t.id,s)})}return function(t){for(var e={},n={},i=0,r=t;i<r.length;i+=1){var o=r[i],a=o.queryResults,s=o.wrappedTileID,u=n[s]=n[s]||{};for(var l in a)for(var c=a[l],p=u[l]=u[l]||{},h=e[l]=e[l]||[],f=0,d=c;f<d.length;f+=1){var m=d[f];p[m.featureIndex]||(p[m.featureIndex]=!0,h.push(m.feature))}}return e}(l)},n.source=function(t,e){for(var n=t.getRenderableIds().map(function(e){return t.getTileByID(e)}),i=[],r={},o=0;o<n.length;o++){var a=n[o],s=a.tileID.canonical.key;r[s]||(r[s]=!0,a.querySourceFeatures(i,e))}return i}},{}],106:[function(t,e,n){"use strict";var i=t("../util/ajax"),r=t("../util/util"),o=(t("../util/evented"),t("../util/mapbox").normalizeTileURL),a=t("../util/browser"),s=t("./tile_id").OverscaledTileID,u=function(t){function e(e,n,i,o){t.call(this,e,n,i,o),this.type="raster-dem",this.maxzoom=22,this._options=r.extend({},n)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds}},e.prototype.loadTile=function(t,e){var n=o(t.tileID.canonical.url(this.tiles,this.scheme),this.url,this.tileSize);t.request=i.getImage(this.map._transformRequest(n,i.ResourceType.Tile),(function(n,i){if(delete t.request,t.aborted)t.state="unloaded",e(null);else if(n)t.state="errored",e(n);else if(i){this.map._refreshExpiredTiles&&t.setExpiryData(i),delete i.cacheControl,delete i.expires;var r=a.getImageData(i);t.workerID&&"expired"!==t.state||(t.workerID=this.dispatcher.send("loadDEMTile",{uid:t.uid,coord:t.tileID,source:this.id,rawImageData:r},(function(n,i){n&&(t.state="errored",e(n)),i&&(t.dem=i,t.needsHillshadePrepare=!0,t.state="loaded",e(null))}).bind(this)))}}).bind(this)),t.neighboringTiles=this._getNeighboringTiles(t.tileID)},e.prototype._getNeighboringTiles=function(t){var e=t.canonical,n=Math.pow(2,e.z),i=(e.x-1+n)%n,r=0===e.x?t.wrap-1:t.wrap,o=(e.x+1+n)%n,a=e.x+1===n?t.wrap+1:t.wrap,u={};return u[new s(t.overscaledZ,r,e.z,i,e.y).key]={backfilled:!1},u[new s(t.overscaledZ,a,e.z,o,e.y).key]={backfilled:!1},e.y>0&&(u[new s(t.overscaledZ,r,e.z,i,e.y-1).key]={backfilled:!1},u[new s(t.overscaledZ,t.wrap,e.z,e.x,e.y-1).key]={backfilled:!1},u[new s(t.overscaledZ,a,e.z,o,e.y-1).key]={backfilled:!1}),e.y+1<n&&(u[new s(t.overscaledZ,r,e.z,i,e.y+1).key]={backfilled:!1},u[new s(t.overscaledZ,t.wrap,e.z,e.x,e.y+1).key]={backfilled:!1},u[new s(t.overscaledZ,a,e.z,o,e.y+1).key]={backfilled:!1}),u},e.prototype.unloadTile=function(t){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded",this.dispatcher.send("removeDEMTile",{uid:t.uid,source:this.id},void 0,t.workerID)},e}(t("./raster_tile_source"));e.exports=u},{"../util/ajax":251,"../util/browser":252,"../util/evented":260,"../util/mapbox":267,"../util/util":275,"./raster_tile_source":108,"./tile_id":114}],107:[function(t,e,n){"use strict";var i=t("../data/dem_data").DEMData,r=function(){this.loading={},this.loaded={}};r.prototype.loadTile=function(t,e){var n=t.source,r=t.uid;this.loading[n]||(this.loading[n]={});var o=new i(r);this.loading[n][r]=o,o.loadFromImage(t.rawImageData),delete this.loading[n][r],this.loaded[n]=this.loaded[n]||{},this.loaded[n][r]=o,e(null,o)},r.prototype.removeTile=function(t){var e=this.loaded[t.source],n=t.uid;e&&e[n]&&delete e[n]},e.exports=r},{"../data/dem_data":52}],108:[function(t,e,n){"use strict";var i=t("../util/util"),r=t("../util/ajax"),o=t("../util/evented"),a=t("./load_tilejson"),s=t("../util/mapbox").normalizeTileURL,u=t("./tile_bounds"),l=t("../render/texture"),c=function(t){function e(e,n,r,o){t.call(this),this.id=e,this.dispatcher=r,this.setEventedParent(o),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=i.extend({},n),i.extend(this,i.pick(n,["url","scheme","tileSize"]))}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.load=function(){var t=this;this.fire("dataloading",{dataType:"source"}),a(this._options,this.map._transformRequest,function(e,n){e?t.fire("error",e):n&&(i.extend(t,n),n.bounds&&(t.tileBounds=new u(n.bounds,t.minzoom,t.maxzoom)),t.fire("data",{dataType:"source",sourceDataType:"metadata"}),t.fire("data",{dataType:"source",sourceDataType:"content"}))})},e.prototype.onAdd=function(t){this.map=t,this.load()},e.prototype.serialize=function(){return i.extend({},this._options)},e.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},e.prototype.loadTile=function(t,e){var n=this,i=s(t.tileID.canonical.url(this.tiles,this.scheme),this.url,this.tileSize);t.request=r.getImage(this.map._transformRequest(i,r.ResourceType.Tile),function(i,r){if(delete t.request,t.aborted)t.state="unloaded",e(null);else if(i)t.state="errored",e(i);else if(r){n.map._refreshExpiredTiles&&t.setExpiryData(r),delete r.cacheControl,delete r.expires;var o=n.map.painter.context,a=o.gl;t.texture=n.map.painter.getTileTexture(r.width),t.texture?(t.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST),a.texSubImage2D(a.TEXTURE_2D,0,0,0,a.RGBA,a.UNSIGNED_BYTE,r)):(t.texture=new l(o,r,a.RGBA),t.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST),o.extTextureFilterAnisotropic&&a.texParameterf(a.TEXTURE_2D,o.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,o.extTextureFilterAnisotropicMax)),a.generateMipmap(a.TEXTURE_2D),t.state="loaded",e(null)}})},e.prototype.abortTile=function(t,e){t.request&&(t.request.abort(),delete t.request),e()},e.prototype.unloadTile=function(t,e){t.texture&&this.map.painter.saveTileTexture(t.texture),e()},e.prototype.hasTransition=function(){return!1},e}(o);e.exports=c},{"../render/texture":93,"../util/ajax":251,"../util/evented":260,"../util/mapbox":267,"../util/util":275,"./load_tilejson":103,"./tile_bounds":113}],109:[function(t,e,n){"use strict";var i=t("../util/ajax"),r=t("../util/evented"),o=t("../util/window"),a=!1,s=null;e.exports.evented=new r,e.exports.registerForPluginAvailability=function(t){return s?t({pluginBlobURL:s,errorCallback:e.exports.errorCallback}):e.exports.evented.once("pluginAvailable",t),t},e.exports.createBlobURL=function(t){return o.URL.createObjectURL(new o.Blob([t.data],{type:"text/javascript"}))},e.exports.clearRTLTextPlugin=function(){a=!1,s=null},e.exports.setRTLTextPlugin=function(t,n){if(a)throw new Error("setRTLTextPlugin cannot be called multiple times.");a=!0,e.exports.errorCallback=n,i.getArrayBuffer({url:t},function(t,i){t?n(t):i&&(s=e.exports.createBlobURL(i),e.exports.evented.fire("pluginAvailable",{pluginBlobURL:s,errorCallback:n}))})},e.exports.applyArabicShaping=null,e.exports.processBidirectionalText=null},{"../util/ajax":251,"../util/evented":260,"../util/window":254}],110:[function(t,e,n){"use strict";var i=t("../util/util"),r={vector:t("../source/vector_tile_source"),raster:t("../source/raster_tile_source"),"raster-dem":t("../source/raster_dem_tile_source"),geojson:t("../source/geojson_source"),video:t("../source/video_source"),image:t("../source/image_source"),canvas:t("../source/canvas_source")};n.create=function(t,e,n,o){var a=new r[e.type](t,e,n,o);if(a.id!==t)throw new Error("Expected Source id to be "+t+" instead of "+a.id);return i.bindAll(["load","abort","unload","serialize","prepare"],a),a},n.getType=function(t){return r[t]},n.setType=function(t,e){r[t]=e}},{"../source/canvas_source":98,"../source/geojson_source":99,"../source/image_source":102,"../source/raster_dem_tile_source":106,"../source/raster_tile_source":108,"../source/vector_tile_source":115,"../source/video_source":117,"../util/util":275}],111:[function(t,e,n){"use strict";function i(t,e){var n=e.zoomTo(t.canonical.z);return new h((n.column-(t.canonical.x+t.wrap*Math.pow(2,t.canonical.z)))*p,(n.row-t.canonical.y)*p)}function r(t){return"raster"===t||"image"===t||"video"===t}var o=t("./source").create,a=t("./tile"),s=t("../util/evented"),u=t("../util/lru_cache"),l=t("../geo/coordinate"),c=t("../util/util"),p=t("../data/extent"),h=(t("../gl/context"),t("@mapbox/point-geometry")),f=t("../util/browser"),d=t("./tile_id").OverscaledTileID,m=function(t){function e(e,n,i){var r=this;t.call(this),this.id=e,this.dispatcher=i,this.on("data",function(t){"source"===t.dataType&&"metadata"===t.sourceDataType&&(r._sourceLoaded=!0),r._sourceLoaded&&!r._paused&&"source"===t.dataType&&"content"===t.sourceDataType&&(r.reload(),r.transform&&r.update(r.transform))}),this.on("error",function(){r._sourceErrored=!0}),this._source=o(e,n,i,this),this._tiles={},this._cache=new u(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._isIdRenderable=this._isIdRenderable.bind(this),this._coveredTiles={}}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.onAdd=function(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(t)},e.prototype.onRemove=function(t){this._source&&this._source.onRemove&&this._source.onRemove(t)},e.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;for(var t in this._tiles){var e=this._tiles[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}return!0},e.prototype.getSource=function(){return this._source},e.prototype.pause=function(){this._paused=!0},e.prototype.resume=function(){if(this._paused){var t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform)}},e.prototype._loadTile=function(t,e){return this._source.loadTile(t,e)},e.prototype._unloadTile=function(t){if(this._source.unloadTile)return this._source.unloadTile(t,function(){})},e.prototype._abortTile=function(t){if(this._source.abortTile)return this._source.abortTile(t,function(){})},e.prototype.serialize=function(){return this._source.serialize()},e.prototype.prepare=function(t){for(var e in this._source.prepare&&this._source.prepare(),this._tiles)this._tiles[e].upload(t)},e.prototype.getIds=function(){var t=this;return Object.keys(this._tiles).map(Number).sort(function(e,n){var i=t._tiles[e].tileID,r=t._tiles[n].tileID,o=new h(i.canonical.x,i.canonical.y).rotate(t.transform.angle),a=new h(r.canonical.x,r.canonical.y).rotate(t.transform.angle);return i.overscaledZ-r.overscaledZ||a.y-o.y||a.x-o.x})},e.prototype.getRenderableIds=function(){return this.getIds().filter(this._isIdRenderable)},e.prototype.hasRenderableParent=function(t){var e=this.findLoadedParent(t,0,{});return!!e&&this._isIdRenderable(e.tileID.key)},e.prototype._isIdRenderable=function(t){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]},e.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var t in this._resetCache(),this._tiles)this._reloadTile(t,"reloading")},e.prototype._reloadTile=function(t,e){var n=this._tiles[t];n&&("loading"!==n.state&&(n.state=e),this._loadTile(n,this._tileLoaded.bind(this,n,t,e)))},e.prototype._tileLoaded=function(t,e,n,i){if(i)return t.state="errored",void(404!==i.status?this._source.fire("error",{tile:t,error:i}):this.update(this.transform));t.timeAdded=f.now(),"expired"===n&&(t.refreshedUponExpiration=!0),this._setTileReloadTimer(e,t),"raster-dem"===this.getSource().type&&t.dem&&this._backfillDEM(t),this._source.fire("data",{dataType:"source",tile:t,coord:t.tileID}),this.map&&(this.map.painter.tileExtentVAO.vao=null)},e.prototype._backfillDEM=function(t){function e(t,e){t.needsHillshadePrepare=!0;var n=e.tileID.canonical.x-t.tileID.canonical.x,i=e.tileID.canonical.y-t.tileID.canonical.y,r=Math.pow(2,t.tileID.canonical.z),o=e.tileID.key;0===n&&0===i||Math.abs(i)>1||(Math.abs(n)>1&&(1===Math.abs(n+r)?n+=r:1===Math.abs(n-r)&&(n-=r)),e.dem&&t.dem&&(t.dem.backfillBorder(e.dem,n,i),t.neighboringTiles&&t.neighboringTiles[o]&&(t.neighboringTiles[o].backfilled=!0)))}for(var n=this.getRenderableIds(),i=0;i<n.length;i++){var r=n[i];if(t.neighboringTiles&&t.neighboringTiles[r]){var o=this.getTileByID(r);e(t,o),e(o,t)}}},e.prototype.getTile=function(t){return this.getTileByID(t.key)},e.prototype.getTileByID=function(t){return this._tiles[t]},e.prototype.getZoom=function(t){return t.zoom+t.scaleZoom(t.tileSize/this._source.tileSize)},e.prototype._findLoadedChildren=function(t,e,n){var i=this,r=!1;for(var o in i._tiles){var a=i._tiles[o];if(!(n[o]||!a.hasData()||a.tileID.overscaledZ<=t.overscaledZ||a.tileID.overscaledZ>e)){var s=Math.pow(2,a.tileID.canonical.z-t.canonical.z);if(Math.floor(a.tileID.canonical.x/s)===t.canonical.x&&Math.floor(a.tileID.canonical.y/s)===t.canonical.y)for(n[o]=a.tileID,r=!0;a&&a.tileID.overscaledZ-1>t.overscaledZ;){var u=a.tileID.scaledTo(a.tileID.overscaledZ-1);if(!u)break;(a=i._tiles[u.key])&&a.hasData()&&(delete n[o],n[u.key]=u)}}}return r},e.prototype.findLoadedParent=function(t,e,n){for(var i=this,r=t.overscaledZ-1;r>=e;r--){var o=t.scaledTo(r);if(!o)return;var a=String(o.key),s=i._tiles[a];if(s&&s.hasData())return n[a]=o,s;if(i._cache.has(a))return n[a]=o,i._cache.get(a)}},e.prototype.updateCacheSize=function(t){var e=Math.ceil(t.width/this._source.tileSize)+1,n=Math.ceil(t.height/this._source.tileSize)+1,i=Math.floor(e*n*5),r="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,i):i;this._cache.setMaxSize(r)},e.prototype.update=function(t){var n=this;if(this.transform=t,this._sourceLoaded&&!this._paused){var i;this.updateCacheSize(t),this._coveredTiles={},this.used?this._source.tileID?i=t.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(t){return new d(t.canonical.z,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y)}):(i=t.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(i=i.filter(function(t){return n._source.hasTile(t)}))):i=[];var o,a=(this._source.roundZoom?Math.round:Math.floor)(this.getZoom(t)),s=Math.max(a-e.maxOverzooming,this._source.minzoom),u=Math.max(a+e.maxUnderzooming,this._source.minzoom),l=this._updateRetainedTiles(i,a),p={};if(r(this._source.type))for(var h=Object.keys(l),m=0;m<h.length;m++){var y=h[m],g=l[y],v=n._tiles[y];if(v&&(void 0===v.fadeEndTime||v.fadeEndTime>=f.now())){n._findLoadedChildren(g,u,l)&&(l[y]=g);var _=n.findLoadedParent(g,s,p);_&&n._addTile(_.tileID)}}for(o in p)l[o]||(n._coveredTiles[o]=!0);for(o in p)l[o]=p[o];for(var b=c.keysDifference(this._tiles,l),x=0;x<b.length;x++)n._removeTile(b[x])}},e.prototype._updateRetainedTiles=function(t,n){for(var i=this,r={},o={},a=Math.max(n-e.maxOverzooming,this._source.minzoom),s=Math.max(n+e.maxUnderzooming,this._source.minzoom),u=0;u<t.length;u++){var l=t[u],c=i._addTile(l),p=!1;if(c.hasData())r[l.key]=l;else{p=c.wasRequested(),r[l.key]=l;var h=!0;if(n+1>i._source.maxzoom){var f=l.children(i._source.maxzoom)[0],d=i.getTile(f);d&&d.hasData()?r[f.key]=f:h=!1}else{i._findLoadedChildren(l,s,r);for(var m=l.children(i._source.maxzoom),y=0;y<m.length;y++)if(!r[m[y].key]){h=!1;break}}if(!h)for(var g=l.overscaledZ-1;g>=a;--g){var v=l.scaledTo(g);if(o[v.key])break;if(o[v.key]=!0,!(c=i.getTile(v))&&p&&(c=i._addTile(v)),c&&(r[v.key]=v,p=c.wasRequested(),c.hasData()))break}}}return r},e.prototype._addTile=function(t){var e=this._tiles[t.key];if(e)return e;(e=this._cache.getAndRemove(t.key))&&this._cacheTimers[t.key]&&(clearTimeout(this._cacheTimers[t.key]),delete this._cacheTimers[t.key],this._setTileReloadTimer(t.key,e));var n=Boolean(e);return n||(e=new a(t,this._source.tileSize*t.overscaleFactor()),this._loadTile(e,this._tileLoaded.bind(this,e,t.key,e.state))),e?(e.uses++,this._tiles[t.key]=e,n||this._source.fire("dataloading",{tile:e,coord:e.tileID,dataType:"source"}),e):null},e.prototype._setTileReloadTimer=function(t,e){var n=this;t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);var i=e.getExpiryTimeout();i&&(this._timers[t]=setTimeout(function(){n._reloadTile(t,"expired"),delete n._timers[t]},i))},e.prototype._setCacheInvalidationTimer=function(t,e){var n=this;t in this._cacheTimers&&(clearTimeout(this._cacheTimers[t]),delete this._cacheTimers[t]);var i=e.getExpiryTimeout();i&&(this._cacheTimers[t]=setTimeout(function(){n._cache.remove(t),delete n._cacheTimers[t]},i))},e.prototype._removeTile=function(t){var e=this._tiles[t];if(e&&(e.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),!(e.uses>0)))if(e.hasData()){e.tileID=e.tileID.wrapped();var n=e.tileID.key;this._cache.add(n,e),this._setCacheInvalidationTimer(n,e)}else e.aborted=!0,this._abortTile(e),this._unloadTile(e)},e.prototype.clearTiles=function(){for(var t in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(t);this._resetCache()},e.prototype._resetCache=function(){for(var t in this._cacheTimers)clearTimeout(this._cacheTimers[t]);this._cacheTimers={},this._cache.reset()},e.prototype.tilesIn=function(t){for(var e=[],n=this.getIds(),r=1/0,o=1/0,a=-1/0,s=-1/0,u=t[0].zoom,c=0;c<t.length;c++){var h=t[c];r=Math.min(r,h.column),o=Math.min(o,h.row),a=Math.max(a,h.column),s=Math.max(s,h.row)}for(var f=0;f<n.length;f++){var d=this._tiles[n[f]],m=d.tileID,y=[i(m,new l(r,o,u)),i(m,new l(a,s,u))];if(y[0].x<p&&y[0].y<p&&y[1].x>=0&&y[1].y>=0){for(var g=[],v=0;v<t.length;v++)g.push(i(m,t[v]));e.push({tile:d,tileID:m,queryGeometry:[g],scale:Math.pow(2,this.transform.zoom-d.tileID.overscaledZ)})}}return e},e.prototype.getVisibleCoordinates=function(){for(var t=this,e=this.getRenderableIds().map(function(e){return t._tiles[e].tileID}),n=0,i=e;n<i.length;n+=1){var r=i[n];r.posMatrix=t.transform.calculatePosMatrix(r.toUnwrapped())}return e},e.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(r(this._source.type))for(var t in this._tiles){var e=this._tiles[t];if(void 0!==e.fadeEndTime&&e.fadeEndTime>=f.now())return!0}return!1},e}(s);m.maxOverzooming=10,m.maxUnderzooming=3,e.exports=m},{"../data/extent":53,"../geo/coordinate":61,"../gl/context":66,"../util/browser":252,"../util/evented":260,"../util/lru_cache":266,"../util/util":275,"./source":110,"./tile":112,"./tile_id":114,"@mapbox/point-geometry":4}],112:[function(t,e,n){"use strict";var i=t("../util/util"),r=t("../data/bucket").deserialize,o=(t("../data/feature_index"),t("@mapbox/vector-tile")),a=t("pbf"),s=t("../util/vectortile_to_geojson"),u=t("../style-spec/feature_filter"),l=(t("../symbol/collision_index"),t("../data/bucket/symbol_bucket")),c=t("../data/array_types"),p=c.RasterBoundsArray,h=c.CollisionBoxArray,f=t("../data/raster_bounds_attributes"),d=t("../data/extent"),m=t("@mapbox/point-geometry"),y=t("../render/texture"),g=t("../data/segment").SegmentVector,v=t("../data/index_array_type").TriangleIndexArray,_=t("../util/browser"),b=function(t,e){this.tileID=t,this.uid=i.uniqueId(),this.uses=0,this.tileSize=e,this.buckets={},this.expirationTime=null,this.expiredRequestCount=0,this.state="loading"};b.prototype.registerFadeDuration=function(t){var e=t+this.timeAdded;e<_.now()||this.fadeEndTime&&e<this.fadeEndTime||(this.fadeEndTime=e)},b.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},b.prototype.loadVectorData=function(t,e,n){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){if(t.rawTileData&&(this.rawTileData=t.rawTileData),this.collisionBoxArray=t.collisionBoxArray,this.featureIndex=t.featureIndex,this.featureIndex.rawTileData=this.rawTileData,this.buckets=r(t.buckets,e.style),n)for(var i in this.buckets){var o=this.buckets[i];o instanceof l&&(o.justReloaded=!0)}t.iconAtlasImage&&(this.iconAtlasImage=t.iconAtlasImage),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage)}else this.collisionBoxArray=new h},b.prototype.unloadVectorData=function(){for(var t in this.buckets)this.buckets[t].destroy();this.buckets={},this.iconAtlasTexture&&this.iconAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.collisionBoxArray=null,this.featureIndex=null,this.state="unloaded"},b.prototype.unloadDEMData=function(){this.dem=null,this.neighboringTiles=null,this.state="unloaded"},b.prototype.getBucket=function(t){return this.buckets[t.id]},b.prototype.upload=function(t){for(var e in this.buckets){var n=this.buckets[e];n.uploaded||(n.upload(t),n.uploaded=!0)}var i=t.gl;this.iconAtlasImage&&(this.iconAtlasTexture=new y(t,this.iconAtlasImage,i.RGBA),this.iconAtlasImage=null),this.glyphAtlasImage&&(this.glyphAtlasTexture=new y(t,this.glyphAtlasImage,i.ALPHA),this.glyphAtlasImage=null)},b.prototype.queryRenderedFeatures=function(t,e,n,i,r,o,a){if(!this.featureIndex||!this.collisionBoxArray)return{};var s=0,u={};for(var c in t){var p=this.getBucket(t[c]);p&&(s=Math.max(s,t[c].queryRadius(p)),p instanceof l&&void 0!==p.bucketInstanceId&&(u[p.bucketInstanceId]=!0))}return this.featureIndex.query({queryGeometry:e,scale:n,tileSize:this.tileSize,bearing:r,params:i,additionalRadius:s,collisionBoxArray:this.collisionBoxArray,sourceID:o,collisionIndex:a,bucketInstanceIds:u},t)},b.prototype.querySourceFeatures=function(t,e){if(this.rawTileData){this.vtLayers||(this.vtLayers=new o.VectorTile(new a(this.rawTileData)).layers);var n=this.vtLayers._geojsonTileLayer||this.vtLayers[e?e.sourceLayer:""];if(n)for(var i=u(e&&e.filter),r={z:this.tileID.overscaledZ,x:this.tileID.canonical.x,y:this.tileID.canonical.y},l=0;l<n.length;l++){var c=n.feature(l);if(i({zoom:this.tileID.overscaledZ},c)){var p=new s(c,r.z,r.x,r.y);p.tile=r,t.push(p)}}}},b.prototype.clearMask=function(){this.segments&&(this.segments.destroy(),delete this.segments),this.maskedBoundsBuffer&&(this.maskedBoundsBuffer.destroy(),delete this.maskedBoundsBuffer),this.maskedIndexBuffer&&(this.maskedIndexBuffer.destroy(),delete this.maskedIndexBuffer)},b.prototype.setMask=function(t,e){if(!i.deepEqual(this.mask,t)&&(this.mask=t,this.clearMask(),!i.deepEqual(t,{0:!0}))){var n=new p,r=new v;this.segments=new g,this.segments.prepareSegment(0,n,r);for(var o=Object.keys(t),a=0;a<o.length;a++){var s=t[o[a]],u=d>>s.z,l=new m(s.x*u,s.y*u),c=new m(l.x+u,l.y+u),h=this.segments.prepareSegment(4,n,r);n.emplaceBack(l.x,l.y,l.x,l.y),n.emplaceBack(c.x,l.y,c.x,l.y),n.emplaceBack(l.x,c.y,l.x,c.y),n.emplaceBack(c.x,c.y,c.x,c.y);var y=h.vertexLength;r.emplaceBack(y,y+1,y+2),r.emplaceBack(y+1,y+2,y+3),h.vertexLength+=4,h.primitiveLength+=2}this.maskedBoundsBuffer=e.createVertexBuffer(n,f.members),this.maskedIndexBuffer=e.createIndexBuffer(r)}},b.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},b.prototype.setExpiryData=function(t){var e=this.expirationTime;if(t.cacheControl){var n=i.parseCacheControl(t.cacheControl);n["max-age"]&&(this.expirationTime=Date.now()+1e3*n["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){var r=Date.now(),o=!1;if(this.expirationTime>r)o=!1;else if(e)if(this.expirationTime<e)o=!0;else{var a=this.expirationTime-e;a?this.expirationTime=r+Math.max(a,3e4):o=!0}else o=!0;o?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},b.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},e.exports=b},{"../data/array_types":39,"../data/bucket":40,"../data/bucket/symbol_bucket":51,"../data/extent":53,"../data/feature_index":54,"../data/index_array_type":55,"../data/raster_bounds_attributes":59,"../data/segment":60,"../render/texture":93,"../style-spec/feature_filter":148,"../symbol/collision_index":217,"../util/browser":252,"../util/util":275,"../util/vectortile_to_geojson":276,"@mapbox/point-geometry":4,"@mapbox/vector-tile":8,pbf:30}],113:[function(t,e,n){"use strict";var i=t("../geo/lng_lat_bounds"),r=t("../util/util").clamp,o=function(t,e,n){this.bounds=i.convert(this.validateBounds(t)),this.minzoom=e||0,this.maxzoom=n||24};o.prototype.validateBounds=function(t){return Array.isArray(t)&&4===t.length?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]},o.prototype.contains=function(t){var e=Math.floor(this.lngX(this.bounds.getWest(),t.z)),n=Math.floor(this.latY(this.bounds.getNorth(),t.z)),i=Math.ceil(this.lngX(this.bounds.getEast(),t.z)),r=Math.ceil(this.latY(this.bounds.getSouth(),t.z));return t.x>=e&&t.x<i&&t.y>=n&&t.y<r},o.prototype.lngX=function(t,e){return(t+180)*(Math.pow(2,e)/360)},o.prototype.latY=function(t,e){var n=r(Math.sin(Math.PI/180*t),-.9999,.9999),i=Math.pow(2,e)/(2*Math.PI);return Math.pow(2,e-1)+.5*Math.log((1+n)/(1-n))*-i},e.exports=o},{"../geo/lng_lat_bounds":63,"../util/util":275}],114:[function(t,e,n){"use strict";function i(t,e,n,i){(t*=2)<0&&(t=-1*t-1);var r=1<<e;return 32*(r*r*t+r*i+n)+e}var r=t("@mapbox/whoots-js"),o=t("../util/web_worker_transfer").register,a=t("../geo/coordinate"),s=function(t,e,n){this.z=t,this.x=e,this.y=n,this.key=i(0,t,e,n)};s.prototype.equals=function(t){return this.z===t.z&&this.x===t.x&&this.y===t.y},s.prototype.url=function(t,e){var n=r.getTileBBox(this.x,this.y,this.z),i=function(t,e,n){for(var i,r="",o=t;o>0;o--)r+=(e&(i=1<<o-1)?1:0)+(n&i?2:0);return r}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===e?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",i).replace("{bbox-epsg-3857}",n)};var u=function(t,e){this.wrap=t,this.canonical=e,this.key=i(t,e.z,e.x,e.y)},l=function(t,e,n,r,o){this.overscaledZ=t,this.wrap=e,this.canonical=new s(n,+r,+o),this.key=i(e,t,r,o)};l.prototype.scaledTo=function(t){var e=this.canonical.z-t;return t>this.canonical.z?new l(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new l(t,this.wrap,t,this.canonical.x>>e,this.canonical.y>>e)},l.prototype.isChildOf=function(t){var e=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>e&&t.canonical.y===this.canonical.y>>e},l.prototype.children=function(t){if(this.overscaledZ>=t)return[new l(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var e=this.canonical.z+1,n=2*this.canonical.x,i=2*this.canonical.y;return[new l(e,this.wrap,e,n,i),new l(e,this.wrap,e,n+1,i),new l(e,this.wrap,e,n,i+1),new l(e,this.wrap,e,n+1,i+1)]},l.prototype.isLessThan=function(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))},l.prototype.wrapped=function(){return new l(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},l.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},l.prototype.toUnwrapped=function(){return new u(this.wrap,this.canonical)},l.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},l.prototype.toCoordinate=function(){return new a(this.canonical.x+Math.pow(2,this.wrap),this.canonical.y,this.canonical.z)},o("CanonicalTileID",s),o("OverscaledTileID",l,{omit:["posMatrix"]}),e.exports={CanonicalTileID:s,OverscaledTileID:l,UnwrappedTileID:u}},{"../geo/coordinate":61,"../util/web_worker_transfer":278,"@mapbox/whoots-js":12}],115:[function(t,e,n){"use strict";var i=t("../util/evented"),r=t("../util/util"),o=t("./load_tilejson"),a=t("../util/mapbox").normalizeTileURL,s=t("./tile_bounds"),u=t("../util/ajax").ResourceType,l=t("../util/browser"),c=function(t){function e(e,n,i,o){if(t.call(this),this.id=e,this.dispatcher=i,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,r.extend(this,r.pick(n,["url","scheme","tileSize"])),this._options=r.extend({type:"vector"},n),this._collectResourceTiming=n.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(o)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.load=function(){var t=this;this.fire("dataloading",{dataType:"source"}),o(this._options,this.map._transformRequest,function(e,n){e?t.fire("error",e):n&&(r.extend(t,n),n.bounds&&(t.tileBounds=new s(n.bounds,t.minzoom,t.maxzoom)),t.fire("data",{dataType:"source",sourceDataType:"metadata"}),t.fire("data",{dataType:"source",sourceDataType:"content"}))})},e.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},e.prototype.onAdd=function(t){this.map=t,this.load()},e.prototype.serialize=function(){return r.extend({},this._options)},e.prototype.loadTile=function(t,e){function n(n,i){return t.aborted?e(null):n?e(n):(i&&i.resourceTiming&&(t.resourceTiming=i.resourceTiming),this.map._refreshExpiredTiles&&t.setExpiryData(i),t.loadVectorData(i,this.map.painter),e(null),void(t.reloadCallback&&(this.loadTile(t,t.reloadCallback),t.reloadCallback=null)))}var i=t.tileID.overscaleFactor(),r=a(t.tileID.canonical.url(this.tiles,this.scheme),this.url),o={request:this.map._transformRequest(r,u.Tile),uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,tileSize:this.tileSize*i,type:this.type,source:this.id,pixelRatio:l.devicePixelRatio,overscaling:i,showCollisionBoxes:this.map.showCollisionBoxes};o.request.collectResourceTiming=this._collectResourceTiming,void 0===t.workerID||"expired"===t.state?t.workerID=this.dispatcher.send("loadTile",o,n.bind(this)):"loading"===t.state?t.reloadCallback=e:this.dispatcher.send("reloadTile",o,n.bind(this),t.workerID)},e.prototype.abortTile=function(t){this.dispatcher.send("abortTile",{uid:t.uid,type:this.type,source:this.id},void 0,t.workerID)},e.prototype.unloadTile=function(t){t.unloadVectorData(),this.dispatcher.send("removeTile",{uid:t.uid,type:this.type,source:this.id},void 0,t.workerID)},e.prototype.hasTransition=function(){return!1},e}(i);e.exports=c},{"../util/ajax":251,"../util/browser":252,"../util/evented":260,"../util/mapbox":267,"../util/util":275,"./load_tilejson":103,"./tile_bounds":113}],116:[function(t,e,n){"use strict";function i(t,e){var n=r.getArrayBuffer(t.request,function(t,n){t?e(t):n&&e(null,{vectorTile:new o.VectorTile(new a(n.data)),rawData:n.data,cacheControl:n.cacheControl,expires:n.expires})});return function(){n.abort(),e()}}var r=t("../util/ajax"),o=t("@mapbox/vector-tile"),a=t("pbf"),s=t("./worker_tile"),u=t("../util/util"),l=t("../util/performance"),c=function(t,e,n){this.actor=t,this.layerIndex=e,this.loadVectorData=n||i,this.loading={},this.loaded={}};c.prototype.loadTile=function(t,e){var n=this,i=t.source,r=t.uid;this.loading[i]||(this.loading[i]={});var o=this.loading[i][r]=new s(t);o.abort=this.loadVectorData(t,function(a,s){if(delete n.loading[i][r],a||!s)return e(a);var c=s.rawData,p={};s.expires&&(p.expires=s.expires),s.cacheControl&&(p.cacheControl=s.cacheControl);var h={};if(t.request&&t.request.collectResourceTiming){var f=l.getEntriesByName(t.request.url);f&&(h.resourceTiming=JSON.parse(JSON.stringify(f)))}o.vectorTile=s.vectorTile,o.parse(s.vectorTile,n.layerIndex,n.actor,function(t,n){if(t||!n)return e(t);e(null,u.extend({rawTileData:c.slice(0)},n,p,h))}),n.loaded[i]=n.loaded[i]||{},n.loaded[i][r]=o})},c.prototype.reloadTile=function(t,e){var n=this.loaded[t.source],i=t.uid,r=this;if(n&&n[i]){var o=n[i];o.showCollisionBoxes=t.showCollisionBoxes,"parsing"===o.status?o.reloadCallback=e:"done"===o.status&&o.parse(o.vectorTile,this.layerIndex,this.actor,(function(t,n){if(this.reloadCallback){var i=this.reloadCallback;delete this.reloadCallback,this.parse(this.vectorTile,r.layerIndex,r.actor,i)}e(t,n)}).bind(o))}},c.prototype.abortTile=function(t,e){var n=this.loading[t.source],i=t.uid;n&&n[i]&&n[i].abort&&(n[i].abort(),delete n[i]),e()},c.prototype.removeTile=function(t,e){var n=this.loaded[t.source],i=t.uid;n&&n[i]&&delete n[i],e()},e.exports=c},{"../util/ajax":251,"../util/performance":268,"../util/util":275,"./worker_tile":119,"@mapbox/vector-tile":8,pbf:30}],117:[function(t,e,n){"use strict";var i=t("../util/ajax"),r=t("./image_source"),o=t("../data/raster_bounds_attributes"),a=t("../render/vertex_array_object"),s=t("../render/texture"),u=function(t){function e(e,n,i,r){t.call(this,e,n,i,r),this.roundZoom=!0,this.type="video",this.options=n}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.load=function(){var t=this,e=this.options;this.urls=e.urls,i.getVideo(e.urls,function(e,n){e?t.fire("error",{error:e}):n&&(t.video=n,t.video.loop=!0,t.video.addEventListener("playing",function(){t.map._rerender()}),t.map&&t.video.play(),t._finishLoading())})},e.prototype.getVideo=function(){return this.video},e.prototype.onAdd=function(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},e.prototype.prepare=function(){var t=this;if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var e=this.map.painter.context,n=e.gl;for(var i in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,o.members)),this.boundsVAO||(this.boundsVAO=new a),this.texture?this.video.paused||(this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,this.video)):(this.texture=new s(e,this.video,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE)),t.tiles){var r=t.tiles[i];"loaded"!==r.state&&(r.state="loaded",r.texture=t.texture)}}},e.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},e.prototype.hasTransition=function(){return this.video&&!this.video.paused},e}(r);e.exports=u},{"../data/raster_bounds_attributes":59,"../render/texture":93,"../render/vertex_array_object":95,"../util/ajax":251,"./image_source":102}],118:[function(t,e,n){"use strict";var i=t("../util/actor"),r=t("../style/style_layer_index"),o=t("./vector_tile_worker_source"),a=t("./raster_dem_tile_worker_source"),s=t("./geojson_worker_source"),u=t("./rtl_text_plugin"),l=function(t){var e=this;this.self=t,this.actor=new i(t,this),this.layerIndexes={},this.workerSourceTypes={vector:o,geojson:s},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(t,n){if(e.workerSourceTypes[t])throw new Error('Worker source with name "'+t+'" already registered.');e.workerSourceTypes[t]=n},this.self.registerRTLTextPlugin=function(t){if(u.applyArabicShaping||u.processBidirectionalText)throw new Error("RTL text plugin already registered.");u.applyArabicShaping=t.applyArabicShaping,u.processBidirectionalText=t.processBidirectionalText}};l.prototype.setLayers=function(t,e,n){this.getLayerIndex(t).replace(e),n()},l.prototype.updateLayers=function(t,e,n){this.getLayerIndex(t).update(e.layers,e.removedIds),n()},l.prototype.loadTile=function(t,e,n){this.getWorkerSource(t,e.type).loadTile(e,n)},l.prototype.loadDEMTile=function(t,e,n){this.getDEMWorkerSource(t).loadTile(e,n)},l.prototype.reloadTile=function(t,e,n){this.getWorkerSource(t,e.type).reloadTile(e,n)},l.prototype.abortTile=function(t,e,n){this.getWorkerSource(t,e.type).abortTile(e,n)},l.prototype.removeTile=function(t,e,n){this.getWorkerSource(t,e.type).removeTile(e,n)},l.prototype.removeDEMTile=function(t,e){this.getDEMWorkerSource(t).removeTile(e)},l.prototype.removeSource=function(t,e,n){var i=this.getWorkerSource(t,e.type);void 0!==i.removeSource?i.removeSource(e,n):n()},l.prototype.loadWorkerSource=function(t,e,n){try{this.self.importScripts(e.url),n()}catch(t){n(t)}},l.prototype.loadRTLTextPlugin=function(t,e,n){try{u.applyArabicShaping||u.processBidirectionalText||(this.self.importScripts(e),u.applyArabicShaping&&u.processBidirectionalText||n(new Error("RTL Text Plugin failed to import scripts from "+e)))}catch(t){n(t)}},l.prototype.getLayerIndex=function(t){var e=this.layerIndexes[t];return e||(e=this.layerIndexes[t]=new r),e},l.prototype.getWorkerSource=function(t,e){var n=this;return this.workerSources[t]||(this.workerSources[t]={}),this.workerSources[t][e]||(this.workerSources[t][e]=new this.workerSourceTypes[e]({send:function(e,i,r){n.actor.send(e,i,r,t)}},this.getLayerIndex(t))),this.workerSources[t][e]},l.prototype.getDEMWorkerSource=function(t){return this.demWorkerSources[t]||(this.demWorkerSources[t]=new a),this.demWorkerSources[t]},e.exports=function(t){return new l(t)}},{"../style/style_layer_index":210,"../util/actor":250,"./geojson_worker_source":100,"./raster_dem_tile_worker_source":107,"./rtl_text_plugin":109,"./vector_tile_worker_source":116}],119:[function(t,e,n){"use strict";function i(t,e){for(var n=new h(e),i=0,r=t;i<r.length;i+=1)r[i].recalculate(n)}var r=t("../data/feature_index"),o=t("../symbol/symbol_layout").performSymbolLayout,a=t("../data/array_types").CollisionBoxArray,s=t("../util/dictionary_coder"),u=t("../data/bucket/symbol_bucket"),l=t("../util/util"),c=t("../render/image_atlas").makeImageAtlas,p=t("../render/glyph_atlas").makeGlyphAtlas,h=t("../style/evaluation_parameters"),f=t("./tile_id").OverscaledTileID,d=function(t){this.tileID=new f(t.tileID.overscaledZ,t.tileID.wrap,t.tileID.canonical.z,t.tileID.canonical.x,t.tileID.canonical.y),this.uid=t.uid,this.zoom=t.zoom,this.pixelRatio=t.pixelRatio,this.tileSize=t.tileSize,this.source=t.source,this.overscaling=t.overscaling,this.showCollisionBoxes=t.showCollisionBoxes,this.collectResourceTiming=!!t.collectResourceTiming};d.prototype.parse=function(t,e,n,h){function f(){if(A)return h(A);if(I&&L){var t=p(I),e=c(L);for(var n in g){var r=g[n];r instanceof u&&(i(r.layers,this.zoom),o(r,I,t.positions,L,e.positions,this.showCollisionBoxes))}this.status="done",h(null,{buckets:l.values(g).filter(function(t){return!t.isEmpty()}),featureIndex:y,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:t.image,iconAtlasImage:e.image})}}var d=this;this.status="parsing",this.data=t,this.collisionBoxArray=new a;var m=new s(Object.keys(t.layers).sort()),y=new r(this.tileID,this.overscaling);y.bucketLayerIDs=[];var g={},v={featureIndex:y,iconDependencies:{},glyphDependencies:{}},_=e.familiesBySource[this.source];for(var b in _){var x=t.layers[b];if(x){1===x.version&&l.warnOnce('Vector tile source "'+d.source+'" layer "'+b+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var w=m.encode(b),E=[],C=0;C<x.length;C++){var O=x.feature(C);E.push({feature:O,index:C,sourceLayerIndex:w})}for(var P=0,S=_[b];P<S.length;P+=1){var T=S[P],k=T[0];k.minzoom&&d.zoom<Math.floor(k.minzoom)||k.maxzoom&&d.zoom>=k.maxzoom||"none"===k.visibility||(i(T,d.zoom),(g[k.id]=k.createBucket({index:y.bucketLayerIDs.length,layers:T,zoom:d.zoom,pixelRatio:d.pixelRatio,overscaling:d.overscaling,collisionBoxArray:d.collisionBoxArray})).populate(E,v),y.bucketLayerIDs.push(T.map(function(t){return t.id})))}}}var A,I,L,M=l.mapObject(v.glyphDependencies,function(t){return Object.keys(t).map(Number)});Object.keys(M).length?n.send("getGlyphs",{uid:this.uid,stacks:M},function(t,e){A||(A=t,I=e,f.call(d))}):I={};var z=Object.keys(v.iconDependencies);z.length?n.send("getImages",{icons:z},function(t,e){A||(A=t,L=e,f.call(d))}):L={},f.call(this)},e.exports=d},{"../data/array_types":39,"../data/bucket/symbol_bucket":51,"../data/feature_index":54,"../render/glyph_atlas":85,"../render/image_atlas":87,"../style/evaluation_parameters":182,"../symbol/symbol_layout":227,"../util/dictionary_coder":257,"../util/util":275,"./tile_id":114}],120:[function(t,e,n){"use strict";function i(t,e){var n={};for(var i in t)"ref"!==i&&(n[i]=t[i]);return r.forEach(function(t){t in e&&(n[t]=e[t])}),n}var r=t("./util/ref_properties");e.exports=function(t){t=t.slice();for(var e=Object.create(null),n=0;n<t.length;n++)e[t[n].id]=t[n];for(var r=0;r<t.length;r++)"ref"in t[r]&&(t[r]=i(t[r],e[t[r].ref]));return t}},{"./util/ref_properties":159}],121:[function(t,e,n){"use strict";function i(t,e,n){n.push({command:p.addSource,args:[t,e[t]]})}function r(t,e,n){e.push({command:p.removeSource,args:[t]}),n[t]=!0}function o(t,e,n,o){r(t,n,o),i(t,e,n)}function a(t,e,n){var i;for(i in t[n])if(t[n].hasOwnProperty(i)&&"data"!==i&&!c(t[n][i],e[n][i]))return!1;for(i in e[n])if(e[n].hasOwnProperty(i)&&"data"!==i&&!c(t[n][i],e[n][i]))return!1;return!0}function s(t,e,n,i,r,o){var a;for(a in t=t||{},e=e||{},t)t.hasOwnProperty(a)&&(c(t[a],e[a])||n.push({command:o,args:[i,a,e[a],r]}));for(a in e)e.hasOwnProperty(a)&&!t.hasOwnProperty(a)&&(c(t[a],e[a])||n.push({command:o,args:[i,a,e[a],r]}))}function u(t){return t.id}function l(t,e){return t[e.id]=e,t}var c=t("./util/deep_equal"),p={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};e.exports=function(t,e){if(!t)return[{command:p.setStyle,args:[e]}];var n=[];try{if(!c(t.version,e.version))return[{command:p.setStyle,args:[e]}];c(t.center,e.center)||n.push({command:p.setCenter,args:[e.center]}),c(t.zoom,e.zoom)||n.push({command:p.setZoom,args:[e.zoom]}),c(t.bearing,e.bearing)||n.push({command:p.setBearing,args:[e.bearing]}),c(t.pitch,e.pitch)||n.push({command:p.setPitch,args:[e.pitch]}),c(t.sprite,e.sprite)||n.push({command:p.setSprite,args:[e.sprite]}),c(t.glyphs,e.glyphs)||n.push({command:p.setGlyphs,args:[e.glyphs]}),c(t.transition,e.transition)||n.push({command:p.setTransition,args:[e.transition]}),c(t.light,e.light)||n.push({command:p.setLight,args:[e.light]});var h={},f=[];!function(t,e,n,s){var u;for(u in t=t||{},e=e||{},t)t.hasOwnProperty(u)&&(e.hasOwnProperty(u)||r(u,n,s));for(u in e)e.hasOwnProperty(u)&&(t.hasOwnProperty(u)?c(t[u],e[u])||("geojson"===t[u].type&&"geojson"===e[u].type&&a(t,e,u)?n.push({command:p.setGeoJSONSourceData,args:[u,e[u].data]}):o(u,e,n,s)):i(u,e,n))}(t.sources,e.sources,f,h);var d=[];t.layers&&t.layers.forEach(function(t){h[t.source]?n.push({command:p.removeLayer,args:[t.id]}):d.push(t)}),n=n.concat(f),function(t,e,n){t=t||[],e=e||[];var i,r,o,a,h,f,d,m=t.map(u),y=e.map(u),g=t.reduce(l,{}),v=e.reduce(l,{}),_=m.slice(),b=Object.create(null);for(i=0,r=0;i<m.length;i++)v.hasOwnProperty(o=m[i])?r++:(n.push({command:p.removeLayer,args:[o]}),_.splice(_.indexOf(o,r),1));for(i=0,r=0;i<y.length;i++)_[_.length-1-i]!==(o=y[y.length-1-i])&&(g.hasOwnProperty(o)?(n.push({command:p.removeLayer,args:[o]}),_.splice(_.lastIndexOf(o,_.length-r),1)):r++,n.push({command:p.addLayer,args:[v[o],f=_[_.length-i]]}),_.splice(_.length-i,0,o),b[o]=!0);for(i=0;i<y.length;i++)if(a=g[o=y[i]],h=v[o],!b[o]&&!c(a,h))if(c(a.source,h.source)&&c(a["source-layer"],h["source-layer"])&&c(a.type,h.type)){for(d in s(a.layout,h.layout,n,o,null,p.setLayoutProperty),s(a.paint,h.paint,n,o,null,p.setPaintProperty),c(a.filter,h.filter)||n.push({command:p.setFilter,args:[o,h.filter]}),c(a.minzoom,h.minzoom)&&c(a.maxzoom,h.maxzoom)||n.push({command:p.setLayerZoomRange,args:[o,h.minzoom,h.maxzoom]}),a)a.hasOwnProperty(d)&&"layout"!==d&&"paint"!==d&&"filter"!==d&&"metadata"!==d&&"minzoom"!==d&&"maxzoom"!==d&&(0===d.indexOf("paint.")?s(a[d],h[d],n,o,d.slice(6),p.setPaintProperty):c(a[d],h[d])||n.push({command:p.setLayerProperty,args:[o,d,h[d]]}));for(d in h)h.hasOwnProperty(d)&&!a.hasOwnProperty(d)&&"layout"!==d&&"paint"!==d&&"filter"!==d&&"metadata"!==d&&"minzoom"!==d&&"maxzoom"!==d&&(0===d.indexOf("paint.")?s(a[d],h[d],n,o,d.slice(6),p.setPaintProperty):c(a[d],h[d])||n.push({command:p.setLayerProperty,args:[o,d,h[d]]}))}else n.push({command:p.removeLayer,args:[o]}),f=_[_.lastIndexOf(o)+1],n.push({command:p.addLayer,args:[h,f]})}(d,e.layers,n)}catch(t){console.warn("Unable to compute style diff:",t),n=[{command:p.setStyle,args:[e]}]}return n},e.exports.operations=p},{"./util/deep_equal":155}],122:[function(t,e,n){"use strict";e.exports=function(t,e,n){this.message=(t?t+": ":"")+n,null!==e&&void 0!==e&&e.__line__&&(this.line=e.__line__)}},{}],123:[function(t,e,n){"use strict";var i=t("./types").toString,r=t("./parsing_context"),o=(t("./evaluation_context"),function(t,e,n,i){this.name=t,this.type=e,this._evaluate=n,this.args=i});o.prototype.evaluate=function(t){return this._evaluate(t,this.args)},o.prototype.eachChild=function(t){this.args.forEach(t)},o.prototype.possibleOutputs=function(){return[void 0]},o.parse=function(t,e){var n=t[0],a=o.definitions[n];if(!a)return e.error('Unknown expression "'+n+'". If you wanted a literal array, use ["literal", [...]].',0);for(var s=Array.isArray(a)?a[0]:a.type,u=Array.isArray(a)?[[a[1],a[2]]]:a.overloads,l=u.filter(function(e){var n=e[0];return!Array.isArray(n)||n.length===t.length-1}),c=[],p=1;p<t.length;p++){var h=t[p],f=void 0;if(1===l.length){var d=l[0][0];f=Array.isArray(d)?d[p-1]:d.type}var m=e.parse(h,1+c.length,f);if(!m)return null;c.push(m)}for(var y=null,g=0,v=l;g<v.length;g+=1){var _=v[g],b=_[0],x=_[1];if(y=new r(e.registry,e.path,null,e.scope),Array.isArray(b)&&b.length!==c.length)y.error("Expected "+b.length+" arguments, but found "+c.length+" instead.");else{for(var w=0;w<c.length;w++){var E=Array.isArray(b)?b[w]:b.type,C=c[w];y.concat(w+1).checkSubtype(E,C.type)}if(0===y.errors.length)return new o(n,s,x,c)}}if(1===l.length)e.errors.push.apply(e.errors,y.errors);else{var O=(l.length?l:u).map(function(t){return function(t){return Array.isArray(t)?"("+t.map(i).join(", ")+")":"("+i(t.type)+"...)"}(t[0])}).join(" | "),P=c.map(function(t){return i(t.type)}).join(", ");e.error("Expected arguments of type "+O+", but found ("+P+") instead.")}return null},o.register=function(t,e){for(var n in o.definitions=e,e)t[n]=o},e.exports={CompoundExpression:o,varargs:function(t){return{type:t}}}},{"./evaluation_context":138,"./parsing_context":141,"./types":146}],124:[function(t,e,n){"use strict";var i=t("../types"),r=i.toString,o=i.array,a=i.ValueType,s=i.StringType,u=i.NumberType,l=i.BooleanType,c=i.checkSubtype,p=t("../values").typeOf,h=t("../runtime_error"),f={string:s,number:u,boolean:l},d=function(t,e){this.type=t,this.input=e};d.parse=function(t,e){if(t.length<2||t.length>4)return e.error("Expected 1, 2, or 3 arguments, but found "+(t.length-1)+" instead.");var n,i;if(t.length>2){var r=t[1];if("string"!=typeof r||!(r in f))return e.error('The item type argument of "array" must be one of string, number, boolean',1);n=f[r]}else n=a;if(t.length>3){if("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2]))return e.error('The length argument to "array" must be a positive integer literal',2);i=t[2]}var s=o(n,i),u=e.parse(t[t.length-1],t.length-1,a);return u?new d(s,u):null},d.prototype.evaluate=function(t){var e=this.input.evaluate(t);if(c(this.type,p(e)))throw new h("Expected value to be of type "+r(this.type)+", but found "+r(p(e))+" instead.");return e},d.prototype.eachChild=function(t){t(this.input)},d.prototype.possibleOutputs=function(){return this.input.possibleOutputs()},e.exports=d},{"../runtime_error":143,"../types":146,"../values":147}],125:[function(t,e,n){"use strict";var i=t("../types"),r=i.ObjectType,o=i.ValueType,a=i.StringType,s=i.NumberType,u=i.BooleanType,l=t("../runtime_error"),c=t("../types"),p=c.checkSubtype,h=c.toString,f=t("../values").typeOf,d={string:a,number:s,boolean:u,object:r},m=function(t,e){this.type=t,this.args=e};m.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");for(var n=d[t[0]],i=[],r=1;r<t.length;r++){var a=e.parse(t[r],r,o);if(!a)return null;i.push(a)}return new m(n,i)},m.prototype.evaluate=function(t){for(var e=this,n=0;n<this.args.length;n++){var i=e.args[n].evaluate(t);if(!p(e.type,f(i)))return i;if(n===e.args.length-1)throw new l("Expected value to be of type "+h(e.type)+", but found "+h(f(i))+" instead.")}return null},m.prototype.eachChild=function(t){this.args.forEach(t)},m.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.args.map(function(t){return t.possibleOutputs()}));var t},e.exports=m},{"../runtime_error":143,"../types":146,"../values":147}],126:[function(t,e,n){"use strict";var i=t("../types"),r=i.array,o=i.ValueType,a=i.NumberType,s=t("../runtime_error"),u=function(t,e,n){this.type=t,this.index=e,this.input=n};u.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var n=e.parse(t[1],1,a),i=e.parse(t[2],2,r(e.expectedType||o));return n&&i?new u(i.type.itemType,n,i):null},u.prototype.evaluate=function(t){var e=this.index.evaluate(t),n=this.input.evaluate(t);if(e<0||e>=n.length)throw new s("Array index out of bounds: "+e+" > "+n.length+".");if(e!==Math.floor(e))throw new s("Array index must be an integer, but found "+e+" instead.");return n[e]},u.prototype.eachChild=function(t){t(this.index),t(this.input)},u.prototype.possibleOutputs=function(){return[void 0]},e.exports=u},{"../runtime_error":143,"../types":146}],127:[function(t,e,n){"use strict";var i=t("../types").BooleanType,r=function(t,e,n){this.type=t,this.branches=e,this.otherwise=n};r.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found only "+(t.length-1)+".");if(t.length%2!=0)return e.error("Expected an odd number of arguments.");var n;e.expectedType&&"value"!==e.expectedType.kind&&(n=e.expectedType);for(var o=[],a=1;a<t.length-1;a+=2){var s=e.parse(t[a],a,i);if(!s)return null;var u=e.parse(t[a+1],a+1,n);if(!u)return null;o.push([s,u]),n=n||u.type}var l=e.parse(t[t.length-1],t.length-1,n);return l?new r(n,o,l):null},r.prototype.evaluate=function(t){for(var e=0,n=this.branches;e<n.length;e+=1){var i=n[e],r=i[1];if(i[0].evaluate(t))return r.evaluate(t)}return this.otherwise.evaluate(t)},r.prototype.eachChild=function(t){for(var e=0,n=this.branches;e<n.length;e+=1){var i=n[e],r=i[1];t(i[0]),t(r)}t(this.otherwise)},r.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.branches.map(function(t){return t[1].possibleOutputs()})).concat(this.otherwise.possibleOutputs());var t},e.exports=r},{"../types":146}],128:[function(t,e,n){"use strict";var i=t("../types"),r=i.checkSubtype,o=i.ValueType,a=function(t,e){this.type=t,this.args=e};a.parse=function(t,e){if(t.length<2)return e.error("Expectected at least one argument.");var n=null,i=e.expectedType;i&&"value"!==i.kind&&(n=i);for(var s=[],u=0,l=t.slice(1);u<l.length;u+=1){var c=e.parse(l[u],1+s.length,n,void 0,{omitTypeAnnotations:!0});if(!c)return null;n=n||c.type,s.push(c)}return i&&s.some(function(t){return r(i,t.type)})?new a(o,s):new a(n,s)},a.prototype.evaluate=function(t){for(var e=null,n=0,i=this.args;n<i.length&&null===(e=i[n].evaluate(t));n+=1);return e},a.prototype.eachChild=function(t){this.args.forEach(t)},a.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.args.map(function(t){return t.possibleOutputs()}));var t},e.exports=a},{"../types":146}],129:[function(t,e,n){"use strict";var i=t("../types"),r=i.ColorType,o=i.ValueType,a=i.NumberType,s=t("../values"),u=s.Color,l=s.validateRGBA,c=t("../runtime_error"),p={"to-number":a,"to-color":r},h=function(t,e){this.type=t,this.args=e};h.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");for(var n=p[t[0]],i=[],r=1;r<t.length;r++){var a=e.parse(t[r],r,o);if(!a)return null;i.push(a)}return new h(n,i)},h.prototype.evaluate=function(t){if("color"===this.type.kind){for(var e,n,i=0,r=this.args;i<r.length;i+=1)if(n=null,"string"==typeof(e=r[i].evaluate(t))){var o=t.parseColor(e);if(o)return o}else if(Array.isArray(e)&&!(n=e.length<3||e.length>4?"Invalid rbga value "+JSON.stringify(e)+": expected an array containing either three or four numeric values.":l(e[0],e[1],e[2],e[3])))return new u(e[0]/255,e[1]/255,e[2]/255,e[3]);throw new c(n||"Could not parse color from value '"+("string"==typeof e?e:JSON.stringify(e))+"'")}for(var a=null,s=0,p=this.args;s<p.length;s+=1)if(null!==(a=p[s].evaluate(t))){var h=Number(a);if(!isNaN(h))return h}throw new c("Could not convert "+JSON.stringify(a)+" to number.")},h.prototype.eachChild=function(t){this.args.forEach(t)},h.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.args.map(function(t){return t.possibleOutputs()}));var t},e.exports=h},{"../runtime_error":143,"../types":146,"../values":147}],130:[function(t,e,n){"use strict";function i(t){return"string"===t.kind||"number"===t.kind||"boolean"===t.kind||"null"===t.kind}function r(t){return function(){function e(t,e){this.type=s,this.lhs=t,this.rhs=e}return e.parse=function(t,n){if(3!==t.length)return n.error("Expected two arguments.");var r=n.parse(t[1],1,a);if(!r)return null;var o=n.parse(t[2],2,a);return o?i(r.type)||i(o.type)?r.type.kind!==o.type.kind&&"value"!==r.type.kind&&"value"!==o.type.kind?n.error("Cannot compare "+u(r.type)+" and "+u(o.type)+"."):new e(r,o):n.error("Expected at least one argument to be a string, number, boolean, or null, but found ("+u(r.type)+", "+u(o.type)+") instead."):null},e.prototype.evaluate=function(e){return t(this.lhs.evaluate(e),this.rhs.evaluate(e))},e.prototype.eachChild=function(t){t(this.lhs),t(this.rhs)},e.prototype.possibleOutputs=function(){return[!0,!1]},e}()}var o=t("../types"),a=o.ValueType,s=o.BooleanType,u=t("../types").toString;e.exports={Equals:r(function(t,e){return t===e}),NotEquals:r(function(t,e){return t!==e})}},{"../types":146}],131:[function(t,e,n){"use strict";function i(t,e){var n=e[0],i=e[1],r=e[2],o=e[3];n=n.evaluate(t),i=i.evaluate(t),r=r.evaluate(t);var a=o?o.evaluate(t):1,s=C(n,i,r,a);if(s)throw new T(s);return new E(n/255*a,i/255*a,r/255*a,a)}function r(t,e){return t in e}function o(t,e){var n=e[t];return void 0===n?null:n}function a(t,e){return e[0].evaluate(t).length}function s(t,e){var n=e[1];return e[0].evaluate(t)<n.evaluate(t)}function u(t,e){var n=e[1];return e[0].evaluate(t)>n.evaluate(t)}function l(t,e){var n=e[1];return e[0].evaluate(t)<=n.evaluate(t)}function c(t,e){var n=e[1];return e[0].evaluate(t)>=n.evaluate(t)}var p=t("../types"),h=p.NumberType,f=p.StringType,d=p.BooleanType,m=p.ColorType,y=p.ObjectType,g=p.ValueType,v=p.ErrorType,_=p.array,b=p.toString,x=t("../values"),w=x.typeOf,E=x.Color,C=x.validateRGBA,O=t("../compound_expression"),P=O.CompoundExpression,S=O.varargs,T=t("../runtime_error"),k=t("./let"),A=t("./var"),I=t("./literal"),L=t("./assertion"),M=t("./array"),z=t("./coercion"),D=t("./at"),R=t("./match"),j=t("./case"),N=t("./step"),B=t("./interpolate"),F=t("./coalesce"),V=t("./equals"),Z={"==":V.Equals,"!=":V.NotEquals,array:M,at:D,boolean:L,case:j,coalesce:F,interpolate:B,let:k,literal:I,match:R,number:L,object:L,step:N,string:L,"to-color":z,"to-number":z,var:A};P.register(Z,{error:[v,[f],function(t,e){throw new T(e[0].evaluate(t))}],typeof:[f,[g],function(t,e){return b(w(e[0].evaluate(t)))}],"to-string":[f,[g],function(t,e){var n=e[0],i=typeof(n=n.evaluate(t));return null===n||"string"===i||"number"===i||"boolean"===i?String(n):n instanceof E?n.toString():JSON.stringify(n)}],"to-boolean":[d,[g],function(t,e){return Boolean(e[0].evaluate(t))}],"to-rgba":[_(h,4),[m],function(t,e){var n=e[0].evaluate(t),i=n.a;return[255*n.r/i,255*n.g/i,255*n.b/i,i]}],rgb:[m,[h,h,h],i],rgba:[m,[h,h,h,h],i],length:{type:h,overloads:[[[f],a],[[_(g)],a]]},has:{type:d,overloads:[[[f],function(t,e){return r(e[0].evaluate(t),t.properties())}],[[f,y],function(t,e){var n=e[1];return r(e[0].evaluate(t),n.evaluate(t))}]]},get:{type:g,overloads:[[[f],function(t,e){return o(e[0].evaluate(t),t.properties())}],[[f,y],function(t,e){var n=e[1];return o(e[0].evaluate(t),n.evaluate(t))}]]},properties:[y,[],function(t){return t.properties()}],"geometry-type":[f,[],function(t){return t.geometryType()}],id:[g,[],function(t){return t.id()}],zoom:[h,[],function(t){return t.globals.zoom}],"heatmap-density":[h,[],function(t){return t.globals.heatmapDensity||0}],"+":[h,S(h),function(t,e){for(var n=0,i=0,r=e;i<r.length;i+=1)n+=r[i].evaluate(t);return n}],"*":[h,S(h),function(t,e){for(var n=1,i=0,r=e;i<r.length;i+=1)n*=r[i].evaluate(t);return n}],"-":{type:h,overloads:[[[h,h],function(t,e){var n=e[1];return e[0].evaluate(t)-n.evaluate(t)}],[[h],function(t,e){return-e[0].evaluate(t)}]]},"/":[h,[h,h],function(t,e){var n=e[1];return e[0].evaluate(t)/n.evaluate(t)}],"%":[h,[h,h],function(t,e){var n=e[1];return e[0].evaluate(t)%n.evaluate(t)}],ln2:[h,[],function(){return Math.LN2}],pi:[h,[],function(){return Math.PI}],e:[h,[],function(){return Math.E}],"^":[h,[h,h],function(t,e){var n=e[1];return Math.pow(e[0].evaluate(t),n.evaluate(t))}],sqrt:[h,[h],function(t,e){return Math.sqrt(e[0].evaluate(t))}],log10:[h,[h],function(t,e){return Math.log10(e[0].evaluate(t))}],ln:[h,[h],function(t,e){return Math.log(e[0].evaluate(t))}],log2:[h,[h],function(t,e){return Math.log2(e[0].evaluate(t))}],sin:[h,[h],function(t,e){return Math.sin(e[0].evaluate(t))}],cos:[h,[h],function(t,e){return Math.cos(e[0].evaluate(t))}],tan:[h,[h],function(t,e){return Math.tan(e[0].evaluate(t))}],asin:[h,[h],function(t,e){return Math.asin(e[0].evaluate(t))}],acos:[h,[h],function(t,e){return Math.acos(e[0].evaluate(t))}],atan:[h,[h],function(t,e){return Math.atan(e[0].evaluate(t))}],min:[h,S(h),function(t,e){return Math.min.apply(Math,e.map(function(e){return e.evaluate(t)}))}],max:[h,S(h),function(t,e){return Math.max.apply(Math,e.map(function(e){return e.evaluate(t)}))}],"filter-==":[d,[f,g],function(t,e){var n=e[0],i=e[1];return t.properties()[n.value]===i.value}],"filter-id-==":[d,[g],function(t,e){var n=e[0];return t.id()===n.value}],"filter-type-==":[d,[f],function(t,e){var n=e[0];return t.geometryType()===n.value}],"filter-<":[d,[f,g],function(t,e){var n=e[0],i=e[1],r=t.properties()[n.value],o=i.value;return typeof r==typeof o&&r<o}],"filter-id-<":[d,[g],function(t,e){var n=e[0],i=t.id(),r=n.value;return typeof i==typeof r&&i<r}],"filter->":[d,[f,g],function(t,e){var n=e[0],i=e[1],r=t.properties()[n.value],o=i.value;return typeof r==typeof o&&r>o}],"filter-id->":[d,[g],function(t,e){var n=e[0],i=t.id(),r=n.value;return typeof i==typeof r&&i>r}],"filter-<=":[d,[f,g],function(t,e){var n=e[0],i=e[1],r=t.properties()[n.value],o=i.value;return typeof r==typeof o&&r<=o}],"filter-id-<=":[d,[g],function(t,e){var n=e[0],i=t.id(),r=n.value;return typeof i==typeof r&&i<=r}],"filter->=":[d,[f,g],function(t,e){var n=e[0],i=e[1],r=t.properties()[n.value],o=i.value;return typeof r==typeof o&&r>=o}],"filter-id->=":[d,[g],function(t,e){var n=e[0],i=t.id(),r=n.value;return typeof i==typeof r&&i>=r}],"filter-has":[d,[g],function(t,e){return e[0].value in t.properties()}],"filter-has-id":[d,[],function(t){return null!==t.id()}],"filter-type-in":[d,[_(f)],function(t,e){return e[0].value.indexOf(t.geometryType())>=0}],"filter-id-in":[d,[_(g)],function(t,e){return e[0].value.indexOf(t.id())>=0}],"filter-in-small":[d,[f,_(g)],function(t,e){var n=e[0];return e[1].value.indexOf(t.properties()[n.value])>=0}],"filter-in-large":[d,[f,_(g)],function(t,e){var n=e[0],i=e[1];return function(t,e,n,i){for(;n<=i;){var r=n+i>>1;if(e[r]===t)return!0;e[r]>t?i=r-1:n=r+1}return!1}(t.properties()[n.value],i.value,0,i.value.length-1)}],">":{type:d,overloads:[[[h,h],u],[[f,f],u]]},"<":{type:d,overloads:[[[h,h],s],[[f,f],s]]},">=":{type:d,overloads:[[[h,h],c],[[f,f],c]]},"<=":{type:d,overloads:[[[h,h],l],[[f,f],l]]},all:{type:d,overloads:[[[d,d],function(t,e){var n=e[1];return e[0].evaluate(t)&&n.evaluate(t)}],[S(d),function(t,e){for(var n=0,i=e;n<i.length;n+=1)if(!i[n].evaluate(t))return!1;return!0}]]},any:{type:d,overloads:[[[d,d],function(t,e){var n=e[1];return e[0].evaluate(t)||n.evaluate(t)}],[S(d),function(t,e){for(var n=0,i=e;n<i.length;n+=1)if(i[n].evaluate(t))return!0;return!1}]]},"!":[d,[d],function(t,e){return!e[0].evaluate(t)}],upcase:[f,[f],function(t,e){return e[0].evaluate(t).toUpperCase()}],downcase:[f,[f],function(t,e){return e[0].evaluate(t).toLowerCase()}],concat:[f,S(f),function(t,e){return e.map(function(e){return e.evaluate(t)}).join("")}]}),e.exports=Z},{"../compound_expression":123,"../runtime_error":143,"../types":146,"../values":147,"./array":124,"./assertion":125,"./at":126,"./case":127,"./coalesce":128,"./coercion":129,"./equals":130,"./interpolate":132,"./let":133,"./literal":134,"./match":135,"./step":136,"./var":137}],132:[function(t,e,n){"use strict";function i(t,e,n,i){var r=i-n,o=t-n;return 0===r?0:1===e?o/r:(Math.pow(e,o)-1)/(Math.pow(e,r)-1)}var r=t("@mapbox/unitbezier"),o=t("../../util/interpolate"),a=t("../types"),s=a.toString,u=a.NumberType,l=t("../stops").findStopLessThanOrEqualTo,c=function(t,e,n,i){this.type=t,this.interpolation=e,this.input=n,this.labels=[],this.outputs=[];for(var r=0,o=i;r<o.length;r+=1){var a=o[r],s=a[1];this.labels.push(a[0]),this.outputs.push(s)}};c.interpolationFactor=function(t,e,n,o){var a=0;if("exponential"===t.name)a=i(e,t.base,n,o);else if("linear"===t.name)a=i(e,1,n,o);else if("cubic-bezier"===t.name){var s=t.controlPoints;a=new r(s[0],s[1],s[2],s[3]).solve(i(e,1,n,o))}return a},c.parse=function(t,e){var n=t[1],i=t[2],r=t.slice(3);if(!Array.isArray(n)||0===n.length)return e.error("Expected an interpolation type expression.",1);if("linear"===n[0])n={name:"linear"};else if("exponential"===n[0]){var o=n[1];if("number"!=typeof o)return e.error("Exponential interpolation requires a numeric base.",1,1);n={name:"exponential",base:o}}else{if("cubic-bezier"!==n[0])return e.error("Unknown interpolation type "+String(n[0]),1,0);var a=n.slice(1);if(4!==a.length||a.some(function(t){return"number"!=typeof t||t<0||t>1}))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);n={name:"cubic-bezier",controlPoints:a}}if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(!(i=e.parse(i,2,u)))return null;var l=[],p=null;e.expectedType&&"value"!==e.expectedType.kind&&(p=e.expectedType);for(var h=0;h<r.length;h+=2){var f=r[h],d=r[h+1],m=h+3,y=h+4;if("number"!=typeof f)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',m);if(l.length&&l[l.length-1][0]>=f)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',m);var g=e.parse(d,y,p);if(!g)return null;p=p||g.type,l.push([f,g])}return"number"===p.kind||"color"===p.kind||"array"===p.kind&&"number"===p.itemType.kind&&"number"==typeof p.N?new c(p,n,i,l):e.error("Type "+s(p)+" is not interpolatable.")},c.prototype.evaluate=function(t){var e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);var i=this.input.evaluate(t);if(i<=e[0])return n[0].evaluate(t);var r=e.length;if(i>=e[r-1])return n[r-1].evaluate(t);var a=l(e,i),s=c.interpolationFactor(this.interpolation,i,e[a],e[a+1]),u=n[a].evaluate(t),p=n[a+1].evaluate(t);return o[this.type.kind.toLowerCase()](u,p,s)},c.prototype.eachChild=function(t){t(this.input);for(var e=0,n=this.outputs;e<n.length;e+=1)t(n[e])},c.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.outputs.map(function(t){return t.possibleOutputs()}));var t},e.exports=c},{"../../util/interpolate":158,"../stops":145,"../types":146,"@mapbox/unitbezier":7}],133:[function(t,e,n){"use strict";var i=function(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e};i.prototype.evaluate=function(t){t.pushScope(this.bindings);var e=this.result.evaluate(t);return t.popScope(),e},i.prototype.eachChild=function(t){for(var e=0,n=this.bindings;e<n.length;e+=1)t(n[e][1]);t(this.result)},i.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found "+(t.length-1)+" instead.");for(var n=[],r=1;r<t.length-1;r+=2){var o=t[r];if("string"!=typeof o)return e.error("Expected string, but found "+typeof o+" instead.",r);if(/[^a-zA-Z0-9_]/.test(o))return e.error("Variable names must contain only alphanumeric characters or '_'.",r);var a=e.parse(t[r+1],r+1);if(!a)return null;n.push([o,a])}var s=e.parse(t[t.length-1],t.length-1,void 0,n);return s?new i(n,s):null},i.prototype.possibleOutputs=function(){return this.result.possibleOutputs()},e.exports=i},{}],134:[function(t,e,n){"use strict";var i=t("../values"),r=i.isValue,o=i.typeOf,a=function(t,e){this.type=t,this.value=e};a.parse=function(t,e){if(2!==t.length)return e.error("'literal' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(!r(t[1]))return e.error("invalid value");var n=t[1],i=o(n),s=e.expectedType;return"array"!==i.kind||0!==i.N||!s||"array"!==s.kind||"number"==typeof s.N&&0!==s.N||(i=s),new a(i,n)},a.prototype.evaluate=function(){return this.value},a.prototype.eachChild=function(){},a.prototype.possibleOutputs=function(){return[this.value]},e.exports=a},{"../values":147}],135:[function(t,e,n){"use strict";var i=t("../values").typeOf,r=function(t,e,n,i,r,o){this.inputType=t,this.type=e,this.input=n,this.cases=i,this.outputs=r,this.otherwise=o};r.parse=function(t,e){if(t.length<5)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if(t.length%2!=1)return e.error("Expected an even number of arguments.");var n,o;e.expectedType&&"value"!==e.expectedType.kind&&(o=e.expectedType);for(var a={},s=[],u=2;u<t.length-1;u+=2){var l=t[u],c=t[u+1];Array.isArray(l)||(l=[l]);var p=e.concat(u);if(0===l.length)return p.error("Expected at least one branch label.");for(var h=0,f=l;h<f.length;h+=1){var d=f[h];if("number"!=typeof d&&"string"!=typeof d)return p.error("Branch labels must be numbers or strings.");if("number"==typeof d&&Math.abs(d)>Number.MAX_SAFE_INTEGER)return p.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof d&&Math.floor(d)!==d)return p.error("Numeric branch labels must be integer values.");if(n){if(p.checkSubtype(n,i(d)))return null}else n=i(d);if(void 0!==a[String(d)])return p.error("Branch labels must be unique.");a[String(d)]=s.length}var m=e.parse(c,u,o);if(!m)return null;o=o||m.type,s.push(m)}var y=e.parse(t[1],1,n);if(!y)return null;var g=e.parse(t[t.length-1],t.length-1,o);return g?new r(n,o,y,a,s,g):null},r.prototype.evaluate=function(t){var e=this.input.evaluate(t);return(this.outputs[this.cases[e]]||this.otherwise).evaluate(t)},r.prototype.eachChild=function(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)},r.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.outputs.map(function(t){return t.possibleOutputs()})).concat(this.otherwise.possibleOutputs());var t},e.exports=r},{"../values":147}],136:[function(t,e,n){"use strict";var i=t("../types").NumberType,r=t("../stops").findStopLessThanOrEqualTo,o=function(t,e,n){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(var i=0,r=n;i<r.length;i+=1){var o=r[i],a=o[1];this.labels.push(o[0]),this.outputs.push(a)}};o.parse=function(t,e){var n=t[1],r=t.slice(2);if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(!(n=e.parse(n,1,i)))return null;var a=[],s=null;e.expectedType&&"value"!==e.expectedType.kind&&(s=e.expectedType),r.unshift(-1/0);for(var u=0;u<r.length;u+=2){var l=r[u],c=r[u+1],p=u+1,h=u+2;if("number"!=typeof l)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',p);if(a.length&&a[a.length-1][0]>=l)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',p);var f=e.parse(c,h,s);if(!f)return null;s=s||f.type,a.push([l,f])}return new o(s,n,a)},o.prototype.evaluate=function(t){var e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);var i=this.input.evaluate(t);if(i<=e[0])return n[0].evaluate(t);var o=e.length;return i>=e[o-1]?n[o-1].evaluate(t):n[r(e,i)].evaluate(t)},o.prototype.eachChild=function(t){t(this.input);for(var e=0,n=this.outputs;e<n.length;e+=1)t(n[e])},o.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.outputs.map(function(t){return t.possibleOutputs()}));var t},e.exports=o},{"../stops":145,"../types":146}],137:[function(t,e,n){"use strict";var i=function(t,e){this.type=e,this.name=t};i.parse=function(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");var n=t[1];return e.scope.has(n)?new i(n,e.scope.get(n).type):e.error('Unknown variable "'+n+'". Make sure "'+n+'" has been bound in an enclosing "let" expression before using it.',1)},i.prototype.evaluate=function(t){return t.scope.get(this.name).evaluate(t)},i.prototype.eachChild=function(){},i.prototype.possibleOutputs=function(){return[void 0]},e.exports=i},{}],138:[function(t,e,n){"use strict";var i=t("./scope"),r=t("./values").Color,o=["Unknown","Point","LineString","Polygon"],a=function(){this.scope=new i,this._parseColorCache={}};a.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},a.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?o[this.feature.type]:this.feature.type:null},a.prototype.properties=function(){return this.feature&&this.feature.properties||{}},a.prototype.pushScope=function(t){this.scope=this.scope.concat(t)},a.prototype.popScope=function(){this.scope=this.scope.parent},a.prototype.parseColor=function(t){var e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=r.parse(t)),e},e.exports=a},{"./scope":144,"./values":147}],139:[function(t,e,n){"use strict";function i(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in m}function r(t,e,n){void 0===n&&(n={});var i=new u(m,[],function(t){var e={color:I,string:L,number:M,enum:L,boolean:z};return"array"===t.type?R(e[t.value]||D,t.length):e[t.type]||null}(e)),r=i.parse(t);return r?_(!1===n.handleErrors?new x(r):new w(r,e)):b(i.errors)}function o(t,e,n){if(void 0===n&&(n={}),"error"===(t=r(t,e,n)).result)return t;var i=t.value.expression,o=y.isFeatureConstant(i);if(!o&&!e["property-function"])return b([new s("","property expressions not supported")]);var a=y.isGlobalPropertyConstant(i,["zoom"]);if(!a&&!1===e["zoom-function"])return b([new s("","zoom expressions not supported")]);var u=function t(e){var n=null;if(e instanceof d)n=t(e.result);else if(e instanceof f)for(var i=0,r=e.args;i<r.length&&!(n=t(r[i]));i+=1);else(e instanceof p||e instanceof h)&&e.input instanceof c&&"zoom"===e.input.name&&(n=e);return n instanceof s?n:(e.eachChild(function(e){var i=t(e);i instanceof s?n=i:!n&&i?n=new s("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&i&&n!==i&&(n=new s("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n)}(i);return u||a?u instanceof s?b([u]):u instanceof h&&"piecewise-constant"===e.function?b([new s("",'"interpolate" expressions cannot be used with this property')]):_(u?new C(o?"camera":"composite",t.value,u):new E(o?"constant":"source",t.value)):b([new s("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}var a=t("../util/extend"),s=t("./parsing_error"),u=t("./parsing_context"),l=t("./evaluation_context"),c=t("./compound_expression").CompoundExpression,p=t("./definitions/step"),h=t("./definitions/interpolate"),f=t("./definitions/coalesce"),d=t("./definitions/let"),m=t("./definitions"),y=t("./is_constant"),g=t("./runtime_error"),v=t("../util/result"),_=v.success,b=v.error,x=function(t){this.expression=t};x.prototype.evaluate=function(t,e){return this._evaluator||(this._evaluator=new l),this._evaluator.globals=t,this._evaluator.feature=e,this.expression.evaluate(this._evaluator)};var w=function(t){function e(e,n){t.call(this,e),this._warningHistory={},this._defaultValue=function(t){return"color"===t.type&&P(t.default)?new T(0,0,0,0):"color"===t.type?T.parse(t.default)||null:void 0===t.default?null:t.default}(n),"enum"===n.type&&(this._enumValues=n.values)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.evaluate=function(t,e){this._evaluator||(this._evaluator=new l),this._evaluator.globals=t,this._evaluator.feature=e;try{var n=this.expression.evaluate(this._evaluator);if(null===n||void 0===n)return this._defaultValue;if(this._enumValues&&!(n in this._enumValues))throw new g("Expected value to be one of "+Object.keys(this._enumValues).map(function(t){return JSON.stringify(t)}).join(", ")+", but found "+JSON.stringify(n)+" instead.");return n}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}},e}(x),E=function(t,e){this.kind=t,this._styleExpression=e};E.prototype.evaluate=function(t,e){return this._styleExpression.evaluate(t,e)};var C=function(t,e,n){this.kind=t,this.zoomStops=n.labels,this._styleExpression=e,n instanceof h&&(this._interpolationType=n.interpolation)};C.prototype.evaluate=function(t,e){return this._styleExpression.evaluate(t,e)},C.prototype.interpolationFactor=function(t,e,n){return this._interpolationType?h.interpolationFactor(this._interpolationType,t,e,n):0};var O=t("../function"),P=O.isFunction,S=O.createFunction,T=t("./values").Color,k=function(t,e){this._parameters=t,this._specification=e,a(this,S(this._parameters,this._specification))};k.deserialize=function(t){return new k(t._parameters,t._specification)},k.serialize=function(t){return{_parameters:t._parameters,_specification:t._specification}},e.exports={StyleExpression:x,StyleExpressionWithErrorHandling:w,isExpression:i,createExpression:r,createPropertyExpression:o,normalizePropertyExpression:function(t,e){if(P(t))return new k(t,e);if(i(t)){var n=o(t,e);if("error"===n.result)throw new Error(n.value.map(function(t){return t.key+": "+t.message}).join(", "));return n.value}var r=t;return"string"==typeof t&&"color"===e.type&&(r=T.parse(t)),{kind:"constant",evaluate:function(){return r}}},ZoomConstantExpression:E,ZoomDependentExpression:C,StylePropertyFunction:k};var A=t("./types"),I=A.ColorType,L=A.StringType,M=A.NumberType,z=A.BooleanType,D=A.ValueType,R=A.array},{"../function":149,"../util/extend":156,"../util/result":160,"./compound_expression":123,"./definitions":131,"./definitions/coalesce":128,"./definitions/interpolate":132,"./definitions/let":133,"./definitions/step":136,"./evaluation_context":138,"./is_constant":140,"./parsing_context":141,"./parsing_error":142,"./runtime_error":143,"./types":146,"./values":147}],140:[function(t,e,n){"use strict";var i=t("./compound_expression").CompoundExpression;e.exports={isFeatureConstant:function t(e){if(e instanceof i){if("get"===e.name&&1===e.args.length)return!1;if("has"===e.name&&1===e.args.length)return!1;if("properties"===e.name||"geometry-type"===e.name||"id"===e.name)return!1;if(/^filter-/.test(e.name))return!1}var n=!0;return e.eachChild(function(e){n&&!t(e)&&(n=!1)}),n},isGlobalPropertyConstant:function t(e,n){if(e instanceof i&&n.indexOf(e.name)>=0)return!1;var r=!0;return e.eachChild(function(e){r&&!t(e,n)&&(r=!1)}),r}}},{"./compound_expression":123}],141:[function(t,e,n){"use strict";var i=t("./scope"),r=t("./types").checkSubtype,o=t("./parsing_error"),a=t("./definitions/literal"),s=t("./definitions/assertion"),u=t("./definitions/array"),l=t("./definitions/coercion"),c=function(t,e,n,r,o){void 0===e&&(e=[]),void 0===r&&(r=new i),void 0===o&&(o=[]),this.registry=t,this.path=e,this.key=e.map(function(t){return"["+t+"]"}).join(""),this.scope=r,this.errors=o,this.expectedType=n};c.prototype.parse=function(e,n,i,r,o){void 0===o&&(o={});var c=this;if(n&&(c=c.concat(n,i,r)),null!==e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e||(e=["literal",e]),Array.isArray(e)){if(0===e.length)return c.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var p=e[0];if("string"!=typeof p)return c.error("Expression name must be a string, but found "+typeof p+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var h=c.registry[p];if(h){var f=h.parse(e,c);if(!f)return null;if(c.expectedType){var d=c.expectedType,m=f.type;if("string"!==d.kind&&"number"!==d.kind&&"boolean"!==d.kind||"value"!==m.kind)if("array"===d.kind&&"value"===m.kind)o.omitTypeAnnotations||(f=new u(d,f));else if("color"!==d.kind||"value"!==m.kind&&"string"!==m.kind){if(c.checkSubtype(c.expectedType,f.type))return null}else o.omitTypeAnnotations||(f=new l(d,[f]));else o.omitTypeAnnotations||(f=new s(d,[f]))}if(!(f instanceof a)&&function(e){var n=t("./compound_expression").CompoundExpression,i=t("./is_constant"),r=i.isGlobalPropertyConstant,o=i.isFeatureConstant;if(e instanceof t("./definitions/var"))return!1;if(e instanceof n&&"error"===e.name)return!1;var s=!0;return e.eachChild(function(t){t instanceof a||(s=!1)}),!!s&&o(e)&&r(e,["zoom","heatmap-density"])}(f)){var y=new(t("./evaluation_context"));try{f=new a(f.type,f.evaluate(y))}catch(e){return c.error(e.message),null}}return f}return c.error('Unknown expression "'+p+'". If you wanted a literal array, use ["literal", [...]].',0)}return c.error(void 0===e?"'undefined' value invalid. Use null instead.":"object"==typeof e?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof e+" instead.")},c.prototype.concat=function(t,e,n){var i="number"==typeof t?this.path.concat(t):this.path,r=n?this.scope.concat(n):this.scope;return new c(this.registry,i,e||null,r,this.errors)},c.prototype.error=function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];var i=""+this.key+e.map(function(t){return"["+t+"]"}).join("");this.errors.push(new o(i,t))},c.prototype.checkSubtype=function(t,e){var n=r(t,e);return n&&this.error(n),n},e.exports=c},{"./compound_expression":123,"./definitions/array":124,"./definitions/assertion":125,"./definitions/coercion":129,"./definitions/literal":134,"./definitions/var":137,"./evaluation_context":138,"./is_constant":140,"./parsing_error":142,"./scope":144,"./types":146}],142:[function(t,e,n){"use strict";var i=function(t){function e(e,n){t.call(this,n),this.message=n,this.key=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Error);e.exports=i},{}],143:[function(t,e,n){"use strict";var i=function(t){this.name="ExpressionEvaluationError",this.message=t};i.prototype.toJSON=function(){return this.message},e.exports=i},{}],144:[function(t,e,n){"use strict";var i=function(t,e){void 0===e&&(e=[]),this.parent=t,this.bindings={};for(var n=0,i=e;n<i.length;n+=1){var r=i[n];this.bindings[r[0]]=r[1]}};i.prototype.concat=function(t){return new i(this,t)},i.prototype.get=function(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(t+" not found in scope.")},i.prototype.has=function(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)},e.exports=i},{}],145:[function(t,e,n){"use strict";var i=t("./runtime_error");e.exports={findStopLessThanOrEqualTo:function(t,e){for(var n,r=0,o=t.length-1,a=0;r<=o;){if(e===(n=t[a=Math.floor((r+o)/2)])||e>n&&e<t[a+1])return a;if(n<e)r=a+1;else{if(!(n>e))throw new i("Input is not a number.");o=a-1}}return Math.max(a-1,0)}}},{"./runtime_error":143}],146:[function(t,e,n){"use strict";function i(t,e){return{kind:"array",itemType:t,N:e}}function r(t){if("array"===t.kind){var e=r(t.itemType);return"number"==typeof t.N?"array<"+e+", "+t.N+">":"value"===t.itemType.kind?"array":"array<"+e+">"}return t.kind}var o={kind:"null"},a={kind:"number"},s={kind:"string"},u={kind:"boolean"},l={kind:"color"},c={kind:"object"},p={kind:"value"},h=[o,a,s,u,l,c,i(p)];e.exports={NullType:o,NumberType:a,StringType:s,BooleanType:u,ColorType:l,ObjectType:c,ValueType:p,array:i,ErrorType:{kind:"error"},toString:r,checkSubtype:function t(e,n){if("error"===n.kind)return null;if("array"===e.kind){if("array"===n.kind&&!t(e.itemType,n.itemType)&&("number"!=typeof e.N||e.N===n.N))return null}else{if(e.kind===n.kind)return null;if("value"===e.kind)for(var i=0,o=h;i<o.length;i+=1)if(!t(o[i],n))return null}return"Expected "+r(e)+" but found "+r(n)+" instead."}}},{}],147:[function(t,e,n){"use strict";var i=t("../util/color"),r=t("./types"),o=r.NullType,a=r.NumberType,s=r.StringType,u=r.BooleanType,l=r.ColorType,c=r.ObjectType,p=r.ValueType,h=r.array;e.exports={Color:i,validateRGBA:function(t,e,n,i){return"number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof n&&n>=0&&n<=255?void 0===i||"number"==typeof i&&i>=0&&i<=1?null:"Invalid rgba value ["+[t,e,n,i].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof i?[t,e,n,i]:[t,e,n]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."},isValue:function t(e){if(null===e)return!0;if("string"==typeof e)return!0;if("boolean"==typeof e)return!0;if("number"==typeof e)return!0;if(e instanceof i)return!0;if(Array.isArray(e)){for(var n=0,r=e;n<r.length;n+=1)if(!t(r[n]))return!1;return!0}if("object"==typeof e){for(var o in e)if(!t(e[o]))return!1;return!0}return!1},typeOf:function t(e){if(null===e)return o;if("string"==typeof e)return s;if("boolean"==typeof e)return u;if("number"==typeof e)return a;if(e instanceof i)return l;if(Array.isArray(e)){for(var n,r=e.length,f=0,d=e;f<d.length;f+=1){var m=t(d[f]);if(n){if(n===m)continue;n=p;break}n=m}return h(n||p,r)}return c}}},{"../util/color":153,"./types":146}],148:[function(t,e,n){"use strict";function i(t){if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3===t.length&&(Array.isArray(t[1])||Array.isArray(t[2]));case"any":case"all":for(var e=0,n=t.slice(1);e<n.length;e+=1){var r=n[e];if(!i(r)&&"boolean"!=typeof r)return!1}return!0;default:return!0}}function r(t,e){return t<e?-1:t>e?1:0}function o(t){if(!t)return!0;var e=t[0];return t.length<=1?"any"!==e:"=="===e?a(t[1],t[2],"=="):"!="===e?l(a(t[1],t[2],"==")):"<"===e||">"===e||"<="===e||">="===e?a(t[1],t[2],e):"any"===e?function(t){return["any"].concat(t.map(o))}(t.slice(1)):"all"===e?["all"].concat(t.slice(1).map(o)):"none"===e?["all"].concat(t.slice(1).map(o).map(l)):"in"===e?s(t[1],t.slice(2)):"!in"===e?l(s(t[1],t.slice(2))):"has"===e?u(t[1]):"!has"!==e||l(u(t[1]))}function a(t,e,n){switch(t){case"$type":return["filter-type-"+n,e];case"$id":return["filter-id-"+n,e];default:return["filter-"+n,t,e]}}function s(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(function(t){return typeof t!=typeof e[0]})?["filter-in-large",t,["literal",e.sort(r)]]:["filter-in-small",t,["literal",e]]}}function u(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function l(t){return["!",t]}var c=t("../expression").createExpression;e.exports=function(t){if(!t)return function(){return!0};i(t)||(t=o(t));var e=c(t,p);if("error"===e.result)throw new Error(e.value.map(function(t){return t.key+": "+t.message}).join(", "));return function(t,n){return e.value.evaluate(t,n)}},e.exports.isExpressionFilter=i;var p={type:"boolean",default:!1,function:!0,"property-function":!0,"zoom-function":!0}},{"../expression":139}],149:[function(t,e,n){"use strict";function i(t){return t}function r(t,e,n){return void 0!==t?t:void 0!==e?e:void 0!==n?n:void 0}function o(t,e,n,i,o){return r(typeof n===o?i[n]:void 0,t.default,e.default)}function a(t,e,n){if("number"!==f(n))return r(t.default,e.default);var i=t.stops.length;if(1===i)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[i-1][0])return t.stops[i-1][1];var o=l(t.stops,n);return t.stops[o][1]}function s(t,e,n){var o=void 0!==t.base?t.base:1;if("number"!==f(n))return r(t.default,e.default);var a=t.stops.length;if(1===a)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[a-1][0])return t.stops[a-1][1];var s=l(t.stops,n),u=function(t,e,n,i){var r=i-n,o=t-n;return 0===r?0:1===e?o/r:(Math.pow(e,o)-1)/(Math.pow(e,r)-1)}(n,o,t.stops[s][0],t.stops[s+1][0]),p=t.stops[s][1],h=t.stops[s+1][1],m=d[e.type]||i;if(t.colorSpace&&"rgb"!==t.colorSpace){var y=c[t.colorSpace];m=function(t,e){return y.reverse(y.interpolate(y.forward(t),y.forward(e),u))}}return"function"==typeof p.evaluate?{evaluate:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=p.evaluate.apply(void 0,t),i=h.evaluate.apply(void 0,t);if(void 0!==n&&void 0!==i)return m(n,i,u)}}:m(p,h,u)}function u(t,e,n){return"color"===e.type?n=p.parse(n):f(n)===e.type||"enum"===e.type&&e.values[n]||(n=void 0),r(n,t.default,e.default)}function l(t,e){for(var n,i=0,r=t.length-1,o=0;i<=r;){if(e===(n=t[o=Math.floor((i+r)/2)][0])||e>n&&e<t[o+1][0])return o;n<e?i=o+1:n>e&&(r=o-1)}return Math.max(o-1,0)}var c=t("../util/color_spaces"),p=t("../util/color"),h=t("../util/extend"),f=t("../util/get_type"),d=t("../util/interpolate"),m=t("../expression/definitions/interpolate");e.exports={createFunction:function t(e,n){var i,l,f,d=e.stops&&"object"==typeof e.stops[0][0],y=d||!(d||void 0!==e.property),g=e.type||("interpolated"===n.function?"exponential":"interval");if("color"===n.type&&((e=h({},e)).stops&&(e.stops=e.stops.map(function(t){return[t[0],p.parse(t[1])]})),e.default=p.parse(e.default?e.default:n.default)),e.colorSpace&&"rgb"!==e.colorSpace&&!c[e.colorSpace])throw new Error("Unknown color space: "+e.colorSpace);if("exponential"===g)i=s;else if("interval"===g)i=a;else if("categorical"===g){i=o,l=Object.create(null);for(var v=0,_=e.stops;v<_.length;v+=1){var b=_[v];l[b[0]]=b[1]}f=typeof e.stops[0][0]}else{if("identity"!==g)throw new Error('Unknown function type "'+g+'"');i=u}if(d){for(var x={},w=[],E=0;E<e.stops.length;E++){var C=e.stops[E],O=C[0].zoom;void 0===x[O]&&(x[O]={zoom:O,type:e.type,property:e.property,default:e.default,stops:[]},w.push(O)),x[O].stops.push([C[0].value,C[1]])}for(var P=[],S=0,T=w;S<T.length;S+=1){var k=T[S];P.push([x[k].zoom,t(x[k],n)])}return{kind:"composite",interpolationFactor:m.interpolationFactor.bind(void 0,{name:"linear"}),zoomStops:P.map(function(t){return t[0]}),evaluate:function(t,i){var r=t.zoom;return s({stops:P,base:e.base},n,r).evaluate(r,i)}}}return y?{kind:"camera",interpolationFactor:"exponential"===g?m.interpolationFactor.bind(void 0,{name:"exponential",base:void 0!==e.base?e.base:1}):function(){return 0},zoomStops:e.stops.map(function(t){return t[0]}),evaluate:function(t){return i(e,n,t.zoom,l,f)}}:{kind:"source",evaluate:function(t,o){var a=o&&o.properties?o.properties[e.property]:void 0;return void 0===a?r(e.default,n.default):i(e,n,a,l,f)}}},isFunction:function(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}}},{"../expression/definitions/interpolate":132,"../util/color":153,"../util/color_spaces":154,"../util/extend":156,"../util/get_type":157,"../util/interpolate":158}],150:[function(t,e,n){"use strict";function i(t){var e=typeof t;if("number"===e||"boolean"===e||"string"===e||void 0===t||null===t)return JSON.stringify(t);if(Array.isArray(t)){for(var n="[",r=0,o=t;r<o.length;r+=1)n+=i(o[r])+",";return n+"]"}for(var a=Object.keys(t).sort(),s="{",u=0;u<a.length;u++)s+=JSON.stringify(a[u])+":"+i(t[a[u]])+",";return s+"}"}function r(t){for(var e="",n=0,r=o;n<r.length;n+=1)e+="/"+i(t[r[n]]);return e}var o=t("./util/ref_properties");e.exports=function(t){for(var e={},n=0;n<t.length;n++){var i=r(t[n]),o=e[i];o||(o=e[i]=[]),o.push(t[n])}var a=[];for(var s in e)a.push(e[s]);return a}},{"./util/ref_properties":159}],151:[function(t,e,n){"use strict";e.exports=t("./v8.json")},{"./v8.json":152}],152:[function(t,e,n){e.exports={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image","source_canvas"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.0511,180,85.0511]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.0511,180,85.0511]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.0511,180,85.0511]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_canvas:{type:{required:!0,type:"enum",values:{canvas:{}}},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}},animate:{type:"boolean",default:"true"},canvas:{type:"string",required:!0}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_fill:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_circle:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_line:{"line-cap":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{butt:{},round:{},square:{}},default:"butt"},"line-join":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{bevel:{},round:{},miter:{}},default:"miter"},"line-miter-limit":{type:"number",default:2,function:"interpolated","zoom-function":!0,requires:[{"line-join":"miter"}]},"line-round-limit":{type:"number",default:1.05,function:"interpolated","zoom-function":!0,requires:[{"line-join":"round"}]},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_symbol:{"symbol-placement":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{point:{},line:{}},default:"point"},"symbol-spacing":{type:"number",default:250,minimum:1,function:"interpolated","zoom-function":!0,units:"pixels",requires:[{"symbol-placement":"line"}]},"symbol-avoid-edges":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1},"icon-allow-overlap":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["icon-image"]},"icon-ignore-placement":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["icon-image"]},"icon-optional":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["icon-image","text-field"]},"icon-rotation-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"]},"icon-size":{type:"number",default:1,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,units:"factor of the original icon size",requires:["icon-image"]},"icon-text-fit":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"]},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",function:"interpolated","zoom-function":!0,requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}]},"icon-image":{type:"string",function:"piecewise-constant","zoom-function":!0,"property-function":!0,tokens:!0},"icon-rotate":{type:"number",default:0,period:360,function:"interpolated","zoom-function":!0,"property-function":!0,units:"degrees",requires:["icon-image"]},"icon-padding":{type:"number",default:2,minimum:0,function:"interpolated","zoom-function":!0,units:"pixels",requires:["icon-image"]},"icon-keep-upright":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":"line"}]},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,"property-function":!0,requires:["icon-image"]},"icon-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"]},"icon-pitch-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"]},"text-pitch-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"]},"text-rotation-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"]},"text-field":{type:"string",function:"piecewise-constant","zoom-function":!0,"property-function":!0,default:"",tokens:!0},"text-font":{type:"array",value:"string",function:"piecewise-constant","zoom-function":!0,"property-function":!0,default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"]},"text-size":{type:"number",default:16,minimum:0,units:"pixels",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-line-height":{type:"number",default:1.2,units:"ems",function:"interpolated","zoom-function":!0,requires:["text-field"]},"text-letter-spacing":{type:"number",default:0,units:"ems",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-justify":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{left:{},center:{},right:{}},default:"center",requires:["text-field"]},"text-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field"]},"text-max-angle":{type:"number",default:45,units:"degrees",function:"interpolated","zoom-function":!0,requires:["text-field",{"symbol-placement":"line"}]},"text-rotate":{type:"number",default:0,period:360,units:"degrees",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",function:"interpolated","zoom-function":!0,requires:["text-field"]},"text-keep-upright":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":"line"}]},"text-transform":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"]},"text-offset":{type:"array",value:"number",units:"ems",function:"interpolated","zoom-function":!0,"property-function":!0,length:2,default:[0,0],requires:["text-field"]},"text-allow-overlap":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["text-field"]},"text-ignore-placement":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["text-field"]},"text-optional":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["text-field","icon-image"]},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:22,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},transition:!1,"zoom-function":!0,"property-function":!1,function:"piecewise-constant"},position:{type:"array",default:[1.15,210,30],length:3,value:"number",transition:!0,function:"interpolated","zoom-function":!0,"property-function":!1},color:{type:"color",default:"#ffffff",function:"interpolated","zoom-function":!0,"property-function":!1,transition:!0},intensity:{type:"number",default:.5,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!1,transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!0},"fill-opacity":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:1,minimum:0,maximum:1,transition:!0},"fill-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"fill-pattern"}]},"fill-outline-color":{type:"color",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}]},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"fill-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["fill-translate"]},"fill-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,transition:!0}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!1,default:1,minimum:0,maximum:1,transition:!0},"fill-extrusion-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"fill-extrusion-pattern"}]},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"fill-extrusion-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"]},"fill-extrusion-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,transition:!0},"fill-extrusion-height":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:0,minimum:0,units:"meters",transition:!0},"fill-extrusion-base":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"]}},paint_line:{"line-opacity":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:1,minimum:0,maximum:1,transition:!0},"line-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"line-pattern"}]},"line-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"line-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["line-translate"]},"line-width":{type:"number",default:1,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-gap-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-offset":{type:"number",default:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-blur":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-dasharray":{type:"array",value:"number",function:"piecewise-constant","zoom-function":!0,minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}]},"line-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,transition:!0}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"circle-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-blur":{type:"number",default:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"circle-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["circle-translate"]},"circle-pitch-scale":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map"},"circle-pitch-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"viewport"},"circle-stroke-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"circle-stroke-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"heatmap-weight":{type:"number",default:1,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!1},"heatmap-intensity":{type:"number",default:1,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!1,transition:!0},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],function:"interpolated","zoom-function":!1,"property-function":!1,transition:!1},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!1,transition:!0}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["icon-image"]},"icon-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["icon-image"]},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["icon-image"]},"icon-halo-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-halo-blur":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"]},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["text-field"]},"text-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["text-field"]},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["text-field"]},"text-halo-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-halo-blur":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"]}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"raster-hue-rotate":{type:"number",default:0,period:360,function:"interpolated","zoom-function":!0,transition:!0,units:"degrees"},"raster-brightness-min":{type:"number",function:"interpolated","zoom-function":!0,default:0,minimum:0,maximum:1,transition:!0},"raster-brightness-max":{type:"number",function:"interpolated","zoom-function":!0,default:1,minimum:0,maximum:1,transition:!0},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"raster-fade-duration":{type:"number",default:300,minimum:0,function:"interpolated","zoom-function":!0,transition:!1,units:"milliseconds"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,function:"interpolated","zoom-function":!0,transition:!1},"hillshade-illumination-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"viewport"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"hillshade-shadow-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,transition:!0},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",function:"interpolated","zoom-function":!0,transition:!0},"hillshade-accent-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,transition:!0}},paint_background:{"background-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,transition:!0,requires:[{"!":"background-pattern"}]},"background-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,transition:!0},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,transition:!0}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}}}},{}],153:[function(t,e,n){"use strict";var i=t("csscolorparser").parseCSSColor,r=function(t,e,n,i){void 0===i&&(i=1),this.r=t,this.g=e,this.b=n,this.a=i};r.parse=function(t){if(t){if(t instanceof r)return t;if("string"==typeof t){var e=i(t);if(e)return new r(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3])}}},r.prototype.toString=function(){var t=this;return"rgba("+[this.r,this.g,this.b].map(function(e){return Math.round(255*e/t.a)}).concat(this.a).join(",")+")"},r.black=new r(0,0,0,1),r.white=new r(1,1,1,1),r.transparent=new r(0,0,0,0),e.exports=r},{csscolorparser:13}],154:[function(t,e,n){"use strict";function i(t){return t>g?Math.pow(t,1/3):t/y+d}function r(t){return t>m?t*t*t:y*(t-d)}function o(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function a(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function s(t){var e=a(t.r),n=a(t.g),r=a(t.b),o=i((.4124564*e+.3575761*n+.1804375*r)/p),s=i((.2126729*e+.7151522*n+.072175*r)/h);return{l:116*s-16,a:500*(o-s),b:200*(s-i((.0193339*e+.119192*n+.9503041*r)/f)),alpha:t.a}}function u(t){var e=(t.l+16)/116,n=isNaN(t.a)?e:e+t.a/500,i=isNaN(t.b)?e:e-t.b/200;return e=h*r(e),n=p*r(n),i=f*r(i),new l(o(3.2404542*n-1.5371385*e-.4985314*i),o(-.969266*n+1.8760108*e+.041556*i),o(.0556434*n-.2040259*e+1.0572252*i),t.alpha)}var l=t("./color"),c=t("./interpolate").number,p=.95047,h=1,f=1.08883,d=4/29,m=6/29,y=3*m*m,g=m*m*m,v=Math.PI/180,_=180/Math.PI;e.exports={lab:{forward:s,reverse:u,interpolate:function(t,e,n){return{l:c(t.l,e.l,n),a:c(t.a,e.a,n),b:c(t.b,e.b,n),alpha:c(t.alpha,e.alpha,n)}}},hcl:{forward:function(t){var e=s(t),n=e.l,i=e.a,r=e.b,o=Math.atan2(r,i)*_;return{h:o<0?o+360:o,c:Math.sqrt(i*i+r*r),l:n,alpha:t.a}},reverse:function(t){var e=t.h*v,n=t.c;return u({l:t.l,a:Math.cos(e)*n,b:Math.sin(e)*n,alpha:t.alpha})},interpolate:function(t,e,n){return{h:function(t,e,n){var i=e-t;return t+n*(i>180||i<-180?i-360*Math.round(i/360):i)}(t.h,e.h,n),c:c(t.c,e.c,n),l:c(t.l,e.l,n),alpha:c(t.alpha,e.alpha,n)}}}}},{"./color":153,"./interpolate":158}],155:[function(t,e,n){"use strict";e.exports=function t(e,n){if(Array.isArray(e)){if(!Array.isArray(n)||e.length!==n.length)return!1;for(var i=0;i<e.length;i++)if(!t(e[i],n[i]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==n){if("object"!=typeof n)return!1;if(Object.keys(e).length!==Object.keys(n).length)return!1;for(var r in e)if(!t(e[r],n[r]))return!1;return!0}return e===n}},{}],156:[function(t,e,n){"use strict";e.exports=function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];for(var i=0,r=e;i<r.length;i+=1){var o=r[i];for(var a in o)t[a]=o[a]}return t}},{}],157:[function(t,e,n){"use strict";e.exports=function(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}},{}],158:[function(t,e,n){"use strict";function i(t,e,n){return t*(1-n)+e*n}var r=t("./color");e.exports={number:i,color:function(t,e,n){return new r(i(t.r,e.r,n),i(t.g,e.g,n),i(t.b,e.b,n),i(t.a,e.a,n))},array:function(t,e,n){return t.map(function(t,r){return i(t,e[r],n)})}}},{"./color":153}],159:[function(t,e,n){"use strict";e.exports=["type","source","source-layer","minzoom","maxzoom","filter","layout"]},{}],160:[function(t,e,n){"use strict";e.exports={success:function(t){return{result:"success",value:t}},error:function(t){return{result:"error",value:t}}}},{}],161:[function(t,e,n){"use strict";function i(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}e.exports=i,e.exports.deep=function t(e){return Array.isArray(e)?e.map(t):i(e)}},{}],162:[function(t,e,n){"use strict";var i=t("../util/extend"),r=t("../util/unbundle_jsonlint"),o=t("../expression").isExpression,a=t("../function").isFunction;e.exports=function(e){var n=t("./validate_function"),s=t("./validate_expression"),u=t("./validate_object"),l={"*":function(){return[]},array:t("./validate_array"),boolean:t("./validate_boolean"),number:t("./validate_number"),color:t("./validate_color"),constants:t("./validate_constants"),enum:t("./validate_enum"),filter:t("./validate_filter"),function:t("./validate_function"),layer:t("./validate_layer"),object:t("./validate_object"),source:t("./validate_source"),light:t("./validate_light"),string:t("./validate_string")},c=e.value,p=e.valueSpec,h=e.styleSpec;return p.function&&a(r(c))?n(e):p.function&&o(r.deep(c))?s(e):p.type&&l[p.type]?l[p.type](e):u(i({},e,{valueSpec:p.type?h[p.type]:p}))}},{"../expression":139,"../function":149,"../util/extend":156,"../util/unbundle_jsonlint":161,"./validate_array":163,"./validate_boolean":164,"./validate_color":165,"./validate_constants":166,"./validate_enum":167,"./validate_expression":168,"./validate_filter":169,"./validate_function":170,"./validate_layer":172,"./validate_light":174,"./validate_number":175,"./validate_object":176,"./validate_source":179,"./validate_string":180}],163:[function(t,e,n){"use strict";var i=t("../util/get_type"),r=t("./validate"),o=t("../error/validation_error");e.exports=function(t){var e=t.value,n=t.valueSpec,a=t.style,s=t.styleSpec,u=t.key,l=t.arrayElementValidator||r;if("array"!==i(e))return[new o(u,e,"array expected, "+i(e)+" found")];if(n.length&&e.length!==n.length)return[new o(u,e,"array length "+n.length+" expected, length "+e.length+" found")];if(n["min-length"]&&e.length<n["min-length"])return[new o(u,e,"array length at least "+n["min-length"]+" expected, length "+e.length+" found")];var c={type:n.value};s.$version<7&&(c.function=n.function),"object"===i(n.value)&&(c=n.value);for(var p=[],h=0;h<e.length;h++)p=p.concat(l({array:e,arrayIndex:h,value:e[h],valueSpec:c,style:a,styleSpec:s,key:u+"["+h+"]"}));return p}},{"../error/validation_error":122,"../util/get_type":157,"./validate":162}],164:[function(t,e,n){"use strict";var i=t("../util/get_type"),r=t("../error/validation_error");e.exports=function(t){var e=t.value,n=t.key,o=i(e);return"boolean"!==o?[new r(n,e,"boolean expected, "+o+" found")]:[]}},{"../error/validation_error":122,"../util/get_type":157}],165:[function(t,e,n){"use strict";var i=t("../error/validation_error"),r=t("../util/get_type"),o=t("csscolorparser").parseCSSColor;e.exports=function(t){var e=t.key,n=t.value,a=r(n);return"string"!==a?[new i(e,n,"color expected, "+a+" found")]:null===o(n)?[new i(e,n,'color expected, "'+n+'" found')]:[]}},{"../error/validation_error":122,"../util/get_type":157,csscolorparser:13}],166:[function(t,e,n){"use strict";var i=t("../error/validation_error");e.exports=function(t){var e=t.value;return e?[new i(t.key,e,"constants have been deprecated as of v8")]:[]}},{"../error/validation_error":122}],167:[function(t,e,n){"use strict";var i=t("../error/validation_error"),r=t("../util/unbundle_jsonlint");e.exports=function(t){var e=t.key,n=t.value,o=t.valueSpec,a=[];return Array.isArray(o.values)?-1===o.values.indexOf(r(n))&&a.push(new i(e,n,"expected one of ["+o.values.join(", ")+"], "+JSON.stringify(n)+" found")):-1===Object.keys(o.values).indexOf(r(n))&&a.push(new i(e,n,"expected one of ["+Object.keys(o.values).join(", ")+"], "+JSON.stringify(n)+" found")),a}},{"../error/validation_error":122,"../util/unbundle_jsonlint":161}],168:[function(t,e,n){"use strict";var i=t("../error/validation_error"),r=t("../expression"),o=r.createExpression,a=r.createPropertyExpression,s=t("../util/unbundle_jsonlint");e.exports=function(t){var e=("property"===t.expressionContext?a:o)(s.deep(t.value),t.valueSpec);return"error"===e.result?e.value.map(function(e){return new i(""+t.key+e.key,t.value,e.message)}):"property"===t.expressionContext&&"text-font"===t.propertyKey&&-1!==e.value._styleExpression.expression.possibleOutputs().indexOf(void 0)?[new i(t.key,t.value,'Invalid data expression for "text-font". Output values must be contained as literals within the expression.')]:[]}},{"../error/validation_error":122,"../expression":139,"../util/unbundle_jsonlint":161}],169:[function(t,e,n){"use strict";var i=t("../error/validation_error"),r=t("./validate_expression"),o=t("./validate_enum"),a=t("../util/get_type"),s=t("../util/unbundle_jsonlint"),u=t("../util/extend"),l=t("../feature_filter").isExpressionFilter;e.exports=function(t){return l(s.deep(t.value))?r(u({},t,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function t(e){var n=e.value,r=e.key;if("array"!==a(n))return[new i(r,n,"array expected, "+a(n)+" found")];var u,l=e.styleSpec,c=[];if(n.length<1)return[new i(r,n,"filter array must have at least 1 element")];switch(c=c.concat(o({key:r+"[0]",value:n[0],valueSpec:l.filter_operator,style:e.style,styleSpec:e.styleSpec})),s(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&"$type"===s(n[1])&&c.push(new i(r,n,'"$type" cannot be use with operator "'+n[0]+'"'));case"==":case"!=":3!==n.length&&c.push(new i(r,n,'filter array for operator "'+n[0]+'" must have 3 elements'));case"in":case"!in":n.length>=2&&"string"!==(u=a(n[1]))&&c.push(new i(r+"[1]",n[1],"string expected, "+u+" found"));for(var p=2;p<n.length;p++)u=a(n[p]),"$type"===s(n[1])?c=c.concat(o({key:r+"["+p+"]",value:n[p],valueSpec:l.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==u&&"number"!==u&&"boolean"!==u&&c.push(new i(r+"["+p+"]",n[p],"string, number, or boolean expected, "+u+" found"));break;case"any":case"all":case"none":for(var h=1;h<n.length;h++)c=c.concat(t({key:r+"["+h+"]",value:n[h],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":u=a(n[1]),2!==n.length?c.push(new i(r,n,'filter array for "'+n[0]+'" operator must have 2 elements')):"string"!==u&&c.push(new i(r+"[1]",n[1],"string expected, "+u+" found"))}return c}(t)}},{"../error/validation_error":122,"../feature_filter":148,"../util/extend":156,"../util/get_type":157,"../util/unbundle_jsonlint":161,"./validate_enum":167,"./validate_expression":168}],170:[function(t,e,n){"use strict";var i=t("../error/validation_error"),r=t("../util/get_type"),o=t("./validate"),a=t("./validate_object"),s=t("./validate_array"),u=t("./validate_number"),l=t("../util/unbundle_jsonlint");e.exports=function(t){function e(t){var e=[],s=t.value,c=t.key;if("array"!==r(s))return[new i(c,s,"array expected, "+r(s)+" found")];if(2!==s.length)return[new i(c,s,"array length 2 expected, length "+s.length+" found")];if(v){if("object"!==r(s[0]))return[new i(c,s,"object expected, "+r(s[0])+" found")];if(void 0===s[0].zoom)return[new i(c,s,"object stop key must have zoom")];if(void 0===s[0].value)return[new i(c,s,"object stop key must have value")];if(h&&h>l(s[0].zoom))return[new i(c,s[0].zoom,"stop zoom values must appear in ascending order")];l(s[0].zoom)!==h&&(h=l(s[0].zoom),p=void 0,m={}),e=e.concat(a({key:c+"[0]",value:s[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:u,value:n}}))}else e=e.concat(n({key:c+"[0]",value:s[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec},s));return e.concat(o({key:c+"[1]",value:s[1],valueSpec:f,style:t.style,styleSpec:t.styleSpec}))}function n(t,e){var n=r(t.value),o=l(t.value),a=null!==t.value?t.value:e;if(c){if(n!==c)return[new i(t.key,a,n+" stop domain type must match previous stop domain type "+c)]}else c=n;if("number"!==n&&"string"!==n&&"boolean"!==n)return[new i(t.key,a,"stop domain value must be a number, string, or boolean")];if("number"!==n&&"categorical"!==d){var s="number expected, "+n+" found";return f["property-function"]&&void 0===d&&(s+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new i(t.key,a,s)]}return"categorical"!==d||"number"!==n||isFinite(o)&&Math.floor(o)===o?"categorical"!==d&&"number"===n&&void 0!==p&&o<p?[new i(t.key,a,"stop domain values must appear in ascending order")]:(p=o,"categorical"===d&&o in m?[new i(t.key,a,"stop domain values must be unique")]:(m[o]=!0,[])):[new i(t.key,a,"integer expected, found "+o)]}var c,p,h,f=t.valueSpec,d=l(t.value.type),m={},y="categorical"!==d&&void 0===t.value.property,g=!y,v="array"===r(t.value.stops)&&"array"===r(t.value.stops[0])&&"object"===r(t.value.stops[0][0]),_=a({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(t){if("identity"===d)return[new i(t.key,t.value,'identity function may not have a "stops" property')];var n=[],o=t.value;return n=n.concat(s({key:t.key,value:o,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:e})),"array"===r(o)&&0===o.length&&n.push(new i(t.key,o,"array must have at least one stop")),n},default:function(t){return o({key:t.key,value:t.value,valueSpec:f,style:t.style,styleSpec:t.styleSpec})}}});return"identity"===d&&y&&_.push(new i(t.key,t.value,'missing required property "property"')),"identity"===d||t.value.stops||_.push(new i(t.key,t.value,'missing required property "stops"')),"exponential"===d&&"piecewise-constant"===t.valueSpec.function&&_.push(new i(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(g&&!t.valueSpec["property-function"]?_.push(new i(t.key,t.value,"property functions not supported")):y&&!t.valueSpec["zoom-function"]&&"heatmap-color"!==t.objectKey&&_.push(new i(t.key,t.value,"zoom functions not supported"))),"categorical"!==d&&!v||void 0!==t.value.property||_.push(new i(t.key,t.value,'"property" property is required')),_}},{"../error/validation_error":122,"../util/get_type":157,"../util/unbundle_jsonlint":161,"./validate":162,"./validate_array":163,"./validate_number":175,"./validate_object":176}],171:[function(t,e,n){"use strict";var i=t("../error/validation_error"),r=t("./validate_string");e.exports=function(t){var e=t.value,n=t.key,o=r(t);return o.length?o:(-1===e.indexOf("{fontstack}")&&o.push(new i(n,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&o.push(new i(n,e,'"glyphs" url must include a "{range}" token')),o)}},{"../error/validation_error":122,"./validate_string":180}],172:[function(t,e,n){"use strict";var i=t("../error/validation_error"),r=t("../util/unbundle_jsonlint"),o=t("./validate_object"),a=t("./validate_filter"),s=t("./validate_paint_property"),u=t("./validate_layout_property"),l=t("./validate"),c=t("../util/extend");e.exports=function(t){var e=[],n=t.value,p=t.key,h=t.style,f=t.styleSpec;n.type||n.ref||e.push(new i(p,n,'either "type" or "ref" is required'));var d,m=r(n.type),y=r(n.ref);if(n.id)for(var g=r(n.id),v=0;v<t.arrayIndex;v++){var _=h.layers[v];r(_.id)===g&&e.push(new i(p,n.id,'duplicate layer id "'+n.id+'", previously used at line '+_.id.__line__))}if("ref"in n)["type","source","source-layer","filter","layout"].forEach(function(t){t in n&&e.push(new i(p,n[t],'"'+t+'" is prohibited for ref layers'))}),h.layers.forEach(function(t){r(t.id)===y&&(d=t)}),d?d.ref?e.push(new i(p,n.ref,"ref cannot reference another ref layer")):m=r(d.type):e.push(new i(p,n.ref,'ref layer "'+y+'" not found'));else if("background"!==m)if(n.source){var b=h.sources&&h.sources[n.source],x=b&&r(b.type);b?"vector"===x&&"raster"===m?e.push(new i(p,n.source,'layer "'+n.id+'" requires a raster source')):"raster"===x&&"raster"!==m?e.push(new i(p,n.source,'layer "'+n.id+'" requires a vector source')):"vector"!==x||n["source-layer"]?"raster-dem"===x&&"hillshade"!==m&&e.push(new i(p,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):e.push(new i(p,n,'layer "'+n.id+'" must specify a "source-layer"')):e.push(new i(p,n.source,'source "'+n.source+'" not found'))}else e.push(new i(p,n,'missing required property "source"'));return e=e.concat(o({key:p,value:n,valueSpec:f.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return l({key:p+".type",value:n.type,valueSpec:f.layer.type,style:t.style,styleSpec:t.styleSpec,object:n,objectKey:"type"})},filter:a,layout:function(t){return o({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return u(c({layerType:m},t))}}})},paint:function(t){return o({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return s(c({layerType:m},t))}}})}}}))}},{"../error/validation_error":122,"../util/extend":156,"../util/unbundle_jsonlint":161,"./validate":162,"./validate_filter":169,"./validate_layout_property":173,"./validate_object":176,"./validate_paint_property":177}],173:[function(t,e,n){"use strict";var i=t("./validate_property");e.exports=function(t){return i(t,"layout")}},{"./validate_property":178}],174:[function(t,e,n){"use strict";var i=t("../error/validation_error"),r=t("../util/get_type"),o=t("./validate");e.exports=function(t){var e=t.value,n=t.styleSpec,a=n.light,s=t.style,u=[],l=r(e);if(void 0===e)return u;if("object"!==l)return u.concat([new i("light",e,"object expected, "+l+" found")]);for(var c in e){var p=c.match(/^(.*)-transition$/);u=u.concat(p&&a[p[1]]&&a[p[1]].transition?o({key:c,value:e[c],valueSpec:n.transition,style:s,styleSpec:n}):a[c]?o({key:c,value:e[c],valueSpec:a[c],style:s,styleSpec:n}):[new i(c,e[c],'unknown property "'+c+'"')])}return u}},{"../error/validation_error":122,"../util/get_type":157,"./validate":162}],175:[function(t,e,n){"use strict";var i=t("../util/get_type"),r=t("../error/validation_error");e.exports=function(t){var e=t.key,n=t.value,o=t.valueSpec,a=i(n);return"number"!==a?[new r(e,n,"number expected, "+a+" found")]:"minimum"in o&&n<o.minimum?[new r(e,n,n+" is less than the minimum value "+o.minimum)]:"maximum"in o&&n>o.maximum?[new r(e,n,n+" is greater than the maximum value "+o.maximum)]:[]}},{"../error/validation_error":122,"../util/get_type":157}],176:[function(t,e,n){"use strict";var i=t("../error/validation_error"),r=t("../util/get_type"),o=t("./validate");e.exports=function(t){var e=t.key,n=t.value,a=t.valueSpec||{},s=t.objectElementValidators||{},u=t.style,l=t.styleSpec,c=[],p=r(n);if("object"!==p)return[new i(e,n,"object expected, "+p+" found")];for(var h in n){var f=h.split(".")[0],d=a[f]||a["*"],m=void 0;if(s[f])m=s[f];else if(a[f])m=o;else if(s["*"])m=s["*"];else{if(!a["*"]){c.push(new i(e,n[h],'unknown property "'+h+'"'));continue}m=o}c=c.concat(m({key:(e?e+".":e)+h,value:n[h],valueSpec:d,style:u,styleSpec:l,object:n,objectKey:h},n))}for(var y in a)s[y]||a[y].required&&void 0===a[y].default&&void 0===n[y]&&c.push(new i(e,n,'missing required property "'+y+'"'));return c}},{"../error/validation_error":122,"../util/get_type":157,"./validate":162}],177:[function(t,e,n){"use strict";var i=t("./validate_property");e.exports=function(t){return i(t,"paint")}},{"./validate_property":178}],178:[function(t,e,n){"use strict";var i=t("./validate"),r=t("../error/validation_error"),o=t("../util/get_type"),a=t("../function").isFunction,s=t("../util/unbundle_jsonlint");e.exports=function(t,e){var n=t.key,u=t.style,l=t.styleSpec,c=t.value,p=t.objectKey,h=l[e+"_"+t.layerType];if(!h)return[];var f=p.match(/^(.*)-transition$/);if("paint"===e&&f&&h[f[1]]&&h[f[1]].transition)return i({key:n,value:c,valueSpec:l.transition,style:u,styleSpec:l});var d,m=t.valueSpec||h[p];if(!m)return[new r(n,c,'unknown property "'+p+'"')];if("string"===o(c)&&m["property-function"]&&!m.tokens&&(d=/^{([^}]+)}$/.exec(c)))return[new r(n,c,'"'+p+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(d[1])+" }`.")];var y=[];return"symbol"===t.layerType&&("text-field"===p&&u&&!u.glyphs&&y.push(new r(n,c,'use of "text-field" requires a style "glyphs" property')),"text-font"===p&&a(s.deep(c))&&"identity"===s(c.type)&&y.push(new r(n,c,'"text-font" does not support identity functions'))),y.concat(i({key:t.key,value:c,valueSpec:m,style:u,styleSpec:l,expressionContext:"property",propertyKey:p}))}},{"../error/validation_error":122,"../function":149,"../util/get_type":157,"../util/unbundle_jsonlint":161,"./validate":162}],179:[function(t,e,n){"use strict";var i=t("../error/validation_error"),r=t("../util/unbundle_jsonlint"),o=t("./validate_object"),a=t("./validate_enum");e.exports=function(t){var e=t.value,n=t.key,s=t.styleSpec,u=t.style;if(!e.type)return[new i(n,e,'"type" is required')];var l=r(e.type),c=[];switch(l){case"vector":case"raster":case"raster-dem":if(c=c.concat(o({key:n,value:e,valueSpec:s["source_"+l.replace("-","_")],style:t.style,styleSpec:s})),"url"in e)for(var p in e)["type","url","tileSize"].indexOf(p)<0&&c.push(new i(n+"."+p,e[p],'a source with a "url" property may not include a "'+p+'" property'));return c;case"geojson":return o({key:n,value:e,valueSpec:s.source_geojson,style:u,styleSpec:s});case"video":return o({key:n,value:e,valueSpec:s.source_video,style:u,styleSpec:s});case"image":return o({key:n,value:e,valueSpec:s.source_image,style:u,styleSpec:s});case"canvas":return o({key:n,value:e,valueSpec:s.source_canvas,style:u,styleSpec:s});default:return a({key:n+".type",value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image","canvas"]},style:u,styleSpec:s})}}},{"../error/validation_error":122,"../util/unbundle_jsonlint":161,"./validate_enum":167,"./validate_object":176}],180:[function(t,e,n){"use strict";var i=t("../util/get_type"),r=t("../error/validation_error");e.exports=function(t){var e=t.value,n=t.key,o=i(e);return"string"!==o?[new r(n,e,"string expected, "+o+" found")]:[]}},{"../error/validation_error":122,"../util/get_type":157}],181:[function(t,e,n){"use strict";function i(t,e){var n=[];return n=n.concat(s({key:"",value:t,valueSpec:(e=e||u).$root,styleSpec:e,style:t,objectElementValidators:{glyphs:l,"*":function(){return[]}}})),t.constants&&(n=n.concat(a({key:"constants",value:t.constants,style:t,styleSpec:e}))),r(n)}function r(t){return[].concat(t).sort(function(t,e){return t.line-e.line})}function o(t){return function(){return r(t.apply(this,arguments))}}var a=t("./validate/validate_constants"),s=t("./validate/validate"),u=t("./reference/latest"),l=t("./validate/validate_glyphs_url");i.source=o(t("./validate/validate_source")),i.light=o(t("./validate/validate_light")),i.layer=o(t("./validate/validate_layer")),i.filter=o(t("./validate/validate_filter")),i.paintProperty=o(t("./validate/validate_paint_property")),i.layoutProperty=o(t("./validate/validate_layout_property")),e.exports=i},{"./reference/latest":151,"./validate/validate":162,"./validate/validate_constants":166,"./validate/validate_filter":169,"./validate/validate_glyphs_url":171,"./validate/validate_layer":172,"./validate/validate_layout_property":173,"./validate/validate_light":174,"./validate/validate_paint_property":177,"./validate/validate_source":179}],182:[function(t,e,n){"use strict";var i=t("./zoom_history"),r=function(t,e){this.zoom=t,e?(this.now=e.now,this.fadeDuration=e.fadeDuration,this.zoomHistory=e.zoomHistory,this.transition=e.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new i,this.transition={})};r.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},e.exports=r},{"./zoom_history":212}],183:[function(t,e,n){"use strict";var i=t("../style-spec/reference/latest"),r=t("../util/util"),o=t("../util/evented"),a=t("./validate_style"),s=t("../util/util").sphericalToCartesian,u=(t("../style-spec/util/color"),t("../style-spec/util/interpolate")),l=t("./properties"),c=l.Properties,p=l.Transitionable,h=l.DataConstantProperty,f=function(){this.specification=i.light.position};f.prototype.possiblyEvaluate=function(t,e){return s(t.expression.evaluate(e))},f.prototype.interpolate=function(t,e,n){return{x:u.number(t.x,e.x,n),y:u.number(t.y,e.y,n),z:u.number(t.z,e.z,n)}};var d=new c({anchor:new h(i.light.anchor),position:new f,color:new h(i.light.color),intensity:new h(i.light.intensity)}),m=function(t){function e(e){t.call(this),this._transitionable=new p(d),this.setLight(e),this._transitioning=this._transitionable.untransitioned()}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getLight=function(){return this._transitionable.serialize()},e.prototype.setLight=function(t){if(!this._validate(a.light,t))for(var e in t){var n=t[e];r.endsWith(e,"-transition")?this._transitionable.setTransition(e.slice(0,-"-transition".length),n):this._transitionable.setValue(e,n)}},e.prototype.updateTransitions=function(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)},e.prototype.hasTransition=function(){return this._transitioning.hasTransition()},e.prototype.recalculate=function(t){this.properties=this._transitioning.possiblyEvaluate(t)},e.prototype._validate=function(t,e){return a.emitErrors(this,t.call(a,r.extend({value:e,style:{glyphs:!0,sprite:!0},styleSpec:i})))},e}(o);e.exports=m},{"../style-spec/reference/latest":151,"../style-spec/util/color":153,"../style-spec/util/interpolate":158,"../util/evented":260,"../util/util":275,"./properties":188,"./validate_style":211}],184:[function(t,e,n){"use strict";var i=t("../util/mapbox").normalizeGlyphsURL,r=t("../util/ajax"),o=t("./parse_glyph_pbf");e.exports=function(t,e,n,a,s){var u=256*e,l=u+255,c=a(i(n).replace("{fontstack}",t).replace("{range}",u+"-"+l),r.ResourceType.Glyphs);r.getArrayBuffer(c,function(t,e){if(t)s(t);else if(e){for(var n={},i=0,r=o(e.data);i<r.length;i+=1){var a=r[i];n[a.id]=a}s(null,n)}})}},{"../util/ajax":251,"../util/mapbox":267,"./parse_glyph_pbf":186}],185:[function(t,e,n){"use strict";var i=t("../util/ajax"),r=t("../util/browser"),o=t("../util/mapbox").normalizeSpriteURL,a=t("../util/image").RGBAImage;e.exports=function(t,e,n){function s(){if(c)n(c);else if(u&&l){var t=r.getImageData(l),e={};for(var i in u){var o=u[i],s=o.width,p=o.height,h=o.x,f=o.y,d=o.sdf,m=o.pixelRatio,y=new a({width:s,height:p});a.copy(t,y,{x:h,y:f},{x:0,y:0},{width:s,height:p}),e[i]={data:y,pixelRatio:m,sdf:d}}n(null,e)}}var u,l,c,p=r.devicePixelRatio>1?"@2x":"";i.getJSON(e(o(t,p,".json"),i.ResourceType.SpriteJSON),function(t,e){c||(c=t,u=e,s())}),i.getImage(e(o(t,p,".png"),i.ResourceType.SpriteImage),function(t,e){c||(c=t,l=e,s())})}},{"../util/ajax":251,"../util/browser":252,"../util/image":263,"../util/mapbox":267}],186:[function(t,e,n){"use strict";function i(t,e,n){1===t&&n.readMessage(r,e)}function r(t,e,n){if(3===t){var i=n.readMessage(o,{}),r=i.width,s=i.height,l=i.left,c=i.top,p=i.advance;e.push({id:i.id,bitmap:new a({width:r+2*u,height:s+2*u},i.bitmap),metrics:{width:r,height:s,left:l,top:c,advance:p}})}}function o(t,e,n){1===t?e.id=n.readVarint():2===t?e.bitmap=n.readBytes():3===t?e.width=n.readVarint():4===t?e.height=n.readVarint():5===t?e.left=n.readSVarint():6===t?e.top=n.readSVarint():7===t&&(e.advance=n.readVarint())}var a=t("../util/image").AlphaImage,s=t("pbf"),u=3;e.exports=function(t){return new s(t).readFields(i,[])},e.exports.GLYPH_PBF_BORDER=u},{"../util/image":263,pbf:30}],187:[function(t,e,n){"use strict";var i=t("../util/browser"),r=t("../symbol/placement"),o=function(){this._currentTileIndex=0,this._seenCrossTileIDs={}};o.prototype.continuePlacement=function(t,e,n,i,r){for(var o=this;this._currentTileIndex<t.length;)if(e.placeLayerTile(i,t[o._currentTileIndex],n,o._seenCrossTileIDs),o._currentTileIndex++,r())return!0};var a=function(t,e,n,i,o){this.placement=new r(t,o),this._currentPlacementIndex=e.length-1,this._forceFullPlacement=n,this._showCollisionBoxes=i,this._done=!1};a.prototype.isDone=function(){return this._done},a.prototype.continuePlacement=function(t,e,n){for(var r=this,a=i.now(),s=function(){var t=i.now()-a;return!r._forceFullPlacement&&t>2};this._currentPlacementIndex>=0;){var u=e[t[r._currentPlacementIndex]],l=r.placement.collisionIndex.transform.zoom;if("symbol"===u.type&&(!u.minzoom||u.minzoom<=l)&&(!u.maxzoom||u.maxzoom>l)){if(r._inProgressLayer||(r._inProgressLayer=new o),r._inProgressLayer.continuePlacement(n[u.source],r.placement,r._showCollisionBoxes,u,s))return;delete r._inProgressLayer}r._currentPlacementIndex--}this._done=!0},a.prototype.commit=function(t,e){return this.placement.commit(t,e),this.placement},e.exports=a},{"../symbol/placement":223,"../util/browser":252}],188:[function(t,e,n){"use strict";var i=t("../util/util"),r=i.clone,o=i.extend,a=i.easeCubicInOut,s=t("../style-spec/util/interpolate"),u=t("../style-spec/expression").normalizePropertyExpression,l=(t("../style-spec/util/color"),t("../util/web_worker_transfer").register),c=function(t,e){this.property=t,this.value=e,this.expression=u(void 0===e?t.specification.default:e,t.specification)};c.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},c.prototype.possiblyEvaluate=function(t){return this.property.possiblyEvaluate(this,t)};var p=function(t){this.property=t,this.value=new c(t,void 0)};p.prototype.transitioned=function(t,e){return new f(this.property,this.value,e,o({},t.transition,this.transition),t.now)},p.prototype.untransitioned=function(){return new f(this.property,this.value,null,{},0)};var h=function(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)};h.prototype.getValue=function(t){return r(this._values[t].value.value)},h.prototype.setValue=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new p(this._values[t].property)),this._values[t].value=new c(this._values[t].property,null===e?void 0:r(e))},h.prototype.getTransition=function(t){return r(this._values[t].transition)},h.prototype.setTransition=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new p(this._values[t].property)),this._values[t].transition=r(e)||void 0},h.prototype.serialize=function(){for(var t=this,e={},n=0,i=Object.keys(t._values);n<i.length;n+=1){var r=i[n],o=t.getValue(r);void 0!==o&&(e[r]=o);var a=t.getTransition(r);void 0!==a&&(e[r+"-transition"]=a)}return e},h.prototype.transitioned=function(t,e){for(var n=new d(this._properties),i=0,r=Object.keys(this._values);i<r.length;i+=1){var o=r[i];n._values[o]=this._values[o].transitioned(t,e._values[o])}return n},h.prototype.untransitioned=function(){for(var t=new d(this._properties),e=0,n=Object.keys(this._values);e<n.length;e+=1){var i=n[e];t._values[i]=this._values[i].untransitioned()}return t};var f=function(t,e,n,i,r){this.property=t,this.value=e,this.begin=r+i.delay||0,this.end=this.begin+i.duration||0,t.specification.transition&&(i.delay||i.duration)&&(this.prior=n)};f.prototype.possiblyEvaluate=function(t){var e=t.now||0,n=this.value.possiblyEvaluate(t),i=this.prior;if(i){if(e>this.end)return this.prior=null,n;if(this.value.isDataDriven())return this.prior=null,n;if(e<this.begin)return i.possiblyEvaluate(t);var r=(e-this.begin)/(this.end-this.begin);return this.property.interpolate(i.possiblyEvaluate(t),n,a(r))}return n};var d=function(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)};d.prototype.possiblyEvaluate=function(t){for(var e=new g(this._properties),n=0,i=Object.keys(this._values);n<i.length;n+=1){var r=i[n];e._values[r]=this._values[r].possiblyEvaluate(t)}return e},d.prototype.hasTransition=function(){for(var t=0,e=Object.keys(this._values);t<e.length;t+=1)if(this._values[e[t]].prior)return!0;return!1};var m=function(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)};m.prototype.getValue=function(t){return r(this._values[t].value)},m.prototype.setValue=function(t,e){this._values[t]=new c(this._values[t].property,null===e?void 0:r(e))},m.prototype.serialize=function(){for(var t={},e=0,n=Object.keys(this._values);e<n.length;e+=1){var i=n[e],r=this.getValue(i);void 0!==r&&(t[i]=r)}return t},m.prototype.possiblyEvaluate=function(t){for(var e=new g(this._properties),n=0,i=Object.keys(this._values);n<i.length;n+=1){var r=i[n];e._values[r]=this._values[r].possiblyEvaluate(t)}return e};var y=function(t,e,n){this.property=t,this.value=e,this.globals=n};y.prototype.isConstant=function(){return"constant"===this.value.kind},y.prototype.constantOr=function(t){return"constant"===this.value.kind?this.value.value:t},y.prototype.evaluate=function(t){return this.property.evaluate(this.value,this.globals,t)};var g=function(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)};g.prototype.get=function(t){return this._values[t]};var v=function(t){this.specification=t};v.prototype.possiblyEvaluate=function(t,e){return t.expression.evaluate(e)},v.prototype.interpolate=function(t,e,n){var i=s[this.specification.type];return i?i(t,e,n):t};var _=function(t){this.specification=t};_.prototype.possiblyEvaluate=function(t,e){return new y(this,"constant"===t.expression.kind||"camera"===t.expression.kind?{kind:"constant",value:t.expression.evaluate(e)}:t.expression,e)},_.prototype.interpolate=function(t,e,n){if("constant"!==t.value.kind||"constant"!==e.value.kind)return t;if(void 0!==t.value.value&&void 0!==e.value.value){var i=s[this.specification.type];return i?new y(this,{kind:"constant",value:i(t.value.value,e.value.value,n)},t.globals):t}},_.prototype.evaluate=function(t,e,n){return"constant"===t.kind?t.value:t.evaluate(e,n)};var b=function(t){this.specification=t};b.prototype.possiblyEvaluate=function(t,e){if(void 0!==t.value){if("constant"===t.expression.kind){var n=t.expression.evaluate(e);return this._calculate(n,n,n,e)}return this._calculate(t.expression.evaluate({zoom:e.zoom-1}),t.expression.evaluate({zoom:e.zoom}),t.expression.evaluate({zoom:e.zoom+1}),e)}},b.prototype._calculate=function(t,e,n,i){var r=i.zoom,o=r-Math.floor(r),a=i.crossFadingFactor();return r>i.zoomHistory.lastIntegerZoom?{from:t,to:e,fromScale:2,toScale:1,t:o+(1-o)*a}:{from:n,to:e,fromScale:.5,toScale:1,t:1-(1-a)*o}},b.prototype.interpolate=function(t){return t};var x=function(t){this.specification=t};x.prototype.possiblyEvaluate=function(){},x.prototype.interpolate=function(){},l("DataDrivenProperty",_),l("DataConstantProperty",v),l("CrossFadedProperty",b),l("HeatmapColorProperty",x),e.exports={PropertyValue:c,Transitionable:h,Transitioning:d,Layout:m,PossiblyEvaluatedPropertyValue:y,PossiblyEvaluated:g,DataConstantProperty:v,DataDrivenProperty:_,CrossFadedProperty:b,HeatmapColorProperty:x,Properties:function(t){var e=this;for(var n in this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},t){var i=t[n],r=e.defaultPropertyValues[n]=new c(i,void 0),o=e.defaultTransitionablePropertyValues[n]=new p(i);e.defaultTransitioningPropertyValues[n]=o.untransitioned(),e.defaultPossiblyEvaluatedValues[n]=r.possiblyEvaluate({})}}}},{"../style-spec/expression":139,"../style-spec/util/color":153,"../style-spec/util/interpolate":158,"../util/util":275,"../util/web_worker_transfer":278}],189:[function(t,e,n){"use strict";var i=t("@mapbox/point-geometry");e.exports={getMaximumPaintValue:function(t,e,n){var i=e.paint.get(t).value;return"constant"===i.kind?i.value:n.programConfigurations.get(e.id).binders[t].statistics.max},translateDistance:function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])},translate:function(t,e,n,r,o){if(!e[0]&&!e[1])return t;var a=i.convert(e);"viewport"===n&&a._rotate(-r);for(var s=[],u=0;u<t.length;u++){for(var l=t[u],c=[],p=0;p<l.length;p++)c.push(l[p].sub(a._mult(o)));s.push(c)}return s}}},{"@mapbox/point-geometry":4}],190:[function(t,e,n){"use strict";var i=t("../util/evented"),r=t("./style_layer"),o=t("./load_sprite"),a=t("../render/image_manager"),s=t("../render/glyph_manager"),u=t("./light"),l=t("../render/line_atlas"),c=t("../util/util"),p=t("../util/ajax"),h=t("../util/mapbox"),f=t("../util/browser"),d=t("../util/dispatcher"),m=t("./validate_style"),y=t("../source/source").getType,g=t("../source/source").setType,v=t("../source/query_features"),_=t("../source/source_cache"),b=(t("../source/geojson_source"),t("../style-spec/reference/latest")),x=t("../util/global_worker_pool"),w=t("../style-spec/deref"),E=t("../style-spec/diff"),C=t("../source/rtl_text_plugin"),O=t("./pauseable_placement"),P=t("./zoom_history"),S=t("../symbol/cross_tile_symbol_index"),T=c.pick(E.operations,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),k=c.pick(E.operations,["setCenter","setZoom","setBearing","setPitch"]),A=function(t){function e(e,n){var i=this;void 0===n&&(n={}),t.call(this),this.map=e,this.dispatcher=new d(x(),this),this.imageManager=new a,this.glyphManager=new s(e._transformRequest,n.localIdeographFontFamily),this.lineAtlas=new l(256,512),this.crossTileSymbolIndex=new S,this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new P,this._loaded=!1,this._resetUpdates();var r=this;this._rtlTextPluginCallback=C.registerForPluginAvailability(function(t){for(var e in r.dispatcher.broadcast("loadRTLTextPlugin",t.pluginBlobURL,t.errorCallback),r.sourceCaches)r.sourceCaches[e].reload()}),this.on("data",function(t){if("source"===t.dataType&&"metadata"===t.sourceDataType){var e=i.sourceCaches[t.sourceId];if(e){var n=e.getSource();if(n&&n.vectorLayerIds)for(var r in i._layers){var o=i._layers[r];o.source===n.id&&i._validateLayer(o)}}}})}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.loadURL=function(t,e){var n=this;void 0===e&&(e={}),this.fire("dataloading",{dataType:"style"});var i="boolean"==typeof e.validate?e.validate:!h.isMapboxURL(t);t=h.normalizeStyleURL(t,e.accessToken);var r=this.map._transformRequest(t,p.ResourceType.Style);p.getJSON(r,function(t,e){t?n.fire("error",{error:t}):e&&n._load(e,i)})},e.prototype.loadJSON=function(t,e){var n=this;void 0===e&&(e={}),this.fire("dataloading",{dataType:"style"}),f.frame(function(){n._load(t,!1!==e.validate)})},e.prototype._load=function(t,e){var n=this;if(!e||!m.emitErrors(this,m(t))){for(var i in this._loaded=!0,this.stylesheet=t,t.sources)n.addSource(i,t.sources[i],{validate:!1});t.sprite?o(t.sprite,this.map._transformRequest,function(t,e){if(t)n.fire("error",t);else if(e)for(var i in e)n.imageManager.addImage(i,e[i]);n.imageManager.setLoaded(!0),n.fire("data",{dataType:"style"})}):this.imageManager.setLoaded(!0),this.glyphManager.setURL(t.glyphs);var a=w(this.stylesheet.layers);this._order=a.map(function(t){return t.id}),this._layers={};for(var s=0,l=a;s<l.length;s+=1){var c=l[s];(c=r.create(c)).setEventedParent(n,{layer:{id:c.id}}),n._layers[c.id]=c}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new u(this.stylesheet.light),this.fire("data",{dataType:"style"}),this.fire("style.load")}},e.prototype._validateLayer=function(t){var e=this.sourceCaches[t.source];if(e){var n=t.sourceLayer;if(n){var i=e.getSource();("geojson"===i.type||i.vectorLayerIds&&-1===i.vectorLayerIds.indexOf(n))&&this.fire("error",{error:new Error('Source layer "'+n+'" does not exist on source "'+i.id+'" as specified by style layer "'+t.id+'"')})}}},e.prototype.loaded=function(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var t in this.sourceCaches)if(!this.sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()},e.prototype._serializeLayers=function(t){var e=this;return t.map(function(t){return e._layers[t].serialize()})},e.prototype.hasTransitions=function(){var t=this;if(this.light&&this.light.hasTransition())return!0;for(var e in t.sourceCaches)if(t.sourceCaches[e].hasTransition())return!0;for(var n in t._layers)if(t._layers[n].hasTransition())return!0;return!1},e.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},e.prototype.update=function(t){var e=this;if(this._loaded){if(this._changed){var n=Object.keys(this._updatedLayers),i=Object.keys(this._removedLayers);for(var r in(n.length||i.length)&&this._updateWorkerLayers(n,i),e._updatedSources){var o=e._updatedSources[r];"reload"===o?e._reloadSource(r):"clear"===o&&e._clearSource(r)}for(var a in e._updatedPaintProps)e._layers[a].updateTransitions(t);this.light.updateTransitions(t),this._resetUpdates(),this.fire("data",{dataType:"style"})}for(var s in e.sourceCaches)e.sourceCaches[s].used=!1;for(var u=0,l=e._order;u<l.length;u+=1){var c=e._layers[l[u]];c.recalculate(t),!c.isHidden(t.zoom)&&c.source&&(e.sourceCaches[c.source].used=!0)}this.light.recalculate(t),this.z=t.zoom}},e.prototype._updateWorkerLayers=function(t,e){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(t),removedIds:e})},e.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={}},e.prototype.setState=function(t){var e=this;if(this._checkLoaded(),m.emitErrors(this,m(t)))return!1;(t=c.clone(t)).layers=w(t.layers);var n=E(this.serialize(),t).filter(function(t){return!(t.command in k)});if(0===n.length)return!1;var i=n.filter(function(t){return!(t.command in T)});if(i.length>0)throw new Error("Unimplemented: "+i.map(function(t){return t.command}).join(", ")+".");return n.forEach(function(t){"setTransition"!==t.command&&e[t.command].apply(e,t.args)}),this.stylesheet=t,!0},e.prototype.addImage=function(t,e){if(this.getImage(t))return this.fire("error",{error:new Error("An image with this name already exists.")});this.imageManager.addImage(t,e),this.fire("data",{dataType:"style"})},e.prototype.getImage=function(t){return this.imageManager.getImage(t)},e.prototype.removeImage=function(t){if(!this.getImage(t))return this.fire("error",{error:new Error("No image with this name exists.")});this.imageManager.removeImage(t),this.fire("data",{dataType:"style"})},e.prototype.addSource=function(t,e,n){var i=this;if(this._checkLoaded(),void 0!==this.sourceCaches[t])throw new Error("There is already a source with this ID");if(!e.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(e).join(", ")+".");if(!(["vector","raster","geojson","video","image","canvas"].indexOf(e.type)>=0&&this._validate(m.source,"sources."+t,e,null,n))){this.map&&this.map._collectResourceTiming&&(e.collectResourceTiming=!0);var r=this.sourceCaches[t]=new _(t,e,this.dispatcher);r.style=this,r.setEventedParent(this,function(){return{isSourceLoaded:i.loaded(),source:r.serialize(),sourceId:t}}),r.onAdd(this.map),this._changed=!0}},e.prototype.removeSource=function(t){var e=this;if(this._checkLoaded(),void 0===this.sourceCaches[t])throw new Error("There is no source with this ID");for(var n in e._layers)if(e._layers[n].source===t)return e.fire("error",{error:new Error('Source "'+t+'" cannot be removed while layer "'+n+'" is using it.')});var i=this.sourceCaches[t];delete this.sourceCaches[t],delete this._updatedSources[t],i.fire("data",{sourceDataType:"metadata",dataType:"source",sourceId:t}),i.setEventedParent(null),i.clearTiles(),i.onRemove&&i.onRemove(this.map),this._changed=!0},e.prototype.setGeoJSONSourceData=function(t,e){this._checkLoaded(),this.sourceCaches[t].getSource().setData(e),this._changed=!0},e.prototype.getSource=function(t){return this.sourceCaches[t]&&this.sourceCaches[t].getSource()},e.prototype.addLayer=function(t,e,n){this._checkLoaded();var i=t.id;if("object"==typeof t.source&&(this.addSource(i,t.source),t=c.clone(t),t=c.extend(t,{source:i})),!this._validate(m.layer,"layers."+i,t,{arrayIndex:-1},n)){var o=r.create(t);this._validateLayer(o),o.setEventedParent(this,{layer:{id:i}});var a=e?this._order.indexOf(e):this._order.length;if(e&&-1===a)return void this.fire("error",{error:new Error('Layer with id "'+e+'" does not exist on this map.')});if(this._order.splice(a,0,i),this._layerOrderChanged=!0,this._layers[i]=o,this._removedLayers[i]&&o.source){var s=this._removedLayers[i];delete this._removedLayers[i],s.type!==o.type?this._updatedSources[o.source]="clear":(this._updatedSources[o.source]="reload",this.sourceCaches[o.source].pause())}this._updateLayer(o)}},e.prototype.moveLayer=function(t,e){if(this._checkLoaded(),this._changed=!0,this._layers[t]){var n=this._order.indexOf(t);this._order.splice(n,1);var i=e?this._order.indexOf(e):this._order.length;e&&-1===i?this.fire("error",{error:new Error('Layer with id "'+e+'" does not exist on this map.')}):(this._order.splice(i,0,t),this._layerOrderChanged=!0)}else this.fire("error",{error:new Error("The layer '"+t+"' does not exist in the map's style and cannot be moved.")})},e.prototype.removeLayer=function(t){this._checkLoaded();var e=this._layers[t];if(e){e.setEventedParent(null);var n=this._order.indexOf(t);this._order.splice(n,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[t]=e,delete this._layers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t]}else this.fire("error",{error:new Error("The layer '"+t+"' does not exist in the map's style and cannot be removed.")})},e.prototype.getLayer=function(t){return this._layers[t]},e.prototype.setLayerZoomRange=function(t,e,n){this._checkLoaded();var i=this.getLayer(t);i?i.minzoom===e&&i.maxzoom===n||(null!=e&&(i.minzoom=e),null!=n&&(i.maxzoom=n),this._updateLayer(i)):this.fire("error",{error:new Error("The layer '"+t+"' does not exist in the map's style and cannot have zoom extent.")})},e.prototype.setFilter=function(t,e){this._checkLoaded();var n=this.getLayer(t);if(n)return c.deepEqual(n.filter,e)?void 0:null===e||void 0===e?(n.filter=void 0,void this._updateLayer(n)):void(this._validate(m.filter,"layers."+n.id+".filter",e)||(n.filter=c.clone(e),this._updateLayer(n)));this.fire("error",{error:new Error("The layer '"+t+"' does not exist in the map's style and cannot be filtered.")})},e.prototype.getFilter=function(t){return c.clone(this.getLayer(t).filter)},e.prototype.setLayoutProperty=function(t,e,n){this._checkLoaded();var i=this.getLayer(t);i?c.deepEqual(i.getLayoutProperty(e),n)||(i.setLayoutProperty(e,n),this._updateLayer(i)):this.fire("error",{error:new Error("The layer '"+t+"' does not exist in the map's style and cannot be styled.")})},e.prototype.getLayoutProperty=function(t,e){return this.getLayer(t).getLayoutProperty(e)},e.prototype.setPaintProperty=function(t,e,n){this._checkLoaded();var i=this.getLayer(t);if(i){if(!c.deepEqual(i.getPaintProperty(e),n)){var r=i._transitionablePaint._values[e].value.isDataDriven();i.setPaintProperty(e,n),(i._transitionablePaint._values[e].value.isDataDriven()||r)&&this._updateLayer(i),this._changed=!0,this._updatedPaintProps[t]=!0}}else this.fire("error",{error:new Error("The layer '"+t+"' does not exist in the map's style and cannot be styled.")})},e.prototype.getPaintProperty=function(t,e){return this.getLayer(t).getPaintProperty(e)},e.prototype.getTransition=function(){return c.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},e.prototype.serialize=function(){var t=this;return c.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:c.mapObject(this.sourceCaches,function(t){return t.serialize()}),layers:this._order.map(function(e){return t._layers[e].serialize()})},function(t){return void 0!==t})},e.prototype._updateLayer=function(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&(this._updatedSources[t.source]="reload",this.sourceCaches[t.source].pause()),this._changed=!0},e.prototype._flattenRenderedFeatures=function(t){for(var e=[],n=this._order.length-1;n>=0;n--)for(var i=this._order[n],r=0,o=t;r<o.length;r+=1){var a=o[r][i];if(a)for(var s=0,u=a;s<u.length;s+=1)e.push(u[s])}return e},e.prototype.queryRenderedFeatures=function(t,e,n,i){var r=this;e&&e.filter&&this._validate(m.filter,"queryRenderedFeatures.filter",e.filter);var o={};if(e&&e.layers){if(!Array.isArray(e.layers))return this.fire("error",{error:"parameters.layers must be an Array."}),[];for(var a=0,s=e.layers;a<s.length;a+=1){var u=s[a],l=r._layers[u];if(!l)return r.fire("error",{error:"The layer '"+u+"' does not exist in the map's style and cannot be queried for features."}),[];o[l.source]=!0}}var c=[];for(var p in r.sourceCaches)if(!e.layers||o[p]){var h=v.rendered(r.sourceCaches[p],r._layers,t,e,n,i,r.placement?r.placement.collisionIndex:null);c.push(h)}return this._flattenRenderedFeatures(c)},e.prototype.querySourceFeatures=function(t,e){e&&e.filter&&this._validate(m.filter,"querySourceFeatures.filter",e.filter);var n=this.sourceCaches[t];return n?v.source(n,e):[]},e.prototype.addSourceType=function(t,e,n){return y(t)?n(new Error('A source type called "'+t+'" already exists.')):(g(t,e),e.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:e.workerSourceURL},n):n(null,null))},e.prototype.getLight=function(){return this.light.getLight()},e.prototype.setLight=function(t){this._checkLoaded();var e=this.light.getLight(),n=!1;for(var i in t)if(!c.deepEqual(t[i],e[i])){n=!0;break}if(n){var r={now:f.now(),transition:c.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(t),this.light.updateTransitions(r)}},e.prototype._validate=function(t,e,n,i,r){return(!r||!1!==r.validate)&&m.emitErrors(this,t.call(m,c.extend({key:e,style:this.serialize(),value:n,styleSpec:b},i)))},e.prototype._remove=function(){for(var t in C.evented.off("pluginAvailable",this._rtlTextPluginCallback),this.sourceCaches)this.sourceCaches[t].clearTiles();this.dispatcher.remove()},e.prototype._clearSource=function(t){this.sourceCaches[t].clearTiles()},e.prototype._reloadSource=function(t){this.sourceCaches[t].resume(),this.sourceCaches[t].reload()},e.prototype._updateSources=function(t){for(var e in this.sourceCaches)this.sourceCaches[e].update(t)},e.prototype._generateCollisionBoxes=function(){for(var t in this.sourceCaches)this._reloadSource(t)},e.prototype._updatePlacement=function(t,e,n){for(var i=this,r=!1,o=!1,a={},s=0,u=i._order;s<u.length;s+=1){var l=i._layers[u[s]];if("symbol"===l.type){if(!a[l.source]){var c=i.sourceCaches[l.source];a[l.source]=c.getRenderableIds().map(function(t){return c.getTileByID(t)}).sort(function(t,e){return e.tileID.overscaledZ-t.tileID.overscaledZ||(t.tileID.isLessThan(e.tileID)?-1:1)})}var p=i.crossTileSymbolIndex.addLayer(l,a[l.source]);r=r||p}}this.crossTileSymbolIndex.pruneUnusedLayers(this._order);var h=this._layerOrderChanged;if((h||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(f.now()))&&(this.pauseablePlacement=new O(t,this._order,h,e,n),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,a),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(this.placement,f.now()),o=!0),r&&this.pauseablePlacement.placement.setStale()),o||r)for(var d=0,m=i._order;d<m.length;d+=1){var y=i._layers[m[d]];"symbol"===y.type&&i.placement.updateLayerOpacities(y,a[y.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(f.now())},e.prototype.getImages=function(t,e,n){this.imageManager.getImages(e.icons,n)},e.prototype.getGlyphs=function(t,e,n){this.glyphManager.getGlyphs(e.stacks,n)},e}(i);e.exports=A},{"../render/glyph_manager":86,"../render/image_manager":88,"../render/line_atlas":89,"../source/geojson_source":99,"../source/query_features":105,"../source/rtl_text_plugin":109,"../source/source":110,"../source/source_cache":111,"../style-spec/deref":120,"../style-spec/diff":121,"../style-spec/reference/latest":151,"../symbol/cross_tile_symbol_index":218,"../util/ajax":251,"../util/browser":252,"../util/dispatcher":258,"../util/evented":260,"../util/global_worker_pool":262,"../util/mapbox":267,"../util/util":275,"./light":183,"./load_sprite":185,"./pauseable_placement":187,"./style_layer":191,"./validate_style":211,"./zoom_history":212}],191:[function(t,e,n){"use strict";var i=t("../util/util"),r=t("../style-spec/reference/latest"),o=t("./validate_style"),a=t("../util/evented"),s=t("./properties"),u=s.Layout,l=s.Transitionable,c=function(t){function e(e,n){for(var i in t.call(this),this.id=e.id,this.metadata=e.metadata,this.type=e.type,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,this.visibility="visible","background"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),this._featureFilter=function(){return!0},n.layout&&(this._unevaluatedLayout=new u(n.layout)),this._transitionablePaint=new l(n.paint),e.paint)this.setPaintProperty(i,e.paint[i],{validate:!1});for(var r in e.layout)this.setLayoutProperty(r,e.layout[r],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned()}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getLayoutProperty=function(t){return"visibility"===t?this.visibility:this._unevaluatedLayout.getValue(t)},e.prototype.setLayoutProperty=function(t,e,n){null!==e&&void 0!==e&&this._validate(o.layoutProperty,"layers."+this.id+".layout."+t,t,e,n)||("visibility"!==t?this._unevaluatedLayout.setValue(t,e):this.visibility="none"===e?e:"visible")},e.prototype.getPaintProperty=function(t){return i.endsWith(t,"-transition")?this._transitionablePaint.getTransition(t.slice(0,-"-transition".length)):this._transitionablePaint.getValue(t)},e.prototype.setPaintProperty=function(t,e,n){null!==e&&void 0!==e&&this._validate(o.paintProperty,"layers."+this.id+".paint."+t,t,e,n)||(i.endsWith(t,"-transition")?this._transitionablePaint.setTransition(t.slice(0,-"-transition".length),e||void 0):this._transitionablePaint.setValue(t,e))},e.prototype.isHidden=function(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.visibility},e.prototype.updateTransitions=function(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)},e.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},e.prototype.recalculate=function(t){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t)),this.paint=this._transitioningPaint.possiblyEvaluate(t)},e.prototype.serialize=function(){var t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return"none"===this.visibility&&(t.layout=t.layout||{},t.layout.visibility="none"),i.filterObject(t,function(t,e){return!(void 0===t||"layout"===e&&!Object.keys(t).length||"paint"===e&&!Object.keys(t).length)})},e.prototype._validate=function(t,e,n,i,a){return(!a||!1!==a.validate)&&o.emitErrors(this,t.call(o,{key:e,layerType:this.type,objectKey:n,value:i,styleSpec:r,style:{glyphs:!0,sprite:!0}}))},e.prototype.hasOffscreenPass=function(){return!1},e.prototype.resize=function(){},e}(a);e.exports=c;var p={circle:t("./style_layer/circle_style_layer"),heatmap:t("./style_layer/heatmap_style_layer"),hillshade:t("./style_layer/hillshade_style_layer"),fill:t("./style_layer/fill_style_layer"),"fill-extrusion":t("./style_layer/fill_extrusion_style_layer"),line:t("./style_layer/line_style_layer"),symbol:t("./style_layer/symbol_style_layer"),background:t("./style_layer/background_style_layer"),raster:t("./style_layer/raster_style_layer")};c.create=function(t){return new p[t.type](t)}},{"../style-spec/reference/latest":151,"../util/evented":260,"../util/util":275,"./properties":188,"./style_layer/background_style_layer":192,"./style_layer/circle_style_layer":194,"./style_layer/fill_extrusion_style_layer":196,"./style_layer/fill_style_layer":198,"./style_layer/heatmap_style_layer":200,"./style_layer/hillshade_style_layer":202,"./style_layer/line_style_layer":204,"./style_layer/raster_style_layer":206,"./style_layer/symbol_style_layer":208,"./validate_style":211}],192:[function(t,e,n){"use strict";var i=t("../style_layer"),r=t("./background_style_layer_properties"),o=(t("../properties"),function(t){function e(e){t.call(this,e,r)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(i));e.exports=o},{"../properties":188,"../style_layer":191,"./background_style_layer_properties":193}],193:[function(t,e,n){"use strict";var i=t("../../style-spec/reference/latest"),r=t("../properties"),o=r.DataConstantProperty,a=r.CrossFadedProperty,s=new(0,r.Properties)({"background-color":new o(i.paint_background["background-color"]),"background-pattern":new a(i.paint_background["background-pattern"]),"background-opacity":new o(i.paint_background["background-opacity"])});e.exports={paint:s}},{"../../style-spec/reference/latest":151,"../properties":188}],194:[function(t,e,n){"use strict";var i=t("../style_layer"),r=t("../../data/bucket/circle_bucket"),o=t("../../util/intersection_tests").multiPolygonIntersectsBufferedMultiPoint,a=t("../query_utils"),s=a.getMaximumPaintValue,u=a.translateDistance,l=a.translate,c=t("./circle_style_layer_properties"),p=(t("../properties"),function(t){function e(e){t.call(this,e,c)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createBucket=function(t){return new r(t)},e.prototype.queryRadius=function(t){var e=t;return s("circle-radius",this,e)+s("circle-stroke-width",this,e)+u(this.paint.get("circle-translate"))},e.prototype.queryIntersectsFeature=function(t,e,n,i,r,a){var s=l(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),r,a),u=this.paint.get("circle-radius").evaluate(e)*a,c=this.paint.get("circle-stroke-width").evaluate(e)*a;return o(s,n,u+c)},e}(i));e.exports=p},{"../../data/bucket/circle_bucket":42,"../../util/intersection_tests":264,"../properties":188,"../query_utils":189,"../style_layer":191,"./circle_style_layer_properties":195}],195:[function(t,e,n){"use strict";var i=t("../../style-spec/reference/latest"),r=t("../properties"),o=r.DataConstantProperty,a=r.DataDrivenProperty,s=new(0,r.Properties)({"circle-radius":new a(i.paint_circle["circle-radius"]),"circle-color":new a(i.paint_circle["circle-color"]),"circle-blur":new a(i.paint_circle["circle-blur"]),"circle-opacity":new a(i.paint_circle["circle-opacity"]),"circle-translate":new o(i.paint_circle["circle-translate"]),"circle-translate-anchor":new o(i.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new o(i.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new o(i.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new a(i.paint_circle["circle-stroke-width"]),"circle-stroke-color":new a(i.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new a(i.paint_circle["circle-stroke-opacity"])});e.exports={paint:s}},{"../../style-spec/reference/latest":151,"../properties":188}],196:[function(t,e,n){"use strict";var i=t("../style_layer"),r=t("../../data/bucket/fill_extrusion_bucket"),o=t("../../util/intersection_tests").multiPolygonIntersectsMultiPolygon,a=t("../query_utils"),s=a.translateDistance,u=a.translate,l=t("./fill_extrusion_style_layer_properties"),c=(t("../properties"),function(t){function e(e){t.call(this,e,l)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createBucket=function(t){return new r(t)},e.prototype.queryRadius=function(){return s(this.paint.get("fill-extrusion-translate"))},e.prototype.queryIntersectsFeature=function(t,e,n,i,r,a){var s=u(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),r,a);return o(s,n)},e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("fill-extrusion-opacity")&&"none"!==this.visibility},e.prototype.resize=function(){this.viewportFrame&&(this.viewportFrame.destroy(),this.viewportFrame=null)},e}(i));e.exports=c},{"../../data/bucket/fill_extrusion_bucket":46,"../../util/intersection_tests":264,"../properties":188,"../query_utils":189,"../style_layer":191,"./fill_extrusion_style_layer_properties":197}],197:[function(t,e,n){"use strict";var i=t("../../style-spec/reference/latest"),r=t("../properties"),o=r.DataConstantProperty,a=r.DataDrivenProperty,s=r.CrossFadedProperty,u=new(0,r.Properties)({"fill-extrusion-opacity":new o(i["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new a(i["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new o(i["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new o(i["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new s(i["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new a(i["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new a(i["paint_fill-extrusion"]["fill-extrusion-base"])});e.exports={paint:u}},{"../../style-spec/reference/latest":151,"../properties":188}],198:[function(t,e,n){"use strict";var i=t("../style_layer"),r=t("../../data/bucket/fill_bucket"),o=t("../../util/intersection_tests").multiPolygonIntersectsMultiPolygon,a=t("../query_utils"),s=a.translateDistance,u=a.translate,l=t("./fill_style_layer_properties"),c=(t("../properties"),function(t){function e(e){t.call(this,e,l)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.recalculate=function(t){this.paint=this._transitioningPaint.possiblyEvaluate(t),void 0===this._transitionablePaint.getValue("fill-outline-color")&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},e.prototype.createBucket=function(t){return new r(t)},e.prototype.queryRadius=function(){return s(this.paint.get("fill-translate"))},e.prototype.queryIntersectsFeature=function(t,e,n,i,r,a){var s=u(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),r,a);return o(s,n)},e}(i));e.exports=c},{"../../data/bucket/fill_bucket":44,"../../util/intersection_tests":264,"../properties":188,"../query_utils":189,"../style_layer":191,"./fill_style_layer_properties":199}],199:[function(t,e,n){"use strict";var i=t("../../style-spec/reference/latest"),r=t("../properties"),o=r.DataConstantProperty,a=r.DataDrivenProperty,s=r.CrossFadedProperty,u=new(0,r.Properties)({"fill-antialias":new o(i.paint_fill["fill-antialias"]),"fill-opacity":new a(i.paint_fill["fill-opacity"]),"fill-color":new a(i.paint_fill["fill-color"]),"fill-outline-color":new a(i.paint_fill["fill-outline-color"]),"fill-translate":new o(i.paint_fill["fill-translate"]),"fill-translate-anchor":new o(i.paint_fill["fill-translate-anchor"]),"fill-pattern":new s(i.paint_fill["fill-pattern"])});e.exports={paint:u}},{"../../style-spec/reference/latest":151,"../properties":188}],200:[function(t,e,n){"use strict";var i=t("../style_layer"),r=t("../../data/bucket/heatmap_bucket"),o=t("../../util/image").RGBAImage,a=t("./heatmap_style_layer_properties"),s=(t("../properties"),function(t){function e(e){t.call(this,e,a),this._updateColorRamp()}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createBucket=function(t){return new r(t)},e.prototype.setPaintProperty=function(e,n,i){t.prototype.setPaintProperty.call(this,e,n,i),"heatmap-color"===e&&this._updateColorRamp()},e.prototype._updateColorRamp=function(){for(var t=this._transitionablePaint._values["heatmap-color"].value.expression,e=new Uint8Array(1024),n=e.length,i=4;i<n;i+=4){var r=t.evaluate({heatmapDensity:i/n});e[i+0]=Math.floor(255*r.r/r.a),e[i+1]=Math.floor(255*r.g/r.a),e[i+2]=Math.floor(255*r.b/r.a),e[i+3]=Math.floor(255*r.a)}this.colorRamp=new o({width:256,height:1},e),this.colorRampTexture=null},e.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},e}(i));e.exports=s},{"../../data/bucket/heatmap_bucket":47,"../../util/image":263,"../properties":188,"../style_layer":191,"./heatmap_style_layer_properties":201}],201:[function(t,e,n){"use strict";var i=t("../../style-spec/reference/latest"),r=t("../properties"),o=r.DataConstantProperty,a=r.DataDrivenProperty,s=r.HeatmapColorProperty,u=new(0,r.Properties)({"heatmap-radius":new a(i.paint_heatmap["heatmap-radius"]),"heatmap-weight":new a(i.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new o(i.paint_heatmap["heatmap-intensity"]),"heatmap-color":new s(i.paint_heatmap["heatmap-color"]),"heatmap-opacity":new o(i.paint_heatmap["heatmap-opacity"])});e.exports={paint:u}},{"../../style-spec/reference/latest":151,"../properties":188}],202:[function(t,e,n){"use strict";var i=t("../style_layer"),r=t("./hillshade_style_layer_properties"),o=(t("../properties"),function(t){function e(e){t.call(this,e,r)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},e}(i));e.exports=o},{"../properties":188,"../style_layer":191,"./hillshade_style_layer_properties":203}],203:[function(t,e,n){"use strict";var i=t("../../style-spec/reference/latest"),r=t("../properties"),o=r.DataConstantProperty,a=new(0,r.Properties)({"hillshade-illumination-direction":new o(i.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new o(i.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new o(i.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new o(i.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new o(i.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new o(i.paint_hillshade["hillshade-accent-color"])});e.exports={paint:a}},{"../../style-spec/reference/latest":151,"../properties":188}],204:[function(t,e,n){"use strict";function i(t,e){return e>0?e+2*t:t}var r=t("@mapbox/point-geometry"),o=t("../style_layer"),a=t("../../data/bucket/line_bucket"),s=t("../../util/intersection_tests").multiPolygonIntersectsBufferedMultiLine,u=t("../query_utils"),l=u.getMaximumPaintValue,c=u.translateDistance,p=u.translate,h=t("./line_style_layer_properties"),f=t("../../util/util").extend,d=t("../evaluation_parameters"),m=new(function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.possiblyEvaluate=function(e,n){return n=new d(Math.floor(n.zoom),{now:n.now,fadeDuration:n.fadeDuration,zoomHistory:n.zoomHistory,transition:n.transition}),t.prototype.possiblyEvaluate.call(this,e,n)},e.prototype.evaluate=function(e,n,i){return n=f({},n,{zoom:Math.floor(n.zoom)}),t.prototype.evaluate.call(this,e,n,i)},e}(t("../properties").DataDrivenProperty))(h.paint.properties["line-width"].specification);m.useIntegerZoom=!0;var y=function(t){function e(e){t.call(this,e,h)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.recalculate=function(e){t.prototype.recalculate.call(this,e),this.paint._values["line-floorwidth"]=m.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)},e.prototype.createBucket=function(t){return new a(t)},e.prototype.queryRadius=function(t){var e=t,n=i(l("line-width",this,e),l("line-gap-width",this,e)),r=l("line-offset",this,e);return n/2+Math.abs(r)+c(this.paint.get("line-translate"))},e.prototype.queryIntersectsFeature=function(t,e,n,o,a,u){var l=p(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),a,u),c=u/2*i(this.paint.get("line-width").evaluate(e),this.paint.get("line-gap-width").evaluate(e)),h=this.paint.get("line-offset").evaluate(e);return h&&(n=function(t,e){for(var n=[],i=new r(0,0),o=0;o<t.length;o++){for(var a=t[o],s=[],u=0;u<a.length;u++){var l=a[u],c=a[u+1],p=0===u?i:l.sub(a[u-1])._unit()._perp(),h=u===a.length-1?i:c.sub(l)._unit()._perp(),f=p._add(h)._unit();f._mult(1/(f.x*h.x+f.y*h.y)),s.push(f._mult(e)._add(l))}n.push(s)}return n}(n,h*u)),s(l,n,c)},e}(o);e.exports=y},{"../../data/bucket/line_bucket":49,"../../util/intersection_tests":264,"../../util/util":275,"../evaluation_parameters":182,"../properties":188,"../query_utils":189,"../style_layer":191,"./line_style_layer_properties":205,"@mapbox/point-geometry":4}],205:[function(t,e,n){"use strict";var i=t("../../style-spec/reference/latest"),r=t("../properties"),o=r.Properties,a=r.DataConstantProperty,s=r.DataDrivenProperty,u=r.CrossFadedProperty,l=new o({"line-cap":new a(i.layout_line["line-cap"]),"line-join":new s(i.layout_line["line-join"]),"line-miter-limit":new a(i.layout_line["line-miter-limit"]),"line-round-limit":new a(i.layout_line["line-round-limit"])}),c=new o({"line-opacity":new s(i.paint_line["line-opacity"]),"line-color":new s(i.paint_line["line-color"]),"line-translate":new a(i.paint_line["line-translate"]),"line-translate-anchor":new a(i.paint_line["line-translate-anchor"]),"line-width":new s(i.paint_line["line-width"]),"line-gap-width":new s(i.paint_line["line-gap-width"]),"line-offset":new s(i.paint_line["line-offset"]),"line-blur":new s(i.paint_line["line-blur"]),"line-dasharray":new u(i.paint_line["line-dasharray"]),"line-pattern":new u(i.paint_line["line-pattern"])});e.exports={paint:c,layout:l}},{"../../style-spec/reference/latest":151,"../properties":188}],206:[function(t,e,n){"use strict";var i=t("../style_layer"),r=t("./raster_style_layer_properties"),o=(t("../properties"),function(t){function e(e){t.call(this,e,r)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(i));e.exports=o},{"../properties":188,"../style_layer":191,"./raster_style_layer_properties":207}],207:[function(t,e,n){"use strict";var i=t("../../style-spec/reference/latest"),r=t("../properties"),o=r.DataConstantProperty,a=new(0,r.Properties)({"raster-opacity":new o(i.paint_raster["raster-opacity"]),"raster-hue-rotate":new o(i.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new o(i.paint_raster["raster-brightness-min"]),"raster-brightness-max":new o(i.paint_raster["raster-brightness-max"]),"raster-saturation":new o(i.paint_raster["raster-saturation"]),"raster-contrast":new o(i.paint_raster["raster-contrast"]),"raster-fade-duration":new o(i.paint_raster["raster-fade-duration"])});e.exports={paint:a}},{"../../style-spec/reference/latest":151,"../properties":188}],208:[function(t,e,n){"use strict";var i=t("../style_layer"),r=t("../../data/bucket/symbol_bucket"),o=t("../../util/token"),a=t("../../style-spec/expression").isExpression,s=t("./symbol_style_layer_properties"),u=(t("../properties"),function(t){function e(e){t.call(this,e,s)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.recalculate=function(e){t.prototype.recalculate.call(this,e),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="line"===this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="line"===this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"))},e.prototype.getValueAndResolveTokens=function(t,e){var n=this.layout.get(t).evaluate(e),i=this._unevaluatedLayout._values[t];return i.isDataDriven()||a(i.value)?n:o(e.properties,n)},e.prototype.createBucket=function(t){return new r(t)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e}(i));e.exports=u},{"../../data/bucket/symbol_bucket":51,"../../style-spec/expression":139,"../../util/token":274,"../properties":188,"../style_layer":191,"./symbol_style_layer_properties":209}],209:[function(t,e,n){"use strict";var i=t("../../style-spec/reference/latest"),r=t("../properties"),o=r.Properties,a=r.DataConstantProperty,s=r.DataDrivenProperty,u=new o({"symbol-placement":new a(i.layout_symbol["symbol-placement"]),"symbol-spacing":new a(i.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new a(i.layout_symbol["symbol-avoid-edges"]),"icon-allow-overlap":new a(i.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new a(i.layout_symbol["icon-ignore-placement"]),"icon-optional":new a(i.layout_symbol["icon-optional"]),"icon-rotation-alignment":new a(i.layout_symbol["icon-rotation-alignment"]),"icon-size":new s(i.layout_symbol["icon-size"]),"icon-text-fit":new a(i.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new a(i.layout_symbol["icon-text-fit-padding"]),"icon-image":new s(i.layout_symbol["icon-image"]),"icon-rotate":new s(i.layout_symbol["icon-rotate"]),"icon-padding":new a(i.layout_symbol["icon-padding"]),"icon-keep-upright":new a(i.layout_symbol["icon-keep-upright"]),"icon-offset":new s(i.layout_symbol["icon-offset"]),"icon-anchor":new s(i.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new a(i.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new a(i.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new a(i.layout_symbol["text-rotation-alignment"]),"text-field":new s(i.layout_symbol["text-field"]),"text-font":new s(i.layout_symbol["text-font"]),"text-size":new s(i.layout_symbol["text-size"]),"text-max-width":new s(i.layout_symbol["text-max-width"]),"text-line-height":new a(i.layout_symbol["text-line-height"]),"text-letter-spacing":new s(i.layout_symbol["text-letter-spacing"]),"text-justify":new s(i.layout_symbol["text-justify"]),"text-anchor":new s(i.layout_symbol["text-anchor"]),"text-max-angle":new a(i.layout_symbol["text-max-angle"]),"text-rotate":new s(i.layout_symbol["text-rotate"]),"text-padding":new a(i.layout_symbol["text-padding"]),"text-keep-upright":new a(i.layout_symbol["text-keep-upright"]),"text-transform":new s(i.layout_symbol["text-transform"]),"text-offset":new s(i.layout_symbol["text-offset"]),"text-allow-overlap":new a(i.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new a(i.layout_symbol["text-ignore-placement"]),"text-optional":new a(i.layout_symbol["text-optional"])}),l=new o({"icon-opacity":new s(i.paint_symbol["icon-opacity"]),"icon-color":new s(i.paint_symbol["icon-color"]),"icon-halo-color":new s(i.paint_symbol["icon-halo-color"]),"icon-halo-width":new s(i.paint_symbol["icon-halo-width"]),"icon-halo-blur":new s(i.paint_symbol["icon-halo-blur"]),"icon-translate":new a(i.paint_symbol["icon-translate"]),"icon-translate-anchor":new a(i.paint_symbol["icon-translate-anchor"]),"text-opacity":new s(i.paint_symbol["text-opacity"]),"text-color":new s(i.paint_symbol["text-color"]),"text-halo-color":new s(i.paint_symbol["text-halo-color"]),"text-halo-width":new s(i.paint_symbol["text-halo-width"]),"text-halo-blur":new s(i.paint_symbol["text-halo-blur"]),"text-translate":new a(i.paint_symbol["text-translate"]),"text-translate-anchor":new a(i.paint_symbol["text-translate-anchor"])});e.exports={paint:l,layout:u}},{"../../style-spec/reference/latest":151,"../properties":188}],210:[function(t,e,n){"use strict";var i=t("./style_layer"),r=t("../util/util"),o=t("../style-spec/feature_filter"),a=t("../style-spec/group_by_layout"),s=function(t){t&&this.replace(t)};s.prototype.replace=function(t){this._layerConfigs={},this._layers={},this.update(t,[])},s.prototype.update=function(t,e){for(var n=this,s=0,u=t;s<u.length;s+=1){var l=u[s];n._layerConfigs[l.id]=l;var c=n._layers[l.id]=i.create(l);c._featureFilter=o(c.filter)}for(var p=0,h=e;p<h.length;p+=1){var f=h[p];delete n._layerConfigs[f],delete n._layers[f]}this.familiesBySource={};for(var d=0,m=a(r.values(this._layerConfigs));d<m.length;d+=1){var y=m[d].map(function(t){return n._layers[t.id]}),g=y[0];if("none"!==g.visibility){var v=g.source||"",_=n.familiesBySource[v];_||(_=n.familiesBySource[v]={});var b=g.sourceLayer||"_geojsonTileLayer",x=_[b];x||(x=_[b]=[]),x.push(y)}}},e.exports=s},{"../style-spec/feature_filter":148,"../style-spec/group_by_layout":150,"../util/util":275,"./style_layer":191}],211:[function(t,e,n){"use strict";e.exports=t("../style-spec/validate_style.min"),e.exports.emitErrors=function(t,e){if(e&&e.length){for(var n=0,i=e;n<i.length;n+=1)t.fire("error",{error:new Error(i[n].message)});return!0}return!1}},{"../style-spec/validate_style.min":181}],212:[function(t,e,n){"use strict";var i=function(){this.first=!0};i.prototype.update=function(t,e){var n=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=n,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=n,!0):(this.lastFloorZoom>n?(this.lastIntegerZoom=n+1,this.lastIntegerZoomTime=e):this.lastFloorZoom<n&&(this.lastIntegerZoom=n,this.lastIntegerZoomTime=e),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=n,!0))},e.exports=i},{}],213:[function(t,e,n){"use strict";var i=t("@mapbox/point-geometry"),r=t("../util/web_worker_transfer").register,o=function(t){function e(e,n,i,r){t.call(this,e,n),this.angle=i,void 0!==r&&(this.segment=r)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.clone=function(){return new e(this.x,this.y,this.angle,this.segment)},e}(i);r("Anchor",o),e.exports=o},{"../util/web_worker_transfer":278,"@mapbox/point-geometry":4}],214:[function(t,e,n){"use strict";e.exports=function(t,e,n,i,r){if(void 0===e.segment)return!0;for(var o=e,a=e.segment+1,s=0;s>-n/2;){if(--a<0)return!1;s-=t[a].dist(o),o=t[a]}s+=t[a].dist(t[a+1]),a++;for(var u=[],l=0;s<n/2;){var c=t[a-1],p=t[a],h=t[a+1];if(!h)return!1;var f=c.angleTo(p)-p.angleTo(h);for(f=Math.abs((f+3*Math.PI)%(2*Math.PI)-Math.PI),u.push({distance:s,angleDelta:f}),l+=f;s-u[0].distance>i;)l-=u.shift().angleDelta;if(l>r)return!1;a++,s+=p.dist(h)}return!0}},{}],215:[function(t,e,n){"use strict";var i=t("@mapbox/point-geometry");e.exports=function(t,e,n,r,o){for(var a=[],s=0;s<t.length;s++)for(var u=t[s],l=void 0,c=0;c<u.length-1;c++){var p=u[c],h=u[c+1];p.x<e&&h.x<e||(p.x<e?p=new i(e,p.y+(e-p.x)/(h.x-p.x)*(h.y-p.y))._round():h.x<e&&(h=new i(e,p.y+(e-p.x)/(h.x-p.x)*(h.y-p.y))._round()),p.y<n&&h.y<n||(p.y<n?p=new i(p.x+(n-p.y)/(h.y-p.y)*(h.x-p.x),n)._round():h.y<n&&(h=new i(p.x+(n-p.y)/(h.y-p.y)*(h.x-p.x),n)._round()),p.x>=r&&h.x>=r||(p.x>=r?p=new i(r,p.y+(r-p.x)/(h.x-p.x)*(h.y-p.y))._round():h.x>=r&&(h=new i(r,p.y+(r-p.x)/(h.x-p.x)*(h.y-p.y))._round()),p.y>=o&&h.y>=o||(p.y>=o?p=new i(p.x+(o-p.y)/(h.y-p.y)*(h.x-p.x),o)._round():h.y>=o&&(h=new i(p.x+(o-p.y)/(h.y-p.y)*(h.x-p.x),o)._round()),l&&p.equals(l[l.length-1])||a.push(l=[p]),l.push(h)))))}return a}},{"@mapbox/point-geometry":4}],216:[function(t,e,n){"use strict";var i=function(t,e,n,i,r,o,a,s,u,l,c){var p=a.top*s-u,h=a.bottom*s+u,f=a.left*s-u,d=a.right*s+u;if(this.boxStartIndex=t.length,l){var m=h-p,y=d-f;m>0&&(m=Math.max(10*s,m),this._addLineCollisionCircles(t,e,n,n.segment,y,m,i,r,o,c))}else t.emplaceBack(n.x,n.y,f,p,d,h,i,r,o,0,0);this.boxEndIndex=t.length};i.prototype._addLineCollisionCircles=function(t,e,n,i,r,o,a,s,u,l){var c=o/2,p=Math.floor(r/c),h=1+.4*Math.log(l)/Math.LN2,f=Math.floor(p*h/2),d=-o/2,m=n,y=i+1,g=d,v=-r/2,_=v-r/4;do{if(--y<0){if(g>v)return;y=0;break}g-=e[y].dist(m),m=e[y]}while(g>_);for(var b=e[y].dist(e[y+1]),x=-f;x<p+f;x++){var w=x*c,E=v+w;if(w<0&&(E+=w),w>r&&(E+=w-r),!(E<g)){for(;g+b<E;){if(g+=b,++y+1>=e.length)return;b=e[y].dist(e[y+1])}var C=E-g,O=e[y],P=e[y+1].sub(O)._unit()._mult(C)._add(O)._round(),S=Math.abs(E-d)<c?0:.8*(E-d);t.emplaceBack(P.x,P.y,-o/2,-o/2,o/2,o/2,a,s,u,o/2,S)}}},e.exports=i},{}],217:[function(t,e,n){"use strict";function i(t,e,n){t[e+4]=n?1:0}var r=t("@mapbox/point-geometry"),o=t("../util/intersection_tests"),a=t("./grid_index"),s=(t("@mapbox/gl-matrix"),t("../symbol/projection")),u=function(t,e,n){void 0===e&&(e=new a(t.width+200,t.height+200,25)),void 0===n&&(n=new a(t.width+200,t.height+200,25)),this.transform=t,this.grid=e,this.ignoredGrid=n,this.pitchfactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+100,this.screenBottomBoundary=t.height+100};u.prototype.placeCollisionBox=function(t,e,n,i){var r=this.projectAndGetPerspectiveRatio(i,t.anchorPointX,t.anchorPointY),o=n*r.perspectiveRatio,a=t.x1*o+r.point.x,s=t.y1*o+r.point.y,u=t.x2*o+r.point.x,l=t.y2*o+r.point.y;return!e&&this.grid.hitTest(a,s,u,l)?{box:[],offscreen:!1}:{box:[a,s,u,l],offscreen:this.isOffscreen(a,s,u,l)}},u.prototype.approximateTileDistance=function(t,e,n,i,r){var o=t.lastSegmentViewportDistance*n;return t.prevTileDistance+o+((r?1:i/this.pitchfactor)-1)*o*Math.abs(Math.sin(e))},u.prototype.placeCollisionCircles=function(t,e,n,o,a,u,l,c,p,h,f,d,m){var y=this,g=[],v=this.projectAnchor(h,u.anchorX,u.anchorY),_=p/24,b=u.lineOffsetX*p,x=u.lineOffsetY*p,w=new r(u.anchorX,u.anchorY),E=s.project(w,f).point,C=s.placeFirstAndLastGlyph(_,c,b,x,!1,E,w,u,l,f,{},!0),O=!1,P=!0,S=v.perspectiveRatio*o,T=1/(o*n),k=0,A=0;C&&(k=this.approximateTileDistance(C.first.tileDistance,C.first.angle,T,v.cameraDistance,m),A=this.approximateTileDistance(C.last.tileDistance,C.last.angle,T,v.cameraDistance,m));for(var I=0;I<t.length;I+=5){var L=t[I],M=t[I+1],z=t[I+2],D=t[I+3];if(!C||D<-k||D>A)i(t,I,!1);else{var R=y.projectPoint(h,L,M),j=z*S;if(g.length>0){var N=R.x-g[g.length-4],B=R.y-g[g.length-3];if(j*j*2>N*N+B*B&&I+8<t.length){var F=t[I+8];if(F>-k&&F<A){i(t,I,!1);continue}}}if(g.push(R.x,R.y,j,I/5),i(t,I,!0),P=P&&y.isOffscreen(R.x-j,R.y-j,R.x+j,R.y+j),!e&&y.grid.hitTestCircle(R.x,R.y,j)){if(!d)return{circles:[],offscreen:!1};O=!0}}}return{circles:O?[]:g,offscreen:P}},u.prototype.queryRenderedSymbols=function(t,e,n,i,a,s){var u={},l=[];if(0===t.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return l;for(var c=this.transform.calculatePosMatrix(e.toUnwrapped()),p=[],h=1/0,f=1/0,d=-1/0,m=-1/0,y=0;y<t.length;y++)for(var g=t[y],v=0;v<g.length;v++){var _=this.projectPoint(c,g[v].x,g[v].y);h=Math.min(h,_.x),f=Math.min(f,_.y),d=Math.max(d,_.x),m=Math.max(m,_.y),p.push(_)}for(var b=e.key,x=[],w=this.grid.query(h,f,d,m),E=0;E<w.length;E++)w[E].sourceID===a&&w[E].tileID===b&&s[w[E].bucketInstanceId]&&x.push(w[E].boxIndex);for(var C=this.ignoredGrid.query(h,f,d,m),O=0;O<C.length;O++)C[O].sourceID===a&&C[O].tileID===b&&s[C[O].bucketInstanceId]&&x.push(C[O].boxIndex);for(var P=0;P<x.length;P++){var S=i.get(x[P]),T=S.sourceLayerIndex,k=S.featureIndex,A=S.bucketIndex;if(void 0===u[T]&&(u[T]={}),void 0===u[T][k]&&(u[T][k]={}),!u[T][k][A]){var I=this.projectAndGetPerspectiveRatio(c,S.anchorPointX,S.anchorPointY),L=n*I.perspectiveRatio,M=S.x1*L+I.point.x,z=S.y1*L+I.point.y,D=S.x2*L+I.point.x,R=S.y2*L+I.point.y,j=[new r(M,z),new r(D,z),new r(D,R),new r(M,R)];o.polygonIntersectsPolygon(p,j)&&(u[T][k][A]=!0,l.push(x[P]))}}return l},u.prototype.insertCollisionBox=function(t,e,n,i,r,o){(e?this.ignoredGrid:this.grid).insert({tileID:n,sourceID:i,bucketInstanceId:r,boxIndex:o},t[0],t[1],t[2],t[3])},u.prototype.insertCollisionCircles=function(t,e,n,i,r,o){for(var a=e?this.ignoredGrid:this.grid,s=0;s<t.length;s+=4)a.insertCircle({tileID:n,sourceID:i,bucketInstanceId:r,boxIndex:o+t[s+3]},t[s],t[s+1],t[s+2])},u.prototype.projectAnchor=function(t,e,n){var i=[e,n,0,1];return s.xyTransformMat4(i,i,t),{perspectiveRatio:.5+this.transform.cameraToCenterDistance/i[3]*.5,cameraDistance:i[3]}},u.prototype.projectPoint=function(t,e,n){var i=[e,n,0,1];return s.xyTransformMat4(i,i,t),new r((i[0]/i[3]+1)/2*this.transform.width+100,(-i[1]/i[3]+1)/2*this.transform.height+100)},u.prototype.projectAndGetPerspectiveRatio=function(t,e,n){var i=[e,n,0,1];return s.xyTransformMat4(i,i,t),{point:new r((i[0]/i[3]+1)/2*this.transform.width+100,(-i[1]/i[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/i[3]*.5}},u.prototype.isOffscreen=function(t,e,n,i){return n<100||t>=this.screenRightBoundary||i<100||e>this.screenBottomBoundary},e.exports=u},{"../symbol/projection":224,"../util/intersection_tests":264,"./grid_index":220,"@mapbox/gl-matrix":2,"@mapbox/point-geometry":4}],218:[function(t,e,n){"use strict";var i=t("../data/extent"),r=512/i/2,o=function(t,e,n){var i=this;this.tileID=t,this.indexedSymbolInstances={},this.bucketInstanceId=n;for(var r=0,o=e;r<o.length;r+=1){var a=o[r],s=a.key;i.indexedSymbolInstances[s]||(i.indexedSymbolInstances[s]=[]),i.indexedSymbolInstances[s].push({crossTileID:a.crossTileID,coord:i.getScaledCoordinates(a,t)})}};o.prototype.getScaledCoordinates=function(t,e){var n=r/Math.pow(2,e.canonical.z-this.tileID.canonical.z),o=t.anchor;return{x:Math.floor((e.canonical.x*i+o.x)*n),y:Math.floor((e.canonical.y*i+o.y)*n)}},o.prototype.findMatches=function(t,e,n){for(var i=this.tileID.canonical.z<e.canonical.z?1:Math.pow(2,this.tileID.canonical.z-e.canonical.z),r=0,o=t;r<o.length;r+=1){var a=o[r];if(!a.crossTileID){var s=this.indexedSymbolInstances[a.key];if(s)for(var u=this.getScaledCoordinates(a,e),l=0,c=s;l<c.length;l+=1){var p=c[l];if(Math.abs(p.coord.x-u.x)<=i&&Math.abs(p.coord.y-u.y)<=i&&!n[p.crossTileID]){n[p.crossTileID]=!0,a.crossTileID=p.crossTileID;break}}}}};var a=function(){this.maxCrossTileID=0};a.prototype.generate=function(){return++this.maxCrossTileID};var s=function(){this.indexes={},this.usedCrossTileIDs={}};s.prototype.addBucket=function(t,e,n){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===e.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(var i=0,r=e.symbolInstances;i<r.length;i+=1)r[i].crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});var a=this.usedCrossTileIDs[t.overscaledZ];for(var s in this.indexes){var u=this.indexes[s];if(Number(s)>t.overscaledZ)for(var l in u){var c=u[l];c.tileID.isChildOf(t)&&c.findMatches(e.symbolInstances,t,a)}else{var p=u[t.scaledTo(Number(s)).key];p&&p.findMatches(e.symbolInstances,t,a)}}for(var h=0,f=e.symbolInstances;h<f.length;h+=1){var d=f[h];d.crossTileID||(d.crossTileID=n.generate(),a[d.crossTileID]=!0)}return void 0===this.indexes[t.overscaledZ]&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new o(t,e.symbolInstances,e.bucketInstanceId),!0},s.prototype.removeBucketCrossTileIDs=function(t,e){for(var n in e.indexedSymbolInstances)for(var i=0,r=e.indexedSymbolInstances[n];i<r.length;i+=1)delete this.usedCrossTileIDs[t][r[i].crossTileID]},s.prototype.removeStaleBuckets=function(t){var e=this,n=!1;for(var i in e.indexes){var r=e.indexes[i];for(var o in r)t[r[o].bucketInstanceId]||(e.removeBucketCrossTileIDs(i,r[o]),delete r[o],n=!0)}return n};var u=function(){this.layerIndexes={},this.crossTileIDs=new a,this.maxBucketInstanceId=0};u.prototype.addLayer=function(t,e){var n=this.layerIndexes[t.id];void 0===n&&(n=this.layerIndexes[t.id]=new s);for(var i=!1,r={},o=0,a=e;o<a.length;o+=1){var u=a[o],l=u.getBucket(t);l&&(l.bucketInstanceId||(l.bucketInstanceId=++this.maxBucketInstanceId),n.addBucket(u.tileID,l,this.crossTileIDs)&&(i=!0),r[l.bucketInstanceId]=!0)}return n.removeStaleBuckets(r)&&(i=!0),i},u.prototype.pruneUnusedLayers=function(t){var e={};for(var n in t.forEach(function(t){e[t]=!0}),this.layerIndexes)e[n]||delete this.layerIndexes[n]},e.exports=u},{"../data/extent":53}],219:[function(t,e,n){"use strict";var i=t("../style-spec/util/interpolate").number,r=t("../symbol/anchor"),o=t("./check_max_angle");e.exports=function(t,e,n,a,s,u,l,c,p){var h=a?.6*u*l:0,f=Math.max(a?a.right-a.left:0,s?s.right-s.left:0),d=0===t[0].x||t[0].x===p||0===t[0].y||t[0].y===p;return e-f*l<e/4&&(e=f*l+e/4),function t(e,n,a,s,u,l,c,p,h){for(var f=l/2,d=0,m=0;m<e.length-1;m++)d+=e[m].dist(e[m+1]);for(var y=0,g=n-a,v=[],_=0;_<e.length-1;_++){for(var b=e[_],x=e[_+1],w=b.dist(x),E=x.angleTo(b);g+a<y+w;){var C=((g+=a)-y)/w,O=i(b.x,x.x,C),P=i(b.y,x.y,C);if(O>=0&&O<h&&P>=0&&P<h&&g-f>=0&&g+f<=d){var S=new r(O,P,E,_);S._round(),s&&!o(e,S,l,s,u)||v.push(S)}}y+=w}return p||v.length||c||(v=t(e,y/2,a,s,u,l,c,!0,h)),v}(t,d?e/2*c%e:(f/2+2*u)*l*c%e,e,h,n,f*l,d,!1,p)}},{"../style-spec/util/interpolate":158,"../symbol/anchor":213,"./check_max_angle":214}],220:[function(t,e,n){"use strict";var i=function(t,e,n){var i=this.boxCells=[],r=this.circleCells=[];this.xCellCount=Math.ceil(t/n),this.yCellCount=Math.ceil(e/n);for(var o=0;o<this.xCellCount*this.yCellCount;o++)i.push([]),r.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=e,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/e,this.boxUid=0,this.circleUid=0};i.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},i.prototype.insert=function(t,e,n,i,r){this._forEachCell(e,n,i,r,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(i),this.bboxes.push(r)},i.prototype.insertCircle=function(t,e,n,i){this._forEachCell(e-i,n-i,e+i,n+i,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(e),this.circles.push(n),this.circles.push(i)},i.prototype._insertBoxCell=function(t,e,n,i,r,o){this.boxCells[r].push(o)},i.prototype._insertCircleCell=function(t,e,n,i,r,o){this.circleCells[r].push(o)},i.prototype._query=function(t,e,n,i,r){if(n<0||t>this.width||i<0||e>this.height)return!r&&[];var o=[];return t<=0&&e<=0&&this.width<=n&&this.height<=i?o=Array.prototype.slice.call(this.boxKeys).concat(this.circleKeys):this._forEachCell(t,e,n,i,this._queryCell,o,{hitTest:r,seenUids:{box:{},circle:{}}}),r?o.length>0:o},i.prototype._queryCircle=function(t,e,n,i){var r=t-n,o=t+n,a=e-n,s=e+n;if(o<0||r>this.width||s<0||a>this.height)return!i&&[];var u=[];return this._forEachCell(r,a,o,s,this._queryCellCircle,u,{hitTest:i,circle:{x:t,y:e,radius:n},seenUids:{box:{},circle:{}}}),i?u.length>0:u},i.prototype.query=function(t,e,n,i){return this._query(t,e,n,i,!1)},i.prototype.hitTest=function(t,e,n,i){return this._query(t,e,n,i,!0)},i.prototype.hitTestCircle=function(t,e,n){return this._queryCircle(t,e,n,!0)},i.prototype._queryCell=function(t,e,n,i,r,o,a){var s=this,u=a.seenUids,l=this.boxCells[r];if(null!==l)for(var c=this.bboxes,p=0,h=l;p<h.length;p+=1){var f=h[p];if(!u.box[f]){u.box[f]=!0;var d=4*f;if(t<=c[d+2]&&e<=c[d+3]&&n>=c[d+0]&&i>=c[d+1]){if(a.hitTest)return o.push(!0),!0;o.push(s.boxKeys[f])}}}var m=this.circleCells[r];if(null!==m)for(var y=this.circles,g=0,v=m;g<v.length;g+=1){var _=v[g];if(!u.circle[_]){u.circle[_]=!0;var b=3*_;if(s._circleAndRectCollide(y[b],y[b+1],y[b+2],t,e,n,i)){if(a.hitTest)return o.push(!0),!0;o.push(s.circleKeys[_])}}}},i.prototype._queryCellCircle=function(t,e,n,i,r,o,a){var s=a.circle,u=a.seenUids,l=this.boxCells[r];if(null!==l)for(var c=this.bboxes,p=0,h=l;p<h.length;p+=1){var f=h[p];if(!u.box[f]){u.box[f]=!0;var d=4*f;if(this._circleAndRectCollide(s.x,s.y,s.radius,c[d+0],c[d+1],c[d+2],c[d+3]))return o.push(!0),!0}}var m=this.circleCells[r];if(null!==m)for(var y=this.circles,g=0,v=m;g<v.length;g+=1){var _=v[g];if(!u.circle[_]){u.circle[_]=!0;var b=3*_;if(this._circlesCollide(y[b],y[b+1],y[b+2],s.x,s.y,s.radius))return o.push(!0),!0}}},i.prototype._forEachCell=function(t,e,n,i,r,o,a){for(var s=this._convertToXCellCoord(t),u=this._convertToYCellCoord(e),l=this._convertToXCellCoord(n),c=this._convertToYCellCoord(i),p=s;p<=l;p++)for(var h=u;h<=c;h++)if(r.call(this,t,e,n,i,this.xCellCount*h+p,o,a))return},i.prototype._convertToXCellCoord=function(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))},i.prototype._convertToYCellCoord=function(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))},i.prototype._circlesCollide=function(t,e,n,i,r,o){var a=i-t,s=r-e,u=n+o;return u*u>a*a+s*s},i.prototype._circleAndRectCollide=function(t,e,n,i,r,o,a){var s=(o-i)/2,u=Math.abs(t-(i+s));if(u>s+n)return!1;var l=(a-r)/2,c=Math.abs(e-(r+l));if(c>l+n)return!1;if(u<=s||c<=l)return!0;var p=u-s,h=c-l;return p*p+h*h<=n*n},e.exports=i},{}],221:[function(t,e,n){"use strict";e.exports=function(t){function e(e){s.push(t[e]),u++}function n(t,e,n){var i=a[t];return delete a[t],a[e]=i,s[i].geometry[0].pop(),s[i].geometry[0]=s[i].geometry[0].concat(n[0]),i}function i(t,e,n){var i=o[e];return delete o[e],o[t]=i,s[i].geometry[0].shift(),s[i].geometry[0]=n[0].concat(s[i].geometry[0]),i}function r(t,e,n){var i=n?e[0][e[0].length-1]:e[0][0];return t+":"+i.x+":"+i.y}for(var o={},a={},s=[],u=0,l=0;l<t.length;l++){var c=t[l],p=c.geometry,h=c.text;if(h){var f=r(h,p),d=r(h,p,!0);if(f in a&&d in o&&a[f]!==o[d]){var m=i(f,d,p),y=n(f,d,s[m].geometry);delete o[f],delete a[d],a[r(h,s[y].geometry,!0)]=y,s[m].geometry=null}else f in a?n(f,d,p):d in o?i(f,d,p):(e(l),o[f]=u-1,a[d]=u-1)}else e(l)}return s.filter(function(t){return t.geometry})}},{}],222:[function(t,e,n){"use strict";var i=t("../util/web_worker_transfer").register,r=function(){this.opacity=0,this.targetOpacity=0,this.time=0};r.prototype.clone=function(){var t=new r;return t.opacity=this.opacity,t.targetOpacity=this.targetOpacity,t.time=this.time,t},i("OpacityState",r),e.exports=r},{"../util/web_worker_transfer":278}],223:[function(t,e,n){"use strict";function i(t,e,n){t.emplaceBack(e?1:0,n?1:0),t.emplaceBack(e?1:0,n?1:0),t.emplaceBack(e?1:0,n?1:0),t.emplaceBack(e?1:0,n?1:0)}function r(t){if(0===t.opacity&&!t.placed)return 0;if(1===t.opacity&&t.placed)return 4294967295;var e=t.placed?1:0,n=Math.floor(127*t.opacity);return n*m+e*y+n*g+e*v+n*_+e*b+n*x+e}var o=t("./collision_index"),a=t("../data/extent"),s=t("./symbol_size"),u=t("./projection"),l=t("../style/style_layer/symbol_style_layer_properties").layout,c=t("../source/pixels_to_tile_units"),p=function(t,e,n,i){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?e:-e))):i&&n?1:0,this.placed=n};p.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var h=function(t,e,n,i,r){this.text=new p(t?t.text:null,e,n,r),this.icon=new p(t?t.icon:null,e,i,r)};h.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var f=function(t,e,n){this.text=t,this.icon=e,this.skipFade=n},d=function(t,e){this.transform=t.clone(),this.collisionIndex=new o(this.transform),this.placements={},this.opacities={},this.stale=!1,this.fadeDuration=e};d.prototype.placeLayerTile=function(t,e,n,i){var r=e.getBucket(t);if(r){var o=r.layers[0].layout,s=Math.pow(2,this.transform.zoom-e.tileID.overscaledZ),l=e.tileSize/a,p=this.transform.calculatePosMatrix(e.tileID.toUnwrapped()),h=u.getLabelPlaneMatrix(p,"map"===o.get("text-pitch-alignment"),"map"===o.get("text-rotation-alignment"),this.transform,c(e,1,this.transform.zoom)),f=u.getLabelPlaneMatrix(p,"map"===o.get("icon-pitch-alignment"),"map"===o.get("icon-rotation-alignment"),this.transform,c(e,1,this.transform.zoom));this.placeLayerBucket(r,p,h,f,s,l,n,i,e.collisionBoxArray,e.tileID.key,t.source)}},d.prototype.placeLayerBucket=function(t,e,n,i,r,o,a,u,c,p,h){for(var d=this,m=t.layers[0].layout,y=s.evaluateSizeForZoom(t.textSizeData,this.transform.zoom,l.properties["text-size"]),g=!t.hasTextData()||m.get("text-optional"),v=!t.hasIconData()||m.get("icon-optional"),_=0,b=t.symbolInstances;_<b.length;_+=1){var x=b[_];if(!u[x.crossTileID]){var w=!1,E=!1,C=!0,O=null,P=null,S=null;x.collisionArrays||(x.collisionArrays=t.deserializeCollisionBoxes(c,x.textBoxStartIndex,x.textBoxEndIndex,x.iconBoxStartIndex,x.iconBoxEndIndex)),x.collisionArrays.textBox&&(w=(O=d.collisionIndex.placeCollisionBox(x.collisionArrays.textBox,m.get("text-allow-overlap"),o,e)).box.length>0,C=C&&O.offscreen);var T=x.collisionArrays.textCircles;if(T){var k=t.text.placedSymbolArray.get(x.placedTextSymbolIndices[0]),A=s.evaluateSizeForFeature(t.textSizeData,y,k);P=d.collisionIndex.placeCollisionCircles(T,m.get("text-allow-overlap"),r,o,x.key,k,t.lineVertexArray,t.glyphOffsetArray,A,e,n,a,"map"===m.get("text-pitch-alignment")),w=m.get("text-allow-overlap")||P.circles.length>0,C=C&&P.offscreen}x.collisionArrays.iconBox&&(E=(S=d.collisionIndex.placeCollisionBox(x.collisionArrays.iconBox,m.get("icon-allow-overlap"),o,e)).box.length>0,C=C&&S.offscreen),g||v?v?g||(E=E&&w):w=E&&w:E=w=E&&w,w&&O&&d.collisionIndex.insertCollisionBox(O.box,m.get("text-ignore-placement"),p,h,t.bucketInstanceId,x.textBoxStartIndex),E&&S&&d.collisionIndex.insertCollisionBox(S.box,m.get("icon-ignore-placement"),p,h,t.bucketInstanceId,x.iconBoxStartIndex),w&&P&&d.collisionIndex.insertCollisionCircles(P.circles,m.get("text-ignore-placement"),p,h,t.bucketInstanceId,x.textBoxStartIndex),d.placements[x.crossTileID]=new f(w,E,C||t.justReloaded),u[x.crossTileID]=!0}}t.justReloaded=!1},d.prototype.commit=function(t,e){var n=this;this.commitTime=e;var i=!1,r=t&&0!==this.fadeDuration?(this.commitTime-t.commitTime)/this.fadeDuration:1,o=t?t.opacities:{};for(var a in n.placements){var s=n.placements[a],u=o[a];u?(n.opacities[a]=new h(u,r,s.text,s.icon),i=i||s.text!==u.text.placed||s.icon!==u.icon.placed):(n.opacities[a]=new h(null,r,s.text,s.icon,s.skipFade),i=i||s.text||s.icon)}for(var l in o){var c=o[l];if(!n.opacities[l]){var p=new h(c,r,!1,!1);p.isHidden()||(n.opacities[l]=p,i=i||c.text.placed||c.icon.placed)}}i?this.lastPlacementChangeTime=e:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=t?t.lastPlacementChangeTime:e)},d.prototype.updateLayerOpacities=function(t,e){for(var n={},i=0,r=e;i<r.length;i+=1){var o=r[i],a=o.getBucket(t);a&&this.updateBucketOpacities(a,n,o.collisionBoxArray)}},d.prototype.updateBucketOpacities=function(t,e,n){t.hasTextData()&&t.text.opacityVertexArray.clear(),t.hasIconData()&&t.icon.opacityVertexArray.clear(),t.hasCollisionBoxData()&&t.collisionBox.collisionVertexArray.clear(),t.hasCollisionCircleData()&&t.collisionCircle.collisionVertexArray.clear();for(var o=t.layers[0].layout,a=new h(null,0,o.get("text-allow-overlap"),o.get("icon-allow-overlap"),!0),s=0;s<t.symbolInstances.length;s++){var u=t.symbolInstances[s],l=e[u.crossTileID],c=this.opacities[u.crossTileID];c?l&&(c=a):this.opacities[u.crossTileID]=c=a,e[u.crossTileID]=!0;var p=u.numIconVertices>0;if(u.numGlyphVertices>0||u.numVerticalGlyphVertices>0){for(var f=r(c.text),d=(u.numGlyphVertices+u.numVerticalGlyphVertices)/4,m=0;m<d;m++)t.text.opacityVertexArray.emplaceBack(f);for(var y=0,g=u.placedTextSymbolIndices;y<g.length;y+=1)t.text.placedSymbolArray.get(g[y]).hidden=c.text.isHidden()}if(p){for(var v=r(c.icon),_=0;_<u.numIconVertices/4;_++)t.icon.opacityVertexArray.emplaceBack(v);t.icon.placedSymbolArray.get(s).hidden=c.icon.isHidden()}u.collisionArrays||(u.collisionArrays=t.deserializeCollisionBoxes(n,u.textBoxStartIndex,u.textBoxEndIndex,u.iconBoxStartIndex,u.iconBoxEndIndex));var b=u.collisionArrays;if(b){b.textBox&&t.hasCollisionBoxData()&&i(t.collisionBox.collisionVertexArray,c.text.placed,!1),b.iconBox&&t.hasCollisionBoxData()&&i(t.collisionBox.collisionVertexArray,c.icon.placed,!1);var x=b.textCircles;if(x&&t.hasCollisionCircleData())for(var w=0;w<x.length;w+=5)i(t.collisionCircle.collisionVertexArray,c.text.placed,l||0===x[w+4])}}t.sortFeatures(this.transform.angle),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasCollisionBoxData()&&t.collisionBox.collisionVertexBuffer&&t.collisionBox.collisionVertexBuffer.updateData(t.collisionBox.collisionVertexArray),t.hasCollisionCircleData()&&t.collisionCircle.collisionVertexBuffer&&t.collisionCircle.collisionVertexBuffer.updateData(t.collisionCircle.collisionVertexArray)},d.prototype.symbolFadeChange=function(t){return 0===this.fadeDuration?1:(t-this.commitTime)/this.fadeDuration},d.prototype.hasTransitions=function(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration},d.prototype.stillRecent=function(t){return"undefined"!==this.commitTime&&this.commitTime+this.fadeDuration>t},d.prototype.setStale=function(){this.stale=!0};var m=Math.pow(2,25),y=Math.pow(2,24),g=Math.pow(2,17),v=Math.pow(2,16),_=Math.pow(2,9),b=Math.pow(2,8),x=Math.pow(2,1);e.exports=d},{"../data/extent":53,"../source/pixels_to_tile_units":104,"../style/style_layer/symbol_style_layer_properties":209,"./collision_index":217,"./projection":224,"./symbol_size":228}],224:[function(t,e,n){"use strict";function i(t,e){var n=[t.x,t.y,0,1];p(n,n,e);var i=n[3];return{point:new h(n[0]/i,n[1]/i),signedDistanceFromCamera:i}}function r(t,e){var n=t[0]/t[3],i=t[1]/t[3];return n>=-e[0]&&n<=e[0]&&i>=-e[1]&&i<=e[1]}function o(t,e,n,i,r,o,a,s,u,c,p,h){var f=s.glyphStartIndex+s.numGlyphs,d=s.lineStartIndex,m=s.lineStartIndex+s.lineLength,y=e.getoffsetX(s.glyphStartIndex),g=e.getoffsetX(f-1),v=l(t*y,n,i,r,o,a,s.segment,d,m,u,c,p,h);if(!v)return null;var _=l(t*g,n,i,r,o,a,s.segment,d,m,u,c,p,h);return _?{first:v,last:_}:null}function a(t,e,n,i){return t===_.horizontal&&Math.abs(n.y-e.y)>Math.abs(n.x-e.x)*i?{useVertical:!0}:(t===_.vertical?e.y<n.y:e.x>n.x)?{needsFlipping:!0}:null}function s(t,e,n,r,s,c,p,f,d,m,y,v,_,b){var x,w=e/24,E=t.lineOffsetX*e,C=t.lineOffsetY*e;if(t.numGlyphs>1){var O=t.glyphStartIndex+t.numGlyphs,P=t.lineStartIndex,S=t.lineStartIndex+t.lineLength,T=o(w,f,E,C,n,y,v,t,d,c,_,!1);if(!T)return{notEnoughRoom:!0};var k=i(T.first.point,p).point,A=i(T.last.point,p).point;if(r&&!n){var I=a(t.writingMode,k,A,b);if(I)return I}x=[T.first];for(var L=t.glyphStartIndex+1;L<O-1;L++)x.push(l(w*f.getoffsetX(L),E,C,n,y,v,t.segment,P,S,d,c,_,!1));x.push(T.last)}else{if(r&&!n){var M=i(v,s).point,z=t.lineStartIndex+t.segment+1,D=new h(d.getx(z),d.gety(z)),R=i(D,s),j=R.signedDistanceFromCamera>0?R.point:u(v,D,M,1,s),N=a(t.writingMode,M,j,b);if(N)return N}var B=l(w*f.getoffsetX(t.glyphStartIndex),E,C,n,y,v,t.segment,t.lineStartIndex,t.lineStartIndex+t.lineLength,d,c,_,!1);if(!B)return{notEnoughRoom:!0};x=[B]}for(var F=0,V=x;F<V.length;F+=1){var Z=V[F];g(m,Z.point,Z.angle)}return{}}function u(t,e,n,r,o){var a=i(t.add(t.sub(e)._unit()),o).point,s=n.sub(a);return n.add(s._mult(r/s.mag()))}function l(t,e,n,r,o,a,s,l,c,p,f,d,m){var y=r?t-e:t+e,g=y>0?1:-1,v=0;r&&(g*=-1,v=Math.PI),g<0&&(v+=Math.PI);for(var _=g>0?l+s:l+s+1,b=_,x=o,w=o,E=0,C=0,O=Math.abs(y);E+C<=O;){if((_+=g)<l||_>=c)return null;if(w=x,void 0===(x=d[_])){var P=new h(p.getx(_),p.gety(_)),S=i(P,f);if(S.signedDistanceFromCamera>0)x=d[_]=S.point;else{var T=_-g;x=u(0===E?a:new h(p.getx(T),p.gety(T)),P,w,O-E+1,f)}}E+=C,C=w.dist(x)}var k=(O-E)/C,A=x.sub(w),I=A.mult(k)._add(w);return I._add(A._unit()._perp()._mult(n*g)),{point:I,angle:v+Math.atan2(x.y-w.y,x.x-w.x),tileDistance:m?{prevTileDistance:_-g===b?0:p.gettileUnitDistanceFromAnchor(_-g),lastSegmentViewportDistance:O-E}:null}}function c(t,e){for(var n=0;n<t;n++){var i=e.length;e.resize(i+4),e.float32.set(b,3*i)}}function p(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[4]*r+n[12],t[1]=n[1]*i+n[5]*r+n[13],t[3]=n[3]*i+n[7]*r+n[15],t}var h=t("@mapbox/point-geometry"),f=t("@mapbox/gl-matrix"),d=f.mat4,m=f.vec4,y=t("./symbol_size"),g=t("../data/bucket/symbol_bucket").addDynamicAttributes,v=t("../style/style_layer/symbol_style_layer_properties").layout,_=t("../symbol/shaping").WritingMode;e.exports={updateLineLabels:function(t,e,n,o,a,u,l,p){var f=o?t.textSizeData:t.iconSizeData,d=y.evaluateSizeForZoom(f,n.transform.zoom,v.properties[o?"text-size":"icon-size"]),g=[256/n.width*2+1,256/n.height*2+1],b=o?t.text.dynamicLayoutVertexArray:t.icon.dynamicLayoutVertexArray;b.clear();for(var x=t.lineVertexArray,w=o?t.text.placedSymbolArray:t.icon.placedSymbolArray,E=n.transform.width/n.transform.height,C=!1,O=0;O<w.length;O++){var P=w.get(O);if(P.hidden||P.writingMode===_.vertical&&!C)c(P.numGlyphs,b);else{C=!1;var S=[P.anchorX,P.anchorY,0,1];if(m.transformMat4(S,S,e),r(S,g)){var T=.5+S[3]/n.transform.cameraToCenterDistance*.5,k=y.evaluateSizeForFeature(f,d,P),A=l?k*T:k/T,I=new h(P.anchorX,P.anchorY),L=i(I,a).point,M={},z=s(P,A,!1,p,e,a,u,t.glyphOffsetArray,x,b,L,I,M,E);C=z.useVertical,(z.notEnoughRoom||C||z.needsFlipping&&s(P,A,!0,p,e,a,u,t.glyphOffsetArray,x,b,L,I,M,E).notEnoughRoom)&&c(P.numGlyphs,b)}else c(P.numGlyphs,b)}}o?t.text.dynamicLayoutVertexBuffer.updateData(b):t.icon.dynamicLayoutVertexBuffer.updateData(b)},getLabelPlaneMatrix:function(t,e,n,i,r){var o=d.identity(new Float32Array(16));return e?(d.identity(o),d.scale(o,o,[1/r,1/r,1]),n||d.rotateZ(o,o,i.angle)):(d.scale(o,o,[i.width/2,-i.height/2,1]),d.translate(o,o,[1,-1,0]),d.multiply(o,o,t)),o},getGlCoordMatrix:function(t,e,n,i,r){var o=d.identity(new Float32Array(16));return e?(d.multiply(o,o,t),d.scale(o,o,[r,r,1]),n||d.rotateZ(o,o,-i.angle)):(d.scale(o,o,[1,-1,1]),d.translate(o,o,[-1,-1,0]),d.scale(o,o,[2/i.width,2/i.height,1])),o},project:i,placeFirstAndLastGlyph:o,xyTransformMat4:p};var b=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0])},{"../data/bucket/symbol_bucket":51,"../style/style_layer/symbol_style_layer_properties":209,"../symbol/shaping":226,"./symbol_size":228,"@mapbox/gl-matrix":2,"@mapbox/point-geometry":4}],225:[function(t,e,n){"use strict";var i=t("@mapbox/point-geometry"),r=t("../style/parse_glyph_pbf").GLYPH_PBF_BORDER;e.exports={getIconQuads:function(t,e,n,r,o,a,s){var u,l,c,p,h=e.image,f=n.layout,d=e.top-1/h.pixelRatio,m=e.left-1/h.pixelRatio,y=e.bottom+1/h.pixelRatio,g=e.right+1/h.pixelRatio;if("none"!==f.get("icon-text-fit")&&o){var v=g-m,_=y-d,b=f.get("text-size").evaluate(s)/24,x=o.left*b,w=o.top*b,E=o.right*b-x,C=o.bottom*b-w,O=f.get("icon-text-fit-padding")[0],P=f.get("icon-text-fit-padding")[1],S=f.get("icon-text-fit-padding")[2],T=f.get("icon-text-fit-padding")[3],k="width"===f.get("icon-text-fit")?.5*(C-_):0,A="height"===f.get("icon-text-fit")?.5*(E-v):0,I="width"===f.get("icon-text-fit")||"both"===f.get("icon-text-fit")?E:v,L="height"===f.get("icon-text-fit")||"both"===f.get("icon-text-fit")?C:_;u=new i(x+A-T,w+k-O),l=new i(x+A+P+I,w+k-O),c=new i(x+A+P+I,w+k+S+L),p=new i(x+A-T,w+k+S+L)}else u=new i(m,d),l=new i(g,d),c=new i(g,y),p=new i(m,y);var M=n.layout.get("icon-rotate").evaluate(s)*Math.PI/180;if(M){var z=Math.sin(M),D=Math.cos(M),R=[D,-z,z,D];u._matMult(R),l._matMult(R),p._matMult(R),c._matMult(R)}return[{tl:u,tr:l,bl:p,br:c,tex:{x:h.textureRect.x-1,y:h.textureRect.y-1,w:h.textureRect.w+2,h:h.textureRect.h+2},writingMode:void 0,glyphOffset:[0,0]}]},getGlyphQuads:function(t,e,n,o,a,s,u){for(var l=n.layout.get("text-rotate").evaluate(s)*Math.PI/180,c=n.layout.get("text-offset").evaluate(s).map(function(t){return 24*t}),p=e.positionedGlyphs,h=[],f=0;f<p.length;f++){var d=p[f],m=u[d.glyph];if(m){var y=m.rect;if(y){var g=r+1,v=m.metrics.advance/2,_=o?[d.x+v,d.y]:[0,0],b=o?[0,0]:[d.x+v+c[0],d.y+c[1]],x=m.metrics.left-g-v+b[0],w=-m.metrics.top-g+b[1],E=x+y.w,C=w+y.h,O=new i(x,w),P=new i(E,w),S=new i(x,C),T=new i(E,C);if(o&&d.vertical){var k=new i(-v,v),A=-Math.PI/2,I=new i(5,0);O._rotateAround(A,k)._add(I),P._rotateAround(A,k)._add(I),S._rotateAround(A,k)._add(I),T._rotateAround(A,k)._add(I)}if(l){var L=Math.sin(l),M=Math.cos(l),z=[M,-L,L,M];O._matMult(z),P._matMult(z),S._matMult(z),T._matMult(z)}h.push({tl:O,tr:P,bl:S,br:T,tex:y,writingMode:e.writingMode,glyphOffset:_})}}}return h}}},{"../style/parse_glyph_pbf":186,"@mapbox/point-geometry":4}],226:[function(t,e,n){"use strict";function i(t,e,n,i){var r=Math.pow(t-e,2);return i?t<e?r/2:2*r:r+Math.abs(n)*n}function r(t,e){var n=0;return 10===t&&(n-=1e4),40!==t&&65288!==t||(n+=50),41!==e&&65289!==e||(n+=50),n}function o(t,e,n,r,o,a){for(var s=null,u=i(e,n,o,a),l=0,c=r;l<c.length;l+=1){var p=c[l],h=i(e-p.x,n,o,a)+p.badness;h<=u&&(s=p,u=h)}return{index:t,x:e,priorBreak:s,badness:u}}function a(t,e,n,i){if(!n)return[];if(!t)return[];for(var a=[],s=function(t,e,n,i){for(var r=0,o=0;o<t.length;o++){var a=i[t.charCodeAt(o)];a&&(r+=a.metrics.advance+e)}return r/Math.max(1,Math.ceil(r/n))}(t,e,n,i),u=0,c=0;c<t.length;c++){var p=t.charCodeAt(c),h=i[p];h&&!f[p]&&(u+=h.metrics.advance+e),c<t.length-1&&(d[p]||l.charAllowsIdeographicBreaking(p))&&a.push(o(c+1,u,s,a,r(p,t.charCodeAt(c+1)),!1))}return function t(e){return e?t(e.priorBreak).concat(e.index):[]}(o(t.length,u,s,a,0,!0))}function s(t){var e=.5,n=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(t){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:e,verticalAlign:n}}function u(t,e,n,i,r){if(r){var o=e[t[i].glyph];if(o)for(var a=(t[i].x+o.metrics.advance)*r,s=n;s<=i;s++)t[s].x-=a}}var l=t("../util/script_detection"),c=t("../util/verticalize_punctuation"),p=t("../source/rtl_text_plugin"),h={horizontal:1,vertical:2,horizontalOnly:3};e.exports={shapeText:function(t,e,n,i,r,o,f,d,m,y){var g=t.trim();y===h.vertical&&(g=c(g));var v=[],_={positionedGlyphs:v,text:g,top:d[1],bottom:d[1],left:d[0],right:d[0],writingMode:y},b=p.processBidirectionalText;return function(t,e,n,i,r,o,a,c,p){for(var f=0,d=-17,m=0,y=t.positionedGlyphs,g="right"===o?1:"left"===o?0:.5,v=0,_=n;v<_.length;v+=1){var b=_[v];if((b=b.trim()).length){for(var x=y.length,w=0;w<b.length;w++){var E=b.charCodeAt(w),C=e[E];C&&(l.charHasUprightVerticalOrientation(E)&&a!==h.horizontal?(y.push({glyph:E,x:f,y:0,vertical:!0}),f+=p+c):(y.push({glyph:E,x:f,y:d,vertical:!1}),f+=C.metrics.advance+c))}y.length!==x&&(m=Math.max(f-c,m),u(y,e,x,y.length-1,g)),f=0,d+=i}else d+=i}var O=s(r),P=O.horizontalAlign,S=O.verticalAlign;!function(t,e,n,i,r,o,a){for(var s=(g-P)*m,u=(-S*a+.5)*o,l=0;l<t.length;l++)t[l].x+=s,t[l].y+=u}(y,0,0,0,0,i,n.length);var T=n.length*i;t.top+=-S*T,t.bottom=t.top+T,t.left+=-P*m,t.right=t.left+m}(_,e,b?b(g,a(g,f,n,e)):function(t,e){for(var n=[],i=0,r=0,o=e;r<o.length;r+=1){var a=o[r];n.push(t.substring(i,a)),i=a}return i<t.length&&n.push(t.substring(i,t.length)),n}(g,a(g,f,n,e)),i,r,o,y,f,m),!!v.length&&_},shapeIcon:function(t,e,n){var i=s(n),r=e[0]-t.displaySize[0]*i.horizontalAlign,o=e[1]-t.displaySize[1]*i.verticalAlign;return{image:t,top:o,bottom:o+t.displaySize[1],left:r,right:r+t.displaySize[0]}},WritingMode:h};var f={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},d={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0}},{"../source/rtl_text_plugin":109,"../util/script_detection":269,"../util/verticalize_punctuation":277}],227:[function(t,e,n){"use strict";function i(t,e,n,i,c,p){var h=p.layoutTextSize.evaluate(e),d=p.layoutIconSize.evaluate(e),m=p.textMaxSize.evaluate(e);void 0===m&&(m=h);var _=t.layers[0].layout,C=_.get("text-offset").evaluate(e),O=_.get("icon-offset").evaluate(e),P=t.tilePixelRatio*(h/24),S=t.tilePixelRatio*m/24,T=t.tilePixelRatio*d,k=t.tilePixelRatio*_.get("symbol-spacing"),A=_.get("text-padding")*t.tilePixelRatio,I=_.get("icon-padding")*t.tilePixelRatio,L=_.get("text-max-angle")/180*Math.PI,M="map"===_.get("text-rotation-alignment")&&"line"===_.get("symbol-placement"),z="map"===_.get("icon-rotation-alignment")&&"line"===_.get("symbol-placement"),D=k/2,R=function(o,a){a.x<0||a.x>=w||a.y<0||a.y>=w||t.symbolInstances.push(function(t,e,n,i,o,a,s,u,c,p,h,d,m,_,b,x,w,C,O,P,S,T){var k,A,I=t.addToLineVertexArray(e,n),L=0,M=0,z=0,D=i.horizontal?i.horizontal.text:"",R=[];i.horizontal&&(k=new g(s,n,e,u,c,p,i.horizontal,h,d,m,t.overscaling),M+=r(t,e,i.horizontal,a,m,O,P,_,I,i.vertical?f.horizontal:f.horizontalOnly,R,S,T),i.vertical&&(z+=r(t,e,i.vertical,a,m,O,P,_,I,f.vertical,R,S,T)));var j=k?k.boxStartIndex:t.collisionBoxArray.length,N=k?k.boxEndIndex:t.collisionBoxArray.length;if(o){var B=y(e,o,a,w,i.horizontal,O,P);A=new g(s,n,e,u,c,p,o,b,x,!1,t.overscaling),L=4*B.length;var F=t.iconSizeData,V=null;"source"===F.functionType?V=[10*a.layout.get("icon-size").evaluate(P)]:"composite"===F.functionType&&(V=[10*T.compositeIconSizes[0].evaluate(P),10*T.compositeIconSizes[1].evaluate(P)]),t.addSymbols(t.icon,B,V,C,w,P,!1,e,I.lineStartIndex,I.lineLength)}var Z=A?A.boxStartIndex:t.collisionBoxArray.length,U=A?A.boxEndIndex:t.collisionBoxArray.length;return t.glyphOffsetArray.length>=E.MAX_GLYPHS&&v.warnOnce("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),{key:D,textBoxStartIndex:j,textBoxEndIndex:N,iconBoxStartIndex:Z,iconBoxEndIndex:U,textOffset:_,iconOffset:C,anchor:e,line:n,featureIndex:u,feature:P,numGlyphVertices:M,numVerticalGlyphVertices:z,numIconVertices:L,textOpacityState:new l,iconOpacityState:new l,isDuplicate:!1,placedTextSymbolIndices:R,crossTileID:0}}(t,a,o,n,i,t.layers[0],t.collisionBoxArray,e.index,e.sourceLayerIndex,t.index,P,A,M,C,T,I,z,O,{zoom:t.zoom},e,c,p))};if("line"===_.get("symbol-placement"))for(var j=0,N=u(e.geometry,0,0,w,w);j<N.length;j+=1)for(var B=N[j],F=0,V=s(B,k,L,n.vertical||n.horizontal,i,24,S,t.overscaling,w);F<V.length;F+=1){var Z=V[F],U=n.horizontal;U&&o(t,U.text,D,Z)||R(B,Z)}else if("Polygon"===e.type)for(var q=0,H=x(e.geometry,0);q<H.length;q+=1){var G=H[q],W=b(G,16);R(G[0],new a(W.x,W.y,0))}else if("LineString"===e.type)for(var K=0,X=e.geometry;K<X.length;K+=1){var J=X[K];R(J,new a(J[0].x,J[0].y,0))}else if("Point"===e.type)for(var Y=0,Q=e.geometry;Y<Q.length;Y+=1)for(var $=0,tt=Q[Y];$<tt.length;$+=1){var et=tt[$];R([et],new a(et.x,et.y,0))}}function r(t,e,n,i,r,o,a,s,u,l,c,p,h){var f=m(e,n,i,r,o,a,p),d=t.textSizeData,y=null;return"source"===d.functionType?y=[10*i.layout.get("text-size").evaluate(a)]:"composite"===d.functionType&&(y=[10*h.compositeTextSizes[0].evaluate(a),10*h.compositeTextSizes[1].evaluate(a)]),t.addSymbols(t.text,f,y,s,r,a,l,e,u.lineStartIndex,u.lineLength),c.push(t.text.placedSymbolArray.length-1),4*f.length}function o(t,e,n,i){var r=t.compareText;if(e in r){for(var o=r[e],a=o.length-1;a>=0;a--)if(i.dist(o[a])<n)return!0}else r[e]=[];return r[e].push(i),!1}var a=t("./anchor"),s=t("./get_anchors"),u=t("./clip_line"),l=t("./opacity_state"),c=t("./shaping"),p=c.shapeText,h=c.shapeIcon,f=c.WritingMode,d=t("./quads"),m=d.getGlyphQuads,y=d.getIconQuads,g=t("./collision_feature"),v=t("../util/util"),_=t("../util/script_detection"),b=t("../util/find_pole_of_inaccessibility"),x=t("../util/classify_rings"),w=t("../data/extent"),E=t("../data/bucket/symbol_bucket"),C=t("../style/evaluation_parameters");t("@mapbox/point-geometry"),e.exports={performSymbolLayout:function(t,e,n,r,o,a){t.createArrays(),t.symbolInstances=[],t.tilePixelRatio=w/(512*t.overscaling),t.compareText={},t.iconsNeedLinear=!1;var s=t.layers[0].layout,u=t.layers[0]._unevaluatedLayout._values,l={};if("composite"===t.textSizeData.functionType){var c=t.textSizeData.zoomRange,d=c.max;l.compositeTextSizes=[u["text-size"].possiblyEvaluate(new C(c.min)),u["text-size"].possiblyEvaluate(new C(d))]}if("composite"===t.iconSizeData.functionType){var m=t.iconSizeData.zoomRange,y=m.max;l.compositeIconSizes=[u["icon-size"].possiblyEvaluate(new C(m.min)),u["icon-size"].possiblyEvaluate(new C(y))]}l.layoutTextSize=u["text-size"].possiblyEvaluate(new C(t.zoom+1)),l.layoutIconSize=u["icon-size"].possiblyEvaluate(new C(t.zoom+1)),l.textMaxSize=u["text-size"].possiblyEvaluate(new C(18));for(var g=24*s.get("text-line-height"),b="map"===s.get("text-rotation-alignment")&&"line"===s.get("symbol-placement"),x=s.get("text-keep-upright"),E=0,O=t.features;E<O.length;E+=1){var P=O[E],S=s.get("text-font").evaluate(P).join(","),T=e[S]||{},k=n[S]||{},A={},I=P.text;if(I){var L=_.allowsVerticalWritingMode(I),M=s.get("text-offset").evaluate(P).map(function(t){return 24*t}),z=24*s.get("text-letter-spacing").evaluate(P),D=_.allowsLetterSpacing(I)?z:0,R=s.get("text-anchor").evaluate(P),j=s.get("text-justify").evaluate(P),N="line"!==s.get("symbol-placement")?24*s.get("text-max-width").evaluate(P):0;A.horizontal=p(I,T,N,g,R,j,D,M,24,f.horizontal),L&&b&&x&&(A.vertical=p(I,T,N,g,R,j,D,M,24,f.vertical))}var B=void 0;if(P.icon){var F=r[P.icon];F&&(B=h(o[P.icon],s.get("icon-offset").evaluate(P),s.get("icon-anchor").evaluate(P)),void 0===t.sdfIcons?t.sdfIcons=F.sdf:t.sdfIcons!==F.sdf&&v.warnOnce("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),F.pixelRatio!==t.pixelRatio?t.iconsNeedLinear=!0:0!==s.get("icon-rotate").constantOr(1)&&(t.iconsNeedLinear=!0))}(A.horizontal||B)&&i(t,P,A,B,k,l)}a&&t.generateCollisionDebugBuffers()}}},{"../data/bucket/symbol_bucket":51,"../data/extent":53,"../style/evaluation_parameters":182,"../util/classify_rings":255,"../util/find_pole_of_inaccessibility":261,"../util/script_detection":269,"../util/util":275,"./anchor":213,"./clip_line":215,"./collision_feature":216,"./get_anchors":219,"./opacity_state":222,"./quads":225,"./shaping":226,"@mapbox/point-geometry":4}],228:[function(t,e,n){"use strict";var i=t("../style-spec/expression").normalizePropertyExpression,r=t("../style-spec/util/interpolate"),o=t("../util/util");e.exports={getSizeData:function(t,e){var n=e.expression;if("constant"===n.kind)return{functionType:"constant",layoutSize:n.evaluate({zoom:t+1})};if("source"===n.kind)return{functionType:"source"};for(var i=n.zoomStops,r=0;r<i.length&&i[r]<=t;)r++;for(var o=r=Math.max(0,r-1);o<i.length&&i[o]<t+1;)o++;o=Math.min(i.length-1,o);var a={min:i[r],max:i[o]};return"composite"===n.kind?{functionType:"composite",zoomRange:a,propertyValue:e.value}:{functionType:"camera",layoutSize:n.evaluate({zoom:t+1}),zoomRange:a,sizeRange:{min:n.evaluate({zoom:a.min}),max:n.evaluate({zoom:a.max})},propertyValue:e.value}},evaluateSizeForFeature:function(t,e,n){var i=e;return"source"===t.functionType?n.lowerSize/10:"composite"===t.functionType?r.number(n.lowerSize/10,n.upperSize/10,i.uSizeT):i.uSize},evaluateSizeForZoom:function(t,e,n){if("constant"===t.functionType)return{uSizeT:0,uSize:t.layoutSize};if("source"===t.functionType)return{uSizeT:0,uSize:0};if("camera"===t.functionType){var r=t.zoomRange,a=t.sizeRange,s=i(t.propertyValue,n.specification),u=o.clamp(s.interpolationFactor(e,r.min,r.max),0,1);return{uSizeT:0,uSize:a.min+u*(a.max-a.min)}}var l=t.zoomRange,c=i(t.propertyValue,n.specification);return{uSizeT:o.clamp(c.interpolationFactor(e,l.min,l.max),0,1),uSize:0}}}},{"../style-spec/expression":139,"../style-spec/util/interpolate":158,"../util/util":275}],229:[function(t,e,n){"use strict";var i=t("../source/rtl_text_plugin");e.exports=function(t,e,n){var r=e.layout.get("text-transform").evaluate(n);return"uppercase"===r?t=t.toLocaleUpperCase():"lowercase"===r&&(t=t.toLocaleLowerCase()),i.applyArabicShaping&&(t=i.applyArabicShaping(t)),t}},{"../source/rtl_text_plugin":109}],230:[function(t,e,n){"use strict";var i=t("../util/dom"),r=t("@mapbox/point-geometry"),o={scrollZoom:t("./handler/scroll_zoom"),boxZoom:t("./handler/box_zoom"),dragRotate:t("./handler/drag_rotate"),dragPan:t("./handler/drag_pan"),keyboard:t("./handler/keyboard"),doubleClickZoom:t("./handler/dblclick_zoom"),touchZoomRotate:t("./handler/touch_zoom_rotate")};e.exports=function(t,e){function n(){h=null}function a(e,n){var r=i.mousePos(u,n);return t.fire(e,{lngLat:t.unproject(r),point:r,originalEvent:n})}function s(e,n){var o=i.touchPos(u,n),a=o.reduce(function(t,e,n,i){return t.add(e.div(i.length))},new r(0,0));return t.fire(e,{lngLat:t.unproject(a),point:a,lngLats:o.map(function(e){return t.unproject(e)},this),points:o,originalEvent:n})}var u=t.getCanvasContainer(),l=null,c=!1,p=null,h=null;for(var f in o)t[f]=new o[f](t,e),e.interactive&&e[f]&&t[f].enable(e[f]);u.addEventListener("mouseout",function(t){a("mouseout",t)},!1),u.addEventListener("mousedown",function(e){t.doubleClickZoom.isActive()||t.stop(),p=i.mousePos(u,e),a("mousedown",e),c=!0},!1),u.addEventListener("mouseup",function(e){var n=t.dragRotate&&t.dragRotate.isActive();l&&!n&&a("contextmenu",l),l=null,c=!1,a("mouseup",e)},!1),u.addEventListener("mousemove",function(e){if(!(t.dragPan&&t.dragPan.isActive()||t.dragRotate&&t.dragRotate.isActive())){for(var n=e.toElement||e.target;n&&n!==u;)n=n.parentNode;n===u&&a("mousemove",e)}},!1),u.addEventListener("mouseover",function(t){for(var e=t.toElement||t.target;e&&e!==u;)e=e.parentNode;e===u&&a("mouseover",t)},!1),u.addEventListener("touchstart",function(e){t.stop(),s("touchstart",e),!e.touches||e.touches.length>1||(h?(clearTimeout(h),h=null,a("dblclick",e)):h=setTimeout(n,300))},!1),u.addEventListener("touchend",function(t){s("touchend",t)},!1),u.addEventListener("touchmove",function(t){s("touchmove",t)},!1),u.addEventListener("touchcancel",function(t){s("touchcancel",t)},!1),u.addEventListener("click",function(t){i.mousePos(u,t).equals(p)&&a("click",t)},!1),u.addEventListener("dblclick",function(t){a("dblclick",t),t.preventDefault()},!1),u.addEventListener("contextmenu",function(e){var n=t.dragRotate&&t.dragRotate.isActive();c||n?c&&(l=e):a("contextmenu",e),e.preventDefault()},!1)}},{"../util/dom":259,"./handler/box_zoom":239,"./handler/dblclick_zoom":240,"./handler/drag_pan":241,"./handler/drag_rotate":242,"./handler/keyboard":243,"./handler/scroll_zoom":244,"./handler/touch_zoom_rotate":245,"@mapbox/point-geometry":4}],231:[function(t,e,n){"use strict";var i=t("../util/util"),r=t("../style-spec/util/interpolate").number,o=t("../util/browser"),a=t("../geo/lng_lat"),s=t("../geo/lng_lat_bounds"),u=t("@mapbox/point-geometry"),l=function(t){function e(e,n){t.call(this),this.moving=!1,this.transform=e,this._bearingSnap=n.bearingSnap}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getCenter=function(){return this.transform.center},e.prototype.setCenter=function(t,e){return this.jumpTo({center:t},e)},e.prototype.panBy=function(t,e,n){return t=u.convert(t).mult(-1),this.panTo(this.transform.center,i.extend({offset:t},e),n)},e.prototype.panTo=function(t,e,n){return this.easeTo(i.extend({center:t},e),n)},e.prototype.getZoom=function(){return this.transform.zoom},e.prototype.setZoom=function(t,e){return this.jumpTo({zoom:t},e),this},e.prototype.zoomTo=function(t,e,n){return this.easeTo(i.extend({zoom:t},e),n)},e.prototype.zoomIn=function(t,e){return this.zoomTo(this.getZoom()+1,t,e),this},e.prototype.zoomOut=function(t,e){return this.zoomTo(this.getZoom()-1,t,e),this},e.prototype.getBearing=function(){return this.transform.bearing},e.prototype.setBearing=function(t,e){return this.jumpTo({bearing:t},e),this},e.prototype.rotateTo=function(t,e,n){return this.easeTo(i.extend({bearing:t},e),n)},e.prototype.resetNorth=function(t,e){return this.rotateTo(0,i.extend({duration:1e3},t),e),this},e.prototype.snapToNorth=function(t,e){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,e):this},e.prototype.getPitch=function(){return this.transform.pitch},e.prototype.setPitch=function(t,e){return this.jumpTo({pitch:t},e),this},e.prototype.fitBounds=function(t,e,n){if("number"==typeof(e=i.extend({padding:{top:0,bottom:0,right:0,left:0},offset:[0,0],maxZoom:this.transform.maxZoom},e)).padding){var r=e.padding;e.padding={top:r,bottom:r,right:r,left:r}}if(!i.deepEqual(Object.keys(e.padding).sort(function(t,e){return t<e?-1:t>e?1:0}),["bottom","left","right","top"]))return i.warnOnce("options.padding must be a positive number, or an Object with keys 'bottom', 'left', 'right', 'top'"),this;t=s.convert(t);var o=[(e.padding.left-e.padding.right)/2,(e.padding.top-e.padding.bottom)/2],a=Math.min(e.padding.right,e.padding.left),l=Math.min(e.padding.top,e.padding.bottom);e.offset=[e.offset[0]+o[0],e.offset[1]+o[1]];var c=u.convert(e.offset),p=this.transform,h=p.project(t.getNorthWest()),f=p.project(t.getSouthEast()),d=f.sub(h),m=(p.width-2*a-2*Math.abs(c.x))/d.x,y=(p.height-2*l-2*Math.abs(c.y))/d.y;return y<0||m<0?(i.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset."),this):(e.center=p.unproject(h.add(f).div(2)),e.zoom=Math.min(p.scaleZoom(p.scale*Math.min(m,y)),e.maxZoom),e.bearing=0,e.linear?this.easeTo(e,n):this.flyTo(e,n))},e.prototype.jumpTo=function(t,e){this.stop();var n=this.transform,i=!1,r=!1,o=!1;return"zoom"in t&&n.zoom!==+t.zoom&&(i=!0,n.zoom=+t.zoom),void 0!==t.center&&(n.center=a.convert(t.center)),"bearing"in t&&n.bearing!==+t.bearing&&(r=!0,n.bearing=+t.bearing),"pitch"in t&&n.pitch!==+t.pitch&&(o=!0,n.pitch=+t.pitch),this.fire("movestart",e).fire("move",e),i&&this.fire("zoomstart",e).fire("zoom",e).fire("zoomend",e),r&&this.fire("rotate",e),o&&this.fire("pitchstart",e).fire("pitch",e).fire("pitchend",e),this.fire("moveend",e)},e.prototype.easeTo=function(t,e){var n=this;this.stop(),!1===(t=i.extend({offset:[0,0],duration:500,easing:i.ease},t)).animate&&(t.duration=0);var o=this.transform,s=this.getZoom(),l=this.getBearing(),c=this.getPitch(),p="zoom"in t?+t.zoom:s,h="bearing"in t?this._normalizeBearing(t.bearing,l):l,f="pitch"in t?+t.pitch:c,d=o.centerPoint.add(u.convert(t.offset)),m=o.pointLocation(d),y=a.convert(t.center||m);this._normalizeCenter(y);var g,v,_=o.project(m),b=o.project(y).sub(_),x=o.zoomScale(p-s);return t.around&&(g=a.convert(t.around),v=o.locationPoint(g)),this.zooming=p!==s,this.rotating=l!==h,this.pitching=f!==c,this._prepareEase(e,t.noMoveStart),clearTimeout(this._onEaseEnd),this._ease(function(t){if(n.zooming&&(o.zoom=r(s,p,t)),n.rotating&&(o.bearing=r(l,h,t)),n.pitching&&(o.pitch=r(c,f,t)),g)o.setLocationAtPoint(g,v);else{var i=o.zoomScale(o.zoom-s),a=p>s?Math.min(2,x):Math.max(.5,x),u=Math.pow(a,1-t),m=o.unproject(_.add(b.mult(t*u)).mult(i));o.setLocationAtPoint(o.renderWorldCopies?m.wrap():m,d)}n._fireMoveEvents(e)},function(){t.delayEndEvents?n._onEaseEnd=setTimeout(function(){return n._afterEase(e)},t.delayEndEvents):n._afterEase(e)},t),this},e.prototype._prepareEase=function(t,e){this.moving=!0,e||this.fire("movestart",t),this.zooming&&this.fire("zoomstart",t),this.pitching&&this.fire("pitchstart",t)},e.prototype._fireMoveEvents=function(t){this.fire("move",t),this.zooming&&this.fire("zoom",t),this.rotating&&this.fire("rotate",t),this.pitching&&this.fire("pitch",t)},e.prototype._afterEase=function(t){var e=this.zooming,n=this.pitching;this.moving=!1,this.zooming=!1,this.rotating=!1,this.pitching=!1,e&&this.fire("zoomend",t),n&&this.fire("pitchend",t),this.fire("moveend",t)},e.prototype.flyTo=function(t,e){function n(t){var e=(O*O-C*C+(t?-1:1)*k*k*P*P)/(2*(t?O:C)*k*P);return Math.log(Math.sqrt(e*e+1)-e)}function o(t){return(Math.exp(t)-Math.exp(-t))/2}function s(t){return(Math.exp(t)+Math.exp(-t))/2}var l=this;this.stop(),t=i.extend({offset:[0,0],speed:1.2,curve:1.42,easing:i.ease},t);var c=this.transform,p=this.getZoom(),h=this.getBearing(),f=this.getPitch(),d="zoom"in t?i.clamp(+t.zoom,c.minZoom,c.maxZoom):p,m="bearing"in t?this._normalizeBearing(t.bearing,h):h,y="pitch"in t?+t.pitch:f,g=c.zoomScale(d-p),v=c.centerPoint.add(u.convert(t.offset)),_=c.pointLocation(v),b=a.convert(t.center||_);this._normalizeCenter(b);var x=c.project(_),w=c.project(b).sub(x),E=t.curve,C=Math.max(c.width,c.height),O=C/g,P=w.mag();if("minZoom"in t){var S=i.clamp(Math.min(t.minZoom,p,d),c.minZoom,c.maxZoom),T=C/c.zoomScale(S-p);E=Math.sqrt(T/P*2)}var k=E*E,A=n(0),I=function(t){return s(A)/s(A+E*t)},L=function(t){return C*((s(A)*function(t){return o(t)/s(t)}(A+E*t)-o(A))/k)/P},M=(n(1)-A)/E;if(Math.abs(P)<1e-6||!isFinite(M)){if(Math.abs(C-O)<1e-6)return this.easeTo(t,e);var z=O<C?-1:1;M=Math.abs(Math.log(O/C))/E,L=function(){return 0},I=function(t){return Math.exp(z*E*t)}}return t.duration="duration"in t?+t.duration:1e3*M/("screenSpeed"in t?+t.screenSpeed/E:+t.speed),t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0),this.zooming=!0,this.rotating=h!==m,this.pitching=y!==f,this._prepareEase(e,!1),this._ease(function(t){var n=t*M,i=1/I(n);c.zoom=p+c.scaleZoom(i),l.rotating&&(c.bearing=r(h,m,t)),l.pitching&&(c.pitch=r(f,y,t));var o=c.unproject(x.add(w.mult(L(n))).mult(i));c.setLocationAtPoint(c.renderWorldCopies?o.wrap():o,v),l._fireMoveEvents(e)},function(){return l._afterEase(e)},t),this},e.prototype.isEasing=function(){return!!this._isEasing},e.prototype.isMoving=function(){return this.moving},e.prototype.stop=function(){return this._onFrame&&this._finishAnimation(),this},e.prototype._ease=function(t,e,n){var i=this;!1===n.animate||0===n.duration?(t(1),e()):(this._easeStart=o.now(),this._isEasing=!0,this._easeOptions=n,this._startAnimation(function(e){var n=Math.min((o.now()-i._easeStart)/i._easeOptions.duration,1);t(i._easeOptions.easing(n)),1===n&&i.stop()},function(){i._isEasing=!1,e()}))},e.prototype._updateCamera=function(){this._onFrame&&this._onFrame(this.transform)},e.prototype._startAnimation=function(t,e){return void 0===e&&(e=function(){}),this.stop(),this._onFrame=t,this._finishFn=e,this._update(),this},e.prototype._finishAnimation=function(){delete this._onFrame;var t=this._finishFn;delete this._finishFn,t.call(this)},e.prototype._normalizeBearing=function(t,e){t=i.wrap(t,-180,180);var n=Math.abs(t-e);return Math.abs(t-360-e)<n&&(t-=360),Math.abs(t+360-e)<n&&(t+=360),t},e.prototype._normalizeCenter=function(t){var e=this.transform;if(e.renderWorldCopies&&!e.lngRange){var n=t.lng-e.center.lng;t.lng+=n>180?-360:n<-180?360:0}},e}(t("../util/evented"));e.exports=l},{"../geo/lng_lat":62,"../geo/lng_lat_bounds":63,"../style-spec/util/interpolate":158,"../util/browser":252,"../util/evented":260,"../util/util":275,"@mapbox/point-geometry":4}],232:[function(t,e,n){"use strict";var i=t("../../util/dom"),r=t("../../util/util"),o=t("../../util/config"),a=function(t){this.options=t,r.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};a.prototype.getDefaultPosition=function(){return"bottom-right"},a.prototype.onAdd=function(t){var e=this.options&&this.options.compact;return this._map=t,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),e&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===e&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},a.prototype.onRemove=function(){i.remove(this._container),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0},a.prototype._updateEditLink=function(){var t=this._editLink;t||(t=this._editLink=this._container.querySelector(".mapbox-improve-map"));var e=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:o.ACCESS_TOKEN}];if(t){var n=e.reduce(function(t,n,i){return n.value&&(t+=n.key+"="+n.value+(i<e.length-1?"&":"")),t},"?");t.href="https://www.mapbox.com/feedback/"+n+(this._map._hash?this._map._hash.getHashString(!0):"")}},a.prototype._updateData=function(t){t&&"metadata"===t.sourceDataType&&(this._updateAttributions(),this._updateEditLink())},a.prototype._updateAttributions=function(){if(this._map.style){var t=[];if(this._map.style.stylesheet){var e=this._map.style.stylesheet;this.styleOwner=e.owner,this.styleId=e.id}var n=this._map.style.sourceCaches;for(var i in n){var r=n[i].getSource();r.attribution&&t.indexOf(r.attribution)<0&&t.push(r.attribution)}t.sort(function(t,e){return t.length-e.length}),(t=t.filter(function(e,n){for(var i=n+1;i<t.length;i++)if(t[i].indexOf(e)>=0)return!1;return!0})).length?(this._container.innerHTML=t.join(" | "),this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null}},a.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")},e.exports=a},{"../../util/config":256,"../../util/dom":259,"../../util/util":275}],233:[function(t,e,n){"use strict";var i=t("../../util/dom"),r=t("../../util/util"),o=t("../../util/window"),a=function(){this._fullscreen=!1,r.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in o.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in o.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in o.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in o.document&&(this._fullscreenchange="MSFullscreenChange"),this._className="mapboxgl-ctrl"};a.prototype.onAdd=function(t){return this._map=t,this._mapContainer=this._map.getContainer(),this._container=i.create("div",this._className+" mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._container.style.display="none",r.warnOnce("This device does not support fullscreen mode.")),this._container},a.prototype.onRemove=function(){i.remove(this._container),this._map=null,o.document.removeEventListener(this._fullscreenchange,this._changeIcon)},a.prototype._checkFullscreenSupport=function(){return!!(o.document.fullscreenEnabled||o.document.mozFullScreenEnabled||o.document.msFullscreenEnabled||o.document.webkitFullscreenEnabled)},a.prototype._setupUI=function(){var t=this._fullscreenButton=i.create("button",this._className+"-icon "+this._className+"-fullscreen",this._container);t.setAttribute("aria-label","Toggle fullscreen"),t.type="button",this._fullscreenButton.addEventListener("click",this._onClickFullscreen),o.document.addEventListener(this._fullscreenchange,this._changeIcon)},a.prototype._isFullscreen=function(){return this._fullscreen},a.prototype._changeIcon=function(){(o.document.fullscreenElement||o.document.mozFullScreenElement||o.document.webkitFullscreenElement||o.document.msFullscreenElement)===this._mapContainer!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle(this._className+"-shrink"),this._fullscreenButton.classList.toggle(this._className+"-fullscreen"))},a.prototype._onClickFullscreen=function(){this._isFullscreen()?o.document.exitFullscreen?o.document.exitFullscreen():o.document.mozCancelFullScreen?o.document.mozCancelFullScreen():o.document.msExitFullscreen?o.document.msExitFullscreen():o.document.webkitCancelFullScreen&&o.document.webkitCancelFullScreen():this._mapContainer.requestFullscreen?this._mapContainer.requestFullscreen():this._mapContainer.mozRequestFullScreen?this._mapContainer.mozRequestFullScreen():this._mapContainer.msRequestFullscreen?this._mapContainer.msRequestFullscreen():this._mapContainer.webkitRequestFullscreen&&this._mapContainer.webkitRequestFullscreen()},e.exports=a},{"../../util/dom":259,"../../util/util":275,"../../util/window":254}],234:[function(t,e,n){"use strict";var i,r=t("../../util/evented"),o=t("../../util/dom"),a=t("../../util/window"),s=t("../../util/util"),u=t("../../geo/lng_lat"),l=t("../marker"),c={positionOptions:{enableHighAccuracy:!1,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showUserLocation:!0},p=function(t){function e(e){t.call(this),this.options=s.extend({},c,e),s.bindAll(["_onSuccess","_onError","_finish","_setupUI","_updateCamera","_updateMarker","_onClickGeolocate"],this)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.onAdd=function(t){return this._map=t,this._container=o.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),function(t){void 0!==i?t(i):void 0!==a.navigator.permissions?a.navigator.permissions.query({name:"geolocation"}).then(function(e){t(i="denied"!==e.state)}):t(i=!!a.navigator.geolocation)}(this._setupUI),this._container},e.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(a.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker.remove(),o.remove(this._container),this._map=void 0},e.prototype._onSuccess=function(t){if(this.options.trackUserLocation)switch(this._lastKnownPosition=t,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(t),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(t),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire("geolocate",t),this._finish()},e.prototype._updateCamera=function(t){var e=new u(t.coords.longitude,t.coords.latitude);this._map.fitBounds(e.toBounds(t.coords.accuracy),this.options.fitBoundsOptions,{geolocateSource:!0})},e.prototype._updateMarker=function(t){t?this._userLocationDotMarker.setLngLat([t.coords.longitude,t.coords.latitude]).addTo(this._map):this._userLocationDotMarker.remove()},e.prototype._onError=function(t){if(this.options.trackUserLocation)if(1===t.code)this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),void 0!==this._geolocationWatchID&&this._clearWatch();else switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire("error",t),this._finish()},e.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},e.prototype._setupUI=function(t){var e=this;!1!==t&&(this._container.addEventListener("contextmenu",function(t){return t.preventDefault()}),this._geolocateButton=o.create("button","mapboxgl-ctrl-icon mapboxgl-ctrl-geolocate",this._container),this._geolocateButton.type="button",this._geolocateButton.setAttribute("aria-label","Geolocate"),this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=o.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new l(this._dotElement),this.options.trackUserLocation&&(this._watchState="OFF")),this._geolocateButton.addEventListener("click",this._onClickGeolocate.bind(this)),this.options.trackUserLocation&&this._map.on("movestart",function(t){t.geolocateSource||"ACTIVE_LOCK"!==e._watchState||(e._watchState="BACKGROUND",e._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),e._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),e.fire("trackuserlocationend"))}))},e.prototype._onClickGeolocate=function(){if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire("trackuserlocationstart");break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire("trackuserlocationend");break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire("trackuserlocationstart")}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}"OFF"===this._watchState&&void 0!==this._geolocationWatchID?this._clearWatch():void 0===this._geolocationWatchID&&(this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._geolocationWatchID=a.navigator.geolocation.watchPosition(this._onSuccess,this._onError,this.options.positionOptions))}else a.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4)},e.prototype._clearWatch=function(){a.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},e}(r);e.exports=p},{"../../geo/lng_lat":62,"../../util/dom":259,"../../util/evented":260,"../../util/util":275,"../../util/window":254,"../marker":248}],235:[function(t,e,n){"use strict";var i=t("../../util/dom"),r=t("../../util/util"),o=function(){r.bindAll(["_updateLogo"],this)};o.prototype.onAdd=function(t){this._map=t,this._container=i.create("div","mapboxgl-ctrl");var e=i.create("a","mapboxgl-ctrl-logo");return e.target="_blank",e.href="https://www.mapbox.com/",e.setAttribute("aria-label","Mapbox logo"),this._container.appendChild(e),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._container},o.prototype.onRemove=function(){i.remove(this._container),this._map.off("sourcedata",this._updateLogo)},o.prototype.getDefaultPosition=function(){return"bottom-left"},o.prototype._updateLogo=function(t){t&&"metadata"!==t.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},o.prototype._logoRequired=function(){if(this._map.style){var t=this._map.style.sourceCaches;for(var e in t)if(t[e].getSource().mapbox_logo)return!0;return!1}},e.exports=o},{"../../util/dom":259,"../../util/util":275}],236:[function(t,e,n){"use strict";var i=t("../../util/dom"),r=t("../../util/util"),o=t("../handler/drag_rotate"),a={showCompass:!0,showZoom:!0},s=function(t){var e=this;this.options=r.extend({},a,t),this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(t){return t.preventDefault()}),this.options.showZoom&&(this._zoomInButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-in","Zoom In",function(){return e._map.zoomIn()}),this._zoomOutButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-out","Zoom Out",function(){return e._map.zoomOut()})),this.options.showCompass&&(r.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-compass","Reset North",function(){return e._map.resetNorth()}),this._compassArrow=i.create("span","mapboxgl-ctrl-compass-arrow",this._compass))};s.prototype._rotateCompassArrow=function(){var t="rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassArrow.style.transform=t},s.prototype.onAdd=function(t){return this._map=t,this.options.showCompass&&(this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new o(t,{button:"left",element:this._compass}),this._handler.enable()),this._container},s.prototype.onRemove=function(){i.remove(this._container),this.options.showCompass&&(this._map.off("rotate",this._rotateCompassArrow),this._handler.disable(),delete this._handler),delete this._map},s.prototype._createButton=function(t,e,n){var r=i.create("button",t,this._container);return r.type="button",r.setAttribute("aria-label",e),r.addEventListener("click",n),r},e.exports=s},{"../../util/dom":259,"../../util/util":275,"../handler/drag_rotate":242}],237:[function(t,e,n){"use strict";function i(t,e,n,i){var r=function(t){var e=Math.pow(10,(""+Math.floor(t)).length-1),n=t/e;return e*(n>=10?10:n>=5?5:n>=3?3:n>=2?2:1)}(n),o=r/n;"m"===i&&r>=1e3&&(r/=1e3,i="km"),t.style.width=e*o+"px",t.innerHTML=r+i}var r=t("../../util/dom"),o=t("../../util/util"),a=function(t){this.options=t,o.bindAll(["_onMove"],this)};a.prototype.getDefaultPosition=function(){return"bottom-left"},a.prototype._onMove=function(){!function(t,e,n){var r=n&&n.maxWidth||100,o=t._container.clientHeight/2,a=function(t,e){var n=Math.PI/180,i=t.lat*n,r=e.lat*n,o=Math.sin(i)*Math.sin(r)+Math.cos(i)*Math.cos(r)*Math.cos((e.lng-t.lng)*n);return 6371e3*Math.acos(Math.min(o,1))}(t.unproject([0,o]),t.unproject([r,o]));if(n&&"imperial"===n.unit){var s=3.2808*a;s>5280?i(e,r,s/5280,"mi"):i(e,r,s,"ft")}else n&&"nautical"===n.unit?i(e,r,a/1852,"nm"):i(e,r,a,"m")}(this._map,this._container,this.options)},a.prototype.onAdd=function(t){return this._map=t,this._container=r.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",t.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},a.prototype.onRemove=function(){r.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},e.exports=a},{"../../util/dom":259,"../../util/util":275}],238:[function(t,e,n){"use strict"},{}],239:[function(t,e,n){"use strict";var i=t("../../util/dom"),r=t("../../geo/lng_lat_bounds"),o=t("../../util/util"),a=t("../../util/window"),s=function(t){this._map=t,this._el=t.getCanvasContainer(),this._container=t.getContainer(),o.bindAll(["_onMouseDown","_onMouseMove","_onMouseUp","_onKeyDown"],this)};s.prototype.isEnabled=function(){return!!this._enabled},s.prototype.isActive=function(){return!!this._active},s.prototype.enable=function(){this.isEnabled()||(this._map.dragPan&&this._map.dragPan.disable(),this._el.addEventListener("mousedown",this._onMouseDown,!1),this._map.dragPan&&this._map.dragPan.enable(),this._enabled=!0)},s.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("mousedown",this._onMouseDown),this._enabled=!1)},s.prototype._onMouseDown=function(t){t.shiftKey&&0===t.button&&(a.document.addEventListener("mousemove",this._onMouseMove,!1),a.document.addEventListener("keydown",this._onKeyDown,!1),a.document.addEventListener("mouseup",this._onMouseUp,!1),i.disableDrag(),this._startPos=i.mousePos(this._el,t),this._active=!0)},s.prototype._onMouseMove=function(t){var e=this._startPos,n=i.mousePos(this._el,t);this._box||(this._box=i.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",t));var r=Math.min(e.x,n.x),o=Math.max(e.x,n.x),a=Math.min(e.y,n.y),s=Math.max(e.y,n.y);i.setTransform(this._box,"translate("+r+"px,"+a+"px)"),this._box.style.width=o-r+"px",this._box.style.height=s-a+"px"},s.prototype._onMouseUp=function(t){if(0===t.button){var e=this._startPos,n=i.mousePos(this._el,t),o=(new r).extend(this._map.unproject(e)).extend(this._map.unproject(n));this._finish(),e.x===n.x&&e.y===n.y?this._fireEvent("boxzoomcancel",t):this._map.fitBounds(o,{linear:!0}).fire("boxzoomend",{originalEvent:t,boxZoomBounds:o})}},s.prototype._onKeyDown=function(t){27===t.keyCode&&(this._finish(),this._fireEvent("boxzoomcancel",t))},s.prototype._finish=function(){this._active=!1,a.document.removeEventListener("mousemove",this._onMouseMove,!1),a.document.removeEventListener("keydown",this._onKeyDown,!1),a.document.removeEventListener("mouseup",this._onMouseUp,!1),this._container.classList.remove("mapboxgl-crosshair"),this._box&&(i.remove(this._box),this._box=null),i.enableDrag()},s.prototype._fireEvent=function(t,e){return this._map.fire(t,{originalEvent:e})},e.exports=s},{"../../geo/lng_lat_bounds":63,"../../util/dom":259,"../../util/util":275,"../../util/window":254}],240:[function(t,e,n){"use strict";var i=t("../../util/util"),r=function(t){this._map=t,i.bindAll(["_onDblClick","_onZoomEnd"],this)};r.prototype.isEnabled=function(){return!!this._enabled},r.prototype.isActive=function(){return!!this._active},r.prototype.enable=function(){this.isEnabled()||(this._map.on("dblclick",this._onDblClick),this._enabled=!0)},r.prototype.disable=function(){this.isEnabled()&&(this._map.off("dblclick",this._onDblClick),this._enabled=!1)},r.prototype._onDblClick=function(t){this._active=!0,this._map.on("zoomend",this._onZoomEnd),this._map.zoomTo(this._map.getZoom()+(t.originalEvent.shiftKey?-1:1),{around:t.lngLat},t)},r.prototype._onZoomEnd=function(){this._active=!1,this._map.off("zoomend",this._onZoomEnd)},e.exports=r},{"../../util/util":275}],241:[function(t,e,n){"use strict";var i=t("../../util/dom"),r=t("../../util/util"),o=t("../../util/window"),a=t("../../util/browser"),s=r.bezier(0,0,.3,1),u=function(t){this._map=t,this._el=t.getCanvasContainer(),r.bindAll(["_onDown","_onMove","_onUp","_onTouchEnd","_onMouseUp","_onDragFrame","_onDragFinished"],this)};u.prototype.isEnabled=function(){return!!this._enabled},u.prototype.isActive=function(){return!!this._active},u.prototype.enable=function(){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-drag-pan"),this._el.addEventListener("mousedown",this._onDown),this._el.addEventListener("touchstart",this._onDown),this._enabled=!0)},u.prototype.disable=function(){this.isEnabled()&&(this._el.classList.remove("mapboxgl-touch-drag-pan"),this._el.removeEventListener("mousedown",this._onDown),this._el.removeEventListener("touchstart",this._onDown),this._enabled=!1)},u.prototype._onDown=function(t){this._ignoreEvent(t)||this.isActive()||(t.touches?(o.document.addEventListener("touchmove",this._onMove),o.document.addEventListener("touchend",this._onTouchEnd)):(o.document.addEventListener("mousemove",this._onMove),o.document.addEventListener("mouseup",this._onMouseUp)),o.addEventListener("blur",this._onMouseUp),this._active=!1,this._previousPos=i.mousePos(this._el,t),this._inertia=[[a.now(),this._previousPos]])},u.prototype._onMove=function(t){if(!this._ignoreEvent(t)){this._lastMoveEvent=t,t.preventDefault();var e=i.mousePos(this._el,t);if(this._drainInertiaBuffer(),this._inertia.push([a.now(),e]),!this._previousPos)return void(this._previousPos=e);this._pos=e,this.isActive()||(this._active=!0,this._map.moving=!0,this._fireEvent("dragstart",t),this._fireEvent("movestart",t),this._map._startAnimation(this._onDragFrame,this._onDragFinished)),this._map._update()}},u.prototype._onDragFrame=function(t){var e=this._lastMoveEvent;e&&(t.setLocationAtPoint(t.pointLocation(this._previousPos),this._pos),this._fireEvent("drag",e),this._fireEvent("move",e),this._previousPos=this._pos,delete this._lastMoveEvent)},u.prototype._onDragFinished=function(t){var e=this;if(this.isActive()){this._active=!1,delete this._lastMoveEvent,delete this._previousPos,delete this._pos,this._fireEvent("dragend",t),this._drainInertiaBuffer();var n=function(){e._map.moving=!1,e._fireEvent("moveend",t)},i=this._inertia;if(i.length<2)return void n();var r=i[i.length-1],o=i[0],a=r[1].sub(o[1]),u=(r[0]-o[0])/1e3;if(0===u||r[1].equals(o[1]))return void n();var l=a.mult(.3/u),c=l.mag();c>1400&&(c=1400,l._unit()._mult(c));var p=c/750,h=l.mult(-p/2);this._map.panBy(h,{duration:1e3*p,easing:s,noMoveStart:!0},{originalEvent:t})}},u.prototype._onUp=function(t){this._onDragFinished(t)},u.prototype._onMouseUp=function(t){this._ignoreEvent(t)||(this._onUp(t),o.document.removeEventListener("mousemove",this._onMove),o.document.removeEventListener("mouseup",this._onMouseUp),o.removeEventListener("blur",this._onMouseUp))},u.prototype._onTouchEnd=function(t){this._ignoreEvent(t)||(this._onUp(t),o.document.removeEventListener("touchmove",this._onMove),o.document.removeEventListener("touchend",this._onTouchEnd))},u.prototype._fireEvent=function(t,e){return this._map.fire(t,e?{originalEvent:e}:{})},u.prototype._ignoreEvent=function(t){var e=this._map;return!(!e.boxZoom||!e.boxZoom.isActive())||!(!e.dragRotate||!e.dragRotate.isActive())||(t.touches?t.touches.length>1:!!t.ctrlKey||"mousemove"!==t.type&&t.button&&0!==t.button)},u.prototype._drainInertiaBuffer=function(){for(var t=this._inertia,e=a.now();t.length>0&&e-t[0][0]>160;)t.shift()},e.exports=u},{"../../util/browser":252,"../../util/dom":259,"../../util/util":275,"../../util/window":254}],242:[function(t,e,n){"use strict";var i=t("../../util/dom"),r=t("../../util/util"),o=t("../../util/window"),a=t("../../util/browser"),s=r.bezier(0,0,.25,1),u=function(t,e){this._map=t,this._el=e.element||t.getCanvasContainer(),this._button=e.button||"right",this._bearingSnap=e.bearingSnap||0,this._pitchWithRotate=!1!==e.pitchWithRotate,r.bindAll(["_onDown","_onMove","_onUp","_onDragFrame","_onDragFinished"],this)};u.prototype.isEnabled=function(){return!!this._enabled},u.prototype.isActive=function(){return!!this._active},u.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener("mousedown",this._onDown),this._enabled=!0)},u.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("mousedown",this._onDown),this._enabled=!1)},u.prototype._onDown=function(t){if(!(this._map.boxZoom&&this._map.boxZoom.isActive()||this._map.dragPan&&this._map.dragPan.isActive()||this.isActive())){if("right"===this._button){var e=t.ctrlKey?0:2,n=t.button;if(void 0!==o.InstallTrigger&&2===t.button&&t.ctrlKey&&o.navigator.platform.toUpperCase().indexOf("MAC")>=0&&(n=0),n!==e)return}else if(t.ctrlKey||0!==t.button)return;i.disableDrag(),o.document.addEventListener("mousemove",this._onMove,{capture:!0}),o.document.addEventListener("mouseup",this._onUp),o.addEventListener("blur",this._onUp),this._active=!1,this._inertia=[[a.now(),this._map.getBearing()]],this._previousPos=i.mousePos(this._el,t),this._center=this._map.transform.centerPoint,t.preventDefault()}},u.prototype._onMove=function(t){this._lastMoveEvent=t;var e=i.mousePos(this._el,t);this._previousPos?(this._pos=e,this.isActive()||(this._active=!0,this._map.moving=!0,this._fireEvent("rotatestart",t),this._fireEvent("movestart",t),this._pitchWithRotate&&this._fireEvent("pitchstart",t),this._map._startAnimation(this._onDragFrame,this._onDragFinished)),this._map._update()):this._previousPos=e},u.prototype._onUp=function(t){o.document.removeEventListener("mousemove",this._onMove,{capture:!0}),o.document.removeEventListener("mouseup",this._onUp),o.removeEventListener("blur",this._onUp),i.enableDrag(),this._onDragFinished(t)},u.prototype._onDragFrame=function(t){var e=this._lastMoveEvent;if(e){var n=this._previousPos,i=this._pos,r=t.bearing-.8*(n.x-i.x),o=t.pitch- -.5*(n.y-i.y),s=this._inertia,u=s[s.length-1];this._drainInertiaBuffer(),s.push([a.now(),this._map._normalizeBearing(r,u[1])]),t.bearing=r,this._pitchWithRotate&&(this._fireEvent("pitch",e),t.pitch=o),this._fireEvent("rotate",e),this._fireEvent("move",e),delete this._lastMoveEvent,this._previousPos=this._pos}},u.prototype._onDragFinished=function(t){var e=this;if(this.isActive()){this._active=!1,delete this._lastMoveEvent,delete this._previousPos,this._fireEvent("rotateend",t),this._drainInertiaBuffer();var n=this._map,i=n.getBearing(),r=this._inertia,o=function(){Math.abs(i)<e._bearingSnap?n.resetNorth({noMoveStart:!0},{originalEvent:t}):(e._map.moving=!1,e._fireEvent("moveend",t)),e._pitchWithRotate&&e._fireEvent("pitchend",t)};if(r.length<2)return void o();var a=r[0],u=r[r.length-1],l=n._normalizeBearing(i,r[r.length-2][1]),c=u[1]-a[1],p=c<0?-1:1,h=(u[0]-a[0])/1e3;if(0===c||0===h)return void o();var f=Math.abs(c*(.25/h));f>180&&(f=180);var d=f/180;l+=p*f*(d/2),Math.abs(n._normalizeBearing(l,0))<this._bearingSnap&&(l=n._normalizeBearing(0,l)),n.rotateTo(l,{duration:1e3*d,easing:s,noMoveStart:!0},{originalEvent:t})}},u.prototype._fireEvent=function(t,e){return this._map.fire(t,e?{originalEvent:e}:{})},u.prototype._drainInertiaBuffer=function(){for(var t=this._inertia,e=a.now();t.length>0&&e-t[0][0]>160;)t.shift()},e.exports=u},{"../../util/browser":252,"../../util/dom":259,"../../util/util":275,"../../util/window":254}],243:[function(t,e,n){"use strict";function i(t){return t*(2-t)}var r=t("../../util/util"),o=function(t){this._map=t,this._el=t.getCanvasContainer(),r.bindAll(["_onKeyDown"],this)};o.prototype.isEnabled=function(){return!!this._enabled},o.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener("keydown",this._onKeyDown,!1),this._enabled=!0)},o.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("keydown",this._onKeyDown),this._enabled=!1)},o.prototype._onKeyDown=function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e=0,n=0,r=0,o=0,a=0;switch(t.keyCode){case 61:case 107:case 171:case 187:e=1;break;case 189:case 109:case 173:e=-1;break;case 37:t.shiftKey?n=-1:(t.preventDefault(),o=-1);break;case 39:t.shiftKey?n=1:(t.preventDefault(),o=1);break;case 38:t.shiftKey?r=1:(t.preventDefault(),a=-1);break;case 40:t.shiftKey?r=-1:(a=1,t.preventDefault());break;default:return}var s=this._map,u=s.getZoom(),l={duration:300,delayEndEvents:500,easing:i,zoom:e?Math.round(u)+e*(t.shiftKey?2:1):u,bearing:s.getBearing()+15*n,pitch:s.getPitch()+10*r,offset:[100*-o,100*-a],center:s.getCenter()};s.easeTo(l,{originalEvent:t})}},e.exports=o},{"../../util/util":275}],244:[function(t,e,n){"use strict";var i=t("../../util/dom"),r=t("../../util/util"),o=t("../../util/browser"),a=t("../../util/window"),s=t("../../style-spec/util/interpolate").number,u=t("../../geo/lng_lat"),l=a.navigator.userAgent.toLowerCase(),c=-1!==l.indexOf("firefox"),p=-1!==l.indexOf("safari")&&-1===l.indexOf("chrom"),h=function(t){this._map=t,this._el=t.getCanvasContainer(),this._delta=0,r.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};h.prototype.isEnabled=function(){return!!this._enabled},h.prototype.isActive=function(){return!!this._active},h.prototype.enable=function(t){this.isEnabled()||(this._el.addEventListener("wheel",this._onWheel,!1),this._el.addEventListener("mousewheel",this._onWheel,!1),this._enabled=!0,this._aroundCenter=t&&"center"===t.around)},h.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("wheel",this._onWheel),this._el.removeEventListener("mousewheel",this._onWheel),this._enabled=!1)},h.prototype._onWheel=function(t){var e=0;"wheel"===t.type?(e=t.deltaY,c&&t.deltaMode===a.WheelEvent.DOM_DELTA_PIXEL&&(e/=o.devicePixelRatio),t.deltaMode===a.WheelEvent.DOM_DELTA_LINE&&(e*=40)):"mousewheel"===t.type&&(e=-t.wheelDeltaY,p&&(e/=3));var n=o.now(),i=n-(this._lastWheelEventTime||0);this._lastWheelEventTime=n,0!==e&&e%4.000244140625==0?this._type="wheel":0!==e&&Math.abs(e)<4?this._type="trackpad":i>400?(this._type=null,this._lastValue=e,this._timeout=setTimeout(this._onTimeout,40,t)):this._type||(this._type=Math.abs(i*e)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,e+=this._lastValue)),t.shiftKey&&e&&(e/=4),this._type&&(this._lastWheelEvent=t,this._delta-=e,this.isActive()||this._start(t)),t.preventDefault()},h.prototype._onTimeout=function(t){this._type="wheel",this._delta-=this._lastValue,this.isActive()||this._start(t)},h.prototype._start=function(t){if(this._delta){this._active=!0,this._map.moving=!0,this._map.zooming=!0,this._map.fire("movestart",{originalEvent:t}),this._map.fire("zoomstart",{originalEvent:t}),clearTimeout(this._finishTimeout);var e=i.mousePos(this._el,t);this._around=u.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(e)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._map._startAnimation(this._onScrollFrame,this._onScrollFinished)}},h.prototype._onScrollFrame=function(t){if(this.isActive()){if(0!==this._delta){var e="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?1/450:.01,n=2/(1+Math.exp(-Math.abs(this._delta*e)));this._delta<0&&0!==n&&(n=1/n);var i="number"==typeof this._targetZoom?t.zoomScale(this._targetZoom):t.scale;this._targetZoom=Math.min(t.maxZoom,Math.max(t.minZoom,t.scaleZoom(i*n))),"wheel"===this._type&&(this._startZoom=t.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}if("wheel"===this._type){var r=Math.min((o.now()-this._lastWheelEventTime)/200,1),a=this._easing(r);t.zoom=s(this._startZoom,this._targetZoom,a),1===r&&this._map.stop()}else t.zoom=this._targetZoom,this._map.stop();t.setLocationAtPoint(this._around,this._aroundPoint),this._map.fire("move",{originalEvent:this._lastWheelEvent}),this._map.fire("zoom",{originalEvent:this._lastWheelEvent})}},h.prototype._onScrollFinished=function(){var t=this;this.isActive()&&(this._active=!1,this._finishTimeout=setTimeout(function(){t._map.moving=!1,t._map.zooming=!1,t._map.fire("zoomend"),t._map.fire("moveend"),delete t._targetZoom},200))},h.prototype._smoothOutEasing=function(t){var e=r.ease;if(this._prevEase){var n=this._prevEase,i=(o.now()-n.start)/n.duration,a=n.easing(i+.01)-n.easing(i),s=.27/Math.sqrt(a*a+1e-4)*.01,u=Math.sqrt(.0729-s*s);e=r.bezier(s,u,.25,1)}return this._prevEase={start:o.now(),duration:t,easing:e},e},e.exports=h},{"../../geo/lng_lat":62,"../../style-spec/util/interpolate":158,"../../util/browser":252,"../../util/dom":259,"../../util/util":275,"../../util/window":254}],245:[function(t,e,n){"use strict";var i=t("../../util/dom"),r=t("../../util/util"),o=t("../../util/window"),a=t("../../util/browser"),s=r.bezier(0,0,.15,1),u=function(t){this._map=t,this._el=t.getCanvasContainer(),r.bindAll(["_onStart","_onMove","_onEnd"],this)};u.prototype.isEnabled=function(){return!!this._enabled},u.prototype.enable=function(t){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-zoom-rotate"),this._el.addEventListener("touchstart",this._onStart,!1),this._enabled=!0,this._aroundCenter=t&&"center"===t.around)},u.prototype.disable=function(){this.isEnabled()&&(this._el.classList.remove("mapboxgl-touch-zoom-rotate"),this._el.removeEventListener("touchstart",this._onStart),this._enabled=!1)},u.prototype.disableRotation=function(){this._rotationDisabled=!0},u.prototype.enableRotation=function(){this._rotationDisabled=!1},u.prototype._onStart=function(t){if(2===t.touches.length){var e=i.mousePos(this._el,t.touches[0]),n=i.mousePos(this._el,t.touches[1]);this._startVec=e.sub(n),this._startScale=this._map.transform.scale,this._startBearing=this._map.transform.bearing,this._gestureIntent=void 0,this._inertia=[],o.document.addEventListener("touchmove",this._onMove,!1),o.document.addEventListener("touchend",this._onEnd,!1)}},u.prototype._onMove=function(t){if(2===t.touches.length){var e=i.mousePos(this._el,t.touches[0]),n=i.mousePos(this._el,t.touches[1]),r=e.add(n).div(2),o=e.sub(n),s=o.mag()/this._startVec.mag(),u=this._rotationDisabled?0:180*o.angleWith(this._startVec)/Math.PI,l=this._map;if(this._gestureIntent){var c={duration:0,around:l.unproject(r)};"rotate"===this._gestureIntent&&(c.bearing=this._startBearing+u),"zoom"!==this._gestureIntent&&"rotate"!==this._gestureIntent||(c.zoom=l.transform.scaleZoom(this._startScale*s)),l.stop(),this._drainInertiaBuffer(),this._inertia.push([a.now(),s,r]),l.easeTo(c,{originalEvent:t})}else{var p=Math.abs(1-s)>.15;Math.abs(u)>10?this._gestureIntent="rotate":p&&(this._gestureIntent="zoom"),this._gestureIntent&&(this._startVec=o,this._startScale=l.transform.scale,this._startBearing=l.transform.bearing)}t.preventDefault()}},u.prototype._onEnd=function(t){o.document.removeEventListener("touchmove",this._onMove),o.document.removeEventListener("touchend",this._onEnd),this._drainInertiaBuffer();var e=this._inertia,n=this._map;if(e.length<2)n.snapToNorth({},{originalEvent:t});else{var i=e[e.length-1],r=e[0],a=n.transform.scaleZoom(this._startScale*i[1]),u=n.transform.scaleZoom(this._startScale*r[1]),l=(i[0]-r[0])/1e3,c=i[2];if(0!==l&&a!==u){var p=.15*(a-u)/l;Math.abs(p)>2.5&&(p=p>0?2.5:-2.5);var h=1e3*Math.abs(p/(12*.15)),f=a+p*h/2e3;f<0&&(f=0),n.easeTo({zoom:f,duration:h,easing:s,around:this._aroundCenter?n.getCenter():n.unproject(c)},{originalEvent:t})}else n.snapToNorth({},{originalEvent:t})}},u.prototype._drainInertiaBuffer=function(){for(var t=this._inertia,e=a.now();t.length>2&&e-t[0][0]>160;)t.shift()},e.exports=u},{"../../util/browser":252,"../../util/dom":259,"../../util/util":275,"../../util/window":254}],246:[function(t,e,n){"use strict";var i=t("../util/util"),r=t("../util/window"),o=t("../util/throttle"),a=function(){i.bindAll(["_onHashChange","_updateHash"],this),this._updateHash=o(this._updateHashUnthrottled.bind(this),300)};a.prototype.addTo=function(t){return this._map=t,r.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},a.prototype.remove=function(){return r.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),delete this._map,this},a.prototype.getHashString=function(t){var e=this._map.getCenter(),n=Math.round(100*this._map.getZoom())/100,i=Math.ceil((n*Math.LN2+Math.log(512/360/.5))/Math.LN10),r=Math.pow(10,i),o=Math.round(e.lng*r)/r,a=Math.round(e.lat*r)/r,s=this._map.getBearing(),u=this._map.getPitch(),l="";return l+=t?"#/"+o+"/"+a+"/"+n:"#"+n+"/"+a+"/"+o,(s||u)&&(l+="/"+Math.round(10*s)/10),u&&(l+="/"+Math.round(u)),l},a.prototype._onHashChange=function(){var t=r.location.hash.replace("#","").split("/");return t.length>=3&&(this._map.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:+(t[3]||0),pitch:+(t[4]||0)}),!0)},a.prototype._updateHashUnthrottled=function(){var t=this.getHashString();r.history.replaceState("","",t)},e.exports=a},{"../util/throttle":272,"../util/util":275,"../util/window":254}],247:[function(t,e,n){"use strict";function i(t){t.parentNode&&t.parentNode.removeChild(t)}var r=t("../util/util"),o=t("../util/browser"),a=t("../util/window"),s=t("../util/window"),u=s.HTMLImageElement,l=s.HTMLElement,c=t("../util/dom"),p=t("../util/ajax"),h=t("../style/style"),f=t("../style/evaluation_parameters"),d=t("../render/painter"),m=t("../geo/transform"),y=t("./hash"),g=t("./bind_handlers"),v=t("./camera"),_=t("../geo/lng_lat"),b=t("../geo/lng_lat_bounds"),x=t("@mapbox/point-geometry"),w=t("./control/attribution_control"),E=t("./control/logo_control"),C=t("@mapbox/mapbox-gl-supported"),O=t("../util/image").RGBAImage;t("./events");var P={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:0,maxZoom:22,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,bearingSnap:7,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,transformRequest:null,fadeDuration:300},S=function(t){function e(e){if(null!=(e=r.extend({},P,e)).minZoom&&null!=e.maxZoom&&e.minZoom>e.maxZoom)throw new Error("maxZoom must be greater than minZoom");var n=new m(e.minZoom,e.maxZoom,e.renderWorldCopies);t.call(this,n,e),this._interactive=e.interactive,this._maxTileCacheSize=e.maxTileCacheSize,this._failIfMajorPerformanceCaveat=e.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=e.preserveDrawingBuffer,this._trackResize=e.trackResize,this._bearingSnap=e.bearingSnap,this._refreshExpiredTiles=e.refreshExpiredTiles,this._fadeDuration=e.fadeDuration,this._crossFadingFactor=1,this._collectResourceTiming=e.collectResourceTiming;var i=e.transformRequest;if(this._transformRequest=i?function(t,e){return i(t,e)||{url:t}}:function(t){return{url:t}},"string"==typeof e.container){var o=a.document.getElementById(e.container);if(!o)throw new Error("Container '"+e.container+"' not found.");this._container=o}else{if(!(e.container instanceof l))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=e.container}e.maxBounds&&this.setMaxBounds(e.maxBounds),r.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored","_update","_render","_onData","_onDataLoading"],this),this._setupContainer(),this._setupPainter(),this.on("move",this._update.bind(this,!1)),this.on("zoom",this._update.bind(this,!0)),void 0!==a&&(a.addEventListener("online",this._onWindowOnline,!1),a.addEventListener("resize",this._onWindowResize,!1)),g(this,e),this._hash=e.hash&&(new y).addTo(this),this._hash&&this._hash._onHashChange()||this.jumpTo({center:e.center,zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}),this.resize(),e.style&&this.setStyle(e.style,{localIdeographFontFamily:e.localIdeographFontFamily}),e.attributionControl&&this.addControl(new w),this.addControl(new E,e.logoPosition),this.on("style.load",function(){this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",this._onData),this.on("dataloading",this._onDataLoading)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={showTileBoundaries:{},showCollisionBoxes:{},showOverdrawInspector:{},repaint:{},vertices:{}};return e.prototype.addControl=function(t,e){void 0===e&&t.getDefaultPosition&&(e=t.getDefaultPosition()),void 0===e&&(e="top-right");var n=t.onAdd(this),i=this._controlPositions[e];return-1!==e.indexOf("bottom")?i.insertBefore(n,i.firstChild):i.appendChild(n),this},e.prototype.removeControl=function(t){return t.onRemove(this),this},e.prototype.resize=function(){var t=this._containerDimensions(),e=t[0],n=t[1];return this._resizeCanvas(e,n),this.transform.resize(e,n),this.painter.resize(e,n),this.fire("movestart").fire("move").fire("resize").fire("moveend")},e.prototype.getBounds=function(){var t=new b(this.transform.pointLocation(new x(0,this.transform.height)),this.transform.pointLocation(new x(this.transform.width,0)));return(this.transform.angle||this.transform.pitch)&&(t.extend(this.transform.pointLocation(new x(this.transform.size.x,0))),t.extend(this.transform.pointLocation(new x(0,this.transform.size.y)))),t},e.prototype.getMaxBounds=function(){return this.transform.latRange&&2===this.transform.latRange.length&&this.transform.lngRange&&2===this.transform.lngRange.length?new b([this.transform.lngRange[0],this.transform.latRange[0]],[this.transform.lngRange[1],this.transform.latRange[1]]):null},e.prototype.setMaxBounds=function(t){if(t){var e=b.convert(t);this.transform.lngRange=[e.getWest(),e.getEast()],this.transform.latRange=[e.getSouth(),e.getNorth()],this.transform._constrain(),this._update()}else null!==t&&void 0!==t||(this.transform.lngRange=null,this.transform.latRange=null,this._update());return this},e.prototype.setMinZoom=function(t){if((t=null===t||void 0===t?0:t)>=0&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t&&this.setZoom(t),this;throw new Error("minZoom must be between 0 and the current maxZoom, inclusive")},e.prototype.getMinZoom=function(){return this.transform.minZoom},e.prototype.setMaxZoom=function(t){if((t=null===t||void 0===t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t&&this.setZoom(t),this;throw new Error("maxZoom must be greater than the current minZoom")},e.prototype.getMaxZoom=function(){return this.transform.maxZoom},e.prototype.project=function(t){return this.transform.locationPoint(_.convert(t))},e.prototype.unproject=function(t){return this.transform.pointLocation(x.convert(t))},e.prototype.on=function(e,n,i){var o=this;if(void 0===i)return t.prototype.on.call(this,e,n);var a=function(){if("mouseenter"===e||"mouseover"===e){var t=!1;return{layer:n,listener:i,delegates:{mousemove:function(a){var s=o.getLayer(n)?o.queryRenderedFeatures(a.point,{layers:[n]}):[];s.length?t||(t=!0,i.call(o,r.extend({features:s},a,{type:e}))):t=!1},mouseout:function(){t=!1}}}}if("mouseleave"===e||"mouseout"===e){var a=!1;return{layer:n,listener:i,delegates:{mousemove:function(t){(o.getLayer(n)?o.queryRenderedFeatures(t.point,{layers:[n]}):[]).length?a=!0:a&&(a=!1,i.call(o,r.extend({},t,{type:e})))},mouseout:function(t){a&&(a=!1,i.call(o,r.extend({},t,{type:e})))}}}}var s;return{layer:n,listener:i,delegates:(s={},s[e]=function(t){var e=o.getLayer(n)?o.queryRenderedFeatures(t.point,{layers:[n]}):[];e.length&&i.call(o,r.extend({features:e},t))},s)}}();for(var s in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[e]=this._delegatedListeners[e]||[],this._delegatedListeners[e].push(a),a.delegates)o.on(s,a.delegates[s]);return this},e.prototype.off=function(e,n,i){if(void 0===i)return t.prototype.off.call(this,e,n);if(this._delegatedListeners&&this._delegatedListeners[e])for(var r=this._delegatedListeners[e],o=0;o<r.length;o++){var a=r[o];if(a.layer===n&&a.listener===i){for(var s in a.delegates)this.off(s,a.delegates[s]);return r.splice(o,1),this}}return this},e.prototype.queryRenderedFeatures=function(t,e){return 2===arguments.length?(t=arguments[0],e=arguments[1]):1===arguments.length&&function(t){return t instanceof x||Array.isArray(t)}(arguments[0])?(t=arguments[0],e={}):1===arguments.length?(t=void 0,e=arguments[0]):(t=void 0,e={}),this.style?this.style.queryRenderedFeatures(this._makeQueryGeometry(t),e,this.transform.zoom,this.transform.angle):[]},e.prototype._makeQueryGeometry=function(t){var e,n=this;if(void 0===t&&(t=[x.convert([0,0]),x.convert([this.transform.width,this.transform.height])]),t instanceof x||"number"==typeof t[0])e=[x.convert(t)];else{var i=[x.convert(t[0]),x.convert(t[1])];e=[i[0],new x(i[1].x,i[0].y),i[1],new x(i[0].x,i[1].y),i[0]]}return e.map(function(t){return n.transform.pointCoordinate(t)})},e.prototype.querySourceFeatures=function(t,e){return this.style.querySourceFeatures(t,e)},e.prototype.setStyle=function(t,e){if((!e||!1!==e.diff&&!e.localIdeographFontFamily)&&this.style&&t&&"object"==typeof t)try{return this.style.setState(t)&&this._update(!0),this}catch(t){r.warnOnce("Unable to perform style diff: "+(t.message||t.error||t)+".  Rebuilding the style from scratch.")}return this.style&&(this.style.setEventedParent(null),this.style._remove()),t?(this.style=new h(this,e||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof t?this.style.loadURL(t):this.style.loadJSON(t),this):(delete this.style,this)},e.prototype.getStyle=function(){if(this.style)return this.style.serialize()},e.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():r.warnOnce("There is no style added to the map.")},e.prototype.addSource=function(t,e){return this.style.addSource(t,e),this._update(!0),this},e.prototype.isSourceLoaded=function(t){var e=this.style&&this.style.sourceCaches[t];return void 0===e?void this.fire("error",{error:new Error("There is no source with ID '"+t+"'")}):e.loaded()},e.prototype.areTilesLoaded=function(){var t=this.style&&this.style.sourceCaches;for(var e in t){var n=t[e]._tiles;for(var i in n){var r=n[i];if("loaded"!==r.state&&"errored"!==r.state)return!1}}return!0},e.prototype.addSourceType=function(t,e,n){return this.style.addSourceType(t,e,n)},e.prototype.removeSource=function(t){return this.style.removeSource(t),this._update(!0),this},e.prototype.getSource=function(t){return this.style.getSource(t)},e.prototype.addImage=function(t,e,n){void 0===n&&(n={});var i=n.pixelRatio;void 0===i&&(i=1);var r=n.sdf;if(void 0===r&&(r=!1),e instanceof u){var a=o.getImageData(e);this.style.addImage(t,{data:new O({width:a.width,height:a.height},a.data),pixelRatio:i,sdf:r})}else{if(void 0===e.width||void 0===e.height)return this.fire("error",{error:new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")});this.style.addImage(t,{data:new O({width:e.width,height:e.height},e.data.slice(0)),pixelRatio:i,sdf:r})}},e.prototype.hasImage=function(t){return t?!!this.style.getImage(t):(this.fire("error",{error:new Error("Missing required image id")}),!1)},e.prototype.removeImage=function(t){this.style.removeImage(t)},e.prototype.loadImage=function(t,e){p.getImage(this._transformRequest(t,p.ResourceType.Image),e)},e.prototype.addLayer=function(t,e){return this.style.addLayer(t,e),this._update(!0),this},e.prototype.moveLayer=function(t,e){return this.style.moveLayer(t,e),this._update(!0),this},e.prototype.removeLayer=function(t){return this.style.removeLayer(t),this._update(!0),this},e.prototype.getLayer=function(t){return this.style.getLayer(t)},e.prototype.setFilter=function(t,e){return this.style.setFilter(t,e),this._update(!0),this},e.prototype.setLayerZoomRange=function(t,e,n){return this.style.setLayerZoomRange(t,e,n),this._update(!0),this},e.prototype.getFilter=function(t){return this.style.getFilter(t)},e.prototype.setPaintProperty=function(t,e,n){return this.style.setPaintProperty(t,e,n),this._update(!0),this},e.prototype.getPaintProperty=function(t,e){return this.style.getPaintProperty(t,e)},e.prototype.setLayoutProperty=function(t,e,n){return this.style.setLayoutProperty(t,e,n),this._update(!0),this},e.prototype.getLayoutProperty=function(t,e){return this.style.getLayoutProperty(t,e)},e.prototype.setLight=function(t){return this.style.setLight(t),this._update(!0),this},e.prototype.getLight=function(){return this.style.getLight()},e.prototype.getContainer=function(){return this._container},e.prototype.getCanvasContainer=function(){return this._canvasContainer},e.prototype.getCanvas=function(){return this._canvas},e.prototype._containerDimensions=function(){var t=0,e=0;return this._container&&(t=this._container.offsetWidth||400,e=this._container.offsetHeight||300),[t,e]},e.prototype._setupContainer=function(){var t=this._container;t.classList.add("mapboxgl-map"),(this._missingCSSContainer=c.create("div","mapboxgl-missing-css",t)).innerHTML="Missing Mapbox GL JS CSS";var e=this._canvasContainer=c.create("div","mapboxgl-canvas-container",t);this._interactive&&e.classList.add("mapboxgl-interactive"),this._canvas=c.create("canvas","mapboxgl-canvas",e),this._canvas.style.position="absolute",this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var n=this._containerDimensions();this._resizeCanvas(n[0],n[1]);var i=this._controlContainer=c.create("div","mapboxgl-control-container",t),r=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(t){r[t]=c.create("div","mapboxgl-ctrl-"+t,i)})},e.prototype._resizeCanvas=function(t,e){var n=a.devicePixelRatio||1;this._canvas.width=n*t,this._canvas.height=n*e,this._canvas.style.width=t+"px",this._canvas.style.height=e+"px"},e.prototype._setupPainter=function(){var t=r.extend({failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer},C.webGLContextAttributes),e=this._canvas.getContext("webgl",t)||this._canvas.getContext("experimental-webgl",t);e?this.painter=new d(e,this.transform):this.fire("error",{error:new Error("Failed to initialize WebGL")})},e.prototype._contextLost=function(t){t.preventDefault(),this._frameId&&(o.cancelFrame(this._frameId),this._frameId=null),this.fire("webglcontextlost",{originalEvent:t})},e.prototype._contextRestored=function(t){this._setupPainter(),this.resize(),this._update(),this.fire("webglcontextrestored",{originalEvent:t})},e.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!(!this.style||!this.style.loaded())},e.prototype._update=function(t){this.style&&(this._styleDirty=this._styleDirty||t,this._sourcesDirty=!0,this._rerender())},e.prototype._render=function(){this._updateCamera();var t=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var e=this.transform.zoom,n=o.now();this.style.zoomHistory.update(e,n);var i=new f(e,{now:n,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),r=i.crossFadingFactor();1===r&&r===this._crossFadingFactor||(t=!0,this._crossFadingFactor=r),this.style.update(i)}return this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.rotating,zooming:this.zooming,fadeDuration:this._fadeDuration}),this.fire("render"),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire("load")),this.style&&(this.style.hasTransitions()||t)&&(this._styleDirty=!0),(this._sourcesDirty||this._repaint||this._styleDirty||this._placementDirty)&&this._rerender(),this},e.prototype.remove=function(){this._hash&&this._hash.remove(),o.cancelFrame(this._frameId),this._frameId=null,this.setStyle(null),void 0!==a&&(a.removeEventListener("resize",this._onWindowResize,!1),a.removeEventListener("online",this._onWindowOnline,!1));var t=this.painter.context.gl.getExtension("WEBGL_lose_context");t&&t.loseContext(),i(this._canvasContainer),i(this._controlContainer),i(this._missingCSSContainer),this._container.classList.remove("mapboxgl-map"),this.fire("remove")},e.prototype._rerender=function(){var t=this;this.style&&!this._frameId&&(this._frameId=o.frame(function(){t._frameId=null,t._render()}))},e.prototype._onWindowOnline=function(){this._update()},e.prototype._onWindowResize=function(){this._trackResize&&this.stop().resize()._update()},n.showTileBoundaries.get=function(){return!!this._showTileBoundaries},n.showTileBoundaries.set=function(t){this._showTileBoundaries!==t&&(this._showTileBoundaries=t,this._update())},n.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},n.showCollisionBoxes.set=function(t){this._showCollisionBoxes!==t&&(this._showCollisionBoxes=t,t?this.style._generateCollisionBoxes():this._update())},n.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},n.showOverdrawInspector.set=function(t){this._showOverdrawInspector!==t&&(this._showOverdrawInspector=t,this._update())},n.repaint.get=function(){return!!this._repaint},n.repaint.set=function(t){this._repaint=t,this._update()},n.vertices.get=function(){return!!this._vertices},n.vertices.set=function(t){this._vertices=t,this._update()},e.prototype._onData=function(t){this._update("style"===t.dataType),this.fire(t.dataType+"data",t)},e.prototype._onDataLoading=function(t){this.fire(t.dataType+"dataloading",t)},Object.defineProperties(e.prototype,n),e}(v);e.exports=S},{"../geo/lng_lat":62,"../geo/lng_lat_bounds":63,"../geo/transform":64,"../render/painter":90,"../style/evaluation_parameters":182,"../style/style":190,"../util/ajax":251,"../util/browser":252,"../util/dom":259,"../util/image":263,"../util/util":275,"../util/window":254,"./bind_handlers":230,"./camera":231,"./control/attribution_control":232,"./control/logo_control":235,"./events":238,"./hash":246,"@mapbox/mapbox-gl-supported":3,"@mapbox/point-geometry":4}],248:[function(t,e,n){"use strict";var i=t("../util/dom"),r=t("../geo/lng_lat"),o=t("@mapbox/point-geometry"),a=t("../util/smart_wrap"),s=t("../util/util").bindAll,u=function(t,e){if(s(["_update","_onMapClick"],this),!t){t=i.create("div");var n=i.createNS("http://www.w3.org/2000/svg","svg");n.setAttributeNS(null,"height","41px"),n.setAttributeNS(null,"width","27px"),n.setAttributeNS(null,"viewBox","0 0 27 41");var r=i.createNS("http://www.w3.org/2000/svg","g");r.setAttributeNS(null,"stroke","none"),r.setAttributeNS(null,"stroke-width","1"),r.setAttributeNS(null,"fill","none"),r.setAttributeNS(null,"fill-rule","evenodd");var a=i.createNS("http://www.w3.org/2000/svg","g");a.setAttributeNS(null,"fill-rule","nonzero");var u=i.createNS("http://www.w3.org/2000/svg","g");u.setAttributeNS(null,"transform","translate(3.0, 29.0)"),u.setAttributeNS(null,"fill","#000000");for(var l=0,c=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];l<c.length;l+=1){var p=c[l],h=i.createNS("http://www.w3.org/2000/svg","ellipse");h.setAttributeNS(null,"opacity","0.04"),h.setAttributeNS(null,"cx","10.5"),h.setAttributeNS(null,"cy","5.80029008"),h.setAttributeNS(null,"rx",p.rx),h.setAttributeNS(null,"ry",p.ry),u.appendChild(h)}var f=i.createNS("http://www.w3.org/2000/svg","g");f.setAttributeNS(null,"fill","#3FB1CE");var d=i.createNS("http://www.w3.org/2000/svg","path");d.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),f.appendChild(d);var m=i.createNS("http://www.w3.org/2000/svg","g");m.setAttributeNS(null,"opacity","0.25"),m.setAttributeNS(null,"fill","#000000");var y=i.createNS("http://www.w3.org/2000/svg","path");y.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),m.appendChild(y);var g=i.createNS("http://www.w3.org/2000/svg","g");g.setAttributeNS(null,"transform","translate(6.0, 7.0)"),g.setAttributeNS(null,"fill","#FFFFFF");var v=i.createNS("http://www.w3.org/2000/svg","g");v.setAttributeNS(null,"transform","translate(8.0, 8.0)");var _=i.createNS("http://www.w3.org/2000/svg","circle");_.setAttributeNS(null,"fill","#000000"),_.setAttributeNS(null,"opacity","0.25"),_.setAttributeNS(null,"cx","5.5"),_.setAttributeNS(null,"cy","5.5"),_.setAttributeNS(null,"r","5.4999962");var b=i.createNS("http://www.w3.org/2000/svg","circle");b.setAttributeNS(null,"fill","#FFFFFF"),b.setAttributeNS(null,"cx","5.5"),b.setAttributeNS(null,"cy","5.5"),b.setAttributeNS(null,"r","5.4999962"),v.appendChild(_),v.appendChild(b),a.appendChild(u),a.appendChild(f),a.appendChild(m),a.appendChild(g),a.appendChild(v),n.appendChild(a),t.appendChild(n);var x=[0,-14];e&&e.offset||(e?e.offset=x:e={offset:x})}this._offset=o.convert(e&&e.offset||[0,0]),t.classList.add("mapboxgl-marker"),this._element=t,this._popup=null};u.prototype.addTo=function(t){return this.remove(),this._map=t,t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),this._update(),this._map.on("click",this._onMapClick),this},u.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),delete this._map),i.remove(this._element),this._popup&&this._popup.remove(),this},u.prototype.getLngLat=function(){return this._lngLat},u.prototype.setLngLat=function(t){return this._lngLat=r.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},u.prototype.getElement=function(){return this._element},u.prototype.setPopup=function(t){return this._popup&&(this._popup.remove(),this._popup=null),t&&("offset"in t.options||(t.options.offset=this._offset),this._popup=t,this._lngLat&&this._popup.setLngLat(this._lngLat)),this},u.prototype._onMapClick=function(t){var e=t.originalEvent.target,n=this._element;this._popup&&(e===n||n.contains(e))&&this.togglePopup()},u.prototype.getPopup=function(){return this._popup},u.prototype.togglePopup=function(){var t=this._popup;return t?(t.isOpen()?t.remove():t.addTo(this._map),this):this},u.prototype._update=function(t){this._map&&(this._map.transform.renderWorldCopies&&(this._lngLat=a(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset),t&&"moveend"!==t.type||(this._pos=this._pos.round()),i.setTransform(this._element,"translate(-50%, -50%) translate("+this._pos.x+"px, "+this._pos.y+"px)"))},u.prototype.getOffset=function(){return this._offset},u.prototype.setOffset=function(t){return this._offset=o.convert(t),this._update(),this},e.exports=u},{"../geo/lng_lat":62,"../util/dom":259,"../util/smart_wrap":270,"../util/util":275,"@mapbox/point-geometry":4}],249:[function(t,e,n){"use strict";var i=t("../util/util"),r=t("../util/evented"),o=t("../util/dom"),a=t("../geo/lng_lat"),s=t("@mapbox/point-geometry"),u=t("../util/window"),l=t("../util/smart_wrap"),c={closeButton:!0,closeOnClick:!0},p=function(t){function e(e){t.call(this),this.options=i.extend(Object.create(c),e),i.bindAll(["_update","_onClickClose"],this)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.addTo=function(t){return this._map=t,this._map.on("move",this._update),this.options.closeOnClick&&this._map.on("click",this._onClickClose),this._update(),this},e.prototype.isOpen=function(){return!!this._map},e.prototype.remove=function(){return this._content&&o.remove(this._content),this._container&&(o.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("click",this._onClickClose),delete this._map),this.fire("close"),this},e.prototype.getLngLat=function(){return this._lngLat},e.prototype.setLngLat=function(t){return this._lngLat=a.convert(t),this._pos=null,this._update(),this},e.prototype.setText=function(t){return this.setDOMContent(u.document.createTextNode(t))},e.prototype.setHTML=function(t){var e,n=u.document.createDocumentFragment(),i=u.document.createElement("body");for(i.innerHTML=t;e=i.firstChild;)n.appendChild(e);return this.setDOMContent(n)},e.prototype.setDOMContent=function(t){return this._createContent(),this._content.appendChild(t),this._update(),this},e.prototype._createContent=function(){this._content&&o.remove(this._content),this._content=o.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=o.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClickClose))},e.prototype._update=function(){if(this._map&&this._lngLat&&this._content){this._container||(this._container=o.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=o.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content)),this._map.transform.renderWorldCopies&&(this._lngLat=l(this._lngLat,this._pos,this._map.transform));var t=this._pos=this._map.project(this._lngLat),e=this.options.anchor,n=function t(e){if(e){if("number"==typeof e){var n=Math.round(Math.sqrt(.5*Math.pow(e,2)));return{top:new s(0,e),"top-left":new s(n,n),"top-right":new s(-n,n),bottom:new s(0,-e),"bottom-left":new s(n,-n),"bottom-right":new s(-n,-n),left:new s(e,0),right:new s(-e,0)}}if(e instanceof s||Array.isArray(e)){var i=s.convert(e);return{top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{top:s.convert(e.top||[0,0]),"top-left":s.convert(e["top-left"]||[0,0]),"top-right":s.convert(e["top-right"]||[0,0]),bottom:s.convert(e.bottom||[0,0]),"bottom-left":s.convert(e["bottom-left"]||[0,0]),"bottom-right":s.convert(e["bottom-right"]||[0,0]),left:s.convert(e.left||[0,0]),right:s.convert(e.right||[0,0])}}return t(new s(0,0))}(this.options.offset);if(!e){var i=this._container.offsetWidth,r=this._container.offsetHeight;e=t.y+n.bottom.y<r?["top"]:t.y>this._map.transform.height-r?["bottom"]:[],t.x<i/2?e.push("left"):t.x>this._map.transform.width-i/2&&e.push("right"),e=0===e.length?"bottom":e.join("-")}var a=t.add(n[e]).round(),u={top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"},c=this._container.classList;for(var p in u)c.remove("mapboxgl-popup-anchor-"+p);c.add("mapboxgl-popup-anchor-"+e),o.setTransform(this._container,u[e]+" translate("+a.x+"px,"+a.y+"px)")}},e.prototype._onClickClose=function(){this.remove()},e}(r);e.exports=p},{"../geo/lng_lat":62,"../util/dom":259,"../util/evented":260,"../util/smart_wrap":270,"../util/util":275,"../util/window":254,"@mapbox/point-geometry":4}],250:[function(t,e,n){"use strict";var i=t("./util"),r=t("./web_worker_transfer"),o=r.serialize,a=r.deserialize,s=function(t,e,n){this.target=t,this.parent=e,this.mapId=n,this.callbacks={},this.callbackID=0,i.bindAll(["receive"],this),this.target.addEventListener("message",this.receive,!1)};s.prototype.send=function(t,e,n,i){var r=n?this.mapId+":"+this.callbackID++:null;n&&(this.callbacks[r]=n);var a=[];this.target.postMessage({targetMapId:i,sourceMapId:this.mapId,type:t,id:String(r),data:o(e,a)},a)},s.prototype.receive=function(t){var e,n=this,i=t.data,r=i.id;if(!i.targetMapId||this.mapId===i.targetMapId){var s=function(t,e){var i=[];n.target.postMessage({sourceMapId:n.mapId,type:"<response>",id:String(r),error:t?String(t):null,data:o(e,i)},i)};if("<response>"===i.type)e=this.callbacks[i.id],delete this.callbacks[i.id],e&&i.error?e(new Error(i.error)):e&&e(null,a(i.data));else if(void 0!==i.id&&this.parent[i.type])this.parent[i.type](i.sourceMapId,a(i.data),s);else if(void 0!==i.id&&this.parent.getWorkerSource){var u=i.type.split(".");this.parent.getWorkerSource(i.sourceMapId,u[0])[u[1]](a(i.data),s)}else this.parent[i.type](a(i.data))}},s.prototype.remove=function(){this.target.removeEventListener("message",this.receive,!1)},e.exports=s},{"./util":275,"./web_worker_transfer":278}],251:[function(t,e,n){"use strict";function i(t){var e=new o.XMLHttpRequest;for(var n in e.open("GET",t.url,!0),t.headers)e.setRequestHeader(n,t.headers[n]);return e.withCredentials="include"===t.credentials,e}function r(t){var e=o.document.createElement("a");return e.href=t,e.protocol===o.document.location.protocol&&e.host===o.document.location.host}var o=t("./window"),a={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};n.ResourceType=a,"function"==typeof Object.freeze&&Object.freeze(a);var s=function(t){function e(e,n){t.call(this,e),this.status=n}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Error);n.getJSON=function(t,e){var n=i(t);return n.setRequestHeader("Accept","application/json"),n.onerror=function(){e(new Error(n.statusText))},n.onload=function(){if(n.status>=200&&n.status<300&&n.response){var t;try{t=JSON.parse(n.response)}catch(t){return e(t)}e(null,t)}else e(new s(n.statusText,n.status))},n.send(),n},n.getArrayBuffer=function(t,e){var n=i(t);return n.responseType="arraybuffer",n.onerror=function(){e(new Error(n.statusText))},n.onload=function(){var t=n.response;if(0===t.byteLength&&200===n.status)return e(new Error("http status 200 returned without content."));n.status>=200&&n.status<300&&n.response?e(null,{data:t,cacheControl:n.getResponseHeader("Cache-Control"),expires:n.getResponseHeader("Expires")}):e(new s(n.statusText,n.status))},n.send(),n},n.getImage=function(t,e){return n.getArrayBuffer(t,function(t,n){if(t)e(t);else if(n){var i=new o.Image,r=o.URL||o.webkitURL;i.onload=function(){e(null,i),r.revokeObjectURL(i.src)};var a=new o.Blob([new Uint8Array(n.data)],{type:"image/png"});i.cacheControl=n.cacheControl,i.expires=n.expires,i.src=n.data.byteLength?r.createObjectURL(a):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}})},n.getVideo=function(t,e){var n=o.document.createElement("video");n.onloadstart=function(){e(null,n)};for(var i=0;i<t.length;i++){var a=o.document.createElement("source");r(t[i])||(n.crossOrigin="Anonymous"),a.src=t[i],n.appendChild(a)}return n}},{"./window":254}],252:[function(t,e,n){"use strict";var i=t("./window"),r=i.performance&&i.performance.now?i.performance.now.bind(i.performance):Date.now.bind(Date),o=i.requestAnimationFrame||i.mozRequestAnimationFrame||i.webkitRequestAnimationFrame||i.msRequestAnimationFrame,a=i.cancelAnimationFrame||i.mozCancelAnimationFrame||i.webkitCancelAnimationFrame||i.msCancelAnimationFrame;e.exports={now:r,frame:function(t){return o(t)},cancelFrame:function(t){return a(t)},getImageData:function(t){var e=i.document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("failed to create canvas 2d context");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0,t.width,t.height),n.getImageData(0,0,t.width,t.height)},hardwareConcurrency:i.navigator.hardwareConcurrency||4,get devicePixelRatio(){return i.devicePixelRatio},supportsWebp:!1};var s=i.document.createElement("img");s.onload=function(){e.exports.supportsWebp=!0},s.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="},{"./window":254}],253:[function(t,e,n){"use strict";var i=t("webworkify"),r=t("../window"),o=r.URL.createObjectURL(new i(t("../../source/worker"),{bare:!0}));e.exports=function(){return new r.Worker(o)}},{"../../source/worker":118,"../window":254,webworkify:36}],254:[function(t,e,n){"use strict";e.exports=self},{}],255:[function(t,e,n){"use strict";function i(t,e){return e.area-t.area}var r=t("quickselect"),o=t("./util").calculateSignedArea;e.exports=function(t,e){var n=t.length;if(n<=1)return[t];for(var a,s,u=[],l=0;l<n;l++){var c=o(t[l]);0!==c&&(t[l].area=Math.abs(c),void 0===s&&(s=c<0),s===c<0?(a&&u.push(a),a=[t[l]]):a.push(t[l]))}if(a&&u.push(a),e>1)for(var p=0;p<u.length;p++)u[p].length<=e||(r(u[p],e,1,u[p].length-1,i),u[p]=u[p].slice(0,e));return u}},{"./util":275,quickselect:31}],256:[function(t,e,n){"use strict";e.exports={API_URL:"https://api.mapbox.com",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null}},{}],257:[function(t,e,n){"use strict";var i=function(t){this._stringToNumber={},this._numberToString=[];for(var e=0;e<t.length;e++){var n=t[e];this._stringToNumber[n]=e,this._numberToString[e]=n}};i.prototype.encode=function(t){return this._stringToNumber[t]},i.prototype.decode=function(t){return this._numberToString[t]},e.exports=i},{}],258:[function(t,e,n){"use strict";var i=t("./util"),r=t("./actor"),o=function(t,e){this.workerPool=t,this.actors=[],this.currentActor=0,this.id=i.uniqueId();for(var n=this.workerPool.acquire(this.id),o=0;o<n.length;o++){var a=new r(n[o],e,this.id);a.name="Worker "+o,this.actors.push(a)}};o.prototype.broadcast=function(t,e,n){i.asyncAll(this.actors,function(n,i){n.send(t,e,i)},n=n||function(){})},o.prototype.send=function(t,e,n,i){return("number"!=typeof i||isNaN(i))&&(i=this.currentActor=(this.currentActor+1)%this.actors.length),this.actors[i].send(t,e,n),i},o.prototype.remove=function(){this.actors.forEach(function(t){t.remove()}),this.actors=[],this.workerPool.release(this.id)},e.exports=o},{"./actor":250,"./util":275}],259:[function(t,e,n){"use strict";function i(t){for(var e=0;e<t.length;e++)if(t[e]in s)return t[e];return t[0]}var r=t("@mapbox/point-geometry"),o=t("./window");n.create=function(t,e,n){var i=o.document.createElement(t);return e&&(i.className=e),n&&n.appendChild(i),i},n.createNS=function(t,e){return o.document.createElementNS(t,e)};var a,s=o.document.documentElement.style,u=i(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);n.disableDrag=function(){u&&(a=s[u],s[u]="none")},n.enableDrag=function(){u&&(s[u]=a)};var l=i(["transform","WebkitTransform"]);n.setTransform=function(t,e){t.style[l]=e};var c=function(t){t.preventDefault(),t.stopPropagation(),o.removeEventListener("click",c,!0)};n.suppressClick=function(){o.addEventListener("click",c,!0),o.setTimeout(function(){o.removeEventListener("click",c,!0)},0)},n.mousePos=function(t,e){var n=t.getBoundingClientRect();return new r((e=e.touches?e.touches[0]:e).clientX-n.left-t.clientLeft,e.clientY-n.top-t.clientTop)},n.touchPos=function(t,e){for(var n=t.getBoundingClientRect(),i=[],o="touchend"===e.type?e.changedTouches:e.touches,a=0;a<o.length;a++)i.push(new r(o[a].clientX-n.left-t.clientLeft,o[a].clientY-n.top-t.clientTop));return i},n.remove=function(t){t.parentNode&&t.parentNode.removeChild(t)}},{"./window":254,"@mapbox/point-geometry":4}],260:[function(t,e,n){"use strict";function i(t,e,n){n[t]=n[t]||[],n[t].push(e)}function r(t,e,n){if(n&&n[t]){var i=n[t].indexOf(e);-1!==i&&n[t].splice(i,1)}}var o=t("./util"),a=function(){};a.prototype.on=function(t,e){return this._listeners=this._listeners||{},i(t,e,this._listeners),this},a.prototype.off=function(t,e){return r(t,e,this._listeners),r(t,e,this._oneTimeListeners),this},a.prototype.once=function(t,e){return this._oneTimeListeners=this._oneTimeListeners||{},i(t,e,this._oneTimeListeners),this},a.prototype.fire=function(t,e){var n=this;if(this.listens(t)){e=o.extend({},e,{type:t,target:this});for(var i=0,a=this._listeners&&this._listeners[t]?this._listeners[t].slice():[];i<a.length;i+=1)a[i].call(n,e);for(var s=0,u=this._oneTimeListeners&&this._oneTimeListeners[t]?this._oneTimeListeners[t].slice():[];s<u.length;s+=1){var l=u[s];r(t,l,n._oneTimeListeners),l.call(n,e)}this._eventedParent&&this._eventedParent.fire(t,o.extend({},e,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData))}else o.endsWith(t,"error")&&console.error(e&&e.error||e||"Empty error event");return this},a.prototype.listens=function(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)},a.prototype.setEventedParent=function(t,e){return this._eventedParent=t,this._eventedParentData=e,this},e.exports=a},{"./util":275}],261:[function(t,e,n){"use strict";function i(t,e){return e.max-t.max}function r(t,e,n,i){this.p=new a(t,e),this.h=n,this.d=function(t,e){for(var n=!1,i=1/0,r=0;r<e.length;r++)for(var o=e[r],a=0,u=o.length,l=u-1;a<u;l=a++){var c=o[a],p=o[l];c.y>t.y!=p.y>t.y&&t.x<(p.x-c.x)*(t.y-c.y)/(p.y-c.y)+c.x&&(n=!n),i=Math.min(i,s(t,c,p))}return(n?1:-1)*Math.sqrt(i)}(this.p,i),this.max=this.d+this.h*Math.SQRT2}var o=t("tinyqueue"),a=t("@mapbox/point-geometry"),s=t("./intersection_tests").distToSegmentSquared;e.exports=function(t,e,n){void 0===e&&(e=1),void 0===n&&(n=!1);for(var s=1/0,u=1/0,l=-1/0,c=-1/0,p=t[0],h=0;h<p.length;h++){var f=p[h];(!h||f.x<s)&&(s=f.x),(!h||f.y<u)&&(u=f.y),(!h||f.x>l)&&(l=f.x),(!h||f.y>c)&&(c=f.y)}var d=Math.min(l-s,c-u),m=d/2,y=new o(null,i);if(0===d)return new a(s,u);for(var g=s;g<l;g+=d)for(var v=u;v<c;v+=d)y.push(new r(g+m,v+m,m,t));for(var _=function(t){for(var e=0,n=0,i=0,o=t[0],a=0,s=o.length,u=s-1;a<s;u=a++){var l=o[a],c=o[u],p=l.x*c.y-c.x*l.y;n+=(l.x+c.x)*p,i+=(l.y+c.y)*p,e+=3*p}return new r(n/e,i/e,0,t)}(t),b=y.length;y.length;){var x=y.pop();(x.d>_.d||!_.d)&&(_=x,n&&console.log("found best %d after %d probes",Math.round(1e4*x.d)/1e4,b)),x.max-_.d<=e||(y.push(new r(x.p.x-(m=x.h/2),x.p.y-m,m,t)),y.push(new r(x.p.x+m,x.p.y-m,m,t)),y.push(new r(x.p.x-m,x.p.y+m,m,t)),y.push(new r(x.p.x+m,x.p.y+m,m,t)),b+=4)}return n&&(console.log("num probes: "+b),console.log("best distance: "+_.d)),_.p}},{"./intersection_tests":264,"@mapbox/point-geometry":4,tinyqueue:33}],262:[function(t,e,n){"use strict";var i,r=t("./worker_pool");e.exports=function(){return i||(i=new r),i}},{"./worker_pool":279}],263:[function(t,e,n){"use strict";function i(t,e,n,i){var r=e.width,o=e.height;if(i){if(i.length!==r*o*n)throw new RangeError("mismatched image size")}else i=new Uint8Array(r*o*n);return t.width=r,t.height=o,t.data=i,t}function r(t,e,n){var r=e.width,a=e.height;if(r!==t.width||a!==t.height){var s=i({},{width:r,height:a},n);o(t,s,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,r),height:Math.min(t.height,a)},n),t.width=r,t.height=a,t.data=s.data}}function o(t,e,n,i,r,o){if(0===r.width||0===r.height)return e;if(r.width>t.width||r.height>t.height||n.x>t.width-r.width||n.y>t.height-r.height)throw new RangeError("out of range source coordinates for image copy");if(r.width>e.width||r.height>e.height||i.x>e.width-r.width||i.y>e.height-r.height)throw new RangeError("out of range destination coordinates for image copy");for(var a=t.data,s=e.data,u=0;u<r.height;u++)for(var l=((n.y+u)*t.width+n.x)*o,c=((i.y+u)*e.width+i.x)*o,p=0;p<r.width*o;p++)s[c+p]=a[l+p];return e}var a=t("./web_worker_transfer").register,s=function(t,e){i(this,t,1,e)};s.prototype.resize=function(t){r(this,t,1)},s.prototype.clone=function(){return new s({width:this.width,height:this.height},new Uint8Array(this.data))},s.copy=function(t,e,n,i,r){o(t,e,n,i,r,1)};var u=function(t,e){i(this,t,4,e)};u.prototype.resize=function(t){r(this,t,4)},u.prototype.clone=function(){return new u({width:this.width,height:this.height},new Uint8Array(this.data))},u.copy=function(t,e,n,i,r){o(t,e,n,i,r,4)},a("AlphaImage",s),a("RGBAImage",u),e.exports={AlphaImage:s,RGBAImage:u}},{"./web_worker_transfer":278}],264:[function(t,e,n){"use strict";function i(t,e,n){if(t.length>1){if(r(t,e))return!0;for(var i=0;i<e.length;i++)if(a(e[i],t,n))return!0}for(var o=0;o<t.length;o++)if(a(t[o],e,n))return!0;return!1}function r(t,e){if(0===t.length||0===e.length)return!1;for(var n=0;n<t.length-1;n++)for(var i=t[n],r=t[n+1],a=0;a<e.length-1;a++)if(o(i,r,e[a],e[a+1]))return!0;return!1}function o(t,e,n,i){return c(t,n,i)!==c(e,n,i)&&c(t,e,n)!==c(t,e,i)}function a(t,e,n){var i=n*n;if(1===e.length)return t.distSqr(e[0])<i;for(var r=1;r<e.length;r++)if(s(t,e[r-1],e[r])<i)return!0;return!1}function s(t,e,n){var i=e.distSqr(n);if(0===i)return t.distSqr(e);var r=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/i;return t.distSqr(r<0?e:r>1?n:n.sub(e)._mult(r)._add(e))}function u(t,e){for(var n,i,r,o=!1,a=0;a<t.length;a++)for(var s=0,u=(n=t[a]).length-1;s<n.length;u=s++)(i=n[s]).y>e.y!=(r=n[u]).y>e.y&&e.x<(r.x-i.x)*(e.y-i.y)/(r.y-i.y)+i.x&&(o=!o);return o}function l(t,e){for(var n=!1,i=0,r=t.length-1;i<t.length;r=i++){var o=t[i],a=t[r];o.y>e.y!=a.y>e.y&&e.x<(a.x-o.x)*(e.y-o.y)/(a.y-o.y)+o.x&&(n=!n)}return n}var c=t("./util").isCounterClockwise;e.exports={multiPolygonIntersectsBufferedMultiPoint:function(t,e,n){for(var i=0;i<t.length;i++)for(var r=t[i],o=0;o<e.length;o++)for(var s=e[o],u=0;u<s.length;u++){var c=s[u];if(l(r,c))return!0;if(a(c,r,n))return!0}return!1},multiPolygonIntersectsMultiPolygon:function(t,e){if(1===t.length&&1===t[0].length)return u(e,t[0][0]);for(var n=0;n<e.length;n++)for(var i=e[n],o=0;o<i.length;o++)if(u(t,i[o]))return!0;for(var a=0;a<t.length;a++){for(var s=t[a],l=0;l<s.length;l++)if(u(e,s[l]))return!0;for(var c=0;c<e.length;c++)if(r(s,e[c]))return!0}return!1},multiPolygonIntersectsBufferedMultiLine:function(t,e,n){for(var r=0;r<e.length;r++)for(var o=e[r],a=0;a<t.length;a++){var s=t[a];if(s.length>=3)for(var u=0;u<o.length;u++)if(l(s,o[u]))return!0;if(i(s,o,n))return!0}return!1},polygonIntersectsPolygon:function(t,e){for(var n=0;n<t.length;n++)if(l(e,t[n]))return!0;for(var i=0;i<e.length;i++)if(l(t,e[i]))return!0;return!!r(t,e)},distToSegmentSquared:s}},{"./util":275}],265:[function(t,e,n){"use strict";e.exports={"Latin-1 Supplement":function(t){return t>=128&&t<=255},Arabic:function(t){return t>=1536&&t<=1791},"Arabic Supplement":function(t){return t>=1872&&t<=1919},"Arabic Extended-A":function(t){return t>=2208&&t<=2303},"Hangul Jamo":function(t){return t>=4352&&t<=4607},"Unified Canadian Aboriginal Syllabics":function(t){return t>=5120&&t<=5759},"Unified Canadian Aboriginal Syllabics Extended":function(t){return t>=6320&&t<=6399},"General Punctuation":function(t){return t>=8192&&t<=8303},"Letterlike Symbols":function(t){return t>=8448&&t<=8527},"Number Forms":function(t){return t>=8528&&t<=8591},"Miscellaneous Technical":function(t){return t>=8960&&t<=9215},"Control Pictures":function(t){return t>=9216&&t<=9279},"Optical Character Recognition":function(t){return t>=9280&&t<=9311},"Enclosed Alphanumerics":function(t){return t>=9312&&t<=9471},"Geometric Shapes":function(t){return t>=9632&&t<=9727},"Miscellaneous Symbols":function(t){return t>=9728&&t<=9983},"Miscellaneous Symbols and Arrows":function(t){return t>=11008&&t<=11263},"CJK Radicals Supplement":function(t){return t>=11904&&t<=12031},"Kangxi Radicals":function(t){return t>=12032&&t<=12255},"Ideographic Description Characters":function(t){return t>=12272&&t<=12287},"CJK Symbols and Punctuation":function(t){return t>=12288&&t<=12351},Hiragana:function(t){return t>=12352&&t<=12447},Katakana:function(t){return t>=12448&&t<=12543},Bopomofo:function(t){return t>=12544&&t<=12591},"Hangul Compatibility Jamo":function(t){return t>=12592&&t<=12687},Kanbun:function(t){return t>=12688&&t<=12703},"Bopomofo Extended":function(t){return t>=12704&&t<=12735},"CJK Strokes":function(t){return t>=12736&&t<=12783},"Katakana Phonetic Extensions":function(t){return t>=12784&&t<=12799},"Enclosed CJK Letters and Months":function(t){return t>=12800&&t<=13055},"CJK Compatibility":function(t){return t>=13056&&t<=13311},"CJK Unified Ideographs Extension A":function(t){return t>=13312&&t<=19903},"Yijing Hexagram Symbols":function(t){return t>=19904&&t<=19967},"CJK Unified Ideographs":function(t){return t>=19968&&t<=40959},"Yi Syllables":function(t){return t>=40960&&t<=42127},"Yi Radicals":function(t){return t>=42128&&t<=42191},"Hangul Jamo Extended-A":function(t){return t>=43360&&t<=43391},"Hangul Syllables":function(t){return t>=44032&&t<=55215},"Hangul Jamo Extended-B":function(t){return t>=55216&&t<=55295},"Private Use Area":function(t){return t>=57344&&t<=63743},"CJK Compatibility Ideographs":function(t){return t>=63744&&t<=64255},"Arabic Presentation Forms-A":function(t){return t>=64336&&t<=65023},"Vertical Forms":function(t){return t>=65040&&t<=65055},"CJK Compatibility Forms":function(t){return t>=65072&&t<=65103},"Small Form Variants":function(t){return t>=65104&&t<=65135},"Arabic Presentation Forms-B":function(t){return t>=65136&&t<=65279},"Halfwidth and Fullwidth Forms":function(t){return t>=65280&&t<=65519}}},{}],266:[function(t,e,n){"use strict";var i=function(t,e){this.max=t,this.onRemove=e,this.reset()};i.prototype.reset=function(){var t=this;for(var e in t.data)t.onRemove(t.data[e]);return this.data={},this.order=[],this},i.prototype.add=function(t,e){if(this.has(t))this.order.splice(this.order.indexOf(t),1),this.data[t]=e,this.order.push(t);else if(this.data[t]=e,this.order.push(t),this.order.length>this.max){var n=this.getAndRemove(this.order[0]);n&&this.onRemove(n)}return this},i.prototype.has=function(t){return t in this.data},i.prototype.keys=function(){return this.order},i.prototype.getAndRemove=function(t){if(!this.has(t))return null;var e=this.data[t];return delete this.data[t],this.order.splice(this.order.indexOf(t),1),e},i.prototype.get=function(t){return this.has(t)?this.data[t]:null},i.prototype.remove=function(t){if(!this.has(t))return this;var e=this.data[t];return delete this.data[t],this.onRemove(e),this.order.splice(this.order.indexOf(t),1),this},i.prototype.setMaxSize=function(t){var e=this;for(this.max=t;this.order.length>this.max;){var n=e.getAndRemove(e.order[0]);n&&e.onRemove(n)}return this},e.exports=i},{}],267:[function(t,e,n){"use strict";function i(t,e){var n=o(s.API_URL);if(t.protocol=n.protocol,t.authority=n.authority,"/"!==n.path&&(t.path=""+n.path+t.path),!s.REQUIRE_ACCESS_TOKEN)return a(t);if(!(e=e||s.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+l);if("s"===e[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+l);return t.params.push("access_token="+e),a(t)}function r(t){return 0===t.indexOf("mapbox:")}function o(t){var e=t.match(p);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function a(t){var e=t.params.length?"?"+t.params.join("&"):"";return t.protocol+"://"+t.authority+t.path+e}var s=t("./config"),u=t("./browser"),l="See https://www.mapbox.com/api-documentation/#access-tokens";n.isMapboxURL=r,n.normalizeStyleURL=function(t,e){if(!r(t))return t;var n=o(t);return n.path="/styles/v1"+n.path,i(n,e)},n.normalizeGlyphsURL=function(t,e){if(!r(t))return t;var n=o(t);return n.path="/fonts/v1"+n.path,i(n,e)},n.normalizeSourceURL=function(t,e){if(!r(t))return t;var n=o(t);return n.path="/v4/"+n.authority+".json",n.params.push("secure"),i(n,e)},n.normalizeSpriteURL=function(t,e,n,s){var u=o(t);return r(t)?(u.path="/styles/v1"+u.path+"/sprite"+e+n,i(u,s)):(u.path+=""+e+n,a(u))};var c=/(\.(png|jpg)\d*)(?=$)/;n.normalizeTileURL=function(t,e,n){if(!e||!r(e))return t;var i=o(t);return i.path=i.path.replace(c,(u.devicePixelRatio>=2||512===n?"@2x":"")+(u.supportsWebp?".webp":"$1")),function(t){for(var e=0;e<t.length;e++)0===t[e].indexOf("access_token=tk.")&&(t[e]="access_token="+(s.ACCESS_TOKEN||""))}(i.params),a(i)};var p=/^(\w+):\/\/([^\/?]*)(\/[^?]+)?\??(.+)?/},{"./browser":252,"./config":256}],268:[function(t,e,n){"use strict";e.exports={getEntriesByName:function(t){return!(!performance||!performance.getEntriesByName)&&performance.getEntriesByName(t)}}},{}],269:[function(t,e,n){"use strict";var i=t("./is_char_in_unicode_block");e.exports.allowsIdeographicBreaking=function(t){for(var e=0,i=t;e<i.length;e+=1)if(!n.charAllowsIdeographicBreaking(i[e].charCodeAt(0)))return!1;return!0},e.exports.allowsVerticalWritingMode=function(t){for(var e=0,i=t;e<i.length;e+=1)if(n.charHasUprightVerticalOrientation(i[e].charCodeAt(0)))return!0;return!1},e.exports.allowsLetterSpacing=function(t){for(var e=0,i=t;e<i.length;e+=1)if(!n.charAllowsLetterSpacing(i[e].charCodeAt(0)))return!1;return!0},e.exports.charAllowsLetterSpacing=function(t){return!(i.Arabic(t)||i["Arabic Supplement"](t)||i["Arabic Extended-A"](t)||i["Arabic Presentation Forms-A"](t)||i["Arabic Presentation Forms-B"](t))},e.exports.charAllowsIdeographicBreaking=function(t){return!(t<11904||!(i["Bopomofo Extended"](t)||i.Bopomofo(t)||i["CJK Compatibility Forms"](t)||i["CJK Compatibility Ideographs"](t)||i["CJK Compatibility"](t)||i["CJK Radicals Supplement"](t)||i["CJK Strokes"](t)||i["CJK Symbols and Punctuation"](t)||i["CJK Unified Ideographs Extension A"](t)||i["CJK Unified Ideographs"](t)||i["Enclosed CJK Letters and Months"](t)||i["Halfwidth and Fullwidth Forms"](t)||i.Hiragana(t)||i["Ideographic Description Characters"](t)||i["Kangxi Radicals"](t)||i["Katakana Phonetic Extensions"](t)||i.Katakana(t)||i["Vertical Forms"](t)||i["Yi Radicals"](t)||i["Yi Syllables"](t)))},n.charHasUprightVerticalOrientation=function(t){return!(746!==t&&747!==t&&(t<4352||!(i["Bopomofo Extended"](t)||i.Bopomofo(t)||i["CJK Compatibility Forms"](t)&&!(t>=65097&&t<=65103)||i["CJK Compatibility Ideographs"](t)||i["CJK Compatibility"](t)||i["CJK Radicals Supplement"](t)||i["CJK Strokes"](t)||!(!i["CJK Symbols and Punctuation"](t)||t>=12296&&t<=12305||t>=12308&&t<=12319||12336===t)||i["CJK Unified Ideographs Extension A"](t)||i["CJK Unified Ideographs"](t)||i["Enclosed CJK Letters and Months"](t)||i["Hangul Compatibility Jamo"](t)||i["Hangul Jamo Extended-A"](t)||i["Hangul Jamo Extended-B"](t)||i["Hangul Jamo"](t)||i["Hangul Syllables"](t)||i.Hiragana(t)||i["Ideographic Description Characters"](t)||i.Kanbun(t)||i["Kangxi Radicals"](t)||i["Katakana Phonetic Extensions"](t)||i.Katakana(t)&&12540!==t||!(!i["Halfwidth and Fullwidth Forms"](t)||65288===t||65289===t||65293===t||t>=65306&&t<=65310||65339===t||65341===t||65343===t||t>=65371&&t<=65503||65507===t||t>=65512&&t<=65519)||!(!i["Small Form Variants"](t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||i["Unified Canadian Aboriginal Syllabics"](t)||i["Unified Canadian Aboriginal Syllabics Extended"](t)||i["Vertical Forms"](t)||i["Yijing Hexagram Symbols"](t)||i["Yi Syllables"](t)||i["Yi Radicals"](t))))},n.charHasNeutralVerticalOrientation=function(t){return!!(i["Latin-1 Supplement"](t)&&(167===t||169===t||174===t||177===t||188===t||189===t||190===t||215===t||247===t)||i["General Punctuation"](t)&&(8214===t||8224===t||8225===t||8240===t||8241===t||8251===t||8252===t||8258===t||8263===t||8264===t||8265===t||8273===t)||i["Letterlike Symbols"](t)||i["Number Forms"](t)||i["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||9003===t||t>=9085&&t<=9114||t>=9150&&t<=9165||9167===t||t>=9169&&t<=9179||t>=9186&&t<=9215)||i["Control Pictures"](t)&&9251!==t||i["Optical Character Recognition"](t)||i["Enclosed Alphanumerics"](t)||i["Geometric Shapes"](t)||i["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||i["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||i["CJK Symbols and Punctuation"](t)||i.Katakana(t)||i["Private Use Area"](t)||i["CJK Compatibility Forms"](t)||i["Small Form Variants"](t)||i["Halfwidth and Fullwidth Forms"](t)||8734===t||8756===t||8757===t||t>=9984&&t<=10087||t>=10102&&t<=10131||65532===t||65533===t)},n.charHasRotatedVerticalOrientation=function(t){return!(n.charHasUprightVerticalOrientation(t)||n.charHasNeutralVerticalOrientation(t))}},{"./is_char_in_unicode_block":265}],270:[function(t,e,n){"use strict";var i=t("../geo/lng_lat");e.exports=function(t,e,n){if(t=new i(t.lng,t.lat),e){var r=new i(t.lng-360,t.lat),o=new i(t.lng+360,t.lat),a=n.locationPoint(t).distSqr(e);n.locationPoint(r).distSqr(e)<a?t=r:n.locationPoint(o).distSqr(e)<a&&(t=o)}for(;Math.abs(t.lng-n.center.lng)>180;){var s=n.locationPoint(t);if(s.x>=0&&s.y>=0&&s.x<=n.width&&s.y<=n.height)break;t.lng>n.center.lng?t.lng-=360:t.lng+=360}return t}},{"../geo/lng_lat":62}],271:[function(t,e,n){"use strict";function i(t,e){return Math.ceil(t/e)*e}var r={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},o=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};o.serialize=function(t,e){return t._trim(),e&&(t.isTransferred=!0,e.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}},o.deserialize=function(t){var e=Object.create(this.prototype);return e.arrayBuffer=t.arrayBuffer,e.length=t.length,e.capacity=t.arrayBuffer.byteLength/e.bytesPerElement,e._refreshViews(),e},o.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},o.prototype.clear=function(){this.length=0},o.prototype.resize=function(t){this.reserve(t),this.length=t},o.prototype.reserve=function(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var e=this.uint8;this._refreshViews(),e&&this.uint8.set(e)}},o.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")},e.exports.StructArray=o,e.exports.Struct=function(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},e.exports.viewTypes=r,e.exports.createLayout=function(t,e){void 0===e&&(e=1);var n=0,o=0;return{members:t.map(function(t){var a=function(t){return r[t].BYTES_PER_ELEMENT}(t.type),s=n=i(n,Math.max(e,a)),u=t.components||1;return o=Math.max(o,a),n+=a*u,{name:t.name,type:t.type,components:u,offset:s}}),size:i(n,Math.max(o,e)),alignment:e}}},{}],272:[function(t,e,n){"use strict";e.exports=function(t,e){var n=!1,i=0,r=function(){i=0,n&&(t(),i=setTimeout(r,e),n=!1)};return function(){return n=!0,i||r(),i}}},{}],273:[function(t,e,n){"use strict";function i(t,e){if(t.row>e.row){var n=t;t=e,e=n}return{x0:t.column,y0:t.row,x1:e.column,y1:e.row,dx:e.column-t.column,dy:e.row-t.row}}function r(t,e,n,i,r){var o=Math.max(n,Math.floor(e.y0)),a=Math.min(i,Math.ceil(e.y1));if(t.x0===e.x0&&t.y0===e.y0?t.x0+e.dy/t.dy*t.dx<e.x1:t.x1-e.dy/t.dy*t.dx<e.x0){var s=t;t=e,e=s}for(var u=t.dx/t.dy,l=e.dx/e.dy,c=t.dx>0,p=e.dx<0,h=o;h<a;h++){var f=u*Math.max(0,Math.min(t.dy,h+c-t.y0))+t.x0,d=l*Math.max(0,Math.min(e.dy,h+p-e.y0))+e.x0;r(Math.floor(d),Math.ceil(f),h)}}function o(t,e,n,o,a,s){var u,l=i(t,e),c=i(e,n),p=i(n,t);l.dy>c.dy&&(u=l,l=c,c=u),l.dy>p.dy&&(u=l,l=p,p=u),c.dy>p.dy&&(u=c,c=p,p=u),l.dy&&r(p,l,o,a,s),c.dy&&r(p,c,o,a,s)}t("../geo/coordinate");var a=t("../source/tile_id").OverscaledTileID;e.exports=function(t,e,n,i){function r(e,r,o){var l,c,p;if(o>=0&&o<=s)for(l=e;l<r;l++)0!==(c=Math.floor(l/s))&&!0!==i||(p=new a(n,c,t,(l%s+s)%s,o),u[p.key]=p)}void 0===i&&(i=!0);var s=1<<t,u={};return o(e[0],e[1],e[2],0,s,r),o(e[2],e[3],e[0],0,s,r),Object.keys(u).map(function(t){return u[t]})}},{"../geo/coordinate":61,"../source/tile_id":114}],274:[function(t,e,n){"use strict";e.exports=function(t,e){return e.replace(/{([^{}]+)}/g,function(e,n){return n in t?String(t[n]):""})}},{}],275:[function(t,e,n){"use strict";var i=t("@mapbox/unitbezier"),r=t("../geo/coordinate");t("@mapbox/point-geometry"),n.easeCubicInOut=function(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)},n.bezier=function(t,e,n,r){var o=new i(t,e,n,r);return function(t){return o.solve(t)}},n.ease=n.bezier(.25,.1,.25,1),n.clamp=function(t,e,n){return Math.min(n,Math.max(e,t))},n.wrap=function(t,e,n){var i=n-e,r=((t-e)%i+i)%i+e;return r===e?n:r},n.asyncAll=function(t,e,n){if(!t.length)return n(null,[]);var i=t.length,r=new Array(t.length),o=null;t.forEach(function(t,a){e(t,function(t,e){t&&(o=t),r[a]=e,0==--i&&n(o,r)})})},n.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},n.keysDifference=function(t,e){var n=[];for(var i in t)i in e||n.push(i);return n},n.extend=function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];for(var i=0,r=e;i<r.length;i+=1){var o=r[i];for(var a in o)t[a]=o[a]}return t},n.pick=function(t,e){for(var n={},i=0;i<e.length;i++){var r=e[i];r in t&&(n[r]=t[r])}return n};var o=1;n.uniqueId=function(){return o++},n.bindAll=function(t,e){t.forEach(function(t){e[t]&&(e[t]=e[t].bind(e))})},n.getCoordinatesCenter=function(t){for(var e=1/0,n=1/0,i=-1/0,o=-1/0,a=0;a<t.length;a++)e=Math.min(e,t[a].column),n=Math.min(n,t[a].row),i=Math.max(i,t[a].column),o=Math.max(o,t[a].row);var s=Math.max(i-e,o-n),u=Math.max(0,Math.floor(-Math.log(s)/Math.LN2));return new r((e+i)/2,(n+o)/2,0).zoomTo(u)},n.endsWith=function(t,e){return-1!==t.indexOf(e,t.length-e.length)},n.mapObject=function(t,e,n){var i={};for(var r in t)i[r]=e.call(n||this,t[r],r,t);return i},n.filterObject=function(t,e,n){var i={};for(var r in t)e.call(n||this,t[r],r,t)&&(i[r]=t[r]);return i},n.deepEqual=t("../style-spec/util/deep_equal"),n.clone=function(t){return Array.isArray(t)?t.map(n.clone):"object"==typeof t&&t?n.mapObject(t,n.clone):t},n.arraysIntersect=function(t,e){for(var n=0;n<t.length;n++)if(e.indexOf(t[n])>=0)return!0;return!1};var a={};n.warnOnce=function(t){a[t]||("undefined"!=typeof console&&console.warn(t),a[t]=!0)},n.isCounterClockwise=function(t,e,n){return(n.y-t.y)*(e.x-t.x)>(e.y-t.y)*(n.x-t.x)},n.calculateSignedArea=function(t){for(var e=0,n=0,i=t.length,r=i-1,o=void 0,a=void 0;n<i;r=n++)e+=((a=t[r]).x-(o=t[n]).x)*(o.y+a.y);return e},n.isClosedPolygon=function(t){if(t.length<4)return!1;var e=t[0],i=t[t.length-1];return!(Math.abs(e.x-i.x)>0||Math.abs(e.y-i.y)>0)&&Math.abs(n.calculateSignedArea(t))>.01},n.sphericalToCartesian=function(t){var e=t[0],n=t[1],i=t[2];return n+=90,n*=Math.PI/180,i*=Math.PI/180,{x:e*Math.cos(n)*Math.sin(i),y:e*Math.sin(n)*Math.sin(i),z:e*Math.cos(i)}},n.parseCacheControl=function(t){var e={};if(t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(t,n,i,r){var o=i||r;return e[n]=!o||o.toLowerCase(),""}),e["max-age"]){var n=parseInt(e["max-age"],10);isNaN(n)?delete e["max-age"]:e["max-age"]=n}return e}},{"../geo/coordinate":61,"../style-spec/util/deep_equal":155,"@mapbox/point-geometry":4,"@mapbox/unitbezier":7}],276:[function(t,e,n){"use strict";var i=function(t,e,n,i){this.type="Feature",this._vectorTileFeature=t,t._z=e,t._x=n,t._y=i,this.properties=t.properties,null!=t.id&&(this.id=t.id)},r={geometry:{}};r.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},r.geometry.set=function(t){this._geometry=t},i.prototype.toJSON=function(){var t={geometry:this.geometry};for(var e in this)"_geometry"!==e&&"_vectorTileFeature"!==e&&(t[e]=this[e]);return t},Object.defineProperties(i.prototype,r),e.exports=i},{}],277:[function(t,e,n){"use strict";var i=t("./script_detection");e.exports=function(t){for(var n="",r=0;r<t.length;r++){var o=t.charCodeAt(r+1)||null,a=t.charCodeAt(r-1)||null;o&&i.charHasRotatedVerticalOrientation(o)&&!e.exports.lookup[t[r+1]]||a&&i.charHasRotatedVerticalOrientation(a)&&!e.exports.lookup[t[r-1]]||!e.exports.lookup[t[r]]?n+=t[r]:n+=e.exports.lookup[t[r]]}return n},e.exports.lookup={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"}},{"./script_detection":269}],278:[function(t,e,n){"use strict";function i(t,e,n){void 0===n&&(n={}),Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),m[t]={klass:e,omit:n.omit||[],shallow:n.shallow||[]}}var r=t("grid-index"),o=t("../style-spec/util/color"),a=t("../style-spec/expression"),s=a.StylePropertyFunction,u=a.StyleExpression,l=a.StyleExpressionWithErrorHandling,c=a.ZoomDependentExpression,p=a.ZoomConstantExpression,h=t("../style-spec/expression/compound_expression").CompoundExpression,f=t("../style-spec/expression/definitions"),d=t("./window").ImageData,m={};for(var y in i("Object",Object),r.serialize=function(t,e){var n=t.toArrayBuffer();return e&&e.push(n),n},r.deserialize=function(t){return new r(t)},i("Grid",r),i("Color",o),i("StylePropertyFunction",s),i("StyleExpression",u,{omit:["_evaluator"]}),i("StyleExpressionWithErrorHandling",l,{omit:["_evaluator"]}),i("ZoomDependentExpression",c),i("ZoomConstantExpression",p),i("CompoundExpression",h,{omit:["_evaluate"]}),f)f[y]._classRegistryKey||i("Expression_"+y,f[y]);e.exports={register:i,serialize:function t(e,n){if(null===e||void 0===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(e instanceof ArrayBuffer)return n&&n.push(e),e;if(ArrayBuffer.isView(e)){var i=e;return n&&n.push(i.buffer),i}if(e instanceof d)return n&&n.push(e.data.buffer),e;if(Array.isArray(e)){for(var r=[],o=0,a=e;o<a.length;o+=1)r.push(t(a[o],n));return r}if("object"==typeof e){var s=e.constructor,u=s._classRegistryKey;if(!u)throw new Error("can't serialize object of unregistered class");var l={};if(s.serialize)l._serialized=s.serialize(e,n);else for(var c in e)if(e.hasOwnProperty(c)&&!(m[u].omit.indexOf(c)>=0)){var p=e[c];l[c]=m[u].shallow.indexOf(c)>=0?p:t(p,n)}return{name:u,properties:l}}throw new Error("can't serialize object of type "+typeof e)},deserialize:function t(e){if(null===e||void 0===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||e instanceof ArrayBuffer||ArrayBuffer.isView(e)||e instanceof d)return e;if(Array.isArray(e))return e.map(function(e){return t(e)});if("object"==typeof e){var n=e.name,i=e.properties;if(!n)throw new Error("can't deserialize object of anonymous class");var r=m[n].klass;if(!r)throw new Error("can't deserialize unregistered class "+n);if(r.deserialize)return r.deserialize(i._serialized);for(var o=Object.create(r.prototype),a=0,s=Object.keys(i);a<s.length;a+=1){var u=s[a];o[u]=m[n].shallow.indexOf(u)>=0?i[u]:t(i[u])}return o}throw new Error("can't deserialize object of type "+typeof e)}}},{"../style-spec/expression":139,"../style-spec/expression/compound_expression":123,"../style-spec/expression/definitions":131,"../style-spec/util/color":153,"./window":254,"grid-index":24}],279:[function(t,e,n){"use strict";var i=t("./web_worker"),r=function(){this.active={}};r.prototype.acquire=function(e){if(!this.workers){var n=t("../").workerCount;for(this.workers=[];this.workers.length<n;)this.workers.push(new i)}return this.active[e]=!0,this.workers.slice()},r.prototype.release=function(t){delete this.active[t],0===Object.keys(this.active).length&&(this.workers.forEach(function(t){t.terminate()}),this.workers=null)},e.exports=r},{"../":73,"./web_worker":253}]},{},[73])(73)},t.exports=r()},NGRF:function(t,e,n){"use strict";e.a=function(t){return null!=t&&"object"==typeof t}},NdV9:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("AP4T"),r=n("fgj+");i.Observable.from=r.a},NePw:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i={e:{}}},Omiv:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n("LMZF"),a=n("cqO5"),s=n("KG7u");n("stdA"),e.IconDirective=function(t){function e(e){var n=t.call(this,{iconUrl:s.TRANSPARENT_PIXEL})||this;return n.markerProvider=e,n.updateEvent=new o.EventEmitter,n.markerProvider.ref.setIcon(n),n}return r(e,t),Object.defineProperty(e.prototype,"className",{get:function(){return this.options.className},set:function(t){this.options.className=t,this.markerProvider.ref.setIcon(this),this.updateEvent.emit({target:this,type:"update"})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"iconUrl",{get:function(){return this.options.iconUrl},set:function(t){this.options.iconUrl=t,this.markerProvider.ref.setIcon(this),this.updateEvent.emit({target:this,type:"update"})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"iconRetinaUrl",{get:function(){return this.options.iconRetinaUrl},set:function(t){this.options.iconRetinaUrl=t,this.markerProvider.ref.setIcon(this),this.updateEvent.emit({target:this,type:"update"})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"iconSize",{get:function(){return this.options.iconSize},set:function(t){this.options.iconSize=t,this.markerProvider.ref.setIcon(this),this.updateEvent.emit({target:this,type:"update"})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"iconAnchor",{get:function(){return this.options.iconAnchor},set:function(t){this.options.iconAnchor=t,this.markerProvider.ref.setIcon(this),this.updateEvent.emit({target:this,type:"update"})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"popupAnchor",{get:function(){return this.options.popupAnchor},set:function(t){this.options.popupAnchor=t,this.markerProvider.ref.setIcon(this),this.updateEvent.emit({target:this,type:"update"})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltipAnchor",{get:function(){return this.options.tooltipAnchor},set:function(t){this.options.tooltipAnchor=t,this.markerProvider.ref.setIcon(this),this.updateEvent.emit({target:this,type:"update"})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shadowUrl",{get:function(){return this.options.shadowUrl},set:function(t){this.options.shadowUrl=t,this.markerProvider.ref.setIcon(this),this.updateEvent.emit({target:this,type:"update"})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shadowRetinaUrl",{get:function(){return this.options.shadowRetinaUrl},set:function(t){this.options.shadowRetinaUrl=t,this.markerProvider.ref.setIcon(this),this.updateEvent.emit({target:this,type:"update"})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shadowSize",{get:function(){return this.options.shadowSize},set:function(t){this.options.shadowSize=t,this.markerProvider.ref.setIcon(this),this.updateEvent.emit({target:this,type:"update"})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shadowAnchor",{get:function(){return this.options.shadowAnchor},set:function(t){this.options.shadowAnchor=t,this.markerProvider.ref.setIcon(this),this.updateEvent.emit({target:this,type:"update"})},enumerable:!0,configurable:!0}),e.decorators=[{type:o.Directive,args:[{selector:"yaga-icon"}]}],e.propDecorators={updateEvent:[{type:o.Output,args:["update"]}],className:[{type:o.Input}],iconUrl:[{type:o.Input}],iconRetinaUrl:[{type:o.Input}],iconSize:[{type:o.Input}],iconAnchor:[{type:o.Input}],popupAnchor:[{type:o.Input}],tooltipAnchor:[{type:o.Input}],shadowUrl:[{type:o.Input}],shadowRetinaUrl:[{type:o.Input}],shadowSize:[{type:o.Input}],shadowAnchor:[{type:o.Input}]},e}(a.Icon)},Oryw:function(t,e,n){"use strict";n.d(e,"a",function(){return u});var i=n("6Xbx"),r=n("AP4T"),o=n("8Ut3"),a=n("Ecq+"),s=n("3iOE"),u=function(t){function e(e,n){t.call(this),this.array=e,this.scheduler=n,n||1!==e.length||(this._isScalar=!0,this.value=e[0])}return Object(i.c)(e,t),e.create=function(t,n){return new e(t,n)},e.of=function(){for(var t=[],n=0;n<arguments.length;n++)t[n-0]=arguments[n];var i=t[t.length-1];Object(s.a)(i)?t.pop():i=null;var r=t.length;return r>1?new e(t,i):1===r?new o.a(t[0],i):new a.a(i)},e.dispatch=function(t){var e=t.array,n=t.index,i=t.subscriber;n>=t.count?i.complete():(i.next(e[n]),i.closed||(t.index=n+1,this.schedule(t)))},e.prototype._subscribe=function(t){var n=this.array,i=n.length,r=this.scheduler;if(r)return r.schedule(e.dispatch,0,{array:n,index:0,count:i,subscriber:t});for(var o=0;o<i&&!t.closed;o++)t.next(n[o]);t.complete()},e}(r.Observable)},Qe4K:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.lng2lat=function t(e){if(e.length>0&&"number"==typeof e[0])return[e[1],e[0]];if(e.length&&Array.prototype.isPrototypeOf(e)){for(var n=[],i=0;i<e.length;i+=1)n.push(t(e[i]));return n}}},R1KX:function(t,e,n){"use strict";(function(t,i){var r,o=n("psmC");r="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof t?t:i;var a=Object(o.a)(r);e.a=a}).call(e,n("fRUx"),n("qhgb")(t))},RSzd:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("AP4T"),r=n("5jKg");i.Observable.prototype.switchMap=function(t,e){return Object(r.a)(t,e)(this)}},RbVA:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n("LMZF"),a=n("cqO5"),s=(n("xHJr"),n("Qe4K"));e.RectangleDirective=function(t){function e(e){var n=t.call(this,a.latLngBounds([0,0],[0,0]))||this;return n.displayChange=new o.EventEmitter,n.strokeChange=new o.EventEmitter,n.colorChange=new o.EventEmitter,n.weightChange=new o.EventEmitter,n.opacityChange=new o.EventEmitter,n.lineCapChange=new o.EventEmitter,n.lineJoinChange=new o.EventEmitter,n.dashArrayChange=new o.EventEmitter,n.dashOffsetChange=new o.EventEmitter,n.fillChange=new o.EventEmitter,n.fillColorChange=new o.EventEmitter,n.fillOpacityChange=new o.EventEmitter,n.fillRuleChange=new o.EventEmitter,n.classNameChange=new o.EventEmitter,n.styleChange=new o.EventEmitter,n.latLngsChange=new o.EventEmitter,n.boundsChange=new o.EventEmitter,n.northChange=new o.EventEmitter,n.eastChange=new o.EventEmitter,n.southChange=new o.EventEmitter,n.westChange=new o.EventEmitter,n.geoJSONChange=new o.EventEmitter,n.addEvent=new o.EventEmitter,n.removeEvent=new o.EventEmitter,n.popupopenEvent=new o.EventEmitter,n.popupcloseEvent=new o.EventEmitter,n.tooltipopenEvent=new o.EventEmitter,n.tooltipcloseEvent=new o.EventEmitter,n.clickEvent=new o.EventEmitter,n.dbclickEvent=new o.EventEmitter,n.mousedownEvent=new o.EventEmitter,n.mouseoverEvent=new o.EventEmitter,n.mouseoutEvent=new o.EventEmitter,n.contextmenuEvent=new o.EventEmitter,n.initialized=!1,n.feature=n.feature||{type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[]}},n.feature.properties=n.feature.properties||{},n.on("remove",function(){n.displayChange.emit(!1)}),n.on("add",function(){n.displayChange.emit(!0)}),e.ref.addLayer(n),n.on("add",function(t){n.addEvent.emit(t)}),n.on("remove",function(t){n.removeEvent.emit(t)}),n.on("popupopen",function(t){n.popupopenEvent.emit(t)}),n.on("popupclose",function(t){n.popupcloseEvent.emit(t)}),n.on("tooltipopen",function(t){n.tooltipopenEvent.emit(t)}),n.on("tooltipclose",function(t){n.tooltipcloseEvent.emit(t)}),n.on("click",function(t){n.clickEvent.emit(t)}),n.on("dbclick",function(t){n.dbclickEvent.emit(t)}),n.on("mousedown",function(t){n.mousedownEvent.emit(t)}),n.on("mouseover",function(t){n.mouseoverEvent.emit(t)}),n.on("mouseout",function(t){n.mouseoutEvent.emit(t)}),n.on("contextmenu",function(t){n.contextmenuEvent.emit(t)}),n}return r(e,t),e.prototype.ngAfterContentInit=function(){this.initialized=!0},e.prototype.ngOnDestroy=function(){this.removeFrom(this._map)},e.prototype.setBounds=function(e){return t.prototype.setBounds.call(this,e),this.initialized?(this.boundsChange.emit(this.getBounds()),this.northChange.emit(this.getBounds().getNorth()),this.eastChange.emit(this.getBounds().getEast()),this.southChange.emit(this.getBounds().getSouth()),this.westChange.emit(this.getBounds().getWest()),this):this},Object.defineProperty(e.prototype,"bounds",{get:function(){return this.getBounds()},set:function(t){this.setBounds(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"north",{get:function(){return this.getBounds().getNorth()},set:function(e){var n=this.getBounds();t.prototype.setBounds.call(this,a.latLngBounds([[n.getSouth(),n.getWest()],[e,n.getEast()]])),this.boundsChange.emit(this.bounds),this.northChange.emit(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"east",{get:function(){return this.getBounds().getEast()},set:function(e){var n=this.getBounds();t.prototype.setBounds.call(this,a.latLngBounds([[n.getSouth(),n.getWest()],[n.getNorth(),e]])),this.boundsChange.emit(this.bounds),this.eastChange.emit(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"south",{get:function(){return this.getBounds().getSouth()},set:function(e){var n=this.getBounds();t.prototype.setBounds.call(this,a.latLngBounds([[e,n.getWest()],[n.getNorth(),n.getEast()]])),this.boundsChange.emit(this.bounds),this.southChange.emit(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"west",{get:function(){return this.getBounds().getWest()},set:function(e){var n=this.getBounds();t.prototype.setBounds.call(this,a.latLngBounds([[n.getSouth(),e],[n.getNorth(),n.getEast()]])),this.boundsChange.emit(this.bounds),this.westChange.emit(e)},enumerable:!0,configurable:!0}),e.prototype.setLatLngs=function(e){return t.prototype.setLatLngs.call(this,e),this.latLngsChange.emit(this._latlngs),this.geoJSONChange.emit(this.geoJSON),this},e.prototype.addLatLng=function(e){return t.prototype.addLatLng.call(this,e),this.latLngsChange.emit(this._latlngs),this.geoJSONChange.emit(this.geoJSON),this},Object.defineProperty(e.prototype,"latLngs",{get:function(){return this._latlngs},set:function(t){this.setLatLngs(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"geoJSON",{get:function(){return this.toGeoJSON()},set:function(t){this.feature.properties=t.properties;var e=t.geometry.type;if("Polygon"!==e&&"MultiPolygon"!==e)throw new Error("Unsupported geometry type: "+e);this.setLatLngs(s.lng2lat(t.geometry.coordinates))},enumerable:!0,configurable:!0}),e.prototype.setStyle=function(e){return t.prototype.setStyle.call(this,e),e.hasOwnProperty("stroke")&&this.strokeChange.emit(e.stroke),e.hasOwnProperty("color")&&this.colorChange.emit(e.color),e.hasOwnProperty("weight")&&this.weightChange.emit(e.weight),e.hasOwnProperty("opacity")&&this.opacityChange.emit(e.opacity),e.hasOwnProperty("lineCap")&&this.lineCapChange.emit(e.lineCap),e.hasOwnProperty("lineJoin")&&this.lineJoinChange.emit(e.lineJoin),e.hasOwnProperty("dashArray")&&this.dashArrayChange.emit(e.dashArray),e.hasOwnProperty("dashOffset")&&this.dashOffsetChange.emit(e.dashOffset),e.hasOwnProperty("fill")&&this.fillChange.emit(e.fill),e.hasOwnProperty("fillColor")&&this.fillColorChange.emit(e.fillColor),e.hasOwnProperty("fillOpacity")&&this.fillOpacityChange.emit(e.fillOpacity),e.hasOwnProperty("fillRule")&&this.fillRuleChange.emit(e.fillRule),e.hasOwnProperty("className")&&this.classNameChange.emit(e.className),this.styleChange.emit(e),this},Object.defineProperty(e.prototype,"opacity",{get:function(){return this.options.opacity},set:function(t){this.setStyle({opacity:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stroke",{get:function(){return this.options.stroke},set:function(t){this.setStyle({stroke:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return this.options.color},set:function(t){this.setStyle({color:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"weight",{get:function(){return this.options.weight},set:function(t){this.setStyle({weight:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lineCap",{get:function(){return this.options.lineCap},set:function(t){this.setStyle({lineCap:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lineJoin",{get:function(){return this.options.lineJoin},set:function(t){this.setStyle({lineJoin:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dashArray",{get:function(){return this.options.dashArray},set:function(t){this.setStyle({dashArray:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dashOffset",{get:function(){return this.options.dashOffset},set:function(t){this.setStyle({dashOffset:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fill",{get:function(){return this.options.fill},set:function(t){this.setStyle({fill:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fillColor",{get:function(){return this.options.fillColor},set:function(t){this.setStyle({fillColor:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fillOpacity",{get:function(){return this.options.fillOpacity},set:function(t){this.setStyle({fillOpacity:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fillRule",{get:function(){return this.options.fillRule},set:function(t){this.setStyle({fillRule:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"className",{get:function(){return this.options.className},set:function(t){this.setStyle({className:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return this.options},set:function(t){this.setStyle(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"display",{get:function(){var t;try{t=this.getElement()}catch(t){return!1}return"none"!==t.style.display&&!!t.parentElement},set:function(t){if(this.display!==t){var e;try{e=this.getElement()}catch(t){return}this.displayChange.emit(t),e.style.display=t?"":"none"}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"interactive",{get:function(){return this.options.interactive},set:function(t){var e=this._map;this.options.interactive=t,this.onRemove(e),this.onAdd(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"smoothFactor",{get:function(){return this.options.smoothFactor},set:function(t){this.options.smoothFactor=t,this.redraw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"noClip",{get:function(){return this.options.noClip},set:function(t){this.options.noClip=t,this.redraw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"properties",{get:function(){return this.feature.properties},set:function(t){this.feature.properties=t,this.geoJSONChange.emit(this.geoJSON)},enumerable:!0,configurable:!0}),e.decorators=[{type:o.Directive,args:[{selector:"yaga-rectangle"}]}],e.propDecorators={displayChange:[{type:o.Output}],strokeChange:[{type:o.Output}],colorChange:[{type:o.Output}],weightChange:[{type:o.Output}],opacityChange:[{type:o.Output}],lineCapChange:[{type:o.Output}],lineJoinChange:[{type:o.Output}],dashArrayChange:[{type:o.Output}],dashOffsetChange:[{type:o.Output}],fillChange:[{type:o.Output}],fillColorChange:[{type:o.Output}],fillOpacityChange:[{type:o.Output}],fillRuleChange:[{type:o.Output}],classNameChange:[{type:o.Output}],styleChange:[{type:o.Output}],latLngsChange:[{type:o.Output}],boundsChange:[{type:o.Output}],northChange:[{type:o.Output}],eastChange:[{type:o.Output}],southChange:[{type:o.Output}],westChange:[{type:o.Output}],geoJSONChange:[{type:o.Output}],addEvent:[{type:o.Output,args:["add"]}],removeEvent:[{type:o.Output,args:["remove"]}],popupopenEvent:[{type:o.Output,args:["popupopen"]}],popupcloseEvent:[{type:o.Output,args:["popupclose"]}],tooltipopenEvent:[{type:o.Output,args:["tooltipopen"]}],tooltipcloseEvent:[{type:o.Output,args:["tooltipclose"]}],clickEvent:[{type:o.Output,args:["click"]}],dbclickEvent:[{type:o.Output,args:["dbclick"]}],mousedownEvent:[{type:o.Output,args:["mousedown"]}],mouseoverEvent:[{type:o.Output,args:["mouseover"]}],mouseoutEvent:[{type:o.Output,args:["mouseout"]}],contextmenuEvent:[{type:o.Output,args:["contextmenu"]}],bounds:[{type:o.Input}],north:[{type:o.Input}],east:[{type:o.Input}],south:[{type:o.Input}],west:[{type:o.Input}],latLngs:[{type:o.Input}],geoJSON:[{type:o.Input}],opacity:[{type:o.Input}],stroke:[{type:o.Input}],color:[{type:o.Input}],weight:[{type:o.Input}],lineCap:[{type:o.Input}],lineJoin:[{type:o.Input}],dashArray:[{type:o.Input}],dashOffset:[{type:o.Input}],fill:[{type:o.Input}],fillColor:[{type:o.Input}],fillOpacity:[{type:o.Input}],fillRule:[{type:o.Input}],className:[{type:o.Input}],style:[{type:o.Input}],display:[{type:o.Input}],interactive:[{type:o.Input}],smoothFactor:[{type:o.Input}],noClip:[{type:o.Input}],properties:[{type:o.Input}]},e}(a.Rectangle)},SBUM:function(t,e,n){"use strict";e.invariant=function(t,e,n){if(!t){var i=e;throw n&&(i=-1!==e.indexOf("%s")?e.replace("%s",n):i=e+": "+n),new Error(i)}}},T4gT:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n("LMZF"),a=n("cqO5"),s=n("KG7u"),u=(n("TB0K"),n("nnmj"));e.AttributionControlDirective=function(t){function e(e){var n=t.call(this,{prefix:s.ATTRIBUTION_PREFIX})||this;return n.displayChange=new o.EventEmitter,n.positionChange=new o.EventEmitter,n.prefixChange=new o.EventEmitter,n.attributionsChange=new o.EventEmitter,n.addEvent=new o.EventEmitter,n.removeEvent=new o.EventEmitter,n.clickEvent=new o.EventEmitter,n.dbclickEvent=new o.EventEmitter,n.mousedownEvent=new o.EventEmitter,n.mouseoverEvent=new o.EventEmitter,n.mouseoutEvent=new o.EventEmitter,e.ref.addControl(n),n.getContainer().addEventListener("click",function(t){n.clickEvent.emit(u.enhanceMouseEvent(t,n._map))}),n.getContainer().addEventListener("dbclick",function(t){n.dbclickEvent.emit(u.enhanceMouseEvent(t,n._map))}),n.getContainer().addEventListener("mousedown",function(t){n.mousedownEvent.emit(u.enhanceMouseEvent(t,n._map))}),n.getContainer().addEventListener("mouseover",function(t){n.mouseoverEvent.emit(u.enhanceMouseEvent(t,n._map))}),n.getContainer().addEventListener("mouseout",function(t){n.mouseoutEvent.emit(u.enhanceMouseEvent(t,n._map))}),n}return r(e,t),e.prototype.ngOnDestroy=function(){this._map.removeControl(this)},e.prototype.remove=function(){return t.prototype.remove.call(this),this.displayChange.emit(!1),this.removeEvent.emit({target:this,type:"remove"}),this},e.prototype.addTo=function(e){return t.prototype.addTo.call(this,e),this.displayChange.emit(!0),this.addEvent.emit({target:this,type:"add"}),this},e.prototype.setPosition=function(e){return t.prototype.setPosition.call(this,e),this.positionChange.emit(e),this},Object.defineProperty(e.prototype,"opacity",{get:function(){return parseFloat(this.getContainer().style.opacity)},set:function(t){this.getContainer().style.opacity=t.toString()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"display",{get:function(){return!(!this._map||"none"===this.getContainer().style.display)},set:function(t){this._map&&(this.getContainer().style.display=t?"":"none")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this.getPosition()},set:function(t){this.setPosition(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"zIndex",{get:function(){return parseInt(this.getContainer().style.zIndex,10)},set:function(t){t||(t=0),this.getContainer().style.zIndex=t.toString()},enumerable:!0,configurable:!0}),e.prototype.setPrefix=function(e){return t.prototype.setPrefix.call(this,e),this.prefixChange.emit(e),this},Object.defineProperty(e.prototype,"prefix",{get:function(){return this.options.prefix},set:function(t){this.setPrefix(t)},enumerable:!0,configurable:!0}),e.prototype.addAttribution=function(e){return t.prototype.addAttribution.call(this,e),this.attributionsChange.emit(this.attributions),this},e.prototype.removeAttribution=function(e){return t.prototype.removeAttribution.call(this,e),this.attributionsChange.emit(this.attributions),this},Object.defineProperty(e.prototype,"attributions",{get:function(){for(var t=[],e=0,n=Object.keys(this._attributions);e<n.length;e++){var i=n[e];1===this._attributions[i]&&t.push(i)}return t},set:function(e){this.removeAllAttributions(!0);for(var n=0,i=e;n<i.length;n++)t.prototype.addAttribution.call(this,i[n]);this.attributionsChange.emit(this.attributions)},enumerable:!0,configurable:!0}),e.prototype.removeAllAttributions=function(e){for(var n=0,i=Object.keys(this._attributions);n<i.length;n++)t.prototype.removeAttribution.call(this,i[n]);return e?this:(this.attributionsChange.emit([]),this)},e.decorators=[{type:o.Directive,args:[{selector:"yaga-attribution-control"}]}],e.propDecorators={displayChange:[{type:o.Output}],positionChange:[{type:o.Output}],prefixChange:[{type:o.Output}],attributionsChange:[{type:o.Output}],addEvent:[{type:o.Output,args:["add"]}],removeEvent:[{type:o.Output,args:["remove"]}],clickEvent:[{type:o.Output,args:["click"]}],dbclickEvent:[{type:o.Output,args:["dbclick"]}],mousedownEvent:[{type:o.Output,args:["mousedown"]}],mouseoverEvent:[{type:o.Output,args:["mouseover"]}],mouseoutEvent:[{type:o.Output,args:["mouseout"]}],opacity:[{type:o.Input}],display:[{type:o.Input}],position:[{type:o.Input}],zIndex:[{type:o.Input}],prefix:[{type:o.Input}],attributions:[{type:o.Input}]},e}(a.Control.Attribution)},TB0K:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("LMZF");e.MapProvider=function(){function t(){}return t.decorators=[{type:i.Injectable}],t}()},TO51:function(t,e,n){"use strict";var i=n("6Xbx"),r=n("AP4T"),o=n("E9/g"),a=n("qLnt"),s=n("Upor"),u=function(t){function e(e,n){t.call(this),this.subject=e,this.subscriber=n,this.closed=!1}return Object(i.c)(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},e}(a.a),l=n("V7AE");n.d(e,"b",function(){return c}),n.d(e,"a",function(){return p});var c=function(t){function e(e){t.call(this,e),this.destination=e}return Object(i.c)(e,t),e}(o.a),p=function(t){function e(){t.call(this),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}return Object(i.c)(e,t),e.prototype[l.a]=function(){return new c(this)},e.prototype.lift=function(t){var e=new h(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new s.a;if(!this.isStopped)for(var e=this.observers,n=e.length,i=e.slice(),r=0;r<n;r++)i[r].next(t)},e.prototype.error=function(t){if(this.closed)throw new s.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,n=e.length,i=e.slice(),r=0;r<n;r++)i[r].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new s.a;this.isStopped=!0;for(var t=this.observers,e=t.length,n=t.slice(),i=0;i<e;i++)n[i].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new s.a;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new s.a;return this.hasError?(t.error(this.thrownError),a.a.EMPTY):this.isStopped?(t.complete(),a.a.EMPTY):(this.observers.push(t),new u(this,t))},e.prototype.asObservable=function(){var t=new r.Observable;return t.source=this,t},e.create=function(t,e){return new h(t,e)},e}(r.Observable),h=function(t){function e(e,n){t.call(this),this.destination=e,this.source=n}return Object(i.c)(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):a.a.EMPTY},e}(p)},URbD:function(t,e,n){"use strict";var i=n("6Xbx"),r=n("TO51"),o=n("AP4T"),a=n("E9/g"),s=n("qLnt");function u(){return function(t){return t.lift(new l(t))}}var l=function(){function t(t){this.connectable=t}return t.prototype.call=function(t,e){var n=this.connectable;n._refCount++;var i=new c(t,n),r=e.subscribe(i);return i.closed||(i.connection=n.connect()),r},t}(),c=function(t){function e(e,n){t.call(this,e),this.connectable=n}return Object(i.c)(e,t),e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,e>1)this.connection=null;else{var n=this.connection,i=t._connection;this.connection=null,!i||n&&i!==n||i.unsubscribe()}}else this.connection=null},e}(a.a),p=function(t){function e(e,n){t.call(this),this.source=e,this.subjectFactory=n,this._refCount=0,this._isComplete=!1}return Object(i.c)(e,t),e.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},e.prototype.getSubject=function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject},e.prototype.connect=function(){var t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new s.a).add(this.source.subscribe(new f(this.getSubject(),this))),t.closed?(this._connection=null,t=s.a.EMPTY):this._connection=t),t},e.prototype.refCount=function(){return u()(this)},e}(o.Observable).prototype,h={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:p._subscribe},_isComplete:{value:p._isComplete,writable:!0},getSubject:{value:p.getSubject},connect:{value:p.connect},refCount:{value:p.refCount}},f=function(t){function e(e,n){t.call(this,e),this.connectable=n}return Object(i.c)(e,t),e.prototype._error=function(e){this._unsubscribe(),t.prototype._error.call(this,e)},e.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}},e}(r.b);function d(){return new r.a}e.a=function(){return this,u()((t=d,function(e){var n;n="function"==typeof t?t:function(){return t};var i=Object.create(e,h);return i.source=e,i.subjectFactory=n,i})(this));var t}},Upor:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i=n("6Xbx"),r=function(t){function e(){var e=t.call(this,"object unsubscribed");this.name=e.name="ObjectUnsubscribedError",this.stack=e.stack,this.message=e.message}return Object(i.c)(e,t),e}(Error)},V7AE:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i=n("xIGM").a.Symbol,r="function"==typeof i&&"function"==typeof i.for?i.for("rxSubscriber"):"@@rxSubscriber"},Wi6i:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("AP4T"),r=n("6S6c");i.Observable.prototype.filter=r.a},X3fp:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i=function(t){var e=t.Symbol;if("function"==typeof e)return e.iterator||(e.iterator=e("iterator polyfill")),e.iterator;var n=t.Set;if(n&&"function"==typeof(new n)["@@iterator"])return"@@iterator";var i=t.Map;if(i)for(var r=Object.getOwnPropertyNames(i.prototype),o=0;o<r.length;++o){var a=r[o];if("entries"!==a&&"size"!==a&&i.prototype[a]===i.prototype.entries)return a}return"@@iterator"}(n("xIGM").a)},YVoR:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("LMZF");n("iWCm"),n("H6Ze"),e.OverlayLayerDirective=function(){function t(t,e,n){this.layer=t,this.name=e,this.layersControlProvider=n,this.layersControlProvider.ref.addOverlay(this.layer.ref,e)}return t.prototype.ngOnDestroy=function(){this.layersControlProvider.ref.removeLayer(this.layer.ref)},t.decorators=[{type:i.Directive,args:[{selector:"[yaga-overlay-layer]"}]}],t}()},YuZA:function(t,e){function n(t){return Promise.resolve().then(function(){throw new Error("Cannot find module '"+t+"'.")})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="YuZA"},ZueS:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n("LMZF"),a=n("cqO5"),s=(n("xHJr"),n("iWCm")),u=n("Qe4K");e.CircleMarkerDirective=function(t){function e(e,n){var i=t.call(this,[0,0])||this;return i.displayChange=new o.EventEmitter,i.strokeChange=new o.EventEmitter,i.colorChange=new o.EventEmitter,i.weightChange=new o.EventEmitter,i.opacityChange=new o.EventEmitter,i.lineCapChange=new o.EventEmitter,i.lineJoinChange=new o.EventEmitter,i.dashArrayChange=new o.EventEmitter,i.dashOffsetChange=new o.EventEmitter,i.fillChange=new o.EventEmitter,i.fillColorChange=new o.EventEmitter,i.fillOpacityChange=new o.EventEmitter,i.fillRuleChange=new o.EventEmitter,i.classNameChange=new o.EventEmitter,i.styleChange=new o.EventEmitter,i.positionChange=new o.EventEmitter,i.latChange=new o.EventEmitter,i.lngChange=new o.EventEmitter,i.radiusChange=new o.EventEmitter,i.geoJSONChange=new o.EventEmitter,i.addEvent=new o.EventEmitter,i.removeEvent=new o.EventEmitter,i.popupopenEvent=new o.EventEmitter,i.popupcloseEvent=new o.EventEmitter,i.tooltipopenEvent=new o.EventEmitter,i.tooltipcloseEvent=new o.EventEmitter,i.clickEvent=new o.EventEmitter,i.dbclickEvent=new o.EventEmitter,i.mousedownEvent=new o.EventEmitter,i.mouseoverEvent=new o.EventEmitter,i.mouseoutEvent=new o.EventEmitter,i.contextmenuEvent=new o.EventEmitter,i.initialized=!1,n.ref=i,i.feature=i.feature||{type:"Feature",properties:{},geometry:{type:"Point",coordinates:[]}},i.feature.properties=i.feature.properties||{},i.on("remove",function(){i.displayChange.emit(!1)}),i.on("add",function(){i.displayChange.emit(!0)}),e.ref.addLayer(i),i.on("add",function(t){i.addEvent.emit(t)}),i.on("remove",function(t){i.removeEvent.emit(t)}),i.on("popupopen",function(t){i.popupopenEvent.emit(t)}),i.on("popupclose",function(t){i.popupcloseEvent.emit(t)}),i.on("tooltipopen",function(t){i.tooltipopenEvent.emit(t)}),i.on("tooltipclose",function(t){i.tooltipcloseEvent.emit(t)}),i.on("click",function(t){i.clickEvent.emit(t)}),i.on("dbclick",function(t){i.dbclickEvent.emit(t)}),i.on("mousedown",function(t){i.mousedownEvent.emit(t)}),i.on("mouseover",function(t){i.mouseoverEvent.emit(t)}),i.on("mouseout",function(t){i.mouseoutEvent.emit(t)}),i.on("contextmenu",function(t){i.contextmenuEvent.emit(t)}),i}return r(e,t),e.prototype.ngAfterContentInit=function(){this.initialized=!0},e.prototype.ngOnDestroy=function(){this.removeFrom(this._map)},e.prototype.setLatLng=function(e){return t.prototype.setLatLng.call(this,e),this.initialized?(this.positionChange.emit(this._latlng),this.latChange.emit(this._latlng.lat),this.lngChange.emit(this._latlng.lng),this.geoJSONChange.emit(this.geoJSON),this):this},Object.defineProperty(e.prototype,"position",{get:function(){return this._latlng},set:function(t){this.setLatLng(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lat",{get:function(){return this._latlng.lat},set:function(t){this.setLatLng([t,this.lng])},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lng",{get:function(){return this._latlng.lng},set:function(t){this.setLatLng([this.lat,t])},enumerable:!0,configurable:!0}),e.prototype.setRadius=function(e){return t.prototype.setRadius.call(this,e),this.radiusChange.emit(e),this},Object.defineProperty(e.prototype,"radius",{get:function(){return this.getRadius()},set:function(t){this.setRadius(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"geoJSON",{get:function(){return this.toGeoJSON()},set:function(t){this.feature.properties=t.properties;var e=t.geometry.type;if("Point"!==e)throw new Error("Unsupported geometry type: "+e);this.setLatLng(u.lng2lat(t.geometry.coordinates))},enumerable:!0,configurable:!0}),e.prototype.setStyle=function(e){return t.prototype.setStyle.call(this,e),e.hasOwnProperty("stroke")&&this.strokeChange.emit(e.stroke),e.hasOwnProperty("color")&&this.colorChange.emit(e.color),e.hasOwnProperty("weight")&&this.weightChange.emit(e.weight),e.hasOwnProperty("opacity")&&this.opacityChange.emit(e.opacity),e.hasOwnProperty("lineCap")&&this.lineCapChange.emit(e.lineCap),e.hasOwnProperty("lineJoin")&&this.lineJoinChange.emit(e.lineJoin),e.hasOwnProperty("dashArray")&&this.dashArrayChange.emit(e.dashArray),e.hasOwnProperty("dashOffset")&&this.dashOffsetChange.emit(e.dashOffset),e.hasOwnProperty("fill")&&this.fillChange.emit(e.fill),e.hasOwnProperty("fillColor")&&this.fillColorChange.emit(e.fillColor),e.hasOwnProperty("fillOpacity")&&this.fillOpacityChange.emit(e.fillOpacity),e.hasOwnProperty("fillRule")&&this.fillRuleChange.emit(e.fillRule),e.hasOwnProperty("className")&&this.classNameChange.emit(e.className),this.styleChange.emit(e),this},Object.defineProperty(e.prototype,"opacity",{get:function(){return this.options.opacity},set:function(t){this.setStyle({opacity:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stroke",{get:function(){return this.options.stroke},set:function(t){this.setStyle({stroke:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return this.options.color},set:function(t){this.setStyle({color:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"weight",{get:function(){return this.options.weight},set:function(t){this.setStyle({weight:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lineCap",{get:function(){return this.options.lineCap},set:function(t){this.setStyle({lineCap:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lineJoin",{get:function(){return this.options.lineJoin},set:function(t){this.setStyle({lineJoin:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dashArray",{get:function(){return this.options.dashArray},set:function(t){this.setStyle({dashArray:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dashOffset",{get:function(){return this.options.dashOffset},set:function(t){this.setStyle({dashOffset:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fill",{get:function(){return this.options.fill},set:function(t){this.setStyle({fill:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fillColor",{get:function(){return this.options.fillColor},set:function(t){this.setStyle({fillColor:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fillOpacity",{get:function(){return this.options.fillOpacity},set:function(t){this.setStyle({fillOpacity:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fillRule",{get:function(){return this.options.fillRule},set:function(t){this.setStyle({fillRule:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"className",{get:function(){return this.options.className},set:function(t){this.setStyle({className:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return this.options},set:function(t){this.setStyle(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"display",{get:function(){var t;try{t=this.getElement()}catch(t){return!1}return"none"!==t.style.display&&!!t.parentElement},set:function(t){if(this.display!==t){var e;try{e=this.getElement()}catch(t){return}this.displayChange.emit(t),e.style.display=t?"":"none"}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"interactive",{get:function(){return this.options.interactive},set:function(t){var e=this._map;this.options.interactive=t,this.onRemove(e),this.onAdd(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"properties",{get:function(){return this.feature.properties},set:function(t){this.feature.properties=t,this.geoJSONChange.emit(this.geoJSON)},enumerable:!0,configurable:!0}),e.decorators=[{type:o.Directive,args:[{providers:[s.LayerProvider],selector:"yaga-circle-marker"}]}],e.propDecorators={displayChange:[{type:o.Output}],strokeChange:[{type:o.Output}],colorChange:[{type:o.Output}],weightChange:[{type:o.Output}],opacityChange:[{type:o.Output}],lineCapChange:[{type:o.Output}],lineJoinChange:[{type:o.Output}],dashArrayChange:[{type:o.Output}],dashOffsetChange:[{type:o.Output}],fillChange:[{type:o.Output}],fillColorChange:[{type:o.Output}],fillOpacityChange:[{type:o.Output}],fillRuleChange:[{type:o.Output}],classNameChange:[{type:o.Output}],styleChange:[{type:o.Output}],positionChange:[{type:o.Output}],latChange:[{type:o.Output}],lngChange:[{type:o.Output}],radiusChange:[{type:o.Output}],geoJSONChange:[{type:o.Output}],addEvent:[{type:o.Output,args:["add"]}],removeEvent:[{type:o.Output,args:["remove"]}],popupopenEvent:[{type:o.Output,args:["popupopen"]}],popupcloseEvent:[{type:o.Output,args:["popupclose"]}],tooltipopenEvent:[{type:o.Output,args:["tooltipopen"]}],tooltipcloseEvent:[{type:o.Output,args:["tooltipclose"]}],clickEvent:[{type:o.Output,args:["click"]}],dbclickEvent:[{type:o.Output,args:["dbclick"]}],mousedownEvent:[{type:o.Output,args:["mousedown"]}],mouseoverEvent:[{type:o.Output,args:["mouseover"]}],mouseoutEvent:[{type:o.Output,args:["mouseout"]}],contextmenuEvent:[{type:o.Output,args:["contextmenu"]}],position:[{type:o.Input}],lat:[{type:o.Input}],lng:[{type:o.Input}],radius:[{type:o.Input}],geoJSON:[{type:o.Input}],opacity:[{type:o.Input}],stroke:[{type:o.Input}],color:[{type:o.Input}],weight:[{type:o.Input}],lineCap:[{type:o.Input}],lineJoin:[{type:o.Input}],dashArray:[{type:o.Input}],dashOffset:[{type:o.Input}],fill:[{type:o.Input}],fillColor:[{type:o.Input}],fillOpacity:[{type:o.Input}],fillRule:[{type:o.Input}],className:[{type:o.Input}],style:[{type:o.Input}],display:[{type:o.Input}],interactive:[{type:o.Input}],properties:[{type:o.Input}]},e}(a.CircleMarker)},bywS:function(t,e,n){"use strict";var i=n("wP3s");function r(t){return t}e.a=function(t){return void 0===t&&(t=Number.POSITIVE_INFINITY),Object(i.a)(r,null,t)}},cDNt:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("LMZF"),r=n("6KUg"),o="EDIT_FILTER_TEXT",a="SELECT_FOUNTAIN",s="SELECT_FOUNTAIN_SUCCESS",u="DESELECT_FOUNTAIN",l="SHOW_LIST",c=n("hZMJ"),p={filterText:"",filterCategory:[],showList:!1,city:"zurich",mode:"map",fountainId:"",fountainSelected:{type:"Feature",geometry:{type:"Point",coordinates:[0,0]},properties:{nummer:0,bezeichnung:"default fountain"}},lang:"en"};function h(t,e){switch(e.type){case o:return Object(c.tassign)(t,{filterText:e.text});case a:return Object(c.tassign)(t,{fountainId:e.fountainId,showList:!1});case s:return Object(c.tassign)(t,{fountainSelected:e.payload,mode:"details"});case u:return Object(c.tassign)(t,{mode:"map"});case l:return Object(c.tassign)(t,{showList:!0});default:return t}}var f=function(){return function(t,e){var n=Object(i.isDevMode)()?[e.enhancer()]:[];t.configureStore(h,p,[],n)}}(),d=n("6Xbx"),m=function(){function t(t,e){this.title="app",this.mobileQuery=e.matchMedia("(max-width: 1000px)"),this._mobileQueryListener=function(){return t.detectChanges()},this.mobileQuery.addListener(this._mobileQueryListener)}return t.prototype.ngOnInit=function(){var t=this;this.showList.subscribe(function(e){e?t.listDrawer.open():t.listDrawer.close()})},t.prototype.ngOnDestroy=function(){this.mobileQuery.removeListener(this._mobileQueryListener)},Object(d.b)([Object(r.select)(),Object(d.d)("design:type",Object)],t.prototype,"mode",void 0),Object(d.b)([Object(r.select)(),Object(d.d)("design:type",Object)],t.prototype,"showList",void 0),t}(),y=function(){},g=["en",[["a","p"],["AM","PM"]],[["AM","PM"],,],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",,"{1} 'at' {0}"],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"$","US Dollar",function(t){var e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}],v={},_=function(){var t={Zero:0,One:1,Two:2,Few:3,Many:4,Other:5};return t[t.Zero]="Zero",t[t.One]="One",t[t.Two]="Two",t[t.Few]="Few",t[t.Many]="Many",t[t.Other]="Other",t}(),b=new i.InjectionToken("UseV4Plurals"),x=function(){},w=function(t){function e(e,n){var i=t.call(this)||this;return i.locale=e,i.deprecatedPluralFn=n,i}return Object(d.c)(e,t),e.prototype.getPluralCategory=function(t,e){switch(this.deprecatedPluralFn?this.deprecatedPluralFn(e||this.locale,t):function(t){return function(t){var e=t.toLowerCase().replace(/_/g,"-"),n=v[e];if(n)return n;var i=e.split("-")[0];if(n=v[i])return n;if("en"===i)return g;throw new Error('Missing locale data for the locale "'+t+'".')}(t)[17]}(e||this.locale)(t)){case _.Zero:return"zero";case _.One:return"one";case _.Two:return"two";case _.Few:return"few";case _.Many:return"many";default:return"other"}},e}(x);function E(t,e){e=encodeURIComponent(e);for(var n=0,i=t.split(";");n<i.length;n++){var r=i[n],o=r.indexOf("="),a=-1==o?[r,""]:[r.slice(0,o),r.slice(o+1)],s=a[1];if(a[0].trim()===e)return decodeURIComponent(s)}return null}var C=function(){function t(t,e,n,i){this._iterableDiffers=t,this._keyValueDiffers=e,this._ngEl=n,this._renderer=i,this._initialClasses=[]}return Object.defineProperty(t.prototype,"klass",{set:function(t){this._applyInitialClasses(!0),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyInitialClasses(!1),this._applyClasses(this._rawClass,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngClass",{set:function(t){this._cleanupClasses(this._rawClass),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(Object(i["\u0275isListLikeIterable"])(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())},enumerable:!0,configurable:!0}),t.prototype.ngDoCheck=function(){if(this._iterableDiffer){var t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){var e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}},t.prototype._cleanupClasses=function(t){this._applyClasses(t,!0),this._applyInitialClasses(!1)},t.prototype._applyKeyValueChanges=function(t){var e=this;t.forEachAddedItem(function(t){return e._toggleClass(t.key,t.currentValue)}),t.forEachChangedItem(function(t){return e._toggleClass(t.key,t.currentValue)}),t.forEachRemovedItem(function(t){t.previousValue&&e._toggleClass(t.key,!1)})},t.prototype._applyIterableChanges=function(t){var e=this;t.forEachAddedItem(function(t){if("string"!=typeof t.item)throw new Error("NgClass can only toggle CSS classes expressed as strings, got "+Object(i["\u0275stringify"])(t.item));e._toggleClass(t.item,!0)}),t.forEachRemovedItem(function(t){return e._toggleClass(t.item,!1)})},t.prototype._applyInitialClasses=function(t){var e=this;this._initialClasses.forEach(function(n){return e._toggleClass(n,!t)})},t.prototype._applyClasses=function(t,e){var n=this;t&&(Array.isArray(t)||t instanceof Set?t.forEach(function(t){return n._toggleClass(t,!e)}):Object.keys(t).forEach(function(i){null!=t[i]&&n._toggleClass(i,!e)}))},t.prototype._toggleClass=function(t,e){var n=this;(t=t.trim())&&t.split(/\s+/g).forEach(function(t){e?n._renderer.addClass(n._ngEl.nativeElement,t):n._renderer.removeClass(n._ngEl.nativeElement,t)})},t}(),O=function(){function t(t,e,n,i){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=i}return Object.defineProperty(t.prototype,"first",{get:function(){return 0===this.index},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"last",{get:function(){return this.index===this.count-1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"even",{get:function(){return this.index%2==0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"odd",{get:function(){return!this.even},enumerable:!0,configurable:!0}),t}(),P=function(){function t(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._differ=null}return Object.defineProperty(t.prototype,"ngForTrackBy",{get:function(){return this._trackByFn},set:function(t){Object(i.isDevMode)()&&null!=t&&"function"!=typeof t&&console&&console.warn&&console.warn("trackBy must be a function, but received "+JSON.stringify(t)+". See https://angular.io/docs/ts/latest/api/common/index/NgFor-directive.html#!#change-propagation for more information."),this._trackByFn=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngForTemplate",{set:function(t){t&&(this._template=t)},enumerable:!0,configurable:!0}),t.prototype.ngOnChanges=function(t){if("ngForOf"in t){var e=t.ngForOf.currentValue;if(!this._differ&&e)try{this._differ=this._differs.find(e).create(this.ngForTrackBy)}catch(t){throw new Error("Cannot find a differ supporting object '"+e+"' of type '"+((n=e).name||typeof n)+"'. NgFor only supports binding to Iterables such as Arrays.")}}var n},t.prototype.ngDoCheck=function(){if(this._differ){var t=this._differ.diff(this.ngForOf);t&&this._applyChanges(t)}},t.prototype._applyChanges=function(t){var e=this,n=[];t.forEachOperation(function(t,i,r){if(null==t.previousIndex){var o=e._viewContainer.createEmbeddedView(e._template,new O(null,e.ngForOf,-1,-1),r),a=new S(t,o);n.push(a)}else null==r?e._viewContainer.remove(i):(o=e._viewContainer.get(i),e._viewContainer.move(o,r),a=new S(t,o),n.push(a))});for(var i=0;i<n.length;i++)this._perViewChange(n[i].view,n[i].record);i=0;for(var r=this._viewContainer.length;i<r;i++){var o=this._viewContainer.get(i);o.context.index=i,o.context.count=r}t.forEachIdentityChange(function(t){e._viewContainer.get(t.currentIndex).context.$implicit=t.item})},t.prototype._perViewChange=function(t,e){t.context.$implicit=e.item},t}(),S=function(t,e){this.record=t,this.view=e},T=function(){function t(t,e){this._viewContainer=t,this._context=new k,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}return Object.defineProperty(t.prototype,"ngIf",{set:function(t){this._context.$implicit=this._context.ngIf=t,this._updateView()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngIfThen",{set:function(t){this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngIfElse",{set:function(t){this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()},enumerable:!0,configurable:!0}),t.prototype._updateView=function(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))},t}(),k=function(){this.$implicit=null,this.ngIf=null},A=function(){function t(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}return t.prototype.create=function(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)},t.prototype.destroy=function(){this._created=!1,this._viewContainerRef.clear()},t.prototype.enforceState=function(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()},t}(),I=function(){function t(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}return Object.defineProperty(t.prototype,"ngSwitch",{set:function(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)},enumerable:!0,configurable:!0}),t.prototype._addCase=function(){return this._caseCount++},t.prototype._addDefault=function(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)},t.prototype._matchCase=function(t){var e=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||e,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),e},t.prototype._updateDefaultCases=function(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(var e=0;e<this._defaultViews.length;e++)this._defaultViews[e].enforceState(t)}},t}(),L=function(){function t(t,e,n){this.ngSwitch=n,n._addCase(),this._view=new A(t,e)}return t.prototype.ngDoCheck=function(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))},t}(),M=function(){function t(){}return t.prototype.createSubscription=function(t,e){return t.subscribe({next:e,error:function(t){throw t}})},t.prototype.dispose=function(t){t.unsubscribe()},t.prototype.onDestroy=function(t){t.unsubscribe()},t}(),z=new(function(){function t(){}return t.prototype.createSubscription=function(t,e){return t.then(e,function(t){throw t})},t.prototype.dispose=function(t){},t.prototype.onDestroy=function(t){},t}()),D=new M,R=function(){function t(t){this._ref=t,this._latestValue=null,this._latestReturnedValue=null,this._subscription=null,this._obj=null,this._strategy=null}return t.prototype.ngOnDestroy=function(){this._subscription&&this._dispose()},t.prototype.transform=function(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue===this._latestReturnedValue?this._latestReturnedValue:(this._latestReturnedValue=this._latestValue,i.WrappedValue.wrap(this._latestValue)):(t&&this._subscribe(t),this._latestReturnedValue=this._latestValue,this._latestValue)},t.prototype._subscribe=function(t){var e=this;this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,function(n){return e._updateLatestValue(t,n)})},t.prototype._selectStrategy=function(e){if(Object(i["\u0275isPromise"])(e))return z;if(Object(i["\u0275isObservable"])(e))return D;throw n=t,Error("InvalidPipeArgument: '"+e+"' for pipe '"+Object(i["\u0275stringify"])(n)+"'");var n},t.prototype._dispose=function(){this._strategy.dispose(this._subscription),this._latestValue=null,this._latestReturnedValue=null,this._subscription=null,this._obj=null},t.prototype._updateLatestValue=function(t,e){t===this._obj&&(this._latestValue=e,this._ref.markForCheck())},t}(),j=function(){},N=new i.InjectionToken("DocumentToken"),B=new i.InjectionToken("cdk-dir-doc"),F=function(){return function(t){this.value="ltr",this.change=new i.EventEmitter,t&&(this.value=(t.body?t.body.dir:null)||(t.documentElement?t.documentElement.dir:null)||"ltr")}}(),V=function(){};function Z(t){return null!=t&&""+t!="false"}var U=n("TO51"),q=n("AP4T"),H=null;function G(){return H}var W,K={class:"className",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"},X={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},J={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"};i["\u0275global"].Node&&(W=i["\u0275global"].Node.prototype.contains||function(t){return!!(16&this.compareDocumentPosition(t))});var Y,Q=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(d.c)(e,t),e.prototype.parse=function(t){throw new Error("parse not implemented")},e.makeCurrent=function(){var t;t=new e,H||(H=t)},e.prototype.hasProperty=function(t,e){return e in t},e.prototype.setProperty=function(t,e,n){t[e]=n},e.prototype.getProperty=function(t,e){return t[e]},e.prototype.invoke=function(t,e,n){var i;(i=t)[e].apply(i,n)},e.prototype.logError=function(t){window.console&&(console.error?console.error(t):console.log(t))},e.prototype.log=function(t){window.console&&window.console.log&&window.console.log(t)},e.prototype.logGroup=function(t){window.console&&window.console.group&&window.console.group(t)},e.prototype.logGroupEnd=function(){window.console&&window.console.groupEnd&&window.console.groupEnd()},Object.defineProperty(e.prototype,"attrToPropMap",{get:function(){return K},enumerable:!0,configurable:!0}),e.prototype.contains=function(t,e){return W.call(t,e)},e.prototype.querySelector=function(t,e){return t.querySelector(e)},e.prototype.querySelectorAll=function(t,e){return t.querySelectorAll(e)},e.prototype.on=function(t,e,n){t.addEventListener(e,n,!1)},e.prototype.onAndCancel=function(t,e,n){return t.addEventListener(e,n,!1),function(){t.removeEventListener(e,n,!1)}},e.prototype.dispatchEvent=function(t,e){t.dispatchEvent(e)},e.prototype.createMouseEvent=function(t){var e=this.getDefaultDocument().createEvent("MouseEvent");return e.initEvent(t,!0,!0),e},e.prototype.createEvent=function(t){var e=this.getDefaultDocument().createEvent("Event");return e.initEvent(t,!0,!0),e},e.prototype.preventDefault=function(t){t.preventDefault(),t.returnValue=!1},e.prototype.isPrevented=function(t){return t.defaultPrevented||null!=t.returnValue&&!t.returnValue},e.prototype.getInnerHTML=function(t){return t.innerHTML},e.prototype.getTemplateContent=function(t){return"content"in t&&this.isTemplateElement(t)?t.content:null},e.prototype.getOuterHTML=function(t){return t.outerHTML},e.prototype.nodeName=function(t){return t.nodeName},e.prototype.nodeValue=function(t){return t.nodeValue},e.prototype.type=function(t){return t.type},e.prototype.content=function(t){return this.hasProperty(t,"content")?t.content:t},e.prototype.firstChild=function(t){return t.firstChild},e.prototype.nextSibling=function(t){return t.nextSibling},e.prototype.parentElement=function(t){return t.parentNode},e.prototype.childNodes=function(t){return t.childNodes},e.prototype.childNodesAsList=function(t){for(var e=t.childNodes,n=new Array(e.length),i=0;i<e.length;i++)n[i]=e[i];return n},e.prototype.clearNodes=function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},e.prototype.appendChild=function(t,e){t.appendChild(e)},e.prototype.removeChild=function(t,e){t.removeChild(e)},e.prototype.replaceChild=function(t,e,n){t.replaceChild(e,n)},e.prototype.remove=function(t){return t.parentNode&&t.parentNode.removeChild(t),t},e.prototype.insertBefore=function(t,e,n){t.insertBefore(n,e)},e.prototype.insertAllBefore=function(t,e,n){n.forEach(function(n){return t.insertBefore(n,e)})},e.prototype.insertAfter=function(t,e,n){t.insertBefore(n,e.nextSibling)},e.prototype.setInnerHTML=function(t,e){t.innerHTML=e},e.prototype.getText=function(t){return t.textContent},e.prototype.setText=function(t,e){t.textContent=e},e.prototype.getValue=function(t){return t.value},e.prototype.setValue=function(t,e){t.value=e},e.prototype.getChecked=function(t){return t.checked},e.prototype.setChecked=function(t,e){t.checked=e},e.prototype.createComment=function(t){return this.getDefaultDocument().createComment(t)},e.prototype.createTemplate=function(t){var e=this.getDefaultDocument().createElement("template");return e.innerHTML=t,e},e.prototype.createElement=function(t,e){return(e=e||this.getDefaultDocument()).createElement(t)},e.prototype.createElementNS=function(t,e,n){return(n=n||this.getDefaultDocument()).createElementNS(t,e)},e.prototype.createTextNode=function(t,e){return(e=e||this.getDefaultDocument()).createTextNode(t)},e.prototype.createScriptTag=function(t,e,n){var i=(n=n||this.getDefaultDocument()).createElement("SCRIPT");return i.setAttribute(t,e),i},e.prototype.createStyleElement=function(t,e){var n=(e=e||this.getDefaultDocument()).createElement("style");return this.appendChild(n,this.createTextNode(t,e)),n},e.prototype.createShadowRoot=function(t){return t.createShadowRoot()},e.prototype.getShadowRoot=function(t){return t.shadowRoot},e.prototype.getHost=function(t){return t.host},e.prototype.clone=function(t){return t.cloneNode(!0)},e.prototype.getElementsByClassName=function(t,e){return t.getElementsByClassName(e)},e.prototype.getElementsByTagName=function(t,e){return t.getElementsByTagName(e)},e.prototype.classList=function(t){return Array.prototype.slice.call(t.classList,0)},e.prototype.addClass=function(t,e){t.classList.add(e)},e.prototype.removeClass=function(t,e){t.classList.remove(e)},e.prototype.hasClass=function(t,e){return t.classList.contains(e)},e.prototype.setStyle=function(t,e,n){t.style[e]=n},e.prototype.removeStyle=function(t,e){t.style[e]=""},e.prototype.getStyle=function(t,e){return t.style[e]},e.prototype.hasStyle=function(t,e,n){var i=this.getStyle(t,e)||"";return n?i==n:i.length>0},e.prototype.tagName=function(t){return t.tagName},e.prototype.attributeMap=function(t){for(var e=new Map,n=t.attributes,i=0;i<n.length;i++){var r=n.item(i);e.set(r.name,r.value)}return e},e.prototype.hasAttribute=function(t,e){return t.hasAttribute(e)},e.prototype.hasAttributeNS=function(t,e,n){return t.hasAttributeNS(e,n)},e.prototype.getAttribute=function(t,e){return t.getAttribute(e)},e.prototype.getAttributeNS=function(t,e,n){return t.getAttributeNS(e,n)},e.prototype.setAttribute=function(t,e,n){t.setAttribute(e,n)},e.prototype.setAttributeNS=function(t,e,n,i){t.setAttributeNS(e,n,i)},e.prototype.removeAttribute=function(t,e){t.removeAttribute(e)},e.prototype.removeAttributeNS=function(t,e,n){t.removeAttributeNS(e,n)},e.prototype.templateAwareRoot=function(t){return this.isTemplateElement(t)?this.content(t):t},e.prototype.createHtmlDocument=function(){return document.implementation.createHTMLDocument("fakeTitle")},e.prototype.getDefaultDocument=function(){return document},e.prototype.getBoundingClientRect=function(t){try{return t.getBoundingClientRect()}catch(t){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}},e.prototype.getTitle=function(t){return t.title},e.prototype.setTitle=function(t,e){t.title=e||""},e.prototype.elementMatches=function(t,e){return!!this.isElementNode(t)&&(t.matches&&t.matches(e)||t.msMatchesSelector&&t.msMatchesSelector(e)||t.webkitMatchesSelector&&t.webkitMatchesSelector(e))},e.prototype.isTemplateElement=function(t){return this.isElementNode(t)&&"TEMPLATE"===t.nodeName},e.prototype.isTextNode=function(t){return t.nodeType===Node.TEXT_NODE},e.prototype.isCommentNode=function(t){return t.nodeType===Node.COMMENT_NODE},e.prototype.isElementNode=function(t){return t.nodeType===Node.ELEMENT_NODE},e.prototype.hasShadowRoot=function(t){return null!=t.shadowRoot&&t instanceof HTMLElement},e.prototype.isShadowRoot=function(t){return t instanceof DocumentFragment},e.prototype.importIntoDoc=function(t){return document.importNode(this.templateAwareRoot(t),!0)},e.prototype.adoptNode=function(t){return document.adoptNode(t)},e.prototype.getHref=function(t){return t.getAttribute("href")},e.prototype.getEventKey=function(t){var e=t.key;if(null==e){if(null==(e=t.keyIdentifier))return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&J.hasOwnProperty(e)&&(e=J[e]))}return X[e]||e},e.prototype.getGlobalEventTarget=function(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null},e.prototype.getHistory=function(){return window.history},e.prototype.getLocation=function(){return window.location},e.prototype.getBaseHref=function(t){var e,n=$||($=document.querySelector("base"))?$.getAttribute("href"):null;return null==n?null:(e=n,Y||(Y=document.createElement("a")),Y.setAttribute("href",e),"/"===Y.pathname.charAt(0)?Y.pathname:"/"+Y.pathname)},e.prototype.resetBaseElement=function(){$=null},e.prototype.getUserAgent=function(){return window.navigator.userAgent},e.prototype.setData=function(t,e,n){this.setAttribute(t,"data-"+e,n)},e.prototype.getData=function(t,e){return this.getAttribute(t,"data-"+e)},e.prototype.getComputedStyle=function(t){return getComputedStyle(t)},e.prototype.supportsWebAnimation=function(){return"function"==typeof Element.prototype.animate},e.prototype.performanceNow=function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()},e.prototype.supportsCookies=function(){return!0},e.prototype.getCookie=function(t){return E(document.cookie,t)},e.prototype.setCookie=function(t,e){document.cookie=encodeURIComponent(t)+"="+encodeURIComponent(e)},e}(function(t){function e(){var e=t.call(this)||this;e._animationPrefix=null,e._transitionEnd=null;try{var n=e.createElement("div",document);if(null!=e.getStyle(n,"animationName"))e._animationPrefix="";else for(var i=["Webkit","Moz","O","ms"],r=0;r<i.length;r++)if(null!=e.getStyle(n,i[r]+"AnimationName")){e._animationPrefix="-"+i[r].toLowerCase()+"-";break}var o={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};Object.keys(o).forEach(function(t){null!=e.getStyle(n,t)&&(e._transitionEnd=o[t])})}catch(t){e._animationPrefix=null,e._transitionEnd=null}return e}return Object(d.c)(e,t),e.prototype.getDistributedNodes=function(t){return t.getDistributedNodes()},e.prototype.resolveAndSetHref=function(t,e,n){t.href=null==n?e:e+"/../"+n},e.prototype.supportsDOMEvents=function(){return!0},e.prototype.supportsNativeShadowDOM=function(){return"function"==typeof document.body.createShadowRoot},e.prototype.getAnimationPrefix=function(){return this._animationPrefix?this._animationPrefix:""},e.prototype.getTransitionEnd=function(){return this._transitionEnd?this._transitionEnd:""},e.prototype.supportsAnimation=function(){return null!=this._animationPrefix&&null!=this._transitionEnd},e}(function(){function t(){this.resourceLoaderType=null}return Object.defineProperty(t.prototype,"attrToPropMap",{get:function(){return this._attrToPropMap},set:function(t){this._attrToPropMap=t},enumerable:!0,configurable:!0}),t}())),$=null,tt=N;function et(){return!!window.history.pushState}var nt=function(t){function e(e){var n=t.call(this)||this;return n._doc=e,n._init(),n}return Object(d.c)(e,t),e.prototype._init=function(){this.location=G().getLocation(),this._history=G().getHistory()},e.prototype.getBaseHrefFromDOM=function(){return G().getBaseHref(this._doc)},e.prototype.onPopState=function(t){G().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)},e.prototype.onHashChange=function(t){G().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)},Object.defineProperty(e.prototype,"pathname",{get:function(){return this.location.pathname},set:function(t){this.location.pathname=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"search",{get:function(){return this.location.search},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hash",{get:function(){return this.location.hash},enumerable:!0,configurable:!0}),e.prototype.pushState=function(t,e,n){et()?this._history.pushState(t,e,n):this.location.hash=n},e.prototype.replaceState=function(t,e,n){et()?this._history.replaceState(t,e,n):this.location.hash=n},e.prototype.forward=function(){this._history.forward()},e.prototype.back=function(){this._history.back()},e.ctorParameters=function(){return[{type:void 0,decorators:[{type:i.Inject,args:[tt]}]}]},e}(y),it=function(){function t(t){this._doc=t,this._dom=G()}return t.prototype.addTag=function(t,e){return void 0===e&&(e=!1),t?this._getOrCreateElement(t,e):null},t.prototype.addTags=function(t,e){var n=this;return void 0===e&&(e=!1),t?t.reduce(function(t,i){return i&&t.push(n._getOrCreateElement(i,e)),t},[]):[]},t.prototype.getTag=function(t){return t&&this._dom.querySelector(this._doc,"meta["+t+"]")||null},t.prototype.getTags=function(t){if(!t)return[];var e=this._dom.querySelectorAll(this._doc,"meta["+t+"]");return e?[].slice.call(e):[]},t.prototype.updateTag=function(t,e){if(!t)return null;e=e||this._parseSelector(t);var n=this.getTag(e);return n?this._setMetaElementAttributes(t,n):this._getOrCreateElement(t,!0)},t.prototype.removeTag=function(t){this.removeTagElement(this.getTag(t))},t.prototype.removeTagElement=function(t){t&&this._dom.remove(t)},t.prototype._getOrCreateElement=function(t,e){if(void 0===e&&(e=!1),!e){var n=this._parseSelector(t),i=this.getTag(n);if(i&&this._containsAttributes(t,i))return i}var r=this._dom.createElement("meta");this._setMetaElementAttributes(t,r);var o=this._dom.getElementsByTagName(this._doc,"head")[0];return this._dom.appendChild(o,r),r},t.prototype._setMetaElementAttributes=function(t,e){var n=this;return Object.keys(t).forEach(function(i){return n._dom.setAttribute(e,i,t[i])}),e},t.prototype._parseSelector=function(t){var e=t.name?"name":"property";return e+'="'+t[e]+'"'},t.prototype._containsAttributes=function(t,e){var n=this;return Object.keys(t).every(function(i){return n._dom.getAttribute(e,i)===t[i]})},t}(),rt=new i.InjectionToken("TRANSITION_ID"),ot=[{provide:i.APP_INITIALIZER,useFactory:function(t,e,n){return function(){n.get(i.ApplicationInitStatus).donePromise.then(function(){var n=G();Array.prototype.slice.apply(n.querySelectorAll(e,"style[ng-transition]")).filter(function(e){return n.getAttribute(e,"ng-transition")===t}).forEach(function(t){return n.remove(t)})})}},deps:[rt,tt,i.Injector],multi:!0}],at=function(){function t(){}return t.init=function(){Object(i.setTestabilityGetter)(new t)},t.prototype.addToWindow=function(t){i["\u0275global"].getAngularTestability=function(e,n){void 0===n&&(n=!0);var i=t.findTestabilityInTree(e,n);if(null==i)throw new Error("Could not find testability for element.");return i},i["\u0275global"].getAllAngularTestabilities=function(){return t.getAllTestabilities()},i["\u0275global"].getAllAngularRootElements=function(){return t.getAllRootElements()},i["\u0275global"].frameworkStabilizers||(i["\u0275global"].frameworkStabilizers=[]),i["\u0275global"].frameworkStabilizers.push(function(t){var e=i["\u0275global"].getAllAngularTestabilities(),n=e.length,r=!1,o=function(e){r=r||e,0==--n&&t(r)};e.forEach(function(t){t.whenStable(o)})})},t.prototype.findTestabilityInTree=function(t,e,n){if(null==e)return null;var i=t.getTestability(e);return null!=i?i:n?G().isShadowRoot(e)?this.findTestabilityInTree(t,G().getHost(e),!0):this.findTestabilityInTree(t,G().parentElement(e),!0):null},t}(),st=function(){function t(t){this._doc=t}return t.prototype.getTitle=function(){return G().getTitle(this._doc)},t.prototype.setTitle=function(t){G().setTitle(this._doc,t)},t}();function ut(t,e){"undefined"!=typeof COMPILED&&COMPILED||((i["\u0275global"].ng=i["\u0275global"].ng||{})[t]=e)}var lt={ApplicationRef:i.ApplicationRef,NgZone:i.NgZone};function ct(t){return Object(i.getDebugNode)(t)}var pt=new i.InjectionToken("EventManagerPlugins"),ht=function(){function t(t,e){var n=this;this._zone=e,this._eventNameToPlugin=new Map,t.forEach(function(t){return t.manager=n}),this._plugins=t.slice().reverse()}return t.prototype.addEventListener=function(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)},t.prototype.addGlobalEventListener=function(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)},t.prototype.getZone=function(){return this._zone},t.prototype._findPluginFor=function(t){var e=this._eventNameToPlugin.get(t);if(e)return e;for(var n=this._plugins,i=0;i<n.length;i++){var r=n[i];if(r.supports(t))return this._eventNameToPlugin.set(t,r),r}throw new Error("No event manager plugin found for event "+t)},t}(),ft=function(){function t(t){this._doc=t}return t.prototype.addGlobalEventListener=function(t,e,n){var i=G().getGlobalEventTarget(this._doc,t);if(!i)throw new Error("Unsupported event target "+i+" for event "+e);return this.addEventListener(i,e,n)},t}(),dt=function(){function t(){this._stylesSet=new Set}return t.prototype.addStyles=function(t){var e=this,n=new Set;t.forEach(function(t){e._stylesSet.has(t)||(e._stylesSet.add(t),n.add(t))}),this.onStylesAdded(n)},t.prototype.onStylesAdded=function(t){},t.prototype.getAllStyles=function(){return Array.from(this._stylesSet)},t}(),mt=function(t){function e(e){var n=t.call(this)||this;return n._doc=e,n._hostNodes=new Set,n._styleNodes=new Set,n._hostNodes.add(e.head),n}return Object(d.c)(e,t),e.prototype._addStylesToHost=function(t,e){var n=this;t.forEach(function(t){var i=n._doc.createElement("style");i.textContent=t,n._styleNodes.add(e.appendChild(i))})},e.prototype.addHost=function(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)},e.prototype.removeHost=function(t){this._hostNodes.delete(t)},e.prototype.onStylesAdded=function(t){var e=this;this._hostNodes.forEach(function(n){return e._addStylesToHost(t,n)})},e.prototype.ngOnDestroy=function(){this._styleNodes.forEach(function(t){return G().remove(t)})},e}(dt),yt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},gt=/%COMP%/g,vt="_nghost-%COMP%",_t="_ngcontent-%COMP%";function bt(t,e,n){for(var i=0;i<e.length;i++){var r=e[i];Array.isArray(r)?bt(t,r,n):(r=r.replace(gt,t),n.push(r))}return n}function xt(t){return function(e){!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}var wt=function(){function t(t,e){this.eventManager=t,this.sharedStylesHost=e,this.rendererByCompId=new Map,this.defaultRenderer=new Et(t)}return t.prototype.createRenderer=function(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case i.ViewEncapsulation.Emulated:var n=this.rendererByCompId.get(e.id);return n||(n=new St(this.eventManager,this.sharedStylesHost,e),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n;case i.ViewEncapsulation.Native:return new Tt(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){var r=bt(e.id,e.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}},t.prototype.begin=function(){},t.prototype.end=function(){},t}(),Et=function(){function t(t){this.eventManager=t,this.data=Object.create(null)}return t.prototype.destroy=function(){},t.prototype.createElement=function(t,e){return e?document.createElementNS(yt[e],t):document.createElement(t)},t.prototype.createComment=function(t){return document.createComment(t)},t.prototype.createText=function(t){return document.createTextNode(t)},t.prototype.appendChild=function(t,e){t.appendChild(e)},t.prototype.insertBefore=function(t,e,n){t&&t.insertBefore(e,n)},t.prototype.removeChild=function(t,e){t&&t.removeChild(e)},t.prototype.selectRootElement=function(t){var e="string"==typeof t?document.querySelector(t):t;if(!e)throw new Error('The selector "'+t+'" did not match any elements');return e.textContent="",e},t.prototype.parentNode=function(t){return t.parentNode},t.prototype.nextSibling=function(t){return t.nextSibling},t.prototype.setAttribute=function(t,e,n,i){if(i){e=i+":"+e;var r=yt[i];r?t.setAttributeNS(r,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)},t.prototype.removeAttribute=function(t,e,n){if(n){var i=yt[n];i?t.removeAttributeNS(i,e):t.removeAttribute(n+":"+e)}else t.removeAttribute(e)},t.prototype.addClass=function(t,e){t.classList.add(e)},t.prototype.removeClass=function(t,e){t.classList.remove(e)},t.prototype.setStyle=function(t,e,n,r){r&i.RendererStyleFlags2.DashCase?t.style.setProperty(e,n,r&i.RendererStyleFlags2.Important?"important":""):t.style[e]=n},t.prototype.removeStyle=function(t,e,n){n&i.RendererStyleFlags2.DashCase?t.style.removeProperty(e):t.style[e]=""},t.prototype.setProperty=function(t,e,n){Ot(e,"property"),t[e]=n},t.prototype.setValue=function(t,e){t.nodeValue=e},t.prototype.listen=function(t,e,n){return Ot(e,"listener"),"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,xt(n)):this.eventManager.addEventListener(t,e,xt(n))},t}(),Ct="@".charCodeAt(0);function Ot(t,e){if(t.charCodeAt(0)===Ct)throw new Error("Found the synthetic "+e+" "+t+'. Please include either "BrowserAnimationsModule" or "NoopAnimationsModule" in your application.')}var Pt,St=function(t){function e(e,n,i){var r=t.call(this,e)||this;r.component=i;var o=bt(i.id,i.styles,[]);return n.addStyles(o),r.contentAttr=_t.replace(gt,i.id),r.hostAttr=vt.replace(gt,i.id),r}return Object(d.c)(e,t),e.prototype.applyToHost=function(e){t.prototype.setAttribute.call(this,e,this.hostAttr,"")},e.prototype.createElement=function(e,n){var i=t.prototype.createElement.call(this,e,n);return t.prototype.setAttribute.call(this,i,this.contentAttr,""),i},e}(Et),Tt=function(t){function e(e,n,i,r){var o=t.call(this,e)||this;o.sharedStylesHost=n,o.hostEl=i,o.component=r,o.shadowRoot=i.createShadowRoot(),o.sharedStylesHost.addHost(o.shadowRoot);for(var a=bt(r.id,r.styles,[]),s=0;s<a.length;s++){var u=document.createElement("style");u.textContent=a[s],o.shadowRoot.appendChild(u)}return o}return Object(d.c)(e,t),e.prototype.nodeOrShadowRoot=function(t){return t===this.hostEl?this.shadowRoot:t},e.prototype.destroy=function(){this.sharedStylesHost.removeHost(this.shadowRoot)},e.prototype.appendChild=function(e,n){return t.prototype.appendChild.call(this,this.nodeOrShadowRoot(e),n)},e.prototype.insertBefore=function(e,n,i){return t.prototype.insertBefore.call(this,this.nodeOrShadowRoot(e),n,i)},e.prototype.removeChild=function(e,n){return t.prototype.removeChild.call(this,this.nodeOrShadowRoot(e),n)},e.prototype.parentNode=function(e){return this.nodeOrShadowRoot(t.prototype.parentNode.call(this,this.nodeOrShadowRoot(e)))},e}(Et),kt="undefined"!=typeof Zone&&Zone.__symbol__||function(t){return"__zone_symbol__"+t},At=kt("addEventListener"),It=kt("removeEventListener"),Lt={},Mt="__zone_symbol__propagationStopped";"undefined"!=typeof Zone&&Zone[kt("BLACK_LISTED_EVENTS")]&&(Pt={});var zt=function(t){return!!Pt&&Pt.hasOwnProperty(t)},Dt=function(t){var e=Lt[t.type];if(e){var n=this[e];if(n){var i=[t];if(1===n.length)return(a=n[0]).zone!==Zone.current?a.zone.run(a.handler,this,i):a.handler.apply(this,i);for(var r=n.slice(),o=0;o<r.length&&!0!==t[Mt];o++){var a;(a=r[o]).zone!==Zone.current?a.zone.run(a.handler,this,i):a.handler.apply(this,i)}}}},Rt=function(t){function e(e,n){var i=t.call(this,e)||this;return i.ngZone=n,i.patchEvent(),i}return Object(d.c)(e,t),e.prototype.patchEvent=function(){if(Event&&Event.prototype&&!Event.prototype.__zone_symbol__stopImmediatePropagation){var t=Event.prototype.__zone_symbol__stopImmediatePropagation=Event.prototype.stopImmediatePropagation;Event.prototype.stopImmediatePropagation=function(){this&&(this[Mt]=!0),t&&t.apply(this,arguments)}}},e.prototype.supports=function(t){return!0},e.prototype.addEventListener=function(t,e,n){var r=this,o=n;if(!t[At]||i.NgZone.isInAngularZone()&&!zt(e))t.addEventListener(e,o,!1);else{var a=Lt[e];a||(a=Lt[e]=kt("ANGULAR"+e+"FALSE"));var s=t[a],u=s&&s.length>0;s||(s=t[a]=[]);var l=zt(e)?Zone.root:Zone.current;if(0===s.length)s.push({zone:l,handler:o});else{for(var c=!1,p=0;p<s.length;p++)if(s[p].handler===o){c=!0;break}c||s.push({zone:l,handler:o})}u||t[At](e,Dt,!1)}return function(){return r.removeEventListener(t,e,o)}},e.prototype.removeEventListener=function(t,e,n){var i=t[It];if(!i)return t.removeEventListener.apply(t,[e,n,!1]);var r=Lt[e],o=r&&t[r];if(!o)return t.removeEventListener.apply(t,[e,n,!1]);for(var a=!1,s=0;s<o.length;s++)if(o[s].handler===n){a=!0,o.splice(s,1);break}a?0===o.length&&i.apply(t,[e,Dt,!1]):t.removeEventListener.apply(t,[e,n,!1])},e}(ft),jt={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0},Nt=new i.InjectionToken("HammerGestureConfig"),Bt=function(){function t(){this.events=[],this.overrides={}}return t.prototype.buildHammer=function(t){var e=new Hammer(t);for(var n in e.get("pinch").set({enable:!0}),e.get("rotate").set({enable:!0}),this.overrides)e.get(n).set(this.overrides[n]);return e},t}(),Ft=function(t){function e(e,n){var i=t.call(this,e)||this;return i._config=n,i}return Object(d.c)(e,t),e.prototype.supports=function(t){if(!jt.hasOwnProperty(t.toLowerCase())&&!this.isCustomEvent(t))return!1;if(!window.Hammer)throw new Error("Hammer.js is not loaded, can not bind "+t+" event");return!0},e.prototype.addEventListener=function(t,e,n){var i=this,r=this.manager.getZone();return e=e.toLowerCase(),r.runOutsideAngular(function(){var o=i._config.buildHammer(t),a=function(t){r.runGuarded(function(){n(t)})};return o.on(e,a),function(){return o.off(e,a)}})},e.prototype.isCustomEvent=function(t){return this._config.events.indexOf(t)>-1},e}(ft),Vt=["alt","control","meta","shift"],Zt={alt:function(t){return t.altKey},control:function(t){return t.ctrlKey},meta:function(t){return t.metaKey},shift:function(t){return t.shiftKey}},Ut=function(t){function e(e){return t.call(this,e)||this}return Object(d.c)(e,t),e.prototype.supports=function(t){return null!=e.parseEventName(t)},e.prototype.addEventListener=function(t,n,i){var r=e.parseEventName(n),o=e.eventCallback(r.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(function(){return G().onAndCancel(t,r.domEventName,o)})},e.parseEventName=function(t){var n=t.toLowerCase().split("."),i=n.shift();if(0===n.length||"keydown"!==i&&"keyup"!==i)return null;var r=e._normalizeKey(n.pop()),o="";if(Vt.forEach(function(t){var e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=r,0!=n.length||0===r.length)return null;var a={};return a.domEventName=i,a.fullKey=o,a},e.getEventFullKey=function(t){var e="",n=G().getEventKey(t);return" "===(n=n.toLowerCase())?n="space":"."===n&&(n="dot"),Vt.forEach(function(i){i!=n&&(0,Zt[i])(t)&&(e+=i+".")}),e+=n},e.eventCallback=function(t,n,i){return function(r){e.getEventFullKey(r)===t&&i.runGuarded(function(){return n(r)})}},e._normalizeKey=function(t){switch(t){case"esc":return"escape";default:return t}},e}(ft),qt=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,Ht=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Gt(t){return(t=String(t)).match(qt)||t.match(Ht)?t:(Object(i.isDevMode)()&&G().log("WARNING: sanitizing unsafe URL value "+t+" (see http://g.co/ng/security#xss)"),"unsafe:"+t)}var Wt=null,Kt=null;function Xt(t){for(var e={},n=0,i=t.split(",");n<i.length;n++)e[i[n]]=!0;return e}function Jt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n={},i=0,r=t;i<r.length;i++){var o=r[i];for(var a in o)o.hasOwnProperty(a)&&(n[a]=!0)}return n}var Yt=Xt("area,br,col,hr,img,wbr"),Qt=Xt("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),$t=Xt("rp,rt"),te=Jt($t,Qt),ee=Jt(Yt,Jt(Qt,Xt("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Jt($t,Xt("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),te),ne=Xt("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),ie=Xt("srcset"),re=Jt(ne,ie,Xt("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width")),oe=function(){function t(){this.sanitizedSomething=!1,this.buf=[]}return t.prototype.sanitizeChildren=function(t){for(var e=t.firstChild;e;)if(Kt.isElementNode(e)?this.startElement(e):Kt.isTextNode(e)?this.chars(Kt.nodeValue(e)):this.sanitizedSomething=!0,Kt.firstChild(e))e=Kt.firstChild(e);else for(;e;){Kt.isElementNode(e)&&this.endElement(e);var n=ae(e,Kt.nextSibling(e));if(n){e=n;break}e=ae(e,Kt.parentElement(e))}return this.buf.join("")},t.prototype.startElement=function(t){var e=this,n=Kt.nodeName(t).toLowerCase();ee.hasOwnProperty(n)?(this.buf.push("<"),this.buf.push(n),Kt.attributeMap(t).forEach(function(t,n){var i,r=n.toLowerCase();re.hasOwnProperty(r)?(ne[r]&&(t=Gt(t)),ie[r]&&(i=t,t=(i=String(i)).split(",").map(function(t){return Gt(t.trim())}).join(", ")),e.buf.push(" "),e.buf.push(n),e.buf.push('="'),e.buf.push(le(t)),e.buf.push('"')):e.sanitizedSomething=!0}),this.buf.push(">")):this.sanitizedSomething=!0},t.prototype.endElement=function(t){var e=Kt.nodeName(t).toLowerCase();ee.hasOwnProperty(e)&&!Yt.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))},t.prototype.chars=function(t){this.buf.push(le(t))},t}();function ae(t,e){if(e&&Kt.contains(t,e))throw new Error("Failed to sanitize html because the element is clobbered: "+Kt.getOuterHTML(t));return e}var se=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ue=/([^\#-~ |!])/g;function le(t){return t.replace(/&/g,"&amp;").replace(se,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(ue,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function ce(t){Kt.attributeMap(t).forEach(function(e,n){"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||Kt.removeAttribute(t,n)});for(var e=0,n=Kt.childNodesAsList(t);e<n.length;e++){var i=n[e];Kt.isElementNode(i)&&ce(i)}}var pe=new RegExp("^([-,.\"'%_!# a-zA-Z0-9]+|(?:(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|3d)?|(?:rgb|hsl)a?|(?:repeating-)?(?:linear|radial)-gradient|(?:calc|attr))\\([-0-9.%, #a-zA-Z]+\\))$","g"),he=/^url\(([^)]+)\)$/,fe=function(){},de=function(t){function e(e){var n=t.call(this)||this;return n._doc=e,n}return Object(d.c)(e,t),e.prototype.sanitize=function(t,e){if(null==e)return null;switch(t){case i.SecurityContext.NONE:return e;case i.SecurityContext.HTML:return e instanceof ye?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"HTML"),function(t,e){try{var n=function(){if(Wt)return Wt;var t=(Kt=G()).createElement("template");if("content"in t)return t;var e=Kt.createHtmlDocument();if(null==(Wt=Kt.querySelector(e,"body"))){var n=Kt.createElement("html",e);Wt=Kt.createElement("body",e),Kt.appendChild(n,Wt),Kt.appendChild(e,n)}return Wt}(),r=e?String(e):"",o=5,a=r;do{if(0===o)throw new Error("Failed to sanitize html because the input is unstable");o--,Kt.setInnerHTML(n,r=a),t.documentMode&&ce(n),a=Kt.getInnerHTML(n)}while(r!==a);for(var s=new oe,u=s.sanitizeChildren(Kt.getTemplateContent(n)||n),l=Kt.getTemplateContent(n)||n,c=0,p=Kt.childNodesAsList(l);c<p.length;c++)Kt.removeChild(l,p[c]);return Object(i.isDevMode)()&&s.sanitizedSomething&&Kt.log("WARNING: sanitizing HTML stripped some content (see http://g.co/ng/security#xss)."),u}catch(t){throw Wt=null,t}}(this._doc,String(e)));case i.SecurityContext.STYLE:return e instanceof ge?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"Style"),function(t){if(!(t=String(t).trim()))return"";var e=t.match(he);return e&&Gt(e[1])===e[1]||t.match(pe)&&function(t){for(var e=!0,n=!0,i=0;i<t.length;i++){var r=t.charAt(i);"'"===r&&n?e=!e:'"'===r&&e&&(n=!n)}return e&&n}(t)?t:(Object(i.isDevMode)()&&G().log("WARNING: sanitizing unsafe style value "+t+" (see http://g.co/ng/security#xss)."),"unsafe")}(e));case i.SecurityContext.SCRIPT:if(e instanceof ve)return e.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(e,"Script"),new Error("unsafe value used in a script context");case i.SecurityContext.URL:return e instanceof be||e instanceof _e?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"URL"),Gt(String(e)));case i.SecurityContext.RESOURCE_URL:if(e instanceof be)return e.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(e,"ResourceURL"),new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error("Unexpected SecurityContext "+t+" (see http://g.co/ng/security#xss)")}},e.prototype.checkNotSafeValue=function(t,e){if(t instanceof me)throw new Error("Required a safe "+e+", got a "+t.getTypeName()+" (see http://g.co/ng/security#xss)")},e.prototype.bypassSecurityTrustHtml=function(t){return new ye(t)},e.prototype.bypassSecurityTrustStyle=function(t){return new ge(t)},e.prototype.bypassSecurityTrustScript=function(t){return new ve(t)},e.prototype.bypassSecurityTrustUrl=function(t){return new _e(t)},e.prototype.bypassSecurityTrustResourceUrl=function(t){return new be(t)},e}(fe),me=function(){function t(t){this.changingThisBreaksApplicationSecurity=t}return t.prototype.toString=function(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"},t}(),ye=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(d.c)(e,t),e.prototype.getTypeName=function(){return"HTML"},e}(me),ge=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(d.c)(e,t),e.prototype.getTypeName=function(){return"Style"},e}(me),ve=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(d.c)(e,t),e.prototype.getTypeName=function(){return"Script"},e}(me),_e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(d.c)(e,t),e.prototype.getTypeName=function(){return"URL"},e}(me),be=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(d.c)(e,t),e.prototype.getTypeName=function(){return"ResourceURL"},e}(me),xe=[{provide:i.PLATFORM_ID,useValue:"browser"},{provide:i.PLATFORM_INITIALIZER,useValue:function(){Q.makeCurrent(),at.init()},multi:!0},{provide:y,useClass:nt,deps:[tt]},{provide:tt,useFactory:function(){return document},deps:[]}],we=Object(i.createPlatformFactory)(i.platformCore,"browser",xe);function Ee(){return new i.ErrorHandler}var Ce=function(){function t(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}return t.withServerTransition=function(e){return{ngModule:t,providers:[{provide:i.APP_ID,useValue:e.appId},{provide:rt,useExisting:i.APP_ID},ot]}},t}();"undefined"!=typeof window&&window;var Oe,Pe,Se="undefined"!=typeof Intl&&Intl.v8BreakIterator,Te=function(){return function(){this.isBrowser="object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!Se)&&!!CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}();function ke(){if(null==Oe&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){return Oe=!0}}))}finally{Oe=Oe||!1}return Oe}var Ae=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function Ie(){if(Pe)return Pe;if("object"!=typeof document||!document)return Pe=new Set(Ae);var t=document.createElement("input");return Pe=new Set(Ae.filter(function(e){return t.setAttribute("type",e),t.type===e}))}var Le=function(){},Me=new i.InjectionToken("mat-sanity-checks"),ze=function(){function t(t){this._sanityChecksEnabled=t,this._hasDoneGlobalChecks=!1,this._hasCheckedHammer=!1,this._document="object"==typeof document&&document?document:null,this._window="object"==typeof window&&window?window:null,this._areChecksEnabled()&&!this._hasDoneGlobalChecks&&(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._hasDoneGlobalChecks=!0)}return t.prototype._areChecksEnabled=function(){return this._sanityChecksEnabled&&Object(i.isDevMode)()&&!this._isTestEnv()},t.prototype._isTestEnv=function(){return this._window&&(this._window.__karma__||this._window.jasmine)},t.prototype._checkDoctypeIsDefined=function(){this._document&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")},t.prototype._checkThemeIsPresent=function(){if(this._document&&"function"==typeof getComputedStyle){var t=this._document.createElement("div");t.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(t);var e=getComputedStyle(t);e&&"none"!==e.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(t)}},t.prototype._checkHammerIsAvailable=function(){!this._hasCheckedHammer&&this._window&&(this._areChecksEnabled()&&!this._window.Hammer&&console.warn("Could not find HammerJS. Certain Angular Material components may not work correctly."),this._hasCheckedHammer=!0)},t}();function De(t){return function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=t.apply(this,e)||this;return i._disabled=!1,i}return Object(d.c)(e,t),Object.defineProperty(e.prototype,"disabled",{get:function(){return this._disabled},set:function(t){this._disabled=Z(t)},enumerable:!0,configurable:!0}),e}(t)}function Re(t,e){return function(t){function n(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var r=t.apply(this,n)||this;return r.color=e,r}return Object(d.c)(n,t),Object.defineProperty(n.prototype,"color",{get:function(){return this._color},set:function(t){var n=t||e;n!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove("mat-"+this._color),n&&this._elementRef.nativeElement.classList.add("mat-"+n),this._color=n)},enumerable:!0,configurable:!0}),n}(t)}function je(t){return function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=t.apply(this,e)||this;return i._disableRipple=!1,i}return Object(d.c)(e,t),Object.defineProperty(e.prototype,"disableRipple",{get:function(){return this._disableRipple},set:function(t){this._disableRipple=Z(t)},enumerable:!0,configurable:!0}),e}(t)}var Ne=function(){function t(){}return t.prototype.isErrorState=function(t,e){return!!(t&&t.invalid&&(t.touched||e&&e.submitted))},t}(),Be=function(){var t={FADING_IN:0,VISIBLE:1,FADING_OUT:2,HIDDEN:3};return t[t.FADING_IN]="FADING_IN",t[t.VISIBLE]="VISIBLE",t[t.FADING_OUT]="FADING_OUT",t[t.HIDDEN]="HIDDEN",t}(),Fe=function(){function t(t,e,n){this._renderer=t,this.element=e,this.config=n,this.state=Be.HIDDEN}return t.prototype.fadeOut=function(){this._renderer.fadeOutRipple(this)},t}(),Ve={enterDuration:450,exitDuration:400},Ze=800,Ue=function(){function t(t,e,n,i){var r=this;this._target=t,this._ngZone=e,this._isPointerDown=!1,this._triggerEvents=new Map,this._activeRipples=new Set,this._eventOptions=!!ke()&&{passive:!0},this.onMousedown=function(t){var e=r._lastTouchStartEvent&&Date.now()<r._lastTouchStartEvent+Ze;r._target.rippleDisabled||e||(r._isPointerDown=!0,r.fadeInRipple(t.clientX,t.clientY,r._target.rippleConfig))},this.onTouchStart=function(t){r._target.rippleDisabled||(r._lastTouchStartEvent=Date.now(),r._isPointerDown=!0,r.fadeInRipple(t.touches[0].clientX,t.touches[0].clientY,r._target.rippleConfig))},this.onPointerUp=function(){r._isPointerDown&&(r._isPointerDown=!1,r._activeRipples.forEach(function(t){!t.config.persistent&&(t.state===Be.VISIBLE||t.config.terminateOnPointerUp&&t.state===Be.FADING_IN)&&t.fadeOut()}))},i.isBrowser&&(this._containerElement=n.nativeElement,this._triggerEvents.set("mousedown",this.onMousedown),this._triggerEvents.set("mouseup",this.onPointerUp),this._triggerEvents.set("mouseleave",this.onPointerUp),this._triggerEvents.set("touchstart",this.onTouchStart),this._triggerEvents.set("touchend",this.onPointerUp))}return t.prototype.fadeInRipple=function(t,e,n){var i=this;void 0===n&&(n={});var r=this._containerElement.getBoundingClientRect(),o=Object(d.a)({},Ve,n.animation);n.centered&&(t=r.left+r.width/2,e=r.top+r.height/2);var a=n.radius||function(t,e,n){var i=Math.max(Math.abs(t-n.left),Math.abs(t-n.right)),r=Math.max(Math.abs(e-n.top),Math.abs(e-n.bottom));return Math.sqrt(i*i+r*r)}(t,e,r),s=t-r.left,u=e-r.top,l=o.enterDuration/(n.speedFactor||1),c=document.createElement("div");c.classList.add("mat-ripple-element"),c.style.left=s-a+"px",c.style.top=u-a+"px",c.style.height=2*a+"px",c.style.width=2*a+"px",c.style.backgroundColor=n.color||null,c.style.transitionDuration=l+"ms",this._containerElement.appendChild(c),window.getComputedStyle(c).getPropertyValue("opacity"),c.style.transform="scale(1)";var p=new Fe(this,c,n);return p.state=Be.FADING_IN,this._activeRipples.add(p),this.runTimeoutOutsideZone(function(){p.state=Be.VISIBLE,n.persistent||i._isPointerDown||p.fadeOut()},l),p},t.prototype.fadeOutRipple=function(t){if(this._activeRipples.delete(t)){var e=t.element,n=Object(d.a)({},Ve,t.config.animation);e.style.transitionDuration=n.exitDuration+"ms",e.style.opacity="0",t.state=Be.FADING_OUT,this.runTimeoutOutsideZone(function(){t.state=Be.HIDDEN,e.parentNode.removeChild(e)},n.exitDuration)}},t.prototype.fadeOutAll=function(){this._activeRipples.forEach(function(t){return t.fadeOut()})},t.prototype.setupTriggerEvents=function(t){var e=this;t&&t!==this._triggerElement&&(this._removeTriggerEvents(),this._ngZone.runOutsideAngular(function(){e._triggerEvents.forEach(function(n,i){return t.addEventListener(i,n,e._eventOptions)})}),this._triggerElement=t)},t.prototype.runTimeoutOutsideZone=function(t,e){void 0===e&&(e=0),this._ngZone.runOutsideAngular(function(){return setTimeout(t,e)})},t.prototype._removeTriggerEvents=function(){var t=this;this._triggerElement&&this._triggerEvents.forEach(function(e,n){t._triggerElement.removeEventListener(n,e,t._eventOptions)})},t}(),qe=new i.InjectionToken("mat-ripple-global-options"),He=function(){function t(t,e,n,i){this._elementRef=t,this.radius=0,this.speedFactor=1,this._disabled=!1,this._isInitialized=!1,this._globalOptions=i||{},this._rippleRenderer=new Ue(this,e,t,n)}return Object.defineProperty(t.prototype,"disabled",{get:function(){return this._disabled},set:function(t){this._disabled=t,this._setupTriggerEventsIfEnabled()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"trigger",{get:function(){return this._trigger||this._elementRef.nativeElement},set:function(t){this._trigger=t,this._setupTriggerEventsIfEnabled()},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()},t.prototype.ngOnDestroy=function(){this._rippleRenderer._removeTriggerEvents()},t.prototype.launch=function(t,e,n){return this._rippleRenderer.fadeInRipple(t,e,Object(d.a)({},this.rippleConfig,n))},t.prototype.fadeOutAll=function(){this._rippleRenderer.fadeOutAll()},Object.defineProperty(t.prototype,"rippleConfig",{get:function(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object(d.a)({},this._globalOptions.animation,this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp,speedFactor:this.speedFactor*(this._globalOptions.baseSpeedFactor||1)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rippleDisabled",{get:function(){return this.disabled||!!this._globalOptions.disabled},enumerable:!0,configurable:!0}),t.prototype._setupTriggerEventsIfEnabled=function(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)},t}(),Ge=function(){},We=new i.InjectionToken("mat-label-global-options"),Ke=n("E9/g"),Xe=function(t){function e(){var e=t.call(this,"argument out of range");this.name=e.name="ArgumentOutOfRangeError",this.stack=e.stack,this.message=e.message}return Object(d.c)(e,t),e}(Error),Je=n("Ecq+");function Ye(t){return function(e){return 0===t?new Je.a:e.lift(new Qe(t))}}var Qe=function(){function t(t){if(this.total=t,this.total<0)throw new Xe}return t.prototype.call=function(t,e){return e.subscribe(new $e(t,this.total))},t}(),$e=function(t){function e(e,n){t.call(this,e),this.total=n,this.count=0}return Object(d.c)(e,t),e.prototype._next=function(t){var e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))},e}(Ke.a),tn=n("qLnt"),en=n("xIGM"),nn=function(t){function e(e,n){t.call(this,e,n),this.scheduler=e,this.work=n,this.pending=!1}return Object(d.c)(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t,this.pending=!0;var n=this.id,i=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(i,n,e)),this.delay=e,this.id=this.id||this.requestAsyncId(i,this.id,e),this},e.prototype.requestAsyncId=function(t,e,n){return void 0===n&&(n=0),en.a.setInterval(t.flush.bind(t,this),n)},e.prototype.recycleAsyncId=function(t,e,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return e;en.a.clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var n=!1,i=void 0;try{this.work(t)}catch(t){n=!0,i=!!t&&t||new Error(t)}if(n)return this.unsubscribe(),i},e.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,n=e.actions,i=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==i&&n.splice(i,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},e}(function(t){function e(e,n){t.call(this)}return Object(d.c)(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(tn.a)),rn=new(function(t){function e(){t.apply(this,arguments),this.actions=[],this.active=!1,this.scheduled=void 0}return Object(d.c)(e,t),e.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}},e}(function(){function t(e,n){void 0===n&&(n=t.now),this.SchedulerAction=e,this.now=n}return t.prototype.schedule=function(t,e,n){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(n,e)},t.now=Date.now?Date.now:function(){return+new Date},t}()))(nn);function on(t,e){return void 0===e&&(e=rn),function(n){return n.lift(new an(t,e))}}var an=function(){function t(t,e){this.dueTime=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new sn(t,this.dueTime,this.scheduler))},t}(),sn=function(t){function e(e,n,i){t.call(this,e),this.dueTime=n,this.scheduler=i,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}return Object(d.c)(e,t),e.prototype._next=function(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(un,this.dueTime,this))},e.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},e.prototype.debouncedNext=function(){this.clearDebounce(),this.hasValue&&(this.destination.next(this.lastValue),this.lastValue=null,this.hasValue=!1)},e.prototype.clearDebounce=function(){var t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)},e}(Ke.a);function un(t){t.debouncedNext()}var ln=n("LaOa"),cn=n("qqDE"),pn=function(){function t(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}return t.prototype.call=function(t,e){return e.subscribe(new hn(t,this.nextOrObserver,this.error,this.complete))},t}(),hn=function(t){function e(e,n,i,r){t.call(this,e);var o=new Ke.a(n,i,r);o.syncErrorThrowable=!0,this.add(o),this.safeSubscriber=o}return Object(d.c)(e,t),e.prototype._next=function(t){var e=this.safeSubscriber;e.next(t),e.syncErrorThrown?this.destination.error(e.syncErrorValue):this.destination.next(t)},e.prototype._error=function(t){var e=this.safeSubscriber;e.error(t),this.destination.error(e.syncErrorThrown?e.syncErrorValue:t)},e.prototype._complete=function(){var t=this.safeSubscriber;t.complete(),t.syncErrorThrown?this.destination.error(t.syncErrorValue):this.destination.complete()},e}(Ke.a),fn=n("Oryw"),dn=fn.a.of,mn=function(){function t(t){this._platform=t}return t.prototype.isDisabled=function(t){return t.hasAttribute("disabled")},t.prototype.isVisible=function(t){return function(t){return!!(t.offsetWidth||t.offsetHeight||"function"==typeof t.getClientRects&&t.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility},t.prototype.isTabbable=function(t){if(!this._platform.isBrowser)return!1;var e=function(t){try{return t.frameElement}catch(t){return null}}(t.ownerDocument.defaultView||window);if(e){var n=e&&e.nodeName.toLowerCase();if(-1===gn(e))return!1;if((this._platform.BLINK||this._platform.WEBKIT)&&"object"===n)return!1;if((this._platform.BLINK||this._platform.WEBKIT)&&!this.isVisible(e))return!1}var i=t.nodeName.toLowerCase(),r=gn(t);if(t.hasAttribute("contenteditable"))return-1!==r;if("iframe"===i)return!1;if("audio"===i){if(!t.hasAttribute("controls"))return!1;if(this._platform.BLINK)return!0}if("video"===i){if(!t.hasAttribute("controls")&&this._platform.TRIDENT)return!1;if(this._platform.BLINK||this._platform.FIREFOX)return!0}return("object"!==i||!this._platform.BLINK&&!this._platform.WEBKIT)&&!(this._platform.WEBKIT&&this._platform.IOS&&!function(t){var e=t.nodeName.toLowerCase(),n="input"===e&&t.type;return"text"===n||"password"===n||"select"===e||"textarea"===e}(t))&&t.tabIndex>=0},t.prototype.isFocusable=function(t){return function(t){return!function(t){return function(t){return"input"==t.nodeName.toLowerCase()}(t)&&"hidden"==t.type}(t)&&(function(t){var e=t.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(t)||function(t){return function(t){return"a"==t.nodeName.toLowerCase()}(t)&&t.hasAttribute("href")}(t)||t.hasAttribute("contenteditable")||yn(t))}(t)&&!this.isDisabled(t)&&this.isVisible(t)},t}();function yn(t){if(!t.hasAttribute("tabindex")||void 0===t.tabIndex)return!1;var e=t.getAttribute("tabindex");return"-32768"!=e&&!(!e||isNaN(parseInt(e,10)))}function gn(t){if(!yn(t))return null;var e=parseInt(t.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}var vn=function(){function t(t,e,n,i,r){void 0===r&&(r=!1),this._element=t,this._checker=e,this._ngZone=n,this._document=i,this._enabled=!0,r||this.attachAnchors()}return Object.defineProperty(t.prototype,"enabled",{get:function(){return this._enabled},set:function(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._startAnchor.tabIndex=this._endAnchor.tabIndex=this._enabled?0:-1)},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){this._startAnchor&&this._startAnchor.parentNode&&this._startAnchor.parentNode.removeChild(this._startAnchor),this._endAnchor&&this._endAnchor.parentNode&&this._endAnchor.parentNode.removeChild(this._endAnchor),this._startAnchor=this._endAnchor=null},t.prototype.attachAnchors=function(){var t=this;this._startAnchor||(this._startAnchor=this._createAnchor()),this._endAnchor||(this._endAnchor=this._createAnchor()),this._ngZone.runOutsideAngular(function(){t._startAnchor.addEventListener("focus",function(){t.focusLastTabbableElement()}),t._endAnchor.addEventListener("focus",function(){t.focusFirstTabbableElement()}),t._element.parentNode&&(t._element.parentNode.insertBefore(t._startAnchor,t._element),t._element.parentNode.insertBefore(t._endAnchor,t._element.nextSibling))})},t.prototype.focusInitialElementWhenReady=function(){var t=this;return new Promise(function(e){t._executeOnStable(function(){return e(t.focusInitialElement())})})},t.prototype.focusFirstTabbableElementWhenReady=function(){var t=this;return new Promise(function(e){t._executeOnStable(function(){return e(t.focusFirstTabbableElement())})})},t.prototype.focusLastTabbableElementWhenReady=function(){var t=this;return new Promise(function(e){t._executeOnStable(function(){return e(t.focusLastTabbableElement())})})},t.prototype._getRegionBoundary=function(t){for(var e=this._element.querySelectorAll("[cdk-focus-region-"+t+"], [cdkFocusRegion"+t+"], [cdk-focus-"+t+"]"),n=0;n<e.length;n++)e[n].hasAttribute("cdk-focus-"+t)?console.warn("Found use of deprecated attribute 'cdk-focus-"+t+"', use 'cdkFocusRegion"+t+"' instead.",e[n]):e[n].hasAttribute("cdk-focus-region-"+t)&&console.warn("Found use of deprecated attribute 'cdk-focus-region-"+t+"', use 'cdkFocusRegion"+t+"' instead.",e[n]);return"start"==t?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)},t.prototype.focusInitialElement=function(){var t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");return this._element.hasAttribute("cdk-focus-initial")&&console.warn("Found use of deprecated attribute 'cdk-focus-initial', use 'cdkFocusInitial' instead.",this._element),t?(t.focus(),!0):this.focusFirstTabbableElement()},t.prototype.focusFirstTabbableElement=function(){var t=this._getRegionBoundary("start");return t&&t.focus(),!!t},t.prototype.focusLastTabbableElement=function(){var t=this._getRegionBoundary("end");return t&&t.focus(),!!t},t.prototype._getFirstTabbableElement=function(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;for(var e=t.children||t.childNodes,n=0;n<e.length;n++){var i=e[n].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[n]):null;if(i)return i}return null},t.prototype._getLastTabbableElement=function(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;for(var e=t.children||t.childNodes,n=e.length-1;n>=0;n--){var i=e[n].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[n]):null;if(i)return i}return null},t.prototype._createAnchor=function(){var t=this._document.createElement("div");return t.tabIndex=this._enabled?0:-1,t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t},t.prototype._executeOnStable=function(t){this._ngZone.isStable?t():this._ngZone.onStable.asObservable().pipe(Ye(1)).subscribe(t)},t}(),_n=function(){function t(t,e,n){this._checker=t,this._ngZone=e,this._document=n}return t.prototype.create=function(t,e){return void 0===e&&(e=!1),new vn(t,this._checker,this._ngZone,this._document,e)},t}();function bn(t,e){return(t.getAttribute(e)||"").match(/\S+/g)||[]}var xn=0,wn=new Map,En=null,Cn=function(){function t(t){this._document=t}return t.prototype.describe=function(t,e){t.nodeType===this._document.ELEMENT_NODE&&e.trim()&&(wn.has(e)||this._createMessageElement(e),this._isElementDescribedByMessage(t,e)||this._addMessageReference(t,e))},t.prototype.removeDescription=function(t,e){if(t.nodeType===this._document.ELEMENT_NODE&&e.trim()){this._isElementDescribedByMessage(t,e)&&this._removeMessageReference(t,e);var n=wn.get(e);n&&0===n.referenceCount&&this._deleteMessageElement(e),En&&0===En.childNodes.length&&this._deleteMessagesContainer()}},t.prototype.ngOnDestroy=function(){for(var t=this._document.querySelectorAll("[cdk-describedby-host]"),e=0;e<t.length;e++)this._removeCdkDescribedByReferenceIds(t[e]),t[e].removeAttribute("cdk-describedby-host");En&&this._deleteMessagesContainer(),wn.clear()},t.prototype._createMessageElement=function(t){var e=this._document.createElement("div");e.setAttribute("id","cdk-describedby-message-"+xn++),e.appendChild(this._document.createTextNode(t)),En||this._createMessagesContainer(),En.appendChild(e),wn.set(t,{messageElement:e,referenceCount:0})},t.prototype._deleteMessageElement=function(t){var e=wn.get(t),n=e&&e.messageElement;En&&n&&En.removeChild(n),wn.delete(t)},t.prototype._createMessagesContainer=function(){(En=this._document.createElement("div")).setAttribute("id","cdk-describedby-message-container"),En.setAttribute("aria-hidden","true"),En.style.display="none",this._document.body.appendChild(En)},t.prototype._deleteMessagesContainer=function(){En&&En.parentNode&&(En.parentNode.removeChild(En),En=null)},t.prototype._removeCdkDescribedByReferenceIds=function(t){var e=bn(t,"aria-describedby").filter(function(t){return 0!=t.indexOf("cdk-describedby-message")});t.setAttribute("aria-describedby",e.join(" "))},t.prototype._addMessageReference=function(t,e){var n,i,r,o,a=wn.get(e);r=a.messageElement.id,(o=bn(n=t,i="aria-describedby")).some(function(t){return t.trim()==r.trim()})||(o.push(r.trim()),n.setAttribute(i,o.join(" "))),t.setAttribute("cdk-describedby-host",""),a.referenceCount++},t.prototype._removeMessageReference=function(t,e){var n,i,r,o,a=wn.get(e);a.referenceCount--,r=a.messageElement.id,o=bn(n=t,i="aria-describedby").filter(function(t){return t!=r.trim()}),n.setAttribute(i,o.join(" ")),t.removeAttribute("cdk-describedby-host")},t.prototype._isElementDescribedByMessage=function(t,e){var n=bn(t,"aria-describedby"),i=wn.get(e),r=i&&i.messageElement.id;return!!r&&-1!=n.indexOf(r)},t}();function On(t,e){return t||new Cn(e)}var Pn=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._origin="program",e}return Object(d.c)(e,t),e.prototype.setFocusOrigin=function(t){return this._origin=t,this},e.prototype.setActiveItem=function(e){t.prototype.setActiveItem.call(this,e),this.activeItem&&this.activeItem.focus(this._origin)},e}(function(){function t(t){var e=this;this._items=t,this._activeItemIndex=-1,this._wrap=!1,this._letterKeyStream=new U.a,this._typeaheadSubscription=tn.a.EMPTY,this._vertical=!0,this._pressedLetters=[],this.tabOut=new U.a,this.change=new U.a,t.changes.subscribe(function(t){if(e._activeItem){var n=t.toArray().indexOf(e._activeItem);n>-1&&n!==e._activeItemIndex&&(e._activeItemIndex=n)}})}return t.prototype.withWrap=function(){return this._wrap=!0,this},t.prototype.withVerticalOrientation=function(t){return void 0===t&&(t=!0),this._vertical=t,this},t.prototype.withHorizontalOrientation=function(t){return this._horizontal=t,this},t.prototype.withTypeAhead=function(t){var e,n=this;if(void 0===t&&(t=200),this._items.length&&this._items.some(function(t){return"function"!=typeof t.getLabel}))throw Error("ListKeyManager items in typeahead mode must implement the `getLabel` method.");return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe((e=function(t){return n._pressedLetters.push(t)},function(t){return t.lift(new pn(e,void 0,void 0))}),on(t),Object(ln.a)(function(){return n._pressedLetters.length>0}),Object(cn.a)(function(){return n._pressedLetters.join("")})).subscribe(function(t){for(var e=n._items.toArray(),i=1;i<e.length+1;i++){var r=(n._activeItemIndex+i)%e.length,o=e[r];if(!o.disabled&&0===o.getLabel().toUpperCase().trim().indexOf(t)){n.setActiveItem(r);break}}n._pressedLetters=[]}),this},t.prototype.setActiveItem=function(t){var e=this._activeItemIndex;this._activeItemIndex=t,this._activeItem=this._items.toArray()[t],this._activeItemIndex!==e&&this.change.next(t)},t.prototype.onKeydown=function(t){var e=t.keyCode;switch(e){case 9:return void this.tabOut.next();case 40:if(this._vertical){this.setNextItemActive();break}case 38:if(this._vertical){this.setPreviousItemActive();break}case 39:if("ltr"===this._horizontal){this.setNextItemActive();break}if("rtl"===this._horizontal){this.setPreviousItemActive();break}case 37:if("ltr"===this._horizontal){this.setPreviousItemActive();break}if("rtl"===this._horizontal){this.setNextItemActive();break}default:return void(t.key&&1===t.key.length?this._letterKeyStream.next(t.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e)))}this._pressedLetters=[],t.preventDefault()},Object.defineProperty(t.prototype,"activeItemIndex",{get:function(){return this._activeItemIndex},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activeItem",{get:function(){return this._activeItem},enumerable:!0,configurable:!0}),t.prototype.setFirstItemActive=function(){this._setActiveItemByIndex(0,1)},t.prototype.setLastItemActive=function(){this._setActiveItemByIndex(this._items.length-1,-1)},t.prototype.setNextItemActive=function(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)},t.prototype.setPreviousItemActive=function(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)},t.prototype.updateActiveItemIndex=function(t){this._activeItemIndex=t},t.prototype._setActiveItemByDelta=function(t,e){void 0===e&&(e=this._items.toArray()),this._wrap?this._setActiveInWrapMode(t,e):this._setActiveInDefaultMode(t,e)},t.prototype._setActiveInWrapMode=function(t,e){this._activeItemIndex=(this._activeItemIndex+t+e.length)%e.length,e[this._activeItemIndex].disabled?this._setActiveInWrapMode(t,e):this.setActiveItem(this._activeItemIndex)},t.prototype._setActiveInDefaultMode=function(t,e){this._setActiveItemByIndex(this._activeItemIndex+t,t,e)},t.prototype._setActiveItemByIndex=function(t,e,n){if(void 0===n&&(n=this._items.toArray()),n[t]){for(;n[t].disabled;)if(!n[t+=e])return;this.setActiveItem(t)}},t}()),Sn=new i.InjectionToken("liveAnnouncerElement"),Tn=function(){function t(t,e){this._document=e,this._liveElement=t||this._createLiveElement()}return t.prototype.announce=function(t,e){var n=this;return void 0===e&&(e="polite"),this._liveElement.textContent="",this._liveElement.setAttribute("aria-live",e),new Promise(function(e){setTimeout(function(){n._liveElement.textContent=t,e()},100)})},t.prototype.ngOnDestroy=function(){this._liveElement&&this._liveElement.parentNode&&this._liveElement.parentNode.removeChild(this._liveElement)},t.prototype._createLiveElement=function(){var t=this._document.createElement("div");return t.classList.add("cdk-visually-hidden"),t.setAttribute("aria-atomic","true"),t.setAttribute("aria-live","polite"),this._document.body.appendChild(t),t},t}();function kn(t,e,n){return t||new Tn(e,n)}var An=function(){function t(t,e){this._ngZone=t,this._platform=e,this._origin=null,this._windowFocused=!1,this._elementInfo=new Map,this._unregisterGlobalListeners=function(){},this._monitoredElementCount=0}return t.prototype.monitor=function(t,e,n){var r=this;if(e instanceof i.Renderer2||(n=e),n=!!n,!this._platform.isBrowser)return dn(null);if(this._elementInfo.has(t)){var o=this._elementInfo.get(t);return o.checkChildren=n,o.subject.asObservable()}var a={unlisten:function(){},checkChildren:n,subject:new U.a};this._elementInfo.set(t,a),this._incrementMonitoredElementCount();var s=function(e){return r._onFocus(e,t)},u=function(e){return r._onBlur(e,t)};return this._ngZone.runOutsideAngular(function(){t.addEventListener("focus",s,!0),t.addEventListener("blur",u,!0)}),a.unlisten=function(){t.removeEventListener("focus",s,!0),t.removeEventListener("blur",u,!0)},a.subject.asObservable()},t.prototype.stopMonitoring=function(t){var e=this._elementInfo.get(t);e&&(e.unlisten(),e.subject.complete(),this._setClasses(t),this._elementInfo.delete(t),this._decrementMonitoredElementCount())},t.prototype.focusVia=function(t,e){this._setOriginForCurrentEventQueue(e),t.focus()},t.prototype.ngOnDestroy=function(){var t=this;this._elementInfo.forEach(function(e,n){return t.stopMonitoring(n)})},t.prototype._registerGlobalListeners=function(){var t=this;if(this._platform.isBrowser){var e=function(){t._lastTouchTarget=null,t._setOriginForCurrentEventQueue("keyboard")},n=function(){t._lastTouchTarget||t._setOriginForCurrentEventQueue("mouse")},i=function(e){null!=t._touchTimeoutId&&clearTimeout(t._touchTimeoutId),t._lastTouchTarget=e.target,t._touchTimeoutId=setTimeout(function(){return t._lastTouchTarget=null},650)},r=function(){t._windowFocused=!0,t._windowFocusTimeoutId=setTimeout(function(){return t._windowFocused=!1},0)};this._ngZone.runOutsideAngular(function(){document.addEventListener("keydown",e,!0),document.addEventListener("mousedown",n,!0),document.addEventListener("touchstart",i,!ke()||{passive:!0,capture:!0}),window.addEventListener("focus",r)}),this._unregisterGlobalListeners=function(){document.removeEventListener("keydown",e,!0),document.removeEventListener("mousedown",n,!0),document.removeEventListener("touchstart",i,!ke()||{passive:!0,capture:!0}),window.removeEventListener("focus",r),clearTimeout(t._windowFocusTimeoutId),clearTimeout(t._touchTimeoutId),clearTimeout(t._originTimeoutId)}}},t.prototype._toggleClass=function(t,e,n){n?t.classList.add(e):t.classList.remove(e)},t.prototype._setClasses=function(t,e){this._elementInfo.get(t)&&(this._toggleClass(t,"cdk-focused",!!e),this._toggleClass(t,"cdk-touch-focused","touch"===e),this._toggleClass(t,"cdk-keyboard-focused","keyboard"===e),this._toggleClass(t,"cdk-mouse-focused","mouse"===e),this._toggleClass(t,"cdk-program-focused","program"===e))},t.prototype._setOriginForCurrentEventQueue=function(t){var e=this;this._origin=t,this._originTimeoutId=setTimeout(function(){return e._origin=null},0)},t.prototype._wasCausedByTouch=function(t){var e=t.target;return this._lastTouchTarget instanceof Node&&e instanceof Node&&(e===this._lastTouchTarget||e.contains(this._lastTouchTarget))},t.prototype._onFocus=function(t,e){var n=this._elementInfo.get(e);n&&(n.checkChildren||e===t.target)&&(this._origin||(this._origin=this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:this._wasCausedByTouch(t)?"touch":"program"),this._setClasses(e,this._origin),n.subject.next(this._origin),this._lastFocusOrigin=this._origin,this._origin=null)},t.prototype._onBlur=function(t,e){var n=this._elementInfo.get(e);!n||n.checkChildren&&t.relatedTarget instanceof Node&&e.contains(t.relatedTarget)||(this._setClasses(e),n.subject.next(null))},t.prototype._incrementMonitoredElementCount=function(){1==++this._monitoredElementCount&&this._registerGlobalListeners()},t.prototype._decrementMonitoredElementCount=function(){--this._monitoredElementCount||(this._unregisterGlobalListeners(),this._unregisterGlobalListeners=function(){})},t}();function In(t,e,n){return t||new An(e,n)}var Ln=function(){},Mn="accent",zn="primary",Dn=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],Rn=function(t){function e(e,n,i){var r=t.call(this,e)||this;r._platform=n,r._focusMonitor=i,r._isRoundButton=r._hasHostAttributes("mat-fab","mat-mini-fab"),r._isIconButton=r._hasHostAttributes("mat-icon-button");for(var o=0,a=Dn;o<a.length;o++){var s=a[o];r._hasHostAttributes(s)&&e.nativeElement.classList.add(s)}return r._focusMonitor.monitor(r._elementRef.nativeElement,!0),r._isRoundButton?r.color=Mn:r._hasHostAttributes("mat-flat-button")&&(r.color=zn),r}return Object(d.c)(e,t),e.prototype.ngOnDestroy=function(){this._focusMonitor.stopMonitoring(this._elementRef.nativeElement)},e.prototype.focus=function(){this._getHostElement().focus()},e.prototype._getHostElement=function(){return this._elementRef.nativeElement},e.prototype._isRippleDisabled=function(){return this.disableRipple||this.disabled},e.prototype._hasHostAttributes=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return!!this._platform.isBrowser&&e.some(function(e){return t._getHostElement().hasAttribute(e)})},e}(Re(De(je(function(t){this._elementRef=t})))),jn=function(){},Nn=i["\u0275crt"]({encapsulation:2,styles:[".mat-button,.mat-fab,.mat-flat-button,.mat-icon-button,.mat-mini-fab,.mat-raised-button,.mat-stroked-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:0;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:88px;line-height:36px;padding:0 16px;border-radius:2px}[disabled].mat-button,[disabled].mat-fab,[disabled].mat-flat-button,[disabled].mat-icon-button,[disabled].mat-mini-fab,[disabled].mat-raised-button,[disabled].mat-stroked-button{cursor:default}.cdk-keyboard-focused.mat-button .mat-button-focus-overlay,.cdk-keyboard-focused.mat-fab .mat-button-focus-overlay,.cdk-keyboard-focused.mat-flat-button .mat-button-focus-overlay,.cdk-keyboard-focused.mat-icon-button .mat-button-focus-overlay,.cdk-keyboard-focused.mat-mini-fab .mat-button-focus-overlay,.cdk-keyboard-focused.mat-raised-button .mat-button-focus-overlay,.cdk-keyboard-focused.mat-stroked-button .mat-button-focus-overlay,.cdk-program-focused.mat-button .mat-button-focus-overlay,.cdk-program-focused.mat-fab .mat-button-focus-overlay,.cdk-program-focused.mat-flat-button .mat-button-focus-overlay,.cdk-program-focused.mat-icon-button .mat-button-focus-overlay,.cdk-program-focused.mat-mini-fab .mat-button-focus-overlay,.cdk-program-focused.mat-raised-button .mat-button-focus-overlay,.cdk-program-focused.mat-stroked-button .mat-button-focus-overlay{opacity:1}.mat-button::-moz-focus-inner,.mat-fab::-moz-focus-inner,.mat-flat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-mini-fab::-moz-focus-inner,.mat-raised-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner{border:0}.mat-fab,.mat-mini-fab,.mat-raised-button{transform:translate3d(0,0,0);transition:background .4s cubic-bezier(.25,.8,.25,1),box-shadow 280ms cubic-bezier(.4,0,.2,1)}.mat-fab:not([class*=mat-elevation-z]),.mat-mini-fab:not([class*=mat-elevation-z]),.mat-raised-button:not([class*=mat-elevation-z]){box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)}.mat-fab:not([disabled]):active:not([class*=mat-elevation-z]),.mat-mini-fab:not([disabled]):active:not([class*=mat-elevation-z]),.mat-raised-button:not([disabled]):active:not([class*=mat-elevation-z]){box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}[disabled].mat-fab,[disabled].mat-mini-fab,[disabled].mat-raised-button{box-shadow:none}.mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{transition:none;opacity:0}.mat-button:hover .mat-button-focus-overlay,.mat-stroked-button:hover .mat-button-focus-overlay{opacity:1}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button:not([class*=mat-elevation-z]){box-shadow:0 0 0 0 rgba(0,0,0,.2),0 0 0 0 rgba(0,0,0,.14),0 0 0 0 rgba(0,0,0,.12)}.mat-flat-button:not([class*=mat-elevation-z]){box-shadow:0 0 0 0 rgba(0,0,0,.2),0 0 0 0 rgba(0,0,0,.14),0 0 0 0 rgba(0,0,0,.12)}.mat-fab{min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab:not([class*=mat-elevation-z]){box-shadow:0 3px 5px -1px rgba(0,0,0,.2),0 6px 10px 0 rgba(0,0,0,.14),0 1px 18px 0 rgba(0,0,0,.12)}.mat-fab:not([disabled]):active:not([class*=mat-elevation-z]){box-shadow:0 7px 8px -4px rgba(0,0,0,.2),0 12px 17px 2px rgba(0,0,0,.14),0 5px 22px 4px rgba(0,0,0,.12)}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab:not([class*=mat-elevation-z]){box-shadow:0 3px 5px -1px rgba(0,0,0,.2),0 6px 10px 0 rgba(0,0,0,.14),0 1px 18px 0 rgba(0,0,0,.12)}.mat-mini-fab:not([disabled]):active:not([class*=mat-elevation-z]){box-shadow:0 7px 8px -4px rgba(0,0,0,.2),0 12px 17px 2px rgba(0,0,0,.14),0 5px 22px 4px rgba(0,0,0,.12)}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button .mat-icon,.mat-icon-button i{line-height:24px}.mat-button,.mat-fab,.mat-icon-button,.mat-mini-fab,.mat-raised-button{color:currentColor}.mat-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*{vertical-align:middle}.mat-button-focus-overlay,.mat-button-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-button-focus-overlay{background-color:rgba(0,0,0,.12);border-radius:inherit;opacity:0;transition:opacity .2s cubic-bezier(.35,0,.25,1),background-color .2s cubic-bezier(.35,0,.25,1)}@media screen and (-ms-high-contrast:active){.mat-button-focus-overlay{background-color:rgba(255,255,255,.5)}}.mat-button-ripple-round{border-radius:50%;z-index:1}@media screen and (-ms-high-contrast:active){.mat-button,.mat-fab,.mat-flat-button,.mat-icon-button,.mat-mini-fab,.mat-raised-button{outline:solid 1px}}"],data:{}});function Bn(t){return i["\u0275vid"](2,[i["\u0275qud"](402653184,1,{ripple:0}),(t()(),i["\u0275eld"](1,0,null,null,1,"span",[["class","mat-button-wrapper"]],null,null,null,null,null)),i["\u0275ncd"](null,0),(t()(),i["\u0275eld"](3,0,null,null,1,"div",[["class","mat-button-ripple mat-ripple"],["matRipple",""]],[[2,"mat-button-ripple-round",null],[2,"mat-ripple-unbounded",null]],null,null,null,null)),i["\u0275did"](4,212992,[[1,4]],0,He,[i.ElementRef,i.NgZone,Te,[2,qe]],{centered:[0,"centered"],disabled:[1,"disabled"],trigger:[2,"trigger"]},null),(t()(),i["\u0275eld"](5,0,null,null,0,"div",[["class","mat-button-focus-overlay"]],null,null,null,null,null))],function(t,e){var n=e.component;t(e,4,0,n._isIconButton,n._isRippleDisabled(),n._getHostElement())},function(t,e){var n=e.component;t(e,3,0,n._isRoundButton||n._isIconButton,i["\u0275nov"](e,4).unbounded)})}var Fn=function(){function t(t){this.ngRedux=t,this.title="This is the detail of fountain ",this.id=0,this.lat=0,this.lng=0}return t.prototype.deselectFountain=function(){this.ngRedux.dispatch({type:u})},t.prototype.ngOnInit=function(){var t=this;this.fountain.subscribe(function(e){console.log("i saw it"),t.lat=e.geometry.coordinates[1],t.lng=e.geometry.coordinates[0],t.id=e.properties.id})},Object(d.b)([Object(r.select)("fountainSelected"),Object(d.d)("design:type",Object)],t.prototype,"fountain",void 0),t}(),Vn=n("kP2E"),Zn=i["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function Un(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,2,"p",[],null,null,null,null,null)),(t()(),i["\u0275ted"](1,null,["Bezeichnung: ",""])),i["\u0275pid"](131072,R,[i.ChangeDetectorRef])],null,function(t,e){var n=e.component;t(e,1,0,i["\u0275unv"](e,1,0,i["\u0275nov"](e,2).transform(n.fountain)).properties.bezeichnung)})}function qn(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,2,"h1",[],null,null,null,null,null)),(t()(),i["\u0275ted"](1,null,["",""])),i["\u0275pid"](131072,R,[i.ChangeDetectorRef]),(t()(),i["\u0275ted"](-1,null,["\n"])),(t()(),i["\u0275eld"](4,0,null,null,2,"h2",[],null,null,null,null,null)),(t()(),i["\u0275ted"](5,null,["",""])),i["\u0275pid"](131072,R,[i.ChangeDetectorRef]),(t()(),i["\u0275ted"](-1,null,["\n"])),(t()(),i["\u0275and"](16777216,null,null,2,null,Un)),i["\u0275did"](9,16384,null,0,T,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),i["\u0275pid"](131072,R,[i.ChangeDetectorRef]),(t()(),i["\u0275ted"](-1,null,["\n"])),(t()(),i["\u0275eld"](12,0,null,null,2,"p",[],null,null,null,null,null)),(t()(),i["\u0275ted"](13,null,["Historisches Baujahr: ",""])),i["\u0275pid"](131072,R,[i.ChangeDetectorRef]),(t()(),i["\u0275ted"](-1,null,["\n"])),(t()(),i["\u0275ted"](-1,null,["\n\n"])),(t()(),i["\u0275eld"](17,0,null,null,2,"button",[["color","warn"],["mat-raised-button",""]],[[8,"disabled",0]],[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.deselectFountain()&&i),i},Bn,Nn)),i["\u0275did"](18,180224,null,0,Rn,[i.ElementRef,Te,An],{color:[0,"color"]},null),(t()(),i["\u0275ted"](-1,0,["close"])),(t()(),i["\u0275ted"](-1,null,["\n"]))],function(t,e){var n=e.component;t(e,9,0,i["\u0275unv"](e,9,0,i["\u0275nov"](e,10).transform(n.fountain)).properties.bezeichnung),t(e,18,0,"warn")},function(t,e){var n=e.component;t(e,1,0,i["\u0275unv"](e,1,0,i["\u0275nov"](e,2).transform(n.fountain)).properties.brunnenart_txt),t(e,5,0,i["\u0275unv"](e,5,0,i["\u0275nov"](e,6).transform(n.fountain)).properties.wasserart_txt),t(e,13,0,i["\u0275unv"](e,13,0,i["\u0275nov"](e,14).transform(n.fountain)).properties.historisches_baujahr),t(e,17,0,i["\u0275nov"](e,18).disabled||null)})}var Hn=function(t){function e(e,n,i){var r=t.call(this,e)||this;return r._platform=n,r._document=i,r}return Object(d.c)(e,t),e.prototype.ngAfterViewInit=function(){var t=this;Object(i.isDevMode)()&&this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(function(){return t._checkToolbarMixedModes()}))},e.prototype._checkToolbarMixedModes=function(){var t=this;this._toolbarRows.length&&[].slice.call(this._elementRef.nativeElement.childNodes).filter(function(t){return!(t.classList&&t.classList.contains("mat-toolbar-row"))}).filter(function(e){return e.nodeType!==(t._document?t._document.COMMENT_NODE:8)}).some(function(t){return t.textContent.trim()})&&function(){throw Error("MatToolbar: Attempting to combine different toolbar modes. Either specify multiple `<mat-toolbar-row>` elements explicitly or just place content inside of a `<mat-toolbar>` for a single row.")}()},e}(Re(function(t){this._elementRef=t})),Gn=function(){},Wn=i["\u0275crt"]({encapsulation:2,styles:[".mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}.mat-toolbar-multiple-rows{min-height:64px}.mat-toolbar-row,.mat-toolbar-single-row{height:64px}@media (max-width:599px){.mat-toolbar-multiple-rows{min-height:56px}.mat-toolbar-row,.mat-toolbar-single-row{height:56px}}"],data:{}});function Kn(t){return i["\u0275vid"](2,[i["\u0275ncd"](null,0),i["\u0275ncd"](null,1)],null,null)}var Xn=n("1j/l"),Jn=n("qgI0"),Yn=n("lI6h"),Qn=function(t){function e(e,n){t.call(this),this.sources=e,this.resultSelector=n}return Object(d.c)(e,t),e.create=function(){for(var t=[],n=0;n<arguments.length;n++)t[n-0]=arguments[n];if(null===t||0===arguments.length)return new Je.a;var i=null;return"function"==typeof t[t.length-1]&&(i=t.pop()),1===t.length&&Object(Xn.a)(t[0])&&(t=t[0]),0===t.length?new Je.a:new e(t,i)},e.prototype._subscribe=function(t){return new $n(t,this.sources,this.resultSelector)},e}(q.Observable),$n=function(t){function e(e,n,i){t.call(this,e),this.sources=n,this.resultSelector=i,this.completed=0,this.haveValues=0;var r=n.length;this.total=r,this.values=new Array(r);for(var o=0;o<r;o++){var a=n[o],s=Object(Jn.a)(this,a,null,o);s&&(s.outerIndex=o,this.add(s))}}return Object(d.c)(e,t),e.prototype.notifyNext=function(t,e,n,i,r){this.values[n]=e,r._hasValue||(r._hasValue=!0,this.haveValues++)},e.prototype.notifyComplete=function(t){var e=this.destination,n=this.haveValues,i=this.resultSelector,r=this.values,o=r.length;if(t._hasValue){if(this.completed++,this.completed===o){if(n===o){var a=i?i.apply(this,r):r;e.next(a)}e.complete()}}else e.complete()},e}(Yn.a),ti=Qn.create,ei=n("KRwF").a.create,ni=n("dmC+"),ii=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(d.c)(e,t),Object.defineProperty(e.prototype,"formDirective",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return null},enumerable:!0,configurable:!0}),e}(function(){function t(){}return Object.defineProperty(t.prototype,"value",{get:function(){return this.control?this.control.value:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"valid",{get:function(){return this.control?this.control.valid:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"invalid",{get:function(){return this.control?this.control.invalid:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pending",{get:function(){return this.control?this.control.pending:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disabled",{get:function(){return this.control?this.control.disabled:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"enabled",{get:function(){return this.control?this.control.enabled:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"errors",{get:function(){return this.control?this.control.errors:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pristine",{get:function(){return this.control?this.control.pristine:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dirty",{get:function(){return this.control?this.control.dirty:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"touched",{get:function(){return this.control?this.control.touched:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"status",{get:function(){return this.control?this.control.status:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"untouched",{get:function(){return this.control?this.control.untouched:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"statusChanges",{get:function(){return this.control?this.control.statusChanges:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"valueChanges",{get:function(){return this.control?this.control.valueChanges:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return null},enumerable:!0,configurable:!0}),t.prototype.reset=function(t){void 0===t&&(t=void 0),this.control&&this.control.reset(t)},t.prototype.hasError=function(t,e){return!!this.control&&this.control.hasError(t,e)},t.prototype.getError=function(t,e){return this.control?this.control.getError(t,e):null},t}());function ri(t){return null==t||0===t.length}var oi=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,ai=function(){function t(){}return t.min=function(t){return function(e){if(ri(e.value)||ri(t))return null;var n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}},t.max=function(t){return function(e){if(ri(e.value)||ri(t))return null;var n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}},t.required=function(t){return ri(t.value)?{required:!0}:null},t.requiredTrue=function(t){return!0===t.value?null:{required:!0}},t.email=function(t){return oi.test(t.value)?null:{email:!0}},t.minLength=function(t){return function(e){if(ri(e.value))return null;var n=e.value?e.value.length:0;return n<t?{minlength:{requiredLength:t,actualLength:n}}:null}},t.maxLength=function(t){return function(e){var n=e.value?e.value.length:0;return n>t?{maxlength:{requiredLength:t,actualLength:n}}:null}},t.pattern=function(e){return e?("string"==typeof e?(i="","^"!==e.charAt(0)&&(i+="^"),i+=e,"$"!==e.charAt(e.length-1)&&(i+="$"),n=new RegExp(i)):(i=e.toString(),n=e),function(t){if(ri(t.value))return null;var e=t.value;return n.test(e)?null:{pattern:{requiredPattern:i,actualValue:e}}}):t.nullValidator;var n,i},t.nullValidator=function(t){return null},t.compose=function(t){if(!t)return null;var e=t.filter(si);return 0==e.length?null:function(t){return li(function(t,n){return e.map(function(e){return e(t)})}(t))}},t.composeAsync=function(t){if(!t)return null;var e=t.filter(si);return 0==e.length?null:function(t){var n=function(t,n){return e.map(function(e){return e(t)})}(t).map(ui);return ni.a.call(ti(n),li)}},t}();function si(t){return null!=t}function ui(t){var e=Object(i["\u0275isPromise"])(t)?ei(t):t;if(!Object(i["\u0275isObservable"])(e))throw new Error("Expected validator to return Promise or Observable.");return e}function li(t){var e=t.reduce(function(t,e){return null!=e?Object(d.a)({},t,e):t},{});return 0===Object.keys(e).length?null:e}function ci(t){return t.validate?function(e){return t.validate(e)}:t}function pi(t){return t.validate?function(e){return t.validate(e)}:t}var hi=function(){function t(){this._accessors=[]}return t.prototype.add=function(t,e){this._accessors.push([t,e])},t.prototype.remove=function(t){for(var e=this._accessors.length-1;e>=0;--e)if(this._accessors[e][1]===t)return void this._accessors.splice(e,1)},t.prototype.select=function(t){var e=this;this._accessors.forEach(function(n){e._isSameGroup(n,t)&&n[1]!==t&&n[1].fireUncheck(t.value)})},t.prototype._isSameGroup=function(t,e){return!!t[0].control&&t[0]._parent===e._control._parent&&t[1].name===e.name},t}();function fi(t,e){t||gi(e,"Cannot find control with"),e.valueAccessor||gi(e,"No value accessor for form control with"),t.validator=ai.compose([t.validator,e.validator]),t.asyncValidator=ai.composeAsync([t.asyncValidator,e.asyncValidator]),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(function(n){t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&di(t,e)})}(t,e),function(t,e){t.registerOnChange(function(t,n){e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(function(){t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&di(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),e.valueAccessor.setDisabledState&&t.registerOnDisabledChange(function(t){e.valueAccessor.setDisabledState(t)}),e._rawValidators.forEach(function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange(function(){return t.updateValueAndValidity()})}),e._rawAsyncValidators.forEach(function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange(function(){return t.updateValueAndValidity()})})}function di(t,e){e.viewToModelUpdate(t._pendingValue),t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),t._pendingChange=!1}function mi(t,e){null==t&&gi(e,"Cannot find control with"),t.validator=ai.compose([t.validator,e.validator]),t.asyncValidator=ai.composeAsync([t.asyncValidator,e.asyncValidator])}function yi(t){return gi(t,"There is no FormControl instance attached to form control element with")}function gi(t,e){var n;throw n=t.path.length>1?"path: '"+t.path.join(" -> ")+"'":t.path[0]?"name: '"+t.path+"'":"unspecified name attribute",new Error(e+" "+n)}function vi(t){return null!=t?ai.compose(t.map(ci)):null}function _i(t){return null!=t?ai.composeAsync(t.map(pi)):null}function bi(t,e){t._syncPendingControls(),e.forEach(function(t){var e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)})}function xi(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)}var wi=function(t){function e(e){return t.call(this,e)||this}return Object(d.c)(e,t),e}(function(){function t(t){this._cd=t}return Object.defineProperty(t.prototype,"ngClassUntouched",{get:function(){return!!this._cd.control&&this._cd.control.untouched},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngClassTouched",{get:function(){return!!this._cd.control&&this._cd.control.touched},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngClassPristine",{get:function(){return!!this._cd.control&&this._cd.control.pristine},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngClassDirty",{get:function(){return!!this._cd.control&&this._cd.control.dirty},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngClassValid",{get:function(){return!!this._cd.control&&this._cd.control.valid},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngClassInvalid",{get:function(){return!!this._cd.control&&this._cd.control.invalid},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngClassPending",{get:function(){return!!this._cd.control&&this._cd.control.pending},enumerable:!0,configurable:!0}),t}());function Ei(t){var e=Oi(t)?t.validators:t;return Array.isArray(e)?vi(e):e||null}function Ci(t,e){var n=Oi(e)?e.asyncValidators:t;return Array.isArray(n)?_i(n):n||null}function Oi(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}var Pi=function(){function t(t,e){this.validator=t,this.asyncValidator=e,this._onCollectionChange=function(){},this.pristine=!0,this.touched=!1,this._onDisabledChange=[]}return Object.defineProperty(t.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"valid",{get:function(){return"VALID"===this.status},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"invalid",{get:function(){return"INVALID"===this.status},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pending",{get:function(){return"PENDING"==this.status},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disabled",{get:function(){return"DISABLED"===this.status},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"enabled",{get:function(){return"DISABLED"!==this.status},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dirty",{get:function(){return!this.pristine},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"untouched",{get:function(){return!this.touched},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"updateOn",{get:function(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"},enumerable:!0,configurable:!0}),t.prototype.setValidators=function(t){this.validator=Ei(t)},t.prototype.setAsyncValidators=function(t){this.asyncValidator=Ci(t)},t.prototype.clearValidators=function(){this.validator=null},t.prototype.clearAsyncValidators=function(){this.asyncValidator=null},t.prototype.markAsTouched=function(t){void 0===t&&(t={}),this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)},t.prototype.markAsUntouched=function(t){void 0===t&&(t={}),this.touched=!1,this._pendingTouched=!1,this._forEachChild(function(t){t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)},t.prototype.markAsDirty=function(t){void 0===t&&(t={}),this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)},t.prototype.markAsPristine=function(t){void 0===t&&(t={}),this.pristine=!0,this._pendingDirty=!1,this._forEachChild(function(t){t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)},t.prototype.markAsPending=function(t){void 0===t&&(t={}),this.status="PENDING",this._parent&&!t.onlySelf&&this._parent.markAsPending(t)},t.prototype.disable=function(t){void 0===t&&(t={}),this.status="DISABLED",this.errors=null,this._forEachChild(function(t){t.disable({onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(!!t.onlySelf),this._onDisabledChange.forEach(function(t){return t(!0)})},t.prototype.enable=function(t){void 0===t&&(t={}),this.status="VALID",this._forEachChild(function(t){t.enable({onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(!!t.onlySelf),this._onDisabledChange.forEach(function(t){return t(!1)})},t.prototype._updateAncestors=function(t){this._parent&&!t&&(this._parent.updateValueAndValidity(),this._parent._updatePristine(),this._parent._updateTouched())},t.prototype.setParent=function(t){this._parent=t},t.prototype.updateValueAndValidity=function(t){void 0===t&&(t={}),this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),"VALID"!==this.status&&"PENDING"!==this.status||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)},t.prototype._updateTreeValidity=function(t){void 0===t&&(t={emitEvent:!0}),this._forEachChild(function(e){return e._updateTreeValidity(t)}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})},t.prototype._setInitialStatus=function(){this.status=this._allControlsDisabled()?"DISABLED":"VALID"},t.prototype._runValidator=function(){return this.validator?this.validator(this):null},t.prototype._runAsyncValidator=function(t){var e=this;if(this.asyncValidator){this.status="PENDING";var n=ui(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(function(n){return e.setErrors(n,{emitEvent:t})})}},t.prototype._cancelExistingSubscription=function(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()},t.prototype.setErrors=function(t,e){void 0===e&&(e={}),this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)},t.prototype.get=function(t){return function(t,e,n){return null==e?null:(e instanceof Array||(e=e.split(".")),e instanceof Array&&0===e.length?null:e.reduce(function(t,e){return t instanceof Ti?t.controls[e]||null:t instanceof ki&&t.at(e)||null},t))}(this,t)},t.prototype.getError=function(t,e){var n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null},t.prototype.hasError=function(t,e){return!!this.getError(t,e)},Object.defineProperty(t.prototype,"root",{get:function(){for(var t=this;t._parent;)t=t._parent;return t},enumerable:!0,configurable:!0}),t.prototype._updateControlsErrors=function(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)},t.prototype._initObservables=function(){this.valueChanges=new i.EventEmitter,this.statusChanges=new i.EventEmitter},t.prototype._calculateStatus=function(){return this._allControlsDisabled()?"DISABLED":this.errors?"INVALID":this._anyControlsHaveStatus("PENDING")?"PENDING":this._anyControlsHaveStatus("INVALID")?"INVALID":"VALID"},t.prototype._anyControlsHaveStatus=function(t){return this._anyControls(function(e){return e.status===t})},t.prototype._anyControlsDirty=function(){return this._anyControls(function(t){return t.dirty})},t.prototype._anyControlsTouched=function(){return this._anyControls(function(t){return t.touched})},t.prototype._updatePristine=function(t){void 0===t&&(t={}),this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)},t.prototype._updateTouched=function(t){void 0===t&&(t={}),this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)},t.prototype._isBoxedValue=function(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t},t.prototype._registerOnCollectionChange=function(t){this._onCollectionChange=t},t.prototype._setUpdateStrategy=function(t){Oi(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)},t}(),Si=function(t){function e(e,n,i){void 0===e&&(e=null);var r=t.call(this,Ei(n),Ci(i,n))||this;return r._onChange=[],r._applyFormState(e),r._setUpdateStrategy(n),r.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),r._initObservables(),r}return Object(d.c)(e,t),e.prototype.setValue=function(t,e){var n=this;void 0===e&&(e={}),this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(function(t){return t(n.value,!1!==e.emitViewToModelChange)}),this.updateValueAndValidity(e)},e.prototype.patchValue=function(t,e){void 0===e&&(e={}),this.setValue(t,e)},e.prototype.reset=function(t,e){void 0===t&&(t=null),void 0===e&&(e={}),this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1},e.prototype._updateValue=function(){},e.prototype._anyControls=function(t){return!1},e.prototype._allControlsDisabled=function(){return this.disabled},e.prototype.registerOnChange=function(t){this._onChange.push(t)},e.prototype._clearChangeFns=function(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=function(){}},e.prototype.registerOnDisabledChange=function(t){this._onDisabledChange.push(t)},e.prototype._forEachChild=function(t){},e.prototype._syncPendingControls=function(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))},e.prototype._applyFormState=function(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t},e}(Pi),Ti=function(t){function e(e,n,i){var r=t.call(this,Ei(n),Ci(i,n))||this;return r.controls=e,r._initObservables(),r._setUpdateStrategy(n),r._setUpControls(),r.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),r}return Object(d.c)(e,t),e.prototype.registerControl=function(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)},e.prototype.addControl=function(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()},e.prototype.removeControl=function(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(function(){}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()},e.prototype.setControl=function(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(function(){}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()},e.prototype.contains=function(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled},e.prototype.setValue=function(t,e){var n=this;void 0===e&&(e={}),this._checkAllValuesPresent(t),Object.keys(t).forEach(function(i){n._throwIfControlMissing(i),n.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)},e.prototype.patchValue=function(t,e){var n=this;void 0===e&&(e={}),Object.keys(t).forEach(function(i){n.controls[i]&&n.controls[i].patchValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)},e.prototype.reset=function(t,e){void 0===t&&(t={}),void 0===e&&(e={}),this._forEachChild(function(n,i){n.reset(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e),this._updatePristine(e),this._updateTouched(e)},e.prototype.getRawValue=function(){return this._reduceChildren({},function(t,e,n){return t[n]=e instanceof Si?e.value:e.getRawValue(),t})},e.prototype._syncPendingControls=function(){var t=this._reduceChildren(!1,function(t,e){return!!e._syncPendingControls()||t});return t&&this.updateValueAndValidity({onlySelf:!0}),t},e.prototype._throwIfControlMissing=function(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error("Cannot find form control with name: "+t+".")},e.prototype._forEachChild=function(t){var e=this;Object.keys(this.controls).forEach(function(n){return t(e.controls[n],n)})},e.prototype._setUpControls=function(){var t=this;this._forEachChild(function(e){e.setParent(t),e._registerOnCollectionChange(t._onCollectionChange)})},e.prototype._updateValue=function(){this.value=this._reduceValue()},e.prototype._anyControls=function(t){var e=this,n=!1;return this._forEachChild(function(i,r){n=n||e.contains(r)&&t(i)}),n},e.prototype._reduceValue=function(){var t=this;return this._reduceChildren({},function(e,n,i){return(n.enabled||t.disabled)&&(e[i]=n.value),e})},e.prototype._reduceChildren=function(t,e){var n=t;return this._forEachChild(function(t,i){n=e(n,t,i)}),n},e.prototype._allControlsDisabled=function(){for(var t=0,e=Object.keys(this.controls);t<e.length;t++)if(this.controls[e[t]].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled},e.prototype._checkAllValuesPresent=function(t){this._forEachChild(function(e,n){if(void 0===t[n])throw new Error("Must supply a value for form control with name: '"+n+"'.")})},e}(Pi),ki=function(t){function e(e,n,i){var r=t.call(this,Ei(n),Ci(i,n))||this;return r.controls=e,r._initObservables(),r._setUpdateStrategy(n),r._setUpControls(),r.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),r}return Object(d.c)(e,t),e.prototype.at=function(t){return this.controls[t]},e.prototype.push=function(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()},e.prototype.insert=function(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()},e.prototype.removeAt=function(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(function(){}),this.controls.splice(t,1),this.updateValueAndValidity()},e.prototype.setControl=function(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(function(){}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()},Object.defineProperty(e.prototype,"length",{get:function(){return this.controls.length},enumerable:!0,configurable:!0}),e.prototype.setValue=function(t,e){var n=this;void 0===e&&(e={}),this._checkAllValuesPresent(t),t.forEach(function(t,i){n._throwIfControlMissing(i),n.at(i).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)},e.prototype.patchValue=function(t,e){var n=this;void 0===e&&(e={}),t.forEach(function(t,i){n.at(i)&&n.at(i).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)},e.prototype.reset=function(t,e){void 0===t&&(t=[]),void 0===e&&(e={}),this._forEachChild(function(n,i){n.reset(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e),this._updatePristine(e),this._updateTouched(e)},e.prototype.getRawValue=function(){return this.controls.map(function(t){return t instanceof Si?t.value:t.getRawValue()})},e.prototype._syncPendingControls=function(){var t=this.controls.reduce(function(t,e){return!!e._syncPendingControls()||t},!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t},e.prototype._throwIfControlMissing=function(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error("Cannot find form control at index "+t)},e.prototype._forEachChild=function(t){this.controls.forEach(function(e,n){t(e,n)})},e.prototype._updateValue=function(){var t=this;this.value=this.controls.filter(function(e){return e.enabled||t.disabled}).map(function(t){return t.value})},e.prototype._anyControls=function(t){return this.controls.some(function(e){return e.enabled&&t(e)})},e.prototype._setUpControls=function(){var t=this;this._forEachChild(function(e){return t._registerControl(e)})},e.prototype._checkAllValuesPresent=function(t){this._forEachChild(function(e,n){if(void 0===t[n])throw new Error("Must supply a value for form control at index: "+n+".")})},e.prototype._allControlsDisabled=function(){for(var t=0,e=this.controls;t<e.length;t++)if(e[t].enabled)return!1;return this.controls.length>0||this.disabled},e.prototype._registerControl=function(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)},e}(Pi),Ai=Promise.resolve(null),Ii=function(t){function e(e,n){var r=t.call(this)||this;return r.submitted=!1,r._directives=[],r.ngSubmit=new i.EventEmitter,r.form=new Ti({},vi(e),_i(n)),r}return Object(d.c)(e,t),e.prototype.ngAfterViewInit=function(){this._setUpdateStrategy()},Object.defineProperty(e.prototype,"formDirective",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"control",{get:function(){return this.form},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"controls",{get:function(){return this.form.controls},enumerable:!0,configurable:!0}),e.prototype.addControl=function(t){var e=this;Ai.then(function(){var n=e._findContainer(t.path);t.control=n.registerControl(t.name,t.control),fi(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),e._directives.push(t)})},e.prototype.getControl=function(t){return this.form.get(t.path)},e.prototype.removeControl=function(t){var e=this;Ai.then(function(){var n=e._findContainer(t.path);n&&n.removeControl(t.name),xi(e._directives,t)})},e.prototype.addFormGroup=function(t){var e=this;Ai.then(function(){var n=e._findContainer(t.path),i=new Ti({});mi(i,t),n.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})},e.prototype.removeFormGroup=function(t){var e=this;Ai.then(function(){var n=e._findContainer(t.path);n&&n.removeControl(t.name)})},e.prototype.getFormGroup=function(t){return this.form.get(t.path)},e.prototype.updateModel=function(t,e){var n=this;Ai.then(function(){n.form.get(t.path).setValue(e)})},e.prototype.setValue=function(t){this.control.setValue(t)},e.prototype.onSubmit=function(t){return this.submitted=!0,bi(this.form,this._directives),this.ngSubmit.emit(t),!1},e.prototype.onReset=function(){this.resetForm()},e.prototype.resetForm=function(t){void 0===t&&(t=void 0),this.form.reset(t),this.submitted=!1},e.prototype._setUpdateStrategy=function(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)},e.prototype._findContainer=function(t){return t.pop(),t.length?this.form.get(t):this.form},e}(ii),Li='\n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });',Mi='\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',zi=function(){function t(){}return t.controlParentException=function(){throw new Error("formControlName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      "+Li)},t.ngModelGroupException=function(){throw new Error('formControlName cannot be used with an ngModelGroup parent. It is only compatible with parents\n       that also have a "form" prefix: formGroupName, formArrayName, or formGroup.\n\n       Option 1:  Update the parent to be formGroupName (reactive form strategy)\n\n        '+Mi+'\n\n        Option 2: Use ngModel instead of formControlName (template-driven strategy)\n\n        \n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>')},t.missingFormException=function(){throw new Error("formGroup expects a FormGroup instance. Please pass one in.\n\n       Example:\n\n       "+Li)},t.groupParentException=function(){throw new Error("formGroupName must be used with a parent formGroup directive.  You'll want to add a formGroup\n      directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      "+Mi)},t.arrayParentException=function(){throw new Error('formArrayName must be used with a parent formGroup directive.  You\'ll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n        Example:\n\n        \n    <div [formGroup]="myGroup">\n      <div formArrayName="cities">\n        <div *ngFor="let city of cityArray.controls; index as i">\n          <input [formControlName]="i">\n        </div>\n      </div>\n    </div>\n\n    In your class:\n\n    this.cityArray = new FormArray([new FormControl(\'SF\')]);\n    this.myGroup = new FormGroup({\n      cities: this.cityArray\n    });')},t.disabledAttrWarning=function(){console.warn("\n      It looks like you're using the disabled attribute with a reactive form directive. If you set disabled to true\n      when you set up this control in your component class, the disabled attribute will actually be set in the DOM for\n      you. We recommend using this approach to avoid 'changed after checked' errors.\n       \n      Example: \n      form = new FormGroup({\n        first: new FormControl({value: 'Nancy', disabled: true}, Validators.required),\n        last: new FormControl('Drew', Validators.required)\n      });\n    ")},t}(),Di=function(t){function e(e,n){var r=t.call(this)||this;return r._validators=e,r._asyncValidators=n,r.submitted=!1,r.directives=[],r.form=null,r.ngSubmit=new i.EventEmitter,r}return Object(d.c)(e,t),e.prototype.ngOnChanges=function(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations())},Object.defineProperty(e.prototype,"formDirective",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"control",{get:function(){return this.form},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return[]},enumerable:!0,configurable:!0}),e.prototype.addControl=function(t){var e=this.form.get(t.path);return fi(e,t),e.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),e},e.prototype.getControl=function(t){return this.form.get(t.path)},e.prototype.removeControl=function(t){xi(this.directives,t)},e.prototype.addFormGroup=function(t){var e=this.form.get(t.path);mi(e,t),e.updateValueAndValidity({emitEvent:!1})},e.prototype.removeFormGroup=function(t){},e.prototype.getFormGroup=function(t){return this.form.get(t.path)},e.prototype.addFormArray=function(t){var e=this.form.get(t.path);mi(e,t),e.updateValueAndValidity({emitEvent:!1})},e.prototype.removeFormArray=function(t){},e.prototype.getFormArray=function(t){return this.form.get(t.path)},e.prototype.updateModel=function(t,e){this.form.get(t.path).setValue(e)},e.prototype.onSubmit=function(t){return this.submitted=!0,bi(this.form,this.directives),this.ngSubmit.emit(t),!1},e.prototype.onReset=function(){this.resetForm()},e.prototype.resetForm=function(t){void 0===t&&(t=void 0),this.form.reset(t),this.submitted=!1},e.prototype._updateDomValue=function(){var t=this;this.directives.forEach(function(e){var n=t.form.get(e.path);e.control!==n&&(function(t,e){e.valueAccessor.registerOnChange(function(){return yi(e)}),e.valueAccessor.registerOnTouched(function(){return yi(e)}),e._rawValidators.forEach(function(t){t.registerOnValidatorChange&&t.registerOnValidatorChange(null)}),e._rawAsyncValidators.forEach(function(t){t.registerOnValidatorChange&&t.registerOnValidatorChange(null)}),t&&t._clearChangeFns()}(e.control,e),n&&fi(n,e),e.control=n)}),this.form._updateTreeValidity({emitEvent:!1})},e.prototype._updateRegistrations=function(){var t=this;this.form._registerOnCollectionChange(function(){return t._updateDomValue()}),this._oldForm&&this._oldForm._registerOnCollectionChange(function(){}),this._oldForm=this.form},e.prototype._updateValidators=function(){var t=vi(this._validators);this.form.validator=ai.compose([this.form.validator,t]);var e=_i(this._asyncValidators);this.form.asyncValidator=ai.composeAsync([this.form.asyncValidator,e])},e.prototype._checkFormPresent=function(){this.form||zi.missingFormException()},e}(ii),Ri=function(){},ji=function(){},Ni=function(){},Bi=n("8ofh"),Fi=n("B1iP"),Vi=n("NePw"),Zi=Object.prototype.toString,Ui=function(t){function e(e,n,i,r){t.call(this),this.sourceObj=e,this.eventName=n,this.selector=i,this.options=r}return Object(d.c)(e,t),e.create=function(t,n,i,r){return Object(Fi.a)(i)&&(r=i,i=void 0),new e(t,n,r,i)},e.setupSubscription=function(t,n,i,r,o){var a;if(function(t){return!!t&&"[object NodeList]"===Zi.call(t)}(t)||function(t){return!!t&&"[object HTMLCollection]"===Zi.call(t)}(t))for(var s=0,u=t.length;s<u;s++)e.setupSubscription(t[s],n,i,r,o);else if(function(t){return!!t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(t)){var l=t;t.addEventListener(n,i,o),a=function(){return l.removeEventListener(n,i)}}else if(function(t){return!!t&&"function"==typeof t.on&&"function"==typeof t.off}(t)){var c=t;t.on(n,i),a=function(){return c.off(n,i)}}else{if(!function(t){return!!t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(t))throw new TypeError("Invalid event target");var p=t;t.addListener(n,i),a=function(){return p.removeListener(n,i)}}r.add(new tn.a(a))},e.prototype._subscribe=function(t){var n=this.selector;e.setupSubscription(this.sourceObj,this.eventName,n?function(){for(var e=[],i=0;i<arguments.length;i++)e[i-0]=arguments[i];var r=Object(Bi.a)(n).apply(void 0,e);r===Vi.a?t.error(Vi.a.e):t.next(r)}:function(e){return t.next(e)},t,this.options)},e}(q.Observable).create,qi=n("8Ut3"),Hi=n("3iOE"),Gi=n("fgj+"),Wi=n("bywS");function Ki(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return function(e){var n=t[t.length-1];Object(Hi.a)(n)?t.pop():n=null;var i=t.length;return function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return 1===t.length||2===t.length&&Object(Hi.a)(t[1])?Object(Gi.a)(t[0]):Object(Wi.a)(1)(dn.apply(void 0,t))}(1===i?new qi.a(t[0],n):i>1?new fn.a(t,n):new Je.a(n),e)}}var Xi=function(){},Ji="*";function Yi(t,e){return void 0===e&&(e=null),{type:2,steps:t,options:e}}function Qi(t){return{type:6,styles:t,offset:null}}function $i(t){Promise.resolve(null).then(t)}var tr=function(){function t(){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this.parentPlayer=null,this.totalTime=0}return t.prototype._onFinish=function(){this._finished||(this._finished=!0,this._onDoneFns.forEach(function(t){return t()}),this._onDoneFns=[])},t.prototype.onStart=function(t){this._onStartFns.push(t)},t.prototype.onDone=function(t){this._onDoneFns.push(t)},t.prototype.onDestroy=function(t){this._onDestroyFns.push(t)},t.prototype.hasStarted=function(){return this._started},t.prototype.init=function(){},t.prototype.play=function(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0},t.prototype.triggerMicrotask=function(){var t=this;$i(function(){return t._onFinish()})},t.prototype._onStart=function(){this._onStartFns.forEach(function(t){return t()}),this._onStartFns=[]},t.prototype.pause=function(){},t.prototype.restart=function(){},t.prototype.finish=function(){this._onFinish()},t.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(function(t){return t()}),this._onDestroyFns=[])},t.prototype.reset=function(){},t.prototype.setPosition=function(t){},t.prototype.getPosition=function(){return 0},t.prototype.triggerCallback=function(t){var e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(function(t){return t()}),e.length=0},t}(),er=function(){function t(t){var e=this;this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;var n=0,i=0,r=0,o=this.players.length;0==o?$i(function(){return e._onFinish()}):this.players.forEach(function(t){t.onDone(function(){++n==o&&e._onFinish()}),t.onDestroy(function(){++i==o&&e._onDestroy()}),t.onStart(function(){++r==o&&e._onStart()})}),this.totalTime=this.players.reduce(function(t,e){return Math.max(t,e.totalTime)},0)}return t.prototype._onFinish=function(){this._finished||(this._finished=!0,this._onDoneFns.forEach(function(t){return t()}),this._onDoneFns=[])},t.prototype.init=function(){this.players.forEach(function(t){return t.init()})},t.prototype.onStart=function(t){this._onStartFns.push(t)},t.prototype._onStart=function(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(function(t){return t()}),this._onStartFns=[])},t.prototype.onDone=function(t){this._onDoneFns.push(t)},t.prototype.onDestroy=function(t){this._onDestroyFns.push(t)},t.prototype.hasStarted=function(){return this._started},t.prototype.play=function(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(function(t){return t.play()})},t.prototype.pause=function(){this.players.forEach(function(t){return t.pause()})},t.prototype.restart=function(){this.players.forEach(function(t){return t.restart()})},t.prototype.finish=function(){this._onFinish(),this.players.forEach(function(t){return t.finish()})},t.prototype.destroy=function(){this._onDestroy()},t.prototype._onDestroy=function(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(function(t){return t.destroy()}),this._onDestroyFns.forEach(function(t){return t()}),this._onDestroyFns=[])},t.prototype.reset=function(){this.players.forEach(function(t){return t.reset()}),this._destroyed=!1,this._finished=!1,this._started=!1},t.prototype.setPosition=function(t){var e=t*this.totalTime;this.players.forEach(function(t){var n=t.totalTime?Math.min(1,e/t.totalTime):1;t.setPosition(n)})},t.prototype.getPosition=function(){var t=0;return this.players.forEach(function(e){var n=e.getPosition();t=Math.min(n,t)}),t},t.prototype.beforeDestroy=function(){this.players.forEach(function(t){t.beforeDestroy&&t.beforeDestroy()})},t.prototype.triggerCallback=function(t){var e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(function(t){return t()}),e.length=0},t}(),nr="!",ir=function(){};function rr(t){return Error("A hint was already declared for 'align=\""+t+"\"'.")}var or=0,ar=function(t){function e(e,n,i){var r=t.call(this,e)||this;return r._elementRef=e,r._changeDetectorRef=n,r._showAlwaysAnimate=!1,r._subscriptAnimationState="",r._hintLabel="",r._hintLabelId="mat-hint-"+or++,r._labelOptions=i||{},r.floatLabel=r._labelOptions.float||"auto",r}return Object(d.c)(e,t),Object.defineProperty(e.prototype,"dividerColor",{get:function(){return this.color},set:function(t){this.color=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hideRequiredMarker",{get:function(){return this._hideRequiredMarker},set:function(t){this._hideRequiredMarker=Z(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_shouldAlwaysFloat",{get:function(){return"always"===this._floatLabel&&!this._showAlwaysAnimate},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_canLabelFloat",{get:function(){return"never"!==this._floatLabel},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hintLabel",{get:function(){return this._hintLabel},set:function(t){this._hintLabel=t,this._processHints()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"floatPlaceholder",{get:function(){return this._floatLabel},set:function(t){this.floatLabel=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"floatLabel",{get:function(){return this._floatLabel},set:function(t){t!==this._floatLabel&&(this._floatLabel=t||this._labelOptions.float||"auto",this._changeDetectorRef.markForCheck())},enumerable:!0,configurable:!0}),e.prototype.ngAfterContentInit=function(){var t=this;this._validateControlChild(),this._control.controlType&&this._elementRef.nativeElement.classList.add("mat-form-field-type-"+this._control.controlType),this._control.stateChanges.pipe(Ki(null)).subscribe(function(){t._validatePlaceholders(),t._syncDescribedByIds(),t._changeDetectorRef.markForCheck()});var e=this._control.ngControl;e&&e.valueChanges&&e.valueChanges.subscribe(function(){t._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(Ki(null)).subscribe(function(){t._processHints(),t._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(Ki(null)).subscribe(function(){t._syncDescribedByIds(),t._changeDetectorRef.markForCheck()})},e.prototype.ngAfterContentChecked=function(){this._validateControlChild()},e.prototype.ngAfterViewInit=function(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()},e.prototype._shouldForward=function(t){var e=this._control?this._control.ngControl:null;return e&&e[t]},e.prototype._hasPlaceholder=function(){return!(!this._control.placeholder&&!this._placeholderChild)},e.prototype._hasLabel=function(){return!!this._labelChild},e.prototype._shouldLabelFloat=function(){return this._canLabelFloat&&(this._control.shouldLabelFloat||this._control.shouldPlaceholderFloat||this._shouldAlwaysFloat)},e.prototype._hideControlPlaceholder=function(){return!this._hasLabel()||!this._shouldLabelFloat()},e.prototype._hasFloatingLabel=function(){return this._hasLabel()||this._hasPlaceholder()},e.prototype._getDisplayedMessages=function(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"},e.prototype._animateAndLockLabel=function(){var t=this;this._hasFloatingLabel()&&this._canLabelFloat&&(this._showAlwaysAnimate=!0,this._floatLabel="always",Ui(this._label.nativeElement,"transitionend").pipe(Ye(1)).subscribe(function(){t._showAlwaysAnimate=!1}),this._changeDetectorRef.markForCheck())},e.prototype._validatePlaceholders=function(){if(this._control.placeholder&&this._placeholderChild)throw Error("Placeholder attribute and child element were both specified.")},e.prototype._processHints=function(){this._validateHints(),this._syncDescribedByIds()},e.prototype._validateHints=function(){var t,e,n=this;this._hintChildren&&this._hintChildren.forEach(function(i){if("start"===i.align){if(t||n.hintLabel)throw rr("start");t=i}else if("end"===i.align){if(e)throw rr("end");e=i}})},e.prototype._syncDescribedByIds=function(){if(this._control){var t=[];if("hint"===this._getDisplayedMessages()){var e=this._hintChildren?this._hintChildren.find(function(t){return"start"===t.align}):null,n=this._hintChildren?this._hintChildren.find(function(t){return"end"===t.align}):null;e?t.push(e.id):this._hintLabel&&t.push(this._hintLabelId),n&&t.push(n.id)}else this._errorChildren&&(t=this._errorChildren.map(function(t){return t.id}));this._control.setDescribedByIds(t)}},e.prototype._validateControlChild=function(){if(!this._control)throw Error("mat-form-field must contain a MatFormFieldControl.")},e}(Re(function(t){this._elementRef=t},"primary")),sr=function(){},ur=i["\u0275crt"]({encapsulation:2,styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none}.mat-form-field-prefix .mat-icon,.mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-prefix .mat-icon-button,.mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform:perspective(100px);-ms-transform:none;transform-origin:0 0;transition:transform .4s cubic-bezier(.25,.8,.25,1),color .4s cubic-bezier(.25,.8,.25,1),width .4s cubic-bezier(.25,.8,.25,1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label,.mat-form-field-empty.mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-placeholder-wrapper .mat-form-field-placeholder,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-placeholder-wrapper .mat-form-field-placeholder{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-placeholder-wrapper .mat-form-field-placeholder,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-placeholder-wrapper .mat-form-field-placeholder{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;height:1px;width:100%}.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.mat-form-field-underline .mat-form-field-ripple{position:absolute;top:0;left:0;width:100%;height:2px;transform-origin:50%;transform:scaleX(.5);visibility:hidden;opacity:0;transition:background-color .3s cubic-bezier(.55,0,.55,.2)}.mat-form-field-invalid:not(.mat-focused) .mat-form-field-underline .mat-form-field-ripple{height:1px}.mat-focused .mat-form-field-underline .mat-form-field-ripple,.mat-form-field-invalid .mat-form-field-underline .mat-form-field-ripple{visibility:visible;opacity:1;transform:scaleX(1);transition:transform .3s cubic-bezier(.25,.8,.25,1),opacity .1s cubic-bezier(.25,.8,.25,1),background-color .3s cubic-bezier(.25,.8,.25,1)}.mat-form-field-subscript-wrapper{position:absolute;width:100%;overflow:hidden}.mat-form-field-label-wrapper .mat-icon,.mat-form-field-subscript-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}",".mat-input-element{font:inherit;background:0 0;color:currentColor;border:none;outline:0;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element::-ms-clear,.mat-input-element::-ms-reveal{display:none}.mat-input-element[type=date]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=month]::after,.mat-input-element[type=time]::after,.mat-input-element[type=week]::after{content:' ';white-space:pre;width:1px}.mat-input-element::placeholder{transition:color .4s .133s cubic-bezier(.25,.8,.25,1)}.mat-input-element::-moz-placeholder{transition:color .4s .133s cubic-bezier(.25,.8,.25,1)}.mat-input-element::-webkit-input-placeholder{transition:color .4s .133s cubic-bezier(.25,.8,.25,1)}.mat-input-element:-ms-input-placeholder{transition:color .4s .133s cubic-bezier(.25,.8,.25,1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent!important;transition:none}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent!important;transition:none}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent!important;transition:none}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent!important;transition:none}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-autosize{resize:none}"],data:{animation:[{type:7,name:"transitionMessages",definitions:[{type:0,name:"enter",styles:{type:6,styles:{opacity:1,transform:"translateY(0%)"},offset:null},options:void 0},{type:1,expr:"void => enter",animation:[{type:6,styles:{opacity:0,transform:"translateY(-100%)"},offset:null},{type:4,styles:null,timings:"300ms cubic-bezier(0.55, 0, 0.55, 0.2)"}],options:null}],options:{}}]}});function lr(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,1,"div",[["class","mat-input-prefix mat-form-field-prefix"]],null,null,null,null,null)),i["\u0275ncd"](null,0)],null,null)}function cr(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,2,null,null,null,null,null,null,null)),i["\u0275ncd"](null,2),(t()(),i["\u0275ted"](2,null,["",""]))],null,function(t,e){t(e,2,0,e.component._control.placeholder)})}function pr(t){return i["\u0275vid"](0,[i["\u0275ncd"](null,3),(t()(),i["\u0275and"](0,null,null,0))],null,null)}function hr(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,1,"span",[["aria-hidden","true"],["class","mat-placeholder-required mat-form-field-required-marker"]],null,null,null,null,null)),(t()(),i["\u0275ted"](-1,null,["\xa0*"]))],null,null)}function fr(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,[[4,0],["label",1]],null,7,"label",[["class","mat-form-field-label mat-input-placeholder mat-form-field-placeholder"]],[[1,"for",0],[1,"aria-owns",0],[2,"mat-empty",null],[2,"mat-form-field-empty",null],[2,"mat-accent",null],[2,"mat-warn",null]],null,null,null,null)),i["\u0275did"](1,16384,null,0,I,[],{ngSwitch:[0,"ngSwitch"]},null),(t()(),i["\u0275and"](16777216,null,null,1,null,cr)),i["\u0275did"](3,278528,null,0,L,[i.ViewContainerRef,i.TemplateRef,I],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),i["\u0275and"](16777216,null,null,1,null,pr)),i["\u0275did"](5,278528,null,0,L,[i.ViewContainerRef,i.TemplateRef,I],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),i["\u0275and"](16777216,null,null,1,null,hr)),i["\u0275did"](7,16384,null,0,T,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(t,e){var n=e.component;t(e,1,0,n._hasLabel()),t(e,3,0,!1),t(e,5,0,!0),t(e,7,0,!n.hideRequiredMarker&&n._control.required&&!n._control.disabled)},function(t,e){var n=e.component;t(e,0,0,n._control.id,n._control.id,n._control.empty&&!n._shouldAlwaysFloat,n._control.empty&&!n._shouldAlwaysFloat,"accent"==n.color,"warn"==n.color)})}function dr(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,1,"div",[["class","mat-input-suffix mat-form-field-suffix"]],null,null,null,null,null)),i["\u0275ncd"](null,4)],null,null)}function mr(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,1,"div",[],[[24,"@transitionMessages",0]],null,null,null,null)),i["\u0275ncd"](null,5)],null,function(t,e){t(e,0,0,e.component._subscriptAnimationState)})}function yr(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,1,"div",[["class","mat-hint"]],[[8,"id",0]],null,null,null,null)),(t()(),i["\u0275ted"](1,null,["",""]))],null,function(t,e){var n=e.component;t(e,0,0,n._hintLabelId),t(e,1,0,n.hintLabel)})}function gr(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,5,"div",[["class","mat-input-hint-wrapper mat-form-field-hint-wrapper"]],[[24,"@transitionMessages",0]],null,null,null,null)),(t()(),i["\u0275and"](16777216,null,null,1,null,yr)),i["\u0275did"](2,16384,null,0,T,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),i["\u0275ncd"](null,6),(t()(),i["\u0275eld"](4,0,null,null,0,"div",[["class","mat-input-hint-spacer mat-form-field-hint-spacer"]],null,null,null,null,null)),i["\u0275ncd"](null,7)],function(t,e){t(e,2,0,e.component.hintLabel)},function(t,e){t(e,0,0,e.component._subscriptAnimationState)})}function vr(t){return i["\u0275vid"](2,[i["\u0275qud"](402653184,1,{underlineRef:0}),i["\u0275qud"](402653184,2,{_connectionContainerRef:0}),i["\u0275qud"](402653184,3,{_inputContainerRef:0}),i["\u0275qud"](671088640,4,{_label:0}),(t()(),i["\u0275eld"](4,0,null,null,18,"div",[["class","mat-input-wrapper mat-form-field-wrapper"]],null,null,null,null,null)),(t()(),i["\u0275eld"](5,0,[[2,0],["connectionContainer",1]],null,9,"div",[["class","mat-input-flex mat-form-field-flex"]],null,[[null,"click"]],function(t,e,n){var i=!0,r=t.component;return"click"===e&&(i=!1!==(r._control.onContainerClick&&r._control.onContainerClick(n))&&i),i},null,null)),(t()(),i["\u0275and"](16777216,null,null,1,null,lr)),i["\u0275did"](7,16384,null,0,T,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275eld"](8,0,[[3,0],["inputContainer",1]],null,4,"div",[["class","mat-input-infix mat-form-field-infix"]],null,null,null,null,null)),i["\u0275ncd"](null,1),(t()(),i["\u0275eld"](10,0,null,null,2,"span",[["class","mat-form-field-label-wrapper mat-input-placeholder-wrapper mat-form-field-placeholder-wrapper"]],null,null,null,null,null)),(t()(),i["\u0275and"](16777216,null,null,1,null,fr)),i["\u0275did"](12,16384,null,0,T,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275and"](16777216,null,null,1,null,dr)),i["\u0275did"](14,16384,null,0,T,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275eld"](15,0,[[1,0],["underline",1]],null,1,"div",[["class","mat-input-underline mat-form-field-underline"]],null,null,null,null,null)),(t()(),i["\u0275eld"](16,0,null,null,0,"span",[["class","mat-input-ripple mat-form-field-ripple"]],[[2,"mat-accent",null],[2,"mat-warn",null]],null,null,null,null)),(t()(),i["\u0275eld"](17,0,null,null,5,"div",[["class","mat-input-subscript-wrapper mat-form-field-subscript-wrapper"]],null,null,null,null,null)),i["\u0275did"](18,16384,null,0,I,[],{ngSwitch:[0,"ngSwitch"]},null),(t()(),i["\u0275and"](16777216,null,null,1,null,mr)),i["\u0275did"](20,278528,null,0,L,[i.ViewContainerRef,i.TemplateRef,I],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),i["\u0275and"](16777216,null,null,1,null,gr)),i["\u0275did"](22,278528,null,0,L,[i.ViewContainerRef,i.TemplateRef,I],{ngSwitchCase:[0,"ngSwitchCase"]},null)],function(t,e){var n=e.component;t(e,7,0,n._prefixChildren.length),t(e,12,0,n._hasFloatingLabel()),t(e,14,0,n._suffixChildren.length),t(e,18,0,n._getDisplayedMessages()),t(e,20,0,"error"),t(e,22,0,"hint")},function(t,e){var n=e.component;t(e,16,0,"accent"==n.color,"warn"==n.color)})}var _r=function(){function t(t){this.durationSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new br(t,this.durationSelector))},t}(),br=function(t){function e(e,n){t.call(this,e),this.durationSelector=n,this.hasValue=!1}return Object(d.c)(e,t),e.prototype._next=function(t){if(this.value=t,this.hasValue=!0,!this.throttled){var e=Object(Bi.a)(this.durationSelector)(t);if(e===Vi.a)this.destination.error(Vi.a.e);else{var n=Object(Jn.a)(this,e);n.closed?this.clearThrottle():this.add(this.throttled=n)}}},e.prototype.clearThrottle=function(){var t=this.value,e=this.hasValue,n=this.throttled;n&&(this.remove(n),this.throttled=null,n.unsubscribe()),e&&(this.value=null,this.hasValue=!1,this.destination.next(t))},e.prototype.notifyNext=function(t,e,n,i){this.clearThrottle()},e.prototype.notifyComplete=function(){this.clearThrottle()},e}(Yn.a),xr=function(t){function e(e,n,i){var r,o;void 0===e&&(e=0),t.call(this),this.period=-1,this.dueTime=0,r=n,!Object(Xn.a)(r)&&r-parseFloat(r)+1>=0?this.period=Number(n)<1?1:Number(n):Object(Hi.a)(n)&&(i=n),Object(Hi.a)(i)||(i=rn),this.scheduler=i,this.dueTime=(o=e)instanceof Date&&!isNaN(+o)?+e-this.scheduler.now():e}return Object(d.c)(e,t),e.create=function(t,n,i){return void 0===t&&(t=0),new e(t,n,i)},e.dispatch=function(t){var e=t.index,n=t.period,i=t.subscriber;if(i.next(e),!i.closed){if(-1===n)return i.complete();t.index=e+1,this.schedule(t,n)}},e.prototype._subscribe=function(t){return this.scheduler.schedule(e.dispatch,this.dueTime,{index:0,period:this.period,subscriber:t})},e}(q.Observable).create;function wr(t,e){return void 0===e&&(e=rn),n=function(){return xr(t,e)},function(t){return t.lift(new _r(n))};var n}function Er(t){return function(e){return e.lift(new Cr(t))}}var Cr=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){return e.subscribe(new Or(t,this.notifier))},t}(),Or=function(t){function e(e,n){t.call(this,e),this.notifier=n,this.add(Object(Jn.a)(this,n))}return Object(d.c)(e,t),e.prototype.notifyNext=function(t,e,n,i,r){this.complete()},e.prototype.notifyComplete=function(){},e}(Yn.a),Pr=["button","checkbox","file","hidden","image","radio","range","reset","submit"],Sr=0,Tr=function(t){function e(e,n,i,r,o,a,s){var u=t.call(this,a,r,o,i)||this;return u._elementRef=e,u._platform=n,u.ngControl=i,u._uid="mat-input-"+Sr++,u._isServer=!1,u.focused=!1,u.stateChanges=new U.a,u.controlType="mat-input",u._disabled=!1,u.placeholder="",u._required=!1,u._type="text",u._readonly=!1,u._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(function(t){return Ie().has(t)}),u._inputValueAccessor=s||u._elementRef.nativeElement,u._previousNativeValue=u.value,u.id=u.id,n.IOS&&e.nativeElement.addEventListener("keyup",function(t){var e=t.target;e.value||e.selectionStart||e.selectionEnd||(e.setSelectionRange(1,1),e.setSelectionRange(0,0))}),u._isServer=!u._platform.isBrowser,u}return Object(d.c)(e,t),Object.defineProperty(e.prototype,"disabled",{get:function(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled},set:function(t){this._disabled=Z(t),this.focused&&(this.focused=!1,this.stateChanges.next())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._id},set:function(t){this._id=t||this._uid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"required",{get:function(){return this._required},set:function(t){this._required=Z(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(t){this._type=t||"text",this._validateType(),!this._isTextarea()&&Ie().has(this._type)&&(this._elementRef.nativeElement.type=this._type)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._inputValueAccessor.value},set:function(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readonly",{get:function(){return this._readonly},set:function(t){this._readonly=Z(t)},enumerable:!0,configurable:!0}),e.prototype.ngOnChanges=function(){this.stateChanges.next()},e.prototype.ngOnDestroy=function(){this.stateChanges.complete()},e.prototype.ngDoCheck=function(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue()},e.prototype.focus=function(){this._elementRef.nativeElement.focus()},e.prototype._focusChanged=function(t){t===this.focused||this.readonly||(this.focused=t,this.stateChanges.next())},e.prototype._onInput=function(){},e.prototype._dirtyCheckNativeValue=function(){var t=this.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())},e.prototype._validateType=function(){if(Pr.indexOf(this._type)>-1)throw Error('Input type "'+this._type+"\" isn't supported by matInput.")},e.prototype._isNeverEmpty=function(){return this._neverEmptyInputTypes.indexOf(this._type)>-1},e.prototype._isBadInput=function(){var t=this._elementRef.nativeElement.validity;return t&&t.badInput},e.prototype._isTextarea=function(){var t=this._elementRef.nativeElement,e=this._platform.isBrowser?t.nodeName:t.name;return!!e&&"textarea"===e.toLowerCase()},Object.defineProperty(e.prototype,"empty",{get:function(){return!this._isNeverEmpty()&&!this._elementRef.nativeElement.value&&!this._isBadInput()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shouldLabelFloat",{get:function(){return this.focused||!this.empty},enumerable:!0,configurable:!0}),e.prototype.setDescribedByIds=function(t){this._ariaDescribedby=t.join(" ")},e.prototype.onContainerClick=function(){this.focus()},e}(function(t){return function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=t.apply(this,e)||this;return i.errorState=!1,i.stateChanges=new U.a,i}return Object(d.c)(e,t),e.prototype.updateErrorState=function(){var t=this.errorState,e=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);e!==t&&(this.errorState=e,this.stateChanges.next())},e}(function(t,e,n,i){this._defaultErrorStateMatcher=t,this._parentForm=e,this._parentFormGroup=n,this.ngControl=i})}()),kr=function(){},Ar=n("2kLc"),Ir=function(){function t(t,e){this._ngZone=t,this._platform=e,this._scrolled=new U.a,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map}return t.prototype.register=function(t){var e=this,n=t.elementScrolled().subscribe(function(){return e._scrolled.next(t)});this.scrollContainers.set(t,n)},t.prototype.deregister=function(t){var e=this.scrollContainers.get(t);e&&(e.unsubscribe(),this.scrollContainers.delete(t))},t.prototype.scrolled=function(t){var e=this;return void 0===t&&(t=20),this._platform.isBrowser?q.Observable.create(function(n){e._globalSubscription||e._addGlobalListener();var i=t>0?e._scrolled.pipe(wr(t)).subscribe(n):e._scrolled.subscribe(n);return e._scrolledCount++,function(){i.unsubscribe(),e._scrolledCount--,e._scrolledCount||e._removeGlobalListener()}}):dn()},t.prototype.ngOnDestroy=function(){var t=this;this._removeGlobalListener(),this.scrollContainers.forEach(function(e,n){return t.deregister(n)})},t.prototype.ancestorScrolled=function(t,e){var n=this.getAncestorScrollContainers(t);return this.scrolled(e).pipe(Object(ln.a)(function(t){return!t||n.indexOf(t)>-1}))},t.prototype.getAncestorScrollContainers=function(t){var e=this,n=[];return this.scrollContainers.forEach(function(i,r){e._scrollableContainsElement(r,t)&&n.push(r)}),n},t.prototype._scrollableContainsElement=function(t,e){var n=e.nativeElement,i=t.getElementRef().nativeElement;do{if(n==i)return!0}while(n=n.parentElement);return!1},t.prototype._addGlobalListener=function(){var t=this;this._globalSubscription=this._ngZone.runOutsideAngular(function(){return Ui(window.document,"scroll").subscribe(function(){return t._scrolled.next()})})},t.prototype._removeGlobalListener=function(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)},t}();function Lr(t,e,n){return t||new Ir(e,n)}var Mr=function(){function t(t,e,n){var i=this;this._elementRef=t,this._scroll=e,this._ngZone=n,this._elementScrolled=new U.a,this._scrollListener=function(t){return i._elementScrolled.next(t)}}return t.prototype.ngOnInit=function(){var t=this;this._ngZone.runOutsideAngular(function(){t.getElementRef().nativeElement.addEventListener("scroll",t._scrollListener)}),this._scroll.register(this)},t.prototype.ngOnDestroy=function(){this._scroll.deregister(this),this._scrollListener&&this.getElementRef().nativeElement.removeEventListener("scroll",this._scrollListener)},t.prototype.elementScrolled=function(){return this._elementScrolled.asObservable()},t.prototype.getElementRef=function(){return this._elementRef},t}(),zr=function(){function t(t,e){var n=this;this._change=t.isBrowser?e.runOutsideAngular(function(){return Object(Ar.a)(Ui(window,"resize"),Ui(window,"orientationchange"))}):dn(),this._invalidateCache=this.change().subscribe(function(){return n._updateViewportSize()})}return t.prototype.ngOnDestroy=function(){this._invalidateCache.unsubscribe()},t.prototype.getViewportSize=function(){return this._viewportSize||this._updateViewportSize(),{width:this._viewportSize.width,height:this._viewportSize.height}},t.prototype.getViewportRect=function(){var t=this.getViewportScrollPosition(),e=this.getViewportSize(),n=e.width,i=e.height;return{top:t.top,left:t.left,bottom:t.top+i,right:t.left+n,height:i,width:n}},t.prototype.getViewportScrollPosition=function(){var t=document.documentElement.getBoundingClientRect();return{top:-t.top||document.body.scrollTop||window.scrollY||document.documentElement.scrollTop||0,left:-t.left||document.body.scrollLeft||window.scrollX||document.documentElement.scrollLeft||0}},t.prototype.change=function(t){return void 0===t&&(t=20),t>0?this._change.pipe(wr(t)):this._change},t.prototype._updateViewportSize=function(){this._viewportSize={width:window.innerWidth,height:window.innerHeight}},t}();function Dr(t,e,n){return t||new zr(e,n)}var Rr=function(){};function jr(){throw Error("Host already has a portal attached")}var Nr=function(){function t(){}return t.prototype.attach=function(t){return null==t&&function(){throw Error("Attempting to attach a portal to a null PortalOutlet")}(),t.hasAttached()&&jr(),this._attachedHost=t,t.attach(this)},t.prototype.detach=function(){var t=this._attachedHost;null==t?function(){throw Error("Attempting to detach a portal that is not attached to a host")}():(this._attachedHost=null,t.detach())},Object.defineProperty(t.prototype,"isAttached",{get:function(){return null!=this._attachedHost},enumerable:!0,configurable:!0}),t.prototype.setAttachedHost=function(t){this._attachedHost=t},t}(),Br=function(t){function e(e,n,i){var r=t.call(this)||this;return r.component=e,r.viewContainerRef=n,r.injector=i,r}return Object(d.c)(e,t),e}(Nr),Fr=function(t){function e(e,n,i){var r=t.call(this)||this;return r.templateRef=e,r.viewContainerRef=n,r.context=i,r}return Object(d.c)(e,t),Object.defineProperty(e.prototype,"origin",{get:function(){return this.templateRef.elementRef},enumerable:!0,configurable:!0}),e.prototype.attach=function(e,n){return void 0===n&&(n=this.context),this.context=n,t.prototype.attach.call(this,e)},e.prototype.detach=function(){return this.context=void 0,t.prototype.detach.call(this)},e}(Nr),Vr=function(t){function e(e,n,i,r){var o=t.call(this)||this;return o.outletElement=e,o._componentFactoryResolver=n,o._appRef=i,o._defaultInjector=r,o}return Object(d.c)(e,t),e.prototype.attachComponentPortal=function(t){var e,n=this,i=this._componentFactoryResolver.resolveComponentFactory(t.component);return t.viewContainerRef?(e=t.viewContainerRef.createComponent(i,t.viewContainerRef.length,t.injector||t.viewContainerRef.parentInjector),this.setDisposeFn(function(){return e.destroy()})):(e=i.create(t.injector||this._defaultInjector),this._appRef.attachView(e.hostView),this.setDisposeFn(function(){n._appRef.detachView(e.hostView),e.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(e)),e},e.prototype.attachTemplatePortal=function(t){var e=this,n=t.viewContainerRef,i=n.createEmbeddedView(t.templateRef,t.context);return i.detectChanges(),i.rootNodes.forEach(function(t){return e.outletElement.appendChild(t)}),this.setDisposeFn(function(){var t=n.indexOf(i);-1!==t&&n.remove(t)}),i},e.prototype.dispose=function(){t.prototype.dispose.call(this),null!=this.outletElement.parentNode&&this.outletElement.parentNode.removeChild(this.outletElement)},e.prototype._getComponentRootNode=function(t){return t.hostView.rootNodes[0]},e}(function(){function t(){this._isDisposed=!1}return t.prototype.hasAttached=function(){return!!this._attachedPortal},t.prototype.attach=function(t){return t||function(){throw Error("Must provide a portal to attach")}(),this.hasAttached()&&jr(),this._isDisposed&&function(){throw Error("This PortalOutlet has already been disposed")}(),t instanceof Br?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof Fr?(this._attachedPortal=t,this.attachTemplatePortal(t)):void function(){throw Error("Attempting to attach an unknown Portal type. BasePortalOutlet accepts either a ComponentPortal or a TemplatePortal.")}()},t.prototype.detach=function(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()},t.prototype.dispose=function(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0},t.prototype.setDisposeFn=function(t){this._disposeFn=t},t.prototype._invokeDisposeFn=function(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)},t}()),Zr=function(){},Ur=function(){function t(){}return t.prototype.enable=function(){},t.prototype.disable=function(){},t.prototype.attach=function(){},t}(),qr=function(){return function(t){var e=this;this.scrollStrategy=new Ur,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.direction="ltr",t&&Object.keys(t).filter(function(e){return"undefined"!=typeof t[e]}).forEach(function(n){return e[n]=t[n]})}}();function Hr(){return Error("Scroll strategy has already been attached.")}var Gr=function(){function t(t,e,n,i){var r=this;this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=n,this._config=i,this._scrollSubscription=null,this._detach=function(){r.disable(),r._overlayRef.hasAttached()&&r._ngZone.run(function(){return r._overlayRef.detach()})}}return t.prototype.attach=function(t){if(this._overlayRef)throw Hr();this._overlayRef=t},t.prototype.enable=function(){var t=this;if(!this._scrollSubscription){var e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(function(){var e=t._viewportRuler.getViewportScrollPosition().top;Math.abs(e-t._initialScrollPosition)>t._config.threshold?t._detach():t._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}},t.prototype.disable=function(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)},t}(),Wr=function(){function t(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}return t.prototype.attach=function(){},t.prototype.enable=function(){if(this._canBeEnabled()){var t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=-this._previousScrollPosition.left+"px",t.style.top=-this._previousScrollPosition.top+"px",t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}},t.prototype.disable=function(){if(this._isEnabled){var t=this._document.documentElement,e=this._document.body,n=t.style.scrollBehavior||"",i=e.style.scrollBehavior||"";this._isEnabled=!1,t.style.left=this._previousHTMLStyles.left,t.style.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),t.style.scrollBehavior=e.style.scrollBehavior="auto",window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),t.style.scrollBehavior=n,e.style.scrollBehavior=i}},t.prototype._canBeEnabled=function(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;var t=this._document.body,e=this._viewportRuler.getViewportSize();return t.scrollHeight>e.height||t.scrollWidth>e.width},t}();function Kr(t,e){return e.some(function(e){return t.bottom<e.top||t.top>e.bottom||t.right<e.left||t.left>e.right})}function Xr(t,e){return e.some(function(e){return t.top<e.top||t.bottom>e.bottom||t.left<e.left||t.right>e.right})}var Jr=function(){function t(t,e,n,i){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=n,this._config=i,this._scrollSubscription=null}return t.prototype.attach=function(t){if(this._overlayRef)throw Hr();this._overlayRef=t},t.prototype.enable=function(){var t=this;this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(function(){if(t._overlayRef.updatePosition(),t._config&&t._config.autoClose){var e=t._overlayRef.overlayElement.getBoundingClientRect(),n=t._viewportRuler.getViewportSize(),i=n.width,r=n.height;Kr(e,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(t.disable(),t._ngZone.run(function(){return t._overlayRef.detach()}))}}))},t.prototype.disable=function(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)},t}(),Yr=function(){return function(t,e,n,i){var r=this;this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=n,this.noop=function(){return new Ur},this.close=function(t){return new Gr(r._scrollDispatcher,r._ngZone,r._viewportRuler,t)},this.block=function(){return new Wr(r._viewportRuler,r._document)},this.reposition=function(t){return new Jr(r._scrollDispatcher,r._viewportRuler,r._ngZone,t)},this._document=i}}(),Qr=function(){function t(t,e,n,i,r,o){this._portalOutlet=t,this._pane=e,this._config=n,this._ngZone=i,this._keyboardDispatcher=r,this._document=o,this._backdropElement=null,this._backdropClick=new U.a,this._attachments=new U.a,this._detachments=new U.a,this._keydownEvents=new U.a,n.scrollStrategy&&n.scrollStrategy.attach(this)}return Object.defineProperty(t.prototype,"overlayElement",{get:function(){return this._pane},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"backdropElement",{get:function(){return this._backdropElement},enumerable:!0,configurable:!0}),t.prototype.attach=function(t){var e=this,n=this._portalOutlet.attach(t);return this._config.positionStrategy&&this._config.positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._config.scrollStrategy&&this._config.scrollStrategy.enable(),this._ngZone.onStable.asObservable().pipe(Ye(1)).subscribe(function(){e.hasAttached()&&e.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&(Array.isArray(this._config.panelClass)?this._config.panelClass.forEach(function(t){return e._pane.classList.add(t)}):this._pane.classList.add(this._config.panelClass)),this._attachments.next(),this._keyboardDispatcher.add(this),n},t.prototype.detach=function(){if(this.hasAttached()){this.detachBackdrop(),this._togglePointerEvents(!1),this._config.positionStrategy&&this._config.positionStrategy.detach&&this._config.positionStrategy.detach(),this._config.scrollStrategy&&this._config.scrollStrategy.disable();var t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),t}},t.prototype.dispose=function(){var t=this.hasAttached();this._config.positionStrategy&&this._config.positionStrategy.dispose(),this._config.scrollStrategy&&this._config.scrollStrategy.disable(),this.detachBackdrop(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),t&&this._detachments.next(),this._detachments.complete()},t.prototype.hasAttached=function(){return this._portalOutlet.hasAttached()},t.prototype.backdropClick=function(){return this._backdropClick.asObservable()},t.prototype.attachments=function(){return this._attachments.asObservable()},t.prototype.detachments=function(){return this._detachments.asObservable()},t.prototype.keydownEvents=function(){return this._keydownEvents.asObservable()},t.prototype.getConfig=function(){return this._config},t.prototype.updatePosition=function(){this._config.positionStrategy&&this._config.positionStrategy.apply()},t.prototype.updateSize=function(t){this._config=Object(d.a)({},this._config,t),this._updateElementSize()},t.prototype.setDirection=function(t){this._config=Object(d.a)({},this._config,{direction:t}),this._updateElementDirection()},t.prototype._updateElementDirection=function(){this._pane.setAttribute("dir",this._config.direction)},t.prototype._updateElementSize=function(){(this._config.width||0===this._config.width)&&(this._pane.style.width=$r(this._config.width)),(this._config.height||0===this._config.height)&&(this._pane.style.height=$r(this._config.height)),(this._config.minWidth||0===this._config.minWidth)&&(this._pane.style.minWidth=$r(this._config.minWidth)),(this._config.minHeight||0===this._config.minHeight)&&(this._pane.style.minHeight=$r(this._config.minHeight)),(this._config.maxWidth||0===this._config.maxWidth)&&(this._pane.style.maxWidth=$r(this._config.maxWidth)),(this._config.maxHeight||0===this._config.maxHeight)&&(this._pane.style.maxHeight=$r(this._config.maxHeight))},t.prototype._togglePointerEvents=function(t){this._pane.style.pointerEvents=t?"auto":"none"},t.prototype._attachBackdrop=function(){var t=this;this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._backdropElement.classList.add(this._config.backdropClass),this._pane.parentElement.insertBefore(this._backdropElement,this._pane),this._backdropElement.addEventListener("click",function(e){return t._backdropClick.next(e)}),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(function(){requestAnimationFrame(function(){t._backdropElement&&t._backdropElement.classList.add("cdk-overlay-backdrop-showing")})}):this._backdropElement.classList.add("cdk-overlay-backdrop-showing")},t.prototype._updateStackingOrder=function(){this._pane.nextSibling&&this._pane.parentNode.appendChild(this._pane)},t.prototype.detachBackdrop=function(){var t=this,e=this._backdropElement;if(e){var n=function(){e&&e.parentNode&&e.parentNode.removeChild(e),t._backdropElement==e&&(t._backdropElement=null)};e.classList.remove("cdk-overlay-backdrop-showing"),this._config.backdropClass&&e.classList.remove(this._config.backdropClass),e.addEventListener("transitionend",n),e.style.pointerEvents="none",this._ngZone.runOutsideAngular(function(){setTimeout(n,500)})}},t}();function $r(t){return"string"==typeof t?t:t+"px"}var to=function(){function t(t,e,n,i,r){this._connectedTo=n,this._viewportRuler=i,this._document=r,this._dir="ltr",this._offsetX=0,this._offsetY=0,this.scrollables=[],this._resizeSubscription=tn.a.EMPTY,this._preferredPositions=[],this._applied=!1,this._positionLocked=!1,this._onPositionChange=new U.a,this._origin=this._connectedTo.nativeElement,this.withFallbackPosition(t,e)}return Object.defineProperty(t.prototype,"_isRtl",{get:function(){return"rtl"===this._dir},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onPositionChange",{get:function(){return this._onPositionChange.asObservable()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"positions",{get:function(){return this._preferredPositions},enumerable:!0,configurable:!0}),t.prototype.attach=function(t){var e=this;this._overlayRef=t,this._pane=t.overlayElement,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(function(){return e.apply()})},t.prototype.dispose=function(){this._applied=!1,this._resizeSubscription.unsubscribe(),this._onPositionChange.complete()},t.prototype.detach=function(){this._applied=!1,this._resizeSubscription.unsubscribe()},t.prototype.apply=function(){if(this._applied&&this._positionLocked&&this._lastConnectedPosition)this.recalculateLastPosition();else{this._applied=!0;for(var t,e,n=this._pane,i=this._origin.getBoundingClientRect(),r=n.getBoundingClientRect(),o=this._viewportRuler.getViewportSize(),a=0,s=this._preferredPositions;a<s.length;a++){var u=s[a],l=this._getOriginConnectionPoint(i,u),c=this._getOverlayPoint(l,r,o,u);if(c.fitsInViewport)return this._setElementPosition(n,r,c,u),void(this._lastConnectedPosition=u);(!t||t.visibleArea<c.visibleArea)&&(t=c,e=u)}this._setElementPosition(n,r,t,e)}},t.prototype.recalculateLastPosition=function(){if(this._lastConnectedPosition){var t=this._origin.getBoundingClientRect(),e=this._pane.getBoundingClientRect(),n=this._viewportRuler.getViewportSize(),i=this._lastConnectedPosition||this._preferredPositions[0],r=this._getOriginConnectionPoint(t,i),o=this._getOverlayPoint(r,e,n,i);this._setElementPosition(this._pane,e,o,i)}},t.prototype.withScrollableContainers=function(t){this.scrollables=t},t.prototype.withFallbackPosition=function(t,e,n,i){var r=new function(t,e,n,i){this.offsetX=n,this.offsetY=i,this.originX=t.originX,this.originY=t.originY,this.overlayX=e.overlayX,this.overlayY=e.overlayY}(t,e,n,i);return this._preferredPositions.push(r),this},t.prototype.withDirection=function(t){return this._dir=t,this},t.prototype.withOffsetX=function(t){return this._offsetX=t,this},t.prototype.withOffsetY=function(t){return this._offsetY=t,this},t.prototype.withLockedPosition=function(t){return this._positionLocked=t,this},t.prototype.withPositions=function(t){return this._preferredPositions=t.slice(),this},t.prototype.setOrigin=function(t){return this._origin=t.nativeElement,this},t.prototype._getStartX=function(t){return this._isRtl?t.right:t.left},t.prototype._getEndX=function(t){return this._isRtl?t.left:t.right},t.prototype._getOriginConnectionPoint=function(t,e){var n=this._getStartX(t),i=this._getEndX(t);return{x:"center"==e.originX?n+t.width/2:"start"==e.originX?n:i,y:"center"==e.originY?t.top+t.height/2:"top"==e.originY?t.top:t.bottom}},t.prototype._getOverlayPoint=function(t,e,n,i){var r=t.x+("center"==i.overlayX?-e.width/2:"start"===i.overlayX?this._isRtl?-e.width:0:this._isRtl?0:-e.width)+("undefined"==typeof i.offsetX?this._offsetX:i.offsetX),o=t.y+("center"==i.overlayY?-e.height/2:"top"==i.overlayY?0:-e.height)+("undefined"==typeof i.offsetY?this._offsetY:i.offsetY),a=0-o,s=o+e.height-n.height,u=this._subtractOverflows(e.width,0-r,r+e.width-n.width)*this._subtractOverflows(e.height,a,s);return{x:r,y:o,fitsInViewport:e.width*e.height===u,visibleArea:u}},t.prototype._getScrollVisibility=function(t){var e=this._origin.getBoundingClientRect(),n=t.getBoundingClientRect(),i=this.scrollables.map(function(t){return t.getElementRef().nativeElement.getBoundingClientRect()});return{isOriginClipped:Xr(e,i),isOriginOutsideView:Kr(e,i),isOverlayClipped:Xr(n,i),isOverlayOutsideView:Kr(n,i)}},t.prototype._setElementPosition=function(t,e,n,i){var r,o="bottom"===i.overlayY?"bottom":"top",a="top"===o?n.y:this._document.documentElement.clientHeight-(n.y+e.height),s="left"==(r="rtl"===this._dir?"end"===i.overlayX?"left":"right":"end"===i.overlayX?"right":"left")?n.x:this._document.documentElement.clientWidth-(n.x+e.width);["top","bottom","left","right"].forEach(function(e){return t.style[e]=null}),t.style[o]=a+"px",t.style[r]=s+"px";var u=new function(t,e){this.connectionPair=t,this.scrollableViewProperties=e}(i,this._getScrollVisibility(t));this._onPositionChange.next(u)},t.prototype._subtractOverflows=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.reduce(function(t,e){return t-Math.max(e,0)},t)},t}(),eo=function(){function t(t){this._document=t,this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height="",this._wrapper=null}return t.prototype.attach=function(t){var e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height})},t.prototype.top=function(t){return void 0===t&&(t=""),this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this},t.prototype.left=function(t){return void 0===t&&(t=""),this._rightOffset="",this._leftOffset=t,this._justifyContent="flex-start",this},t.prototype.bottom=function(t){return void 0===t&&(t=""),this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this},t.prototype.right=function(t){return void 0===t&&(t=""),this._leftOffset="",this._rightOffset=t,this._justifyContent="flex-end",this},t.prototype.width=function(t){return void 0===t&&(t=""),this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this},t.prototype.height=function(t){return void 0===t&&(t=""),this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this},t.prototype.centerHorizontally=function(t){return void 0===t&&(t=""),this.left(t),this._justifyContent="center",this},t.prototype.centerVertically=function(t){return void 0===t&&(t=""),this.top(t),this._alignItems="center",this},t.prototype.apply=function(){if(this._overlayRef.hasAttached()){var t=this._overlayRef.overlayElement;!this._wrapper&&t.parentNode&&(this._wrapper=this._document.createElement("div"),this._wrapper.classList.add("cdk-global-overlay-wrapper"),t.parentNode.insertBefore(this._wrapper,t),this._wrapper.appendChild(t));var e=t.style,n=t.parentNode.style,i=this._overlayRef.getConfig();e.position=this._cssPosition,e.marginLeft="100%"===i.width?"0":this._leftOffset,e.marginTop="100%"===i.height?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=this._rightOffset,n.justifyContent="100%"===i.width?"flex-start":this._justifyContent,n.alignItems="100%"===i.height?"flex-start":this._alignItems}},t.prototype.dispose=function(){this._wrapper&&this._wrapper.parentNode&&(this._wrapper.parentNode.removeChild(this._wrapper),this._wrapper=null)},t}(),no=function(){function t(t,e){this._viewportRuler=t,this._document=e}return t.prototype.global=function(){return new eo(this._document)},t.prototype.connectedTo=function(t,e,n){return new to(e,n,t,this._viewportRuler,this._document)},t}(),io=function(){function t(t){this._document=t,this._attachedOverlays=[]}return t.prototype.ngOnDestroy=function(){this._unsubscribeFromKeydownEvents()},t.prototype.add=function(t){this._keydownEventSubscription||this._subscribeToKeydownEvents(),this._attachedOverlays.push(t)},t.prototype.remove=function(t){var e=this._attachedOverlays.indexOf(t);e>-1&&this._attachedOverlays.splice(e,1),0===this._attachedOverlays.length&&this._unsubscribeFromKeydownEvents()},t.prototype._subscribeToKeydownEvents=function(){var t=this,e=Ui(this._document.body,"keydown",!0);this._keydownEventSubscription=e.pipe(Object(ln.a)(function(){return!!t._attachedOverlays.length})).subscribe(function(e){t._selectOverlayFromEvent(e)._keydownEvents.next(e)})},t.prototype._unsubscribeFromKeydownEvents=function(){this._keydownEventSubscription&&(this._keydownEventSubscription.unsubscribe(),this._keydownEventSubscription=null)},t.prototype._selectOverlayFromEvent=function(t){return this._attachedOverlays.find(function(e){return e.overlayElement===t.target||e.overlayElement.contains(t.target)})||this._attachedOverlays[this._attachedOverlays.length-1]},t}();function ro(t,e){return t||new io(e)}var oo=function(){function t(t){this._document=t}return t.prototype.ngOnDestroy=function(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)},t.prototype.getContainerElement=function(){return this._containerElement||this._createContainer(),this._containerElement},t.prototype._createContainer=function(){var t=this._document.createElement("div");t.classList.add("cdk-overlay-container"),this._document.body.appendChild(t),this._containerElement=t},t}();function ao(t,e){return t||new oo(e)}var so=0,uo=function(){function t(t,e,n,i,r,o,a,s,u){this.scrollStrategies=t,this._overlayContainer=e,this._componentFactoryResolver=n,this._positionBuilder=i,this._keyboardDispatcher=r,this._appRef=o,this._injector=a,this._ngZone=s,this._document=u}return t.prototype.create=function(t){var e=this._createPaneElement(),n=this._createPortalOutlet(e);return new Qr(n,e,new qr(t),this._ngZone,this._keyboardDispatcher,this._document)},t.prototype.position=function(){return this._positionBuilder},t.prototype._createPaneElement=function(){var t=this._document.createElement("div");return t.id="cdk-overlay-"+so++,t.classList.add("cdk-overlay-pane"),this._overlayContainer.getContainerElement().appendChild(t),t},t.prototype._createPortalOutlet=function(t){return new Vr(t,this._componentFactoryResolver,this._appRef,this._injector)},t}(),lo=new i.InjectionToken("cdk-connected-overlay-scroll-strategy");function co(t){return function(){return t.scrollStrategies.reposition()}}var po=function(){},ho=n("5jKg"),fo=function(t){function e(e,n,i){var r=t.call(this)||this;return r._elementRef=e,r._focusMonitor=i,r._hovered=new U.a,r._highlighted=!1,r._triggersSubmenu=!1,i&&i.monitor(r._getHostElement(),!1),r._document=n,r}return Object(d.c)(e,t),e.prototype.focus=function(t){void 0===t&&(t="program"),this._focusMonitor?this._focusMonitor.focusVia(this._getHostElement(),t):this._getHostElement().focus()},e.prototype.ngOnDestroy=function(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._getHostElement()),this._hovered.complete()},e.prototype._getTabIndex=function(){return this.disabled?"-1":"0"},e.prototype._getHostElement=function(){return this._elementRef.nativeElement},e.prototype._checkDisabled=function(t){this.disabled&&(t.preventDefault(),t.stopPropagation())},e.prototype._emitHoverEvent=function(){this.disabled||this._hovered.next(this)},e.prototype.getLabel=function(){var t=this._elementRef.nativeElement,e=this._document?this._document.TEXT_NODE:3,n="";if(t.childNodes)for(var i=t.childNodes.length,r=0;r<i;r++)t.childNodes[r].nodeType===e&&(n+=t.childNodes[r].textContent);return n.trim()},e}(je(De(function(){}))),mo=new i.InjectionToken("mat-menu-default-options"),yo=function(){function t(t,e,n){this._elementRef=t,this._ngZone=e,this._defaultOptions=n,this._xPosition=this._defaultOptions.xPosition,this._yPosition=this._defaultOptions.yPosition,this._tabSubscription=tn.a.EMPTY,this._classList={},this._panelAnimationState="void",this._overlapTrigger=this._defaultOptions.overlapTrigger,this.closed=new i.EventEmitter,this.close=this.closed}return Object.defineProperty(t.prototype,"xPosition",{get:function(){return this._xPosition},set:function(t){"before"!==t&&"after"!==t&&function(){throw Error('x-position value must be either \'before\' or after\'.\n      Example: <mat-menu x-position="before" #menu="matMenu"></mat-menu>')}(),this._xPosition=t,this.setPositionClasses()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"yPosition",{get:function(){return this._yPosition},set:function(t){"above"!==t&&"below"!==t&&function(){throw Error('y-position value must be either \'above\' or below\'.\n      Example: <mat-menu y-position="above" #menu="matMenu"></mat-menu>')}(),this._yPosition=t,this.setPositionClasses()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"overlapTrigger",{get:function(){return this._overlapTrigger},set:function(t){this._overlapTrigger=Z(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"panelClass",{set:function(t){t&&t.length&&(this._classList=t.split(" ").reduce(function(t,e){return t[e]=!0,t},{}),this._elementRef.nativeElement.className="",this.setPositionClasses())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"classList",{get:function(){return this.panelClass},set:function(t){this.panelClass=t},enumerable:!0,configurable:!0}),t.prototype.ngAfterContentInit=function(){var t=this;this._keyManager=new Pn(this.items).withWrap().withTypeAhead(),this._tabSubscription=this._keyManager.tabOut.subscribe(function(){return t.close.emit("keydown")})},t.prototype.ngOnDestroy=function(){this._tabSubscription.unsubscribe(),this.closed.complete()},t.prototype._hovered=function(){var t=this;return this.items?this.items.changes.pipe(Ki(this.items),Object(ho.a)(function(t){return Ar.a.apply(void 0,t.map(function(t){return t._hovered}))})):this._ngZone.onStable.asObservable().pipe(Ye(1),Object(ho.a)(function(){return t._hovered()}))},t.prototype._handleKeydown=function(t){switch(t.keyCode){case 27:this.closed.emit("keydown"),t.stopPropagation();break;case 37:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case 39:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:this._keyManager.onKeydown(t)}},t.prototype.focusFirstItem=function(t){var e=this;void 0===t&&(t="program"),this.lazyContent?this._ngZone.onStable.asObservable().pipe(Ye(1)).subscribe(function(){return e._keyManager.setFocusOrigin(t).setFirstItemActive()}):this._keyManager.setFocusOrigin(t).setFirstItemActive()},t.prototype.resetActiveItem=function(){this._keyManager.setActiveItem(-1)},t.prototype.setPositionClasses=function(t,e){void 0===t&&(t=this.xPosition),void 0===e&&(e=this.yPosition),this._classList["mat-menu-before"]="before"===t,this._classList["mat-menu-after"]="after"===t,this._classList["mat-menu-above"]="above"===e,this._classList["mat-menu-below"]="below"===e},t.prototype.setElevation=function(t){var e="mat-elevation-z"+(2+t),n=Object.keys(this._classList).find(function(t){return t.startsWith("mat-elevation-z")});n&&n!==this._previousElevation||(this._previousElevation&&(this._classList[this._previousElevation]=!1),this._classList[e]=!0,this._previousElevation=e)},t.prototype._startAnimation=function(){this._panelAnimationState="enter-start"},t.prototype._resetAnimation=function(){this._panelAnimationState="void"},t.prototype._onAnimationDone=function(t){"enter-start"===t.toState&&(this._panelAnimationState="enter")},t}(),go=new i.InjectionToken("mat-menu-scroll-strategy");function vo(t){return function(){return t.scrollStrategies.reposition()}}var _o=function(){function t(t,e,n,r,o,a,s,u){this._overlay=t,this._element=e,this._viewContainerRef=n,this._scrollStrategy=r,this._parentMenu=o,this._menuItemInstance=a,this._dir=s,this._focusMonitor=u,this._overlayRef=null,this._menuOpen=!1,this._closeSubscription=tn.a.EMPTY,this._hoverSubscription=tn.a.EMPTY,this._openedByMouse=!1,this.menuOpened=new i.EventEmitter,this.onMenuOpen=this.menuOpened,this.menuClosed=new i.EventEmitter,this.onMenuClose=this.menuClosed,a&&(a._triggersSubmenu=this.triggersSubmenu())}return Object.defineProperty(t.prototype,"_deprecatedMatMenuTriggerFor",{get:function(){return this.menu},set:function(t){this.menu=t},enumerable:!0,configurable:!0}),t.prototype.ngAfterContentInit=function(){var t=this;this._checkMenu(),this.menu.close.subscribe(function(e){t._destroyMenu(),"click"===e&&t._parentMenu&&t._parentMenu.closed.emit(e)}),this.triggersSubmenu()&&(this._hoverSubscription=this._parentMenu._hovered().pipe(Object(ln.a)(function(e){return e===t._menuItemInstance})).subscribe(function(){t._openedByMouse=!0,t.openMenu()}))},t.prototype.ngOnDestroy=function(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._cleanUpSubscriptions()},Object.defineProperty(t.prototype,"menuOpen",{get:function(){return this._menuOpen},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dir",{get:function(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"},enumerable:!0,configurable:!0}),t.prototype.triggersSubmenu=function(){return!(!this._menuItemInstance||!this._parentMenu)},t.prototype.toggleMenu=function(){return this._menuOpen?this.closeMenu():this.openMenu()},t.prototype.openMenu=function(){var t=this;this._menuOpen||(this._createOverlay().attach(this._portal),this.menu.lazyContent&&this.menu.lazyContent.attach(this.menuData),this._closeSubscription=this._menuClosingActions().subscribe(function(){return t.closeMenu()}),this._initMenu(),this.menu instanceof yo&&this.menu._startAnimation())},t.prototype.closeMenu=function(){this.menu.close.emit()},t.prototype.focus=function(t){void 0===t&&(t="program"),this._focusMonitor?this._focusMonitor.focusVia(this._element.nativeElement,t):this._element.nativeElement.focus()},t.prototype._destroyMenu=function(){this._overlayRef&&this.menuOpen&&(this._resetMenu(),this._closeSubscription.unsubscribe(),this._overlayRef.detach(),this.menu instanceof yo&&this.menu._resetAnimation())},t.prototype._initMenu=function(){this.menu.parentMenu=this.triggersSubmenu()?this._parentMenu:void 0,this.menu.direction=this.dir,this._setMenuElevation(),this._setIsMenuOpen(!0),this.menu.focusFirstItem(this._openedByMouse?"mouse":"program")},t.prototype._setMenuElevation=function(){if(this.menu.setElevation){for(var t=0,e=this.menu.parentMenu;e;)t++,e=e.parentMenu;this.menu.setElevation(t)}},t.prototype._resetMenu=function(){this._setIsMenuOpen(!1),this._openedByMouse?this.triggersSubmenu()||this.focus("mouse"):this.focus(),this._openedByMouse=!1},t.prototype._setIsMenuOpen=function(t){this._menuOpen=t,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&(this._menuItemInstance._highlighted=t)},t.prototype._checkMenu=function(){this.menu||function(){throw Error('mat-menu-trigger: must pass in an mat-menu instance.\n\n    Example:\n      <mat-menu #menu="matMenu"></mat-menu>\n      <button [matMenuTriggerFor]="menu"></button>')}()},t.prototype._createOverlay=function(){if(!this._overlayRef){this._portal=new Fr(this.menu.templateRef,this._viewContainerRef);var t=this._getOverlayConfig();this._subscribeToPositions(t.positionStrategy),this._overlayRef=this._overlay.create(t)}return this._overlayRef},t.prototype._getOverlayConfig=function(){return new qr({positionStrategy:this._getPosition(),hasBackdrop:!this.triggersSubmenu(),backdropClass:"cdk-overlay-transparent-backdrop",direction:this.dir,scrollStrategy:this._scrollStrategy()})},t.prototype._subscribeToPositions=function(t){var e=this;t.onPositionChange.subscribe(function(t){e.menu.setPositionClasses("start"===t.connectionPair.overlayX?"after":"before","top"===t.connectionPair.overlayY?"below":"above")})},t.prototype._getPosition=function(){var t="before"===this.menu.xPosition?["end","start"]:["start","end"],e=t[0],n=t[1],i="above"===this.menu.yPosition?["bottom","top"]:["top","bottom"],r=i[0],o=i[1],a=[r,o],s=a[0],u=a[1],l=[e,n],c=l[0],p=l[1],h=0;return this.triggersSubmenu()?(p=e="before"===this.menu.xPosition?"start":"end",n=c="end"===e?"start":"end",h="bottom"===r?8:-8):this.menu.overlapTrigger||(s="top"===r?"bottom":"top",u="top"===o?"bottom":"top"),this._overlay.position().connectedTo(this._element,{originX:e,originY:s},{overlayX:c,overlayY:r}).withDirection(this.dir).withOffsetY(h).withFallbackPosition({originX:n,originY:s},{overlayX:p,overlayY:r}).withFallbackPosition({originX:e,originY:u},{overlayX:c,overlayY:o},void 0,-h).withFallbackPosition({originX:n,originY:u},{overlayX:p,overlayY:o},void 0,-h)},t.prototype._cleanUpSubscriptions=function(){this._closeSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()},t.prototype._menuClosingActions=function(){var t=this,e=this._overlayRef.backdropClick(),n=this._overlayRef.detachments(),i=this._parentMenu?this._parentMenu.close:dn(),r=this._parentMenu?this._parentMenu._hovered().pipe(Object(ln.a)(function(e){return e!==t._menuItemInstance}),Object(ln.a)(function(){return t._menuOpen})):dn();return Object(Ar.a)(e,i,r,n)},t.prototype._handleMousedown=function(t){(function(t){return 0===t.buttons})(t)||(this._openedByMouse=!0,this.triggersSubmenu()&&t.preventDefault())},t.prototype._handleKeydown=function(t){var e=t.keyCode;this.triggersSubmenu()&&(39===e&&"ltr"===this.dir||37===e&&"rtl"===this.dir)&&this.openMenu()},t.prototype._handleClick=function(t){this.triggersSubmenu()?(t.stopPropagation(),this.openMenu()):this.toggleMenu()},t}(),bo=function(){},xo=i["\u0275crt"]({encapsulation:2,styles:[".mat-menu-panel{-webkit-backface-visibility:hidden;backface-visibility:hidden;min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;max-height:calc(100vh - 48px);border-radius:2px;outline:0}.mat-menu-panel:not([class*=mat-elevation-z]){box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)}.mat-menu-panel.mat-menu-after.mat-menu-below{transform-origin:left top}.mat-menu-panel.mat-menu-after.mat-menu-above{transform-origin:left bottom}.mat-menu-panel.mat-menu-before.mat-menu-below{transform-origin:right top}.mat-menu-panel.mat-menu-before.mat-menu-above{transform-origin:right bottom}[dir=rtl] .mat-menu-panel.mat-menu-after.mat-menu-below{transform-origin:right top}[dir=rtl] .mat-menu-panel.mat-menu-after.mat-menu-above{transform-origin:right bottom}[dir=rtl] .mat-menu-panel.mat-menu-before.mat-menu-below{transform-origin:left top}[dir=rtl] .mat-menu-panel.mat-menu-before.mat-menu-above{transform-origin:left bottom}.mat-menu-panel.ng-animating{pointer-events:none}@media screen and (-ms-high-contrast:active){.mat-menu-panel{outline:solid 1px}}.mat-menu-content{padding-top:8px;padding-bottom:8px}.mat-menu-item{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:0;border:none;-webkit-tap-highlight-color:transparent;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;position:relative}.mat-menu-item[disabled]{cursor:default}[dir=rtl] .mat-menu-item{text-align:right}.mat-menu-item .mat-icon{margin-right:16px}[dir=rtl] .mat-menu-item .mat-icon{margin-left:16px;margin-right:0}.mat-menu-item .mat-icon{vertical-align:middle}.mat-menu-item-submenu-trigger{padding-right:32px}.mat-menu-item-submenu-trigger::after{width:0;height:0;border-style:solid;border-width:5px 0 5px 5px;border-color:transparent transparent transparent currentColor;content:'';display:inline-block;position:absolute;top:50%;right:16px;transform:translateY(-50%)}[dir=rtl] .mat-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}[dir=rtl] .mat-menu-item-submenu-trigger::after{right:auto;left:16px;transform:rotateY(180deg) translateY(-50%)}button.mat-menu-item{width:100%}.mat-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}"],data:{animation:[{type:7,name:"transformMenu",definitions:[{type:0,name:"void",styles:{type:6,styles:{opacity:0,transform:"scale(0.01, 0.01)"},offset:null},options:void 0},{type:0,name:"enter-start",styles:{type:6,styles:{opacity:1,transform:"scale(1, 0.5)"},offset:null},options:void 0},{type:0,name:"enter",styles:{type:6,styles:{transform:"scale(1, 1)"},offset:null},options:void 0},{type:1,expr:"void => enter-start",animation:{type:4,styles:null,timings:"100ms linear"},options:null},{type:1,expr:"enter-start => enter",animation:{type:4,styles:null,timings:"300ms cubic-bezier(0.25, 0.8, 0.25, 1)"},options:null},{type:1,expr:"* => void",animation:{type:4,styles:{type:6,styles:{opacity:0},offset:null},timings:"150ms 50ms linear"},options:null}],options:{}},{type:7,name:"fadeInItems",definitions:[{type:0,name:"showing",styles:{type:6,styles:{opacity:1},offset:null},options:void 0},{type:1,expr:"void => *",animation:[{type:6,styles:{opacity:0},offset:null},{type:4,styles:null,timings:"400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)"}],options:null}],options:{}}]}});function wo(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,3,"div",[["class","mat-menu-panel"],["role","menu"],["tabindex","-1"]],[[24,"@transformMenu",0]],[[null,"keydown"],[null,"click"],[null,"@transformMenu.done"]],function(t,e,n){var i=!0,r=t.component;return"keydown"===e&&(i=!1!==r._handleKeydown(n)&&i),"click"===e&&(i=!1!==r.closed.emit("click")&&i),"@transformMenu.done"===e&&(i=!1!==r._onAnimationDone(n)&&i),i},null,null)),i["\u0275did"](1,278528,null,0,C,[i.IterableDiffers,i.KeyValueDiffers,i.ElementRef,i.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(t()(),i["\u0275eld"](2,0,null,null,1,"div",[["class","mat-menu-content"]],[[24,"@fadeInItems",0]],null,null,null,null)),i["\u0275ncd"](null,0)],function(t,e){t(e,1,0,"mat-menu-panel",e.component._classList)},function(t,e){t(e,0,0,e.component._panelAnimationState),t(e,2,0,"showing")})}function Eo(t){return i["\u0275vid"](2,[i["\u0275qud"](402653184,1,{templateRef:0}),(t()(),i["\u0275and"](0,[[1,2]],null,0,null,wo))],null,null)}var Co=i["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Oo(t){return i["\u0275vid"](2,[i["\u0275ncd"](null,0),(t()(),i["\u0275eld"](1,0,null,null,1,"div",[["class","mat-menu-ripple mat-ripple"],["matRipple",""]],[[2,"mat-ripple-unbounded",null]],null,null,null,null)),i["\u0275did"](2,212992,null,0,He,[i.ElementRef,i.NgZone,Te,[2,qe]],{disabled:[0,"disabled"],trigger:[1,"trigger"]},null)],function(t,e){var n=e.component;t(e,2,0,n.disableRipple||n.disabled,n._getHostElement())},function(t,e){t(e,1,0,i["\u0275nov"](e,2).unbounded)})}var Po=function(){function t(t){this.ngRedux=t}return t.prototype.ngOnInit=function(){},t.prototype.textFilter=function(t){this.ngRedux.dispatch({type:o,text:t})},t.prototype.showList=function(){this.ngRedux.dispatch({type:l})},t}(),So=i["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function To(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,70,"mat-toolbar",[["class","mat-toolbar"]],[[2,"mat-toolbar-multiple-rows",null],[2,"mat-toolbar-single-row",null]],null,null,Kn,Wn)),i["\u0275did"](1,4243456,null,1,Hn,[i.ElementRef,Te,N],null,null),i["\u0275qud"](603979776,1,{_toolbarRows:1}),(t()(),i["\u0275ted"](-1,0,["\n  "])),(t()(),i["\u0275eld"](4,0,null,0,20,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(t,e,n){var r=!0;return"submit"===e&&(r=!1!==i["\u0275nov"](t,6).onSubmit(n)&&r),"reset"===e&&(r=!1!==i["\u0275nov"](t,6).onReset()&&r),r},null,null)),i["\u0275did"](5,16384,null,0,Ri,[],null,null),i["\u0275did"](6,4210688,null,0,Ii,[[8,null],[8,null]],null,null),i["\u0275prd"](2048,null,ii,null,[Ii]),i["\u0275did"](8,16384,null,0,wi,[ii],null,null),(t()(),i["\u0275ted"](-1,null,["\n    "])),(t()(),i["\u0275eld"](10,0,null,null,13,"mat-form-field",[["class","mat-input-container mat-form-field"]],[[2,"mat-input-invalid",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-focused",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,vr,ur)),i["\u0275did"](11,7389184,null,7,ar,[i.ElementRef,i.ChangeDetectorRef,[2,We]],null,null),i["\u0275qud"](335544320,2,{_control:0}),i["\u0275qud"](335544320,3,{_placeholderChild:0}),i["\u0275qud"](335544320,4,{_labelChild:0}),i["\u0275qud"](603979776,5,{_errorChildren:1}),i["\u0275qud"](603979776,6,{_hintChildren:1}),i["\u0275qud"](603979776,7,{_prefixChildren:1}),i["\u0275qud"](603979776,8,{_suffixChildren:1}),(t()(),i["\u0275ted"](-1,1,["\n      "])),(t()(),i["\u0275eld"](20,0,[["filtertext",1]],1,2,"input",[["class","mat-input-element mat-form-field-autofill-control"],["matInput",""],["placeholder","search"],["type","search"]],[[2,"mat-input-server",null],[1,"id",0],[8,"placeholder",0],[8,"disabled",0],[8,"required",0],[8,"readOnly",0],[1,"aria-describedby",0],[1,"aria-invalid",0],[1,"aria-required",0]],[[null,"keyup"],[null,"click"],[null,"blur"],[null,"focus"],[null,"input"]],function(t,e,n){var r=!0,o=t.component;return"blur"===e&&(r=!1!==i["\u0275nov"](t,21)._focusChanged(!1)&&r),"focus"===e&&(r=!1!==i["\u0275nov"](t,21)._focusChanged(!0)&&r),"input"===e&&(r=!1!==i["\u0275nov"](t,21)._onInput()&&r),"keyup"===e&&(r=!1!==o.textFilter(i["\u0275nov"](t,20).value)&&r),"click"===e&&(r=!1!==o.showList()&&r),r},null,null)),i["\u0275did"](21,933888,null,0,Tr,[i.ElementRef,Te,[8,null],[2,Ii],[2,Di],Ne,[8,null]],{placeholder:[0,"placeholder"],type:[1,"type"]},null),i["\u0275prd"](2048,[[2,4]],ir,null,[Tr]),(t()(),i["\u0275ted"](-1,1,["\n    "])),(t()(),i["\u0275ted"](-1,null,["\n  "])),(t()(),i["\u0275ted"](-1,0,["\n  "])),(t()(),i["\u0275eld"](26,0,null,0,0,"span",[["style","flex: 1 1 auto;"]],null,null,null,null,null)),(t()(),i["\u0275ted"](-1,0,["\n  "])),(t()(),i["\u0275eld"](28,0,null,0,1,"a",[["class","navbar-logo"],["href","#"]],null,null,null,null,null)),(t()(),i["\u0275ted"](-1,null,["Water-Fountains.org"])),(t()(),i["\u0275ted"](-1,0,["\n  "])),(t()(),i["\u0275eld"](31,0,null,0,0,"span",[["style","flex: 1 1 auto;"]],null,null,null,null,null)),(t()(),i["\u0275ted"](-1,0,["\n\n  "])),(t()(),i["\u0275eld"](33,0,null,0,12,"mat-menu",[],null,null,null,Eo,xo)),i["\u0275did"](34,1228800,[["langMenu",4]],2,yo,[i.ElementRef,i.NgZone,mo],null,null),i["\u0275qud"](603979776,9,{items:1}),i["\u0275qud"](335544320,10,{lazyContent:0}),(t()(),i["\u0275ted"](-1,0,["\n    "])),(t()(),i["\u0275eld"](38,0,null,0,2,"button",[["class","mat-menu-item"],["mat-menu-item",""],["role","menuitem"]],[[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==i["\u0275nov"](t,39)._checkDisabled(n)&&r),"mouseenter"===e&&(r=!1!==i["\u0275nov"](t,39)._emitHoverEvent()&&r),r},Oo,Co)),i["\u0275did"](39,180224,[[9,4]],0,fo,[i.ElementRef,N,An],null,null),(t()(),i["\u0275ted"](-1,0,["FR"])),(t()(),i["\u0275ted"](-1,0,["\n    "])),(t()(),i["\u0275eld"](42,0,null,0,2,"button",[["class","mat-menu-item"],["mat-menu-item",""],["role","menuitem"]],[[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==i["\u0275nov"](t,43)._checkDisabled(n)&&r),"mouseenter"===e&&(r=!1!==i["\u0275nov"](t,43)._emitHoverEvent()&&r),r},Oo,Co)),i["\u0275did"](43,180224,[[9,4]],0,fo,[i.ElementRef,N,An],null,null),(t()(),i["\u0275ted"](-1,0,["DE"])),(t()(),i["\u0275ted"](-1,0,["\n  "])),(t()(),i["\u0275ted"](-1,0,["\n  "])),(t()(),i["\u0275eld"](47,16777216,null,0,3,"button",[["aria-haspopup","true"],["mat-icon-button",""]],[[8,"disabled",0]],[[null,"mousedown"],[null,"keydown"],[null,"click"]],function(t,e,n){var r=!0;return"mousedown"===e&&(r=!1!==i["\u0275nov"](t,49)._handleMousedown(n)&&r),"keydown"===e&&(r=!1!==i["\u0275nov"](t,49)._handleKeydown(n)&&r),"click"===e&&(r=!1!==i["\u0275nov"](t,49)._handleClick(n)&&r),r},Bn,Nn)),i["\u0275did"](48,180224,null,0,Rn,[i.ElementRef,Te,An],null,null),i["\u0275did"](49,1196032,null,0,_o,[uo,i.ElementRef,i.ViewContainerRef,go,[2,yo],[8,null],[2,F],An],{menu:[0,"menu"]},null),(t()(),i["\u0275ted"](-1,0,["EN"])),(t()(),i["\u0275ted"](-1,0,["\n\n  "])),(t()(),i["\u0275eld"](52,0,null,0,12,"mat-menu",[],null,null,null,Eo,xo)),i["\u0275did"](53,1228800,[["cityMenu",4]],2,yo,[i.ElementRef,i.NgZone,mo],null,null),i["\u0275qud"](603979776,11,{items:1}),i["\u0275qud"](335544320,12,{lazyContent:0}),(t()(),i["\u0275ted"](-1,0,["\n    "])),(t()(),i["\u0275eld"](57,0,null,0,2,"button",[["class","mat-menu-item"],["mat-menu-item",""],["role","menuitem"]],[[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==i["\u0275nov"](t,58)._checkDisabled(n)&&r),"mouseenter"===e&&(r=!1!==i["\u0275nov"](t,58)._emitHoverEvent()&&r),r},Oo,Co)),i["\u0275did"](58,180224,[[11,4]],0,fo,[i.ElementRef,N,An],null,null),(t()(),i["\u0275ted"](-1,0,["Geneva"])),(t()(),i["\u0275ted"](-1,0,["\n    "])),(t()(),i["\u0275eld"](61,0,null,0,2,"button",[["class","mat-menu-item"],["mat-menu-item",""],["role","menuitem"]],[[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==i["\u0275nov"](t,62)._checkDisabled(n)&&r),"mouseenter"===e&&(r=!1!==i["\u0275nov"](t,62)._emitHoverEvent()&&r),r},Oo,Co)),i["\u0275did"](62,180224,[[11,4]],0,fo,[i.ElementRef,N,An],null,null),(t()(),i["\u0275ted"](-1,0,["Lucerne"])),(t()(),i["\u0275ted"](-1,0,["\n  "])),(t()(),i["\u0275ted"](-1,0,["\n  "])),(t()(),i["\u0275eld"](66,16777216,null,0,3,"button",[["aria-haspopup","true"],["mat-icon-button",""]],[[8,"disabled",0]],[[null,"mousedown"],[null,"keydown"],[null,"click"]],function(t,e,n){var r=!0;return"mousedown"===e&&(r=!1!==i["\u0275nov"](t,68)._handleMousedown(n)&&r),"keydown"===e&&(r=!1!==i["\u0275nov"](t,68)._handleKeydown(n)&&r),"click"===e&&(r=!1!==i["\u0275nov"](t,68)._handleClick(n)&&r),r},Bn,Nn)),i["\u0275did"](67,180224,null,0,Rn,[i.ElementRef,Te,An],null,null),i["\u0275did"](68,1196032,null,0,_o,[uo,i.ElementRef,i.ViewContainerRef,go,[2,yo],[8,null],[2,F],An],{menu:[0,"menu"]},null),(t()(),i["\u0275ted"](-1,0,["Zurich"])),(t()(),i["\u0275ted"](-1,0,["\n"])),(t()(),i["\u0275ted"](-1,null,["\n"]))],function(t,e){t(e,21,0,"search","search"),t(e,49,0,i["\u0275nov"](e,34)),t(e,68,0,i["\u0275nov"](e,53))},function(t,e){t(e,0,0,i["\u0275nov"](e,1)._toolbarRows.length,!i["\u0275nov"](e,1)._toolbarRows.length),t(e,4,0,i["\u0275nov"](e,8).ngClassUntouched,i["\u0275nov"](e,8).ngClassTouched,i["\u0275nov"](e,8).ngClassPristine,i["\u0275nov"](e,8).ngClassDirty,i["\u0275nov"](e,8).ngClassValid,i["\u0275nov"](e,8).ngClassInvalid,i["\u0275nov"](e,8).ngClassPending),t(e,10,1,[i["\u0275nov"](e,11)._control.errorState,i["\u0275nov"](e,11)._control.errorState,i["\u0275nov"](e,11)._canLabelFloat,i["\u0275nov"](e,11)._shouldLabelFloat(),i["\u0275nov"](e,11)._hideControlPlaceholder(),i["\u0275nov"](e,11)._control.disabled,i["\u0275nov"](e,11)._control.focused,i["\u0275nov"](e,11)._shouldForward("untouched"),i["\u0275nov"](e,11)._shouldForward("touched"),i["\u0275nov"](e,11)._shouldForward("pristine"),i["\u0275nov"](e,11)._shouldForward("dirty"),i["\u0275nov"](e,11)._shouldForward("valid"),i["\u0275nov"](e,11)._shouldForward("invalid"),i["\u0275nov"](e,11)._shouldForward("pending")]),t(e,20,0,i["\u0275nov"](e,21)._isServer,i["\u0275nov"](e,21).id,i["\u0275nov"](e,21).placeholder,i["\u0275nov"](e,21).disabled,i["\u0275nov"](e,21).required,i["\u0275nov"](e,21).readonly,i["\u0275nov"](e,21)._ariaDescribedby||null,i["\u0275nov"](e,21).errorState,i["\u0275nov"](e,21).required.toString()),t(e,38,0,i["\u0275nov"](e,39)._highlighted,i["\u0275nov"](e,39)._triggersSubmenu,i["\u0275nov"](e,39)._getTabIndex(),i["\u0275nov"](e,39).disabled.toString(),i["\u0275nov"](e,39).disabled||null),t(e,42,0,i["\u0275nov"](e,43)._highlighted,i["\u0275nov"](e,43)._triggersSubmenu,i["\u0275nov"](e,43)._getTabIndex(),i["\u0275nov"](e,43).disabled.toString(),i["\u0275nov"](e,43).disabled||null),t(e,47,0,i["\u0275nov"](e,48).disabled||null),t(e,57,0,i["\u0275nov"](e,58)._highlighted,i["\u0275nov"](e,58)._triggersSubmenu,i["\u0275nov"](e,58)._getTabIndex(),i["\u0275nov"](e,58).disabled.toString(),i["\u0275nov"](e,58).disabled||null),t(e,61,0,i["\u0275nov"](e,62)._highlighted,i["\u0275nov"](e,62)._triggersSubmenu,i["\u0275nov"](e,62)._getTabIndex(),i["\u0275nov"](e,62).disabled.toString(),i["\u0275nov"](e,62).disabled||null),t(e,66,0,i["\u0275nov"](e,67).disabled||null)})}function ko(t){throw Error("A drawer was already declared for 'position=\""+t+"\"'")}var Ao=new i.InjectionToken("MAT_DRAWER_DEFAULT_AUTOSIZE"),Io=function(){function t(t,e){this._changeDetectorRef=t,this._container=e,this._margins={left:null,right:null}}return t.prototype.ngAfterContentInit=function(){var t=this;this._container._contentMargins.subscribe(function(e){t._margins=e,t._changeDetectorRef.markForCheck()})},t}(),Lo=function(){function t(t,e,n,r,o){var a=this;this._elementRef=t,this._focusTrapFactory=e,this._focusMonitor=n,this._platform=r,this._doc=o,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._animationStarted=new i.EventEmitter,this._animationState="void",this.openedChange=new i.EventEmitter(!0),this.onOpen=this._openedStream,this.onClose=this._closedStream,this.onPositionChanged=new i.EventEmitter,this.onAlignChanged=new i.EventEmitter,this._modeChanged=new U.a,this._opened=!1,this.openedChange.subscribe(function(t){t?(a._doc&&(a._elementFocusedBeforeDrawerWasOpened=a._doc.activeElement),a._isFocusTrapEnabled&&a._focusTrap&&a._trapFocus()):a._restoreFocus()})}return Object.defineProperty(t.prototype,"position",{get:function(){return this._position},set:function(t){(t="end"===t?"end":"start")!=this._position&&(this._position=t,this.onAlignChanged.emit(),this.onPositionChanged.emit())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"align",{get:function(){return this.position},set:function(t){this.position=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mode",{get:function(){return this._mode},set:function(t){this._mode=t,this._modeChanged.next()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disableClose",{get:function(){return this._disableClose},set:function(t){this._disableClose=Z(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_openedStream",{get:function(){return this.openedChange.pipe(Object(ln.a)(function(t){return t}),Object(cn.a)(function(){}))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"openedStart",{get:function(){return this._animationStarted.pipe(Object(ln.a)(function(t){return t.fromState!==t.toState&&0===t.toState.indexOf("open")}),Object(cn.a)(function(){}))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_closedStream",{get:function(){return this.openedChange.pipe(Object(ln.a)(function(t){return!t}),Object(cn.a)(function(){}))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"closedStart",{get:function(){return this._animationStarted.pipe(Object(ln.a)(function(t){return t.fromState!==t.toState&&"void"===t.toState}),Object(cn.a)(function(){}))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_isFocusTrapEnabled",{get:function(){return this.opened&&"side"!==this.mode},enumerable:!0,configurable:!0}),t.prototype._trapFocus=function(){var t=this;this._focusTrap.focusInitialElementWhenReady().then(function(e){e||"function"!=typeof t._elementRef.nativeElement.focus||t._elementRef.nativeElement.focus()})},t.prototype._restoreFocus=function(){var t=this._doc&&this._doc.activeElement;t&&this._elementRef.nativeElement.contains(t)&&(this._elementFocusedBeforeDrawerWasOpened instanceof HTMLElement?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,this._openedVia):this._elementRef.nativeElement.blur()),this._elementFocusedBeforeDrawerWasOpened=null,this._openedVia=null},t.prototype.ngAfterContentInit=function(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._focusTrap.enabled=this._isFocusTrapEnabled},t.prototype.ngAfterContentChecked=function(){this._platform.isBrowser&&(this._enableAnimations=!0)},t.prototype.ngOnDestroy=function(){this._focusTrap&&this._focusTrap.destroy()},Object.defineProperty(t.prototype,"opened",{get:function(){return this._opened},set:function(t){this.toggle(Z(t))},enumerable:!0,configurable:!0}),t.prototype.open=function(t){return this.toggle(!0,t)},t.prototype.close=function(){return this.toggle(!1)},t.prototype.toggle=function(t,e){var n=this;return void 0===t&&(t=!this.opened),void 0===e&&(e="program"),this._opened=t,t?(this._animationState=this._enableAnimations?"open":"open-instant",this._openedVia=e):(this._animationState="void",this._restoreFocus()),this._focusTrap&&(this._focusTrap.enabled=this._isFocusTrapEnabled),new Promise(function(t){n.openedChange.pipe(Ye(1)).subscribe(function(e){t(new function(t,e){this.type=t,this.animationFinished=e}(e?"open":"close",!0))})})},t.prototype.handleKeydown=function(t){27!==t.keyCode||this.disableClose||(this.close(),t.stopPropagation())},t.prototype._onAnimationStart=function(t){this._animationStarted.emit(t)},t.prototype._onAnimationEnd=function(t){var e=t.fromState,n=t.toState;(0===n.indexOf("open")&&"void"===e||"void"===n&&0===e.indexOf("open"))&&this.openedChange.emit(this._opened)},Object.defineProperty(t.prototype,"_width",{get:function(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0},enumerable:!0,configurable:!0}),t}(),Mo=function(){function t(t,e,n,r,o){void 0===o&&(o=!1);var a=this;this._dir=t,this._element=e,this._ngZone=n,this._changeDetectorRef=r,this.backdropClick=new i.EventEmitter,this._destroyed=new U.a,this._doCheckSubject=new U.a,this._contentMargins=new U.a,t&&t.change.pipe(Er(this._destroyed)).subscribe(function(){a._validateDrawers(),a._updateContentMargins()}),this._autosize=o}return Object.defineProperty(t.prototype,"start",{get:function(){return this._start},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"end",{get:function(){return this._end},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autosize",{get:function(){return this._autosize},set:function(t){this._autosize=Z(t)},enumerable:!0,configurable:!0}),t.prototype.ngAfterContentInit=function(){var t=this;this._drawers.changes.pipe(Ki(null)).subscribe(function(){t._validateDrawers(),t._drawers.forEach(function(e){t._watchDrawerToggle(e),t._watchDrawerPosition(e),t._watchDrawerMode(e)}),(!t._drawers.length||t._isDrawerOpen(t._start)||t._isDrawerOpen(t._end))&&t._updateContentMargins(),t._changeDetectorRef.markForCheck()}),this._doCheckSubject.pipe(on(10),Er(this._destroyed)).subscribe(function(){return t._updateContentMargins()})},t.prototype.ngOnDestroy=function(){this._doCheckSubject.complete(),this._destroyed.next(),this._destroyed.complete()},t.prototype.open=function(){this._drawers.forEach(function(t){return t.open()})},t.prototype.close=function(){this._drawers.forEach(function(t){return t.close()})},t.prototype.ngDoCheck=function(){var t=this;this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(function(){return t._doCheckSubject.next()})},t.prototype._watchDrawerToggle=function(t){var e=this;t._animationStarted.pipe(Er(this._drawers.changes),Object(ln.a)(function(t){return t.fromState!==t.toState})).subscribe(function(t){"open-instant"!==t.toState&&e._element.nativeElement.classList.add("mat-drawer-transition"),e._updateContentMargins(),e._changeDetectorRef.markForCheck()}),"side"!==t.mode&&t.openedChange.pipe(Er(this._drawers.changes)).subscribe(function(){return e._setContainerClass(t.opened)})},t.prototype._watchDrawerPosition=function(t){var e=this;t&&t.onPositionChanged.pipe(Er(this._drawers.changes)).subscribe(function(){e._ngZone.onMicrotaskEmpty.asObservable().pipe(Ye(1)).subscribe(function(){e._validateDrawers()})})},t.prototype._watchDrawerMode=function(t){var e=this;t&&t._modeChanged.pipe(Er(Object(Ar.a)(this._drawers.changes,this._destroyed))).subscribe(function(){e._updateContentMargins(),e._changeDetectorRef.markForCheck()})},t.prototype._setContainerClass=function(t){t?this._element.nativeElement.classList.add("mat-drawer-opened"):this._element.nativeElement.classList.remove("mat-drawer-opened")},t.prototype._validateDrawers=function(){var t=this;this._start=this._end=null,this._drawers.forEach(function(e){"end"==e.position?(null!=t._end&&ko("end"),t._end=e):(null!=t._start&&ko("start"),t._start=e)}),this._right=this._left=null,this._dir&&"ltr"!=this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)},t.prototype._isPushed=function(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode},t.prototype._onBackdropClicked=function(){this.backdropClick.emit(),this._closeModalDrawer()},t.prototype._closeModalDrawer=function(){[this._start,this._end].filter(function(t){return t&&!t.disableClose&&"side"!==t.mode}).forEach(function(t){return t.close()})},t.prototype._isShowingBackdrop=function(){return this._isDrawerOpen(this._start)&&"side"!=this._start.mode||this._isDrawerOpen(this._end)&&"side"!=this._end.mode},t.prototype._isDrawerOpen=function(t){return null!=t&&t.opened},t.prototype._updateContentMargins=function(){var t=this,e=0,n=0;if(this._left&&this._left.opened&&("side"==this._left.mode?e+=this._left._width:"push"==this._left.mode&&(e+=i=this._left._width,n-=i)),this._right&&this._right.opened)if("side"==this._right.mode)n+=this._right._width;else if("push"==this._right.mode){var i;n+=i=this._right._width,e-=i}this._ngZone.run(function(){return t._contentMargins.next({left:e,right:n})})},t}(),zo=function(){},Do=i["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Ro(t){return i["\u0275vid"](2,[i["\u0275ncd"](null,0)],null,null)}var jo=i["\u0275crt"]({encapsulation:2,styles:[],data:{animation:[{type:7,name:"transform",definitions:[{type:0,name:"open, open-instant",styles:{type:6,styles:{transform:"translate3d(0, 0, 0)",visibility:"visible"},offset:null},options:void 0},{type:0,name:"void",styles:{type:6,styles:{visibility:"hidden"},offset:null},options:void 0},{type:1,expr:"void => open-instant",animation:{type:4,styles:null,timings:"0ms"},options:null},{type:1,expr:"void <=> open, open-instant => void",animation:{type:4,styles:null,timings:"400ms cubic-bezier(0.25, 0.8, 0.25, 1)"},options:null}],options:{}}]}});function No(t){return i["\u0275vid"](2,[i["\u0275ncd"](null,0)],null,null)}var Bo=i["\u0275crt"]({encapsulation:2,styles:[".mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-opened{overflow:hidden}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:.4s;transition-timing-function:cubic-bezier(.25,.8,.25,1);transition-property:background-color,visibility}@media screen and (-ms-high-contrast:active){.mat-drawer-backdrop{opacity:.5}}.mat-drawer-content{-webkit-backface-visibility:hidden;backface-visibility:hidden;position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:.4s;transition-timing-function:cubic-bezier(.25,.8,.25,1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%,0,0)}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%,0,0)}[dir=rtl] .mat-drawer{transform:translate3d(100%,0,0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%,0,0)}.mat-drawer:not(.mat-drawer-side){box-shadow:0 8px 10px -5px rgba(0,0,0,.2),0 16px 24px 2px rgba(0,0,0,.14),0 6px 30px 5px rgba(0,0,0,.12)}.mat-sidenav-fixed{position:fixed}"],data:{}});function Fo(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,3,"mat-drawer-content",[["cdkScrollable",""],["class","mat-drawer-content"]],[[4,"margin-left","px"],[4,"margin-right","px"]],null,null,Ro,Do)),i["\u0275did"](1,212992,[[1,4]],0,Mr,[i.ElementRef,Ir,i.NgZone],null,null),i["\u0275did"](2,1097728,null,0,Io,[i.ChangeDetectorRef,Mo],null,null),i["\u0275ncd"](0,2)],function(t,e){t(e,1,0)},function(t,e){t(e,0,0,i["\u0275nov"](e,2)._margins.left,i["\u0275nov"](e,2)._margins.right)})}function Vo(t){return i["\u0275vid"](2,[i["\u0275qud"](671088640,1,{scrollable:0}),(t()(),i["\u0275eld"](1,0,null,null,0,"div",[["class","mat-drawer-backdrop"]],[[2,"mat-drawer-shown",null]],[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component._onBackdropClicked()&&i),i},null,null)),i["\u0275ncd"](null,0),i["\u0275ncd"](null,1),(t()(),i["\u0275and"](16777216,null,null,1,null,Fo)),i["\u0275did"](5,16384,null,0,T,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(t,e){t(e,5,0,!e.component._content)},function(t,e){t(e,1,0,e.component._isShowingBackdrop())})}var Zo=function(){function t(t,e){var n=this;this.http=t,this.ngRedux=e,this._fountainSelected=null,this._fountainsAll=null,this._fountainsFiltered=null,this.fountainSelectedSuccess=new i.EventEmitter,this.fountainsLoadedSuccess=new i.EventEmitter,this.fountainsFilteredSuccess=new i.EventEmitter,this.fountainId.subscribe(function(t){n.selectCurrentFountain()}),this.filterText.subscribe(function(t){n.filterFountains(t)}),this.loadCityData()}return Object.defineProperty(t.prototype,"fountainsAll",{get:function(){return this._fountainsAll},enumerable:!0,configurable:!0}),t.prototype.loadCityData=function(){var t=this;this.http.get("../assets/brunnen.json").subscribe(function(e){t._fountainsAll=e,t.fountainsLoadedSuccess.emit(e),t.filterFountains(t.ngRedux.getState().filterText),t.selectCurrentFountain()})},t.prototype.filterFountains=function(t){var e=this;null!==this._fountainsAll&&(this._fountainsFiltered=this._fountainsAll.features.filter(function(n){var i=e.normalize(n.properties.bezeichnung),r=e.normalize(n.properties.nummer);return i.indexOf(t)>-1||r.indexOf(t)>-1}),this.fountainsFilteredSuccess.emit(this._fountainsFiltered))},t.prototype.selectCurrentFountain=function(){var t=this.ngRedux.getState().fountainId;if(null!==t&&null!==this._fountainsAll){var e=this._fountainsAll.features.filter(function(e){return e.properties.nummer==t});e.length>0&&this.ngRedux.dispatch({type:s,payload:e[0]})}},t.prototype.normalize=function(t){return t?t.trim().toLowerCase():""},Object(d.b)([Object(r.select)(),Object(d.d)("design:type",Object)],t.prototype,"filterText",void 0),Object(d.b)([Object(r.select)(),Object(d.d)("design:type",Object)],t.prototype,"fountainId",void 0),t}(),Uo=function(){function t(t,e){this.dataService=t,this.ngRedux=e}return t.prototype.ngOnInit=function(){var t=this;this.dataService.fountainsFilteredSuccess.subscribe(function(e){t.fountains=e})},t.prototype.selectFountain=function(t){this.ngRedux.dispatch({type:a,fountainId:t})},t}(),qo=i["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function Ho(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,5,"li",[["class","list-group-item"]],null,null,null,null,null)),(t()(),i["\u0275ted"](1,null,["\n    "," - ","\n    "])),(t()(),i["\u0275eld"](2,0,null,null,2,"button",[["mat-raised-button",""]],[[8,"disabled",0]],[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.selectFountain(t.context.$implicit.properties.nummer)&&i),i},Bn,Nn)),i["\u0275did"](3,180224,null,0,Rn,[i.ElementRef,Te,An],null,null),(t()(),i["\u0275ted"](-1,0,["view"])),(t()(),i["\u0275ted"](-1,null,["\n  "]))],null,function(t,e){t(e,1,0,e.context.$implicit.properties.bezeichnung,e.context.$implicit.properties.nummer),t(e,2,0,i["\u0275nov"](e,3).disabled||null)})}function Go(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,4,"ul",[["class","list-group"]],null,null,null,null,null)),(t()(),i["\u0275ted"](-1,null,["\n  "])),(t()(),i["\u0275and"](16777216,null,null,1,null,Ho)),i["\u0275did"](3,802816,null,0,P,[i.ViewContainerRef,i.TemplateRef,i.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(t()(),i["\u0275ted"](-1,null,["\n"])),(t()(),i["\u0275ted"](-1,null,["\n"]))],function(t,e){t(e,3,0,e.component.fountains)},null)}var Wo=n("N/q0"),Ko=function(){function t(t,e,n){this.dataService=t,this.mc=e,this.ngRedux=n,this.fountains=[]}return t.prototype.selectFountain=function(t){this.ngRedux.dispatch({type:a,fountainId:t})},t.prototype.deselectFountain=function(){this.ngRedux.dispatch({type:u})},t.prototype.zoomToFountain=function(t){this.map.flyTo({center:[t.geometry.coordinates[0],t.geometry.coordinates[1]],zoom:this.mc.map.maxZoom,pitch:45})},t.prototype.zoomOut=function(){this.map.flyTo({zoom:this.mc.map.zoom,pitch:0})},t.prototype.initializeMap=function(){var t=this;Wo.accessToken="pk.eyJ1Ijoid2F0ZXItZm91bnRhaW5zIiwiYSI6ImNqZGZ1cDR4bTA5OGcyeGxuamYzZnI2c20ifQ.aE2ji5z01HuLBGXNYraZYQ",this.map=new Wo.Map(Object.assign(this.mc.map,{container:"map"})).on("load",function(){var e=t.dataService.fountainsAll;e&&t.loadData(e)})},t.prototype.ngOnInit=function(){var t=this;this.initializeMap(),this.mode.subscribe(function(e){switch(setTimeout(function(){return t.map.resize()},100),e){case"map":t.zoomOut()}}),this.dataService.fountainsLoadedSuccess.subscribe(function(e){t.map.isStyleLoaded()&&t.loadData(e)}),this.fountainSelected.subscribe(function(e){t.map.isStyleLoaded()&&t.zoomToFountain(e)}),this.dataService.fountainsFilteredSuccess.subscribe(function(e){t.map.isStyleLoaded()&&t.filterMappedFountains(e)})},t.prototype.filterMappedFountains=function(t){this.map.setFilter("fountains",["match",["get","nummer"],t.map(function(t){return t.properties.nummer}),!0,!1])},t.prototype.loadData=function(t){var e=this;this.map.addSource("fountains-src",{type:"geojson",data:t}),this.map.addLayer({id:"fountains",type:"circle",source:"fountains-src",paint:{"circle-radius":["interpolate",["linear"],["zoom"],12,2,16,10,18,30],"circle-color":"darkblue","circle-stroke-color":"white","circle-stroke-width":1}}),this.map.on("click","fountains",function(t){e.selectFountain(t.features[0].properties.nummer)}),this.map.on("mouseenter","fountains",function(){e.map.getCanvas().style.cursor="pointer"}),this.map.on("mouseleave","fountains",function(){e.map.getCanvas().style.cursor=""})},Object(d.b)([Object(r.select)(),Object(d.d)("design:type",Object)],t.prototype,"mode",void 0),Object(d.b)([Object(r.select)(),Object(d.d)("design:type",Object)],t.prototype,"fountainId",void 0),Object(d.b)([Object(r.select)(),Object(d.d)("design:type",Object)],t.prototype,"fountainSelected",void 0),t}(),Xo=n("cqO5"),Jo=function(){return function(){this.map={zoom:15,center:[8.5417,47.3769],minZoom:12,maxZoom:18,style:"mapbox://styles/water-fountains/cjdfuslg5ftqo2squxk76q8pl",hash:!1,pitchWithRotate:!0},this.fountainMarker={iconUrl:"../../assets/fountainIcon.png",iconSize:new Xo.Point(8,24),iconAnchor:new Xo.Point(4,24),shadowUrl:"../../assets/fountainIconShadow.png",shadowSize:new Xo.Point(21,29),shadowAnchor:new Xo.Point(9,22)}}}(),Yo=i["\u0275crt"]({encapsulation:0,styles:[["#map[_ngcontent-%COMP%]{height:100%;width:100%}"]],data:{}});function Qo(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,0,"div",[["id","map"]],null,null,null,null,null)),(t()(),i["\u0275ted"](-1,null,["\n"]))],null,null)}var $o=new Map,ta=function(){function t(t){this.platform=t,this._matchMedia=this.platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):ea}return t.prototype.matchMedia=function(t){return this.platform.WEBKIT&&function(t){if(!$o.has(t))try{var e=document.createElement("style");e.setAttribute("type","text/css"),e.sheet||e.appendChild(document.createTextNode("@media "+t+" {.fx-query-test{ }}")),document.getElementsByTagName("head")[0].appendChild(e),$o.set(t,e)}catch(t){console.error(t)}}(t),this._matchMedia(t)},t}();function ea(t){return{matches:"all"===t||""===t,media:t,addListener:function(){},removeListener:function(){}}}var na=i["\u0275crt"]({encapsulation:0,styles:[['.app-holder[_ngcontent-%COMP%]{display:-ms-grid;display:grid;grid-template-areas:"top" "bottom";-ms-grid-columns:1fr;grid-template-columns:1fr;-ms-grid-rows:auto 1fr;grid-template-rows:auto 1fr;grid-gap:0;height:100vh}app-navbar[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-column:1;grid-area:top}mat-drawer-container[_ngcontent-%COMP%]{-ms-grid-row:2;-ms-grid-column:1;grid-area:bottom}.map-area[_ngcontent-%COMP%]{display:-ms-grid;display:grid;grid-template-areas:"map" "detail";-ms-grid-columns:1fr;grid-template-columns:1fr;-ms-grid-rows:1fr auto;grid-template-rows:1fr auto;grid-gap:0;height:100%}.list-holder[_ngcontent-%COMP%]{width:300px}app-list[_ngcontent-%COMP%]{overflow-y:scroll}app-map[_ngcontent-%COMP%]{-ms-grid-row:1;grid-area:map;height:100%}app-detail[_ngcontent-%COMP%], app-map[_ngcontent-%COMP%]{-ms-grid-column:1;width:100%}app-detail[_ngcontent-%COMP%]{-ms-grid-row:2;grid-area:detail;padding:50px;bottom:0}']],data:{}});function ia(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,1,"app-detail",[],null,null,null,qn,Zn)),i["\u0275did"](1,114688,null,0,Fn,[Vn.NgRedux],null,null)],function(t,e){t(e,1,0)},null)}function ra(t){return i["\u0275vid"](0,[i["\u0275qud"](402653184,1,{listDrawer:0}),(t()(),i["\u0275eld"](1,0,null,null,31,"div",[["class","app-holder"]],null,null,null,null,null)),(t()(),i["\u0275ted"](-1,null,["\n  "])),(t()(),i["\u0275eld"](3,0,null,null,1,"app-navbar",[],null,null,null,To,So)),i["\u0275did"](4,114688,null,0,Po,[Vn.NgRedux],null,null),(t()(),i["\u0275ted"](-1,null,["\n  "])),(t()(),i["\u0275eld"](6,0,null,null,25,"mat-drawer-container",[["class","mat-drawer-container"],["style","width: 100%; height: 1fr"]],null,null,null,Vo,Bo)),i["\u0275did"](7,1490944,null,2,Mo,[[2,F],i.ElementRef,i.NgZone,i.ChangeDetectorRef,Ao],null,null),i["\u0275qud"](603979776,2,{_drawers:1}),i["\u0275qud"](335544320,3,{_content:0}),(t()(),i["\u0275ted"](-1,2,["\n    "])),(t()(),i["\u0275eld"](11,0,null,0,5,"mat-drawer",[["class","list-holder mat-drawer"],["tabIndex","-1"]],[[40,"@transform",0],[1,"align",0],[2,"mat-drawer-end",null],[2,"mat-drawer-over",null],[2,"mat-drawer-push",null],[2,"mat-drawer-side",null]],[["component","@transform.start"],["component","@transform.done"],[null,"keydown"]],function(t,e,n){var r=!0;return"component:@transform.start"===e&&(r=!1!==i["\u0275nov"](t,12)._onAnimationStart(n)&&r),"component:@transform.done"===e&&(r=!1!==i["\u0275nov"](t,12)._onAnimationEnd(n)&&r),"keydown"===e&&(r=!1!==i["\u0275nov"](t,12).handleKeydown(n)&&r),r},No,jo)),i["\u0275did"](12,3325952,[[2,4],[1,4],["listDrawer",4]],0,Lo,[i.ElementRef,_n,An,Te,[2,N]],{mode:[0,"mode"]},null),(t()(),i["\u0275ted"](-1,0,["\n      "])),(t()(),i["\u0275eld"](14,0,null,0,1,"app-list",[],null,null,null,Go,qo)),i["\u0275did"](15,114688,null,0,Uo,[Zo,Vn.NgRedux],null,null),(t()(),i["\u0275ted"](-1,0,["\n    "])),(t()(),i["\u0275ted"](-1,2,["\n    "])),(t()(),i["\u0275eld"](18,0,null,1,12,"mat-drawer-content",[["class","mat-drawer-content"]],[[4,"margin-left","px"],[4,"margin-right","px"]],null,null,Ro,Do)),i["\u0275did"](19,1097728,[[3,4]],0,Io,[i.ChangeDetectorRef,Mo],null,null),(t()(),i["\u0275ted"](-1,0,["\n      "])),(t()(),i["\u0275eld"](21,0,null,0,8,"div",[["class","map-area"]],null,null,null,null,null)),(t()(),i["\u0275ted"](-1,null,["\n        "])),(t()(),i["\u0275eld"](23,0,null,null,1,"app-map",[],null,null,null,Qo,Yo)),i["\u0275did"](24,114688,null,0,Ko,[Zo,Jo,Vn.NgRedux],null,null),(t()(),i["\u0275ted"](-1,null,["\n        "])),(t()(),i["\u0275and"](16777216,null,null,2,null,ia)),i["\u0275did"](27,16384,null,0,T,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),i["\u0275pid"](131072,R,[i.ChangeDetectorRef]),(t()(),i["\u0275ted"](-1,null,["\n      "])),(t()(),i["\u0275ted"](-1,0,["\n    "])),(t()(),i["\u0275ted"](-1,2,["\n  "])),(t()(),i["\u0275ted"](-1,null,["\n"])),(t()(),i["\u0275ted"](-1,null,["\n\n"]))],function(t,e){var n=e.component;t(e,4,0),t(e,7,0),t(e,12,0,n.mobileQuery.matches?"over":"side"),t(e,15,0),t(e,24,0),t(e,27,0,"details"==i["\u0275unv"](e,27,0,i["\u0275nov"](e,28).transform(n.mode)))},function(t,e){t(e,11,0,i["\u0275nov"](e,12)._animationState,null,"end"===i["\u0275nov"](e,12).position,"over"===i["\u0275nov"](e,12).mode,"push"===i["\u0275nov"](e,12).mode,"side"===i["\u0275nov"](e,12).mode),t(e,18,0,i["\u0275nov"](e,19)._margins.left,i["\u0275nov"](e,19)._margins.right)})}var oa=i["\u0275ccf"]("app-root",m,function(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,1,"app-root",[],null,null,null,ra,na)),i["\u0275did"](1,245760,null,0,m,[i.ChangeDetectorRef,ta],null,null)],function(t,e){t(e,1,0)},null)},{},{},[]);function aa(t){switch(t.length){case 0:return new tr;case 1:return t[0];default:return new er(t)}}function sa(t,e,n,i,r,o){void 0===r&&(r={}),void 0===o&&(o={});var a=[],s=[],u=-1,l=null;if(i.forEach(function(t){var n=t.offset,i=n==u,c=i&&l||{};Object.keys(t).forEach(function(n){var i=n,s=t[n];if("offset"!==n)switch(i=e.normalizePropertyName(i,a),s){case nr:s=r[n];break;case Ji:s=o[n];break;default:s=e.normalizeStyleValue(n,i,s,a)}c[i]=s}),i||s.push(c),l=c,u=n}),a.length)throw new Error("Unable to animate due to the following errors:\n - "+a.join("\n - "));return s}function ua(t,e,n,i){switch(e){case"start":t.onStart(function(){return i(n&&la(n,"start",t.totalTime))});break;case"done":t.onDone(function(){return i(n&&la(n,"done",t.totalTime))});break;case"destroy":t.onDestroy(function(){return i(n&&la(n,"destroy",t.totalTime))})}}function la(t,e,n){var i=ca(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,void 0==n?t.totalTime:n),r=t._data;return null!=r&&(i._data=r),i}function ca(t,e,n,i,r,o){return void 0===r&&(r=""),void 0===o&&(o=0),{element:t,triggerName:e,fromState:n,toState:i,phaseName:r,totalTime:o}}function pa(t,e,n){var i;return t instanceof Map?(i=t.get(e))||t.set(e,i=n):(i=t[e])||(i=t[e]=n),i}function ha(t){var e=t.indexOf(":");return[t.substring(1,e),t.substr(e+1)]}var fa=function(t,e){return!1},da=function(t,e){return!1},ma=function(t,e,n){return[]};if("undefined"!=typeof Element){if(fa=function(t,e){return t.contains(e)},Element.prototype.matches)da=function(t,e){return t.matches(e)};else{var ya=Element.prototype,ga=ya.matchesSelector||ya.mozMatchesSelector||ya.msMatchesSelector||ya.oMatchesSelector||ya.webkitMatchesSelector;ga&&(da=function(t,e){return ga.apply(t,[e])})}ma=function(t,e,n){var i=[];if(n)i.push.apply(i,t.querySelectorAll(e));else{var r=t.querySelector(e);r&&i.push(r)}return i}}var va=null,_a=!1;function ba(t){va||(va=xa()||{},_a=!!va.style&&"WebkitAppearance"in va.style);var e=!0;return va.style&&!function(t){return"ebkit"==t.substring(1,6)}(t)&&!(e=t in va.style)&&_a&&(e="Webkit"+t.charAt(0).toUpperCase()+t.substr(1)in va.style),e}function xa(){return"undefined"!=typeof document?document.body:null}var wa=da,Ea=fa,Ca=ma,Oa=function(){function t(){}return t.prototype.validateStyleProperty=function(t){return ba(t)},t.prototype.matchesElement=function(t,e){return wa(t,e)},t.prototype.containsElement=function(t,e){return Ea(t,e)},t.prototype.query=function(t,e,n){return Ca(t,e,n)},t.prototype.computeStyle=function(t,e,n){return n||""},t.prototype.animate=function(t,e,n,i,r,o){return void 0===o&&(o=[]),new tr},t}(),Pa=function(){function t(){}return t.NOOP=new Oa,t}(),Sa=1e3;function Ta(t){if("number"==typeof t)return t;var e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:ka(parseFloat(e[1]),e[2])}function ka(t,e){switch(e){case"s":return t*Sa;default:return t}}function Aa(t,e,n){return t.hasOwnProperty("duration")?t:function(t,e,n){var i,r=0,o="";if("string"==typeof t){var a=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push('The provided timing value "'+t+'" is invalid.'),{duration:0,delay:0,easing:""};i=ka(parseFloat(a[1]),a[2]);var s=a[3];null!=s&&(r=ka(Math.floor(parseFloat(s)),a[4]));var u=a[5];u&&(o=u)}else i=t;if(!n){var l=!1,c=e.length;i<0&&(e.push("Duration values below 0 are not allowed for this animation step."),l=!0),r<0&&(e.push("Delay values below 0 are not allowed for this animation step."),l=!0),l&&e.splice(c,0,'The provided timing value "'+t+'" is invalid.')}return{duration:i,delay:r,easing:o}}(t,e,n)}function Ia(t,e){return void 0===e&&(e={}),Object.keys(t).forEach(function(n){e[n]=t[n]}),e}function La(t,e,n){if(void 0===n&&(n={}),e)for(var i in t)n[i]=t[i];else Ia(t,n);return n}function Ma(t,e){t.style&&Object.keys(e).forEach(function(n){var i=Va(n);t.style[i]=e[n]})}function za(t,e){t.style&&Object.keys(e).forEach(function(e){var n=Va(e);t.style[n]=""})}function Da(t){return Array.isArray(t)?1==t.length?t[0]:Yi(t):t}var Ra=new RegExp("{{\\s*(.+?)\\s*}}","g");function ja(t){var e=[];if("string"==typeof t){for(var n=t.toString(),i=void 0;i=Ra.exec(n);)e.push(i[1]);Ra.lastIndex=0}return e}function Na(t,e,n){var i=t.toString(),r=i.replace(Ra,function(t,i){var r=e[i];return e.hasOwnProperty(i)||(n.push("Please provide a value for the animation param "+i),r=""),r.toString()});return r==i?t:r}function Ba(t){for(var e=[],n=t.next();!n.done;)e.push(n.value),n=t.next();return e}var Fa=/-+([a-z0-9])/g;function Va(t){return t.replace(Fa,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t[1].toUpperCase()})}function Za(t,e,n){switch(e.type){case 7:return t.visitTrigger(e,n);case 0:return t.visitState(e,n);case 1:return t.visitTransition(e,n);case 2:return t.visitSequence(e,n);case 3:return t.visitGroup(e,n);case 4:return t.visitAnimate(e,n);case 5:return t.visitKeyframes(e,n);case 6:return t.visitStyle(e,n);case 8:return t.visitReference(e,n);case 9:return t.visitAnimateChild(e,n);case 10:return t.visitAnimateRef(e,n);case 11:return t.visitQuery(e,n);case 12:return t.visitStagger(e,n);default:throw new Error("Unable to resolve animation metadata node #"+e.type)}}var Ua="*",qa=new Set(["true","1"]),Ha=new Set(["false","0"]);function Ga(t,e){var n=qa.has(t)||Ha.has(t),i=qa.has(e)||Ha.has(e);return function(r,o){var a=t==Ua||t==r,s=e==Ua||e==o;return!a&&n&&"boolean"==typeof r&&(a=r?qa.has(t):Ha.has(t)),!s&&i&&"boolean"==typeof o&&(s=o?qa.has(e):Ha.has(e)),a&&s}}var Wa=new RegExp("s*:selfs*,?","g");function Ka(t,e,n){return new Xa(t).build(e,n)}var Xa=function(){function t(t){this._driver=t}return t.prototype.build=function(t,e){var n=new Ja(e);return this._resetContextStyleTimingState(n),Za(this,Da(t),n)},t.prototype._resetContextStyleTimingState=function(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0},t.prototype.visitTrigger=function(t,e){var n=this,i=e.queryCount=0,r=e.depCount=0,o=[],a=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(function(t){if(n._resetContextStyleTimingState(e),0==t.type){var s=t,u=s.name;u.split(/\s*,\s*/).forEach(function(t){s.name=t,o.push(n.visitState(s,e))}),s.name=u}else if(1==t.type){var l=n.visitTransition(t,e);i+=l.queryCount,r+=l.depCount,a.push(l)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:o,transitions:a,queryCount:i,depCount:r,options:null}},t.prototype.visitState=function(t,e){var n=this.visitStyle(t.styles,e),i=t.options&&t.options.params||null;if(n.containsDynamicStyles){var r=new Set,o=i||{};if(n.styles.forEach(function(t){if(Ya(t)){var e=t;Object.keys(e).forEach(function(t){ja(e[t]).forEach(function(t){o.hasOwnProperty(t)||r.add(t)})})}}),r.size){var a=Ba(r.values());e.errors.push('state("'+t.name+'", ...) must define default values for all the following style substitutions: '+a.join(", "))}}return{type:0,name:t.name,style:n,options:i?{params:i}:null}},t.prototype.visitTransition=function(t,e){e.queryCount=0,e.depCount=0;var n,i,r,o=Za(this,Da(t.animation),e);return{type:1,matchers:(n=t.expr,i=e.errors,r=[],"string"==typeof n?n.split(/\s*,\s*/).forEach(function(t){return function(t,e,n){if(":"==t[0]){var i=function(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return function(t,e){return parseFloat(e)>parseFloat(t)};case":decrement":return function(t,e){return parseFloat(e)<parseFloat(t)};default:return e.push('The transition alias value "'+t+'" is not supported'),"* => *"}}(t,n);if("function"==typeof i)return void e.push(i);t=i}var r=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return n.push('The provided transition expression "'+t+'" is not supported'),e;var o=r[1],a=r[2],s=r[3];e.push(Ga(o,s)),"<"!=a[0]||o==Ua&&s==Ua||e.push(Ga(s,o))}(t,r,i)}):r.push(n),r),animation:o,queryCount:e.queryCount,depCount:e.depCount,options:Qa(t.options)}},t.prototype.visitSequence=function(t,e){var n=this;return{type:2,steps:t.steps.map(function(t){return Za(n,t,e)}),options:Qa(t.options)}},t.prototype.visitGroup=function(t,e){var n=this,i=e.currentTime,r=0,o=t.steps.map(function(t){e.currentTime=i;var o=Za(n,t,e);return r=Math.max(r,e.currentTime),o});return e.currentTime=r,{type:3,steps:o,options:Qa(t.options)}},t.prototype.visitAnimate=function(t,e){var n,i=function(t,e){var n=null;if(t.hasOwnProperty("duration"))n=t;else if("number"==typeof t)return $a(Aa(t,e).duration,0,"");var i=t;if(i.split(/\s+/).some(function(t){return"{"==t.charAt(0)&&"{"==t.charAt(1)})){var r=$a(0,0,"");return r.dynamic=!0,r.strValue=i,r}return $a((n=n||Aa(i,e)).duration,n.delay,n.easing)}(t.timings,e.errors);e.currentAnimateTimings=i;var r=t.styles?t.styles:Qi({});if(5==r.type)n=this.visitKeyframes(r,e);else{var o=t.styles,a=!1;if(!o){a=!0;var s={};i.easing&&(s.easing=i.easing),o=Qi(s)}e.currentTime+=i.duration+i.delay;var u=this.visitStyle(o,e);u.isEmptyStep=a,n=u}return e.currentAnimateTimings=null,{type:4,timings:i,style:n,options:null}},t.prototype.visitStyle=function(t,e){var n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n},t.prototype._makeStyleAst=function(t,e){var n=[];Array.isArray(t.styles)?t.styles.forEach(function(t){"string"==typeof t?t==Ji?n.push(t):e.errors.push("The provided style string value "+t+" is not allowed."):n.push(t)}):n.push(t.styles);var i=!1,r=null;return n.forEach(function(t){if(Ya(t)){var e=t,n=e.easing;if(n&&(r=n,delete e.easing),!i)for(var o in e)if(e[o].toString().indexOf("{{")>=0){i=!0;break}}}),{type:6,styles:n,easing:r,offset:t.offset,containsDynamicStyles:i,options:null}},t.prototype._validateStyleAst=function(t,e){var n=this,i=e.currentAnimateTimings,r=e.currentTime,o=e.currentTime;i&&o>0&&(o-=i.duration+i.delay),t.styles.forEach(function(t){"string"!=typeof t&&Object.keys(t).forEach(function(i){if(n._driver.validateStyleProperty(i)){var a,s,u,l=e.collectedStyles[e.currentQuerySelector],c=l[i],p=!0;c&&(o!=r&&o>=c.startTime&&r<=c.endTime&&(e.errors.push('The CSS property "'+i+'" that exists between the times of "'+c.startTime+'ms" and "'+c.endTime+'ms" is also being animated in a parallel animation between the times of "'+o+'ms" and "'+r+'ms"'),p=!1),o=c.startTime),p&&(l[i]={startTime:o,endTime:r}),e.options&&(a=e.errors,s=e.options.params||{},(u=ja(t[i])).length&&u.forEach(function(t){s.hasOwnProperty(t)||a.push("Unable to resolve the local animation param "+t+" in the given list of values")}))}else e.errors.push('The provided animation property "'+i+'" is not a supported CSS property for animations')})})},t.prototype.visitKeyframes=function(t,e){var n=this,i={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),i;var r=0,o=[],a=!1,s=!1,u=0,l=t.steps.map(function(t){var i=n._makeStyleAst(t,e),l=null!=i.offset?i.offset:function(t){if("string"==typeof t)return null;var e=null;if(Array.isArray(t))t.forEach(function(t){if(Ya(t)&&t.hasOwnProperty("offset")){var n=t;e=parseFloat(n.offset),delete n.offset}});else if(Ya(t)&&t.hasOwnProperty("offset")){var n=t;e=parseFloat(n.offset),delete n.offset}return e}(i.styles),c=0;return null!=l&&(r++,c=i.offset=l),s=s||c<0||c>1,a=a||c<u,u=c,o.push(c),i});s&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),a&&e.errors.push("Please ensure that all keyframe offsets are in order");var c=t.steps.length,p=0;r>0&&r<c?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==r&&(p=1/(c-1));var h=c-1,f=e.currentTime,d=e.currentAnimateTimings,m=d.duration;return l.forEach(function(t,r){var a=p>0?r==h?1:p*r:o[r],s=a*m;e.currentTime=f+d.delay+s,d.duration=s,n._validateStyleAst(t,e),t.offset=a,i.styles.push(t)}),i},t.prototype.visitReference=function(t,e){return{type:8,animation:Za(this,Da(t.animation),e),options:Qa(t.options)}},t.prototype.visitAnimateChild=function(t,e){return e.depCount++,{type:9,options:Qa(t.options)}},t.prototype.visitAnimateRef=function(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:Qa(t.options)}},t.prototype.visitQuery=function(t,e){var n=e.currentQuerySelector,i=t.options||{};e.queryCount++,e.currentQuery=t;var r=function(t){var e=!!t.split(/\s*,\s*/).find(function(t){return":self"==t});return e&&(t=t.replace(Wa,"")),[t=t.replace(/@\*/g,".ng-trigger").replace(/@\w+/g,function(t){return".ng-trigger-"+t.substr(1)}).replace(/:animating/g,".ng-animating"),e]}(t.selector),o=r[0],a=r[1];e.currentQuerySelector=n.length?n+" "+o:o,pa(e.collectedStyles,e.currentQuerySelector,{});var s=Za(this,Da(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:o,limit:i.limit||0,optional:!!i.optional,includeSelf:a,animation:s,originalSelector:t.selector,options:Qa(t.options)}},t.prototype.visitStagger=function(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");var n="full"===t.timings?{duration:0,delay:0,easing:"full"}:Aa(t.timings,e.errors,!0);return{type:12,animation:Za(this,Da(t.animation),e),timings:n,options:null}},t}(),Ja=function(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null};function Ya(t){return!Array.isArray(t)&&"object"==typeof t}function Qa(t){var e;return t?(t=Ia(t)).params&&(t.params=(e=t.params)?Ia(e):null):t={},t}function $a(t,e,n){return{duration:t,delay:e,easing:n}}function ts(t,e,n,i,r,o,a,s){return void 0===a&&(a=null),void 0===s&&(s=!1),{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:i,duration:r,delay:o,totalTime:r+o,easing:a,subTimeline:s}}var es=function(){function t(){this._map=new Map}return t.prototype.consume=function(t){var e=this._map.get(t);return e?this._map.delete(t):e=[],e},t.prototype.append=function(t,e){var n=this._map.get(t);n||this._map.set(t,n=[]),n.push.apply(n,e)},t.prototype.has=function(t){return this._map.has(t)},t.prototype.clear=function(){this._map.clear()},t}(),ns=new RegExp(":enter","g"),is=new RegExp(":leave","g");function rs(t,e,n,i,r,o,a,s,u,l){return void 0===o&&(o={}),void 0===a&&(a={}),void 0===l&&(l=[]),(new os).buildKeyframes(t,e,n,i,r,o,a,s,u,l)}var os=function(){function t(){}return t.prototype.buildKeyframes=function(t,e,n,i,r,o,a,s,u,l){void 0===l&&(l=[]),u=u||new es;var c=new ss(t,e,u,i,r,l,[]);c.options=s,c.currentTimeline.setStyles([o],null,c.errors,s),Za(this,n,c);var p=c.timelines.filter(function(t){return t.containsAnimation()});if(p.length&&Object.keys(a).length){var h=p[p.length-1];h.allowOnlyTimelineStyles()||h.setStyles([a],null,c.errors,s)}return p.length?p.map(function(t){return t.buildKeyframes()}):[ts(e,[],[],[],0,0,"",!1)]},t.prototype.visitTrigger=function(t,e){},t.prototype.visitState=function(t,e){},t.prototype.visitTransition=function(t,e){},t.prototype.visitAnimateChild=function(t,e){var n=e.subInstructions.consume(e.element);if(n){var i=e.createSubContext(t.options),r=e.currentTimeline.currentTime,o=this._visitSubInstructions(n,i,i.options);r!=o&&e.transformIntoNewTimeline(o)}e.previousNode=t},t.prototype.visitAnimateRef=function(t,e){var n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t},t.prototype._visitSubInstructions=function(t,e,n){var i=e.currentTimeline.currentTime,r=null!=n.duration?Ta(n.duration):null,o=null!=n.delay?Ta(n.delay):null;return 0!==r&&t.forEach(function(t){var n=e.appendInstructionToTimeline(t,r,o);i=Math.max(i,n.duration+n.delay)}),i},t.prototype.visitReference=function(t,e){e.updateOptions(t.options,!0),Za(this,t.animation,e),e.previousNode=t},t.prototype.visitSequence=function(t,e){var n=this,i=e.subContextCount,r=e,o=t.options;if(o&&(o.params||o.delay)&&((r=e.createSubContext(o)).transformIntoNewTimeline(),null!=o.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=as);var a=Ta(o.delay);r.delayNextStep(a)}t.steps.length&&(t.steps.forEach(function(t){return Za(n,t,r)}),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),e.previousNode=t},t.prototype.visitGroup=function(t,e){var n=this,i=[],r=e.currentTimeline.currentTime,o=t.options&&t.options.delay?Ta(t.options.delay):0;t.steps.forEach(function(a){var s=e.createSubContext(t.options);o&&s.delayNextStep(o),Za(n,a,s),r=Math.max(r,s.currentTimeline.currentTime),i.push(s.currentTimeline)}),i.forEach(function(t){return e.currentTimeline.mergeTimelineCollectedStyles(t)}),e.transformIntoNewTimeline(r),e.previousNode=t},t.prototype._visitTiming=function(t,e){if(t.dynamic){var n=t.strValue;return Aa(e.params?Na(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}},t.prototype.visitAnimate=function(t,e){var n=e.currentAnimateTimings=this._visitTiming(t.timings,e),i=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),i.snapshotCurrentStyles());var r=t.style;5==r.type?this.visitKeyframes(r,e):(e.incrementTime(n.duration),this.visitStyle(r,e),i.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t},t.prototype.visitStyle=function(t,e){var n=e.currentTimeline,i=e.currentAnimateTimings;!i&&n.getCurrentStyleProperties().length&&n.forwardFrame();var r=i&&i.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(r):n.setStyles(t.styles,r,e.errors,e.options),e.previousNode=t},t.prototype.visitKeyframes=function(t,e){var n=e.currentAnimateTimings,i=e.currentTimeline.duration,r=n.duration,o=e.createSubContext().currentTimeline;o.easing=n.easing,t.styles.forEach(function(t){o.forwardTime((t.offset||0)*r),o.setStyles(t.styles,t.easing,e.errors,e.options),o.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(o),e.transformIntoNewTimeline(i+r),e.previousNode=t},t.prototype.visitQuery=function(t,e){var n=this,i=e.currentTimeline.currentTime,r=t.options||{},o=r.delay?Ta(r.delay):0;o&&(6===e.previousNode.type||0==i&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=as);var a=i,s=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=s.length;var u=null;s.forEach(function(i,r){e.currentQueryIndex=r;var s=e.createSubContext(t.options,i);o&&s.delayNextStep(o),i===e.element&&(u=s.currentTimeline),Za(n,t.animation,s),s.currentTimeline.applyStylesToKeyframe(),a=Math.max(a,s.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(a),u&&(e.currentTimeline.mergeTimelineCollectedStyles(u),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t},t.prototype.visitStagger=function(t,e){var n=e.parentContext,i=e.currentTimeline,r=t.timings,o=Math.abs(r.duration),a=o*(e.currentQueryTotal-1),s=o*e.currentQueryIndex;switch(r.duration<0?"reverse":r.easing){case"reverse":s=a-s;break;case"full":s=n.currentStaggerTime}var u=e.currentTimeline;s&&u.delayNextStep(s);var l=u.currentTime;Za(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=i.currentTime-l+(i.startTime-n.currentTimeline.startTime)},t}(),as={},ss=function(){function t(t,e,n,i,r,o,a,s){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=i,this._leaveClassName=r,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=as,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=s||new us(this._driver,e,0),a.push(this.currentTimeline)}return Object.defineProperty(t.prototype,"params",{get:function(){return this.options.params},enumerable:!0,configurable:!0}),t.prototype.updateOptions=function(t,e){var n=this;if(t){var i=t,r=this.options;null!=i.duration&&(r.duration=Ta(i.duration)),null!=i.delay&&(r.delay=Ta(i.delay));var o=i.params;if(o){var a=r.params;a||(a=this.options.params={}),Object.keys(o).forEach(function(t){e&&a.hasOwnProperty(t)||(a[t]=Na(o[t],a,n.errors))})}}},t.prototype._copyOptions=function(){var t={};if(this.options){var e=this.options.params;if(e){var n=t.params={};Object.keys(e).forEach(function(t){n[t]=e[t]})}}return t},t.prototype.createSubContext=function(e,n,i){void 0===e&&(e=null);var r=n||this.element,o=new t(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o},t.prototype.transformIntoNewTimeline=function(t){return this.previousNode=as,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline},t.prototype.appendInstructionToTimeline=function(t,e,n){var i={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+t.delay,easing:""},r=new ls(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,i,t.stretchStartingKeyframe);return this.timelines.push(r),i},t.prototype.incrementTime=function(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)},t.prototype.delayNextStep=function(t){t>0&&this.currentTimeline.delayNextStep(t)},t.prototype.invokeQuery=function(t,e,n,i,r,o){var a=[];if(i&&a.push(this.element),t.length>0){t=(t=t.replace(ns,"."+this._enterClassName)).replace(is,"."+this._leaveClassName);var s=this._driver.query(this.element,t,1!=n);0!==n&&(s=n<0?s.slice(s.length+n,s.length):s.slice(0,n)),a.push.apply(a,s)}return r||0!=a.length||o.push('`query("'+e+'")` returned zero elements. (Use `query("'+e+'", { optional: true })` if you wish to allow this.)'),a},t}(),us=function(){function t(t,e,n,i){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}return t.prototype.containsAnimation=function(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}},t.prototype.getCurrentStyleProperties=function(){return Object.keys(this._currentKeyframe)},Object.defineProperty(t.prototype,"currentTime",{get:function(){return this.startTime+this.duration},enumerable:!0,configurable:!0}),t.prototype.delayNextStep=function(t){var e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t},t.prototype.fork=function(e,n){return this.applyStylesToKeyframe(),new t(this._driver,e,n||this.currentTime,this._elementTimelineStylesLookup)},t.prototype._loadKeyframe=function(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))},t.prototype.forwardFrame=function(){this.duration+=1,this._loadKeyframe()},t.prototype.forwardTime=function(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()},t.prototype._updateStyle=function(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}},t.prototype.allowOnlyTimelineStyles=function(){return this._currentEmptyStepKeyframe!==this._currentKeyframe},t.prototype.applyEmptyStep=function(t){var e=this;t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(function(t){e._backFill[t]=e._globalTimelineStyles[t]||Ji,e._currentKeyframe[t]=Ji}),this._currentEmptyStepKeyframe=this._currentKeyframe},t.prototype.setStyles=function(t,e,n,i){var r=this;e&&(this._previousKeyframe.easing=e);var o=i&&i.params||{},a=function(t,e){var n,i={};return t.forEach(function(t){"*"===t?(n=n||Object.keys(e)).forEach(function(t){i[t]=Ji}):La(t,!1,i)}),i}(t,this._globalTimelineStyles);Object.keys(a).forEach(function(t){var e=Na(a[t],o,n);r._pendingStyles[t]=e,r._localTimelineStyles.hasOwnProperty(t)||(r._backFill[t]=r._globalTimelineStyles.hasOwnProperty(t)?r._globalTimelineStyles[t]:Ji),r._updateStyle(t,e)})},t.prototype.applyStylesToKeyframe=function(){var t=this,e=this._pendingStyles,n=Object.keys(e);0!=n.length&&(this._pendingStyles={},n.forEach(function(n){t._currentKeyframe[n]=e[n]}),Object.keys(this._localTimelineStyles).forEach(function(e){t._currentKeyframe.hasOwnProperty(e)||(t._currentKeyframe[e]=t._localTimelineStyles[e])}))},t.prototype.snapshotCurrentStyles=function(){var t=this;Object.keys(this._localTimelineStyles).forEach(function(e){var n=t._localTimelineStyles[e];t._pendingStyles[e]=n,t._updateStyle(e,n)})},t.prototype.getFinalKeyframe=function(){return this._keyframes.get(this.duration)},Object.defineProperty(t.prototype,"properties",{get:function(){var t=[];for(var e in this._currentKeyframe)t.push(e);return t},enumerable:!0,configurable:!0}),t.prototype.mergeTimelineCollectedStyles=function(t){var e=this;Object.keys(t._styleSummary).forEach(function(n){var i=e._styleSummary[n],r=t._styleSummary[n];(!i||r.time>i.time)&&e._updateStyle(n,r.value)})},t.prototype.buildKeyframes=function(){var t=this;this.applyStylesToKeyframe();var e=new Set,n=new Set,i=1===this._keyframes.size&&0===this.duration,r=[];this._keyframes.forEach(function(o,a){var s=La(o,!0);Object.keys(s).forEach(function(t){var i=s[t];i==nr?e.add(t):i==Ji&&n.add(t)}),i||(s.offset=a/t.duration),r.push(s)});var o=e.size?Ba(e.values()):[],a=n.size?Ba(n.values()):[];if(i){var s=r[0],u=Ia(s);s.offset=0,u.offset=1,r=[s,u]}return ts(this.element,r,o,a,this.duration,this.startTime,this.easing,!1)},t}(),ls=function(t){function e(e,n,i,r,o,a,s){void 0===s&&(s=!1);var u=t.call(this,e,n,a.delay)||this;return u.element=n,u.keyframes=i,u.preStyleProps=r,u.postStyleProps=o,u._stretchStartingKeyframe=s,u.timings={duration:a.duration,delay:a.delay,easing:a.easing},u}return Object(d.c)(e,t),e.prototype.containsAnimation=function(){return this.keyframes.length>1},e.prototype.buildKeyframes=function(){var t=this.keyframes,e=this.timings,n=e.delay,i=e.duration,r=e.easing;if(this._stretchStartingKeyframe&&n){var o=[],a=i+n,s=n/a,u=La(t[0],!1);u.offset=0,o.push(u);var l=La(t[0],!1);l.offset=cs(s),o.push(l);for(var c=t.length-1,p=1;p<=c;p++){var h=La(t[p],!1);h.offset=cs((n+h.offset*i)/a),o.push(h)}i=a,n=0,r="",t=o}return ts(this.element,t,this.preStyleProps,this.postStyleProps,i,n,r,!0)},e}(us);function cs(t,e){void 0===e&&(e=3);var n=Math.pow(10,e-1);return Math.round(t*n)/n}var ps=function(){},hs=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(d.c)(e,t),e.prototype.normalizePropertyName=function(t,e){return Va(t)},e.prototype.normalizeStyleValue=function(t,e,n,i){var r="",o=n.toString().trim();if(fs[e]&&0!==n&&"0"!==n)if("number"==typeof n)r="px";else{var a=n.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&i.push("Please provide a CSS unit value for "+t+":"+n)}return o+r},e}(ps),fs=function(t){var e={};return"width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",").forEach(function(t){return e[t]=!0}),e}();function ds(t,e,n,i,r,o,a,s,u,l,c,p){return{type:0,element:t,triggerName:e,isRemovalTransition:r,fromState:n,fromStyles:o,toState:i,toStyles:a,timelines:s,queriedElements:u,preStyleProps:l,postStyleProps:c,errors:p}}var ms={},ys=function(){function t(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}return t.prototype.match=function(t,e){return function(t,e,n){return t.some(function(t){return t(e,n)})}(this.ast.matchers,t,e)},t.prototype.buildStyles=function(t,e,n){var i=this._stateStyles["*"],r=this._stateStyles[t],o=i?i.buildStyles(e,n):{};return r?r.buildStyles(e,n):o},t.prototype.build=function(t,e,n,i,r,o,a,s,u){var l=[],c=this.ast.options&&this.ast.options.params||ms,p=this.buildStyles(n,a&&a.params||ms,l),h=s&&s.params||ms,f=this.buildStyles(i,h,l),m=new Set,y=new Map,g=new Map,v="void"===i,_={params:Object(d.a)({},c,h)},b=rs(t,e,this.ast.animation,r,o,p,f,_,u,l);if(l.length)return ds(e,this._triggerName,n,i,v,p,f,[],[],y,g,l);b.forEach(function(t){var n=t.element,i=pa(y,n,{});t.preStyleProps.forEach(function(t){return i[t]=!0});var r=pa(g,n,{});t.postStyleProps.forEach(function(t){return r[t]=!0}),n!==e&&m.add(n)});var x=Ba(m.values());return ds(e,this._triggerName,n,i,v,p,f,b,x,y,g)},t}(),gs=function(){function t(t,e){this.styles=t,this.defaultParams=e}return t.prototype.buildStyles=function(t,e){var n={},i=Ia(this.defaultParams);return Object.keys(t).forEach(function(e){var n=t[e];null!=n&&(i[e]=n)}),this.styles.styles.forEach(function(t){if("string"!=typeof t){var r=t;Object.keys(r).forEach(function(t){var o=r[t];o.length>1&&(o=Na(o,i,e)),n[t]=o})}}),n},t}(),vs=function(){function t(t,e){var n=this;this.name=t,this.ast=e,this.transitionFactories=[],this.states={},e.states.forEach(function(t){n.states[t.name]=new gs(t.style,t.options&&t.options.params||{})}),_s(this.states,"true","1"),_s(this.states,"false","0"),e.transitions.forEach(function(e){n.transitionFactories.push(new ys(t,e,n.states))}),this.fallbackTransition=new ys(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[function(t,e){return!0}],options:null,queryCount:0,depCount:0},this.states)}return Object.defineProperty(t.prototype,"containsQueries",{get:function(){return this.ast.queryCount>0},enumerable:!0,configurable:!0}),t.prototype.matchTransition=function(t,e){return this.transitionFactories.find(function(n){return n.match(t,e)})||null},t.prototype.matchStyles=function(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)},t}();function _s(t,e,n){t.hasOwnProperty(e)?t.hasOwnProperty(n)||(t[n]=t[e]):t.hasOwnProperty(n)&&(t[e]=t[n])}var bs=new es,xs=function(){function t(t,e){this._driver=t,this._normalizer=e,this._animations={},this._playersById={},this.players=[]}return t.prototype.register=function(t,e){var n=[],i=Ka(this._driver,e,n);if(n.length)throw new Error("Unable to build the animation due to the following errors: "+n.join("\n"));this._animations[t]=i},t.prototype._buildPlayer=function(t,e,n){var i=t.element,r=sa(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(i,r,t.duration,t.delay,t.easing,[])},t.prototype.create=function(t,e,n){var i=this;void 0===n&&(n={});var r,o=[],a=this._animations[t],s=new Map;if(a?(r=rs(this._driver,e,a,"ng-enter","ng-leave",{},{},n,bs,o)).forEach(function(t){var e=pa(s,t.element,{});t.postStyleProps.forEach(function(t){return e[t]=null})}):(o.push("The requested animation doesn't exist or has already been destroyed"),r=[]),o.length)throw new Error("Unable to create the animation due to the following errors: "+o.join("\n"));s.forEach(function(t,e){Object.keys(t).forEach(function(n){t[n]=i._driver.computeStyle(e,n,Ji)})});var u=aa(r.map(function(t){var e=s.get(t.element);return i._buildPlayer(t,{},e)}));return this._playersById[t]=u,u.onDestroy(function(){return i.destroy(t)}),this.players.push(u),u},t.prototype.destroy=function(t){var e=this._getPlayer(t);e.destroy(),delete this._playersById[t];var n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)},t.prototype._getPlayer=function(t){var e=this._playersById[t];if(!e)throw new Error("Unable to find the timeline player referenced by "+t);return e},t.prototype.listen=function(t,e,n,i){var r=ca(e,"","","");return ua(this._getPlayer(t),n,r,i),function(){}},t.prototype.command=function(t,e,n,i){if("register"!=n)if("create"!=n){var r=this._getPlayer(t);switch(n){case"play":r.play();break;case"pause":r.pause();break;case"reset":r.reset();break;case"restart":r.restart();break;case"finish":r.finish();break;case"init":r.init();break;case"setPosition":r.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(t)}}else this.create(t,e,i[0]||{});else this.register(t,i[0])},t}(),ws=[],Es={namespaceId:"",setForRemoval:null,hasAnimation:!1,removedBeforeQueried:!1},Cs={namespaceId:"",setForRemoval:null,hasAnimation:!1,removedBeforeQueried:!0},Os="__ng_removed",Ps=function(){function t(t,e){void 0===e&&(e=""),this.namespaceId=e;var n=t&&t.hasOwnProperty("value");if(this.value=function(t){return null!=t?t:null}(n?t.value:t),n){var i=Ia(t);delete i.value,this.options=i}else this.options={};this.options.params||(this.options.params={})}return Object.defineProperty(t.prototype,"params",{get:function(){return this.options.params},enumerable:!0,configurable:!0}),t.prototype.absorbOptions=function(t){var e=t.params;if(e){var n=this.options.params;Object.keys(e).forEach(function(t){null==n[t]&&(n[t]=e[t])})}},t}(),Ss=new Ps("void"),Ts=new Ps("DELETED"),ks=function(){function t(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,js(e,this._hostClassName)}return t.prototype.listen=function(t,e,n,i){var r,o=this;if(!this._triggers.hasOwnProperty(e))throw new Error('Unable to listen on the animation trigger event "'+n+'" because the animation trigger "'+e+"\" doesn't exist!");if(null==n||0==n.length)throw new Error('Unable to listen on the animation trigger "'+e+'" because the provided event is undefined!');if("start"!=(r=n)&&"done"!=r)throw new Error('The provided animation trigger event "'+n+'" for the animation trigger "'+e+'" is not supported!');var a=pa(this._elementListeners,t,[]),s={name:e,phase:n,callback:i};a.push(s);var u=pa(this._engine.statesByElement,t,{});return u.hasOwnProperty(e)||(js(t,"ng-trigger"),js(t,"ng-trigger-"+e),u[e]=Ss),function(){o._engine.afterFlush(function(){var t=a.indexOf(s);t>=0&&a.splice(t,1),o._triggers[e]||delete u[e]})}},t.prototype.register=function(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)},t.prototype._getTrigger=function(t){var e=this._triggers[t];if(!e)throw new Error('The provided animation trigger "'+t+'" has not been registered!');return e},t.prototype.trigger=function(t,e,n,i){var r=this;void 0===i&&(i=!0);var o=this._getTrigger(e),a=new Is(this.id,e,t),s=this._engine.statesByElement.get(t);s||(js(t,"ng-trigger"),js(t,"ng-trigger-"+e),this._engine.statesByElement.set(t,s={}));var u=s[e],l=new Ps(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&u&&l.absorbOptions(u.options),s[e]=l,u){if(u===Ts)return a}else u=Ss;if("void"===l.value||u.value!==l.value){var c=pa(this._engine.playersByElement,t,[]);c.forEach(function(t){t.namespaceId==r.id&&t.triggerName==e&&t.queued&&t.destroy()});var p=o.matchTransition(u.value,l.value),h=!1;if(!p){if(!i)return;p=o.fallbackTransition,h=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:p,fromState:u,toState:l,player:a,isFallbackTransition:h}),h||(js(t,"ng-animate-queued"),a.onStart(function(){Ns(t,"ng-animate-queued")})),a.onDone(function(){var e=r.players.indexOf(a);e>=0&&r.players.splice(e,1);var n=r._engine.playersByElement.get(t);if(n){var i=n.indexOf(a);i>=0&&n.splice(i,1)}}),this.players.push(a),c.push(a),a}if(!function(t,e){var n=Object.keys(t),i=Object.keys(e);if(n.length!=i.length)return!1;for(var r=0;r<n.length;r++){var o=n[r];if(!e.hasOwnProperty(o)||t[o]!==e[o])return!1}return!0}(u.params,l.params)){var f=[],d=o.matchStyles(u.value,u.params,f),m=o.matchStyles(l.value,l.params,f);f.length?this._engine.reportError(f):this._engine.afterFlush(function(){za(t,d),Ma(t,m)})}},t.prototype.deregister=function(t){var e=this;delete this._triggers[t],this._engine.statesByElement.forEach(function(e,n){delete e[t]}),this._elementListeners.forEach(function(n,i){e._elementListeners.set(i,n.filter(function(e){return e.name!=t}))})},t.prototype.clearElementCache=function(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);var e=this._engine.playersByElement.get(t);e&&(e.forEach(function(t){return t.destroy()}),this._engine.playersByElement.delete(t))},t.prototype._signalRemovalForInnerTriggers=function(t,e,n){var i=this;void 0===n&&(n=!1),this._engine.driver.query(t,".ng-trigger",!0).forEach(function(t){if(!t[Os]){var n=i._engine.fetchNamespacesByElement(t);n.size?n.forEach(function(n){return n.triggerLeaveAnimation(t,e,!1,!0)}):i.clearElementCache(t)}})},t.prototype.triggerLeaveAnimation=function(t,e,n,i){var r=this,o=this._engine.statesByElement.get(t);if(o){var a=[];if(Object.keys(o).forEach(function(e){if(r._triggers[e]){var n=r.trigger(t,e,"void",i);n&&a.push(n)}}),a.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),n&&aa(a).onDone(function(){return r._engine.processLeaveNode(t)}),!0}return!1},t.prototype.prepareLeaveAnimationListeners=function(t){var e=this,n=this._elementListeners.get(t);if(n){var i=new Set;n.forEach(function(n){var r=n.name;if(!i.has(r)){i.add(r);var o=e._triggers[r].fallbackTransition,a=e._engine.statesByElement.get(t)[r]||Ss,s=new Ps("void"),u=new Is(e.id,r,t);e._engine.totalQueuedPlayers++,e._queue.push({element:t,triggerName:r,transition:o,fromState:a,toState:s,player:u,isFallbackTransition:!0})}})}},t.prototype.removeNode=function(t,e){var n=this,i=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e,!0),!this.triggerLeaveAnimation(t,e,!0)){var r=!1;if(i.totalAnimations){var o=i.players.length?i.playersByQueriedElement.get(t):[];if(o&&o.length)r=!0;else for(var a=t;a=a.parentNode;)if(i.statesByElement.get(a)){r=!0;break}}this.prepareLeaveAnimationListeners(t),r?i.markElementAsRemoved(this.id,t,!1,e):(i.afterFlush(function(){return n.clearElementCache(t)}),i.destroyInnerAnimations(t),i._onRemovalComplete(t,e))}},t.prototype.insertNode=function(t,e){js(t,this._hostClassName)},t.prototype.drainQueuedTransitions=function(t){var e=this,n=[];return this._queue.forEach(function(i){var r=i.player;if(!r.destroyed){var o=i.element,a=e._elementListeners.get(o);a&&a.forEach(function(e){if(e.name==i.triggerName){var n=ca(o,i.triggerName,i.fromState.value,i.toState.value);n._data=t,ua(i.player,e.phase,n,e.callback)}}),r.markedForDestroy?e._engine.afterFlush(function(){r.destroy()}):n.push(i)}}),this._queue=[],n.sort(function(t,n){var i=t.transition.ast.depCount,r=n.transition.ast.depCount;return 0==i||0==r?i-r:e._engine.driver.containsElement(t.element,n.element)?1:-1})},t.prototype.destroy=function(t){this.players.forEach(function(t){return t.destroy()}),this._signalRemovalForInnerTriggers(this.hostElement,t)},t.prototype.elementContainsData=function(t){var e=!1;return this._elementListeners.has(t)&&(e=!0),!!this._queue.find(function(e){return e.element===t})||e},t}(),As=function(){function t(t,e){this.driver=t,this._normalizer=e,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=function(t,e){}}return t.prototype._onRemovalComplete=function(t,e){this.onRemovalComplete(t,e)},Object.defineProperty(t.prototype,"queuedPlayers",{get:function(){var t=[];return this._namespaceList.forEach(function(e){e.players.forEach(function(e){e.queued&&t.push(e)})}),t},enumerable:!0,configurable:!0}),t.prototype.createNamespace=function(t,e){var n=new ks(t,e,this);return e.parentNode?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n},t.prototype._balanceNamespaceList=function(t,e){var n=this._namespaceList.length-1;if(n>=0){for(var i=!1,r=n;r>=0;r--)if(this.driver.containsElement(this._namespaceList[r].hostElement,e)){this._namespaceList.splice(r+1,0,t),i=!0;break}i||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t},t.prototype.register=function(t,e){var n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n},t.prototype.registerTrigger=function(t,e,n){var i=this._namespaceLookup[t];i&&i.register(e,n)&&this.totalAnimations++},t.prototype.destroy=function(t,e){var n=this;if(t){var i=this._fetchNamespace(t);this.afterFlush(function(){n.namespacesByHostElement.delete(i.hostElement),delete n._namespaceLookup[t];var e=n._namespaceList.indexOf(i);e>=0&&n._namespaceList.splice(e,1)}),this.afterFlushAnimationsDone(function(){return i.destroy(e)})}},t.prototype._fetchNamespace=function(t){return this._namespaceLookup[t]},t.prototype.fetchNamespacesByElement=function(t){var e=new Set,n=this.statesByElement.get(t);if(n)for(var i=Object.keys(n),r=0;r<i.length;r++){var o=n[i[r]].namespaceId;if(o){var a=this._fetchNamespace(o);a&&e.add(a)}}return e},t.prototype.trigger=function(t,e,n,i){return!!Ls(e)&&(this._fetchNamespace(t).trigger(e,n,i),!0)},t.prototype.insertNode=function(t,e,n,i){if(Ls(e)){var r=e[Os];r&&r.setForRemoval&&(r.setForRemoval=!1),t&&this._fetchNamespace(t).insertNode(e,n),i&&this.collectEnterElement(e)}},t.prototype.collectEnterElement=function(t){this.collectedEnterElements.push(t)},t.prototype.markElementAsDisabled=function(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),js(t,"ng-animate-disabled")):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),Ns(t,"ng-animate-disabled"))},t.prototype.removeNode=function(t,e,n){if(Ls(e)){var i=t?this._fetchNamespace(t):null;i?i.removeNode(e,n):this.markElementAsRemoved(t,e,!1,n)}else this._onRemovalComplete(e,n)},t.prototype.markElementAsRemoved=function(t,e,n,i){this.collectedLeaveElements.push(e),e[Os]={namespaceId:t,setForRemoval:i,hasAnimation:n,removedBeforeQueried:!1}},t.prototype.listen=function(t,e,n,i,r){return Ls(e)?this._fetchNamespace(t).listen(e,n,i,r):function(){}},t.prototype._buildInstruction=function(t,e,n,i){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,i,t.fromState.options,t.toState.options,e)},t.prototype.destroyInnerAnimations=function(t){var e=this,n=this.driver.query(t,".ng-trigger",!0);n.forEach(function(t){return e.destroyActiveAnimationsForElement(t)}),0!=this.playersByQueriedElement.size&&(n=this.driver.query(t,".ng-animating",!0)).forEach(function(t){return e.finishActiveQueriedAnimationOnElement(t)})},t.prototype.destroyActiveAnimationsForElement=function(t){var e=this.playersByElement.get(t);e&&e.forEach(function(t){t.queued?t.markedForDestroy=!0:t.destroy()});var n=this.statesByElement.get(t);n&&Object.keys(n).forEach(function(t){return n[t]=Ts})},t.prototype.finishActiveQueriedAnimationOnElement=function(t){var e=this.playersByQueriedElement.get(t);e&&e.forEach(function(t){return t.finish()})},t.prototype.whenRenderingDone=function(){var t=this;return new Promise(function(e){if(t.players.length)return aa(t.players).onDone(function(){return e()});e()})},t.prototype.processLeaveNode=function(t){var e=this,n=t[Os];if(n&&n.setForRemoval){if(t[Os]=Es,n.namespaceId){this.destroyInnerAnimations(t);var i=this._fetchNamespace(n.namespaceId);i&&i.clearElementCache(t)}this._onRemovalComplete(t,n.setForRemoval)}this.driver.matchesElement(t,".ng-animate-disabled")&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(function(n){e.markElementAsDisabled(t,!1)})},t.prototype.flush=function(t){var e=this;void 0===t&&(t=-1);var n=[];if(this.newHostElements.size&&(this.newHostElements.forEach(function(t,n){return e._balanceNamespaceList(t,n)}),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(var i=0;i<this.collectedEnterElements.length;i++)js(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){var r=[];try{n=this._flushAnimations(r,t)}finally{for(i=0;i<r.length;i++)r[i]()}}else for(i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(function(t){return t()}),this._flushFns=[],this._whenQuietFns.length){var o=this._whenQuietFns;this._whenQuietFns=[],n.length?aa(n).onDone(function(){o.forEach(function(t){return t()})}):o.forEach(function(t){return t()})}},t.prototype.reportError=function(t){throw new Error("Unable to process animations due to the following failed trigger transitions\n "+t.join("\n"))},t.prototype._flushAnimations=function(t,e){var n=this,i=new es,r=[],o=new Map,a=[],s=new Map,u=new Map,l=new Map,c=new Set;this.disabledNodes.forEach(function(t){c.add(t);for(var e=n.driver.query(t,".ng-animate-queued",!0),i=0;i<e.length;i++)c.add(e[i])});var p=xa(),h=Array.from(this.statesByElement.keys()),f=Ds(h,this.collectedEnterElements),m=new Map,y=0;f.forEach(function(t,e){var n="ng-enter"+y++;m.set(e,n),t.forEach(function(t){return js(t,n)})});for(var g=[],v=new Set,_=new Set,b=0;b<this.collectedLeaveElements.length;b++)(j=(R=this.collectedLeaveElements[b])[Os])&&j.setForRemoval&&(g.push(R),v.add(R),j.hasAnimation?this.driver.query(R,".ng-star-inserted",!0).forEach(function(t){return v.add(t)}):_.add(R));var x=new Map,w=Ds(h,Array.from(v));w.forEach(function(t,e){var n="ng-leave"+y++;x.set(e,n),t.forEach(function(t){return js(t,n)})}),t.push(function(){f.forEach(function(t,e){var n=m.get(e);t.forEach(function(t){return Ns(t,n)})}),w.forEach(function(t,e){var n=x.get(e);t.forEach(function(t){return Ns(t,n)})}),g.forEach(function(t){n.processLeaveNode(t)})});for(var E=[],C=[],O=this._namespaceList.length-1;O>=0;O--)this._namespaceList[O].drainQueuedTransitions(e).forEach(function(t){var e=t.player;E.push(e);var o=t.element;if(p&&n.driver.containsElement(p,o)){var c=x.get(o),h=m.get(o),f=n._buildInstruction(t,i,h,c);if(f.errors&&f.errors.length)C.push(f);else{if(t.isFallbackTransition)return e.onStart(function(){return za(o,f.fromStyles)}),e.onDestroy(function(){return Ma(o,f.toStyles)}),void r.push(e);f.timelines.forEach(function(t){return t.stretchStartingKeyframe=!0}),i.append(o,f.timelines),a.push({instruction:f,player:e,element:o}),f.queriedElements.forEach(function(t){return pa(s,t,[]).push(e)}),f.preStyleProps.forEach(function(t,e){var n=Object.keys(t);if(n.length){var i=u.get(e);i||u.set(e,i=new Set),n.forEach(function(t){return i.add(t)})}}),f.postStyleProps.forEach(function(t,e){var n=Object.keys(t),i=l.get(e);i||l.set(e,i=new Set),n.forEach(function(t){return i.add(t)})})}}else e.destroy()});if(C.length){var P=[];C.forEach(function(t){P.push("@"+t.triggerName+" has failed due to:\n"),t.errors.forEach(function(t){return P.push("- "+t+"\n")})}),E.forEach(function(t){return t.destroy()}),this.reportError(P)}var S=new Map,T=new Map;a.forEach(function(t){var e=t.element;i.has(e)&&(T.set(e,e),n._beforeAnimationBuild(t.player.namespaceId,t.instruction,S))}),r.forEach(function(t){var e=t.element;n._getPreviousPlayers(e,!1,t.namespaceId,t.triggerName,null).forEach(function(t){pa(S,e,[]).push(t),t.destroy()})});var k=g.filter(function(t){return Fs(t,u,l)}),A=new Map;zs(A,this.driver,_,l,Ji).forEach(function(t){Fs(t,u,l)&&k.push(t)});var I=new Map;f.forEach(function(t,e){zs(I,n.driver,new Set(t),u,nr)}),k.forEach(function(t){var e=A.get(t),n=I.get(t);A.set(t,Object(d.a)({},e,n))});var L=[],M=[],z={};a.forEach(function(t){var e=t.element,a=t.player,s=t.instruction;if(i.has(e)){if(c.has(e))return a.onDestroy(function(){return Ma(e,s.toStyles)}),void r.push(a);var u=z;if(T.size>1){for(var l=e,p=[];l=l.parentNode;){var h=T.get(l);if(h){u=h;break}p.push(l)}p.forEach(function(t){return T.set(t,u)})}var f=n._buildAnimation(a.namespaceId,s,S,o,I,A);if(a.setRealPlayer(f),u===z)L.push(a);else{var d=n.playersByElement.get(u);d&&d.length&&(a.parentPlayer=aa(d)),r.push(a)}}else za(e,s.fromStyles),a.onDestroy(function(){return Ma(e,s.toStyles)}),M.push(a),c.has(e)&&r.push(a)}),M.forEach(function(t){var e=o.get(t.element);if(e&&e.length){var n=aa(e);t.setRealPlayer(n)}}),r.forEach(function(t){t.parentPlayer?t.syncPlayerEvents(t.parentPlayer):t.destroy()});for(var D=0;D<g.length;D++){var R,j=(R=g[D])[Os];if(Ns(R,"ng-leave"),!j||!j.hasAnimation){var N=[];if(s.size){var B=s.get(R);B&&B.length&&N.push.apply(N,B);for(var F=this.driver.query(R,".ng-animating",!0),V=0;V<F.length;V++){var Z=s.get(F[V]);Z&&Z.length&&N.push.apply(N,Z)}}var U=N.filter(function(t){return!t.destroyed});U.length?Bs(this,R,U):this.processLeaveNode(R)}}return g.length=0,L.forEach(function(t){n.players.push(t),t.onDone(function(){t.destroy();var e=n.players.indexOf(t);n.players.splice(e,1)}),t.play()}),L},t.prototype.elementContainsData=function(t,e){var n=!1,i=e[Os];return i&&i.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n},t.prototype.afterFlush=function(t){this._flushFns.push(t)},t.prototype.afterFlushAnimationsDone=function(t){this._whenQuietFns.push(t)},t.prototype._getPreviousPlayers=function(t,e,n,i,r){var o=[];if(e){var a=this.playersByQueriedElement.get(t);a&&(o=a)}else{var s=this.playersByElement.get(t);if(s){var u=!r||"void"==r;s.forEach(function(t){t.queued||(u||t.triggerName==i)&&o.push(t)})}}return(n||i)&&(o=o.filter(function(t){return!(n&&n!=t.namespaceId||i&&i!=t.triggerName)})),o},t.prototype._beforeAnimationBuild=function(t,e,n){for(var i=e.element,r=e.isRemovalTransition?void 0:t,o=e.isRemovalTransition?void 0:e.triggerName,a=function(t){var a=t.element,u=a!==i,l=pa(n,a,[]);s._getPreviousPlayers(a,u,r,o,e.toState).forEach(function(t){var e=t.getRealPlayer();e.beforeDestroy&&e.beforeDestroy(),t.destroy(),l.push(t)})},s=this,u=0,l=e.timelines;u<l.length;u++)a(l[u]);za(i,e.fromStyles)},t.prototype._buildAnimation=function(t,e,n,i,r,o){var a=this,s=e.triggerName,u=e.element,l=[],c=new Set,p=new Set,h=e.timelines.map(function(e){var h=e.element;c.add(h);var f=h[Os];if(f&&f.removedBeforeQueried)return new tr;var d,m,y=h!==u,g=(d=(n.get(h)||ws).map(function(t){return t.getRealPlayer()}),m=[],function t(e,n){for(var i=0;i<e.length;i++){var r=e[i];r instanceof er?t(r.players,n):n.push(r)}}(d,m),m).filter(function(t){return!!t.element&&t.element===h}),v=r.get(h),_=o.get(h),b=sa(0,a._normalizer,0,e.keyframes,v,_),x=a._buildPlayer(e,b,g);if(e.subTimeline&&i&&p.add(h),y){var w=new Is(t,s,h);w.setRealPlayer(x),l.push(w)}return x});l.forEach(function(t){pa(a.playersByQueriedElement,t.element,[]).push(t),t.onDone(function(){return function(t,e,n){var i;if(t instanceof Map){if(i=t.get(e)){if(i.length){var r=i.indexOf(n);i.splice(r,1)}0==i.length&&t.delete(e)}}else(i=t[e])&&(i.length&&(r=i.indexOf(n),i.splice(r,1)),0==i.length&&delete t[e]);return i}(a.playersByQueriedElement,t.element,t)})}),c.forEach(function(t){return js(t,"ng-animating")});var f=aa(h);return f.onDestroy(function(){c.forEach(function(t){return Ns(t,"ng-animating")}),Ma(u,e.toStyles)}),p.forEach(function(t){pa(i,t,[]).push(f)}),f},t.prototype._buildPlayer=function(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new tr},t}(),Is=function(){function t(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n,this._player=new tr,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.queued=!0}return t.prototype.setRealPlayer=function(t){var e=this;this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(function(n){e._queuedCallbacks[n].forEach(function(e){return ua(t,n,void 0,e)})}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.queued=!1)},t.prototype.getRealPlayer=function(){return this._player},t.prototype.syncPlayerEvents=function(t){var e=this,n=this._player;n.triggerCallback&&t.onStart(function(){return n.triggerCallback("start")}),t.onDone(function(){return e.finish()}),t.onDestroy(function(){return e.destroy()})},t.prototype._queueEvent=function(t,e){pa(this._queuedCallbacks,t,[]).push(e)},t.prototype.onDone=function(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)},t.prototype.onStart=function(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)},t.prototype.onDestroy=function(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)},t.prototype.init=function(){this._player.init()},t.prototype.hasStarted=function(){return!this.queued&&this._player.hasStarted()},t.prototype.play=function(){!this.queued&&this._player.play()},t.prototype.pause=function(){!this.queued&&this._player.pause()},t.prototype.restart=function(){!this.queued&&this._player.restart()},t.prototype.finish=function(){this._player.finish()},t.prototype.destroy=function(){this.destroyed=!0,this._player.destroy()},t.prototype.reset=function(){!this.queued&&this._player.reset()},t.prototype.setPosition=function(t){this.queued||this._player.setPosition(t)},t.prototype.getPosition=function(){return this.queued?0:this._player.getPosition()},Object.defineProperty(t.prototype,"totalTime",{get:function(){return this._player.totalTime},enumerable:!0,configurable:!0}),t.prototype.triggerCallback=function(t){var e=this._player;e.triggerCallback&&e.triggerCallback(t)},t}();function Ls(t){return t&&1===t.nodeType}function Ms(t,e){var n=t.style.display;return t.style.display=null!=e?e:"none",n}function zs(t,e,n,i,r){var o=[];n.forEach(function(t){return o.push(Ms(t))});var a=[];i.forEach(function(n,i){var o={};n.forEach(function(t){var n=o[t]=e.computeStyle(i,t,r);n&&0!=n.length||(i[Os]=Cs,a.push(i))}),t.set(i,o)});var s=0;return n.forEach(function(t){return Ms(t,o[s++])}),a}function Ds(t,e){var n=new Map;if(t.forEach(function(t){return n.set(t,[])}),0==e.length)return n;var i=new Set(e),r=new Map;return e.forEach(function(t){var e=function t(e){if(!e)return 1;var o=r.get(e);if(o)return o;var a=e.parentNode;return o=n.has(a)?a:i.has(a)?1:t(a),r.set(e,o),o}(t);1!==e&&n.get(e).push(t)}),n}var Rs="$$classes";function js(t,e){if(t.classList)t.classList.add(e);else{var n=t[Rs];n||(n=t[Rs]={}),n[e]=!0}}function Ns(t,e){if(t.classList)t.classList.remove(e);else{var n=t[Rs];n&&delete n[e]}}function Bs(t,e,n){aa(n).onDone(function(){return t.processLeaveNode(e)})}function Fs(t,e,n){var i=n.get(t);if(!i)return!1;var r=e.get(t);return r?i.forEach(function(t){return r.add(t)}):e.set(t,i),n.delete(t),!0}var Vs=function(){function t(t,e){var n=this;this._driver=t,this._triggerCache={},this.onRemovalComplete=function(t,e){},this._transitionEngine=new As(t,e),this._timelineEngine=new xs(t,e),this._transitionEngine.onRemovalComplete=function(t,e){return n.onRemovalComplete(t,e)}}return t.prototype.registerTrigger=function(t,e,n,i,r){var o=t+"-"+i,a=this._triggerCache[o];if(!a){var s=[],u=Ka(this._driver,r,s);if(s.length)throw new Error('The animation trigger "'+i+'" has failed to build due to the following errors:\n - '+s.join("\n - "));a=function(t,e){return new vs(t,e)}(i,u),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(e,i,a)},t.prototype.register=function(t,e){this._transitionEngine.register(t,e)},t.prototype.destroy=function(t,e){this._transitionEngine.destroy(t,e)},t.prototype.onInsert=function(t,e,n,i){this._transitionEngine.insertNode(t,e,n,i)},t.prototype.onRemove=function(t,e,n){this._transitionEngine.removeNode(t,e,n)},t.prototype.disableAnimations=function(t,e){this._transitionEngine.markElementAsDisabled(t,e)},t.prototype.process=function(t,e,n,i){if("@"==n.charAt(0)){var r=ha(n);this._timelineEngine.command(r[0],e,r[1],i)}else this._transitionEngine.trigger(t,e,n,i)},t.prototype.listen=function(t,e,n,i,r){if("@"==n.charAt(0)){var o=ha(n);return this._timelineEngine.listen(o[0],e,o[1],r)}return this._transitionEngine.listen(t,e,n,i,r)},t.prototype.flush=function(t){void 0===t&&(t=-1),this._transitionEngine.flush(t)},Object.defineProperty(t.prototype,"players",{get:function(){return this._transitionEngine.players.concat(this._timelineEngine.players)},enumerable:!0,configurable:!0}),t.prototype.whenRenderingDone=function(){return this._transitionEngine.whenRenderingDone()},t}(),Zs=function(){function t(t,e,n,i){void 0===i&&(i=[]);var r=this;this.element=t,this.keyframes=e,this.options=n,this.previousPlayers=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.previousStyles={},this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay,(0===this._duration||0===this._delay)&&i.forEach(function(t){var e=t.currentSnapshot;Object.keys(e).forEach(function(t){return r.previousStyles[t]=e[t]})})}return t.prototype._onFinish=function(){this._finished||(this._finished=!0,this._onDoneFns.forEach(function(t){return t()}),this._onDoneFns=[])},t.prototype.init=function(){this._buildPlayer(),this._preparePlayerBeforeStart()},t.prototype._buildPlayer=function(){var t=this;if(!this._initialized){this._initialized=!0;var e=this.keyframes.map(function(t){return La(t,!1)}),n=Object.keys(this.previousStyles);if(n.length&&e.length){var i=e[0],r=[];if(n.forEach(function(e){i.hasOwnProperty(e)||r.push(e),i[e]=t.previousStyles[e]}),r.length)for(var o=this,a=function(){var t=e[s];r.forEach(function(e){t[e]=Us(o.element,e)})},s=1;s<e.length;s++)a()}this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",function(){return t._onFinish()})}},t.prototype._preparePlayerBeforeStart=function(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()},t.prototype._triggerWebAnimation=function(t,e,n){return t.animate(e,n)},t.prototype.onStart=function(t){this._onStartFns.push(t)},t.prototype.onDone=function(t){this._onDoneFns.push(t)},t.prototype.onDestroy=function(t){this._onDestroyFns.push(t)},t.prototype.play=function(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(function(t){return t()}),this._onStartFns=[],this._started=!0),this.domPlayer.play()},t.prototype.pause=function(){this.init(),this.domPlayer.pause()},t.prototype.finish=function(){this.init(),this._onFinish(),this.domPlayer.finish()},t.prototype.reset=function(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1},t.prototype._resetDomPlayerState=function(){this.domPlayer&&this.domPlayer.cancel()},t.prototype.restart=function(){this.reset(),this.play()},t.prototype.hasStarted=function(){return this._started},t.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._onDestroyFns.forEach(function(t){return t()}),this._onDestroyFns=[])},t.prototype.setPosition=function(t){this.domPlayer.currentTime=t*this.time},t.prototype.getPosition=function(){return this.domPlayer.currentTime/this.time},Object.defineProperty(t.prototype,"totalTime",{get:function(){return this._delay+this._duration},enumerable:!0,configurable:!0}),t.prototype.beforeDestroy=function(){var t=this,e={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(function(n){"offset"!=n&&(e[n]=t._finished?t._finalKeyframe[n]:Us(t.element,n))}),this.currentSnapshot=e},t.prototype.triggerCallback=function(t){var e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(function(t){return t()}),e.length=0},t}();function Us(t,e){return window.getComputedStyle(t)[e]}var qs=function(){function t(){}return t.prototype.validateStyleProperty=function(t){return ba(t)},t.prototype.matchesElement=function(t,e){return wa(t,e)},t.prototype.containsElement=function(t,e){return Ea(t,e)},t.prototype.query=function(t,e,n){return Ca(t,e,n)},t.prototype.computeStyle=function(t,e,n){return window.getComputedStyle(t)[e]},t.prototype.animate=function(t,e,n,i,r,o){void 0===o&&(o=[]);var a={duration:n,delay:i,fill:0==i?"both":"forwards"};r&&(a.easing=r);var s=o.filter(function(t){return t instanceof Zs});return new Zs(t,e,a,s)},t}(),Hs=function(t){function e(e,n){var r=t.call(this)||this;return r._nextAnimationId=0,r._renderer=e.createRenderer(n.body,{id:"0",encapsulation:i.ViewEncapsulation.None,styles:[],data:{animation:[]}}),r}return Object(d.c)(e,t),e.prototype.build=function(t){var e=this._nextAnimationId.toString();this._nextAnimationId++;var n=Array.isArray(t)?Yi(t):t;return Ks(this._renderer,null,e,"register",[n]),new Gs(e,this._renderer)},e}(Xi),Gs=function(t){function e(e,n){var i=t.call(this)||this;return i._id=e,i._renderer=n,i}return Object(d.c)(e,t),e.prototype.create=function(t,e){return new Ws(this._id,t,e||{},this._renderer)},e}(function(){}),Ws=function(){function t(t,e,n,i){this.id=t,this.element=e,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}return t.prototype._listen=function(t,e){return this._renderer.listen(this.element,"@@"+this.id+":"+t,e)},t.prototype._command=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return Ks(this._renderer,this.element,this.id,t,e)},t.prototype.onDone=function(t){this._listen("done",t)},t.prototype.onStart=function(t){this._listen("start",t)},t.prototype.onDestroy=function(t){this._listen("destroy",t)},t.prototype.init=function(){this._command("init")},t.prototype.hasStarted=function(){return this._started},t.prototype.play=function(){this._command("play"),this._started=!0},t.prototype.pause=function(){this._command("pause")},t.prototype.restart=function(){this._command("restart")},t.prototype.finish=function(){this._command("finish")},t.prototype.destroy=function(){this._command("destroy")},t.prototype.reset=function(){this._command("reset")},t.prototype.setPosition=function(t){this._command("setPosition",t)},t.prototype.getPosition=function(){return 0},t}();function Ks(t,e,n,i,r){return t.setProperty(e,"@@"+n+":"+i,r)}var Xs=function(){function t(t,e,n){this.delegate=t,this.engine=e,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,e.onRemovalComplete=function(t,e){e&&e.parentNode(t)&&e.removeChild(t.parentNode,t)}}return t.prototype.createRenderer=function(t,e){var n=this,i=this.delegate.createRenderer(t,e);if(!(t&&e&&e.data&&e.data.animation)){var r=this._rendererCache.get(i);return r||(r=new Js("",i,this.engine),this._rendererCache.set(i,r)),r}var o=e.id,a=e.id+"-"+this._currentId;return this._currentId++,this.engine.register(a,t),e.data.animation.forEach(function(e){return n.engine.registerTrigger(o,a,t,e.name,e)}),new Ys(this,a,i,this.engine)},t.prototype.begin=function(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()},t.prototype._scheduleCountTask=function(){var t=this;Zone.current.scheduleMicroTask("incremenet the animation microtask",function(){return t._microtaskId++})},t.prototype.scheduleListenerCallback=function(t,e,n){var i=this;t>=0&&t<this._microtaskId?this._zone.run(function(){return e(n)}):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(function(){i._zone.run(function(){i._animationCallbacksBuffer.forEach(function(t){(0,t[0])(t[1])}),i._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([e,n]))},t.prototype.end=function(){var t=this;this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(function(){t._scheduleCountTask(),t.engine.flush(t._microtaskId)}),this.delegate.end&&this.delegate.end()},t.prototype.whenRenderingDone=function(){return this.engine.whenRenderingDone()},t}(),Js=function(){function t(t,e,n){this.namespaceId=t,this.delegate=e,this.engine=n,this.destroyNode=this.delegate.destroyNode?function(t){return e.destroyNode(t)}:null}return Object.defineProperty(t.prototype,"data",{get:function(){return this.delegate.data},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()},t.prototype.createElement=function(t,e){return this.delegate.createElement(t,e)},t.prototype.createComment=function(t){return this.delegate.createComment(t)},t.prototype.createText=function(t){return this.delegate.createText(t)},t.prototype.appendChild=function(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)},t.prototype.insertBefore=function(t,e,n){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,!0)},t.prototype.removeChild=function(t,e){this.engine.onRemove(this.namespaceId,e,this.delegate)},t.prototype.selectRootElement=function(t){return this.delegate.selectRootElement(t)},t.prototype.parentNode=function(t){return this.delegate.parentNode(t)},t.prototype.nextSibling=function(t){return this.delegate.nextSibling(t)},t.prototype.setAttribute=function(t,e,n,i){this.delegate.setAttribute(t,e,n,i)},t.prototype.removeAttribute=function(t,e,n){this.delegate.removeAttribute(t,e,n)},t.prototype.addClass=function(t,e){this.delegate.addClass(t,e)},t.prototype.removeClass=function(t,e){this.delegate.removeClass(t,e)},t.prototype.setStyle=function(t,e,n,i){this.delegate.setStyle(t,e,n,i)},t.prototype.removeStyle=function(t,e,n){this.delegate.removeStyle(t,e,n)},t.prototype.setProperty=function(t,e,n){"@"==e.charAt(0)&&"@.disabled"==e?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)},t.prototype.setValue=function(t,e){this.delegate.setValue(t,e)},t.prototype.listen=function(t,e,n){return this.delegate.listen(t,e,n)},t.prototype.disableAnimations=function(t,e){this.engine.disableAnimations(t,e)},t}(),Ys=function(t){function e(e,n,i,r){var o=t.call(this,n,i,r)||this;return o.factory=e,o.namespaceId=n,o}return Object(d.c)(e,t),e.prototype.setProperty=function(t,e,n){"@"==e.charAt(0)?"."==e.charAt(1)&&"@.disabled"==e?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.substr(1),n):this.delegate.setProperty(t,e,n)},e.prototype.listen=function(t,e,n){var i,r,o,a=this;if("@"==e.charAt(0)){var s=function(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(t),u=e.substr(1),l="";return"@"!=u.charAt(0)&&(u=(r=u,o=r.indexOf("."),i=[r.substring(0,o),r.substr(o+1)])[0],l=i[1]),this.engine.listen(this.namespaceId,s,u,l,function(t){a.factory.scheduleListenerCallback(t._data||-1,n,t)})}return this.delegate.listen(t,e,n)},e}(Js),Qs=function(t){function e(e,n){return t.call(this,e,n)||this}return Object(d.c)(e,t),e}(Vs);function $s(){return"undefined"!=typeof Element&&"function"==typeof Element.prototype.animate?new qs:new Oa}function tu(){return new hs}function eu(t,e,n){return new Xs(t,e,n)}var nu=function(){},iu=n("wP3s"),ru=n("6S6c"),ou=function(){},au=function(){},su=function(){function t(t){var e=this;this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?function(){e.headers=new Map,t.split("\n").forEach(function(t){var n=t.indexOf(":");if(n>0){var i=t.slice(0,n),r=i.toLowerCase(),o=t.slice(n+1).trim();e.maybeSetNormalizedName(i,r),e.headers.has(r)?e.headers.get(r).push(o):e.headers.set(r,[o])}})}:function(){e.headers=new Map,Object.keys(t).forEach(function(n){var i=t[n],r=n.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(e.headers.set(r,i),e.maybeSetNormalizedName(n,r))})}:this.headers=new Map}return t.prototype.has=function(t){return this.init(),this.headers.has(t.toLowerCase())},t.prototype.get=function(t){this.init();var e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null},t.prototype.keys=function(){return this.init(),Array.from(this.normalizedNames.values())},t.prototype.getAll=function(t){return this.init(),this.headers.get(t.toLowerCase())||null},t.prototype.append=function(t,e){return this.clone({name:t,value:e,op:"a"})},t.prototype.set=function(t,e){return this.clone({name:t,value:e,op:"s"})},t.prototype.delete=function(t,e){return this.clone({name:t,value:e,op:"d"})},t.prototype.maybeSetNormalizedName=function(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)},t.prototype.init=function(){var e=this;this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(function(t){return e.applyUpdate(t)}),this.lazyUpdate=null))},t.prototype.copyFrom=function(t){var e=this;t.init(),Array.from(t.headers.keys()).forEach(function(n){e.headers.set(n,t.headers.get(n)),e.normalizedNames.set(n,t.normalizedNames.get(n))})},t.prototype.clone=function(e){var n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n},t.prototype.applyUpdate=function(t){var e=t.name.toLowerCase();switch(t.op){case"a":case"s":var n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);var i=("a"===t.op?this.headers.get(e):void 0)||[];i.push.apply(i,n),this.headers.set(e,i);break;case"d":var r=t.value;if(r){var o=this.headers.get(e);if(!o)return;0===(o=o.filter(function(t){return-1===r.indexOf(t)})).length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,o)}else this.headers.delete(e),this.normalizedNames.delete(e)}},t.prototype.forEach=function(t){var e=this;this.init(),Array.from(this.normalizedNames.keys()).forEach(function(n){return t(e.normalizedNames.get(n),e.headers.get(n))})},t}(),uu=function(){function t(){}return t.prototype.encodeKey=function(t){return lu(t)},t.prototype.encodeValue=function(t){return lu(t)},t.prototype.decodeKey=function(t){return decodeURIComponent(t)},t.prototype.decodeValue=function(t){return decodeURIComponent(t)},t}();function lu(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}var cu=function(){function t(t){void 0===t&&(t={});var e,n,i,r=this;if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new uu,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=(e=t.fromString,n=this.encoder,i=new Map,e.length>0&&e.split("&").forEach(function(t){var e=t.indexOf("="),r=-1==e?[n.decodeKey(t),""]:[n.decodeKey(t.slice(0,e)),n.decodeValue(t.slice(e+1))],o=r[0],a=r[1],s=i.get(o)||[];s.push(a),i.set(o,s)}),i)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(function(e){var n=t.fromObject[e];r.map.set(e,Array.isArray(n)?n:[n])})):this.map=null}return t.prototype.has=function(t){return this.init(),this.map.has(t)},t.prototype.get=function(t){this.init();var e=this.map.get(t);return e?e[0]:null},t.prototype.getAll=function(t){return this.init(),this.map.get(t)||null},t.prototype.keys=function(){return this.init(),Array.from(this.map.keys())},t.prototype.append=function(t,e){return this.clone({param:t,value:e,op:"a"})},t.prototype.set=function(t,e){return this.clone({param:t,value:e,op:"s"})},t.prototype.delete=function(t,e){return this.clone({param:t,value:e,op:"d"})},t.prototype.toString=function(){var t=this;return this.init(),this.keys().map(function(e){var n=t.encoder.encodeKey(e);return t.map.get(e).map(function(e){return n+"="+t.encoder.encodeValue(e)}).join("&")}).join("&")},t.prototype.clone=function(e){var n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat([e]),n},t.prototype.init=function(){var t=this;null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(function(e){return t.map.set(e,t.cloneFrom.map.get(e))}),this.updates.forEach(function(e){switch(e.op){case"a":case"s":var n=("a"===e.op?t.map.get(e.param):void 0)||[];n.push(e.value),t.map.set(e.param,n);break;case"d":if(void 0===e.value){t.map.delete(e.param);break}var i=t.map.get(e.param)||[],r=i.indexOf(e.value);-1!==r&&i.splice(r,1),i.length>0?t.map.set(e.param,i):t.map.delete(e.param)}}),this.cloneFrom=null)},t}();function pu(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function hu(t){return"undefined"!=typeof Blob&&t instanceof Blob}function fu(t){return"undefined"!=typeof FormData&&t instanceof FormData}var du=function(){function t(t,e,n,i){var r;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==n?n:null,r=i):r=n,r&&(this.reportProgress=!!r.reportProgress,this.withCredentials=!!r.withCredentials,r.responseType&&(this.responseType=r.responseType),r.headers&&(this.headers=r.headers),r.params&&(this.params=r.params)),this.headers||(this.headers=new su),this.params){var o=this.params.toString();if(0===o.length)this.urlWithParams=e;else{var a=e.indexOf("?");this.urlWithParams=e+(-1===a?"?":a<e.length-1?"&":"")+o}}else this.params=new cu,this.urlWithParams=e}return t.prototype.serializeBody=function(){return null===this.body?null:pu(this.body)||hu(this.body)||fu(this.body)||"string"==typeof this.body?this.body:this.body instanceof cu?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()},t.prototype.detectContentTypeHeader=function(){return null===this.body?null:fu(this.body)?null:hu(this.body)?this.body.type||null:pu(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof cu?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null},t.prototype.clone=function(e){void 0===e&&(e={});var n=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,o=void 0!==e.body?e.body:this.body,a=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,s=void 0!==e.reportProgress?e.reportProgress:this.reportProgress,u=e.headers||this.headers,l=e.params||this.params;return void 0!==e.setHeaders&&(u=Object.keys(e.setHeaders).reduce(function(t,n){return t.set(n,e.setHeaders[n])},u)),e.setParams&&(l=Object.keys(e.setParams).reduce(function(t,n){return t.set(n,e.setParams[n])},l)),new t(n,i,o,{params:l,headers:u,reportProgress:s,responseType:r,withCredentials:a})},t}(),mu=function(){var t={Sent:0,UploadProgress:1,ResponseHeader:2,DownloadProgress:3,Response:4,User:5};return t[t.Sent]="Sent",t[t.UploadProgress]="UploadProgress",t[t.ResponseHeader]="ResponseHeader",t[t.DownloadProgress]="DownloadProgress",t[t.Response]="Response",t[t.User]="User",t}(),yu=function(){return function(t,e,n){void 0===e&&(e=200),void 0===n&&(n="OK"),this.headers=t.headers||new su,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}(),gu=function(t){function e(e){void 0===e&&(e={});var n=t.call(this,e)||this;return n.type=mu.ResponseHeader,n}return Object(d.c)(e,t),e.prototype.clone=function(t){return void 0===t&&(t={}),new e({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})},e}(yu),vu=function(t){function e(e){void 0===e&&(e={});var n=t.call(this,e)||this;return n.type=mu.Response,n.body=void 0!==e.body?e.body:null,n}return Object(d.c)(e,t),e.prototype.clone=function(t){return void 0===t&&(t={}),new e({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})},e}(yu),_u=function(t){function e(e){var n=t.call(this,e,0,"Unknown Error")||this;return n.name="HttpErrorResponse",n.ok=!1,n.message=n.status>=200&&n.status<300?"Http failure during parsing for "+(e.url||"(unknown url)"):"Http failure response for "+(e.url||"(unknown url)")+": "+e.status+" "+e.statusText,n.error=e.error||null,n}return Object(d.c)(e,t),e}(yu);function bu(t,e){return{body:e,headers:t.headers,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}var xu=function(){function t(t){this.handler=t}return t.prototype.request=function(t,e,n){var i,r=this;if(void 0===n&&(n={}),t instanceof du)i=t;else{var o;o=n.headers instanceof su?n.headers:new su(n.headers);var a=void 0;n.params&&(a=n.params instanceof cu?n.params:new cu({fromObject:n.params})),i=new du(t,e,void 0!==n.body?n.body:null,{headers:o,params:a,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}var s=(function(t,e){return function(t,e){return Object(iu.a)(t,e,1)}(t,e)(this)}).call(dn(i),function(t){return r.handler.handle(t)});if(t instanceof du||"events"===n.observe)return s;var u=ru.a.call(s,function(t){return t instanceof vu});switch(n.observe||"body"){case"body":switch(i.responseType){case"arraybuffer":return ni.a.call(u,function(t){if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body});case"blob":return ni.a.call(u,function(t){if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body});case"text":return ni.a.call(u,function(t){if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body});case"json":default:return ni.a.call(u,function(t){return t.body})}case"response":return u;default:throw new Error("Unreachable: unhandled observe type "+n.observe+"}")}},t.prototype.delete=function(t,e){return void 0===e&&(e={}),this.request("DELETE",t,e)},t.prototype.get=function(t,e){return void 0===e&&(e={}),this.request("GET",t,e)},t.prototype.head=function(t,e){return void 0===e&&(e={}),this.request("HEAD",t,e)},t.prototype.jsonp=function(t,e){return this.request("JSONP",t,{params:(new cu).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})},t.prototype.options=function(t,e){return void 0===e&&(e={}),this.request("OPTIONS",t,e)},t.prototype.patch=function(t,e,n){return void 0===n&&(n={}),this.request("PATCH",t,bu(n,e))},t.prototype.post=function(t,e,n){return void 0===n&&(n={}),this.request("POST",t,bu(n,e))},t.prototype.put=function(t,e,n){return void 0===n&&(n={}),this.request("PUT",t,bu(n,e))},t}(),wu=function(){function t(t,e){this.next=t,this.interceptor=e}return t.prototype.handle=function(t){return this.interceptor.intercept(t,this.next)},t}(),Eu=new i.InjectionToken("HTTP_INTERCEPTORS"),Cu=function(){function t(){}return t.prototype.intercept=function(t,e){return e.handle(t)},t}(),Ou=/^\)\]\}',?\n/,Pu=function(){},Su=function(){function t(){}return t.prototype.build=function(){return new XMLHttpRequest},t}(),Tu=function(){function t(t){this.xhrFactory=t}return t.prototype.handle=function(t){var e=this;if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without JsonpClientModule installed.");return new q.Observable(function(n){var i=e.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach(function(t,e){return i.setRequestHeader(t,e.join(","))}),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){var r=t.detectContentTypeHeader();null!==r&&i.setRequestHeader("Content-Type",r)}if(t.responseType){var o=t.responseType.toLowerCase();i.responseType="json"!==o?o:"text"}var a=t.serializeBody(),s=null,u=function(){if(null!==s)return s;var e=1223===i.status?204:i.status,n=i.statusText||"OK",r=new su(i.getAllResponseHeaders()),o=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(i)||t.url;return s=new gu({headers:r,status:e,statusText:n,url:o})},l=function(){var e=u(),r=e.headers,o=e.status,a=e.statusText,s=e.url,l=null;204!==o&&(l="undefined"==typeof i.response?i.responseText:i.response),0===o&&(o=l?200:0);var c=o>=200&&o<300;if("json"===t.responseType&&"string"==typeof l){var p=l;l=l.replace(Ou,"");try{l=""!==l?JSON.parse(l):null}catch(t){l=p,c&&(c=!1,l={error:t,text:l})}}c?(n.next(new vu({body:l,headers:r,status:o,statusText:a,url:s||void 0})),n.complete()):n.error(new _u({error:l,headers:r,status:o,statusText:a,url:s||void 0}))},c=function(t){var e=new _u({error:t,status:i.status||0,statusText:i.statusText||"Unknown Error"});n.error(e)},p=!1,h=function(e){p||(n.next(u()),p=!0);var r={type:mu.DownloadProgress,loaded:e.loaded};e.lengthComputable&&(r.total=e.total),"text"===t.responseType&&i.responseText&&(r.partialText=i.responseText),n.next(r)},f=function(t){var e={type:mu.UploadProgress,loaded:t.loaded};t.lengthComputable&&(e.total=t.total),n.next(e)};return i.addEventListener("load",l),i.addEventListener("error",c),t.reportProgress&&(i.addEventListener("progress",h),null!==a&&i.upload&&i.upload.addEventListener("progress",f)),i.send(a),n.next({type:mu.Sent}),function(){i.removeEventListener("error",c),i.removeEventListener("load",l),t.reportProgress&&(i.removeEventListener("progress",h),null!==a&&i.upload&&i.upload.removeEventListener("progress",f)),i.abort()}})},t}(),ku=new i.InjectionToken("XSRF_COOKIE_NAME"),Au=new i.InjectionToken("XSRF_HEADER_NAME"),Iu=function(){},Lu=function(){function t(t,e,n){this.doc=t,this.platform=e,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}return t.prototype.getToken=function(){if("server"===this.platform)return null;var t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=E(t,this.cookieName),this.lastCookieString=t),this.lastToken},t}(),Mu=function(){function t(t,e){this.tokenService=t,this.headerName=e}return t.prototype.intercept=function(t,e){var n=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e.handle(t);var i=this.tokenService.getToken();return null===i||t.headers.has(this.headerName)||(t=t.clone({headers:t.headers.set(this.headerName,i)})),e.handle(t)},t}(),zu=function(){function t(t,e){this.backend=t,this.injector=e,this.chain=null}return t.prototype.handle=function(t){if(null===this.chain){var e=this.injector.get(Eu,[]);this.chain=e.reduceRight(function(t,e){return new wu(t,e)},this.backend)}return this.chain.handle(t)},t}(),Du=function(){function t(){}return t.disable=function(){return{ngModule:t,providers:[{provide:Mu,useClass:Cu}]}},t.withOptions=function(e){return void 0===e&&(e={}),{ngModule:t,providers:[e.cookieName?{provide:ku,useValue:e.cookieName}:[],e.headerName?{provide:Au,useValue:e.headerName}:[]]}},t}(),Ru=function(){},ju=n("TB0K"),Nu=n("lDEv"),Bu=n("5JxN"),Fu=n("eaoh"),Vu=i["\u0275cmf"](f,[m],function(t){return i["\u0275mod"]([i["\u0275mpd"](512,i.ComponentFactoryResolver,i["\u0275CodegenComponentFactoryResolver"],[[8,[oa]],[3,i.ComponentFactoryResolver],i.NgModuleRef]),i["\u0275mpd"](5120,i.LOCALE_ID,i["\u0275q"],[[3,i.LOCALE_ID]]),i["\u0275mpd"](4608,x,w,[i.LOCALE_ID,[2,b]]),i["\u0275mpd"](4608,i.Compiler,i.Compiler,[]),i["\u0275mpd"](5120,i.APP_ID,i["\u0275i"],[]),i["\u0275mpd"](5120,i.IterableDiffers,i["\u0275n"],[]),i["\u0275mpd"](5120,i.KeyValueDiffers,i["\u0275o"],[]),i["\u0275mpd"](4608,fe,de,[N]),i["\u0275mpd"](6144,i.Sanitizer,null,[fe]),i["\u0275mpd"](4608,Nt,Bt,[]),i["\u0275mpd"](5120,pt,function(t,e,n,i,r){return[new Rt(t,e),new Ut(n),new Ft(i,r)]},[N,i.NgZone,N,N,Nt]),i["\u0275mpd"](4608,ht,ht,[pt,i.NgZone]),i["\u0275mpd"](135680,mt,mt,[N]),i["\u0275mpd"](4608,wt,wt,[ht,mt]),i["\u0275mpd"](5120,Pa,$s,[]),i["\u0275mpd"](5120,ps,tu,[]),i["\u0275mpd"](4608,Vs,Qs,[Pa,ps]),i["\u0275mpd"](5120,i.RendererFactory2,eu,[wt,Vs,i.NgZone]),i["\u0275mpd"](6144,dt,null,[mt]),i["\u0275mpd"](4608,i.Testability,i.Testability,[i.NgZone]),i["\u0275mpd"](4608,it,it,[N]),i["\u0275mpd"](4608,st,st,[N]),i["\u0275mpd"](4608,Iu,Lu,[N,i.PLATFORM_ID,ku]),i["\u0275mpd"](4608,Mu,Mu,[Iu,Au]),i["\u0275mpd"](5120,Eu,function(t){return[t]},[Mu]),i["\u0275mpd"](4608,Su,Su,[]),i["\u0275mpd"](6144,Pu,null,[Su]),i["\u0275mpd"](4608,Tu,Tu,[Pu]),i["\u0275mpd"](6144,au,null,[Tu]),i["\u0275mpd"](4608,ou,zu,[au,i.Injector]),i["\u0275mpd"](4608,xu,xu,[ou]),i["\u0275mpd"](4608,hi,hi,[]),i["\u0275mpd"](4608,Xi,Hs,[i.RendererFactory2,tt]),i["\u0275mpd"](6144,B,null,[N]),i["\u0275mpd"](4608,F,F,[[2,B]]),i["\u0275mpd"](4608,Te,Te,[]),i["\u0275mpd"](4608,mn,mn,[Te]),i["\u0275mpd"](4608,_n,_n,[mn,i.NgZone,N]),i["\u0275mpd"](136192,Cn,On,[[3,Cn],N]),i["\u0275mpd"](5120,Tn,kn,[[3,Tn],[2,Sn],N]),i["\u0275mpd"](5120,An,In,[[3,An],i.NgZone,Te]),i["\u0275mpd"](5120,Ir,Lr,[[3,Ir],i.NgZone,Te]),i["\u0275mpd"](5120,zr,Dr,[[3,zr],Te,i.NgZone]),i["\u0275mpd"](4608,Yr,Yr,[Ir,zr,i.NgZone,N]),i["\u0275mpd"](5120,oo,ao,[[3,oo],N]),i["\u0275mpd"](4608,no,no,[zr,N]),i["\u0275mpd"](5120,io,ro,[[3,io],N]),i["\u0275mpd"](4608,uo,uo,[Yr,oo,i.ComponentFactoryResolver,no,io,i.ApplicationRef,i.Injector,i.NgZone,N]),i["\u0275mpd"](5120,lo,co,[uo]),i["\u0275mpd"](5120,go,vo,[uo]),i["\u0275mpd"](4608,Ne,Ne,[]),i["\u0275mpd"](4608,Zo,Zo,[xu,Vn.NgRedux]),i["\u0275mpd"](4608,Jo,Jo,[]),i["\u0275mpd"](4608,ju.MapProvider,ju.MapProvider,[]),i["\u0275mpd"](4608,ta,ta,[Te]),i["\u0275mpd"](512,j,j,[]),i["\u0275mpd"](1024,i.ErrorHandler,Ee,[]),i["\u0275mpd"](1024,i.APP_INITIALIZER,function(t){return[(e=t,ut("probe",ct),ut("coreTokens",Object(d.a)({},lt,(e||[]).reduce(function(t,e){return t[e.name]=e.token,t},{}))),function(){return ct})];var e},[[2,i.NgProbeToken]]),i["\u0275mpd"](512,i.ApplicationInitStatus,i.ApplicationInitStatus,[[2,i.APP_INITIALIZER]]),i["\u0275mpd"](131584,i.ApplicationRef,i.ApplicationRef,[i.NgZone,i["\u0275Console"],i.Injector,i.ErrorHandler,i.ComponentFactoryResolver,i.ApplicationInitStatus]),i["\u0275mpd"](512,i.ApplicationModule,i.ApplicationModule,[i.ApplicationRef]),i["\u0275mpd"](512,Ce,Ce,[[3,Ce]]),i["\u0275mpd"](512,Nu.YagaModule,Nu.YagaModule,[]),i["\u0275mpd"](512,Bu.NgReduxModule,Bu.NgReduxModule,[]),i["\u0275mpd"](512,Du,Du,[]),i["\u0275mpd"](512,Ru,Ru,[]),i["\u0275mpd"](512,ji,ji,[]),i["\u0275mpd"](512,Ni,Ni,[]),i["\u0275mpd"](512,nu,nu,[]),i["\u0275mpd"](512,V,V,[]),i["\u0275mpd"](256,Me,!0,[]),i["\u0275mpd"](512,ze,ze,[[2,Me]]),i["\u0275mpd"](512,Le,Le,[]),i["\u0275mpd"](512,Ge,Ge,[]),i["\u0275mpd"](512,Ln,Ln,[]),i["\u0275mpd"](512,jn,jn,[]),i["\u0275mpd"](512,Gn,Gn,[]),i["\u0275mpd"](512,Zr,Zr,[]),i["\u0275mpd"](512,Rr,Rr,[]),i["\u0275mpd"](512,po,po,[]),i["\u0275mpd"](512,bo,bo,[]),i["\u0275mpd"](512,sr,sr,[]),i["\u0275mpd"](512,kr,kr,[]),i["\u0275mpd"](512,zo,zo,[]),i["\u0275mpd"](1024,Vn.NgRedux,Bu._ngReduxFactory,[i.NgZone]),i["\u0275mpd"](512,Fu.DevToolsExtension,Fu.DevToolsExtension,[i.ApplicationRef,Vn.NgRedux]),i["\u0275mpd"](512,f,f,[Vn.NgRedux,Fu.DevToolsExtension]),i["\u0275mpd"](256,ku,"XSRF-TOKEN",[]),i["\u0275mpd"](256,Au,"X-XSRF-TOKEN",[]),i["\u0275mpd"](256,mo,{overlapTrigger:!0,xPosition:"after",yPosition:"below"},[]),i["\u0275mpd"](256,Ao,!1,[])])});Object(i.enableProdMode)(),we().bootstrapModuleFactory(Vu).catch(function(t){return console.log(t)})},cVCx:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n("LMZF"),a=n("cqO5"),s=n("KG7u"),u=n("xHJr"),l=n("iWCm");e.GeoJSONDirective=function(t){function e(e,n,i){var r=t.call(this,{features:[],type:"FeatureCollection"},{filter:function(t){return!r.middleware.filter||r.middleware.filter(t)},onEachFeature:function(t,e){r.onEachFeatureEvent.emit({feature:t,layer:e})},pointToLayer:function(t,e){return r.middleware.pointToLayer?r.middleware.pointToLayer(t,e):new a.Marker(e)},style:function(t){var e=r.middleware.defaultStyle;return r.middleware.styler?r.middleware.styler(t,e):e}})||this;return r.dataChange=new o.EventEmitter,r.addEvent=new o.EventEmitter,r.removeEvent=new o.EventEmitter,r.popupopenEvent=new o.EventEmitter,r.popupcloseEvent=new o.EventEmitter,r.tooltipopenEvent=new o.EventEmitter,r.tooltipcloseEvent=new o.EventEmitter,r.clickEvent=new o.EventEmitter,r.dbclickEvent=new o.EventEmitter,r.mousedownEvent=new o.EventEmitter,r.mouseoverEvent=new o.EventEmitter,r.mouseoutEvent=new o.EventEmitter,r.contextmenuEvent=new o.EventEmitter,r.onEachFeatureEvent=new o.EventEmitter,r.initialized=!1,r.middleware={defaultStyle:s.DEFAULT_STYLE},i.ref=r,n.ref=r,e.ref.addLayer(r),r.on("add",function(t){r.addEvent.emit(t)}),r.on("remove",function(t){r.removeEvent.emit(t)}),r.on("popupopen",function(t){r.popupopenEvent.emit(t)}),r.on("popupclose",function(t){r.popupcloseEvent.emit(t)}),r.on("tooltipopen",function(t){r.tooltipopenEvent.emit(t)}),r.on("tooltipclose",function(t){r.tooltipcloseEvent.emit(t)}),r.on("click",function(t){r.clickEvent.emit(t)}),r.on("dbclick",function(t){r.dbclickEvent.emit(t)}),r.on("mousedown",function(t){r.mousedownEvent.emit(t)}),r.on("mouseover",function(t){r.mouseoverEvent.emit(t)}),r.on("mouseout",function(t){r.mouseoutEvent.emit(t)}),r.on("contextmenu",function(t){r.contextmenuEvent.emit(t)}),r}return r(e,t),e.prototype.ngAfterContentInit=function(){this.initialized=!0},e.prototype.ngOnDestroy=function(){this.removeFrom(this._map)},e.prototype.addData=function(e){var n=t.prototype.addData.call(this,e);return this.initialized?(this.dataChange.emit(this.toGeoJSON()),n):n},e.prototype.setData=function(e){return t.prototype.clearLayers.call(this),t.prototype.addData.call(this,e),this.dataChange.emit(this.toGeoJSON()),this},Object.defineProperty(e.prototype,"data",{get:function(){return this.toGeoJSON()},set:function(t){this.setData(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filter",{get:function(){return this.middleware.filter},set:function(t){this.middleware.filter=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pointToLayer",{get:function(){return this.middleware.pointToLayer},set:function(t){this.middleware.pointToLayer=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"styler",{get:function(){return this.middleware.styler},set:function(t){this.middleware.styler=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultStyle",{get:function(){return this.middleware.defaultStyle},set:function(t){this.middleware.defaultStyle=t},enumerable:!0,configurable:!0}),e.decorators=[{type:o.Directive,args:[{providers:[u.LayerGroupProvider,l.LayerProvider],selector:"yaga-geojson"}]}],e.propDecorators={dataChange:[{type:o.Output}],addEvent:[{type:o.Output,args:["add"]}],removeEvent:[{type:o.Output,args:["remove"]}],popupopenEvent:[{type:o.Output,args:["popupopen"]}],popupcloseEvent:[{type:o.Output,args:["popupclose"]}],tooltipopenEvent:[{type:o.Output,args:["tooltipopen"]}],tooltipcloseEvent:[{type:o.Output,args:["tooltipclose"]}],clickEvent:[{type:o.Output,args:["click"]}],dbclickEvent:[{type:o.Output,args:["dbclick"]}],mousedownEvent:[{type:o.Output,args:["mousedown"]}],mouseoverEvent:[{type:o.Output,args:["mouseover"]}],mouseoutEvent:[{type:o.Output,args:["mouseout"]}],contextmenuEvent:[{type:o.Output,args:["contextmenu"]}],onEachFeatureEvent:[{type:o.Output,args:["onEachFeature"]}],data:[{type:o.Input}],filter:[{type:o.Input}],pointToLayer:[{type:o.Input}],styler:[{type:o.Input}],defaultStyle:[{type:o.Input}]},e}(a.GeoJSON)},cqO5:function(t,e,n){!function(t){"use strict";var e=Object.freeze;function n(t){var e,n,i,r;for(n=1,i=arguments.length;n<i;n++)for(e in r=arguments[n])t[e]=r[e];return t}Object.freeze=function(t){return t};var i=Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}();function r(t,e){var n=Array.prototype.slice;if(t.bind)return t.bind.apply(t,n.call(arguments,1));var i=n.call(arguments,2);return function(){return t.apply(e,i.length?i.concat(n.call(arguments)):arguments)}}var o=0;function a(t){return t._leaflet_id=t._leaflet_id||++o,t._leaflet_id}function s(t,e,n){var i,r,o,a;return a=function(){i=!1,r&&(o.apply(n,r),r=!1)},o=function(){i?r=arguments:(t.apply(n,arguments),setTimeout(a,e),i=!0)}}function u(t,e,n){var i=e[1],r=e[0],o=i-r;return t===i&&n?t:((t-r)%o+o)%o+r}function l(){return!1}function c(t,e){var n=Math.pow(10,void 0===e?6:e);return Math.round(t*n)/n}function p(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function h(t){return p(t).split(/\s+/)}function f(t,e){for(var n in t.hasOwnProperty("options")||(t.options=t.options?i(t.options):{}),e)t.options[n]=e[n];return t.options}function d(t,e,n){var i=[];for(var r in t)i.push(encodeURIComponent(n?r.toUpperCase():r)+"="+encodeURIComponent(t[r]));return(e&&-1!==e.indexOf("?")?"&":"?")+i.join("&")}var m=/\{ *([\w_-]+) *\}/g;function y(t,e){return t.replace(m,function(t,n){var i=e[n];if(void 0===i)throw new Error("No value provided for variable "+t);return"function"==typeof i&&(i=i(e)),i})}var g=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function v(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1}var _="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function b(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var x=0;function w(t){var e=+new Date,n=Math.max(0,16-(e-x));return x=e+n,window.setTimeout(t,n)}var E=window.requestAnimationFrame||b("RequestAnimationFrame")||w,C=window.cancelAnimationFrame||b("CancelAnimationFrame")||b("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function O(t,e,n){if(!n||E!==w)return E.call(window,r(t,e));t.call(e)}function P(t){t&&C.call(window,t)}var S=(Object.freeze||Object)({freeze:e,extend:n,create:i,bind:r,lastId:o,stamp:a,throttle:s,wrapNum:u,falseFn:l,formatNum:c,trim:p,splitWords:h,setOptions:f,getParamString:d,template:y,isArray:g,indexOf:v,emptyImageUrl:_,requestFn:E,cancelFn:C,requestAnimFrame:O,cancelAnimFrame:P});function T(){}T.extend=function(t){var e=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},r=e.__super__=this.prototype,o=i(r);for(var a in o.constructor=e,e.prototype=o,this)this.hasOwnProperty(a)&&"prototype"!==a&&"__super__"!==a&&(e[a]=this[a]);return t.statics&&(n(e,t.statics),delete t.statics),t.includes&&(function(t){if("undefined"!=typeof L&&L&&L.Mixin){t=g(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}(t.includes),n.apply(null,[o].concat(t.includes)),delete t.includes),o.options&&(t.options=n(i(o.options),t.options)),n(o,t),o._initHooks=[],o.callInitHooks=function(){if(!this._initHooksCalled){r.callInitHooks&&r.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=o._initHooks.length;t<e;t++)o._initHooks[t].call(this)}},e},T.include=function(t){return n(this.prototype,t),this},T.mergeOptions=function(t){return n(this.prototype.options,t),this},T.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),n="function"==typeof t?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this};var k={on:function(t,e,n){if("object"==typeof t)for(var i in t)this._on(i,t[i],e);else for(var r=0,o=(t=h(t)).length;r<o;r++)this._on(t[r],e,n);return this},off:function(t,e,n){if(t)if("object"==typeof t)for(var i in t)this._off(i,t[i],e);else for(var r=0,o=(t=h(t)).length;r<o;r++)this._off(t[r],e,n);else delete this._events;return this},_on:function(t,e,n){this._events=this._events||{};var i=this._events[t];i||(this._events[t]=i=[]),n===this&&(n=void 0);for(var r={fn:e,ctx:n},o=i,a=0,s=o.length;a<s;a++)if(o[a].fn===e&&o[a].ctx===n)return;o.push(r)},_off:function(t,e,n){var i,r,o;if(this._events&&(i=this._events[t]))if(e){if(n===this&&(n=void 0),i)for(r=0,o=i.length;r<o;r++){var a=i[r];if(a.ctx===n&&a.fn===e)return a.fn=l,this._firingCount&&(this._events[t]=i=i.slice()),void i.splice(r,1)}}else{for(r=0,o=i.length;r<o;r++)i[r].fn=l;delete this._events[t]}},fire:function(t,e,i){if(!this.listens(t,i))return this;var r=n({},e,{type:t,target:this,sourceTarget:e&&e.sourceTarget||this});if(this._events){var o=this._events[t];if(o){this._firingCount=this._firingCount+1||1;for(var a=0,s=o.length;a<s;a++){var u=o[a];u.fn.call(u.ctx||this,r)}this._firingCount--}}return i&&this._propagateEvent(r),this},listens:function(t,e){var n=this._events&&this._events[t];if(n&&n.length)return!0;if(e)for(var i in this._eventParents)if(this._eventParents[i].listens(t,e))return!0;return!1},once:function(t,e,n){if("object"==typeof t){for(var i in t)this.once(i,t[i],e);return this}var o=r(function(){this.off(t,e,n).off(t,o,n)},this);return this.on(t,e,n).on(t,o,n)},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[a(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[a(t)],this},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,n({layer:t.target,propagatedFrom:t.target},t),!0)}};k.addEventListener=k.on,k.removeEventListener=k.clearAllEventListeners=k.off,k.addOneTimeEventListener=k.once,k.fireEvent=k.fire,k.hasEventListeners=k.listens;var A=T.extend(k);function I(t,e,n){this.x=n?Math.round(t):t,this.y=n?Math.round(e):e}var M=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};function z(t,e,n){return t instanceof I?t:g(t)?new I(t[0],t[1]):void 0===t||null===t?t:"object"==typeof t&&"x"in t&&"y"in t?new I(t.x,t.y):new I(t,e,n)}function D(t,e){if(t)for(var n=e?[t,e]:t,i=0,r=n.length;i<r;i++)this.extend(n[i])}function R(t,e){return!t||t instanceof D?t:new D(t,e)}function j(t,e){if(t)for(var n=e?[t,e]:t,i=0,r=n.length;i<r;i++)this.extend(n[i])}function N(t,e){return t instanceof j?t:new j(t,e)}function B(t,e,n){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,void 0!==n&&(this.alt=+n)}function F(t,e,n){return t instanceof B?t:g(t)&&"object"!=typeof t[0]?3===t.length?new B(t[0],t[1],t[2]):2===t.length?new B(t[0],t[1]):null:void 0===t||null===t?t:"object"==typeof t&&"lat"in t?new B(t.lat,"lng"in t?t.lng:t.lon,t.alt):void 0===e?null:new B(t,e,n)}I.prototype={clone:function(){return new I(this.x,this.y)},add:function(t){return this.clone()._add(z(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(z(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new I(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new I(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=M(this.x),this.y=M(this.y),this},distanceTo:function(t){var e=(t=z(t)).x-this.x,n=t.y-this.y;return Math.sqrt(e*e+n*n)},equals:function(t){return(t=z(t)).x===this.x&&t.y===this.y},contains:function(t){return t=z(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+c(this.x)+", "+c(this.y)+")"}},D.prototype={extend:function(t){return t=z(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new I((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new I(this.min.x,this.max.y)},getTopRight:function(){return new I(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,n;return(t="number"==typeof t[0]||t instanceof I?z(t):R(t))instanceof D?(e=t.min,n=t.max):e=n=t,e.x>=this.min.x&&n.x<=this.max.x&&e.y>=this.min.y&&n.y<=this.max.y},intersects:function(t){t=R(t);var e=this.min,n=this.max,i=t.min,r=t.max;return r.x>=e.x&&i.x<=n.x&&r.y>=e.y&&i.y<=n.y},overlaps:function(t){t=R(t);var e=this.min,n=this.max,i=t.min,r=t.max;return r.x>e.x&&i.x<n.x&&r.y>e.y&&i.y<n.y},isValid:function(){return!(!this.min||!this.max)}},j.prototype={extend:function(t){var e,n,i=this._southWest,r=this._northEast;if(t instanceof B)e=t,n=t;else{if(!(t instanceof j))return t?this.extend(F(t)||N(t)):this;if(n=t._northEast,!(e=t._southWest)||!n)return this}return i||r?(i.lat=Math.min(e.lat,i.lat),i.lng=Math.min(e.lng,i.lng),r.lat=Math.max(n.lat,r.lat),r.lng=Math.max(n.lng,r.lng)):(this._southWest=new B(e.lat,e.lng),this._northEast=new B(n.lat,n.lng)),this},pad:function(t){var e=this._southWest,n=this._northEast,i=Math.abs(e.lat-n.lat)*t,r=Math.abs(e.lng-n.lng)*t;return new j(new B(e.lat-i,e.lng-r),new B(n.lat+i,n.lng+r))},getCenter:function(){return new B((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new B(this.getNorth(),this.getWest())},getSouthEast:function(){return new B(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof B||"lat"in t?F(t):N(t);var e,n,i=this._southWest,r=this._northEast;return t instanceof j?(e=t.getSouthWest(),n=t.getNorthEast()):e=n=t,e.lat>=i.lat&&n.lat<=r.lat&&e.lng>=i.lng&&n.lng<=r.lng},intersects:function(t){t=N(t);var e=this._southWest,n=this._northEast,i=t.getSouthWest(),r=t.getNorthEast();return r.lat>=e.lat&&i.lat<=n.lat&&r.lng>=e.lng&&i.lng<=n.lng},overlaps:function(t){t=N(t);var e=this._southWest,n=this._northEast,i=t.getSouthWest(),r=t.getNorthEast();return r.lat>e.lat&&i.lat<n.lat&&r.lng>e.lng&&i.lng<n.lng},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return!!t&&(t=N(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e))},isValid:function(){return!(!this._southWest||!this._northEast)}},B.prototype={equals:function(t,e){return!!t&&(t=F(t),Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng))<=(void 0===e?1e-9:e))},toString:function(t){return"LatLng("+c(this.lat,t)+", "+c(this.lng,t)+")"},distanceTo:function(t){return U.distance(this,F(t))},wrap:function(){return U.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return N([this.lat-e,this.lng-n],[this.lat+e,this.lng+n])},clone:function(){return new B(this.lat,this.lng,this.alt)}};var V,Z={latLngToPoint:function(t,e){var n=this.projection.project(t),i=this.scale(e);return this.transformation._transform(n,i)},pointToLatLng:function(t,e){var n=this.scale(e),i=this.transformation.untransform(t,n);return this.projection.unproject(i)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,n=this.scale(t);return new D(this.transformation.transform(e.min,n),this.transformation.transform(e.max,n))},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?u(t.lng,this.wrapLng,!0):t.lng;return new B(this.wrapLat?u(t.lat,this.wrapLat,!0):t.lat,e,t.alt)},wrapLatLngBounds:function(t){var e=t.getCenter(),n=this.wrapLatLng(e),i=e.lat-n.lat,r=e.lng-n.lng;if(0===i&&0===r)return t;var o=t.getSouthWest(),a=t.getNorthEast();return new j(new B(o.lat-i,o.lng-r),new B(a.lat-i,a.lng-r))}},U=n({},Z,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var n=Math.PI/180,i=t.lat*n,r=e.lat*n,o=Math.sin((e.lat-t.lat)*n/2),a=Math.sin((e.lng-t.lng)*n/2),s=o*o+Math.cos(i)*Math.cos(r)*a*a,u=2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s));return this.R*u}}),q={R:6378137,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,n=this.MAX_LATITUDE,i=Math.max(Math.min(n,t.lat),-n),r=Math.sin(i*e);return new I(this.R*t.lng*e,this.R*Math.log((1+r)/(1-r))/2)},unproject:function(t){var e=180/Math.PI;return new B((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:(V=6378137*Math.PI,new D([-V,-V],[V,V]))};function H(t,e,n,i){if(g(t))return this._a=t[0],this._b=t[1],this._c=t[2],void(this._d=t[3]);this._a=t,this._b=e,this._c=n,this._d=i}function G(t,e,n,i){return new H(t,e,n,i)}H.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return t.x=(e=e||1)*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return new I((t.x/(e=e||1)-this._b)/this._a,(t.y/e-this._d)/this._c)}};var W=n({},U,{code:"EPSG:3857",projection:q,transformation:function(){var t=.5/(Math.PI*q.R);return G(t,.5,-t,.5)}()}),K=n({},W,{code:"EPSG:900913"});function X(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function J(t,e){var n,i,r,o,a,s,u="";for(n=0,r=t.length;n<r;n++){for(i=0,o=(a=t[n]).length;i<o;i++)s=a[i],u+=(i?"L":"M")+s.x+" "+s.y;u+=e?St?"z":"x":""}return u||"M0 0"}var Y=document.documentElement.style,Q="ActiveXObject"in window,$=Q&&!document.addEventListener,tt="msLaunchUri"in navigator&&!("documentMode"in document),et=kt("webkit"),nt=kt("android"),it=kt("android 2")||kt("android 3"),rt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),ot=nt&&kt("Google")&&rt<537&&!("AudioNode"in window),at=!!window.opera,st=kt("chrome"),ut=kt("gecko")&&!et&&!at&&!Q,lt=!st&&kt("safari"),ct=kt("phantom"),pt="OTransition"in Y,ht=0===navigator.platform.indexOf("Win"),ft=Q&&"transition"in Y,dt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!it,mt="MozPerspective"in Y,yt=!window.L_DISABLE_3D&&(ft||dt||mt)&&!pt&&!ct,gt="undefined"!=typeof orientation||kt("mobile"),vt=gt&&et,_t=gt&&dt,bt=!window.PointerEvent&&window.MSPointerEvent,xt=!(!window.PointerEvent&&!bt),wt=!window.L_NO_TOUCH&&(xt||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),Et=gt&&at,Ct=gt&&ut,Ot=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Pt=!!document.createElement("canvas").getContext,St=!(!document.createElementNS||!X("svg").createSVGRect),Tt=!St&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&"object"==typeof e.adj}catch(t){return!1}}();function kt(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var At=(Object.freeze||Object)({ie:Q,ielt9:$,edge:tt,webkit:et,android:nt,android23:it,androidStock:ot,opera:at,chrome:st,gecko:ut,safari:lt,phantom:ct,opera12:pt,win:ht,ie3d:ft,webkit3d:dt,gecko3d:mt,any3d:yt,mobile:gt,mobileWebkit:vt,mobileWebkit3d:_t,msPointer:bt,pointer:xt,touch:wt,mobileOpera:Et,mobileGecko:Ct,retina:Ot,canvas:Pt,svg:St,vml:Tt}),It=bt?"MSPointerDown":"pointerdown",Lt=bt?"MSPointerMove":"pointermove",Mt=bt?"MSPointerUp":"pointerup",zt=bt?"MSPointerCancel":"pointercancel",Dt=["INPUT","SELECT","OPTION"],Rt={},jt=!1,Nt=0;function Bt(t){Rt[t.pointerId]=t,Nt++}function Ft(t){Rt[t.pointerId]&&(Rt[t.pointerId]=t)}function Vt(t){delete Rt[t.pointerId],Nt--}function Zt(t,e){for(var n in t.touches=[],Rt)t.touches.push(Rt[n]);t.changedTouches=[t],e(t)}var Ut=bt?"MSPointerDown":xt?"pointerdown":"touchstart",qt=bt?"MSPointerUp":xt?"pointerup":"touchend",Ht="_leaflet_";function Gt(t,e,n){var i,r,o=!1,a=250;function s(t){var e;if(xt){if(!tt||"mouse"===t.pointerType)return;e=Nt}else e=t.touches.length;if(!(e>1)){var n=Date.now(),s=n-(i||n);r=t.touches?t.touches[0]:t,o=s>0&&s<=a,i=n}}function u(t){if(o&&!r.cancelBubble){if(xt){if(!tt||"mouse"===t.pointerType)return;var n,a,s={};for(a in r)s[a]=(n=r[a])&&n.bind?n.bind(r):n;r=s}r.type="dblclick",e(r),i=null}}return t[Ht+Ut+n]=s,t[Ht+qt+n]=u,t[Ht+"dblclick"+n]=e,t.addEventListener(Ut,s,!1),t.addEventListener(qt,u,!1),t.addEventListener("dblclick",e,!1),this}function Wt(t,e){var n=t[Ht+qt+e],i=t[Ht+"dblclick"+e];return t.removeEventListener(Ut,t[Ht+Ut+e],!1),t.removeEventListener(qt,n,!1),tt||t.removeEventListener("dblclick",i,!1),this}function Kt(t,e,n,i){if("object"==typeof e)for(var r in e)Yt(t,r,e[r],n);else for(var o=0,a=(e=h(e)).length;o<a;o++)Yt(t,e[o],n,i);return this}var Xt="_leaflet_events";function Jt(t,e,n,i){if("object"==typeof e)for(var r in e)Qt(t,r,e[r],n);else if(e)for(var o=0,a=(e=h(e)).length;o<a;o++)Qt(t,e[o],n,i);else{for(var s in t[Xt])Qt(t,s,t[Xt][s]);delete t[Xt]}return this}function Yt(t,e,n,i){var o=e+a(n)+(i?"_"+a(i):"");if(t[Xt]&&t[Xt][o])return this;var s=function(e){return n.call(i||t,e||window.event)},u=s;xt&&0===e.indexOf("touch")?function(t,e,n,i){"touchstart"===e?function(t,e,n){var i=r(function(t){if("mouse"!==t.pointerType&&t.MSPOINTER_TYPE_MOUSE&&t.pointerType!==t.MSPOINTER_TYPE_MOUSE){if(!(Dt.indexOf(t.target.tagName)<0))return;ne(t)}Zt(t,e)});t["_leaflet_touchstart"+n]=i,t.addEventListener(It,i,!1),jt||(document.documentElement.addEventListener(It,Bt,!0),document.documentElement.addEventListener(Lt,Ft,!0),document.documentElement.addEventListener(Mt,Vt,!0),document.documentElement.addEventListener(zt,Vt,!0),jt=!0)}(t,n,i):"touchmove"===e?function(t,e,n){var i=function(t){(t.pointerType!==t.MSPOINTER_TYPE_MOUSE&&"mouse"!==t.pointerType||0!==t.buttons)&&Zt(t,e)};t["_leaflet_touchmove"+n]=i,t.addEventListener(Lt,i,!1)}(t,n,i):"touchend"===e&&function(t,e,n){var i=function(t){Zt(t,e)};t["_leaflet_touchend"+n]=i,t.addEventListener(Mt,i,!1),t.addEventListener(zt,i,!1)}(t,n,i)}(t,e,s,o):!wt||"dblclick"!==e||!Gt||xt&&st?"addEventListener"in t?"mousewheel"===e?t.addEventListener("onwheel"in t?"wheel":"mousewheel",s,!1):"mouseenter"===e||"mouseleave"===e?(s=function(e){e=e||window.event,pe(t,e)&&u(e)},t.addEventListener("mouseenter"===e?"mouseover":"mouseout",s,!1)):("click"===e&&nt&&(s=function(t){!function(t,e){var n=t.timeStamp||t.originalEvent&&t.originalEvent.timeStamp,i=se&&n-se;i&&i>100&&i<500||t.target._simulatedClick&&!t._simulated?ie(t):(se=n,e(t))}(t,u)}),t.addEventListener(e,s,!1)):"attachEvent"in t&&t.attachEvent("on"+e,s):Gt(t,s,o),t[Xt]=t[Xt]||{},t[Xt][o]=s}function Qt(t,e,n,i){var r=e+a(n)+(i?"_"+a(i):""),o=t[Xt]&&t[Xt][r];if(!o)return this;xt&&0===e.indexOf("touch")?function(t,e,n){var i=t["_leaflet_"+e+n];"touchstart"===e?t.removeEventListener(It,i,!1):"touchmove"===e?t.removeEventListener(Lt,i,!1):"touchend"===e&&(t.removeEventListener(Mt,i,!1),t.removeEventListener(zt,i,!1))}(t,e,r):!wt||"dblclick"!==e||!Wt||xt&&st?"removeEventListener"in t?t.removeEventListener("mousewheel"===e?"onwheel"in t?"wheel":"mousewheel":"mouseenter"===e?"mouseover":"mouseleave"===e?"mouseout":e,o,!1):"detachEvent"in t&&t.detachEvent("on"+e,o):Wt(t,r),t[Xt][r]=null}function $t(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,ce(t),this}function te(t){return Yt(t,"mousewheel",$t),this}function ee(t){return Kt(t,"mousedown touchstart dblclick",$t),Yt(t,"click",le),this}function ne(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function ie(t){return ne(t),$t(t),this}function re(t,e){if(!e)return new I(t.clientX,t.clientY);var n=e.getBoundingClientRect();return new I(t.clientX/(n.width/e.offsetWidth||1)-n.left-e.clientLeft,t.clientY/(n.height/e.offsetHeight||1)-n.top-e.clientTop)}var oe=ht&&st?2*window.devicePixelRatio:ut?window.devicePixelRatio:1;function ae(t){return tt?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/oe:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0}var se,ue={};function le(t){ue[t.type]=!0}function ce(t){var e=ue[t.type];return ue[t.type]=!1,e}function pe(t,e){var n=e.relatedTarget;if(!n)return!0;try{for(;n&&n!==t;)n=n.parentNode}catch(t){return!1}return n!==t}var he,fe,de,me,ye,ge=(Object.freeze||Object)({on:Kt,off:Jt,stopPropagation:$t,disableScrollPropagation:te,disableClickPropagation:ee,preventDefault:ne,stop:ie,getMousePosition:re,getWheelDelta:ae,fakeStop:le,skipped:ce,isExternalTarget:pe,addListener:Kt,removeListener:Jt}),ve=ze(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]),_e=ze(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),be="webkitTransition"===_e||"OTransition"===_e?_e+"End":"transitionend";function xe(t){return"string"==typeof t?document.getElementById(t):t}function we(t,e){var n=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!n||"auto"===n)&&document.defaultView){var i=document.defaultView.getComputedStyle(t,null);n=i?i[e]:null}return"auto"===n?null:n}function Ee(t,e,n){var i=document.createElement(t);return i.className=e||"",n&&n.appendChild(i),i}function Ce(t){var e=t.parentNode;e&&e.removeChild(t)}function Oe(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function Pe(t){var e=t.parentNode;e.lastChild!==t&&e.appendChild(t)}function Se(t){var e=t.parentNode;e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function Te(t,e){if(void 0!==t.classList)return t.classList.contains(e);var n=Le(t);return n.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(n)}function ke(t,e){if(void 0!==t.classList)for(var n=h(e),i=0,r=n.length;i<r;i++)t.classList.add(n[i]);else if(!Te(t,e)){var o=Le(t);Ie(t,(o?o+" ":"")+e)}}function Ae(t,e){void 0!==t.classList?t.classList.remove(e):Ie(t,p((" "+Le(t)+" ").replace(" "+e+" "," ")))}function Ie(t,e){void 0===t.className.baseVal?t.className=e:t.className.baseVal=e}function Le(t){return void 0===t.className.baseVal?t.className:t.className.baseVal}function Me(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&function(t,e){var n=!1,i="DXImageTransform.Microsoft.Alpha";try{n=t.filters.item(i)}catch(t){if(1===e)return}e=Math.round(100*e),n?(n.Enabled=100!==e,n.Opacity=e):t.style.filter+=" progid:"+i+"(opacity="+e+")"}(t,e)}function ze(t){for(var e=document.documentElement.style,n=0;n<t.length;n++)if(t[n]in e)return t[n];return!1}function De(t,e,n){var i=e||new I(0,0);t.style[ve]=(ft?"translate("+i.x+"px,"+i.y+"px)":"translate3d("+i.x+"px,"+i.y+"px,0)")+(n?" scale("+n+")":"")}function Re(t,e){t._leaflet_pos=e,yt?De(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function je(t){return t._leaflet_pos||new I(0,0)}if("onselectstart"in document)he=function(){Kt(window,"selectstart",ne)},fe=function(){Jt(window,"selectstart",ne)};else{var Ne=ze(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);he=function(){if(Ne){var t=document.documentElement.style;de=t[Ne],t[Ne]="none"}},fe=function(){Ne&&(document.documentElement.style[Ne]=de,de=void 0)}}function Be(){Kt(window,"dragstart",ne)}function Fe(){Jt(window,"dragstart",ne)}function Ve(t){for(;-1===t.tabIndex;)t=t.parentNode;t.style&&(Ze(),me=t,ye=t.style.outline,t.style.outline="none",Kt(window,"keydown",Ze))}function Ze(){me&&(me.style.outline=ye,me=void 0,ye=void 0,Jt(window,"keydown",Ze))}var Ue=(Object.freeze||Object)({TRANSFORM:ve,TRANSITION:_e,TRANSITION_END:be,get:xe,getStyle:we,create:Ee,remove:Ce,empty:Oe,toFront:Pe,toBack:Se,hasClass:Te,addClass:ke,removeClass:Ae,setClass:Ie,getClass:Le,setOpacity:Me,testProp:ze,setTransform:De,setPosition:Re,getPosition:je,disableTextSelection:he,enableTextSelection:fe,disableImageDrag:Be,enableImageDrag:Fe,preventOutline:Ve,restoreOutline:Ze}),qe=A.extend({run:function(t,e,n,i){this.stop(),this._el=t,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(i||.5,.2),this._startPos=je(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=O(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,n=1e3*this._duration;e<n?this._runFrame(this._easeOut(e/n),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var n=this._startPos.add(this._offset.multiplyBy(t));e&&n._round(),Re(this._el,n),this.fire("step")},_complete:function(){P(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),He=A.extend({options:{crs:W,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=f(this,e),this._initContainer(t),this._initLayout(),this._onResize=r(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),void 0!==e.zoom&&(this._zoom=this._limitZoom(e.zoom)),e.center&&void 0!==e.zoom&&this.setView(F(e.center),e.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this.callInitHooks(),this._zoomAnimated=_e&&yt&&!Et&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Kt(this._proxy,be,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,e,i){return e=void 0===e?this._zoom:this._limitZoom(e),t=this._limitCenter(F(t),e,this.options.maxBounds),i=i||{},this._stop(),this._loaded&&!i.reset&&!0!==i&&(void 0!==i.animate&&(i.zoom=n({animate:i.animate},i.zoom),i.pan=n({animate:i.animate,duration:i.duration},i.pan)),this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,i.zoom):this._tryAnimatedPan(t,i.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(t,e),this)},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return this.setZoom(this._zoom+(t=t||(yt?this.options.zoomDelta:1)),e)},zoomOut:function(t,e){return this.setZoom(this._zoom-(t=t||(yt?this.options.zoomDelta:1)),e)},setZoomAround:function(t,e,n){var i=this.getZoomScale(e),r=this.getSize().divideBy(2),o=(t instanceof I?t:this.latLngToContainerPoint(t)).subtract(r).multiplyBy(1-1/i),a=this.containerPointToLatLng(r.add(o));return this.setView(a,e,{zoom:n})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():N(t);var n=z(e.paddingTopLeft||e.padding||[0,0]),i=z(e.paddingBottomRight||e.padding||[0,0]),r=this.getBoundsZoom(t,!1,n.add(i));if((r="number"==typeof e.maxZoom?Math.min(e.maxZoom,r):r)===1/0)return{center:t.getCenter(),zoom:r};var o=i.subtract(n).divideBy(2),a=this.project(t.getSouthWest(),r),s=this.project(t.getNorthEast(),r);return{center:this.unproject(a.add(s).divideBy(2).add(o),r),zoom:r}},fitBounds:function(t,e){if(!(t=N(t)).isValid())throw new Error("Bounds are not valid.");var n=this._getBoundsCenterZoom(t,e);return this.setView(n.center,n.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(t=z(t).round(),e=e||{},!t.x&&!t.y)return this.fire("moveend");if(!0!==e.animate&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new qe,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),!1!==e.animate){ke(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,n,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,n){if(!1===(n=n||{}).animate||!yt)return this.setView(t,e,n);this._stop();var i=this.project(this.getCenter()),r=this.project(t),o=this.getSize(),a=this._zoom;t=F(t),e=void 0===e?a:e;var s=Math.max(o.x,o.y),u=s*this.getZoomScale(a,e),l=r.distanceTo(i)||1,c=2.0164;function p(t){var e=(u*u-s*s+(t?-1:1)*c*c*l*l)/(2*(t?u:s)*c*l),n=Math.sqrt(e*e+1)-e;return n<1e-9?-18:Math.log(n)}function h(t){return(Math.exp(t)-Math.exp(-t))/2}function f(t){return(Math.exp(t)+Math.exp(-t))/2}var d=p(0),m=Date.now(),y=(p(1)-d)/1.42,g=n.duration?1e3*n.duration:1e3*y*.8;return this._moveStart(!0,n.noMoveStart),(function n(){var o=(Date.now()-m)/g,u=function(t){return 1-Math.pow(1-t,1.5)}(o)*y;o<=1?(this._flyToFrame=O(n,this),this._move(this.unproject(i.add(r.subtract(i).multiplyBy(function(t){return s*(f(d)*(h(e=d+1.42*t)/f(e))-h(d))/c;var e}(u)/l)),a),this.getScaleZoom(s/function(t){return s*(f(d)/f(d+1.42*t))}(u),a),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}).call(this),this},flyToBounds:function(t,e){var n=this._getBoundsCenterZoom(t,e);return this.flyTo(n.center,n.zoom,e)},setMaxBounds:function(t){return(t=N(t)).isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(t){var e=this.options.minZoom;return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var n=this.getCenter(),i=this._limitCenter(n,this._zoom,N(t));return n.equals(i)||this.panTo(i,e),this._enforcingBounds=!1,this},invalidateSize:function(t){if(!this._loaded)return this;t=n({animate:!1,pan:!0},!0===t?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var i=this.getSize(),o=e.divideBy(2).round(),a=i.divideBy(2).round(),s=o.subtract(a);return s.x||s.y?(t.animate&&t.pan?this.panBy(s):(t.pan&&this._rawPanBy(s),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(r(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:i})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=n({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=r(this._handleGeolocationResponse,this),i=r(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,i,t):navigator.geolocation.getCurrentPosition(e,i,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e=t.code,n=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+n+"."})},_handleGeolocationResponse:function(t){var e=new B(t.coords.latitude,t.coords.longitude),n=e.toBounds(t.coords.accuracy),i=this._locateOptions;if(i.setView){var r=this.getBoundsZoom(n);this.setView(e,i.maxZoom?Math.min(r,i.maxZoom):r)}var o={latlng:e,bounds:n,timestamp:t.timestamp};for(var a in t.coords)"number"==typeof t.coords[a]&&(o[a]=t.coords[a]);this.fire("locationfound",o)},addHandler:function(t,e){if(!e)return this;var n=this[t]=new e(this);return this._handlers.push(n),this.options[t]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=void 0,this._containerId=void 0}var t;for(t in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),Ce(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[t].remove();for(t in this._panes)Ce(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var n=Ee("div","leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),e||this._mapPane);return t&&(this._panes[t]=n),n},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds();return new j(this.unproject(t.getBottomLeft()),this.unproject(t.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,n){t=N(t),n=z(n||[0,0]);var i=this.getZoom()||0,r=this.getMinZoom(),o=this.getMaxZoom(),a=t.getNorthWest(),s=t.getSouthEast(),u=this.getSize().subtract(n),l=R(this.project(s,i),this.project(a,i)).getSize(),c=yt?this.options.zoomSnap:1,p=u.x/l.x,h=u.y/l.y,f=e?Math.max(p,h):Math.min(p,h);return i=this.getScaleZoom(f,i),c&&(i=Math.round(i/(c/100))*(c/100),i=e?Math.ceil(i/c)*c:Math.floor(i/c)*c),Math.max(r,Math.min(o,i))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new I(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var n=this._getTopLeftPoint(t,e);return new D(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(void 0===t?this.getZoom():t)},getPane:function(t){return"string"==typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var n=this.options.crs;return e=void 0===e?this._zoom:e,n.scale(t)/n.scale(e)},getScaleZoom:function(t,e){var n=this.options.crs,i=n.zoom(t*n.scale(e=void 0===e?this._zoom:e));return isNaN(i)?1/0:i},project:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.latLngToPoint(F(t),e)},unproject:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.pointToLatLng(z(t),e)},layerPointToLatLng:function(t){var e=z(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){return this.project(F(t))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(F(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(N(t))},distance:function(t,e){return this.options.crs.distance(F(t),F(e))},containerPointToLayerPoint:function(t){return z(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return z(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(z(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(F(t)))},mouseEventToContainerPoint:function(t){return re(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=xe(t);if(!e)throw new Error("Map container not found.");if(e._leaflet_id)throw new Error("Map container is already initialized.");Kt(e,"scroll",this._onScroll,this),this._containerId=a(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&yt,ke(t,"leaflet-container"+(wt?" leaflet-touch":"")+(Ot?" leaflet-retina":"")+($?" leaflet-oldie":"")+(lt?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=we(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Re(this._mapPane,new I(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ke(t.markerPane,"leaflet-zoom-hide"),ke(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e){Re(this._mapPane,new I(0,0));var n=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var i=this._zoom!==e;this._moveStart(i,!1)._move(t,e)._moveEnd(i),this.fire("viewreset"),n&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,n){void 0===e&&(e=this._zoom);var i=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),(i||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return P(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){Re(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[a(this._container)]=this;var e=t?Jt:Kt;e(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),yt&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){P(this._resizeRequest),this._resizeRequest=O(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var n,i=[],r="mouseout"===e||"mouseover"===e,o=t.target||t.srcElement,s=!1;o;){if((n=this._targets[a(o)])&&("click"===e||"preclick"===e)&&!t._simulated&&this._draggableMoved(n)){s=!0;break}if(n&&n.listens(e,!0)){if(r&&!pe(o,t))break;if(i.push(n),r)break}if(o===this._container)break;o=o.parentNode}return i.length||s||r||!pe(o,t)||(i=[this]),i},_handleDOMEvent:function(t){if(this._loaded&&!ce(t)){var e=t.type;"mousedown"!==e&&"keypress"!==e||Ve(t.target||t.srcElement),this._fireDOMEvent(t,e)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,e,i){if("click"===t.type){var r=n({},t);r.type="preclick",this._fireDOMEvent(r,r.type,i)}if(!t._stopped&&(i=(i||[]).concat(this._findEventTargets(t,e))).length){var o=i[0];"contextmenu"===e&&o.listens(e,!0)&&ne(t);var a={originalEvent:t};if("keypress"!==t.type){var s=o.getLatLng&&(!o._radius||o._radius<=10);a.containerPoint=s?this.latLngToContainerPoint(o.getLatLng()):this.mouseEventToContainerPoint(t),a.layerPoint=this.containerPointToLayerPoint(a.containerPoint),a.latlng=s?o.getLatLng():this.layerPointToLatLng(a.layerPoint)}for(var u=0;u<i.length;u++)if(i[u].fire(e,a,!0),a.originalEvent._stopped||!1===i[u].options.bubblingMouseEvents&&-1!==v(this._mouseEvents,e))return}},_draggableMoved:function(t){return(t=t.dragging&&t.dragging.enabled()?t:this).dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return je(this._mapPane)||new I(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){return(t&&void 0!==e?this._getNewPixelOrigin(t,e):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var n=this.getSize()._divideBy(2);return this.project(t,e)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,n){var i=this._getNewPixelOrigin(n,e);return this.project(t,e)._subtract(i)},_latLngBoundsToNewLayerBounds:function(t,e,n){var i=this._getNewPixelOrigin(n,e);return R([this.project(t.getSouthWest(),e)._subtract(i),this.project(t.getNorthWest(),e)._subtract(i),this.project(t.getSouthEast(),e)._subtract(i),this.project(t.getNorthEast(),e)._subtract(i)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,n){if(!n)return t;var i=this.project(t,e),r=this.getSize().divideBy(2),o=new D(i.subtract(r),i.add(r)),a=this._getBoundsOffset(o,n,e);return a.round().equals([0,0])?t:this.unproject(i.add(a),e)},_limitOffset:function(t,e){if(!e)return t;var n=this.getPixelBounds(),i=new D(n.min.add(t),n.max.add(t));return t.add(this._getBoundsOffset(i,e))},_getBoundsOffset:function(t,e,n){var i=R(this.project(e.getNorthEast(),n),this.project(e.getSouthWest(),n)),r=i.min.subtract(t.min),o=i.max.subtract(t.max);return new I(this._rebound(r.x,-o.x),this._rebound(r.y,-o.y))},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),n=this.getMaxZoom(),i=yt?this.options.zoomSnap:1;return i&&(t=Math.round(t/i)*i),Math.max(e,Math.min(n,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Ae(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var n=this._getCenterOffset(t)._trunc();return!(!0!==(e&&e.animate)&&!this.getSize().contains(n)||(this.panBy(n,e),0))},_createAnimProxy:function(){var t=this._proxy=Ee("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(t){var e=ve,n=this._proxy.style[e];De(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),n===this._proxy.style[e]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",function(){var t=this.getCenter(),e=this.getZoom();De(this._proxy,this.project(t,e),this.getZoomScale(e,1))},this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Ce(this._proxy),delete this._proxy},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||!1===n.animate||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var i=this.getZoomScale(e),r=this._getCenterOffset(t)._divideBy(1-1/i);return!(!0!==n.animate&&!this.getSize().contains(r)||(O(function(){this._moveStart(!0,!1)._animateZoom(t,e,!0)},this),0))},_animateZoom:function(t,e,n,i){this._mapPane&&(n&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,ke(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:i}),setTimeout(r(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Ae(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),O(function(){this._moveEnd(!0)},this))}}),Ge=T.extend({options:{position:"topright"},initialize:function(t){f(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),n=this.getPosition(),i=t._controlCorners[n];return ke(e,"leaflet-control"),-1!==n.indexOf("bottom")?i.insertBefore(e,i.firstChild):i.appendChild(e),this},remove:function(){return this._map?(Ce(this._container),this.onRemove&&this.onRemove(this._map),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),We=function(t){return new Ge(t)};He.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},e="leaflet-",n=this._controlContainer=Ee("div",e+"control-container",this._container);function i(i,r){t[i+r]=Ee("div",e+i+" "+e+r,n)}i("top","left"),i("top","right"),i("bottom","left"),i("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)Ce(this._controlCorners[t]);Ce(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Ke=Ge.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,n,i){return n<i?-1:i<n?1:0}},initialize:function(t,e,n){for(var i in f(this,n),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,t)this._addLayer(t[i],i);for(i in e)this._addLayer(e[i],i,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return Ge.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(a(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){ke(this._container,"leaflet-control-layers-expanded"),this._form.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._form.clientHeight?(ke(this._form,"leaflet-control-layers-scrollbar"),this._form.style.height=t+"px"):Ae(this._form,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Ae(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=Ee("div",t),n=this.options.collapsed;e.setAttribute("aria-haspopup",!0),ee(e),te(e);var i=this._form=Ee("form",t+"-list");n&&(this._map.on("click",this.collapse,this),nt||Kt(e,{mouseenter:this.expand,mouseleave:this.collapse},this));var r=this._layersLink=Ee("a",t+"-toggle",e);r.href="#",r.title="Layers",wt?(Kt(r,"click",ie),Kt(r,"click",this.expand,this)):Kt(r,"focus",this.expand,this),n||this.expand(),this._baseLayersList=Ee("div",t+"-base",i),this._separator=Ee("div",t+"-separator",i),this._overlaysList=Ee("div",t+"-overlays",i),e.appendChild(i)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&a(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,n){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:n}),this.options.sortLayers&&this._layers.sort(r(function(t,e){return this.options.sortFunction(t.layer,e.layer,t.name,e.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Oe(this._baseLayersList),Oe(this._overlaysList),this._layerControlInputs=[];var t,e,n,i,r=0;for(n=0;n<this._layers.length;n++)this._addItem(i=this._layers[n]),e=e||i.overlay,t=t||!i.overlay,r+=i.overlay?0:1;return this.options.hideSingleBase&&(this._baseLayersList.style.display=(t=t&&r>1)?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(a(t.target)),n=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;n&&this._map.fire(n,e)},_createRadioElement:function(t,e){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",i=document.createElement("div");return i.innerHTML=n,i.firstChild},_addItem:function(t){var e,n=document.createElement("label"),i=this._map.hasLayer(t.layer);t.overlay?((e=document.createElement("input")).type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=i):e=this._createRadioElement("leaflet-base-layers",i),this._layerControlInputs.push(e),e.layerId=a(t.layer),Kt(e,"click",this._onInputClick,this);var r=document.createElement("span");r.innerHTML=" "+t.name;var o=document.createElement("div");return n.appendChild(o),o.appendChild(e),o.appendChild(r),(t.overlay?this._overlaysList:this._baseLayersList).appendChild(n),this._checkDisabledLayers(),n},_onInputClick:function(){var t,e,n=this._layerControlInputs,i=[],r=[];this._handlingClick=!0;for(var o=n.length-1;o>=0;o--)e=this._getLayer((t=n[o]).layerId).layer,t.checked?i.push(e):t.checked||r.push(e);for(o=0;o<r.length;o++)this._map.hasLayer(r[o])&&this._map.removeLayer(r[o]);for(o=0;o<i.length;o++)this._map.hasLayer(i[o])||this._map.addLayer(i[o]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t,e,n=this._layerControlInputs,i=this._map.getZoom(),r=n.length-1;r>=0;r--)e=this._getLayer((t=n[r]).layerId).layer,t.disabled=void 0!==e.options.minZoom&&i<e.options.minZoom||void 0!==e.options.maxZoom&&i>e.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),Xe=Ge.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",n=Ee("div",e+" leaflet-bar"),i=this.options;return this._zoomInButton=this._createButton(i.zoomInText,i.zoomInTitle,e+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(i.zoomOutText,i.zoomOutTitle,e+"-out",n,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,n,i,r){var o=Ee("a",n,i);return o.innerHTML=t,o.href="#",o.title=e,o.setAttribute("role","button"),o.setAttribute("aria-label",e),ee(o),Kt(o,"click",ie),Kt(o,"click",r,this),Kt(o,"click",this._refocusOnMap,this),o},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";Ae(this._zoomInButton,e),Ae(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMinZoom())&&ke(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMaxZoom())&&ke(this._zoomInButton,e)}});He.mergeOptions({zoomControl:!0}),He.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Xe,this.addControl(this.zoomControl))});var Je=Ge.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e=Ee("div","leaflet-control-scale"),n=this.options;return this._addScales(n,"leaflet-control-scale-line",e),t.on(n.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),e},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,n){t.metric&&(this._mScale=Ee("div",e,n)),t.imperial&&(this._iScale=Ee("div",e,n))},_update:function(){var t=this._map,e=t.getSize().y/2,n=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(n)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t);this._updateScale(this._mScale,e<1e3?e+" m":e/1e3+" km",e/t)},_updateImperial:function(t){var e,n,i,r=3.2808399*t;r>5280?(n=this._getRoundNum(e=r/5280),this._updateScale(this._iScale,n+" mi",n/e)):(i=this._getRoundNum(r),this._updateScale(this._iScale,i+" ft",i/r))},_updateScale:function(t,e,n){t.style.width=Math.round(this.options.maxWidth*n)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),n=t/e;return e*(n>=10?10:n>=5?5:n>=3?3:n>=2?2:1)}}),Ye=Ge.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){f(this,t),this._attributions={}},onAdd:function(t){for(var e in t.attributionControl=this,this._container=Ee("div","leaflet-control-attribution"),ee(this._container),t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),this._container},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var n=[];this.options.prefix&&n.push(this.options.prefix),t.length&&n.push(t.join(", ")),this._container.innerHTML=n.join(" | ")}}});He.mergeOptions({attributionControl:!0}),He.addInitHook(function(){this.options.attributionControl&&(new Ye).addTo(this)}),Ge.Layers=Ke,Ge.Zoom=Xe,Ge.Scale=Je,Ge.Attribution=Ye,We.layers=function(t,e,n){return new Ke(t,e,n)},We.zoom=function(t){return new Xe(t)},We.scale=function(t){return new Je(t)},We.attribution=function(t){return new Ye(t)};var Qe=T.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Qe.addTo=function(t,e){return t.addHandler(e,this),this};var $e,tn={Events:k},en=wt?"touchstart mousedown":"mousedown",nn={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},rn={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},on=A.extend({options:{clickTolerance:3},initialize:function(t,e,n,i){f(this,i),this._element=t,this._dragStartTarget=e||t,this._preventOutline=n},enable:function(){this._enabled||(Kt(this._dragStartTarget,en,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(on._dragging===this&&this.finishDrag(),Jt(this._dragStartTarget,en,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(!t._simulated&&this._enabled&&(this._moved=!1,!Te(this._element,"leaflet-zoom-anim")&&!(on._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches||(on._dragging=this,this._preventOutline&&Ve(this._element),Be(),he(),this._moving)))){this.fire("down");var e=t.touches?t.touches[0]:t;this._startPoint=new I(e.clientX,e.clientY),Kt(document,rn[t.type],this._onMove,this),Kt(document,nn[t.type],this._onUp,this)}},_onMove:function(t){if(!t._simulated&&this._enabled)if(t.touches&&t.touches.length>1)this._moved=!0;else{var e=t.touches&&1===t.touches.length?t.touches[0]:t,n=new I(e.clientX,e.clientY).subtract(this._startPoint);(n.x||n.y)&&(Math.abs(n.x)+Math.abs(n.y)<this.options.clickTolerance||(ne(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=je(this._element).subtract(n),ke(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ke(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(n),this._moving=!0,P(this._animRequest),this._lastEvent=t,this._animRequest=O(this._updatePosition,this,!0)))}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),Re(this._element,this._newPos),this.fire("drag",t)},_onUp:function(t){!t._simulated&&this._enabled&&this.finishDrag()},finishDrag:function(){for(var t in Ae(document.body,"leaflet-dragging"),this._lastTarget&&(Ae(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),rn)Jt(document,rn[t],this._onMove,this),Jt(document,nn[t],this._onUp,this);Fe(),fe(),this._moved&&this._moving&&(P(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,on._dragging=!1}});function an(t,e){if(!e||!t.length)return t.slice();var n=e*e;return function(t,e){var n=t.length,i=new(typeof Uint8Array!=void 0+""?Uint8Array:Array)(n);i[0]=i[n-1]=1,function t(e,n,i,r,o){var a,s,u,l=0;for(s=r+1;s<=o-1;s++)(u=pn(e[s],e[r],e[o],!0))>l&&(a=s,l=u);l>i&&(n[a]=1,t(e,n,i,r,a),t(e,n,i,a,o))}(t,i,e,0,n-1);var r,o=[];for(r=0;r<n;r++)i[r]&&o.push(t[r]);return o}(t=function(t,e){for(var n=[t[0]],i=1,r=0,o=t.length;i<o;i++)(u=(s=t[r]).x-(a=t[i]).x)*u+(l=s.y-a.y)*l>e&&(n.push(t[i]),r=i);var a,s,u,l;return r<o-1&&n.push(t[o-1]),n}(t,n),n)}function sn(t,e,n){return Math.sqrt(pn(t,e,n,!0))}function un(t,e,n,i,r){var o,a,s,u=i?$e:cn(t,n),l=cn(e,n);for($e=l;;){if(!(u|l))return[t,e];if(u&l)return!1;s=cn(a=ln(t,e,o=u||l,n,r),n),o===u?(t=a,u=s):(e=a,l=s)}}function ln(t,e,n,i,r){var o,a,s=e.x-t.x,u=e.y-t.y,l=i.min,c=i.max;return 8&n?(o=t.x+s*(c.y-t.y)/u,a=c.y):4&n?(o=t.x+s*(l.y-t.y)/u,a=l.y):2&n?(o=c.x,a=t.y+u*(c.x-t.x)/s):1&n&&(o=l.x,a=t.y+u*(l.x-t.x)/s),new I(o,a,r)}function cn(t,e){var n=0;return t.x<e.min.x?n|=1:t.x>e.max.x&&(n|=2),t.y<e.min.y?n|=4:t.y>e.max.y&&(n|=8),n}function pn(t,e,n,i){var r,o=e.x,a=e.y,s=n.x-o,u=n.y-a,l=s*s+u*u;return l>0&&((r=((t.x-o)*s+(t.y-a)*u)/l)>1?(o=n.x,a=n.y):r>0&&(o+=s*r,a+=u*r)),s=t.x-o,u=t.y-a,i?s*s+u*u:new I(o,a)}function hn(t){return!g(t[0])||"object"!=typeof t[0][0]&&"undefined"!=typeof t[0][0]}function fn(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),hn(t)}var dn=(Object.freeze||Object)({simplify:an,pointToSegmentDistance:sn,closestPointOnSegment:function(t,e,n){return pn(t,e,n)},clipSegment:un,_getEdgeIntersection:ln,_getBitCode:cn,_sqClosestPointOnSegment:pn,isFlat:hn,_flat:fn});function mn(t,e,n){var i,r,o,a,s,u,l,c,p,h=[1,4,2,8];for(r=0,l=t.length;r<l;r++)t[r]._code=cn(t[r],e);for(a=0;a<4;a++){for(c=h[a],i=[],r=0,o=(l=t.length)-1;r<l;o=r++)u=t[o],(s=t[r])._code&c?u._code&c||((p=ln(u,s,c,e,n))._code=cn(p,e),i.push(p)):(u._code&c&&((p=ln(u,s,c,e,n))._code=cn(p,e),i.push(p)),i.push(s));t=i}return t}var yn=(Object.freeze||Object)({clipPolygon:mn}),gn={project:function(t){return new I(t.lng,t.lat)},unproject:function(t){return new B(t.y,t.x)},bounds:new D([-180,-90],[180,90])},vn={R:6378137,R_MINOR:6356752.314245179,bounds:new D([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var e=Math.PI/180,n=this.R,i=t.lat*e,r=this.R_MINOR/n,o=Math.sqrt(1-r*r),a=o*Math.sin(i),s=Math.tan(Math.PI/4-i/2)/Math.pow((1-a)/(1+a),o/2);return i=-n*Math.log(Math.max(s,1e-10)),new I(t.lng*e*n,i)},unproject:function(t){for(var e,n=180/Math.PI,i=this.R,r=this.R_MINOR/i,o=Math.sqrt(1-r*r),a=Math.exp(-t.y/i),s=Math.PI/2-2*Math.atan(a),u=0,l=.1;u<15&&Math.abs(l)>1e-7;u++)e=o*Math.sin(s),e=Math.pow((1-e)/(1+e),o/2),s+=l=Math.PI/2-2*Math.atan(a*e)-s;return new B(s*n,t.x*n/i)}},_n=(Object.freeze||Object)({LonLat:gn,Mercator:vn,SphericalMercator:q}),bn=n({},U,{code:"EPSG:3395",projection:vn,transformation:function(){var t=.5/(Math.PI*vn.R);return G(t,.5,-t,.5)}()}),xn=n({},U,{code:"EPSG:4326",projection:gn,transformation:G(1/180,1,-1/180,.5)}),wn=n({},Z,{projection:gn,transformation:G(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var n=e.lng-t.lng,i=e.lat-t.lat;return Math.sqrt(n*n+i*i)},infinite:!0});Z.Earth=U,Z.EPSG3395=bn,Z.EPSG3857=W,Z.EPSG900913=K,Z.EPSG4326=xn,Z.Simple=wn;var En=A.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[a(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[a(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var n=this.getEvents();e.on(n,this),this.once("remove",function(){e.off(n,this)},this)}this.onAdd(e),this.getAttribution&&e.attributionControl&&e.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),e.fire("layeradd",{layer:this})}}});He.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=a(t);return this._layers[e]?this:(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var e=a(t);return this._layers[e]?(this._loaded&&t.onRemove(this),t.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(t.getAttribution()),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return!!t&&a(t)in this._layers},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},_addLayers:function(t){for(var e=0,n=(t=t?g(t)?t:[t]:[]).length;e<n;e++)this.addLayer(t[e])},_addZoomLimit:function(t){!isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[a(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=a(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,n=this._getZoomSpan();for(var i in this._zoomBoundLayers){var r=this._zoomBoundLayers[i].options;t=void 0===r.minZoom?t:Math.min(t,r.minZoom),e=void 0===r.maxZoom?e:Math.max(e,r.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Cn=En.extend({initialize:function(t,e){var n,i;if(f(this,e),this._layers={},t)for(n=0,i=t.length;n<i;n++)this.addLayer(t[n])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return!!t&&(t in this._layers||this.getLayerId(t)in this._layers)},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e,n,i=Array.prototype.slice.call(arguments,1);for(e in this._layers)(n=this._layers[e])[t]&&n[t].apply(n,i);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return a(t)}}),On=Cn.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),Cn.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),Cn.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new j;for(var e in this._layers){var n=this._layers[e];t.extend(n.getBounds?n.getBounds():n.getLatLng())}return t}}),Pn=T.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0]},initialize:function(t){f(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var n=this._getIconUrl(t);if(!n){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var i=this._createImg(n,e&&"IMG"===e.tagName?e:null);return this._setIconStyles(i,t),i},_setIconStyles:function(t,e){var n=this.options,i=n[e+"Size"];"number"==typeof i&&(i=[i,i]);var r=z(i),o=z("shadow"===e&&n.shadowAnchor||n.iconAnchor||r&&r.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(n.className||""),o&&(t.style.marginLeft=-o.x+"px",t.style.marginTop=-o.y+"px"),r&&(t.style.width=r.x+"px",t.style.height=r.y+"px")},_createImg:function(t,e){return(e=e||document.createElement("img")).src=t,e},_getIconUrl:function(t){return Ot&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}}),Sn=Pn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return Sn.imagePath||(Sn.imagePath=this._detectIconPath()),(this.options.imagePath||Sn.imagePath)+Pn.prototype._getIconUrl.call(this,t)},_detectIconPath:function(){var t=Ee("div","leaflet-default-icon-path",document.body),e=we(t,"background-image")||we(t,"backgroundImage");return document.body.removeChild(t),null===e||0!==e.indexOf("url")?"":e.replace(/^url\(["']?/,"").replace(/marker-icon\.png["']?\)$/,"")}}),Tn=Qe.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new on(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ke(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Ae(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,n=e._map,i=this._marker.options.autoPanSpeed,r=this._marker.options.autoPanPadding,o=L.DomUtil.getPosition(e._icon),a=n.getPixelBounds(),s=n.getPixelOrigin(),u=R(a.min._subtract(s).add(r),a.max._subtract(s).subtract(r));if(!u.contains(o)){var l=z((Math.max(u.max.x,o.x)-u.max.x)/(a.max.x-u.max.x)-(Math.min(u.min.x,o.x)-u.min.x)/(a.min.x-u.min.x),(Math.max(u.max.y,o.y)-u.max.y)/(a.max.y-u.max.y)-(Math.min(u.min.y,o.y)-u.min.y)/(a.min.y-u.min.y)).multiplyBy(i);n.panBy(l,{animate:!1}),this._draggable._newPos._add(l),this._draggable._startPos._add(l),L.DomUtil.setPosition(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=O(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup().fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(P(this._panRequest),this._panRequest=O(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,n=e._shadow,i=je(e._icon),r=e._map.layerPointToLatLng(i);n&&Re(n,i),e._latlng=r,t.latlng=r,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){P(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),kn=En.extend({options:{icon:new Sn,interactive:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",bubblingMouseEvents:!1},initialize:function(t,e){f(this,e),this._latlng=F(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=F(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=t.icon.createIcon(this._icon),i=!1;n!==this._icon&&(this._icon&&this._removeIcon(),i=!0,t.title&&(n.title=t.title),"IMG"===n.tagName&&(n.alt=t.alt||"")),ke(n,e),t.keyboard&&(n.tabIndex="0"),this._icon=n,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var r=t.icon.createShadow(this._shadow),o=!1;r!==this._shadow&&(this._removeShadow(),o=!0),r&&(ke(r,e),r.alt=""),this._shadow=r,t.opacity<1&&this._updateOpacity(),i&&this.getPane().appendChild(this._icon),this._initInteraction(),r&&o&&this.getPane("shadowPane").appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),Ce(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Ce(this._shadow),this._shadow=null},_setPos:function(t){Re(this._icon,t),this._shadow&&Re(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon.style.zIndex=this._zIndex+t},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(ke(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Tn)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Tn(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;Me(this._icon,t),this._shadow&&Me(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}}),An=En.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return f(this,t),this._renderer&&this._renderer._updateStyle(this),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+this._renderer.options.tolerance}}),In=An.extend({options:{fill:!0,radius:10},initialize:function(t,e){f(this,e),this._latlng=F(t),this._radius=this.options.radius},setLatLng:function(t){return this._latlng=F(t),this.redraw(),this.fire("move",{latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return An.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,n=this._clickTolerance(),i=[t+n,e+n];this._pxBounds=new D(this._point.subtract(i),this._point.add(i))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}}),Ln=In.extend({initialize:function(t,e,i){if("number"==typeof e&&(e=n({},i,{radius:e})),f(this,e),this._latlng=F(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new j(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:An.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,n=this._map,i=n.options.crs;if(i.distance===U.distance){var r=Math.PI/180,o=this._mRadius/U.R/r,a=n.project([e+o,t]),s=n.project([e-o,t]),u=a.add(s).divideBy(2),l=n.unproject(u).lat,c=Math.acos((Math.cos(o*r)-Math.sin(e*r)*Math.sin(l*r))/(Math.cos(e*r)*Math.cos(l*r)))/r;(isNaN(c)||0===c)&&(c=o/Math.cos(Math.PI/180*e)),this._point=u.subtract(n.getPixelOrigin()),this._radius=isNaN(c)?0:u.x-n.project([l,t-c]).x,this._radiusY=u.y-a.y}else{var p=i.unproject(i.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(p).x}this._updateBounds()}}),Mn=An.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){f(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e,n,i=1/0,r=null,o=pn,a=0,s=this._parts.length;a<s;a++)for(var u=this._parts[a],l=1,c=u.length;l<c;l++){var p=o(t,e=u[l-1],n=u[l],!0);p<i&&(i=p,r=o(t,e,n))}return r&&(r.distance=Math.sqrt(i)),r},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,i,r,o,a,s=this._rings[0],u=s.length;if(!u)return null;for(t=0,e=0;t<u-1;t++)e+=s[t].distanceTo(s[t+1])/2;if(0===e)return this._map.layerPointToLatLng(s[0]);for(t=0,i=0;t<u-1;t++)if((i+=n=(r=s[t]).distanceTo(o=s[t+1]))>e)return this._map.layerPointToLatLng([o.x-(a=(i-e)/n)*(o.x-r.x),o.y-a*(o.y-r.y)])},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=F(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new j,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return hn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],n=hn(t),i=0,r=t.length;i<r;i++)n?(e[i]=F(t[i]),this._bounds.extend(e[i])):e[i]=this._convertLatLngs(t[i]);return e},_project:function(){var t=new D;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t);var e=this._clickTolerance(),n=new I(e,e);this._bounds.isValid()&&t.isValid()&&(t.min._subtract(n),t.max._add(n),this._pxBounds=t)},_projectLatlngs:function(t,e,n){var i,r,o=t.length;if(t[0]instanceof B){for(r=[],i=0;i<o;i++)r[i]=this._map.latLngToLayerPoint(t[i]),n.extend(r[i]);e.push(r)}else for(i=0;i<o;i++)this._projectLatlngs(t[i],e,n)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else{var e,n,i,r,o,a,s,u=this._parts;for(e=0,i=0,r=this._rings.length;e<r;e++)for(n=0,o=(s=this._rings[e]).length;n<o-1;n++)(a=un(s[n],s[n+1],t,n,!0))&&(u[i]=u[i]||[],u[i].push(a[0]),a[1]===s[n+1]&&n!==o-2||(u[i].push(a[1]),i++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,n=0,i=t.length;n<i;n++)t[n]=an(t[n],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var n,i,r,o,a,s,u=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(n=0,o=this._parts.length;n<o;n++)for(i=0,r=(a=(s=this._parts[n]).length)-1;i<a;r=i++)if((e||0!==i)&&sn(t,s[r],s[i])<=u)return!0;return!1}});Mn._flat=fn;var zn=Mn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,i,r,o,a,s,u=this._rings[0],l=u.length;if(!l)return null;for(o=a=s=0,t=0,e=l-1;t<l;e=t++)a+=((n=u[t]).x+(i=u[e]).x)*(r=n.y*i.x-i.y*n.x),s+=(n.y+i.y)*r,o+=3*r;return this._map.layerPointToLatLng(0===o?u[0]:[a/o,s/o])},_convertLatLngs:function(t){var e=Mn.prototype._convertLatLngs.call(this,t),n=e.length;return n>=2&&e[0]instanceof B&&e[0].equals(e[n-1])&&e.pop(),e},_setLatLngs:function(t){Mn.prototype._setLatLngs.call(this,t),hn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return hn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,n=new I(e,e);if(t=new D(t.min.subtract(n),t.max.add(n)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else for(var i,r=0,o=this._rings.length;r<o;r++)(i=mn(this._rings[r],t,!0)).length&&this._parts.push(i)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e,n,i,r,o,a,s,u,l=!1;if(!this._pxBounds.contains(t))return!1;for(r=0,s=this._parts.length;r<s;r++)for(o=0,a=(u=(e=this._parts[r]).length)-1;o<u;a=o++)(n=e[o]).y>t.y!=(i=e[a]).y>t.y&&t.x<(i.x-n.x)*(t.y-n.y)/(i.y-n.y)+n.x&&(l=!l);return l||Mn.prototype._containsPoint.call(this,t,!0)}}),Dn=On.extend({initialize:function(t,e){f(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,n,i,r=g(t)?t:t.features;if(r){for(e=0,n=r.length;e<n;e++)((i=r[e]).geometries||i.geometry||i.features||i.coordinates)&&this.addData(i);return this}var o=this.options;if(o.filter&&!o.filter(t))return this;var a=Rn(t,o);return a?(a.feature=Zn(t),a.defaultOptions=a.options,this.resetStyle(a),o.onEachFeature&&o.onEachFeature(t,a),this.addLayer(a)):this},resetStyle:function(t){return t.options=n({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this},setStyle:function(t){return this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(t,e){"function"==typeof e&&(e=e(t.feature)),t.setStyle&&t.setStyle(e)}});function Rn(t,e){var n,i,r,o,a="Feature"===t.type?t.geometry:t,s=a?a.coordinates:null,u=[],l=e&&e.pointToLayer,c=e&&e.coordsToLatLng||jn;if(!s&&!a)return null;switch(a.type){case"Point":return n=c(s),l?l(t,n):new kn(n);case"MultiPoint":for(r=0,o=s.length;r<o;r++)n=c(s[r]),u.push(l?l(t,n):new kn(n));return new On(u);case"LineString":case"MultiLineString":return i=Nn(s,"LineString"===a.type?0:1,c),new Mn(i,e);case"Polygon":case"MultiPolygon":return i=Nn(s,"Polygon"===a.type?1:2,c),new zn(i,e);case"GeometryCollection":for(r=0,o=a.geometries.length;r<o;r++){var p=Rn({geometry:a.geometries[r],type:"Feature",properties:t.properties},e);p&&u.push(p)}return new On(u);default:throw new Error("Invalid GeoJSON object.")}}function jn(t){return new B(t[1],t[0],t[2])}function Nn(t,e,n){for(var i,r=[],o=0,a=t.length;o<a;o++)i=e?Nn(t[o],e-1,n):(n||jn)(t[o]),r.push(i);return r}function Bn(t,e){return e="number"==typeof e?e:6,void 0!==t.alt?[c(t.lng,e),c(t.lat,e),c(t.alt,e)]:[c(t.lng,e),c(t.lat,e)]}function Fn(t,e,n,i){for(var r=[],o=0,a=t.length;o<a;o++)r.push(e?Fn(t[o],e-1,n,i):Bn(t[o],i));return!e&&n&&r.push(r[0]),r}function Vn(t,e){return t.feature?n({},t.feature,{geometry:e}):Zn(e)}function Zn(t){return"Feature"===t.type||"FeatureCollection"===t.type?t:{type:"Feature",properties:{},geometry:t}}var Un={toGeoJSON:function(t){return Vn(this,{type:"Point",coordinates:Bn(this.getLatLng(),t)})}};function qn(t,e){return new Dn(t,e)}kn.include(Un),Ln.include(Un),In.include(Un),Mn.include({toGeoJSON:function(t){var e=!hn(this._latlngs),n=Fn(this._latlngs,e?1:0,!1,t);return Vn(this,{type:(e?"Multi":"")+"LineString",coordinates:n})}}),zn.include({toGeoJSON:function(t){var e=!hn(this._latlngs),n=e&&!hn(this._latlngs[0]),i=Fn(this._latlngs,n?2:e?1:0,!0,t);return e||(i=[i]),Vn(this,{type:(n?"Multi":"")+"Polygon",coordinates:i})}}),Cn.include({toMultiPoint:function(t){var e=[];return this.eachLayer(function(n){e.push(n.toGeoJSON(t).geometry.coordinates)}),Vn(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(t){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===e)return this.toMultiPoint(t);var n="GeometryCollection"===e,i=[];return this.eachLayer(function(e){if(e.toGeoJSON){var r=e.toGeoJSON(t);if(n)i.push(r.geometry);else{var o=Zn(r);"FeatureCollection"===o.type?i.push.apply(i,o.features):i.push(o)}}}),n?Vn(this,{geometries:i,type:"GeometryCollection"}):{type:"FeatureCollection",features:i}}});var Hn=qn,Gn=En.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,n){this._url=t,this._bounds=N(e),f(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ke(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Ce(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&Pe(this._image),this},bringToBack:function(){return this._map&&Se(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=N(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t="IMG"===this._url.tagName,e=this._image=t?this._url:Ee("img");ke(e,"leaflet-image-layer"),this._zoomAnimated&&ke(e,"leaflet-zoom-animated"),this.options.className&&ke(e,this.options.className),e.onselectstart=l,e.onmousemove=l,e.onload=r(this.fire,this,"load"),e.onerror=r(this._overlayOnError,this,"error"),this.options.crossOrigin&&(e.crossOrigin=""),this.options.zIndex&&this._updateZIndex(),t?this._url=e.src:(e.src=this._url,e.alt=this.options.alt)},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;De(this._image,n,e)},_reset:function(){var t=this._image,e=new D(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=e.getSize();Re(t,e.min),t.style.width=n.x+"px",t.style.height=n.y+"px"},_updateOpacity:function(){Me(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)}}),Wn=Gn.extend({options:{autoplay:!0,loop:!0},_initImage:function(){var t="VIDEO"===this._url.tagName,e=this._image=t?this._url:Ee("video");if(ke(e,"leaflet-image-layer"),this._zoomAnimated&&ke(e,"leaflet-zoom-animated"),e.onselectstart=l,e.onmousemove=l,e.onloadeddata=r(this.fire,this,"load"),t){for(var n=e.getElementsByTagName("source"),i=[],o=0;o<n.length;o++)i.push(n[o].src);this._url=n.length>0?i:[e.src]}else{g(this._url)||(this._url=[this._url]),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop;for(var a=0;a<this._url.length;a++){var s=Ee("source");s.src=this._url[a],e.appendChild(s)}}}}),Kn=En.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(t,e){f(this,t),this._source=e},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&Me(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&Me(this._container,1),this.bringToFront()},onRemove:function(t){t._fadeAnimated?(Me(this._container,0),this._removeTimeout=setTimeout(r(Ce,void 0,this._container),200)):Ce(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=F(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Pe(this._container),this},bringToBack:function(){return this._map&&Se(this._container),this},_updateContent:function(){if(this._content){var t=this._contentNode,e="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof e)t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=z(this.options.offset),n=this._getAnchor();this._zoomAnimated?Re(this._container,t.add(n)):e=e.add(t).add(n);var i=this._containerBottom=-e.y,r=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=i+"px",this._container.style.left=r+"px"}},_getAnchor:function(){return[0,0]}}),Xn=Kn.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t.openPopup(this),this},onAdd:function(t){Kn.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof An||this._source.on("preclick",$t))},onRemove:function(t){Kn.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof An||this._source.off("preclick",$t))},getEvents:function(){var t=Kn.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t="leaflet-popup",e=this._container=Ee("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),n=this._wrapper=Ee("div",t+"-content-wrapper",e);if(this._contentNode=Ee("div",t+"-content",n),ee(n),te(this._contentNode),Kt(n,"contextmenu",$t),this._tipContainer=Ee("div",t+"-tip-container",e),this._tip=Ee("div",t+"-tip",this._tipContainer),this.options.closeButton){var i=this._closeButton=Ee("a",t+"-close-button",e);i.href="#close",i.innerHTML="&#215;",Kt(i,"click",this._onCloseButtonClick,this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var n=t.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),e.width=n+1+"px",e.whiteSpace="",e.height="";var i=this.options.maxHeight;i&&t.offsetHeight>i?(e.height=i+"px",ke(t,"leaflet-popup-scrolled")):Ae(t,"leaflet-popup-scrolled"),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),n=this._getAnchor();Re(this._container,e.add(n))},_adjustPan:function(){if(!(!this.options.autoPan||this._map._panAnim&&this._map._panAnim._inProgress)){var t=this._map,e=parseInt(we(this._container,"marginBottom"),10)||0,n=this._container.offsetHeight+e,i=this._containerWidth,r=new I(this._containerLeft,-n-this._containerBottom);r._add(je(this._container));var o=t.layerPointToContainerPoint(r),a=z(this.options.autoPanPadding),s=z(this.options.autoPanPaddingTopLeft||a),u=z(this.options.autoPanPaddingBottomRight||a),l=t.getSize(),c=0,p=0;o.x+i+u.x>l.x&&(c=o.x+i-l.x+u.x),o.x-c-s.x<0&&(c=o.x-s.x),o.y+n+u.y>l.y&&(p=o.y+n-l.y+u.y),o.y-p-s.y<0&&(p=o.y-s.y),(c||p)&&t.fire("autopanstart").panBy([c,p])}},_onCloseButtonClick:function(t){this._close(),ie(t)},_getAnchor:function(){return z(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}});He.mergeOptions({closePopupOnClick:!0}),He.include({openPopup:function(t,e,n){return t instanceof Xn||(t=new Xn(n).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=t,this.addLayer(t))},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&this.removeLayer(t),this}}),En.include({bindPopup:function(t,e){return t instanceof Xn?(f(t,e),this._popup=t,t._source=this):(this._popup&&!e||(this._popup=new Xn(e,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t,e){if(t instanceof En||(e=t,t=this),t instanceof On)for(var n in this._layers){t=this._layers[n];break}return e||(e=t.getCenter?t.getCenter():t.getLatLng()),this._popup&&this._map&&(this._popup._source=t,this._popup.update(),this._map.openPopup(this._popup,e)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(t){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(t)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){var e=t.layer||t.target;this._popup&&this._map&&(ie(t),e instanceof An?this.openPopup(t.layer||t.target,t.latlng):this._map.hasLayer(this._popup)&&this._popup._source===e?this.closePopup():this.openPopup(e,t.latlng))},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){13===t.originalEvent.keyCode&&this._openPopup(t)}});var Jn=Kn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(t){Kn.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(t){Kn.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var t=Kn.prototype.getEvents.call(this);return wt&&!this.options.permanent&&(t.preclick=this._close),t},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){this._contentNode=this._container=Ee("div","leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e=this._map,n=this._container,i=e.latLngToContainerPoint(e.getCenter()),r=e.layerPointToContainerPoint(t),o=this.options.direction,a=n.offsetWidth,s=n.offsetHeight,u=z(this.options.offset),l=this._getAnchor();"top"===o?t=t.add(z(-a/2+u.x,-s+u.y+l.y,!0)):"bottom"===o?t=t.subtract(z(a/2-u.x,-u.y,!0)):"center"===o?t=t.subtract(z(a/2+u.x,s/2-l.y+u.y,!0)):"right"===o||"auto"===o&&r.x<i.x?(o="right",t=t.add(z(u.x+l.x,l.y-s/2+u.y,!0))):(o="left",t=t.subtract(z(a+l.x-u.x,s/2-l.y-u.y,!0))),Ae(n,"leaflet-tooltip-right"),Ae(n,"leaflet-tooltip-left"),Ae(n,"leaflet-tooltip-top"),Ae(n,"leaflet-tooltip-bottom"),ke(n,"leaflet-tooltip-"+o),Re(n,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&Me(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return z(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}});He.include({openTooltip:function(t,e,n){return t instanceof Jn||(t=new Jn(n).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:this.addLayer(t)},closeTooltip:function(t){return t&&this.removeLayer(t),this}}),En.include({bindTooltip:function(t,e){return t instanceof Jn?(f(t,e),this._tooltip=t,t._source=this):(this._tooltip&&!e||(this._tooltip=new Jn(e,this)),this._tooltip.setContent(t)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(t||!this._tooltipHandlersAdded){var e=t?"off":"on",n={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),wt&&(n.click=this._openTooltip)),this[e](n),this._tooltipHandlersAdded=!t}},openTooltip:function(t,e){if(t instanceof En||(e=t,t=this),t instanceof On)for(var n in this._layers){t=this._layers[n];break}return e||(e=t.getCenter?t.getCenter():t.getLatLng()),this._tooltip&&this._map&&(this._tooltip._source=t,this._tooltip.update(),this._map.openTooltip(this._tooltip,e),this._tooltip.options.interactive&&this._tooltip._container&&(ke(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(Ae(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(t){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(t)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){this._tooltip&&this._map&&this.openTooltip(t.layer||t.target,this._tooltip.options.sticky?t.latlng:void 0)},_moveTooltip:function(t){var e,n,i=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(e=this._map.mouseEventToContainerPoint(t.originalEvent),n=this._map.containerPointToLayerPoint(e),i=this._map.layerPointToLatLng(n)),this._tooltip.setLatLng(i)}});var Yn=Pn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&"DIV"===t.tagName?t:document.createElement("div"),n=this.options;if(e.innerHTML=!1!==n.html?n.html:"",n.bgPos){var i=z(n.bgPos);e.style.backgroundPosition=-i.x+"px "+-i.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});Pn.Default=Sn;var Qn=En.extend({options:{tileSize:256,opacity:1,updateWhenIdle:gt,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){f(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),Ce(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Pe(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Se(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=s(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof I?t:new I(t,t)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e,n=this.getPane().children,i=-t(-1/0,1/0),r=0,o=n.length;r<o;r++)e=n[r].style.zIndex,n[r]!==this._container&&e&&(i=t(i,+e));isFinite(i)&&(this.options.zIndex=i+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!$){Me(this._container,this.options.opacity);var t=+new Date,e=!1,n=!1;for(var i in this._tiles){var r=this._tiles[i];if(r.current&&r.loaded){var o=Math.min(1,(t-r.loaded)/200);Me(r.el,o),o<1?e=!0:(r.active?n=!0:this._onOpaqueTile(r),r.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),e&&(P(this._fadeFrame),this._fadeFrame=O(this._updateOpacity,this))}},_onOpaqueTile:l,_initContainer:function(){this._container||(this._container=Ee("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(void 0!==t){for(var n in this._levels)this._levels[n].el.children.length||n===t?(this._levels[n].el.style.zIndex=e-Math.abs(t-n),this._onUpdateLevel(n)):(Ce(this._levels[n].el),this._removeTilesAtZoom(n),this._onRemoveLevel(n),delete this._levels[n]);var i=this._levels[t],r=this._map;return i||((i=this._levels[t]={}).el=Ee("div","leaflet-tile-container leaflet-zoom-animated",this._container),i.el.style.zIndex=e,i.origin=r.project(r.unproject(r.getPixelOrigin()),t).round(),i.zoom=t,this._setZoomTransform(i,r.getCenter(),r.getZoom()),this._onCreateLevel(i)),this._level=i,i}},_onUpdateLevel:l,_onRemoveLevel:l,_onCreateLevel:l,_pruneTiles:function(){if(this._map){var t,e,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom)this._removeAllTiles();else{for(t in this._tiles)(e=this._tiles[t]).retain=e.current;for(t in this._tiles)if((e=this._tiles[t]).current&&!e.active){var i=e.coords;this._retainParent(i.x,i.y,i.z,i.z-5)||this._retainChildren(i.x,i.y,i.z,i.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)Ce(this._levels[t].el),this._onRemoveLevel(t),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,n,i){var r=Math.floor(t/2),o=Math.floor(e/2),a=n-1,s=new I(+r,+o);s.z=+a;var u=this._tileCoordsToKey(s),l=this._tiles[u];return l&&l.active?(l.retain=!0,!0):(l&&l.loaded&&(l.retain=!0),a>i&&this._retainParent(r,o,a,i))},_retainChildren:function(t,e,n,i){for(var r=2*t;r<2*t+2;r++)for(var o=2*e;o<2*e+2;o++){var a=new I(r,o);a.z=n+1;var s=this._tileCoordsToKey(a),u=this._tiles[s];u&&u.active?u.retain=!0:(u&&u.loaded&&(u.retain=!0),n+1<i&&this._retainChildren(r,o,n+1,i))}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return void 0!==e.minNativeZoom&&t<e.minNativeZoom?e.minNativeZoom:void 0!==e.maxNativeZoom&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,n,i){var r=this._clampZoom(Math.round(e));(void 0!==this.options.maxZoom&&r>this.options.maxZoom||void 0!==this.options.minZoom&&r<this.options.minZoom)&&(r=void 0),i&&!(this.options.updateWhenZooming&&r!==this._tileZoom)||(this._tileZoom=r,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==r&&this._update(t),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var n in this._levels)this._setZoomTransform(this._levels[n],t,e)},_setZoomTransform:function(t,e,n){var i=this._map.getZoomScale(n,t.zoom),r=t.origin.multiplyBy(i).subtract(this._map._getNewPixelOrigin(e,n)).round();yt?De(t.el,r,i):Re(t.el,r)},_resetGrid:function(){var t=this._map,e=t.options.crs,n=this._tileSize=this.getTileSize(),i=this._tileZoom,r=this._map.getPixelWorldBounds(this._tileZoom);r&&(this._globalTileRange=this._pxBoundsToTileRange(r)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],i).x/n.x),Math.ceil(t.project([0,e.wrapLng[1]],i).x/n.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],i).y/n.x),Math.ceil(t.project([e.wrapLat[1],0],i).y/n.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(t){var e=this._map,n=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),i=e.getZoomScale(n,this._tileZoom),r=e.project(t,this._tileZoom).floor(),o=e.getSize().divideBy(2*i);return new D(r.subtract(o),r.add(o))},_update:function(t){var e=this._map;if(e){var n=this._clampZoom(e.getZoom());if(void 0===t&&(t=e.getCenter()),void 0!==this._tileZoom){var i=this._getTiledPixelBounds(t),r=this._pxBoundsToTileRange(i),o=r.getCenter(),a=[],s=this.options.keepBuffer,u=new D(r.getBottomLeft().subtract([s,-s]),r.getTopRight().add([s,-s]));if(!(isFinite(r.min.x)&&isFinite(r.min.y)&&isFinite(r.max.x)&&isFinite(r.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var l in this._tiles){var c=this._tiles[l].coords;c.z===this._tileZoom&&u.contains(new I(c.x,c.y))||(this._tiles[l].current=!1)}if(Math.abs(n-this._tileZoom)>1)this._setView(t,n);else{for(var p=r.min.y;p<=r.max.y;p++)for(var h=r.min.x;h<=r.max.x;h++){var f=new I(h,p);if(f.z=this._tileZoom,this._isValidTile(f)){var d=this._tiles[this._tileCoordsToKey(f)];d?d.current=!0:a.push(f)}}if(a.sort(function(t,e){return t.distanceTo(o)-e.distanceTo(o)}),0!==a.length){this._loading||(this._loading=!0,this.fire("loading"));var m=document.createDocumentFragment();for(h=0;h<a.length;h++)this._addTile(a[h],m);this._level.el.appendChild(m)}}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var n=this._globalTileRange;if(!e.wrapLng&&(t.x<n.min.x||t.x>n.max.x)||!e.wrapLat&&(t.y<n.min.y||t.y>n.max.y))return!1}if(!this.options.bounds)return!0;var i=this._tileCoordsToBounds(t);return N(this.options.bounds).overlaps(i)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,n=this.getTileSize(),i=t.scaleBy(n),r=i.add(n);return[e.unproject(i,t.z),e.unproject(r,t.z)]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),n=new j(e[0],e[1]);return this.options.noWrap||(n=this._map.wrapLatLngBounds(n)),n},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),n=new I(+e[0],+e[1]);return n.z=+e[2],n},_removeTile:function(t){var e=this._tiles[t];e&&(ot||e.el.setAttribute("src",_),Ce(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){ke(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=l,t.onmousemove=l,$&&this.options.opacity<1&&Me(t,this.options.opacity),nt&&!it&&(t.style.WebkitBackfaceVisibility="hidden")},_addTile:function(t,e){var n=this._getTilePos(t),i=this._tileCoordsToKey(t),o=this.createTile(this._wrapCoords(t),r(this._tileReady,this,t));this._initTile(o),this.createTile.length<2&&O(r(this._tileReady,this,t,null,o)),Re(o,n),this._tiles[i]={el:o,coords:t,current:!0},e.appendChild(o),this.fire("tileloadstart",{tile:o,coords:t})},_tileReady:function(t,e,n){if(this._map){e&&this.fire("tileerror",{error:e,tile:n,coords:t});var i=this._tileCoordsToKey(t);(n=this._tiles[i])&&(n.loaded=+new Date,this._map._fadeAnimated?(Me(n.el,0),P(this._fadeFrame),this._fadeFrame=O(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),e||(ke(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),$||!this._map._fadeAnimated?O(this._pruneTiles,this):setTimeout(r(this._pruneTiles,this),250)))}},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new I(this._wrapX?u(t.x,this._wrapX):t.x,this._wrapY?u(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new D(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}}),$n=Qn.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(t,e){this._url=t,(e=f(this,e)).detectRetina&&Ot&&e.maxZoom>0&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom++):(e.zoomOffset++,e.maxZoom--),e.minZoom=Math.max(0,e.minZoom)),"string"==typeof e.subdomains&&(e.subdomains=e.subdomains.split("")),nt||this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url=t,e||this.redraw(),this},createTile:function(t,e){var n=document.createElement("img");return Kt(n,"load",r(this._tileOnLoad,this,e,n)),Kt(n,"error",r(this._tileOnError,this,e,n)),this.options.crossOrigin&&(n.crossOrigin=""),n.alt="",n.setAttribute("role","presentation"),n.src=this.getTileUrl(t),n},getTileUrl:function(t){var e={r:Ot?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var i=this._globalTileRange.max.y-t.y;this.options.tms&&(e.y=i),e["-y"]=i}return y(this._url,n(e,this.options))},_tileOnLoad:function(t,e){$?setTimeout(r(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,n){var i=this.options.errorTileUrl;i&&e.getAttribute("src")!==i&&(e.src=i),t(n,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom;return this.options.zoomReverse&&(t=this.options.maxZoom-t),t+this.options.zoomOffset},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)this._tiles[t].coords.z!==this._tileZoom&&((e=this._tiles[t].el).onload=l,e.onerror=l,e.complete||(e.src=_,Ce(e),delete this._tiles[t]))}});function ti(t,e){return new $n(t,e)}var ei=$n.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,e){this._url=t;var i=n({},this.defaultWmsParams);for(var r in e)r in this.options||(i[r]=e[r]);var o=(e=f(this,e)).detectRetina&&Ot?2:1,a=this.getTileSize();i.width=a.x*o,i.height=a.y*o,this.wmsParams=i},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version),this.wmsParams[this._wmsVersion>=1.3?"crs":"srs"]=this._crs.code,$n.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),n=this._crs,i=R(n.project(e[0]),n.project(e[1])),r=i.min,o=i.max,a=(this._wmsVersion>=1.3&&this._crs===xn?[r.y,r.x,o.y,o.x]:[r.x,r.y,o.x,o.y]).join(","),s=L.TileLayer.prototype.getTileUrl.call(this,t);return s+d(this.wmsParams,s,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+a},setParams:function(t,e){return n(this.wmsParams,t),e||this.redraw(),this}});$n.WMS=ei,ti.wms=function(t,e){return new ei(t,e)};var ni=En.extend({options:{padding:.1,tolerance:0},initialize:function(t){f(this,t),a(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&ke(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var n=this._map.getZoomScale(e,this._zoom),i=je(this._container),r=this._map.getSize().multiplyBy(.5+this.options.padding),o=this._map.project(this._center,e),a=this._map.project(t,e).subtract(o),s=r.multiplyBy(-n).add(i).add(r).subtract(a);yt?De(this._container,s,n):Re(this._container,s)},_reset:function(){for(var t in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),n=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new D(n,n.add(e.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),ii=ni.extend({getEvents:function(){var t=ni.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ni.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");Kt(t,"mousemove",s(this._onMouseMove,32,this),this),Kt(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Kt(t,"mouseout",this._handleMouseOut,this),this._ctx=t.getContext("2d")},_destroyContainer:function(){delete this._ctx,Ce(this._container),Jt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var t in this._redrawBounds=null,this._layers)this._layers[t]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){this._drawnLayers={},ni.prototype._update.call(this);var t=this._bounds,e=this._container,n=t.getSize(),i=Ot?2:1;Re(e,t.min),e.width=i*n.x,e.height=i*n.y,e.style.width=n.x+"px",e.style.height=n.y+"px",Ot&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){ni.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[a(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,n=e.next,i=e.prev;n?n.prev=i:this._drawLast=i,i?i.next=n:this._drawFirst=n,delete t._order,delete this._layers[L.stamp(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(t.options.dashArray){var e,n=t.options.dashArray.split(","),i=[];for(e=0;e<n.length;e++)i.push(Number(n[e]));t.options._dashArray=i}},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||O(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new D,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.clearRect(0,0,this._container.width,this._container.height)},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var n=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,n.x,n.y),this._ctx.clip()}this._drawing=!0;for(var i=this._drawFirst;i;i=i.next)t=i.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var n,i,r,o,a=t._parts,s=a.length,u=this._ctx;if(s){for(this._drawnLayers[t._leaflet_id]=t,u.beginPath(),n=0;n<s;n++){for(i=0,r=a[n].length;i<r;i++)o=a[n][i],u[i?"lineTo":"moveTo"](o.x,o.y);e&&u.closePath()}this._fillStroke(u,t)}}},_updateCircle:function(t){if(this._drawing&&!t._empty()){var e=t._point,n=this._ctx,i=Math.max(Math.round(t._radius),1),r=(Math.max(Math.round(t._radiusY),1)||i)/i;this._drawnLayers[t._leaflet_id]=t,1!==r&&(n.save(),n.scale(1,r)),n.beginPath(),n.arc(e.x,e.y/r,i,0,2*Math.PI,!1),1!==r&&n.restore(),this._fillStroke(n,t)}},_fillStroke:function(t,e){var n=e.options;n.fill&&(t.globalAlpha=n.fillOpacity,t.fillStyle=n.fillColor||n.color,t.fill(n.fillRule||"evenodd")),n.stroke&&0!==n.weight&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=n.opacity,t.lineWidth=n.weight,t.strokeStyle=n.color,t.lineCap=n.lineCap,t.lineJoin=n.lineJoin,t.stroke())},_onClick:function(t){for(var e,n,i=this._map.mouseEventToLayerPoint(t),r=this._drawFirst;r;r=r.next)(e=r.layer).options.interactive&&e._containsPoint(i)&&!this._map._draggableMoved(e)&&(n=e);n&&(le(t),this._fireEvent([n],t))},_onMouseMove:function(t){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(Ae(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null)},_handleMouseHover:function(t,e){for(var n,i,r=this._drawFirst;r;r=r.next)(n=r.layer).options.interactive&&n._containsPoint(e)&&(i=n);i!==this._hoveredLayer&&(this._handleMouseOut(t),i&&(ke(this._container,"leaflet-interactive"),this._fireEvent([i],t,"mouseover"),this._hoveredLayer=i)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],t)},_fireEvent:function(t,e,n){this._map._fireDOMEvent(e,n||e.type,t)},_bringToFront:function(t){var e=t._order,n=e.next,i=e.prev;n&&(n.prev=i,i?i.next=n:n&&(this._drawFirst=n),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t))},_bringToBack:function(t){var e=t._order,n=e.next,i=e.prev;i&&(i.next=n,n?n.prev=i:i&&(this._drawLast=i),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t))}});function ri(t){return Pt?new ii(t):null}var oi=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),ai={_initContainer:function(){this._container=Ee("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ni.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=oi("shape");ke(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=oi("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[a(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;Ce(e),t.removeInteractiveTarget(e),delete this._layers[a(t)]},_updateStyle:function(t){var e=t._stroke,n=t._fill,i=t.options,r=t._container;r.stroked=!!i.stroke,r.filled=!!i.fill,i.stroke?(e||(e=t._stroke=oi("stroke")),r.appendChild(e),e.weight=i.weight+"px",e.color=i.color,e.opacity=i.opacity,e.dashStyle=i.dashArray?g(i.dashArray)?i.dashArray.join(" "):i.dashArray.replace(/( *, *)/g," "):"",e.endcap=i.lineCap.replace("butt","flat"),e.joinstyle=i.lineJoin):e&&(r.removeChild(e),t._stroke=null),i.fill?(n||(n=t._fill=oi("fill")),r.appendChild(n),n.color=i.fillColor||i.color,n.opacity=i.fillOpacity):n&&(r.removeChild(n),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),n=Math.round(t._radius),i=Math.round(t._radiusY||n);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+n+","+i+" 0,23592600")},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){Pe(t._container)},_bringToBack:function(t){Se(t._container)}},si=Tt?oi:X,ui=ni.extend({getEvents:function(){var t=ni.prototype.getEvents.call(this);return t.zoomstart=this._onZoomStart,t},_initContainer:function(){this._container=si("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=si("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Ce(this._container),Jt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_onZoomStart:function(){this._update()},_update:function(){if(!this._map._animatingZoom||!this._bounds){ni.prototype._update.call(this);var t=this._bounds,e=t.getSize(),n=this._container;this._svgSize&&this._svgSize.equals(e)||(this._svgSize=e,n.setAttribute("width",e.x),n.setAttribute("height",e.y)),Re(n,t.min),n.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=si("path");t.options.className&&ke(e,t.options.className),t.options.interactive&&ke(e,"leaflet-interactive"),this._updateStyle(t),this._layers[a(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){Ce(t._path),t.removeInteractiveTarget(t._path),delete this._layers[a(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,n=t.options;e&&(n.stroke?(e.setAttribute("stroke",n.color),e.setAttribute("stroke-opacity",n.opacity),e.setAttribute("stroke-width",n.weight),e.setAttribute("stroke-linecap",n.lineCap),e.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?e.setAttribute("stroke-dasharray",n.dashArray):e.removeAttribute("stroke-dasharray"),n.dashOffset?e.setAttribute("stroke-dashoffset",n.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),n.fill?(e.setAttribute("fill",n.fillColor||n.color),e.setAttribute("fill-opacity",n.fillOpacity),e.setAttribute("fill-rule",n.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,J(t._parts,e))},_updateCircle:function(t){var e=t._point,n=Math.max(Math.round(t._radius),1),i="a"+n+","+(Math.max(Math.round(t._radiusY),1)||n)+" 0 1,0 ",r=t._empty()?"M0 0":"M"+(e.x-n)+","+e.y+i+2*n+",0 "+i+2*-n+",0 ";this._setPath(t,r)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){Pe(t._path)},_bringToBack:function(t){Se(t._path)}});function li(t){return St||Tt?new ui(t):null}Tt&&ui.include(ai),He.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this.options.preferCanvas&&ri()||li()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if("overlayPane"===t||void 0===t)return!1;var e=this._paneRenderers[t];return void 0===e&&(e=ui&&li({pane:t})||ii&&ri({pane:t}),this._paneRenderers[t]=e),e}});var ci=zn.extend({initialize:function(t,e){zn.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return[(t=N(t)).getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});ui.create=si,ui.pointsToPath=J,Dn.geometryToLayer=Rn,Dn.coordsToLatLng=jn,Dn.coordsToLatLngs=Nn,Dn.latLngToCoords=Bn,Dn.latLngsToCoords=Fn,Dn.getFeature=Vn,Dn.asFeature=Zn,He.mergeOptions({boxZoom:!0});var pi=Qe.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){Kt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Jt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Ce(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||1!==t.which&&1!==t.button)return!1;this._clearDeferredResetState(),this._resetState(),he(),Be(),this._startPoint=this._map.mouseEventToContainerPoint(t),Kt(document,{contextmenu:ie,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=Ee("div","leaflet-zoom-box",this._container),ke(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new D(this._point,this._startPoint),n=e.getSize();Re(this._box,e.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(Ce(this._box),Ae(this._container,"leaflet-crosshair")),fe(),Fe(),Jt(document,{contextmenu:ie,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if((1===t.which||1===t.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(r(this._resetState,this),0);var e=new j(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){27===t.keyCode&&this._finish()}});He.addInitHook("addHandler","boxZoom",pi),He.mergeOptions({doubleClickZoom:!0});var hi=Qe.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,n=e.getZoom(),i=e.options.zoomDelta,r=t.originalEvent.shiftKey?n-i:n+i;"center"===e.options.doubleClickZoom?e.setZoom(r):e.setZoomAround(t.containerPoint,r)}});He.addInitHook("addHandler","doubleClickZoom",hi),He.mergeOptions({dragging:!0,inertia:!it,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var fi=Qe.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new on(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}ke(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Ae(this._map._container,"leaflet-grab"),Ae(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=N(this._map.options.maxBounds);this._offsetLimit=R(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(e),this._prunePositions(e)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),n=this._initialWorldOffset,i=this._draggable._newPos.x,r=(i-e+n)%t+e-n,o=(i+e+n)%t-e-n,a=Math.abs(r+n)<Math.abs(o+n)?r:o;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=a},_onDragEnd:function(t){var e=this._map,n=e.options,i=!n.inertia||this._times.length<2;if(e.fire("dragend",t),i)e.fire("moveend");else{this._prunePositions(+new Date);var r=this._lastPos.subtract(this._positions[0]),o=n.easeLinearity,a=r.multiplyBy(o/((this._lastTime-this._times[0])/1e3)),s=a.distanceTo([0,0]),u=Math.min(n.inertiaMaxSpeed,s),l=a.multiplyBy(u/s),c=u/(n.inertiaDeceleration*o),p=l.multiplyBy(-c/2).round();p.x||p.y?(p=e._limitOffset(p,e.options.maxBounds),O(function(){e.panBy(p,{duration:c,easeLinearity:o,noMoveStart:!0,animate:!0})})):e.fire("moveend")}}});He.addInitHook("addHandler","dragging",fi),He.mergeOptions({keyboard:!0,keyboardPanDelta:80});var di=Qe.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),Kt(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Jt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,n=t.scrollTop||e.scrollTop,i=t.scrollLeft||e.scrollLeft;this._map._container.focus(),window.scrollTo(i,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e,n,i=this._panKeys={},r=this.keyCodes;for(e=0,n=r.left.length;e<n;e++)i[r.left[e]]=[-1*t,0];for(e=0,n=r.right.length;e<n;e++)i[r.right[e]]=[t,0];for(e=0,n=r.down.length;e<n;e++)i[r.down[e]]=[0,t];for(e=0,n=r.up.length;e<n;e++)i[r.up[e]]=[0,-1*t]},_setZoomDelta:function(t){var e,n,i=this._zoomKeys={},r=this.keyCodes;for(e=0,n=r.zoomIn.length;e<n;e++)i[r.zoomIn[e]]=t;for(e=0,n=r.zoomOut.length;e<n;e++)i[r.zoomOut[e]]=-t},_addHooks:function(){Kt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Jt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e,n=t.keyCode,i=this._map;if(n in this._panKeys){if(i._panAnim&&i._panAnim._inProgress)return;e=this._panKeys[n],t.shiftKey&&(e=z(e).multiplyBy(3)),i.panBy(e),i.options.maxBounds&&i.panInsideBounds(i.options.maxBounds)}else if(n in this._zoomKeys)i.setZoom(i.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[n]);else{if(27!==n||!i._popup||!i._popup.options.closeOnEscapeKey)return;i.closePopup()}ie(t)}}});He.addInitHook("addHandler","keyboard",di),He.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var mi=Qe.extend({addHooks:function(){Kt(this._map._container,"mousewheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Jt(this._map._container,"mousewheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=ae(t),n=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var i=Math.max(n-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(r(this._performZoom,this),i),ie(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),n=this._map.options.zoomSnap||0;t._stop();var i=4*Math.log(2/(1+Math.exp(-Math.abs(this._delta/(4*this._map.options.wheelPxPerZoomLevel)))))/Math.LN2,r=n?Math.ceil(i/n)*n:i,o=t._limitZoom(e+(this._delta>0?r:-r))-e;this._delta=0,this._startTime=null,o&&("center"===t.options.scrollWheelZoom?t.setZoom(e+o):t.setZoomAround(this._lastMousePos,e+o))}});He.addInitHook("addHandler","scrollWheelZoom",mi),He.mergeOptions({tap:!0,tapTolerance:15});var yi=Qe.extend({addHooks:function(){Kt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Jt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(ne(t),this._fireClick=!0,t.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var e=t.touches[0],n=e.target;this._startPos=this._newPos=new I(e.clientX,e.clientY),n.tagName&&"a"===n.tagName.toLowerCase()&&ke(n,"leaflet-active"),this._holdTimeout=setTimeout(r(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",e))},this),1e3),this._simulateEvent("mousedown",e),Kt(document,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),Jt(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&t&&t.changedTouches){var e=t.changedTouches[0],n=e.target;n&&n.tagName&&"a"===n.tagName.toLowerCase()&&Ae(n,"leaflet-active"),this._simulateEvent("mouseup",e),this._isTapValid()&&this._simulateEvent("click",e)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new I(e.clientX,e.clientY),this._simulateEvent("mousemove",e)},_simulateEvent:function(t,e){var n=document.createEvent("MouseEvents");n._simulated=!0,e.target._simulatedClick=!0,n.initMouseEvent(t,!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(n)}});wt&&!xt&&He.addInitHook("addHandler","tap",yi),He.mergeOptions({touchZoom:wt&&!it,bounceAtZoomLimits:!0});var gi=Qe.extend({addHooks:function(){ke(this._map._container,"leaflet-touch-zoom"),Kt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Ae(this._map._container,"leaflet-touch-zoom"),Jt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&!e._animatingZoom&&!this._zooming){var n=e.mouseEventToContainerPoint(t.touches[0]),i=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),"center"!==e.options.touchZoom&&(this._pinchStartLatLng=e.containerPointToLatLng(n.add(i)._divideBy(2))),this._startDist=n.distanceTo(i),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),Kt(document,"touchmove",this._onTouchMove,this),Kt(document,"touchend",this._onTouchEnd,this),ne(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var e=this._map,n=e.mouseEventToContainerPoint(t.touches[0]),i=e.mouseEventToContainerPoint(t.touches[1]),o=n.distanceTo(i)/this._startDist;if(this._zoom=e.getScaleZoom(o,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&o<1||this._zoom>e.getMaxZoom()&&o>1)&&(this._zoom=e._limitZoom(this._zoom)),"center"===e.options.touchZoom){if(this._center=this._startLatLng,1===o)return}else{var a=n._add(i)._divideBy(2)._subtract(this._centerPoint);if(1===o&&0===a.x&&0===a.y)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(a),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),P(this._animRequest);var s=r(e._move,e,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=O(s,this,!0),ne(t)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,P(this._animRequest),Jt(document,"touchmove",this._onTouchMove),Jt(document,"touchend",this._onTouchEnd),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});He.addInitHook("addHandler","touchZoom",gi),He.BoxZoom=pi,He.DoubleClickZoom=hi,He.Drag=fi,He.Keyboard=di,He.ScrollWheelZoom=mi,He.Tap=yi,He.TouchZoom=gi;var vi=window.L;window.L=t,Object.freeze=e,t.version="1.3.1",t.noConflict=function(){return window.L=vi,this},t.Control=Ge,t.control=We,t.Browser=At,t.Evented=A,t.Mixin=tn,t.Util=S,t.Class=T,t.Handler=Qe,t.extend=n,t.bind=r,t.stamp=a,t.setOptions=f,t.DomEvent=ge,t.DomUtil=Ue,t.PosAnimation=qe,t.Draggable=on,t.LineUtil=dn,t.PolyUtil=yn,t.Point=I,t.point=z,t.Bounds=D,t.bounds=R,t.Transformation=H,t.transformation=G,t.Projection=_n,t.LatLng=B,t.latLng=F,t.LatLngBounds=j,t.latLngBounds=N,t.CRS=Z,t.GeoJSON=Dn,t.geoJSON=qn,t.geoJson=Hn,t.Layer=En,t.LayerGroup=Cn,t.layerGroup=function(t,e){return new Cn(t,e)},t.FeatureGroup=On,t.featureGroup=function(t){return new On(t)},t.ImageOverlay=Gn,t.imageOverlay=function(t,e,n){return new Gn(t,e,n)},t.VideoOverlay=Wn,t.videoOverlay=function(t,e,n){return new Wn(t,e,n)},t.DivOverlay=Kn,t.Popup=Xn,t.popup=function(t,e){return new Xn(t,e)},t.Tooltip=Jn,t.tooltip=function(t,e){return new Jn(t,e)},t.Icon=Pn,t.icon=function(t){return new Pn(t)},t.DivIcon=Yn,t.divIcon=function(t){return new Yn(t)},t.Marker=kn,t.marker=function(t,e){return new kn(t,e)},t.TileLayer=$n,t.tileLayer=ti,t.GridLayer=Qn,t.gridLayer=function(t){return new Qn(t)},t.SVG=ui,t.svg=li,t.Renderer=ni,t.Canvas=ii,t.canvas=ri,t.Path=An,t.CircleMarker=In,t.circleMarker=function(t,e){return new In(t,e)},t.Circle=Ln,t.circle=function(t,e,n){return new Ln(t,e,n)},t.Polyline=Mn,t.polyline=function(t,e){return new Mn(t,e)},t.Polygon=zn,t.polygon=function(t,e){return new zn(t,e)},t.Rectangle=ci,t.rectangle=function(t,e){return new ci(t,e)},t.Map=He,t.map=function(t,e){return new He(t,e)}}(e)},dYwu:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("LMZF"),r=(n("iWCm"),n("H6Ze"),function(){function t(t,e,n){this.layer=t,this.name=e,this.layersControlProvider=n,this.layersControlProvider.ref.addBaseLayer(this.layer.ref,e)}return t.prototype.ngOnDestroy=function(){this.layersControlProvider.ref.removeLayer(this.layer.ref)},t.decorators=[{type:i.Directive,args:[{selector:"[yaga-base-layer]"}]}],t}());e.BaseLayerDirective=r},"dmC+":function(t,e,n){"use strict";e.a=function(t,e){return Object(i.a)(t,e)(this)};var i=n("qqDE")},eaoh:function(t,e,n){"use strict";var i=n("LMZF"),r=(n("kP2E"),n("LMZF")),o="undefined"!=typeof window?window:this;e.DevToolsExtension=function(){function t(t,e){var n=this;this.appRef=t,this.ngRedux=e,this.enhancer=function(t){var e;return n.isEnabled()?(o.devToolsExtension.listen(function(t){var i=t.type;"START"===i?e=n.ngRedux.subscribe(function(){r.NgZone.isInAngularZone()||n.appRef.tick()}):"STOP"===i&&e()}),o.devToolsExtension(t)):null}}return t.prototype.isEnabled=function(){return o&&o.devToolsExtension},t.decorators=[{type:i.Injectable}],t}()},eoFs:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"BehaviorSubject",function(){return a});var i=n("6Xbx"),r=n("TO51"),o=n("Upor"),a=function(t){function e(e){t.call(this),this._value=e}return Object(i.c)(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(e){var n=t.prototype._subscribe.call(this,e);return n&&!n.closed&&e.next(this._value),n},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new o.a;return this._value},e.prototype.next=function(e){t.prototype.next.call(this,this._value=e)},e}(r.a)},fRUx:function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},"fgj+":function(t,e,n){"use strict";var i=n("6Xbx"),r=n("1j/l"),o=n("kQVV"),a=n("mHG6"),s=n("KRwF"),u=n("xIGM"),l=n("AP4T"),c=n("X3fp"),p=function(t){function e(e,n){if(t.call(this),this.scheduler=n,null==e)throw new Error("iterator cannot be null.");this.iterator=d(e)}return Object(i.c)(e,t),e.create=function(t,n){return new e(t,n)},e.dispatch=function(t){var e=t.index,n=t.iterator,i=t.subscriber;if(t.hasError)i.error(t.error);else{var r=n.next();r.done?i.complete():(i.next(r.value),t.index=e+1,i.closed?"function"==typeof n.return&&n.return():this.schedule(t))}},e.prototype._subscribe=function(t){var n=this.iterator,i=this.scheduler;if(i)return i.schedule(e.dispatch,0,{index:0,iterator:n,subscriber:t});for(;;){var r=n.next();if(r.done){t.complete();break}if(t.next(r.value),t.closed){"function"==typeof n.return&&n.return();break}}},e}(l.Observable),h=function(){function t(t,e,n){void 0===e&&(e=0),void 0===n&&(n=t.length),this.str=t,this.idx=e,this.len=n}return t.prototype[c.a]=function(){return this},t.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.str.charAt(this.idx++)}:{done:!0,value:void 0}},t}(),f=function(){function t(t,e,n){void 0===e&&(e=0),void 0===n&&(n=function(e){var n,i,r=+t.length;return isNaN(r)?0:0!==r&&"number"==typeof(n=r)&&u.a.isFinite(n)?(r=(0==(i=+r)?i:isNaN(i)?i:i<0?-1:1)*Math.floor(Math.abs(r)))<=0?0:r>m?m:r:r}()),this.arr=t,this.idx=e,this.len=n}return t.prototype[c.a]=function(){return this},t.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.arr[this.idx++]}:{done:!0,value:void 0}},t}();function d(t){var e=t[c.a];if(!e&&"string"==typeof t)return new h(t);if(!e&&void 0!==t.length)return new f(t);if(!e)throw new TypeError("object is not iterable");return t[c.a]()}var m=Math.pow(2,53)-1,y=n("Oryw"),g=n("8Ut3"),v=n("Ecq+"),_=function(t){function e(e,n){t.call(this),this.arrayLike=e,this.scheduler=n,n||1!==e.length||(this._isScalar=!0,this.value=e[0])}return Object(i.c)(e,t),e.create=function(t,n){var i=t.length;return 0===i?new v.a:1===i?new g.a(t[0],n):new e(t,n)},e.dispatch=function(t){var e=t.arrayLike,n=t.index,i=t.subscriber;i.closed||(n>=t.length?i.complete():(i.next(e[n]),t.index=n+1,this.schedule(t)))},e.prototype._subscribe=function(t){var n=this.arrayLike,i=this.scheduler,r=n.length;if(i)return i.schedule(e.dispatch,0,{arrayLike:n,index:0,length:r,subscriber:t});for(var o=0;o<r&&!t.closed;o++)t.next(n[o]);t.complete()},e}(l.Observable),b=n("E9/g"),x=function(){function t(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}return t.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},t.prototype.do=function(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}},t.prototype.accept=function(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)},t.prototype.toObservable=function(){switch(this.kind){case"N":return l.Observable.of(this.value);case"E":return l.Observable.throw(this.error);case"C":return l.Observable.empty()}throw new Error("unexpected notification kind value")},t.createNext=function(e){return"undefined"!=typeof e?new t("N",e):t.undefinedValueNotification},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}(),w=function(t){function e(e,n,i){void 0===i&&(i=0),t.call(this,e),this.scheduler=n,this.delay=i}return Object(i.c)(e,t),e.dispatch=function(t){t.notification.observe(t.destination),this.unsubscribe()},e.prototype.scheduleMessage=function(t){this.add(this.scheduler.schedule(e.dispatch,this.delay,new E(t,this.destination)))},e.prototype._next=function(t){this.scheduleMessage(x.createNext(t))},e.prototype._error=function(t){this.scheduleMessage(x.createError(t))},e.prototype._complete=function(){this.scheduleMessage(x.createComplete())},e}(b.a),E=function(t,e){this.notification=t,this.destination=e},C=n("mz3w"),O=function(t){function e(e,n){t.call(this,null),this.ish=e,this.scheduler=n}return Object(i.c)(e,t),e.create=function(t,n){if(null!=t){if("function"==typeof t[C.a])return t instanceof l.Observable&&!n?t:new e(t,n);if(Object(r.a)(t))return new y.a(t,n);if(Object(a.a)(t))return new s.a(t,n);if("function"==typeof t[c.a]||"string"==typeof t)return new p(t,n);if(Object(o.a)(t))return new _(t,n)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")},e.prototype._subscribe=function(t){var e=this.ish,n=this.scheduler;return null==n?e[C.a]().subscribe(t):e[C.a]().subscribe(new w(t,n,0))},e}(l.Observable);n.d(e,"a",function(){return P});var P=O.create},gcIw:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n("LMZF"),a=n("cqO5"),s=(n("xHJr"),n("iWCm")),u=n("Qe4K");e.PolygonDirective=function(t){function e(e,n){var i=t.call(this,[])||this;return i.displayChange=new o.EventEmitter,i.strokeChange=new o.EventEmitter,i.colorChange=new o.EventEmitter,i.weightChange=new o.EventEmitter,i.opacityChange=new o.EventEmitter,i.lineCapChange=new o.EventEmitter,i.lineJoinChange=new o.EventEmitter,i.dashArrayChange=new o.EventEmitter,i.dashOffsetChange=new o.EventEmitter,i.fillChange=new o.EventEmitter,i.fillColorChange=new o.EventEmitter,i.fillOpacityChange=new o.EventEmitter,i.fillRuleChange=new o.EventEmitter,i.classNameChange=new o.EventEmitter,i.styleChange=new o.EventEmitter,i.latLngsChange=new o.EventEmitter,i.geoJSONChange=new o.EventEmitter,i.addEvent=new o.EventEmitter,i.removeEvent=new o.EventEmitter,i.popupopenEvent=new o.EventEmitter,i.popupcloseEvent=new o.EventEmitter,i.tooltipopenEvent=new o.EventEmitter,i.tooltipcloseEvent=new o.EventEmitter,i.clickEvent=new o.EventEmitter,i.dbclickEvent=new o.EventEmitter,i.mousedownEvent=new o.EventEmitter,i.mouseoverEvent=new o.EventEmitter,i.mouseoutEvent=new o.EventEmitter,i.contextmenuEvent=new o.EventEmitter,n.ref=i,i.feature=i.feature||{type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[]}},i.feature.properties=i.feature.properties||{},i.on("remove",function(){i.displayChange.emit(!1)}),i.on("add",function(){i.displayChange.emit(!0)}),e.ref.addLayer(i),i.on("add",function(t){i.addEvent.emit(t)}),i.on("remove",function(t){i.removeEvent.emit(t)}),i.on("popupopen",function(t){i.popupopenEvent.emit(t)}),i.on("popupclose",function(t){i.popupcloseEvent.emit(t)}),i.on("tooltipopen",function(t){i.tooltipopenEvent.emit(t)}),i.on("tooltipclose",function(t){i.tooltipcloseEvent.emit(t)}),i.on("click",function(t){i.clickEvent.emit(t)}),i.on("dbclick",function(t){i.dbclickEvent.emit(t)}),i.on("mousedown",function(t){i.mousedownEvent.emit(t)}),i.on("mouseover",function(t){i.mouseoverEvent.emit(t)}),i.on("mouseout",function(t){i.mouseoutEvent.emit(t)}),i.on("contextmenu",function(t){i.contextmenuEvent.emit(t)}),i}return r(e,t),e.prototype.ngOnDestroy=function(){this.removeFrom(this._map)},e.prototype.setLatLngs=function(e){return t.prototype.setLatLngs.call(this,e),this.latLngsChange.emit(this._latlngs),this.geoJSONChange.emit(this.geoJSON),this},e.prototype.addLatLng=function(e){return t.prototype.addLatLng.call(this,e),this.latLngsChange.emit(this._latlngs),this.geoJSONChange.emit(this.geoJSON),this},Object.defineProperty(e.prototype,"latLngs",{get:function(){return this._latlngs},set:function(t){this.setLatLngs(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"geoJSON",{get:function(){return this.toGeoJSON()},set:function(t){this.feature.properties=t.properties;var e=t.geometry.type;if("Polygon"!==e&&"MultiPolygon"!==e)throw new Error("Unsupported geometry type: "+e);this.setLatLngs(u.lng2lat(t.geometry.coordinates))},enumerable:!0,configurable:!0}),e.prototype.setStyle=function(e){return t.prototype.setStyle.call(this,e),e.hasOwnProperty("stroke")&&this.strokeChange.emit(e.stroke),e.hasOwnProperty("color")&&this.colorChange.emit(e.color),e.hasOwnProperty("weight")&&this.weightChange.emit(e.weight),e.hasOwnProperty("opacity")&&this.opacityChange.emit(e.opacity),e.hasOwnProperty("lineCap")&&this.lineCapChange.emit(e.lineCap),e.hasOwnProperty("lineJoin")&&this.lineJoinChange.emit(e.lineJoin),e.hasOwnProperty("dashArray")&&this.dashArrayChange.emit(e.dashArray),e.hasOwnProperty("dashOffset")&&this.dashOffsetChange.emit(e.dashOffset),e.hasOwnProperty("fill")&&this.fillChange.emit(e.fill),e.hasOwnProperty("fillColor")&&this.fillColorChange.emit(e.fillColor),e.hasOwnProperty("fillOpacity")&&this.fillOpacityChange.emit(e.fillOpacity),e.hasOwnProperty("fillRule")&&this.fillRuleChange.emit(e.fillRule),e.hasOwnProperty("className")&&this.classNameChange.emit(e.className),this.styleChange.emit(e),this},Object.defineProperty(e.prototype,"opacity",{get:function(){return this.options.opacity},set:function(t){this.setStyle({opacity:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stroke",{get:function(){return this.options.stroke},set:function(t){this.setStyle({stroke:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return this.options.color},set:function(t){this.setStyle({color:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"weight",{get:function(){return this.options.weight},set:function(t){this.setStyle({weight:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lineCap",{get:function(){return this.options.lineCap},set:function(t){this.setStyle({lineCap:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lineJoin",{get:function(){return this.options.lineJoin},set:function(t){this.setStyle({lineJoin:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dashArray",{get:function(){return this.options.dashArray},set:function(t){this.setStyle({dashArray:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dashOffset",{get:function(){return this.options.dashOffset},set:function(t){this.setStyle({dashOffset:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fill",{get:function(){return this.options.fill},set:function(t){this.setStyle({fill:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fillColor",{get:function(){return this.options.fillColor},set:function(t){this.setStyle({fillColor:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fillOpacity",{get:function(){return this.options.fillOpacity},set:function(t){this.setStyle({fillOpacity:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fillRule",{get:function(){return this.options.fillRule},set:function(t){this.setStyle({fillRule:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"className",{get:function(){return this.options.className},set:function(t){this.setStyle({className:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return this.options},set:function(t){this.setStyle(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"display",{get:function(){var t;try{t=this.getElement()}catch(t){return!1}return"none"!==t.style.display&&!!t.parentElement},set:function(t){if(this.display!==t){var e;try{e=this.getElement()}catch(t){return}this.displayChange.emit(t),e.style.display=t?"":"none"}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"interactive",{get:function(){return this.options.interactive},set:function(t){var e=this._map;this.options.interactive=t,this.onRemove(e),this.onAdd(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"smoothFactor",{get:function(){return this.options.smoothFactor},set:function(t){this.options.smoothFactor=t,this.redraw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"noClip",{get:function(){return this.options.noClip},set:function(t){this.options.noClip=t,this.redraw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"properties",{get:function(){return this.feature.properties},set:function(t){this.feature.properties=t,this.geoJSONChange.emit(this.geoJSON)},enumerable:!0,configurable:!0}),e.decorators=[{type:o.Directive,args:[{providers:[s.LayerProvider],selector:"yaga-polygon"}]}],e.propDecorators={displayChange:[{type:o.Output}],strokeChange:[{type:o.Output}],colorChange:[{type:o.Output}],weightChange:[{type:o.Output}],opacityChange:[{type:o.Output}],lineCapChange:[{type:o.Output}],lineJoinChange:[{type:o.Output}],dashArrayChange:[{type:o.Output}],dashOffsetChange:[{type:o.Output}],fillChange:[{type:o.Output}],fillColorChange:[{type:o.Output}],fillOpacityChange:[{type:o.Output}],fillRuleChange:[{type:o.Output}],classNameChange:[{type:o.Output}],styleChange:[{type:o.Output}],latLngsChange:[{type:o.Output}],geoJSONChange:[{type:o.Output}],addEvent:[{type:o.Output,args:["add"]}],removeEvent:[{type:o.Output,args:["remove"]}],popupopenEvent:[{type:o.Output,args:["popupopen"]}],popupcloseEvent:[{type:o.Output,args:["popupclose"]}],tooltipopenEvent:[{type:o.Output,args:["tooltipopen"]}],tooltipcloseEvent:[{type:o.Output,args:["tooltipclose"]}],clickEvent:[{type:o.Output,args:["click"]}],dbclickEvent:[{type:o.Output,args:["dbclick"]}],mousedownEvent:[{type:o.Output,args:["mousedown"]}],mouseoverEvent:[{type:o.Output,args:["mouseover"]}],mouseoutEvent:[{type:o.Output,args:["mouseout"]}],contextmenuEvent:[{type:o.Output,args:["contextmenu"]}],latLngs:[{type:o.Input}],geoJSON:[{type:o.Input}],opacity:[{type:o.Input}],stroke:[{type:o.Input}],color:[{type:o.Input}],weight:[{type:o.Input}],lineCap:[{type:o.Input}],lineJoin:[{type:o.Input}],dashArray:[{type:o.Input}],dashOffset:[{type:o.Input}],fill:[{type:o.Input}],fillColor:[{type:o.Input}],fillOpacity:[{type:o.Input}],fillRule:[{type:o.Input}],className:[{type:o.Input}],style:[{type:o.Input}],display:[{type:o.Input}],interactive:[{type:o.Input}],smoothFactor:[{type:o.Input}],noClip:[{type:o.Input}],properties:[{type:o.Input}]},e}(a.Polygon)},grVA:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i={closed:!0,next:function(t){},error:function(t){throw t},complete:function(){}}},hZMJ:function(t,e,n){"use strict";e.tassign=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return Object.assign.apply(Object,[{},t].concat(e))}},"iID+":function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n("LMZF"),a=n("cqO5"),s=n("xHJr"),u=n("iWCm");e.LayerGroupDirective=function(t){function e(e,n,i){var r=t.call(this)||this;return r.displayChange=new o.EventEmitter,r.addEvent=new o.EventEmitter,r.removeEvent=new o.EventEmitter,r.popupopenEvent=new o.EventEmitter,r.popupcloseEvent=new o.EventEmitter,r.tooltipopenEvent=new o.EventEmitter,r.tooltipcloseEvent=new o.EventEmitter,i.ref=r,n.ref=r,r.on("remove",function(){r._map=null,r.displayChange.emit(!1)}),r.on("add",function(){r.displayChange.emit(!0)}),r.addTo(e.ref),r.parentLayerGroup=e.ref,r.on("add",function(t){r.addEvent.emit(t)}),r.on("remove",function(t){r.removeEvent.emit(t)}),r.on("popupopen",function(t){r.popupopenEvent.emit(t)}),r.on("popupclose",function(t){r.popupcloseEvent.emit(t)}),r.on("tooltipopen",function(t){r.tooltipopenEvent.emit(t)}),r.on("tooltipclose",function(t){r.tooltipcloseEvent.emit(t)}),r}return r(e,t),e.prototype.ngOnDestroy=function(){this.removeFrom(this._map)},Object.defineProperty(e.prototype,"display",{get:function(){return!!this._map},set:function(t){t?this.addTo(this.parentLayerGroup):this.parentLayerGroup.removeLayer(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"attribution",{get:function(){return this.getAttribution()},set:function(t){this._map&&this._map.attributionControl&&(this._map.attributionControl.removeAttribution(this.getAttribution()),this._map.attributionControl.addAttribution(t)),this.options.attribution=t},enumerable:!0,configurable:!0}),e.decorators=[{type:o.Directive,args:[{providers:[s.LayerGroupProvider,u.LayerProvider],selector:"yaga-layer-group"}]}],e.propDecorators={displayChange:[{type:o.Output}],addEvent:[{type:o.Output,args:["add"]}],removeEvent:[{type:o.Output,args:["remove"]}],popupopenEvent:[{type:o.Output,args:["popupopen"]}],popupcloseEvent:[{type:o.Output,args:["popupclose"]}],tooltipopenEvent:[{type:o.Output,args:["tooltipopen"]}],tooltipcloseEvent:[{type:o.Output,args:["tooltipclose"]}],display:[{type:o.Input}],attribution:[{type:o.Input}]},e}(a.LayerGroup)},iWCm:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("LMZF");e.LayerProvider=function(){function t(){}return t.decorators=[{type:i.Injectable}],t}()},kP2E:function(t,e,n){"use strict";var i=n("AYro"),r=n("AP4T"),o=n("eoFs");n("GQSG"),n("Wi6i"),n("NdV9"),n("ABGK"),n("RSzd");var a=n("/UCc"),s=n("C0ll"),u=n("SBUM"),l=n("FScj"),c=["string","string[]","number","symbol","function"],p="Expected selector to be one of:\n    "+c.join(",")+". Instead recieved %s";e.NgRedux=function(){function t(e){var n=this;this.ngZone=e,this._store=null,this._store$=null,this.getState=function(){return n._store.getState()},this.subscribe=function(t){return n._store.subscribe(t)},this.replaceReducer=function(t){return n._store.replaceReducer(t)},this.dispatch=function(t){return u.invariant(!!n._store,"Dispatch failed: did you forget to configure your store? https://github.com/angular-redux/ng2-redux/blob/master/README.md#quick-start"),n.ngZone.run(function(){return n._store.dispatch(t)})},t.instance=this,this._store$=new o.BehaviorSubject(null).filter(function(t){return null!==t}).switchMap(function(t){return r.Observable.from(t)})}return t.prototype.configureStore=function(t,e,n,r){void 0===n&&(n=[]),void 0===r&&(r=[]),u.invariant(!this._store,"Store already configured!");var o=i.compose.apply(void 0,[i.applyMiddleware.apply(void 0,n)].concat(r))(i.createStore)(t,e);this.setStore(o)},t.prototype.provideStore=function(t){u.invariant(!this._store,"Store already configured!"),this.setStore(t)},t.prototype.select=function(t,e){if(!t)return this._store$.distinctUntilChanged(e);var n;u.invariant(c.indexOf(typeof(n=t),0)>=0||Array.isArray(n),p,t);var i=this._store$.distinctUntilChanged();return("string"==typeof t||"number"==typeof t||"symbol"==typeof t?i.map(function(e){return e[t]}):Array.isArray(t)?i.map(function(e){return l.getIn(e,t)}):i.map(t)).distinctUntilChanged(e)},t.prototype.getStateSlice=function(t,e){var n=e(t);return u.invariant(a.isPlainObject(n),"`mapStateToScope` must return an object. Instead received %s.",n),n},t.prototype.setStore=function(t){this._store=t,this._store$.next(t),this._defaultMapStateToTarget=function(){return{}},this._defaultMapDispatchToTarget=function(t){return{dispatch:t}};var e=s.omit(t,["dispatch","getState","subscribe","replaceReducer"]);Object.assign(this,e)},t}()},kQVV:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i=function(t){return t&&"number"==typeof t.length}},lBzb:function(t,e,n){"use strict";var i=n("kP2E");e.select=function(t,e){return function(n,r){var o=t;t||(o=r.lastIndexOf("$")===r.length-1?r.substring(0,r.length-1):r),delete n[r]&&Object.defineProperty(n,r,{get:function(){return i.NgRedux.instance.select(o,e)},enumerable:!0,configurable:!0})}}},lDEv:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("LMZF"),r=n("T4gT"),o=n("dYwu"),a=n("ZueS"),s=n("sVqU"),u=n("2e2V"),l=n("EaVi"),c=n("cVCx"),p=n("Omiv"),h=n("DUns"),f=n("iID+"),d=n("oaBb"),m=n("pMiS"),y=n("tZGc"),g=n("YVoR"),v=n("gcIw"),_=n("0iWC"),b=n("m9jR"),x=n("RbVA"),w=n("HZkj"),E=n("sKKA"),C=n("zV/f"),O=n("z6VO"),P=n("r20z");e.YagaModule=function(){function t(){}return t.decorators=[{type:i.NgModule,args:[{declarations:[r.AttributionControlDirective,a.CircleMarkerDirective,s.CircleDirective,u.DivIconDirective,l.FeatureGroupDirective,c.GeoJSONDirective,p.IconDirective,h.ImageOverlayDirective,f.LayerGroupDirective,d.LayersControlDirective,m.MapComponent,y.MarkerDirective,g.OverlayLayerDirective,v.PolygonDirective,_.PolylineDirective,b.PopupDirective,x.RectangleDirective,w.ScaleControlDirective,E.TileLayerDirective,C.TooltipDirective,O.WmsLayerDirective,P.ZoomControlDirective,o.BaseLayerDirective],exports:[r.AttributionControlDirective,a.CircleMarkerDirective,s.CircleDirective,u.DivIconDirective,l.FeatureGroupDirective,c.GeoJSONDirective,p.IconDirective,h.ImageOverlayDirective,f.LayerGroupDirective,d.LayersControlDirective,m.MapComponent,y.MarkerDirective,g.OverlayLayerDirective,v.PolygonDirective,_.PolylineDirective,b.PopupDirective,x.RectangleDirective,w.ScaleControlDirective,E.TileLayerDirective,C.TooltipDirective,O.WmsLayerDirective,P.ZoomControlDirective,o.BaseLayerDirective]}]}],t}()},lI6h:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i=n("6Xbx"),r=function(t){function e(){t.apply(this,arguments)}return Object(i.c)(e,t),e.prototype.notifyNext=function(t,e,n,i,r){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(n("E9/g").a)},m9jR:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n("LMZF"),a=n("cqO5");n("iWCm"),e.PopupDirective=function(t){function e(e,n){var i=t.call(this)||this;return i.layerProvider=n,i.contentChange=new o.EventEmitter,i.openedChange=new o.EventEmitter,i.latChange=new o.EventEmitter,i.lngChange=new o.EventEmitter,i.positionChange=new o.EventEmitter,i.openEvent=new o.EventEmitter,i.closeEvent=new o.EventEmitter,i.setContent(e.nativeElement),i.on("add",function(t){i.openEvent.emit(t),i.openedChange.emit(!0)}),i.on("remove",function(t){i.closeEvent.emit(t),i.openedChange.emit(!1)}),i.layerProvider.ref.bindPopup(i),i}return r(e,t),e.prototype.ngOnDestroy=function(){this._source&&this._source.unbindPopup()},e.prototype.setContent=function(e){return this.contentChange.emit(e),t.prototype.setContent.call(this,e)},Object.defineProperty(e.prototype,"content",{get:function(){return this.getContent()},set:function(t){this.setContent(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"opened",{get:function(){return!!this._map},set:function(t){t?this.layerProvider.ref.openPopup():this.layerProvider.ref.closePopup()},enumerable:!0,configurable:!0}),e.prototype.setLatLng=function(e){return t.prototype.setLatLng.call(this,e),this.latChange.emit(this.lat),this.lngChange.emit(this.lng),this.positionChange.emit(a.latLng(this.lat,this.lng)),this},Object.defineProperty(e.prototype,"lat",{get:function(){return this.getLatLng().lat},set:function(t){this.setLatLng([t,this.lng])},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lng",{get:function(){return this.getLatLng().lng},set:function(t){this.setLatLng([this.lat,t])},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this.getLatLng()},set:function(t){this.setLatLng(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxWidth",{get:function(){return this.options.maxWidth},set:function(t){this.options.maxWidth=t,this._updateLayout()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minWidth",{get:function(){return this.options.minWidth},set:function(t){this.options.minWidth=t,this._updateLayout()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxHeight",{get:function(){return this.options.maxHeight},set:function(t){this.options.maxHeight=t,this._updateLayout()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autoPan",{get:function(){return this.options.autoPan},set:function(t){this.options.autoPan=t,this._updateLayout()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autoPanPaddingTopLeft",{get:function(){return this.options.autoPanPaddingTopLeft},set:function(t){this.options.autoPanPaddingTopLeft=t,this._updateLayout()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autoPanPaddingBottomRight",{get:function(){return this.options.autoPanPaddingBottomRight},set:function(t){this.options.autoPanPaddingBottomRight=t,this._updateLayout()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autoPanPadding",{get:function(){return this.options.autoPanPadding},set:function(t){this.options.autoPanPadding=t,this._updateLayout()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"keepInView",{get:function(){return this.options.keepInView},set:function(t){this.options.keepInView=t,this._updateLayout()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"closeButton",{get:function(){return this.options.closeButton},set:function(t){this.options.closeButton=t,this._updateLayout()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autoClose",{get:function(){return this.options.autoClose},set:function(t){this.options.autoClose=t,this._updateLayout()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"className",{get:function(){return this.options.className},set:function(t){this.options.className=t,this._updateLayout()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pane",{get:function(){return this.options.pane},set:function(t){this.options.pane=t,this._updateLayout()},enumerable:!0,configurable:!0}),e.decorators=[{type:o.Directive,args:[{selector:"yaga-popup"}]}],e.propDecorators={contentChange:[{type:o.Output}],openedChange:[{type:o.Output}],latChange:[{type:o.Output}],lngChange:[{type:o.Output}],positionChange:[{type:o.Output}],openEvent:[{type:o.Output,args:["open"]}],closeEvent:[{type:o.Output,args:["close"]}],content:[{type:o.Input}],opened:[{type:o.Input}],lat:[{type:o.Input}],lng:[{type:o.Input}],position:[{type:o.Input}],maxWidth:[{type:o.Input}],minWidth:[{type:o.Input}],maxHeight:[{type:o.Input}],autoPan:[{type:o.Input}],autoPanPaddingTopLeft:[{type:o.Input}],autoPanPaddingBottomRight:[{type:o.Input}],autoPanPadding:[{type:o.Input}],keepInView:[{type:o.Input}],closeButton:[{type:o.Input}],autoClose:[{type:o.Input}],className:[{type:o.Input}],pane:[{type:o.Input}]},e}(a.Popup)},mHG6:function(t,e,n){"use strict";e.a=function(t){return t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}},mz3w:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i=function(t){var e,i=n("xIGM").a.Symbol;return"function"==typeof i?i.observable?e=i.observable:(e=i("observable"),i.observable=e):e="@@observable",e}()},nnmj:function(t,e,n){"use strict";var i=this&&this.__assign||Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t};Object.defineProperty(e,"__esModule",{value:!0}),e.enhanceMouseEvent=function(t,e){return i({containerPoint:e.mouseEventToContainerPoint(t),latlng:e.mouseEventToLatLng(t),layerPoint:e.mouseEventToLayerPoint(t)},t,{originalEvent:t})}},oaBb:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n("LMZF"),a=n("cqO5"),s=n("H6Ze"),u=(n("TB0K"),n("nnmj"));e.LayersControlDirective=function(t){function e(e,n){var i=t.call(this)||this;return i.displayChange=new o.EventEmitter,i.zIndexChange=new o.EventEmitter,i.positionChange=new o.EventEmitter,i.addEvent=new o.EventEmitter,i.removeEvent=new o.EventEmitter,i.clickEvent=new o.EventEmitter,i.dbclickEvent=new o.EventEmitter,i.mousedownEvent=new o.EventEmitter,i.mouseoverEvent=new o.EventEmitter,i.mouseoutEvent=new o.EventEmitter,n.ref=i,e.ref.addControl(i),i.getContainer().addEventListener("click",function(t){i.clickEvent.emit(u.enhanceMouseEvent(t,i._map))}),i.getContainer().addEventListener("dbclick",function(t){i.dbclickEvent.emit(u.enhanceMouseEvent(t,i._map))}),i.getContainer().addEventListener("mousedown",function(t){i.mousedownEvent.emit(u.enhanceMouseEvent(t,i._map))}),i.getContainer().addEventListener("mouseover",function(t){i.mouseoverEvent.emit(u.enhanceMouseEvent(t,i._map))}),i.getContainer().addEventListener("mouseout",function(t){i.mouseoutEvent.emit(u.enhanceMouseEvent(t,i._map))}),i}return r(e,t),e.prototype.ngOnDestroy=function(){this._map.removeControl(this)},e.prototype.remove=function(){return t.prototype.remove.call(this),this.displayChange.emit(!1),this.removeEvent.emit({target:this,type:"remove"}),this},e.prototype.addTo=function(e){return t.prototype.addTo.call(this,e),this.displayChange.emit(!0),this.addEvent.emit({target:this,type:"add"}),this},e.prototype.setPosition=function(e){return t.prototype.setPosition.call(this,e),this.positionChange.emit(e),this},Object.defineProperty(e.prototype,"opacity",{get:function(){return parseFloat(this.getContainer().style.opacity)},set:function(t){this.getContainer().style.opacity=t.toString()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"display",{get:function(){return!(!this._map||"none"===this.getContainer().style.display)},set:function(t){this._map&&(this.getContainer().style.display=t?"":"none")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this.getPosition()},set:function(t){this.setPosition(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"zIndex",{get:function(){return parseInt(this.getContainer().style.zIndex,10)},set:function(t){t||(t=0),this.getContainer().style.zIndex=t.toString()},enumerable:!0,configurable:!0}),e.decorators=[{type:o.Directive,args:[{providers:[s.LayersControlProvider],selector:"yaga-layers-control"}]}],e.propDecorators={displayChange:[{type:o.Output}],zIndexChange:[{type:o.Output}],positionChange:[{type:o.Output}],addEvent:[{type:o.Output,args:["add"]}],removeEvent:[{type:o.Output,args:["remove"]}],clickEvent:[{type:o.Output,args:["click"]}],dbclickEvent:[{type:o.Output,args:["dbclick"]}],mousedownEvent:[{type:o.Output,args:["mousedown"]}],mouseoverEvent:[{type:o.Output,args:["mouseover"]}],mouseoutEvent:[{type:o.Output,args:["mouseout"]}],opacity:[{type:o.Input}],display:[{type:o.Input}],position:[{type:o.Input}],zIndex:[{type:o.Input}]},e}(a.Control.Layers)},pMiS:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n("LMZF"),a=n("cqO5"),s=n("KG7u"),u=n("xHJr"),l=n("TB0K");e.MapComponent=function(t){function e(e,n,i){var r=t.call(this,e.nativeElement,{attributionControl:!1,zoomControl:!1})||this;r.zoomChange=new o.EventEmitter,r.latChange=new o.EventEmitter,r.lngChange=new o.EventEmitter,r.minZoomChange=new o.EventEmitter,r.maxZoomChange=new o.EventEmitter,r.maxBoundsChange=new o.EventEmitter,r.baselayerchangeEvent=new o.EventEmitter,r.overlayaddEvent=new o.EventEmitter,r.overlayremoveEvent=new o.EventEmitter,r.layeraddEvent=new o.EventEmitter,r.layerremoveEvent=new o.EventEmitter,r.zoomlevelschangeEvent=new o.EventEmitter,r.resizeEvent=new o.EventEmitter,r.unloadEvent=new o.EventEmitter,r.viewresetEvent=new o.EventEmitter,r.loadEvent=new o.EventEmitter,r.zoomstartEvent=new o.EventEmitter,r.movestartEvent=new o.EventEmitter,r.zoomEvent=new o.EventEmitter,r.moveEvent=new o.EventEmitter,r.zoomendEvent=new o.EventEmitter,r.moveendEvent=new o.EventEmitter,r.popupopenEvent=new o.EventEmitter,r.popupcloseEvent=new o.EventEmitter,r.autopanstartEvent=new o.EventEmitter,r.tooltipopenEvent=new o.EventEmitter,r.tooltipcloseEvent=new o.EventEmitter,r.clickEvent=new o.EventEmitter,r.dblclickEvent=new o.EventEmitter,r.mousedownEvent=new o.EventEmitter,r.mouseupEvent=new o.EventEmitter,r.mouseoverEvent=new o.EventEmitter,r.mouseoutEvent=new o.EventEmitter,r.mousemoveEvent=new o.EventEmitter,r.contextmenuEvent=new o.EventEmitter,r.keypressEvent=new o.EventEmitter,r.preclickEvent=new o.EventEmitter,r.zoomanimEvent=new o.EventEmitter,r.isZooming=!1,i.ref=r,n.ref=r;var a=function(){r.isZooming?r.moveTimeout=setTimeout(a,s.ANIMATION_DELAY):(r.latChange.emit(r.lat),r.lngChange.emit(r.lng),r.zoomChange.emit(r.zoom),r.moveTimeout=void 0)};return r.setView([0,0],0),e.nativeElement.setAttribute("class",e.nativeElement.getAttribute("class")+" yaga-map"),r.on("move",function(){r.moveTimeout&&clearTimeout(r.moveTimeout),r.moveTimeout=setTimeout(a,s.ANIMATION_DELAY)}),r.on("zoomstart",function(){r.isZooming=!0}),r.on("zoomend",function(){r.isZooming=!1,r.moveTimeout&&clearTimeout(r.moveTimeout),r.moveTimeout=setTimeout(a,s.ANIMATION_DELAY)}),r.on("baselayerchange",function(t){r.baselayerchangeEvent.emit(t)}),r.on("overlayadd",function(t){r.overlayaddEvent.emit(t)}),r.on("overlayremove",function(t){r.overlayremoveEvent.emit(t)}),r.on("layeradd",function(t){r.layeraddEvent.emit(t)}),r.on("layerremove",function(t){r.layerremoveEvent.emit(t)}),r.on("zoomlevelschange",function(t){r.zoomlevelschangeEvent.emit(t)}),r.on("resize",function(t){r.resizeEvent.emit(t)}),r.on("unload",function(t){r.unloadEvent.emit(t)}),r.on("viewreset",function(t){r.viewresetEvent.emit(t)}),r.on("load",function(t){r.loadEvent.emit(t)}),r.on("zoomstart",function(t){r.zoomstartEvent.emit(t)}),r.on("movestart",function(t){r.movestartEvent.emit(t)}),r.on("zoom",function(t){r.zoomEvent.emit(t)}),r.on("move",function(t){r.moveEvent.emit(t)}),r.on("zoomend",function(t){r.zoomendEvent.emit(t)}),r.on("moveend",function(t){r.moveendEvent.emit(t)}),r.on("popupopen",function(t){r.popupopenEvent.emit(t)}),r.on("popupclose",function(t){r.popupcloseEvent.emit(t)}),r.on("autopanstart",function(t){r.autopanstartEvent.emit(t)}),r.on("tooltipopen",function(t){r.tooltipopenEvent.emit(t)}),r.on("tooltipclose",function(t){r.tooltipcloseEvent.emit(t)}),r.on("click",function(t){r.clickEvent.emit(t)}),r.on("dblclick",function(t){r.dblclickEvent.emit(t)}),r.on("mousedown",function(t){r.mousedownEvent.emit(t)}),r.on("mouseup",function(t){r.mouseupEvent.emit(t)}),r.on("mouseover",function(t){r.mouseoverEvent.emit(t)}),r.on("mouseout",function(t){r.mouseoutEvent.emit(t)}),r.on("mousemove",function(t){r.mousemoveEvent.emit(t)}),r.on("contextmenu",function(t){r.contextmenuEvent.emit(t)}),r.on("keypress",function(t){r.keypressEvent.emit(t)}),r.on("preclick",function(t){r.preclickEvent.emit(t)}),r.on("zoomanim",function(t){r.zoomanimEvent.emit(t)}),r}return r(e,t),e.prototype.ngAfterViewInit=function(){this.invalidateSize(!1)},Object.defineProperty(e.prototype,"zoom",{get:function(){return this.getZoom()},set:function(t){this.setZoom(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lat",{get:function(){return this.getCenter().lat},set:function(t){var e=new a.LatLng(t,this.getCenter().lng);this.setView(e,this.zoom)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lng",{get:function(){return this.getCenter().lng},set:function(t){var e=new a.LatLng(this.getCenter().lat,t);this.setView(e,this.zoom)},enumerable:!0,configurable:!0}),e.prototype.setMinZoom=function(e){return this.minZoomChange.emit(e),t.prototype.setMinZoom.call(this,e)},Object.defineProperty(e.prototype,"minZoom",{get:function(){return this.getMinZoom()},set:function(t){this.setMinZoom(t)},enumerable:!0,configurable:!0}),e.prototype.setMaxZoom=function(e){return this.maxZoomChange.emit(e),t.prototype.setMaxZoom.call(this,e)},Object.defineProperty(e.prototype,"maxZoom",{get:function(){return this.getMaxZoom()},set:function(t){this.setMaxZoom(t)},enumerable:!0,configurable:!0}),e.prototype.setMaxBounds=function(e){return t.prototype.setMaxBounds.call(this,e),this.maxBoundsChange.emit(this.maxBounds),this},Object.defineProperty(e.prototype,"crs",{get:function(){return this.options.crs},set:function(t){this.options.crs=t;for(var e=0,n=Object.keys(this._layers);e<n.length;e++){var i=n[e];"function"==typeof this._layers[i].redraw&&this._layers[i].redraw()}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxBounds",{get:function(){return this.options.maxBounds},set:function(t){this.setMaxBounds(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"closePopupOnClick",{get:function(){return this.options.closePopupOnClick},set:function(t){this.options.closePopupOnClick=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"zoomSnap",{get:function(){return this.options.zoomSnap},set:function(t){this.options.zoomSnap=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"zoomDelta",{get:function(){return this.options.zoomDelta},set:function(t){this.options.zoomDelta=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"trackResize",{get:function(){return this.options.trackResize},set:function(t){this.options.trackResize=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"boxZoomEnabled",{get:function(){return this.boxZoom.enabled()},set:function(t){t?this.boxZoom.enable():this.boxZoom.disable()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"doubleClickZoomEnabled",{get:function(){return this.doubleClickZoom.enabled()},set:function(t){t?this.doubleClickZoom.enable():this.doubleClickZoom.disable()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"draggingEnabled",{get:function(){return this.dragging.enabled()},set:function(t){t?this.dragging.enable():this.dragging.disable()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fadeAnimation",{get:function(){return this.options.fadeAnimation},set:function(t){this.options.fadeAnimation=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"markerZoomAnimation",{get:function(){return this.options.markerZoomAnimation},set:function(t){this.options.markerZoomAnimation=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"transform3DLimit",{get:function(){return this.options.transform3DLimit},set:function(t){this.options.transform3DLimit=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"zoomAnimation",{get:function(){return this.options.zoomAnimation},set:function(t){this.options.zoomAnimation=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"zoomAnimationThreshold",{get:function(){return this.options.zoomAnimationThreshold},set:function(t){this.options.zoomAnimationThreshold=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inertia",{get:function(){return this.options.inertia},set:function(t){this.options.inertia=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inertiaDeceleration",{get:function(){return this.options.inertiaDeceleration},set:function(t){this.options.inertiaDeceleration=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inertiaMaxSpeed",{get:function(){return this.options.inertiaMaxSpeed},set:function(t){this.options.inertiaMaxSpeed=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"easeLinearity",{get:function(){return this.options.easeLinearity},set:function(t){this.options.easeLinearity=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"worldCopyJump",{get:function(){return this.options.worldCopyJump},set:function(t){this.options.worldCopyJump=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxBoundsViscosity",{get:function(){return this.options.maxBoundsViscosity},set:function(t){this.options.maxBoundsViscosity=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"keyboardEnabled",{get:function(){return this.keyboard.enabled()},set:function(t){t?this.keyboard.enable():this.keyboard.disable()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"keyboardPanDelta",{get:function(){return this.options.keyboardPanDelta},set:function(t){this.options.keyboardPanDelta=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scrollWheelZoomEnabled",{get:function(){return this.scrollWheelZoom.enabled()},set:function(t){t?this.scrollWheelZoom.enable():this.scrollWheelZoom.disable()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wheelDebounceTime",{get:function(){return this.options.wheelDebounceTime},set:function(t){this.options.wheelDebounceTime=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wheelPxPerZoomLevel",{get:function(){return this.options.wheelPxPerZoomLevel},set:function(t){this.options.wheelPxPerZoomLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tapEnabled",{get:function(){return this.options.tap},set:function(t){this.options.tap=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tapTolerance",{get:function(){return this.options.tapTolerance},set:function(t){this.options.tapTolerance=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bounceAtZoomLimits",{get:function(){return this.options.bounceAtZoomLimits},set:function(t){this.options.bounceAtZoomLimits=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"touchZoomEnabled",{get:function(){return this.touchZoom.enabled()},set:function(t){t?this.touchZoom.enable():this.touchZoom.disable()},enumerable:!0,configurable:!0}),e.decorators=[{type:o.Component,args:[{providers:[u.LayerGroupProvider,l.MapProvider],selector:"yaga-map",styles:[":host { display: block; }"],template:'<span style="display: none"><ng-content></ng-content></span>'}]}],e.propDecorators={zoomChange:[{type:o.Output}],latChange:[{type:o.Output}],lngChange:[{type:o.Output}],minZoomChange:[{type:o.Output}],maxZoomChange:[{type:o.Output}],maxBoundsChange:[{type:o.Output}],baselayerchangeEvent:[{type:o.Output,args:["baselayerchange"]}],overlayaddEvent:[{type:o.Output,args:["overlayadd"]}],overlayremoveEvent:[{type:o.Output,args:["overlayremove"]}],layeraddEvent:[{type:o.Output,args:["layeradd"]}],layerremoveEvent:[{type:o.Output,args:["layerremove"]}],zoomlevelschangeEvent:[{type:o.Output,args:["zoomlevelschange"]}],resizeEvent:[{type:o.Output,args:["resize"]}],unloadEvent:[{type:o.Output,args:["unload"]}],viewresetEvent:[{type:o.Output,args:["viewreset"]}],loadEvent:[{type:o.Output,args:["load"]}],zoomstartEvent:[{type:o.Output,args:["zoomstart"]}],movestartEvent:[{type:o.Output,args:["movestart"]}],zoomEvent:[{type:o.Output,args:["zoom"]}],moveEvent:[{type:o.Output,args:["move"]}],zoomendEvent:[{type:o.Output,args:["zoomend"]}],moveendEvent:[{type:o.Output,args:["moveend"]}],popupopenEvent:[{type:o.Output,args:["popupopen"]}],popupcloseEvent:[{type:o.Output,args:["popupclose"]}],autopanstartEvent:[{type:o.Output,args:["autopanstart"]}],tooltipopenEvent:[{type:o.Output,args:["tooltipopen"]}],tooltipcloseEvent:[{type:o.Output,args:["tooltipclose"]}],clickEvent:[{type:o.Output,args:["click"]}],dblclickEvent:[{type:o.Output,args:["dblclick"]}],mousedownEvent:[{type:o.Output,args:["mousedown"]}],mouseupEvent:[{type:o.Output,args:["mouseup"]}],mouseoverEvent:[{type:o.Output,args:["mouseover"]}],mouseoutEvent:[{type:o.Output,args:["mouseout"]}],mousemoveEvent:[{type:o.Output,args:["mousemove"]}],contextmenuEvent:[{type:o.Output,args:["contextmenu"]}],keypressEvent:[{type:o.Output,args:["keypress"]}],preclickEvent:[{type:o.Output,args:["preclick"]}],zoomanimEvent:[{type:o.Output,args:["zoomanim"]}],zoom:[{type:o.Input}],lat:[{type:o.Input}],lng:[{type:o.Input}],minZoom:[{type:o.Input}],maxZoom:[{type:o.Input}],crs:[{type:o.Input}],maxBounds:[{type:o.Input}],closePopupOnClick:[{type:o.Input}],zoomSnap:[{type:o.Input}],zoomDelta:[{type:o.Input}],trackResize:[{type:o.Input}],boxZoomEnabled:[{type:o.Input}],doubleClickZoomEnabled:[{type:o.Input}],draggingEnabled:[{type:o.Input}],fadeAnimation:[{type:o.Input}],markerZoomAnimation:[{type:o.Input}],transform3DLimit:[{type:o.Input}],zoomAnimation:[{type:o.Input}],zoomAnimationThreshold:[{type:o.Input}],inertia:[{type:o.Input}],inertiaDeceleration:[{type:o.Input}],inertiaMaxSpeed:[{type:o.Input}],easeLinearity:[{type:o.Input}],worldCopyJump:[{type:o.Input}],maxBoundsViscosity:[{type:o.Input}],keyboardEnabled:[{type:o.Input}],keyboardPanDelta:[{type:o.Input}],scrollWheelZoomEnabled:[{type:o.Input}],wheelDebounceTime:[{type:o.Input}],wheelPxPerZoomLevel:[{type:o.Input}],tapEnabled:[{type:o.Input}],tapTolerance:[{type:o.Input}],bounceAtZoomLimits:[{type:o.Input}],touchZoomEnabled:[{type:o.Input}]},e}(a.Map)},psmC:function(t,e,n){"use strict";e.a=function(t){var e,n=t.Symbol;return"function"==typeof n?n.observable?e=n.observable:(e=n("observable"),n.observable=e):e="@@observable",e}},qLnt:function(t,e,n){"use strict";var i=n("1j/l"),r=n("NGRF"),o=n("B1iP"),a=n("8ofh"),s=n("NePw"),u=n("6Xbx"),l=function(t){function e(e){t.call(this),this.errors=e;var n=Error.call(this,e?e.length+" errors occurred during unsubscription:\n  "+e.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"");this.name=n.name="UnsubscriptionError",this.stack=n.stack,this.message=n.message}return Object(u.c)(e,t),e}(Error);n.d(e,"a",function(){return c});var c=function(){function t(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}var e;return t.prototype.unsubscribe=function(){var t,e=!1;if(!this.closed){var n=this._parent,u=this._parents,c=this._unsubscribe,h=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var f=-1,d=u?u.length:0;n;)n.remove(this),n=++f<d&&u[f]||null;if(Object(o.a)(c)&&Object(a.a)(c).call(this)===s.a&&(e=!0,t=t||(s.a.e instanceof l?p(s.a.e.errors):[s.a.e])),Object(i.a)(h))for(f=-1,d=h.length;++f<d;){var m=h[f];if(Object(r.a)(m)&&Object(a.a)(m.unsubscribe).call(m)===s.a){e=!0,t=t||[];var y=s.a.e;y instanceof l?t=t.concat(p(y.errors)):t.push(y)}}if(e)throw new l(t)}},t.prototype.add=function(e){if(!e||e===t.EMPTY)return t.EMPTY;if(e===this)return this;var n=e;switch(typeof e){case"function":n=new t(e);case"object":if(n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if("function"!=typeof n._addParent){var i=n;(n=new t)._subscriptions=[i]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(n),n._addParent(this),n},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}},t.prototype._addParent=function(t){var e=this._parent,n=this._parents;e&&e!==t?n?-1===n.indexOf(t)&&n.push(t):this._parents=[t]:this._parent=t},t.EMPTY=((e=new t).closed=!0,e),t}();function p(t){return t.reduce(function(t,e){return t.concat(e instanceof l?e.errors:e)},[])}},qgI0:function(t,e,n){"use strict";var i=n("xIGM"),r=n("kQVV"),o=n("mHG6"),a=n("NGRF"),s=n("AP4T"),u=n("X3fp"),l=n("6Xbx"),c=function(t){function e(e,n,i){t.call(this),this.parent=e,this.outerValue=n,this.outerIndex=i,this.index=0}return Object(l.c)(e,t),e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(n("E9/g").a),p=n("mz3w");e.a=function(t,e,n,l){var h=new c(t,n,l);if(h.closed)return null;if(e instanceof s.Observable)return e._isScalar?(h.next(e.value),h.complete(),null):(h.syncErrorThrowable=!0,e.subscribe(h));if(Object(r.a)(e)){for(var f=0,d=e.length;f<d&&!h.closed;f++)h.next(e[f]);h.closed||h.complete()}else{if(Object(o.a)(e))return e.then(function(t){h.closed||(h.next(t),h.complete())},function(t){return h.error(t)}).then(null,function(t){i.a.setTimeout(function(){throw t})}),h;if(e&&"function"==typeof e[u.a])for(var m=e[u.a]();;){var y=m.next();if(y.done){h.complete();break}if(h.next(y.value),h.closed)break}else if(e&&"function"==typeof e[p.a]){var g=e[p.a]();if("function"==typeof g.subscribe)return g.subscribe(new c(t,n,l));h.error(new TypeError("Provided object does not correctly implement Symbol.observable"))}else{var v=Object(a.a)(e)?"an invalid object":"'"+e+"'";h.error(new TypeError("You provided "+v+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable."))}}return null}},qhgb:function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},qqDE:function(t,e,n){"use strict";e.a=function(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}};var i=n("6Xbx"),r=n("E9/g"),o=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.project,this.thisArg))},t}(),a=function(t){function e(e,n,i){t.call(this,e),this.project=n,this.count=0,this.thisArg=i||this}return Object(i.c)(e,t),e.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(r.a)},r20z:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n("LMZF"),a=n("cqO5"),s=(n("TB0K"),n("nnmj"));e.ZoomControlDirective=function(t){function e(e){var n=t.call(this)||this;return n.displayChange=new o.EventEmitter,n.zIndexChange=new o.EventEmitter,n.positionChange=new o.EventEmitter,n.addEvent=new o.EventEmitter,n.removeEvent=new o.EventEmitter,n.clickEvent=new o.EventEmitter,n.dbclickEvent=new o.EventEmitter,n.mousedownEvent=new o.EventEmitter,n.mouseoverEvent=new o.EventEmitter,n.mouseoutEvent=new o.EventEmitter,e.ref.addControl(n),n.getContainer().addEventListener("click",function(t){n.clickEvent.emit(s.enhanceMouseEvent(t,n._map))}),n.getContainer().addEventListener("dbclick",function(t){n.dbclickEvent.emit(s.enhanceMouseEvent(t,n._map))}),n.getContainer().addEventListener("mousedown",function(t){n.mousedownEvent.emit(s.enhanceMouseEvent(t,n._map))}),n.getContainer().addEventListener("mouseover",function(t){n.mouseoverEvent.emit(s.enhanceMouseEvent(t,n._map))}),n.getContainer().addEventListener("mouseout",function(t){n.mouseoutEvent.emit(s.enhanceMouseEvent(t,n._map))}),n}return r(e,t),e.prototype.ngOnDestroy=function(){this._map.removeControl(this)},e.prototype.remove=function(){return t.prototype.remove.call(this),this.displayChange.emit(!1),this.removeEvent.emit({target:this,type:"remove"}),this},e.prototype.addTo=function(e){return t.prototype.addTo.call(this,e),this.displayChange.emit(!0),this.addEvent.emit({target:this,type:"add"}),this},e.prototype.setPosition=function(e){return t.prototype.setPosition.call(this,e),this.positionChange.emit(e),this},Object.defineProperty(e.prototype,"opacity",{get:function(){return parseFloat(this.getContainer().style.opacity)},set:function(t){this.getContainer().style.opacity=t.toString()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"display",{get:function(){return!(!this._map||"none"===this.getContainer().style.display)},set:function(t){this._map&&(this.getContainer().style.display=t?"":"none")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this.getPosition()},set:function(t){this.setPosition(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"zIndex",{get:function(){return parseInt(this.getContainer().style.zIndex,10)},set:function(t){t||(t=0),this.getContainer().style.zIndex=t.toString()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"zoomInText",{get:function(){return this.options.zoomInText},set:function(t){this.options.zoomInText=t,this._zoomInButton.textContent=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"zoomInTitle",{get:function(){return this.options.zoomInTitle},set:function(t){this.options.zoomInTitle=t,this._zoomInButton.setAttribute("title",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"zoomOutText",{get:function(){return this.options.zoomOutText},set:function(t){this.options.zoomOutText=t,this._zoomOutButton.textContent=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"zoomOutTitle",{get:function(){return this.options.zoomOutTitle},set:function(t){this.options.zoomOutTitle=t,this._zoomOutButton.setAttribute("title",t)},enumerable:!0,configurable:!0}),e.decorators=[{type:o.Directive,args:[{selector:"yaga-zoom-control"}]}],e.propDecorators={displayChange:[{type:o.Output}],zIndexChange:[{type:o.Output}],positionChange:[{type:o.Output}],addEvent:[{type:o.Output,args:["add"]}],removeEvent:[{type:o.Output,args:["remove"]}],clickEvent:[{type:o.Output,args:["click"]}],dbclickEvent:[{type:o.Output,args:["dbclick"]}],mousedownEvent:[{type:o.Output,args:["mousedown"]}],mouseoverEvent:[{type:o.Output,args:["mouseover"]}],mouseoutEvent:[{type:o.Output,args:["mouseout"]}],opacity:[{type:o.Input}],display:[{type:o.Input}],position:[{type:o.Input}],zIndex:[{type:o.Input}],zoomInText:[{type:o.Input}],zoomInTitle:[{type:o.Input}],zoomOutText:[{type:o.Input}],zoomOutTitle:[{type:o.Input}]},e}(a.Control.Zoom)},sKKA:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n("LMZF"),a=n("cqO5"),s=n("KG7u"),u=(n("xHJr"),n("iWCm"));e.TileLayerDirective=function(t){function e(e,n){var i=t.call(this,s.TRANSPARENT_PIXEL,{errorTileUrl:s.TRANSPARENT_PIXEL})||this;return i.urlChange=new o.EventEmitter,i.displayChange=new o.EventEmitter,i.opacityChange=new o.EventEmitter,i.zIndexChange=new o.EventEmitter,i.addEvent=new o.EventEmitter,i.removeEvent=new o.EventEmitter,i.popupopenEvent=new o.EventEmitter,i.popupcloseEvent=new o.EventEmitter,i.tooltipopenEvent=new o.EventEmitter,i.tooltipcloseEvent=new o.EventEmitter,i.clickEvent=new o.EventEmitter,i.dbclickEvent=new o.EventEmitter,i.mousedownEvent=new o.EventEmitter,i.mouseoverEvent=new o.EventEmitter,i.mouseoutEvent=new o.EventEmitter,i.contextmenuEvent=new o.EventEmitter,i.loadingEvent=new o.EventEmitter,i.tileunloadEvent=new o.EventEmitter,i.tileloadstartEvent=new o.EventEmitter,i.tileerrorEvent=new o.EventEmitter,i.tileloadEvent=new o.EventEmitter,i.loadEvent=new o.EventEmitter,n.ref=i,i.on("remove",function(){i.displayChange.emit(!1)}),i.on("add",function(){i.displayChange.emit(!0)}),i.addTo(e.ref),i.on("add",function(t){i.addEvent.emit(t)}),i.on("remove",function(t){i.removeEvent.emit(t)}),i.on("popupopen",function(t){i.popupopenEvent.emit(t)}),i.on("popupclose",function(t){i.popupcloseEvent.emit(t)}),i.on("tooltipopen",function(t){i.tooltipopenEvent.emit(t)}),i.on("tooltipclose",function(t){i.tooltipcloseEvent.emit(t)}),i.on("click",function(t){i.clickEvent.emit(t)}),i.on("dbclick",function(t){i.dbclickEvent.emit(t)}),i.on("mousedown",function(t){i.mousedownEvent.emit(t)}),i.on("mouseover",function(t){i.mouseoverEvent.emit(t)}),i.on("mouseout",function(t){i.mouseoutEvent.emit(t)}),i.on("contextmenu",function(t){i.contextmenuEvent.emit(t)}),i.on("loading",function(t){i.loadingEvent.emit(t)}),i.on("tileunload",function(t){i.tileunloadEvent.emit(t)}),i.on("tileloadstart",function(t){i.tileloadstartEvent.emit(t)}),i.on("tileerror",function(t){i.tileerrorEvent.emit(t)}),i.on("tileload",function(t){i.tileloadEvent.emit(t)}),i.on("load",function(t){i.loadEvent.emit(t)}),i}return r(e,t),e.prototype.ngOnDestroy=function(){this.removeFrom(this._map)},e.prototype.setUrl=function(e,n){if(this.url!==e)return this.urlChange.emit(e),t.prototype.setUrl.call(this,e,n)},Object.defineProperty(e.prototype,"url",{get:function(){return this._url},set:function(t){this.setUrl(t)},enumerable:!0,configurable:!0}),e.prototype.setOpacity=function(e){if(this.opacity!==e)return this.opacityChange.emit(e),t.prototype.setOpacity.call(this,e)},Object.defineProperty(e.prototype,"opacity",{get:function(){return this.options.opacity},set:function(t){this.setOpacity(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"display",{get:function(){var t,e;try{t=this.getPane(),e=this.getContainer()}catch(t){return!1}for(var n=0;n<t.children.length;n+=1)if(t.children[n]===e)return!0;return!1},set:function(t){if(this.display!==t){var e,n,i,r,o;try{e=this.getPane(),n=this.getContainer(),i=this._map,r=this.getEvents(),o=Object.keys(r)}catch(t){return}if(t){e.appendChild(n);for(var a=0,s=o;a<s.length;a++)i.on(c=s[a],r[c],this);this.redraw()}else{e.removeChild(n);for(var u=0,l=o;u<l.length;u++){var c;i.off(c=l[u],r[c],this)}}}},enumerable:!0,configurable:!0}),e.prototype.setZIndex=function(e){return t.prototype.setZIndex.call(this,e),this.zIndexChange.emit(e),this},Object.defineProperty(e.prototype,"zIndex",{get:function(){return this.options.zIndex},set:function(t){this.setZIndex(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tileSize",{get:function(){return this.options.tileSize},set:function(t){this.options.tileSize=t,this.redraw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"updateWhenIdle",{get:function(){return this.options.updateWhenIdle},set:function(t){this.options.updateWhenIdle=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"updateWhenZooming",{get:function(){return this.options.updateWhenZooming},set:function(t){this.options.updateWhenZooming=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"updateInterval",{get:function(){return this.options.updateInterval},set:function(t){this.options.updateInterval=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bounds",{get:function(){return this.options.bounds},set:function(t){this.options.bounds=t,this.redraw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"noWrap",{get:function(){return this.options.noWrap},set:function(t){this.options.noWrap=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"className",{get:function(){return this.options.className},set:function(t){this.options.className=t,this.redraw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"keepBuffer",{get:function(){return this.options.keepBuffer},set:function(t){this.options.keepBuffer=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxZoom",{get:function(){return this.options.maxZoom},set:function(t){this.options.maxZoom=t,this._map&&this._map._updateZoomLevels(),this.redraw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minZoom",{get:function(){return this.options.minZoom},set:function(t){this.options.minZoom=t,this._map&&this._map._updateZoomLevels(),this.redraw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxNativeZoom",{get:function(){return this.options.maxNativeZoom},set:function(t){this.options.maxNativeZoom=t,this.redraw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minNativeZoom",{get:function(){return this.options.minNativeZoom},set:function(t){this.options.minNativeZoom=t,this.redraw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"subdomains",{get:function(){return"string"==typeof this.options.subdomains&&(this.options.subdomains=this.options.subdomains.split("")),this.options.subdomains},set:function(t){this.options.subdomains=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"errorTileUrl",{get:function(){return this.options.errorTileUrl},set:function(t){this.options.errorTileUrl=t,this.redraw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"zoomOffset",{get:function(){return this.options.zoomOffset},set:function(t){this.options.zoomOffset=t,this.redraw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tms",{get:function(){return this.options.tms},set:function(t){this.options.tms=t,this.redraw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"zoomReverse",{get:function(){return this.options.zoomReverse},set:function(t){this.options.zoomReverse=t,this.redraw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"detectRetina",{get:function(){return this.options.detectRetina},set:function(t){this.options.detectRetina=t,this.redraw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"crossOrigin",{get:function(){return this.options.crossOrigin},set:function(t){this.options.crossOrigin=t,this.redraw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"attribution",{get:function(){return this.getAttribution()},set:function(t){this._map&&this._map.attributionControl&&(this._map.attributionControl.removeAttribution(this.getAttribution()),this._map.attributionControl.addAttribution(t)),this.options.attribution=t},enumerable:!0,configurable:!0}),e.decorators=[{type:o.Directive,args:[{providers:[u.LayerProvider],selector:"yaga-tile-layer"}]}],e.propDecorators={urlChange:[{type:o.Output}],displayChange:[{type:o.Output}],opacityChange:[{type:o.Output}],zIndexChange:[{type:o.Output}],addEvent:[{type:o.Output,args:["add"]}],removeEvent:[{type:o.Output,args:["remove"]}],popupopenEvent:[{type:o.Output,args:["popupopen"]}],popupcloseEvent:[{type:o.Output,args:["popupclose"]}],tooltipopenEvent:[{type:o.Output,args:["tooltipopen"]}],tooltipcloseEvent:[{type:o.Output,args:["tooltipclose"]}],clickEvent:[{type:o.Output,args:["click"]}],dbclickEvent:[{type:o.Output,args:["dbclick"]}],mousedownEvent:[{type:o.Output,args:["mousedown"]}],mouseoverEvent:[{type:o.Output,args:["mouseover"]}],mouseoutEvent:[{type:o.Output,args:["mouseout"]}],contextmenuEvent:[{type:o.Output,args:["contextmenu"]}],loadingEvent:[{type:o.Output,args:["loading"]}],tileunloadEvent:[{type:o.Output,args:["tileunload"]}],tileloadstartEvent:[{type:o.Output,args:["tileloadstart"]}],tileerrorEvent:[{type:o.Output,args:["tileerror"]}],tileloadEvent:[{type:o.Output,args:["tileload"]}],loadEvent:[{type:o.Output,args:["load"]}],url:[{type:o.Input}],opacity:[{type:o.Input}],display:[{type:o.Input}],zIndex:[{type:o.Input}],tileSize:[{type:o.Input}],updateWhenIdle:[{type:o.Input}],updateWhenZooming:[{type:o.Input}],updateInterval:[{type:o.Input}],bounds:[{type:o.Input}],noWrap:[{type:o.Input}],className:[{type:o.Input}],keepBuffer:[{type:o.Input}],maxZoom:[{type:o.Input}],minZoom:[{type:o.Input}],maxNativeZoom:[{type:o.Input}],minNativeZoom:[{type:o.Input}],subdomains:[{type:o.Input}],errorTileUrl:[{type:o.Input}],zoomOffset:[{type:o.Input}],tms:[{type:o.Input}],zoomReverse:[{type:o.Input}],detectRetina:[{type:o.Input}],crossOrigin:[{type:o.Input}],attribution:[{type:o.Input}]},e}(a.TileLayer)},sVqU:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n("LMZF"),a=n("cqO5"),s=(n("xHJr"),n("iWCm")),u=n("Qe4K");e.CircleDirective=function(t){function e(e,n){var i=t.call(this,[0,0])||this;return i.displayChange=new o.EventEmitter,i.strokeChange=new o.EventEmitter,i.colorChange=new o.EventEmitter,i.weightChange=new o.EventEmitter,i.opacityChange=new o.EventEmitter,i.lineCapChange=new o.EventEmitter,i.lineJoinChange=new o.EventEmitter,i.dashArrayChange=new o.EventEmitter,i.dashOffsetChange=new o.EventEmitter,i.fillChange=new o.EventEmitter,i.fillColorChange=new o.EventEmitter,i.fillOpacityChange=new o.EventEmitter,i.fillRuleChange=new o.EventEmitter,i.classNameChange=new o.EventEmitter,i.styleChange=new o.EventEmitter,i.positionChange=new o.EventEmitter,i.latChange=new o.EventEmitter,i.lngChange=new o.EventEmitter,i.radiusChange=new o.EventEmitter,i.geoJSONChange=new o.EventEmitter,i.addEvent=new o.EventEmitter,i.removeEvent=new o.EventEmitter,i.popupopenEvent=new o.EventEmitter,i.popupcloseEvent=new o.EventEmitter,i.tooltipopenEvent=new o.EventEmitter,i.tooltipcloseEvent=new o.EventEmitter,i.clickEvent=new o.EventEmitter,i.dbclickEvent=new o.EventEmitter,i.mousedownEvent=new o.EventEmitter,i.mouseoverEvent=new o.EventEmitter,i.mouseoutEvent=new o.EventEmitter,i.contextmenuEvent=new o.EventEmitter,i.initialized=!1,n.ref=i,i.feature=i.feature||{type:"Feature",properties:{},geometry:{type:"Point",coordinates:[]}},i.feature.properties=i.feature.properties||{},i.on("remove",function(){i.displayChange.emit(!1)}),i.on("add",function(){i.displayChange.emit(!0)}),e.ref.addLayer(i),i.on("add",function(t){i.addEvent.emit(t)}),i.on("remove",function(t){i.removeEvent.emit(t)}),i.on("popupopen",function(t){i.popupopenEvent.emit(t)}),i.on("popupclose",function(t){i.popupcloseEvent.emit(t)}),i.on("tooltipopen",function(t){i.tooltipopenEvent.emit(t)}),i.on("tooltipclose",function(t){i.tooltipcloseEvent.emit(t)}),i.on("click",function(t){i.clickEvent.emit(t)}),i.on("dbclick",function(t){i.dbclickEvent.emit(t)}),i.on("mousedown",function(t){i.mousedownEvent.emit(t)}),i.on("mouseover",function(t){i.mouseoverEvent.emit(t)}),i.on("mouseout",function(t){i.mouseoutEvent.emit(t)}),i.on("contextmenu",function(t){i.contextmenuEvent.emit(t)}),i}return r(e,t),e.prototype.ngAfterContentInit=function(){this.initialized=!0},e.prototype.ngOnDestroy=function(){this.removeFrom(this._map)},e.prototype.setLatLng=function(e){return t.prototype.setLatLng.call(this,e),this.initialized?(this.positionChange.emit(this._latlng),this.latChange.emit(this._latlng.lat),this.lngChange.emit(this._latlng.lng),this.geoJSONChange.emit(this.geoJSON),this):this},Object.defineProperty(e.prototype,"position",{get:function(){return this._latlng},set:function(t){this.setLatLng(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lat",{get:function(){return this._latlng.lat},set:function(t){this.setLatLng([t,this.lng])},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lng",{get:function(){return this._latlng.lng},set:function(t){this.setLatLng([this.lat,t])},enumerable:!0,configurable:!0}),e.prototype.setRadius=function(e){return t.prototype.setRadius.call(this,e),this.radiusChange.emit(e),this},Object.defineProperty(e.prototype,"radius",{get:function(){return this.getRadius()},set:function(t){this.setRadius(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"geoJSON",{get:function(){return this.toGeoJSON()},set:function(t){this.feature.properties=t.properties;var e=t.geometry.type;if("Point"!==e)throw new Error("Unsupported geometry type: "+e);this.setLatLng(u.lng2lat(t.geometry.coordinates))},enumerable:!0,configurable:!0}),e.prototype.setStyle=function(e){return t.prototype.setStyle.call(this,e),e.hasOwnProperty("stroke")&&this.strokeChange.emit(e.stroke),e.hasOwnProperty("color")&&this.colorChange.emit(e.color),e.hasOwnProperty("weight")&&this.weightChange.emit(e.weight),e.hasOwnProperty("opacity")&&this.opacityChange.emit(e.opacity),e.hasOwnProperty("lineCap")&&this.lineCapChange.emit(e.lineCap),e.hasOwnProperty("lineJoin")&&this.lineJoinChange.emit(e.lineJoin),e.hasOwnProperty("dashArray")&&this.dashArrayChange.emit(e.dashArray),e.hasOwnProperty("dashOffset")&&this.dashOffsetChange.emit(e.dashOffset),e.hasOwnProperty("fill")&&this.fillChange.emit(e.fill),e.hasOwnProperty("fillColor")&&this.fillColorChange.emit(e.fillColor),e.hasOwnProperty("fillOpacity")&&this.fillOpacityChange.emit(e.fillOpacity),e.hasOwnProperty("fillRule")&&this.fillRuleChange.emit(e.fillRule),e.hasOwnProperty("className")&&this.classNameChange.emit(e.className),this.styleChange.emit(e),this},Object.defineProperty(e.prototype,"opacity",{get:function(){return this.options.opacity},set:function(t){this.setStyle({opacity:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stroke",{get:function(){return this.options.stroke},set:function(t){this.setStyle({stroke:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return this.options.color},set:function(t){this.setStyle({color:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"weight",{get:function(){return this.options.weight},set:function(t){this.setStyle({weight:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lineCap",{get:function(){return this.options.lineCap},set:function(t){this.setStyle({lineCap:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lineJoin",{get:function(){return this.options.lineJoin},set:function(t){this.setStyle({lineJoin:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dashArray",{get:function(){return this.options.dashArray},set:function(t){this.setStyle({dashArray:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dashOffset",{get:function(){return this.options.dashOffset},set:function(t){this.setStyle({dashOffset:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fill",{get:function(){return this.options.fill},set:function(t){this.setStyle({fill:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fillColor",{get:function(){return this.options.fillColor},set:function(t){this.setStyle({fillColor:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fillOpacity",{get:function(){return this.options.fillOpacity},set:function(t){this.setStyle({fillOpacity:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fillRule",{get:function(){return this.options.fillRule},set:function(t){this.setStyle({fillRule:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"className",{get:function(){return this.options.className},set:function(t){this.setStyle({className:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return this.options},set:function(t){this.setStyle(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"display",{get:function(){var t;try{t=this.getElement()}catch(t){return!1}return"none"!==t.style.display&&!!t.parentElement},set:function(t){if(this.display!==t){var e;try{e=this.getElement()}catch(t){return}this.displayChange.emit(t),e.style.display=t?"":"none"}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"interactive",{get:function(){return this.options.interactive},set:function(t){var e=this._map;this.options.interactive=t,this.onRemove(e),this.onAdd(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"properties",{get:function(){return this.feature.properties},set:function(t){this.feature.properties=t,this.geoJSONChange.emit(this.geoJSON)},enumerable:!0,configurable:!0}),e.decorators=[{type:o.Directive,args:[{providers:[s.LayerProvider],selector:"yaga-circle"}]}],e.propDecorators={displayChange:[{type:o.Output}],strokeChange:[{type:o.Output}],colorChange:[{type:o.Output}],weightChange:[{type:o.Output}],opacityChange:[{type:o.Output}],lineCapChange:[{type:o.Output}],lineJoinChange:[{type:o.Output}],dashArrayChange:[{type:o.Output}],dashOffsetChange:[{type:o.Output}],fillChange:[{type:o.Output}],fillColorChange:[{type:o.Output}],fillOpacityChange:[{type:o.Output}],fillRuleChange:[{type:o.Output}],classNameChange:[{type:o.Output}],styleChange:[{type:o.Output}],positionChange:[{type:o.Output}],latChange:[{type:o.Output}],lngChange:[{type:o.Output}],radiusChange:[{type:o.Output}],geoJSONChange:[{type:o.Output}],addEvent:[{type:o.Output,args:["add"]}],removeEvent:[{type:o.Output,args:["remove"]}],popupopenEvent:[{type:o.Output,args:["popupopen"]}],popupcloseEvent:[{type:o.Output,args:["popupclose"]}],tooltipopenEvent:[{type:o.Output,args:["tooltipopen"]}],tooltipcloseEvent:[{type:o.Output,args:["tooltipclose"]}],clickEvent:[{type:o.Output,args:["click"]}],dbclickEvent:[{type:o.Output,args:["dbclick"]}],mousedownEvent:[{type:o.Output,args:["mousedown"]}],mouseoverEvent:[{type:o.Output,args:["mouseover"]}],mouseoutEvent:[{type:o.Output,args:["mouseout"]}],contextmenuEvent:[{type:o.Output,args:["contextmenu"]}],position:[{type:o.Input}],lat:[{type:o.Input}],lng:[{type:o.Input}],radius:[{type:o.Input}],geoJSON:[{type:o.Input}],opacity:[{type:o.Input}],stroke:[{type:o.Input}],color:[{type:o.Input}],weight:[{type:o.Input}],lineCap:[{type:o.Input}],lineJoin:[{type:o.Input}],dashArray:[{type:o.Input}],dashOffset:[{type:o.Input}],fill:[{type:o.Input}],fillColor:[{type:o.Input}],fillOpacity:[{type:o.Input}],fillRule:[{type:o.Input}],className:[{type:o.Input}],style:[{type:o.Input}],display:[{type:o.Input}],interactive:[{type:o.Input}],properties:[{type:o.Input}]},e}(a.Circle)},stdA:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("LMZF");e.MarkerProvider=function(){function t(){}return t.decorators=[{type:i.Injectable}],t}()},tZGc:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n("LMZF"),a=n("cqO5"),s=(n("xHJr"),n("iWCm")),u=n("stdA");e.MarkerDirective=function(t){function e(e,n,i){var r=t.call(this,[0,0])||this;r.positionChange=new o.EventEmitter,r.latChange=new o.EventEmitter,r.lngChange=new o.EventEmitter,r.opacityChange=new o.EventEmitter,r.displayChange=new o.EventEmitter,r.zindexChange=new o.EventEmitter,r.draggableChange=new o.EventEmitter,r.iconChange=new o.EventEmitter,r.tooltipOpenedChange=new o.EventEmitter,r.popupOpenedChange=new o.EventEmitter,r.dragendEvent=new o.EventEmitter,r.dragstartEvent=new o.EventEmitter,r.movestartEvent=new o.EventEmitter,r.dragEvent=new o.EventEmitter,r.moveendEvent=new o.EventEmitter,r.addEvent=new o.EventEmitter,r.removeEvent=new o.EventEmitter,r.popupopenEvent=new o.EventEmitter,r.popupcloseEvent=new o.EventEmitter,r.tooltipopenEvent=new o.EventEmitter,r.tooltipcloseEvent=new o.EventEmitter,r.clickEvent=new o.EventEmitter,r.dbclickEvent=new o.EventEmitter,r.mousedownEvent=new o.EventEmitter,r.mouseoverEvent=new o.EventEmitter,r.mouseoutEvent=new o.EventEmitter,r.contextmenuEvent=new o.EventEmitter,r.initialized=!1,n.ref=r,i.ref=r,e.ref.addLayer(r),r.on("remove",function(){r.displayChange.emit(!1)}),r.on("add",function(){r.displayChange.emit(!0)}),r.on("drag",function(t){r.latChange.emit(r.getLatLng().lat),r.lngChange.emit(r.getLatLng().lng),r.positionChange.emit(r.getLatLng())}),r.on("dragend",function(t){r.dragendEvent.emit(t)}),r.on("dragstart",function(t){r.dragstartEvent.emit(t)}),r.on("movestart",function(t){r.movestartEvent.emit(t)}),r.on("drag",function(t){r.dragEvent.emit(t)}),r.on("moveend",function(t){r.moveendEvent.emit(t)}),r.on("add",function(t){r.addEvent.emit(t)}),r.on("remove",function(t){r.removeEvent.emit(t)}),r.on("popupopen",function(t){r.popupopenEvent.emit(t)}),r.on("popupclose",function(t){r.popupcloseEvent.emit(t)}),r.on("tooltipopen",function(t){r.tooltipopenEvent.emit(t)}),r.on("tooltipclose",function(t){r.tooltipcloseEvent.emit(t)}),r.on("click",function(t){r.clickEvent.emit(t)}),r.on("dbclick",function(t){r.dbclickEvent.emit(t)}),r.on("mousedown",function(t){r.mousedownEvent.emit(t)}),r.on("mouseover",function(t){r.mouseoverEvent.emit(t)}),r.on("mouseout",function(t){r.mouseoutEvent.emit(t)}),r.on("contextmenu",function(t){r.contextmenuEvent.emit(t)});var a=r.dragging.enable,s=r.dragging.disable;return r.dragging.enable=function(){var t=a.call(r.dragging);return r.draggableChange.emit(!0),t},r.dragging.disable=function(){var t=s.call(r.dragging);return r.draggableChange.emit(!1),t},r}return r(e,t),e.prototype.ngAfterContentInit=function(){this.initialized=!0},e.prototype.ngOnDestroy=function(){this.removeFrom(this._map)},Object.defineProperty(e.prototype,"display",{get:function(){var t,e;try{t=this.getPane(),e=this.getElement()}catch(t){return!1}for(var n=0;n<t.children.length;n+=1)if(t.children[n]===e)return!0;return!1},set:function(t){if(this.display!==t){var e,n,i,r,o;try{e=this.getPane(),n=this.getElement(),i=this._map,r=this.getEvents(),o=Object.keys(r)}catch(t){return}if(t){e.appendChild(n);for(var a=0,s=o;a<s.length;a++)i.on(c=s[a],r[c],this)}else{e.removeChild(n);for(var u=0,l=o;u<l.length;u++){var c;i.off(c=l[u],r[c],this)}}}},enumerable:!0,configurable:!0}),e.prototype.setLatLng=function(e){return t.prototype.setLatLng.call(this,e),this.initialized&&(this.positionChange.emit(this.getLatLng()),this.latChange.emit(this.getLatLng().lat),this.lngChange.emit(this.getLatLng().lng)),this},Object.defineProperty(e.prototype,"position",{get:function(){return this.getLatLng()},set:function(t){this.setLatLng(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lat",{get:function(){return this.getLatLng().lat},set:function(t){this.setLatLng([t,this.lng])},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lng",{get:function(){return this.getLatLng().lng},set:function(t){this.setLatLng([this.lat,t])},enumerable:!0,configurable:!0}),e.prototype.setOpacity=function(e){if(this.opacity!==e)return this.opacityChange.emit(e),t.prototype.setOpacity.call(this,e)},Object.defineProperty(e.prototype,"opacity",{get:function(){return this.options.opacity},set:function(t){this.setOpacity(t)},enumerable:!0,configurable:!0}),e.prototype.setIcon=function(e){return t.prototype.setIcon.call(this,e),this.iconChange.emit(e),this},Object.defineProperty(e.prototype,"icon",{get:function(){return this.options.icon},set:function(t){this.setIcon(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"draggable",{get:function(){return this.dragging.enabled()},set:function(t){t?this.dragging.enable():this.dragging.disable()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"title",{get:function(){return this.getElement().getAttribute("title")},set:function(t){this.options.title=t,this.getElement().setAttribute("title",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alt",{get:function(){return this.getElement().getAttribute("alt")},set:function(t){this.options.alt=t,this.getElement().setAttribute("alt",t)},enumerable:!0,configurable:!0}),e.decorators=[{type:o.Directive,args:[{providers:[s.LayerProvider,u.MarkerProvider],selector:"yaga-marker"}]}],e.propDecorators={positionChange:[{type:o.Output}],latChange:[{type:o.Output}],lngChange:[{type:o.Output}],opacityChange:[{type:o.Output}],displayChange:[{type:o.Output}],zindexChange:[{type:o.Output}],draggableChange:[{type:o.Output}],iconChange:[{type:o.Output}],tooltipOpenedChange:[{type:o.Output}],popupOpenedChange:[{type:o.Output}],dragendEvent:[{type:o.Output,args:["dragend"]}],dragstartEvent:[{type:o.Output,args:["dragstart"]}],movestartEvent:[{type:o.Output,args:["movestart"]}],dragEvent:[{type:o.Output,args:["drag"]}],moveendEvent:[{type:o.Output,args:["moveend"]}],addEvent:[{type:o.Output,args:["add"]}],removeEvent:[{type:o.Output,args:["remove"]}],popupopenEvent:[{type:o.Output,args:["popupopen"]}],popupcloseEvent:[{type:o.Output,args:["popupclose"]}],tooltipopenEvent:[{type:o.Output,args:["tooltipopen"]}],tooltipcloseEvent:[{type:o.Output,args:["tooltipclose"]}],clickEvent:[{type:o.Output,args:["click"]}],dbclickEvent:[{type:o.Output,args:["dbclick"]}],mousedownEvent:[{type:o.Output,args:["mousedown"]}],mouseoverEvent:[{type:o.Output,args:["mouseover"]}],mouseoutEvent:[{type:o.Output,args:["mouseout"]}],contextmenuEvent:[{type:o.Output,args:["contextmenu"]}],display:[{type:o.Input}],position:[{type:o.Input}],lat:[{type:o.Input}],lng:[{type:o.Input}],opacity:[{type:o.Input}],icon:[{type:o.Input}],draggable:[{type:o.Input}],title:[{type:o.Input}],alt:[{type:o.Input}]},e}(a.Marker)},wP3s:function(t,e,n){"use strict";e.a=function(t,e,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),function(i){return"number"==typeof e&&(n=e,e=null),i.lift(new a(t,e,n))}};var i=n("6Xbx"),r=n("qgI0"),o=n("lI6h"),a=function(){function t(t,e,n){void 0===n&&(n=Number.POSITIVE_INFINITY),this.project=t,this.resultSelector=e,this.concurrent=n}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.project,this.resultSelector,this.concurrent))},t}(),s=function(t){function e(e,n,i,r){void 0===r&&(r=Number.POSITIVE_INFINITY),t.call(this,e),this.project=n,this.resultSelector=i,this.concurrent=r,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return Object(i.c)(e,t),e.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},e.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(t){return void this.destination.error(t)}this.active++,this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){this.add(Object(r.a)(this,t,e,n))},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},e.prototype.notifyNext=function(t,e,n,i,r){this.resultSelector?this._notifyResultSelector(t,e,n,i):this.destination.next(e)},e.prototype._notifyResultSelector=function(t,e,n,i){var r;try{r=this.resultSelector(t,e,n,i)}catch(t){return void this.destination.error(t)}this.destination.next(r)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(o.a)},xHJr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("LMZF");e.LayerGroupProvider=function(){function t(){}return t.decorators=[{type:i.Injectable}],t}()},xIGM:function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return o});var i="undefined"!=typeof window&&window,r="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,o=i||"undefined"!=typeof t&&t||r}).call(e,n("fRUx"))},z6VO:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n("LMZF"),a=n("cqO5"),s=n("KG7u"),u=(n("xHJr"),n("iWCm"));e.WmsLayerDirective=function(t){function e(e,n){var i=t.call(this,s.TRANSPARENT_PIXEL,{layers:"",errorTileUrl:s.TRANSPARENT_PIXEL})||this;return i.urlChange=new o.EventEmitter,i.displayChange=new o.EventEmitter,i.opacityChange=new o.EventEmitter,i.zIndexChange=new o.EventEmitter,i.layersChange=new o.EventEmitter,i.stylesChange=new o.EventEmitter,i.formatChange=new o.EventEmitter,i.versionChange=new o.EventEmitter,i.transparentChange=new o.EventEmitter,i.addEvent=new o.EventEmitter,i.removeEvent=new o.EventEmitter,i.popupopenEvent=new o.EventEmitter,i.popupcloseEvent=new o.EventEmitter,i.tooltipopenEvent=new o.EventEmitter,i.tooltipcloseEvent=new o.EventEmitter,i.clickEvent=new o.EventEmitter,i.dbclickEvent=new o.EventEmitter,i.mousedownEvent=new o.EventEmitter,i.mouseoverEvent=new o.EventEmitter,i.mouseoutEvent=new o.EventEmitter,i.contextmenuEvent=new o.EventEmitter,i.loadingEvent=new o.EventEmitter,i.tileunloadEvent=new o.EventEmitter,i.tileloadstartEvent=new o.EventEmitter,i.tileerrorEvent=new o.EventEmitter,i.tileloadEvent=new o.EventEmitter,i.loadEvent=new o.EventEmitter,n.ref=i,i.on("remove",function(){i.displayChange.emit(!1)}),i.on("add",function(){i.displayChange.emit(!0)}),e.ref.addLayer(i),i.on("add",function(t){i.addEvent.emit(t)}),i.on("remove",function(t){i.removeEvent.emit(t)}),i.on("popupopen",function(t){i.popupopenEvent.emit(t)}),i.on("popupclose",function(t){i.popupcloseEvent.emit(t)}),i.on("tooltipopen",function(t){i.tooltipopenEvent.emit(t)}),i.on("tooltipclose",function(t){i.tooltipcloseEvent.emit(t)}),i.on("click",function(t){i.clickEvent.emit(t)}),i.on("dbclick",function(t){i.dbclickEvent.emit(t)}),i.on("mousedown",function(t){i.mousedownEvent.emit(t)}),i.on("mouseover",function(t){i.mouseoverEvent.emit(t)}),i.on("mouseout",function(t){i.mouseoutEvent.emit(t)}),i.on("contextmenu",function(t){i.contextmenuEvent.emit(t)}),i.on("loading",function(t){i.loadingEvent.emit(t)}),i.on("tileunload",function(t){i.tileunloadEvent.emit(t)}),i.on("tileloadstart",function(t){i.tileloadstartEvent.emit(t)}),i.on("tileerror",function(t){i.tileerrorEvent.emit(t)}),i.on("tileload",function(t){i.tileloadEvent.emit(t)}),i.on("load",function(t){i.loadEvent.emit(t)}),i}return r(e,t),e.prototype.ngOnDestroy=function(){this.removeFrom(this._map)},e.prototype.setUrl=function(e,n){if(this.url!==e)return this.urlChange.emit(e),t.prototype.setUrl.call(this,e,n)},Object.defineProperty(e.prototype,"url",{get:function(){return this._url},set:function(t){this.setUrl(t)},enumerable:!0,configurable:!0}),e.prototype.setOpacity=function(e){if(this.opacity!==e)return this.opacityChange.emit(e),t.prototype.setOpacity.call(this,e)},Object.defineProperty(e.prototype,"opacity",{get:function(){return this.options.opacity},set:function(t){this.setOpacity(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"display",{get:function(){var t,e;try{t=this.getPane(),e=this.getContainer()}catch(t){return!1}for(var n=0;n<t.children.length;n+=1)if(t.children[n]===e)return!0;return!1},set:function(t){if(this.display!==t){var e,n,i,r,o;try{e=this.getPane(),n=this.getContainer(),i=this._map,r=this.getEvents(),o=Object.keys(r)}catch(t){return}if(t){e.appendChild(n);for(var a=0,s=o;a<s.length;a++)i.on(c=s[a],r[c],this);this.redraw()}else{e.removeChild(n);for(var u=0,l=o;u<l.length;u++){var c;i.off(c=l[u],r[c],this)}}}},enumerable:!0,configurable:!0}),e.prototype.setZIndex=function(e){return t.prototype.setZIndex.call(this,e),this.zIndexChange.emit(e),this},Object.defineProperty(e.prototype,"zIndex",{get:function(){return this.options.zIndex},set:function(t){this.setZIndex(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tileSize",{get:function(){return this.options.tileSize},set:function(t){this.options.tileSize=t,this.redraw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"updateWhenIdle",{get:function(){return this.options.updateWhenIdle},set:function(t){this.options.updateWhenIdle=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"updateWhenZooming",{get:function(){return this.options.updateWhenZooming},set:function(t){this.options.updateWhenZooming=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"updateInterval",{get:function(){return this.options.updateInterval},set:function(t){this.options.updateInterval=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bounds",{get:function(){return this.options.bounds},set:function(t){this.options.bounds=t,this.redraw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"noWrap",{get:function(){return this.options.noWrap},set:function(t){this.options.noWrap=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"className",{get:function(){return this.options.className},set:function(t){this.options.className=t,this.redraw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"keepBuffer",{get:function(){return this.options.keepBuffer},set:function(t){this.options.keepBuffer=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxZoom",{get:function(){return this.options.maxZoom},set:function(t){this.options.maxZoom=t,this._map&&this._map._updateZoomLevels(),this.redraw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minZoom",{get:function(){return this.options.minZoom},set:function(t){this.options.minZoom=t,this._map&&this._map._updateZoomLevels(),this.redraw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxNativeZoom",{get:function(){return this.options.maxNativeZoom},set:function(t){this.options.maxNativeZoom=t,this.redraw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minNativeZoom",{get:function(){return this.options.minNativeZoom},set:function(t){this.options.minNativeZoom=t,this.redraw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"subdomains",{get:function(){return"string"==typeof this.options.subdomains&&(this.options.subdomains=this.options.subdomains.split("")),this.options.subdomains},set:function(t){this.options.subdomains=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"errorTileUrl",{get:function(){return this.options.errorTileUrl},set:function(t){this.options.errorTileUrl=t,this.redraw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"zoomOffset",{get:function(){return this.options.zoomOffset},set:function(t){this.options.zoomOffset=t,this.redraw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tms",{get:function(){return this.options.tms},set:function(t){this.options.tms=t,this.redraw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"zoomReverse",{get:function(){return this.options.zoomReverse},set:function(t){this.options.zoomReverse=t,this.redraw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"detectRetina",{get:function(){return this.options.detectRetina},set:function(t){this.options.detectRetina=t,this.redraw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"crossOrigin",{get:function(){return this.options.crossOrigin},set:function(t){this.options.crossOrigin=t,this.redraw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"uppercase",{get:function(){return this.options.uppercase},set:function(t){this.options.uppercase=t,this.redraw()},enumerable:!0,configurable:!0}),e.prototype.setParams=function(e,n){return t.prototype.setParams.call(this,e,n),this.layersChange.emit(this.wmsParams.layers.split(",")),this.stylesChange.emit(this.wmsParams.styles.split(",")),this.formatChange.emit(this.wmsParams.format),this.versionChange.emit(this.wmsParams.version),this.transparentChange.emit(this.wmsParams.transparent),this},Object.defineProperty(e.prototype,"layers",{get:function(){return this.wmsParams.layers.split(",")},set:function(t){var e=Object.create(this.wmsParams);e.layers=t.join(","),this.setParams(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"styles",{get:function(){return this.wmsParams.styles.split(",")},set:function(t){var e=Object.create(this.wmsParams);e.styles=t.join(","),this.setParams(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"format",{get:function(){return this.wmsParams.format},set:function(t){var e=Object.create(this.wmsParams);e.format=t,this.setParams(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return this.wmsParams.version},set:function(t){var e=Object.create(this.wmsParams);e.version=t,this.setParams(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"transparent",{get:function(){return this.wmsParams.transparent},set:function(t){var e=Object.create(this.wmsParams);e.transparent=t,this.setParams(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"attribution",{get:function(){return this.getAttribution()},set:function(t){this._map&&this._map.attributionControl&&(this._map.attributionControl.removeAttribution(this.getAttribution()),this._map.attributionControl.addAttribution(t)),this.options.attribution=t},enumerable:!0,configurable:!0}),e.decorators=[{type:o.Directive,args:[{providers:[u.LayerProvider],selector:"yaga-wms-layer"}]}],e.propDecorators={urlChange:[{type:o.Output}],displayChange:[{type:o.Output}],opacityChange:[{type:o.Output}],zIndexChange:[{type:o.Output}],layersChange:[{type:o.Output}],stylesChange:[{type:o.Output}],formatChange:[{type:o.Output}],versionChange:[{type:o.Output}],transparentChange:[{type:o.Output}],addEvent:[{type:o.Output,args:["add"]}],removeEvent:[{type:o.Output,args:["remove"]}],popupopenEvent:[{type:o.Output,args:["popupopen"]}],popupcloseEvent:[{type:o.Output,args:["popupclose"]}],tooltipopenEvent:[{type:o.Output,args:["tooltipopen"]}],tooltipcloseEvent:[{type:o.Output,args:["tooltipclose"]}],clickEvent:[{type:o.Output,args:["click"]}],dbclickEvent:[{type:o.Output,args:["dbclick"]}],mousedownEvent:[{type:o.Output,args:["mousedown"]}],mouseoverEvent:[{type:o.Output,args:["mouseover"]}],mouseoutEvent:[{type:o.Output,args:["mouseout"]}],contextmenuEvent:[{type:o.Output,args:["contextmenu"]}],loadingEvent:[{type:o.Output,args:["loading"]}],tileunloadEvent:[{type:o.Output,args:["tileunload"]}],tileloadstartEvent:[{type:o.Output,args:["tileloadstart"]}],tileerrorEvent:[{type:o.Output,args:["tileerror"]}],tileloadEvent:[{type:o.Output,args:["tileload"]}],loadEvent:[{type:o.Output,args:["load"]}],url:[{type:o.Input}],opacity:[{type:o.Input}],display:[{type:o.Input}],zIndex:[{type:o.Input}],tileSize:[{type:o.Input}],updateWhenIdle:[{type:o.Input}],updateWhenZooming:[{type:o.Input}],updateInterval:[{type:o.Input}],bounds:[{type:o.Input}],noWrap:[{type:o.Input}],className:[{type:o.Input}],keepBuffer:[{type:o.Input}],maxZoom:[{type:o.Input}],minZoom:[{type:o.Input}],maxNativeZoom:[{type:o.Input}],minNativeZoom:[{type:o.Input}],subdomains:[{type:o.Input}],errorTileUrl:[{type:o.Input}],zoomOffset:[{type:o.Input}],tms:[{type:o.Input}],zoomReverse:[{type:o.Input}],detectRetina:[{type:o.Input}],crossOrigin:[{type:o.Input}],uppercase:[{type:o.Input}],layers:[{type:o.Input}],styles:[{type:o.Input}],format:[{type:o.Input}],version:[{type:o.Input}],transparent:[{type:o.Input}],attribution:[{type:o.Input}]},e}(a.TileLayer.WMS)},"zV/f":function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n("LMZF"),a=n("cqO5");n("iWCm"),e.TooltipDirective=function(t){function e(e,n){var i=t.call(this)||this;return i.layerProvider=e,i.contentChange=new o.EventEmitter,i.openedChange=new o.EventEmitter,i.latChange=new o.EventEmitter,i.lngChange=new o.EventEmitter,i.positionChange=new o.EventEmitter,i.opacityChange=new o.EventEmitter,i.openEvent=new o.EventEmitter,i.closeEvent=new o.EventEmitter,i.setContent(n.nativeElement),i.on("add",function(t){i.openEvent.emit(t),i.openedChange.emit(!0)}),i.on("remove",function(t){i.closeEvent.emit(t),i.openedChange.emit(!1)}),i.layerProvider.ref.bindTooltip(i),i}return r(e,t),e.prototype.ngOnDestroy=function(){this._source&&this._source.unbindTooltip()},e.prototype.setContent=function(e){return this.contentChange.emit(e),t.prototype.setContent.call(this,e)},Object.defineProperty(e.prototype,"content",{get:function(){return this.getContent()},set:function(t){this.setContent(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"opened",{get:function(){return!!this._map},set:function(t){t?this.layerProvider.ref.openTooltip():this.layerProvider.ref.closeTooltip()},enumerable:!0,configurable:!0}),e.prototype.setLatLng=function(e){return t.prototype.setLatLng.call(this,e),this.latChange.emit(this.lat),this.lngChange.emit(this.lng),this.positionChange.emit(a.latLng(this.lat,this.lng)),this},Object.defineProperty(e.prototype,"lat",{get:function(){return this.getLatLng().lat},set:function(t){this.setLatLng([t,this.lng])},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lng",{get:function(){return this.getLatLng().lng},set:function(t){this.setLatLng([this.lat,t])},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this.getLatLng()},set:function(t){this.setLatLng(t)},enumerable:!0,configurable:!0}),e.prototype.setOpacity=function(e){t.prototype.setOpacity.call(this,e),this.opacityChange.emit(e)},Object.defineProperty(e.prototype,"opacity",{get:function(){return this.options.opacity},set:function(t){this.setOpacity(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"className",{get:function(){return this.options.className},set:function(t){this.options.className=t,this._updateLayout()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pane",{get:function(){return this.options.pane},set:function(t){this.options.pane=t,this._updateLayout()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"interactive",{get:function(){return this.options.interactive},set:function(t){this.options.interactive=t,this._updateLayout()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sticky",{get:function(){return this.options.sticky},set:function(t){this.options.sticky=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"direction",{get:function(){return this.options.direction},set:function(t){this.options.direction=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"permanent",{get:function(){return this.options.permanent},set:function(t){this.options.permanent=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"offset",{get:function(){return this.options.offset},set:function(t){this.options.offset=t},enumerable:!0,configurable:!0}),e.decorators=[{type:o.Directive,args:[{selector:"yaga-tooltip"}]}],e.propDecorators={contentChange:[{type:o.Output}],openedChange:[{type:o.Output}],latChange:[{type:o.Output}],lngChange:[{type:o.Output}],positionChange:[{type:o.Output}],opacityChange:[{type:o.Output}],openEvent:[{type:o.Output,args:["open"]}],closeEvent:[{type:o.Output,args:["close"]}],content:[{type:o.Input}],opened:[{type:o.Input}],lat:[{type:o.Input}],lng:[{type:o.Input}],position:[{type:o.Input}],opacity:[{type:o.Input}],className:[{type:o.Input}],pane:[{type:o.Input}],interactive:[{type:o.Input}],sticky:[{type:o.Input}],direction:[{type:o.Input}],permanent:[{type:o.Input}],offset:[{type:o.Input}]},e}(a.Tooltip)}},[0]);