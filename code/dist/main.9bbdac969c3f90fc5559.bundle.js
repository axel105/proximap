webpackJsonp([1],{"/UCc":function(t,e,n){"use strict";function r(t){return!!(t&&t.constructor&&t.call&&t.apply)}function i(t){return!(!t||"object"!=typeof t||r(t))}e.isFunction=r,e.isObject=i,e.isPlainObject=function(t){return i(t)&&t.constructor===Object}},0:function(t,e,n){t.exports=n("cDNt")},"1j/l":function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=Array.isArray||function(t){return t&&"number"==typeof t.length}},"2jIh":function(t,e,n){"use strict";(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.a=n}).call(e,n("fRUx"))},"2kLc":function(t,e,n){"use strict";e.a=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var n=Number.POSITIVE_INFINITY,s=null,u=t[t.length-1];return Object(o.a)(u)?(s=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(n=t.pop())):"number"==typeof u&&(n=t.pop()),null===s&&1===t.length&&t[0]instanceof r.Observable?t[0]:Object(a.a)(n)(new i.a(t,s))};var r=n("AP4T"),i=n("Oryw"),o=n("3iOE"),a=n("bywS")},"3iOE":function(t,e,n){"use strict";e.a=function(t){return t&&"function"==typeof t.schedule}},"5JxN":function(t,e,n){"use strict";var r=n("LMZF"),i=n("kP2E"),o=n("eaoh");function a(t){return new i.NgRedux(t)}e._ngReduxFactory=a,e.NgReduxModule=function(){function t(){}return t.decorators=[{type:r.NgModule,args:[{providers:[o.DevToolsExtension,{provide:i.NgRedux,useFactory:a,deps:[r.NgZone]}]}]}],t}()},"5jKg":function(t,e,n){"use strict";e.a=function(t,e){return function(n){return n.lift(new a(t,e))}};var r=n("6Xbx"),i=n("lI6h"),o=n("qgI0"),a=function(){function t(t,e){this.project=t,this.resultSelector=e}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.project,this.resultSelector))},t}(),s=function(t){function e(e,n,r){t.call(this,e),this.project=n,this.resultSelector=r,this.index=0}return Object(r.c)(e,t),e.prototype._next=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(t){return void this.destination.error(t)}this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){var r=this.innerSubscription;r&&r.unsubscribe(),this.add(this.innerSubscription=Object(o.a)(this,t,e,n))},e.prototype._complete=function(){var e=this.innerSubscription;e&&!e.closed||t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.innerSubscription=null},e.prototype.notifyComplete=function(e){this.remove(e),this.innerSubscription=null,this.isStopped&&t.prototype._complete.call(this)},e.prototype.notifyNext=function(t,e,n,r,i){this.resultSelector?this._tryNotifyNext(t,e,n,r):this.destination.next(e)},e.prototype._tryNotifyNext=function(t,e,n,r){var i;try{i=this.resultSelector(t,e,n,r)}catch(t){return void this.destination.error(t)}this.destination.next(i)},e}(i.a)},"6KUg":function(t,e,n){"use strict";var r=n("kP2E");e.NgRedux=r.NgRedux;var i=n("eaoh");e.DevToolsExtension=i.DevToolsExtension;var o=n("lBzb");e.select=o.select;var a=n("5JxN");e.NgReduxModule=a.NgReduxModule},"6S6c":function(t,e,n){"use strict";e.a=function(t,e){return Object(r.a)(t,e)(this)};var r=n("LaOa")},"6Xbx":function(t,e,n){"use strict";e.c=function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},n.d(e,"a",function(){return i}),e.b=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},e.d=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}},"8Ut3":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("6Xbx"),i=function(t){function e(e,n){t.call(this),this.value=e,this.scheduler=n,this._isScalar=!0,n&&(this._isScalar=!1)}return Object(r.c)(e,t),e.create=function(t,n){return new e(t,n)},e.dispatch=function(t){var e=t.value,n=t.subscriber;t.done?n.complete():(n.next(e),n.closed||(t.done=!0,this.schedule(t)))},e.prototype._subscribe=function(t){var n=this.value,r=this.scheduler;if(r)return r.schedule(e.dispatch,0,{done:!1,value:n,subscriber:t});t.next(n),t.closed||t.complete()},e}(n("AP4T").Observable)},"8ofh":function(t,e,n){"use strict";e.a=function(t){return r=t,o};var r,i=n("NePw");function o(){try{return r.apply(this,arguments)}catch(t){return i.a.e=t,i.a}}},ABGK:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("AP4T"),i=n("6Xbx"),o=n("E9/g"),a=n("8ofh"),s=n("NePw"),u=function(){function t(t,e){this.compare=t,this.keySelector=e}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.compare,this.keySelector))},t}(),l=function(t){function e(e,n,r){t.call(this,e),this.keySelector=r,this.hasKey=!1,"function"==typeof n&&(this.compare=n)}return Object(i.c)(e,t),e.prototype.compare=function(t,e){return t===e},e.prototype._next=function(t){var e=t;if(this.keySelector&&(e=Object(a.a)(this.keySelector)(t))===s.a)return this.destination.error(s.a.e);var n=!1;if(this.hasKey){if((n=Object(a.a)(this.compare)(this.key,e))===s.a)return this.destination.error(s.a.e)}else this.hasKey=!0;!1===Boolean(n)&&(this.key=e,this.destination.next(t))},e}(o.a);r.Observable.prototype.distinctUntilChanged=function(t,e){return function(t,e){return function(n){return n.lift(new u(t,e))}}(t,e)(this)}},AP4T:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("xIGM"),i=n("E9/g"),o=n("V7AE"),a=n("grVA"),s=n("mz3w");n.d(e,"Observable",function(){return u});var u=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var r=this.operator,s=function(t,e,n){if(t){if(t instanceof i.a)return t;if(t[o.a])return t[o.a]()}return t||e||n?new i.a(t,e,n):new i.a(a.a)}(t,e,n);if(r?r.call(s,this.source):s.add(this.source||!s.syncErrorThrowable?this._subscribe(s):this._trySubscribe(s)),s.syncErrorThrowable&&(s.syncErrorThrowable=!1,s.syncErrorThrown))throw s.syncErrorValue;return s},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.syncErrorThrown=!0,t.syncErrorValue=e,t.error(e)}},t.prototype.forEach=function(t,e){var n=this;if(e||(r.a.Rx&&r.a.Rx.config&&r.a.Rx.config.Promise?e=r.a.Rx.config.Promise:r.a.Promise&&(e=r.a.Promise)),!e)throw new Error("no Promise impl found");return new e(function(e,r){var i;i=n.subscribe(function(e){if(i)try{t(e)}catch(t){r(t),i.unsubscribe()}else t(e)},r,e)})},t.prototype._subscribe=function(t){return this.source.subscribe(t)},t.prototype[s.a]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return 0===t.length?this:((n=t)?1===n.length?n[0]:function(t){return n.reduce(function(t,e){return e(t)},t)}:function(){})(this);var n},t.prototype.toPromise=function(t){var e=this;if(t||(r.a.Rx&&r.a.Rx.config&&r.a.Rx.config.Promise?t=r.a.Rx.config.Promise:r.a.Promise&&(t=r.a.Promise)),!t)throw new Error("no Promise impl found");return new t(function(t,n){var r;e.subscribe(function(t){return r=t},function(t){return n(t)},function(){return t(r)})})},t.create=function(e){return new t(e)},t}()},AYro:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i,o=n("2jIh"),a="object"==typeof self&&self&&self.Object===Object&&self,s=(o.a||a||Function("return this")()).Symbol,u=Object.prototype,l=u.hasOwnProperty,c=u.toString,h=s?s.toStringTag:void 0,p=Object.prototype.toString,f=s?s.toStringTag:void 0,d=(r=Object.getPrototypeOf,i=Object,function(t){return r(i(t))}),m=Function.prototype,g=Object.prototype,y=m.toString,v=g.hasOwnProperty,_=y.call(Object),b=function(t){if(!function(t){return null!=t&&"object"==typeof t}(t)||"[object Object]"!=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":f&&f in Object(t)?function(t){var e=l.call(t,h),n=t[h];try{t[h]=void 0;var r=!0}catch(t){}var i=c.call(t);return r&&(e?t[h]=n:delete t[h]),i}(t):function(t){return p.call(t)}(t)}(t))return!1;var e=d(t);if(null===e)return!0;var n=v.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&y.call(n)==_},x=n("R1KX"),w={INIT:"@@redux/INIT"};function E(t,e,n){var r;if("function"==typeof e&&"undefined"==typeof n&&(n=e,e=void 0),"undefined"!=typeof n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(E)(t,e)}if("function"!=typeof t)throw new Error("Expected the reducer to be a function.");var i=t,o=e,a=[],s=a,u=!1;function l(){s===a&&(s=a.slice())}function c(){return o}function h(t){if("function"!=typeof t)throw new Error("Expected listener to be a function.");var e=!0;return l(),s.push(t),function(){if(e){e=!1,l();var n=s.indexOf(t);s.splice(n,1)}}}function p(t){if(!b(t))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if("undefined"==typeof t.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(u)throw new Error("Reducers may not dispatch actions.");try{u=!0,o=i(o,t)}finally{u=!1}for(var e=a=s,n=0;n<e.length;n++)(0,e[n])();return t}return p({type:w.INIT}),(r={dispatch:p,subscribe:h,getState:c,replaceReducer:function(t){if("function"!=typeof t)throw new Error("Expected the nextReducer to be a function.");i=t,p({type:w.INIT})}})[x.a]=function(){var t,e=h;return(t={subscribe:function(t){if("object"!=typeof t)throw new TypeError("Expected the observer to be an object.");function n(){t.next&&t.next(c())}return n(),{unsubscribe:e(n)}}})[x.a]=function(){return this},t},r}function C(t,e){var n=e&&e.type;return"Given action "+(n&&'"'+n.toString()+'"'||"an action")+', reducer "'+t+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function S(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++){var i=e[r];"function"==typeof t[i]&&(n[i]=t[i])}var o=Object.keys(n),a=void 0;try{!function(t){Object.keys(t).forEach(function(e){var n=t[e];if("undefined"==typeof n(void 0,{type:w.INIT}))throw new Error('Reducer "'+e+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if("undefined"==typeof n(void 0,{type:"@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".")}))throw new Error('Reducer "'+e+"\" returned undefined when probed with a random type. Don't try to handle "+w.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')})}(n)}catch(t){a=t}return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1];if(a)throw a;for(var r=!1,i={},s=0;s<o.length;s++){var u=o[s],l=t[u],c=(0,n[u])(l,e);if("undefined"==typeof c){var h=C(u,e);throw new Error(h)}i[u]=c,r=r||c!==l}return r?i:t}}function I(t,e){return function(){return e(t.apply(void 0,arguments))}}function T(t,e){if("function"==typeof t)return I(t,e);if("object"!=typeof t||null===t)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===t?"null":typeof t)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var n=Object.keys(t),r={},i=0;i<n.length;i++){var o=n[i],a=t[o];"function"==typeof a&&(r[o]=I(a,e))}return r}function k(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return 0===e.length?function(t){return t}:1===e.length?e[0]:e.reduce(function(t,e){return function(){return t(e.apply(void 0,arguments))}})}var O=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};function P(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return function(n,r,i){var o,a=t(n,r,i),s=a.dispatch,u={getState:a.getState,dispatch:function(t){return s(t)}};return o=e.map(function(t){return t(u)}),s=k.apply(void 0,o)(a.dispatch),O({},a,{dispatch:s})}}}n.d(e,"createStore",function(){return E}),n.d(e,"combineReducers",function(){return S}),n.d(e,"bindActionCreators",function(){return T}),n.d(e,"applyMiddleware",function(){return P}),n.d(e,"compose",function(){return k})},B1iP:function(t,e,n){"use strict";e.a=function(t){return"function"==typeof t}},C0ll:function(t,e,n){"use strict";e.omit=function(t,e){var n=Object.assign({},t);return e.forEach(function(t){return delete n[t]}),n}},CRau:function(t,e,n){!function(t){"use strict";function e(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");var r=n.bbox,i=n.id;if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");r&&S(r),i&&I(i);var o={type:"Feature"};return i&&(o.id=i),r&&(o.bbox=r),o.properties=e||{},o.geometry=t,o}function n(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");var i,a=n.bbox;if(!t)throw new Error("type is required");if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");switch(a&&S(a),t){case"Point":i=r(e).geometry;break;case"LineString":i=s(e).geometry;break;case"Polygon":i=o(e).geometry;break;case"MultiPoint":i=h(e).geometry;break;case"MultiLineString":i=c(e).geometry;break;case"MultiPolygon":i=p(e).geometry;break;default:throw new Error(t+" is invalid")}return a&&(i.bbox=a),i}function r(t,n,r){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!E(t[0])||!E(t[1]))throw new Error("coordinates must contain numbers");return e({type:"Point",coordinates:t},n,r)}function i(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");return l(t.map(function(t){return r(t,e)}),n)}function o(t,n,r){if(!t)throw new Error("coordinates is required");for(var i=0;i<t.length;i++){var o=t[i];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<o[o.length-1].length;a++){if(0===i&&0===a&&!E(o[0][0])||!E(o[0][1]))throw new Error("coordinates must contain numbers");if(o[o.length-1][a]!==o[0][a])throw new Error("First and last Position are not equivalent.")}}return e({type:"Polygon",coordinates:t},n,r)}function a(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");return l(t.map(function(t){return o(t,e)}),n)}function s(t,n,r){if(!t)throw new Error("coordinates is required");if(t.length<2)throw new Error("coordinates must be an array of two or more positions");if(!E(t[0][1])||!E(t[0][1]))throw new Error("coordinates must contain numbers");return e({type:"LineString",coordinates:t},n,r)}function u(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");return l(t.map(function(t){return s(t,e)}),n)}function l(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.bbox,r=e.id;if(!t)throw new Error("No features passed");if(!Array.isArray(t))throw new Error("features must be an Array");n&&S(n),r&&I(r);var i={type:"FeatureCollection"};return r&&(i.id=r),n&&(i.bbox=n),i.features=t,i}function c(t,n,r){if(!t)throw new Error("coordinates is required");return e({type:"MultiLineString",coordinates:t},n,r)}function h(t,n,r){if(!t)throw new Error("coordinates is required");return e({type:"MultiPoint",coordinates:t},n,r)}function p(t,n,r){if(!t)throw new Error("coordinates is required");return e({type:"MultiPolygon",coordinates:t},n,r)}function f(t,n,r){if(!t)throw new Error("geometries is required");if(!Array.isArray(t))throw new Error("geometries must be an Array");return e({type:"GeometryCollection",geometries:t},n,r)}function d(t,e){if(void 0===t||null===t||isNaN(t))throw new Error("num is required");if(e&&!(e>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n}function m(t,e){if(void 0===t||null===t)throw new Error("radians is required");if(e&&"string"!=typeof e)throw new Error("units must be a string");var n=vo[e||"kilometers"];if(!n)throw new Error(e+" units is invalid");return t*n}function g(t,e){if(void 0===t||null===t)throw new Error("distance is required");if(e&&"string"!=typeof e)throw new Error("units must be a string");var n=vo[e||"kilometers"];if(!n)throw new Error(e+" units is invalid");return t/n}function y(t,e){return _(g(t,e))}function v(t){if(null===t||void 0===t)throw new Error("bearing is required");var e=t%360;return e<0&&(e+=360),e}function _(t){if(null===t||void 0===t)throw new Error("radians is required");return t%(2*Math.PI)*180/Math.PI}function b(t){if(null===t||void 0===t)throw new Error("degrees is required");return t%360*Math.PI/180}function x(t,e,n){if(null===t||void 0===t)throw new Error("length is required");if(!(t>=0))throw new Error("length must be a positive number");return m(g(t,e),n||"kilometers")}function w(t,e,n){if(null===t||void 0===t)throw new Error("area is required");if(!(t>=0))throw new Error("area must be a positive number");var r=bo[e||"meters"];if(!r)throw new Error("invalid original units");var i=bo[n||"kilometers"];if(!i)throw new Error("invalid final units");return t/r*i}function E(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function C(t){return!!t&&t.constructor===Object}function S(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach(function(t){if(!E(t))throw new Error("bbox must only contain numbers")})}function I(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}function T(t,e,n){if(null!==t)for(var r,i,o,a,s,u,l,c,h=0,p=0,f=t.type,d="FeatureCollection"===f,m="Feature"===f,g=d?t.features.length:1,y=0;y<g;y++){s=(c=!!(l=d?t.features[y].geometry:m?t.geometry:t)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var v=0;v<s;v++){var _=0,b=0;if(null!==(a=c?l.geometries[v]:l)){u=a.coordinates;var x=a.type;switch(h=!n||"Polygon"!==x&&"MultiPolygon"!==x?0:1,x){case null:break;case"Point":e(u,p,y,_,b),p++,_++;break;case"LineString":case"MultiPoint":for(r=0;r<u.length;r++)e(u[r],p,y,_,b),p++,"MultiPoint"===x&&_++;"LineString"===x&&_++;break;case"Polygon":case"MultiLineString":for(r=0;r<u.length;r++){for(i=0;i<u[r].length-h;i++)e(u[r][i],p,y,_,b),p++;"MultiLineString"===x&&_++,"Polygon"===x&&b++}"Polygon"===x&&_++;break;case"MultiPolygon":for(r=0;r<u.length;r++){for("MultiPolygon"===x&&(b=0),i=0;i<u[r].length;i++){for(o=0;o<u[r][i].length-h;o++)e(u[r][i][o],p,y,_,b),p++;b++}_++}break;case"GeometryCollection":for(r=0;r<a.geometries.length;r++)T(a.geometries[r],e,n);break;default:throw new Error("Unknown Geometry Type")}}}}}function k(t,e,n,r){var i=n;return T(t,function(t,r,o,a,s){i=0===r&&void 0===n?t:e(i,t,r,o,a,s)},r),i}function O(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length;n++)e(t.features[n].properties,n);break;case"Feature":e(t.properties,0)}}function P(t,e,n){var r=n;return O(t,function(t,i){r=0===i&&void 0===n?t:e(r,t,i)}),r}function A(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length;n++)e(t.features[n],n)}function M(t,e,n){var r=n;return A(t,function(t,i){r=0===i&&void 0===n?t:e(r,t,i)}),r}function R(t){var e=[];return T(t,function(t){e.push(t)}),e}function L(t,e){var n,r,i,o,a,s,u,l,c,h,p=0,f="FeatureCollection"===t.type,d="Feature"===t.type,m=f?t.features.length:1;for(n=0;n<m;n++){for(s=f?t.features[n].geometry:d?t.geometry:t,l=f?t.features[n].properties:d?t.properties:{},c=f?t.features[n].bbox:d?t.bbox:void 0,h=f?t.features[n].id:d?t.id:void 0,a=(u=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,i=0;i<a;i++)if(null!==(o=u?s.geometries[i]:s))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":e(o,p,l,c,h);break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)e(o.geometries[r],p,l,c,h);break;default:throw new Error("Unknown Geometry Type")}else e(null,p,l,c,h);p++}}function N(t,e,n){var r=n;return L(t,function(t,i,o,a,s){r=0===i&&void 0===n?t:e(r,t,i,o,a,s)}),r}function D(t,n){L(t,function(t,r,i,o,a){var s,u=null===t?null:t.type;switch(u){case null:case"Point":case"LineString":case"Polygon":return void n(e(t,i,{bbox:o,id:a}),r,0)}switch(u){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}t.coordinates.forEach(function(t,o){n(e({type:s,coordinates:t},i),r,o)})})}function F(t,e,n){var r=n;return D(t,function(t,i,o){r=0===i&&0===o&&void 0===n?t:e(r,t,i,o)}),r}function z(t,e){D(t,function(t,n,r){var i=0;if(t.geometry){var o=t.geometry.type;"Point"!==o&&"MultiPoint"!==o&&k(t,function(o,a,u,l,c,h){var p=s([o,a],t.properties);return e(p,n,r,h,i),i++,a})}})}function j(t,e,n){var r=n,i=!1;return z(t,function(t,o,a,s,u){r=!1===i&&void 0===n?t:e(r,t,o,a,s,u),i=!0}),r}function B(t,e){if(!t)throw new Error("geojson is required");D(t,function(t,n,r){if(null!==t.geometry){var i=t.geometry.coordinates;switch(t.geometry.type){case"LineString":e(t,n,r,0,0);break;case"Polygon":for(var o=0;o<i.length;o++)e(s(i[o],t.properties),n,r,o)}}})}function V(t,e,n){var r=n;return B(t,function(t,i,o,a){r=0===i&&void 0===n?t:e(r,t,i,o,a)}),r}function q(t){var e=[1/0,1/0,-1/0,-1/0];return T(t,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}function U(t){if(!t)throw new Error("obj is required");var e=G(t);if(e.length>1&&E(e[0])&&E(e[1]))return e;throw new Error("Coordinate is not a valid Point")}function G(t){if(!t)throw new Error("obj is required");var e;if(t.length?e=t:t.coordinates?e=t.coordinates:t.geometry&&t.geometry.coordinates&&(e=t.geometry.coordinates),e)return X(e),e;throw new Error("No valid coordinates")}function X(t){if(t.length>1&&E(t[0])&&E(t[1]))return!0;if(Array.isArray(t[0])&&t[0].length)return X(t[0]);throw new Error("coordinates must only contain numbers")}function H(t,e,n){if(!e||!n)throw new Error("type and name required");if(!t||t.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.type)}function Y(t,e,n){if(!t)throw new Error("No feature passed");if(!n)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.geometry.type)}function Z(t,e,n){if(!t)throw new Error("No featureCollection passed");if(!n)throw new Error(".collectionOf() requires a name");if(!t||"FeatureCollection"!==t.type)throw new Error("Invalid input to "+n+", FeatureCollection required");for(var r=0;r<t.features.length;r++){var i=t.features[r];if(!i||"Feature"!==i.type||!i.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!i.geometry||i.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+i.geometry.type)}}function W(t){if(!t)throw new Error("geojson is required");if(void 0!==t.geometry)return t.geometry;if(t.coordinates||t.geometries)return t;throw new Error("geojson must be a valid Feature or Geometry Object")}function K(){throw new Error("invariant.getGeomType has been deprecated in v5.0 in favor of invariant.getType")}function J(t,e){if(!t)throw new Error((e||"geojson")+" is required");if(t.geometry&&t.geometry.type)return t.geometry.type;if(t.type)return t.type;throw new Error((e||"geojson")+" is invalid")}function Q(t,e,n){n=n||{};for(var r=Object.keys(Co),i=0;i<r.length;i++){var o=r[i],a=n[o];So[o]=a=void 0!==a&&null!==a?a:Co[o]}So.verbose&&console.log("MarchingSquaresJS-isoContours: computing isocontour for "+e);var s=function(t){var e=[],n=0;return t.cells.forEach(function(r,i){r.forEach(function(r,o){if(void 0!==r&&5!==r.cval&&10!==r.cval&&!tt(r)){var a=function(t,e,n){var r,i,o,a=t.length,s=[],u=[0,0,1,1,0,0,0,0,-1,0,1,1,-1,0,-1,0],l=[0,-1,0,0,1,1,1,1,0,-1,0,0,0,-1,0,0],c=["none","bottom","right","right","top","top","top","top","left","bottom","right","right","left","bottom","left","none"],h=t[e][n],p=h.cval,f=nt(h,o=["none","left","bottom","left","right","none","bottom","left","top","top","none","top","right","right","bottom","none"][p]);s.push([n+f[0],e+f[1]]),f=nt(h,o=c[p]),s.push([n+f[0],e+f[1]]),et(h);for(var d=n+u[p],m=e+l[p],g=p;d>=0&&m>=0&&m<a&&(d!=n||m!=e)&&void 0!==(h=t[m][d]);){if(0===(p=h.cval)||15===p)return{path:s,info:"mergeable"};o=c[p],r=u[p],i=l[p],5!==p&&10!==p||(5===p?h.flipped?-1===l[g]?(o="left",r=-1,i=0):(o="right",r=1,i=0):-1===u[g]&&(o="bottom",r=0,i=-1):10===p&&(h.flipped?-1===u[g]?(o="top",r=0,i=1):(o="bottom",r=0,i=-1):1===l[g]&&(o="left",r=-1,i=0))),f=nt(h,o),s.push([d+f[0],m+f[1]]),et(h),d+=r,m+=i,g=p}return{path:s,info:"closed"}}(t.cells,i,o),s=!1;if("mergeable"===a.info)for(var u=a.path[a.path.length-1][0],l=a.path[a.path.length-1][1],c=n-1;c>=0;c--)if(Math.abs(e[c][0][0]-u)<=1e-7&&Math.abs(e[c][0][1]-l)<=1e-7){for(var h=a.path.length-2;h>=0;--h)e[c].unshift(a.path[h]);s=!0;break}s||(e[n++]=a.path)}})}),e}(function(t,e){for(var n=t.length-1,r=t[0].length-1,i={rows:n,cols:r,cells:[]},o=0;o<n;++o){i.cells[o]=[];for(var a=0;a<r;++a){var s=0,u=t[o+1][a],l=t[o+1][a+1],c=t[o][a+1],h=t[o][a];if(!(isNaN(u)||isNaN(l)||isNaN(c)||isNaN(h))){s|=u>=e?8:0,s|=l>=e?4:0,s|=c>=e?2:0;var p,f,d,m,g=!1;if(5==(s|=h>=e?1:0)||10===s){var y=(u+l+c+h)/4;5===s&&y<e?(s=10,g=!0):10===s&&y<e&&(s=5,g=!0)}0!==s&&15!==s&&(p=f=d=m=.5,1===s?(d=1-$(e,u,h),f=1-$(e,c,h)):2===s?(f=$(e,h,c),m=1-$(e,l,c)):3===s?(d=1-$(e,u,h),m=1-$(e,l,c)):4===s?(p=$(e,u,l),m=$(e,c,l)):5===s?(p=$(e,u,l),m=$(e,c,l),f=1-$(e,c,h),d=1-$(e,u,h)):6===s?(f=$(e,h,c),p=$(e,u,l)):7===s?(d=1-$(e,u,h),p=$(e,u,l)):8===s?(d=$(e,h,u),p=1-$(e,l,u)):9===s?(f=1-$(e,c,h),p=1-$(e,l,u)):10===s?(p=1-$(e,l,u),m=1-$(e,l,c),f=$(e,h,c),d=$(e,h,u)):11===s?(p=1-$(e,l,u),m=1-$(e,l,c)):12===s?(d=$(e,h,u),m=$(e,c,l)):13===s?(f=1-$(e,c,h),m=$(e,c,l)):14===s?(d=$(e,h,u),f=$(e,h,c)):console.log("MarchingSquaresJS-isoContours: Illegal cval detected: "+s),i.cells[o][a]={cval:s,flipped:g,top:p,right:m,bottom:f,left:d})}}}return i}(t,e));return"function"==typeof So.successCallback&&So.successCallback(s),s}function $(t,e,n){return(t-e)/(n-e)}function tt(t){return 0===t.cval||15===t.cval}function et(t){tt(t)||5===t.cval||10===t.cval||(t.cval=15)}function nt(t,e){return"top"===e?[t.top,1]:"bottom"===e?[t.bottom,0]:"right"===e?[1,t.right]:"left"===e?[0,t.left]:void 0}function rt(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function it(t,e){if(!(this instanceof it))return new it(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function ot(t,e){at(t,0,t.children.length,e,t)}function at(t,e,n,r,i){i||(i=dt(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o,a=e;a<n;a++)o=t.children[a],st(i,t.leaf?r(o):o);return i}function st(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function ut(t,e){return t.minX-e.minX}function lt(t,e){return t.minY-e.minY}function ct(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function ht(t){return t.maxX-t.minX+(t.maxY-t.minY)}function pt(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function ft(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function dt(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function mt(t,e,n,r,i){for(var o,a=[e,n];a.length;)(n=a.pop())-(e=a.pop())<=r||(o=e+Math.ceil((n-e)/r/2)*r,Io(t,o,e,n,i),a.push(e,o,o,n))}function gt(t,e){return t(e={exports:{}},e.exports),e.exports}function yt(t,e){if(!(this instanceof yt))return new yt(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||function(t,e){return t<e?-1:t>e?1:0},this.length>0)for(var n=(this.length>>1)-1;n>=0;n--)this._down(n)}function vt(t,e,n){e=Math.max(0,void 0===e?2:e),n=n||0;for(var r,i=function(t){for(var e=t[0],n=t[0],r=t[0],i=t[0],o=0;o<t.length;o++){var a=t[o];a[0]<e[0]&&(e=a),a[0]>r[0]&&(r=a),a[1]<n[1]&&(n=a),a[1]>i[1]&&(i=a)}var s=[e,n,r,i],u=s.slice();for(o=0;o<t.length;o++)jo(t[o],s)||u.push(t[o]);var l=No(u),c=[];for(o=0;o<l.length;o++)c.push(u[l[o]]);return c}(t),o=To(16,["[0]","[1]","[0]","[1]"]).load(t),a=[],s=0;s<i.length;s++){var u=i[s];o.remove(u),r=Et(u,r),a.push(r)}var l=To(16);for(s=0;s<a.length;s++)l.insert(wt(a[s]));for(var c=e*e,h=n*n;a.length;){var p=a.shift(),f=p.p,d=p.next.p,m=Ct(f,d);if(!(m<h)){var g=m/c;(u=function(t,e,n,r,i,o,a){for(var s=new Fo(null,_t),u=t.data;u;){for(var l=0;l<u.children.length;l++){var c=u.children[l],h=u.leaf?St(c,n,r):function(t,e,n){if(bt(t,n)||bt(e,n))return 0;var r=It(t[0],t[1],e[0],e[1],n.minX,n.minY,n.maxX,n.minY);if(0===r)return 0;var i=It(t[0],t[1],e[0],e[1],n.minX,n.minY,n.minX,n.maxY);if(0===i)return 0;var o=It(t[0],t[1],e[0],e[1],n.maxX,n.minY,n.maxX,n.maxY);if(0===o)return 0;var a=It(t[0],t[1],e[0],e[1],n.minX,n.maxY,n.maxX,n.maxY);return 0===a?0:Math.min(r,i,o,a)}(n,r,c);h>o||s.push({node:c,dist:h})}for(;s.length&&!s.peek().node.children;){var p=s.pop(),f=p.node,d=St(f,e,n),m=St(f,r,i);if(p.dist<d&&p.dist<m&&xt(n,f,a)&&xt(r,f,a))return f}(u=s.pop())&&(u=u.node)}return null}(o,p.prev.p,f,d,p.next.next.p,g,l))&&Math.min(Ct(u,f),Ct(u,d))<=g&&(a.push(p),a.push(Et(u,p)),o.remove(u),l.remove(p),l.insert(wt(p)),l.insert(wt(p.next)))}}p=r;var y=[];do{y.push(p.p),p=p.next}while(p!==r);return y.push(p.p),y}function _t(t,e){return t.dist-e.dist}function bt(t,e){return t[0]>=e.minX&&t[0]<=e.maxX&&t[1]>=e.minY&&t[1]<=e.maxY}function xt(t,e,n){for(var r=Math.min(t[0],e[0]),i=Math.min(t[1],e[1]),o=Math.max(t[0],e[0]),a=Math.max(t[1],e[1]),s=n.search({minX:r,minY:i,maxX:o,maxY:a}),u=0;u<s.length;u++)if(function(t,e,n,r){return t!==r&&e!==n&&Bo(t,e,n)>0!=Bo(t,e,r)>0&&Bo(n,r,t)>0!=Bo(n,r,e)>0}(s[u].p,s[u].next.p,t,e))return!1;return!0}function wt(t){var e=t.p,n=t.next.p;return t.minX=Math.min(e[0],n[0]),t.minY=Math.min(e[1],n[1]),t.maxX=Math.max(e[0],n[0]),t.maxY=Math.max(e[1],n[1]),t}function Et(t,e){var n={p:t,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return e?(n.next=e.next,n.prev=e,e.next.prev=n,e.next=n):(n.prev=n,n.next=n),n}function Ct(t,e){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function St(t,e,n){var r=e[0],i=e[1],o=n[0]-r,a=n[1]-i;if(0!==o||0!==a){var s=((t[0]-r)*o+(t[1]-i)*a)/(o*o+a*a);s>1?(r=n[0],i=n[1]):s>0&&(r+=o*s,i+=a*s)}return(o=t[0]-r)*o+(a=t[1]-i)*a}function It(t,e,n,r,i,o,a,s){var u,l,c,h,p=n-t,f=r-e,d=a-i,m=s-o,g=t-i,y=e-o,v=p*p+f*f,_=p*d+f*m,b=d*d+m*m,x=p*g+f*y,w=d*g+m*y,E=v*b-_*_,C=E,S=E;0===E?(l=0,C=1,h=w,S=b):(h=v*w-_*x,(l=_*w-b*x)<0?(l=0,h=w,S=b):l>C&&(l=C,h=w+_,S=b)),h<0?(h=0,-x<0?l=0:-x>v?l=C:(l=-x,C=v)):h>S&&(h=S,-x+_<0?l=0:-x+_>v?l=C:(l=-x+_,C=v)),u=0===l?0:l/C;var I=(1-(c=0===h?0:h/S))*i+c*a-((1-u)*t+u*n),T=(1-c)*o+c*s-((1-u)*e+u*r);return I*I+T*T}function Tt(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.concavity||1/0,r=[];if(T(t,function(t){r.push([t[0],t[1]])}),!r.length)return null;var i=Vo(r,n);return i.length>3?o([i]):null}function kt(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var r=n.ignoreBoundary;if(!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var i=U(t),o=G(e),a=e.geometry?e.geometry.type:e.type,s=e.bbox;if(s&&0==(s[0]<=i[0]&&s[1]<=i[1]&&s[2]>=i[0]&&s[3]>=i[1]))return!1;"Polygon"===a&&(o=[o]);for(var u=0,l=!1;u<o.length&&!l;u++)if(Ot(i,o[u][0],r)){for(var c=!1,h=1;h<o[u].length&&!c;)Ot(i,o[u][h],!r)&&(c=!0),h++;c||(l=!0)}return l}function Ot(t,e,n){var r=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var i=0,o=e.length-1;i<e.length;o=i++){var a=e[i][0],s=e[i][1],u=e[o][0],l=e[o][1];if(t[1]*(a-u)+s*(u-t[0])+l*(t[0]-a)==0&&(a-t[0])*(u-t[0])<=0&&(s-t[1])*(l-t[1])<=0)return!n;s>t[1]!=l>t[1]&&t[0]<(u-a)*(t[1]-s)/(l-s)+a&&(r=!r)}return r}function Pt(t,e){var n=[];return L(e,function(e){A(t,function(t){kt(t,e)&&n.push(t)})}),l(n)}function At(t,e){if("FeatureCollection"!==t.type)throw new Error("points must be a FeatureCollection");var n=!1;return l(function(t){if(t.length<3)return[];t.sort(Rt);for(var e,n,r,i=t.length-1,o=t[i].x,a=t[0].x,s=t[i].y,u=s;i--;)t[i].y<s&&(s=t[i].y),t[i].y>u&&(u=t[i].y);var l,c=a-o,h=u-s,p=c>h?c:h,f=.5*(a+o),d=.5*(u+s),m=[new Mt({x:f-20*p,y:d-p,__sentinel:!0},{x:f,y:d+20*p,__sentinel:!0},{x:f+20*p,y:d-p,__sentinel:!0})],g=[],y=[];for(i=t.length;i--;){for(y.length=0,l=m.length;l--;)(c=t[i].x-m[l].x)>0&&c*c>m[l].r?(g.push(m[l]),m.splice(l,1)):c*c+(h=t[i].y-m[l].y)*h>m[l].r||(y.push(m[l].a,m[l].b,m[l].b,m[l].c,m[l].c,m[l].a),m.splice(l,1));for(Lt(y),l=y.length;l;)n=y[--l],e=y[--l],r=t[i],Math.abs(2*((n.x-e.x)*(r.y-n.y)-(n.y-e.y)*(r.x-n.x)))>1e-12&&m.push(new Mt(e,n,r))}for(Array.prototype.push.apply(g,m),i=g.length;i--;)(g[i].a.__sentinel||g[i].b.__sentinel||g[i].c.__sentinel)&&g.splice(i,1);return g}(t.features.map(function(t){var r={x:t.geometry.coordinates[0],y:t.geometry.coordinates[1]};return e?r.z=t.properties[e]:3===t.geometry.coordinates.length&&(n=!0,r.z=t.geometry.coordinates[2]),r})).map(function(t){var e=[t.a.x,t.a.y],r=[t.b.x,t.b.y],i=[t.c.x,t.c.y],a={};return n?(e.push(t.a.z),r.push(t.b.z),i.push(t.c.z)):a={a:t.a.z,b:t.b.z,c:t.c.z},o([[e,r,i,e]],a)}))}function Mt(t,e,n){this.a=t,this.b=e,this.c=n;var r,i,o=e.x-t.x,a=e.y-t.y,s=n.x-t.x,u=n.y-t.y,l=o*(t.x+e.x)+a*(t.y+e.y),c=s*(t.x+n.x)+u*(t.y+n.y),h=2*(o*(n.y-e.y)-a*(n.x-e.x));this.x=(u*l-a*c)/h,this.y=(o*c-s*l)/h,this.r=(r=this.x-t.x)*r+(i=this.y-t.y)*i}function Rt(t,e){return e.x-t.x}function Lt(t){var e,n,r,i,o,a=t.length;t:for(;a;)for(n=t[--a],e=t[--a],r=a;r;)if(o=t[--r],i=t[--r],e===i&&n===o||e===o&&n===i){t.splice(a,2),t.splice(r,2),a-=2;continue t}}function Nt(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");var r=n.units,i=U(t),o=U(e),a=b(o[1]-i[1]),s=b(o[0]-i[0]),u=b(i[1]),l=b(o[1]),c=Math.pow(Math.sin(a/2),2)+Math.pow(Math.sin(s/2),2)*Math.cos(u)*Math.cos(l);return m(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)),r)}function Dt(t){if(!t)throw new Error("geojson is required");switch(t.type){case"Feature":return Ft(t);case"FeatureCollection":return function(t){var e={type:"FeatureCollection"};return Object.keys(t).forEach(function(n){switch(n){case"type":case"features":return;default:e[n]=t[n]}}),e.features=t.features.map(function(t){return Ft(t)}),e}(t);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return zt(t);default:throw new Error("unknown GeoJSON type")}}function Ft(t){var e={type:"Feature"};return Object.keys(t).forEach(function(n){switch(n){case"type":case"properties":case"geometry":return;default:e[n]=t[n]}}),e.properties=function t(e){var n={};return e?(Object.keys(e).forEach(function(r){var i=e[r];n[r]="object"==typeof i?null===i?null:i.length?i.map(function(t){return t}):t(i):i}),n):n}(t.properties),e.geometry=zt(t.geometry),e}function zt(t){var e={type:t.type};return t.bbox&&(e.bbox=t.bbox),"GeometryCollection"===t.type?(e.geometries=t.geometries.map(function(t){return zt(t)}),e):(e.coordinates=function t(e){return"object"!=typeof e[0]?e.slice():e.map(function(e){return t(e)})}(t.coordinates),e)}function jt(t,e){function n(t,e){e.length&&e.pop();for(var n=u[t<0?~t:t],r=0,i=n.length;r<i;++r)e.push(s(n[r],r));t<0&&Go(e,i)}function r(t){return s(t)}function i(t){for(var e=[],r=0,i=t.length;r<i;++r)n(t[r],e);return e.length<2&&e.push(e[0]),e}function o(t){for(var e=i(t);e.length<4;)e.push(e[0]);return e}function a(t){return t.map(o)}var s=Uo(t.transform),u=t.arcs;return function t(e){var n,o=e.type;switch(o){case"GeometryCollection":return{type:o,geometries:e.geometries.map(t)};case"Point":n=r(e.coordinates);break;case"MultiPoint":n=e.coordinates.map(r);break;case"LineString":n=i(e.arcs);break;case"MultiLineString":n=e.arcs.map(i);break;case"Polygon":n=a(e.arcs);break;case"MultiPolygon":n=e.arcs.map(a);break;default:return null}return{type:o,coordinates:n}}(e)}function Bt(t,e,n){for(var r,i=e+(n---e>>1);e<i;++e,--n)r=t[e],t[e]=t[n],t[n]=r}function Vt(t){return null==t?{type:null}:("FeatureCollection"===t.type?function(t){var e={type:"GeometryCollection",geometries:t.features.map(qt)};return null!=t.bbox&&(e.bbox=t.bbox),e}:"Feature"===t.type?qt:Ut)(t)}function qt(t){var e,n=Ut(t.geometry);for(e in null!=t.id&&(n.id=t.id),null!=t.bbox&&(n.bbox=t.bbox),t.properties){n.properties=t.properties;break}return n}function Ut(t){if(null==t)return{type:null};var e="GeometryCollection"===t.type?{type:"GeometryCollection",geometries:t.geometries.map(Ut)}:"Point"===t.type||"MultiPoint"===t.type?{type:t.type,coordinates:t.coordinates}:{type:t.type,arcs:t.coordinates};return null!=t.bbox&&(e.bbox=t.bbox),e}function Gt(t){var e,n=t[0],r=t[1];return r<n&&(e=n,n=r,r=e),n+31*r}function Xt(t,e){var n,r=t[0],i=t[1],o=e[0],a=e[1];return i<r&&(n=r,r=i,i=n),a<o&&(n=o,o=a,a=n),r===o&&i===a}function Ht(t){return t[0].toString()+","+t[1].toString()}function Yt(t,n){var r="object"==typeof n?n.mutate:n;if(!t)throw new Error("geojson is required");var i=J(t),o=[];switch(i){case"LineString":o=Zt(t);break;case"MultiLineString":case"Polygon":G(t).forEach(function(t){o.push(Zt(t))});break;case"MultiPolygon":G(t).forEach(function(t){var e=[];t.forEach(function(t){e.push(Zt(t))}),o.push(e)});break;case"Point":return t;case"MultiPoint":var a={};G(t).forEach(function(t){var e=t.join("-");a.hasOwnProperty(e)||(o.push(t),a[e]=!0)});break;default:throw new Error(i+" geometry not supported")}return t.coordinates?!0===r?(t.coordinates=o,t):{type:i,coordinates:o}:!0===r?(t.geometry.coordinates=o,t):e({type:i,coordinates:o},t.properties,t.bbox)}function Zt(t){var e=G(t);if(2===e.length&&!function(t,e){return t[0]===e[0]&&t[1]===e[1]}(e[0],e[1]))return e;var n,r,i=[],o=e.length-1;i.push(e[0]);for(var a=1;a<o;a++)(function(t,e,n){var r=n[0],i=n[1],o=t[0],a=t[1],s=e[0],u=e[1],l=s-o,c=u-a;return(r-o)*c-(i-a)*l==0&&(Math.abs(l)>=Math.abs(c)?l>0?o<=r&&r<=s:s<=r&&r<=o:c>0?a<=i&&i<=u:u<=i&&i<=a)})(e[a-1],r=e[a+1],n=e[a])||i.push(n);return i.push(r),i}function Wt(t,e){var n=t.x-e.x,r=t.y-e.y;return n*n+r*r}function Kt(t,e,n){var r=e.x,i=e.y,o=n.x-r,a=n.y-i;if(0!==o||0!==a){var s=((t.x-r)*o+(t.y-i)*a)/(o*o+a*a);s>1?(r=n.x,i=n.y):s>0&&(r+=o*s,i+=a*s)}return(o=t.x-r)*o+(a=t.y-i)*a}function Jt(t,e,n){if(t.length<=2)return t;var r=void 0!==e?e*e:1;return function(t,e){var n=t.length-1,r=[t[0]];return function t(e,n,r,i,o){for(var a,s=i,u=n+1;u<r;u++){var l=Kt(e[u],e[n],e[r]);l>s&&(a=u,s=l)}s>i&&(a-n>1&&t(e,n,a,i,o),o.push(e[a]),r-a>1&&t(e,a,r,i,o))}(t,0,n,e,r),r.push(t[n]),r}(t=n?t:function(t,e){for(var n,r=t[0],i=[r],o=1,a=t.length;o<a;o++)Wt(n=t[o],r)>e&&(i.push(n),r=n);return r!==n&&i.push(n),i}(t,r),r)}function Qt(t,e,n){return Jt(t.map(function(t){return{x:t[0],y:t[1],z:t[2]}}),e,n).map(function(t){return t.z?[t.x,t.y,t.z]:[t.x,t.y]})}function $t(t,e,n){return t.map(function(t){var r=t.map(function(t){return{x:t[0],y:t[1]}});if(r.length<4)throw new Error("invalid polygon");for(var i=Jt(r,e,n).map(function(t){return[t.x,t.y]});i.length<3||3===i.length&&i[2][0]===i[0][0]&&i[2][1]===i[0][1];)i=Jt(r,e-=.01*e,n).map(function(t){return[t.x,t.y]});return i[i.length-1][0]===i[0][0]&&i[i.length-1][1]===i[0][1]||i.push(i[0]),i})}function te(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.resolution||1e4,r=e.sharpness||.85;if(!t)throw new Error("line is required");if(!E(n))throw new Error("resolution must be an number");if(!E(r))throw new Error("sharpness must be an number");for(var i=[],o=new Jo({points:W(t).coordinates.map(function(t){return{x:t[0],y:t[1]}}),duration:n,sharpness:r}),a=0;a<o.duration;a+=10){var u=o.pos(a);Math.floor(a/100)%2==0&&i.push([u.x,u.y])}return s(i,t.properties)}function ee(t){S(t);var e=Number(t[0]),n=Number(t[1]),r=Number(t[2]),i=Number(t[3]);if(6===t.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var a=[e,n];return o([[a,[r,n],[r,i],[e,i],a]])}function ne(t){return ee(q(t))}function re(t){var e=t[0],n=t[1],r=t[2],i=t[3];if(Nt(t.slice(0,2),[r,n])>=Nt(t.slice(0,2),[e,i])){var o=(n+i)/2;return[e,o-(r-e)/2,r,o+(r-e)/2]}var a=(e+r)/2;return[a-(i-n)/2,n,a+(i-n)/2,i]}function ie(t,e,n,i){if(!C(i=i||{}))throw new Error("options is invalid");var o=i.units,a=i.properties,s=U(t),u=b(s[0]),l=b(s[1]),c=b(n),h=g(e,o),p=Math.asin(Math.sin(l)*Math.cos(h)+Math.cos(l)*Math.sin(h)*Math.cos(c));return r([_(u+Math.atan2(Math.sin(c)*Math.sin(h)*Math.cos(l),Math.cos(h)-Math.sin(l)*Math.sin(p))),_(p)],a)}function oe(t,e,n){var r=(n=n||{}).steps||64,i=n.properties;if(!t)throw new Error("center is required");if(!e)throw new Error("radius is required");if("object"!=typeof n)throw new Error("options must be an object");if("number"!=typeof r)throw new Error("steps must be a number");r=r||64,i=i||t.properties||{};for(var a=[],s=0;s<r;s++)a.push(ie(t,e,-360*s/r,n).geometry.coordinates);return a.push(a[0]),o([a],i)}function ae(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");if(!0===n.final)return function(t,e){return(ae(e,t)+180)%360}(t,e);var r=U(t),i=U(e),o=b(r[0]),a=b(i[0]),s=b(r[1]),u=b(i[1]),l=Math.sin(a-o)*Math.cos(u),c=Math.cos(s)*Math.sin(u)-Math.sin(s)*Math.cos(u)*Math.cos(a-o);return _(Math.atan2(l,c))}function se(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.properties;if(!t)throw new Error("geojson is required");var i=q(t);return r([(i[0]+i[2])/2,(i[1]+i[3])/2],n)}function ue(t,e){var n=0,i=0,o=0;return T(t,function(t){n+=t[0],i+=t[1],o++},!0),r([n/o,i/o],e)}function le(t){var e=[];return"FeatureCollection"===t.type?A(t,function(t){T(t,function(n){e.push(r(n,t.properties))})}):T(t,function(n){e.push(r(n,t.properties))}),l(e)}function ce(t,e,n){n=n||2;var r,i,o,a,s,u,l,c=e&&e.length,h=c?e[0]*n:t.length,p=he(t,0,h,n,!0),f=[];if(!p)return f;if(c&&(p=function(t,e,n,r){var i,o,a,s=[];for(i=0,o=e.length;i<o;i++)(a=he(t,e[i]*r,i<o-1?e[i+1]*r:t.length,r,!1))===a.next&&(a.steiner=!0),s.push(function(t){var e=t,n=t;do{e.x<n.x&&(n=e),e=e.next}while(e!==t);return n}(a));for(s.sort(fe),i=0;i<s.length;i++)!function(t,e){if(e=function(t,e){var n,r=e,i=t.x,o=t.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===a)return n.prev;var u,l=n,c=n.x,h=n.y,p=1/0;for(r=n.next;r!==l;)i>=r.x&&r.x>=c&&i!==r.x&&me(o<h?i:a,o,c,h,o<h?a:i,o,r.x,r.y)&&((u=Math.abs(o-r.y)/(i-r.x))<p||u===p&&r.x>n.x)&&_e(r,t)&&(n=r,p=u),r=r.next;return n}(t,e)){var n=be(e,t);pe(n,n.next)}}(s[i],n),n=pe(n,n.next);return n}(t,e,p,n)),t.length>80*n){r=o=t[0],i=a=t[1];for(var d=n;d<h;d+=n)u=t[d+1],(s=t[d])<r&&(r=s),u<i&&(i=u),s>o&&(o=s),u>a&&(a=u);l=0!==(l=Math.max(o-r,a-i))?1/l:0}return function t(e,n,r,i,o,a,s){if(e){!s&&a&&function(t,e,n,r){var i=t;do{null===i.z&&(i.z=de(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,a,s,u,l=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,r=n,s=0,e=0;e<l&&(s++,r=r.nextZ);e++);for(u=l;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,l*=2}while(a>1)}(i)}(e,i,o,a);for(var u,l,c=e;e.prev!==e.next;)if(u=e.prev,l=e.next,a?function(t,e,n,r){var i=t.prev,o=t,a=t.next;if(ge(i,o,a)>=0)return!1;for(var s=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,u=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,l=de(i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,e,n,r),c=de(s,u,e,n,r),h=t.nextZ;h&&h.z<=c;){if(h!==t.prev&&h!==t.next&&me(i.x,i.y,o.x,o.y,a.x,a.y,h.x,h.y)&&ge(h.prev,h,h.next)>=0)return!1;h=h.nextZ}for(h=t.prevZ;h&&h.z>=l;){if(h!==t.prev&&h!==t.next&&me(i.x,i.y,o.x,o.y,a.x,a.y,h.x,h.y)&&ge(h.prev,h,h.next)>=0)return!1;h=h.prevZ}return!0}(e,i,o,a):function(t){var e=t.prev,n=t,r=t.next;if(ge(e,n,r)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(me(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&ge(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}(e))n.push(u.i/r),n.push(e.i/r),n.push(l.i/r),we(e),e=l.next,c=l.next;else if((e=l)===c){s?1===s?t(e=function(t,e,n){var r=t;do{var i=r.prev,o=r.next.next;!ye(i,o)&&ve(i,r,r.next,o)&&_e(i,o)&&_e(o,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(o.i/n),we(r),we(r.next),r=t=o),r=r.next}while(r!==t);return r}(e,n,r),n,r,i,o,a,2):2===s&&function(e,n,r,i,o,a){var s=e;do{for(var u=s.next.next;u!==s.prev;){if(s.i!==u.i&&function(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&ve(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&_e(t,e)&&_e(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)}(s,u)){var l=be(s,u);return s=pe(s,s.next),l=pe(l,l.next),t(s,n,r,i,o,a),void t(l,n,r,i,o,a)}u=u.next}s=s.next}while(s!==e)}(e,n,r,i,o,a):t(pe(e),n,r,i,o,a,1);break}}}(p,f,n,r,i,l),f}function he(t,e,n,r,i){var o,a;if(i===Ce(t,e,n,r)>0)for(o=e;o<n;o+=r)a=xe(o,t[o],t[o+1],a);else for(o=n-r;o>=e;o-=r)a=xe(o,t[o],t[o+1],a);return a&&ye(a,a.next)&&(we(a),a=a.next),a}function pe(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!ye(r,r.next)&&0!==ge(r.prev,r,r.next))r=r.next;else{if(we(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function fe(t,e){return t.x-e.x}function de(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function me(t,e,n,r,i,o,a,s){return(i-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(r-s)-(n-a)*(e-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function ge(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function ye(t,e){return t.x===e.x&&t.y===e.y}function ve(t,e,n,r){return!!(ye(t,e)&&ye(n,r)||ye(t,r)&&ye(n,e))||ge(t,e,n)>0!=ge(t,e,r)>0&&ge(n,r,t)>0!=ge(n,r,e)>0}function _e(t,e){return ge(t.prev,t,t.next)<0?ge(t,e,t.next)>=0&&ge(t,t.prev,e)>=0:ge(t,e,t.prev)<0||ge(t,t.next,e)<0}function be(t,e){var n=new Ee(t.i,t.x,t.y),r=new Ee(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function xe(t,e,n,r){var i=new Ee(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function we(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Ee(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Ce(t,e,n,r){for(var i=0,o=e,a=n-r;o<n;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}function Se(t){var e=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[i][o][a]);i>0&&n.holes.push(r+=t[i-1].length)}return n}(t),n=Qo(e.vertices,e.holes,2),r=[],i=[];n.forEach(function(t,r){var o=n[r];i.push([e.vertices[2*o],e.vertices[2*o+1]])});for(var a=0;a<i.length;a+=3){var s=i.slice(a,a+3);s.push(i[a]),r.push(o([s]))}return r}function Ie(t,e){if(!t)throw new Error("targetPoint is required");if(!e)throw new Error("points is required");var n,r=1/0;return A(e,function(e,i){var o=Nt(t,e);o<r&&((n=Dt(e)).properties.featureIndex=i,n.properties.distanceToPoint=o,r=o)}),n}function Te(t,e,n,r,i){!function t(e,n,r,i,o){for(;i>r;){if(i-r>600){var a=i-r+1,s=n-r+1,u=Math.log(a),l=.5*Math.exp(2*u/3),c=.5*Math.sqrt(u*l*(a-l)/a)*(s-a/2<0?-1:1);t(e,n,Math.max(r,Math.floor(n-s*l/a+c)),Math.min(i,Math.floor(n+(a-s)*l/a+c)),o)}var h=e[n],p=r,f=i;for(ke(e,r,n),o(e[i],h)>0&&ke(e,r,i);p<f;){for(ke(e,p,f),p++,f--;o(e[p],h)<0;)p++;for(;o(e[f],h)>0;)f--}0===o(e[r],h)?ke(e,r,f):ke(e,++f,i),f<=n&&(r=f+1),n<=f&&(i=f-1)}}(t,e,n||0,r||t.length-1,i||function(t,e){return t<e?-1:t>e?1:0})}function ke(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function Oe(t,e){if(!(this instanceof Oe))return new Oe(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function Pe(t,e){Ae(t,0,t.children.length,e,t)}function Ae(t,e,n,r,i){i||(i=je(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o,a=e;a<n;a++)o=t.children[a],Me(i,t.leaf?r(o):o);return i}function Me(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function Re(t,e){return t.minX-e.minX}function Le(t,e){return t.minY-e.minY}function Ne(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function De(t){return t.maxX-t.minX+(t.maxY-t.minY)}function Fe(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function ze(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function je(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Be(t,e,n,r,i){for(var o,a=[e,n];a.length;)(n=a.pop())-(e=a.pop())<=r||(Te(t,o=e+Math.ceil((n-e)/r/2)*r,e,n,i),a.push(e,o,o,n))}function Ve(t){var e=Oe(t);return e.insert=function(t){if(Array.isArray(t)){var e=t;(t=qe(e)).bbox=e}else t.bbox=t.bbox?t.bbox:Ue(t);return Oe.prototype.insert.call(this,t)},e.load=function(t){var e=[];return Array.isArray(t)?t.forEach(function(t){var n=qe(t);n.bbox=t,e.push(n)}):A(t,function(t){t.bbox=t.bbox?t.bbox:Ue(t),e.push(t)}),Oe.prototype.load.call(this,e)},e.remove=function(t){if(Array.isArray(t)){var e=t;(t=qe(e)).bbox=e}return Oe.prototype.remove.call(this,t)},e.clear=function(){return Oe.prototype.clear.call(this)},e.search=function(t){return{type:"FeatureCollection",features:Oe.prototype.search.call(this,this.toBBox(t))}},e.collides=function(t){return Oe.prototype.collides.call(this,this.toBBox(t))},e.all=function(){return{type:"FeatureCollection",features:Oe.prototype.all.call(this)}},e.toJSON=function(){return Oe.prototype.toJSON.call(this)},e.fromJSON=function(t){return Oe.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e;return{minX:(e=t.bbox?t.bbox:Array.isArray(t)&&4===t.length?t:Ue(t))[0],minY:e[1],maxX:e[2],maxY:e[3]}},e}function qe(t){var e=[t[0],t[1]];return{type:"Feature",bbox:t,properties:{},geometry:{type:"Polygon",coordinates:[[e,[t[2],t[1]],[t[2],t[3]],[t[0],t[3]],e]]}}}function Ue(t){var e=[1/0,1/0,-1/0,-1/0];return T(t,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}function Ge(t){if(!t)throw new Error("geojson is required");var e=[];return D(t,function(t){!function(t,e){var n=[],r=t.geometry;switch(r.type){case"Polygon":n=G(r);break;case"LineString":n=[G(r)]}n.forEach(function(n){(function(t,e){var n=[];return t.reduce(function(t,r){var i=s([t,r],e);return i.bbox=function(t,e){var n=t[0],r=t[1],i=e[0],o=e[1];return[n<i?n:i,r<o?r:o,n>i?n:i,r>o?r:o]}(t,r),n.push(i),r}),n})(n,t.properties).forEach(function(t){t.id=e.length,e.push(t)})})}(t,e)}),l(e)}function Xe(t,n){var r={},i=[];if("LineString"===t.type&&(t=e(t)),"LineString"===n.type&&(n=e(n)),"Feature"===t.type&&"Feature"===n.type&&"LineString"===t.geometry.type&&"LineString"===n.geometry.type&&2===t.geometry.coordinates.length&&2===n.geometry.coordinates.length){var o=He(t,n);return o&&i.push(o),l(i)}var a=Ve();return a.load(Ge(n)),A(Ge(t),function(t){A(a.search(t),function(e){var n=He(t,e);if(n){var o=G(n).join(",");r[o]||(r[o]=!0,i.push(n))}})}),l(i)}function He(t,e){var n=G(t),i=G(e);if(2!==n.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==i.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var o=n[0][0],a=n[0][1],s=n[1][0],u=n[1][1],l=i[0][0],c=i[0][1],h=i[1][0],p=i[1][1],f=(p-c)*(s-o)-(h-l)*(u-a),d=(h-l)*(a-c)-(p-c)*(o-l),m=(s-o)*(a-c)-(u-a)*(o-l);if(0===f)return null;var g=d/f,y=m/f;return g>=0&&g<=1&&y>=0&&y<=1?r([o+g*(s-o),a+g*(u-a)]):null}function Ye(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");var i=t.geometry?t.geometry.type:t.type;if("LineString"!==i&&"MultiLineString"!==i)throw new Error("lines must be LineString or MultiLineString");var o=r([1/0,1/0],{dist:1/0}),a=0;return D(t,function(t){for(var i=G(t),u=0;u<i.length-1;u++){var l=r(i[u]);l.properties.dist=Nt(e,l,n);var c=r(i[u+1]);c.properties.dist=Nt(e,c,n);var h=Nt(l,c,n),p=Math.max(l.properties.dist,c.properties.dist),f=ae(l,c),d=ie(e,p,f+90,n),m=ie(e,p,f-90,n),g=Xe(s([d.geometry.coordinates,m.geometry.coordinates]),s([l.geometry.coordinates,c.geometry.coordinates])),y=null;g.features.length>0&&((y=g.features[0]).properties.dist=Nt(e,y,n),y.properties.location=a+Nt(l,y,n)),l.properties.dist<o.properties.dist&&((o=l).properties.index=u,o.properties.location=a),c.properties.dist<o.properties.dist&&((o=c).properties.index=u+1,o.properties.location=a+h),y&&y.properties.dist<o.properties.dist&&((o=y).properties.index=u),a+=h}}),o}function Ze(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");var r,i=n.final;if(!t)throw new Error("start point is required");if(!e)throw new Error("end point is required");return(r=i?We(U(e),U(t)):We(U(t),U(e)))>180?-(360-r):r}function We(t,e){var n=b(t[1]),r=b(e[1]),i=b(e[0]-t[0]);i>Math.PI&&(i-=2*Math.PI),i<-Math.PI&&(i+=2*Math.PI);var o=Math.log(Math.tan(r/2+Math.PI/4)/Math.tan(n/2+Math.PI/4));return(_(Math.atan2(i,o))+360)%360}function Ke(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");var r=n.units;if(!t)throw new Error("from point is required");if(!e)throw new Error("to point is required");var i=U(t),o=U(e);return o[0]+=o[0]-i[0]>180?-360:i[0]-o[0]>180?360:0,x(function(t,e,n){var r=n=void 0===n?yo:Number(n),i=t[1]*Math.PI/180,o=e[1]*Math.PI/180,a=o-i,s=Math.abs(e[0]-t[0])*Math.PI/180;s>Math.PI&&(s-=2*Math.PI);var u=Math.log(Math.tan(o/2+Math.PI/4)/Math.tan(i/2+Math.PI/4)),l=Math.abs(u)>1e-11?a/u:Math.cos(i);return Math.sqrt(a*a+l*l*s*s)*r}(i,o),"meters",r)}function Je(t,e){return $e(t,"mercator",e)}function Qe(t,e){return $e(t,"wgs84",e)}function $e(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");var r=n.mutate;if(!t)throw new Error("geojson is required");return Array.isArray(t)&&E(t[0])?t="mercator"===e?tn(t):en(t):(!0!==r&&(t=Dt(t)),T(t,function(t){var n="mercator"===e?tn(t):en(t);t[0]=n[0],t[1]=n[1]})),t}function tn(t){var e=Math.PI/180,n=20037508.342789244,r=[6378137*(Math.abs(t[0])<=180?t[0]:t[0]-360*function(t){return t<0?-1:t>0?1:0}(t[0]))*e,6378137*Math.log(Math.tan(.25*Math.PI+.5*t[1]*e))];return r[0]>n&&(r[0]=n),r[0]<-n&&(r[0]=-n),r[1]>n&&(r[1]=n),r[1]<-n&&(r[1]=-n),r}function en(t){var e=180/Math.PI;return[t[0]*e/6378137,(.5*Math.PI-2*Math.atan(Math.exp(-t[1]/6378137)))*e]}function nn(t,n,i){if(!C(i=i||{}))throw new Error("options is invalid");if(!t)throw new Error("pt is required");if(Array.isArray(t)?t=r(t):"Point"===t.type?t=e(t):Y(t,"Point","point"),!n)throw new Error("line is required");Array.isArray(n)?n=s(n):"LineString"===n.type?n=e(n):Y(n,"LineString","line");var o=1/0,a=t.geometry.coordinates;return z(n,function(t){var e=function(t,e,n,i){var o=i.mercator,a=!0!==o?Nt(e,t,i):rn(e,t,i),s=v(!0!==o?ae(e,t):Ze(e,t)),u=v(!0!==o?ae(e,n):Ze(e,n)),l=Math.abs(s-u);if(l>90)return a;var c=(u+180)%360,h=v(!0!==o?ae(n,t):Ze(n,t)),p=Math.abs(h-c);return p>180&&(p=Math.abs(p-360)),p>90?!0!==o?Nt(t,n,i):rn(t,n,i):!0!==o?a*Math.sin(b(l)):function(t,e,n,i){var o=0;(Math.abs(t[0])>=180||Math.abs(e[0])>=180||Math.abs(n[0])>=180)&&(o=t[0]>0||e[0]>0||n[0]>0?-180:180);var a=r(n),s=Qe(function(t,e,n){var r=t[0],i=t[1],o=e[0]-r,a=e[1]-i,s=((n[0]-r)*o+(n[1]-i)*a)/(o*o+a*a);return[r+s*o,i+s*a]}(Je([t[0]+o,t[1]]),Je([e[0]+o,e[1]]),Je([n[0]+o,n[1]])));return 0!==o&&(s[0]-=o),Ke(a,s,i)}(e,n,t,i)}(a,t.geometry.coordinates[0],t.geometry.coordinates[1],i);o>e&&(o=e)}),o}function rn(t,e,n){var r=n.units,i=0;Math.abs(t[0])>=180&&(i=t[0]>0?-180:180),Math.abs(e[0])>=180&&(i=e[0]>0?-180:180);var o=Je([t[0]+i,t[1]]),a=Je([e[0]+i,e[1]]),s=function(t){return t*t},u=s(o[0]-a[0])+s(o[1]-a[1]);return x(Math.sqrt(u),"meters",r)}function on(t){for(var n=function(t){return"FeatureCollection"!==t.type?l("Feature"!==t.type?[e(t)]:[t]):t}(t),i=se(n),o=!1,a=0;!o&&a<n.features.length;){var s,u=n.features[a].geometry,c=!1;if("Point"===u.type)i.geometry.coordinates[0]===u.coordinates[0]&&i.geometry.coordinates[1]===u.coordinates[1]&&(o=!0);else if("MultiPoint"===u.type){var h=!1;for(s=0;!h&&s<u.coordinates.length;)i.geometry.coordinates[0]===u.coordinates[s][0]&&i.geometry.coordinates[1]===u.coordinates[s][1]&&(o=!0,h=!0),s++}else if("LineString"===u.type)for(s=0;!c&&s<u.coordinates.length-1;)an(i.geometry.coordinates[0],i.geometry.coordinates[1],u.coordinates[s][0],u.coordinates[s][1],u.coordinates[s+1][0],u.coordinates[s+1][1])&&(c=!0,o=!0),s++;else if("MultiLineString"===u.type)for(var p=0;p<u.coordinates.length;){c=!1,s=0;for(var f=u.coordinates[p];!c&&s<f.length-1;)an(i.geometry.coordinates[0],i.geometry.coordinates[1],f[s][0],f[s][1],f[s+1][0],f[s+1][1])&&(c=!0,o=!0),s++;p++}else"Polygon"!==u.type&&"MultiPolygon"!==u.type||kt(i,u)&&(o=!0);a++}if(o)return i;var d=l([]);for(a=0;a<n.features.length;a++)d.features=d.features.concat(le(n.features[a]).features);return r(Ie(i,d).geometry.coordinates)}function an(t,e,n,r,i,o){return Math.sqrt((i-n)*(i-n)+(o-r)*(o-r))===Math.sqrt((t-n)*(t-n)+(e-r)*(e-r))+Math.sqrt((i-t)*(i-t)+(o-e)*(o-e))}function sn(t){return N(t,function(t,e){return t+function t(e){var n,r=0;switch(e.type){case"Polygon":return un(e.coordinates);case"MultiPolygon":for(n=0;n<e.coordinates.length;n++)r+=un(e.coordinates[n]);return r;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(n=0;n<e.geometries.length;n++)r+=t(e.geometries[n]);return r}}(e)},0)}function un(t){var e=0;if(t&&t.length>0){e+=Math.abs(ln(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(ln(t[n]))}return e}function ln(t){var e,n,r,i,o,a,s=0,u=t.length;if(u>2){for(a=0;a<u;a++)a===u-2?(r=u-2,i=u-1,o=0):a===u-1?(r=u-1,i=0,o=1):(r=a,i=a+1,o=a+2),e=t[r],n=t[i],s+=(cn(t[o][0])-cn(e[0]))*Math.sin(cn(n[1]));s=s*ea*ea/2}return s}function cn(t){return t*Math.PI/180}function hn(t,e){if(!C(e=e||{}))throw new Error("options is invalid");if(!t)throw new Error("geojson is required");return j(t,function(t,n){var r=n.geometry.coordinates;return t+Nt(r[0],r[1],e)},0)}function pn(t,e,n,r){if(!C(r=r||{}))throw new Error("options is invalid");var i,o=[];if("Feature"===t.type)i=t.geometry.coordinates;else{if("LineString"!==t.type)throw new Error("input must be a LineString Feature or Geometry");i=t.coordinates}for(var a,u,l,c=0,h=0;h<i.length&&!(e>=c&&h===i.length-1);h++){if(c>e&&0===o.length){if(!(a=e-c))return o.push(i[h]),s(o);u=ae(i[h],i[h-1])-180,l=ie(i[h],a,u,r),o.push(l.geometry.coordinates)}if(c>=n)return(a=n-c)?(u=ae(i[h],i[h-1])-180,l=ie(i[h],a,u,r),o.push(l.geometry.coordinates),s(o)):(o.push(i[h]),s(o));if(c>=e&&o.push(i[h]),h===i.length-1)return s(o);c+=Nt(i[h],i[h+1],r)}return s(i[i.length-1])}function fn(t,e,n){var r=(n=n||{}).ignoreEndVertices;if(!C(n))throw new Error("invalid options");if(!t)throw new Error("pt is required");if(!e)throw new Error("line is required");for(var i=U(t),o=G(e),a=0;a<o.length-1;a++){var s=!1;if(r&&(0===a&&(s="start"),a===o.length-2&&(s="end"),0===a&&a+1===o.length-1&&(s="both")),function(t,e,n,r){var i=n[0],o=n[1],a=t[0],s=t[1],u=e[0],l=e[1],c=u-a,h=l-s;return(n[0]-a)*h-(n[1]-s)*c==0&&(r?"start"===r?Math.abs(c)>=Math.abs(h)?c>0?a<i&&i<=u:u<=i&&i<a:h>0?s<o&&o<=l:l<=o&&o<s:"end"===r?Math.abs(c)>=Math.abs(h)?c>0?a<=i&&i<u:u<i&&i<=a:h>0?s<=o&&o<l:l<o&&o<=s:"both"===r?Math.abs(c)>=Math.abs(h)?c>0?a<i&&i<u:u<i&&i<a:h>0?s<o&&o<l:l<o&&o<s:void 0:Math.abs(c)>=Math.abs(h)?c>0?a<=i&&i<=u:u<=i&&i<=a:h>0?s<=o&&o<=l:l<=o&&o<=s)}(o[a],o[a+1],i,s))return!0}return!1}function dn(t,e){var n=J(t),r=J(e),i=W(t),o=W(e);switch(n){case"Point":switch(r){case"MultiPoint":return function(t,e){var n,r=!1;for(n=0;n<e.coordinates.length;n++)if(gn(e.coordinates[n],t.coordinates)){r=!0;break}return r}(i,o);case"LineString":return fn(i,o,{ignoreEndVertices:!0});case"Polygon":return kt(i,o,{ignoreBoundary:!0});default:throw new Error("feature2 "+r+" geometry not supported")}case"MultiPoint":switch(r){case"MultiPoint":return function(t,e){for(var n=0;n<t.coordinates.length;n++){for(var r=!1,i=0;i<e.coordinates.length;i++)gn(t.coordinates[n],e.coordinates[i])&&(r=!0);if(!r)return!1}return!0}(i,o);case"LineString":return function(t,e){for(var n=!1,r=0;r<t.coordinates.length;r++){if(!fn(t.coordinates[r],e))return!1;n||(n=fn(t.coordinates[r],e,{ignoreEndVertices:!0}))}return n}(i,o);case"Polygon":return function(t,e){for(var n=!0,r=0;r<t.coordinates.length;r++){var i=kt(t.coordinates[1],e);if(!i){n=!1;break}i=kt(t.coordinates[1],e,{ignoreBoundary:!0})}return n&&i}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"LineString":switch(r){case"LineString":return function(t,e){for(var n=0;n<t.coordinates.length;n++)if(!fn(t.coordinates[n],e))return!1;return!0}(i,o);case"Polygon":return function(t,e){if(!mn(q(e),q(t)))return!1;for(var n=!1,r=0;r<t.coordinates.length-1;r++){if(!kt(t.coordinates[r],e))return!1;n||(n=kt(t.coordinates[r],e,{ignoreBoundary:!0})),n||(n=kt(function(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}(t.coordinates[r],t.coordinates[r+1]),e,{ignoreBoundary:!0}))}return n}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"Polygon":switch(r){case"Polygon":return function(t,e){var n=q(t);if(!mn(q(e),n))return!1;for(var r=0;r<t.coordinates[0].length;r++)if(!kt(t.coordinates[0][r],e))return!1;return!0}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}default:throw new Error("feature1 "+n+" geometry not supported")}}function mn(t,e){return!(t[0]>e[0]||t[2]<e[2]||t[1]>e[1]||t[3]<e[3])}function gn(t,e){return t[0]===e[0]&&t[1]===e[1]}function yn(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");var i=n.mask,o=n.properties,a=[];if(null===e||void 0===e)throw new Error("cellSide is required");if(!E(e))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(i&&-1===["Polygon","MultiPolygon"].indexOf(J(i)))throw new Error("options.mask must be a (Multi)Polygon");for(var s=t[0],u=t[1],c=t[2],h=t[3],p=e/Nt([s,u],[c,u],n)*(c-s),f=e/Nt([s,u],[s,h],n)*(h-u),d=c-s,m=h-u,g=Math.floor(d/p),y=(m-Math.floor(m/f)*f)/2,v=s+(d-g*p)/2;v<=c;){for(var _=u+y;_<=h;){var b=r([v,_],o);i?dn(b,i)&&a.push(b):a.push(b),_+=f}v+=p}return l(a)}function vn(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.precision,r=e.coordinates,i=e.mutate;if(n=void 0===n||null===n||isNaN(n)?6:n,r=void 0===r||null===r||isNaN(r)?3:r,!t)throw new Error("<geojson> is required");if("number"!=typeof n)throw new Error("<precision> must be a number");if("number"!=typeof r)throw new Error("<coordinates> must be a number");!1!==i&&void 0!==i||(t=JSON.parse(JSON.stringify(t)));var o=Math.pow(10,n);return T(t,function(t){!function(t,e,n){t.length>n&&t.splice(n,t.length);for(var r=0;r<t.length;r++)t[r]=Math.round(t[r]*e)/e}(t,o,r)}),t}function _n(t,e){if(!t||!e)return!1;if(t.length!==e.length)return!1;for(var n=0,r=t.length;n<r;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!_n(t[n],e[n]))return!1}else if(t[n]!==e[n])return!1;return!0}function bn(t,e){if(void 0===e&&(e=!0),3!=t.length)throw new Error("This function requires an array of three points [x,y]");return(t[1][0]-t[0][0])*(t[2][1]-t[0][1])-(t[1][1]-t[0][1])*(t[2][0]-t[0][0])>=0==e}function xn(t,e){if(!t||!e)return!1;if(t.length!=e.length)return!1;for(var n=0,r=t.length;n<r;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!xn(t[n],e[n]))return!1}else if(t[n]!=e[n])return!1;return!0}function wn(t,e){var n=[],r=Ve();return D(e,function(e){if(n.forEach(function(t,e){t.id=e}),n.length){var i=r.search(e);if(i.features.length){var o=Cn(e,i);n=n.filter(function(t){return t.id!==o.id}),r.remove(o),A(En(o,e),function(t){n.push(t),r.insert(t)})}}else(n=En(t,e).features).forEach(function(t){t.bbox||(t.bbox=re(q(t)))}),r.load(l(n))}),l(n)}function En(t,e){var n=[],r=G(t)[0],i=G(t)[t.geometry.coordinates.length-1];if(Sn(r,U(e))||Sn(i,U(e)))return l([t]);var o=Ve(),a=Ge(t);o.load(a);var u=o.search(e);if(!u.features.length)return l([t]);var c=Cn(e,u),h=M(a,function(t,r,i){var o=G(r)[1],a=U(e);return i===c.id?(t.push(a),n.push(s(t)),Sn(a,o)?[a]:[a,o]):(t.push(o),t)},[r]);return h.length>1&&n.push(s(h)),l(n)}function Cn(t,e){if(!e.features.length)throw new Error("lines must contain features");if(1===e.features.length)return e.features[0];var n,r=1/0;return A(e,function(e){var i=Ye(e,t).properties.dist;i<r&&(n=e,r=i)}),n}function Sn(t,e){return t[0]===e[0]&&t[1]===e[1]}function In(t,e,n,r,i){if(!C(i=i||{}))throw new Error("options is invalid");var o=i.steps,a=i.units;if(!t)throw new Error("center is required");if(!e)throw new Error("radius is required");if(void 0===n||null===n)throw new Error("bearing1 is required");if(void 0===r||null===r)throw new Error("bearing2 is required");if("object"!=typeof i)throw new Error("options must be an object");o=o||64;var u=Tn(n),l=Tn(r),c=t.properties;if(u===l)return s(oe(t,e,i).geometry.coordinates[0],c);for(var h=u,p=u<l?l:l+360,f=h,d=[],m=0;f<p;)d.push(ie(t,e,f,a).geometry.coordinates),f=h+360*++m/o;return f>p&&d.push(ie(t,e,p,a).geometry.coordinates),s(d,c)}function Tn(t){var e=t%360;return e<0&&(e+=360),e}function kn(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.properties,r=J(t),i=G(t);if(n=n||t.properties||{},!i.length)throw new Error("polygon must contain coordinates");switch(r){case"Polygon":return On(i,n);case"MultiPolygon":var o=[];return i.forEach(function(t){o.push(On(t,n))}),l(o);default:throw new Error("geom "+r+" not supported")}}function On(t,e){return t.length>1?c(t,e):s(t[0],e)}function Pn(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.properties,r=e.autoComplete,i=e.orderCoords;if(!t)throw new Error("lines is required");switch(r=void 0===r||r,i=void 0===i||i,J(t)){case"FeatureCollection":case"GeometryCollection":var o=[];return(t.features?t.features:t.geometries).forEach(function(t){o.push(G(An(t,{},r,i)))}),p(o,n)}return An(t,n,r,i)}function An(t,e,n,r){e=e||t.properties||{};var i=G(t),a=J(t);if(!i.length)throw new Error("line must contain coordinates");switch(a){case"LineString":return n&&(i=Mn(i)),o([i],e);case"MultiLineString":var u=[],l=0;return i.forEach(function(t){if(n&&(t=Mn(t)),r){var e=function(t){var e=t[1],n=t[3];return Math.abs(t[0]-t[2])*Math.abs(e-n)}(q(s(t)));e>l?(u.unshift(t),l=e):u.push(t)}else u.push(t)}),o(u,e);default:throw new Error("geometry type "+a+" is not supported")}}function Mn(t){var e=t[0],n=t[t.length-1];return e[0]===n[0]&&e[1]===n[1]||t.push(e),t}function Rn(t,e,n){var r,i,o,a,s,u=t.length,l=Nn(t[0],e),c=[];for(n||(n=[]),r=1;r<u;r++){for(i=t[r-1],a=s=Nn(o=t[r],e);;){if(!(l|a)){c.push(i),a!==s?(c.push(o),r<u-1&&(n.push(c),c=[])):r===u-1&&c.push(o);break}if(l&a)break;l?l=Nn(i=Ln(i,o,l,e),e):a=Nn(o=Ln(i,o,a,e),e)}l=s}return c.length&&n.push(c),n}function Ln(t,e,n,r){return 8&n?[t[0]+(e[0]-t[0])*(r[3]-t[1])/(e[1]-t[1]),r[3]]:4&n?[t[0]+(e[0]-t[0])*(r[1]-t[1])/(e[1]-t[1]),r[1]]:2&n?[r[2],t[1]+(e[1]-t[1])*(r[2]-t[0])/(e[0]-t[0])]:1&n?[r[0],t[1]+(e[1]-t[1])*(r[0]-t[0])/(e[0]-t[0])]:null}function Nn(t,e){var n=0;return t[0]<e[0]?n|=1:t[0]>e[2]&&(n|=2),t[1]<e[1]?n|=4:t[1]>e[3]&&(n|=8),n}function Dn(t,e){for(var n=[],r=0;r<t.length;r++){var i=ca.polygon(t[r],e);i.length>0&&(i[0][0]===i[i.length-1][0]&&i[0][1]===i[i.length-1][1]||i.push(i[0]),i.length>=4&&n.push(i))}return n}function Fn(t){return"[object Arguments]"===Object.prototype.toString.call(t)}function zn(t,e,n){return n||(n={}),t===e||(t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():!t||!e||"object"!=typeof t&&"object"!=typeof e?t===e:function(t,e,n){var r,i;if(jn(t)||jn(e))return!1;if(t.prototype!==e.prototype)return!1;if(Fn(t))return!!Fn(e)&&zn(t=ha.call(t),e=ha.call(e),n);if(Bn(t)){if(!Bn(e))return!1;if(t.length!==e.length)return!1;for(r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}try{var o=Object.keys(t),a=Object.keys(e)}catch(t){return!1}if(o.length!==a.length)return!1;for(o.sort(),a.sort(),r=o.length-1;r>=0;r--)if(o[r]!==a[r])return!1;for(r=o.length-1;r>=0;r--)if(!zn(t[i=o[r]],e[i],n))return!1;return typeof t==typeof e}(t,e,n))}function jn(t){return null===t||void 0===t}function Bn(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length||"function"!=typeof t.copy||"function"!=typeof t.slice||t.length>0&&"number"!=typeof t[0])}function Vn(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");var r,i=n.tolerance||0,o=[],a=Ve();return a.load(Ge(t)),z(e,function(t){var e=!1;A(a.search(t),function(n){if(!1===e){var o=G(t).sort(),a=G(n).sort();zn(o,a)?(e=!0,r=r?qn(r,t):t):(0===i?fn(o[0],n)&&fn(o[1],n):Ye(n,o[0]).properties.dist<=i&&Ye(n,o[1]).properties.dist<=i)?(e=!0,r=r?qn(r,t):t):(0===i?fn(a[0],t)&&fn(a[1],t):Ye(t,a[0]).properties.dist<=i&&Ye(t,a[1]).properties.dist<=i)&&(r=r?qn(r,n):n)}}),!1===e&&r&&(o.push(r),r=void 0)}),r&&o.push(r),l(o)}function qn(t,e){var n=G(e),r=G(t),i=r[0],o=r[r.length-1],a=t.geometry.coordinates;return zn(n[0],i)?a.unshift(n[1]):zn(n[0],o)?a.push(n[1]):zn(n[1],i)?a.unshift(n[0]):zn(n[1],o)&&a.push(n[0]),t}function Un(t){var e=t%360;return e<0&&(e+=360),e}function Gn(t,e,n,i){if(!C(i=i||{}))throw new Error("options is invalid");var o=i.units,a=i.properties;if(!t)throw new Error("origin is required");if(void 0===e||null===e)throw new Error("distance is required");if(void 0===n||null===n)throw new Error("bearing is required");if(!(e>=0))throw new Error("distance must be greater than 0");var s=x(e,o,"meters"),u=U(t),l=function(t,e,n,r){var i=e/(r=void 0===r?yo:Number(r)),o=t[0]*Math.PI/180,a=b(t[1]),s=b(n),u=i*Math.cos(s),l=a+u;Math.abs(l)>Math.PI/2&&(l=l>0?Math.PI-l:-Math.PI-l);var c=Math.log(Math.tan(l/2+Math.PI/4)/Math.tan(a/2+Math.PI/4)),h=Math.abs(c)>1e-11?u/c:Math.cos(a);return[(180*(o+i*Math.sin(s)/h)/Math.PI+540)%360-180,180*l/Math.PI]}(u,s,n);return l[0]+=l[0]-u[0]>180?-360:u[0]-l[0]>180?360:0,r(l,a)}function Xn(t,e,n,r,i,o){for(var a=0;a<t.length;a++){var s=t[a],u=t[a+1];a===t.length-1&&(u=t[0]),r=Hn(s,u,e),n<=0&&r>0?function(t,e,n){return Hn(t,s,i)<0}(e)||(i=s):n>0&&r<=0&&(function(t,e,n){return Hn(t,s,o)>0}(e)||(o=s)),n=r}return[i,o]}function Hn(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(n[0]-t[0])*(e[1]-t[1])}function Yn(t){if(!t)throw new Error("line is required");var e=t.geometry?t.geometry.type:t.type;if(!Array.isArray(t)&&"LineString"!==e)throw new Error("geometry must be a LineString");for(var n,r,i=G(t),o=0,a=1;a<i.length;)n=r||i[0],o+=((r=i[a])[0]-n[0])*(r[1]+n[1]),a++;return o>0}function Zn(t,e){switch("Feature"===t.type?t.geometry.type:t.type){case"GeometryCollection":return L(t,function(t){Zn(t,e)}),t;case"LineString":return Wn(G(t),e),t;case"Polygon":return Kn(G(t),e),t;case"MultiLineString":return G(t).forEach(function(t){Wn(t,e)}),t;case"MultiPolygon":return G(t).forEach(function(t){Kn(t,e)}),t;case"Point":case"MultiPoint":return t}}function Wn(t,e){Yn(t)===e&&t.reverse()}function Kn(t,e){Yn(t[0])!==e&&t[0].reverse();for(var n=1;n<t.length;n++)Yn(t[n])===e&&t[n].reverse()}function Jn(t,e,n,r){r=r||{};for(var i=Object.keys(pa),o=0;o<i.length;o++){var a=i[o],s=r[a];fa[a]=s=void 0!==s&&null!==s?s:pa[a]}fa.verbose&&console.log("MarchingSquaresJS-isoBands: computing isobands for ["+e+":"+(e+n)+"]");var u,l=function(t,e,n){for(var r=t.length-1,i=t[0].length-1,o={rows:r,cols:i,cells:[]},a=e+Math.abs(n),s=0;s<r;++s){o.cells[s]=[];for(var u=0;u<i;++u){var l=0,c=t[s+1][u],h=t[s+1][u+1],p=t[s][u+1],f=t[s][u];if(!(isNaN(c)||isNaN(h)||isNaN(p)||isNaN(f))){l|=c<e?0:c>a?128:64,l|=h<e?0:h>a?32:16,l|=p<e?0:p>a?8:4;var d=+(l|=f<e?0:f>a?2:1),m=0;if(17===l||18===l||33===l||34===l||38===l||68===l||72===l||98===l||102===l||132===l||136===l||137===l||152===l||153===l){var g=(c+h+p+f)/4;m=g>a?2:g<e?0:1,34===l?1===m?l=35:0===m&&(l=136):136===l?1===m?(l=35,m=4):0===m&&(l=34):17===l?1===m?(l=155,m=4):0===m&&(l=153):68===l?1===m?(l=103,m=4):0===m&&(l=102):153===l?1===m&&(l=155):102===l?1===m&&(l=103):152===l?m<2&&(l=156,m=1):137===l?m<2&&(l=139,m=1):98===l?m<2&&(l=99,m=1):38===l?m<2&&(l=39,m=1):18===l?m>0?(l=156,m=4):l=152:33===l?m>0?(l=139,m=4):l=137:72===l?m>0?(l=99,m=4):l=98:132===l&&(m>0?(l=39,m=4):l=38)}if(0!=l&&170!=l){var y,v,_,b,x,w,E,C;y=v=_=b=x=w=E=C=.5;var S=[];1===l?(_=1-Qn(e,p,f),C=1-Qn(e,c,f),S.push($a[l])):169===l?(_=Qn(a,f,p),C=Qn(a,f,c),S.push($a[l])):4===l?(w=1-Qn(e,h,p),b=Qn(e,f,p),S.push(Ja[l])):166===l?(w=Qn(a,p,h),b=1-Qn(a,p,f),S.push(Ja[l])):16===l?(x=Qn(e,p,h),v=Qn(e,c,h),S.push(Ka[l])):154===l?(x=1-Qn(a,h,p),v=1-Qn(a,h,c),S.push(Ka[l])):64===l?(E=Qn(e,f,c),y=1-Qn(e,h,c),S.push(es[l])):106===l?(E=1-Qn(a,c,f),y=Qn(a,c,h),S.push(es[l])):168===l?(b=Qn(a,f,p),_=Qn(e,f,p),C=Qn(e,f,c),E=Qn(a,f,c),S.push(Qa[l]),S.push($a[l])):2===l?(b=1-Qn(e,p,f),_=1-Qn(a,p,f),C=1-Qn(a,c,f),E=1-Qn(e,c,f),S.push(Qa[l]),S.push($a[l])):162===l?(x=Qn(a,p,h),w=Qn(e,p,h),b=1-Qn(e,p,f),_=1-Qn(a,p,f),S.push(Qa[l]),S.push($a[l])):8===l?(x=1-Qn(e,h,p),w=1-Qn(a,h,p),b=Qn(a,f,p),_=Qn(e,f,p),S.push(Ka[l]),S.push(Ja[l])):138===l?(x=1-Qn(e,h,p),w=1-Qn(a,h,p),y=1-Qn(a,h,c),v=1-Qn(e,h,c),S.push(Ka[l]),S.push(Ja[l])):32===l?(x=Qn(a,p,h),w=Qn(e,p,h),y=Qn(e,c,h),v=Qn(a,c,h),S.push(Ka[l]),S.push(Ja[l])):42===l?(C=1-Qn(a,c,f),E=1-Qn(e,c,f),y=Qn(e,c,h),v=Qn(a,c,h),S.push(ts[l]),S.push(es[l])):128===l&&(C=Qn(e,f,c),E=Qn(a,f,c),y=1-Qn(a,h,c),v=1-Qn(e,h,c),S.push(ts[l]),S.push(es[l])),5===l?(w=1-Qn(e,h,p),C=1-Qn(e,c,f),S.push(Ja[l])):165===l?(w=Qn(a,p,h),C=Qn(a,f,c),S.push(Ja[l])):20===l?(b=Qn(e,f,p),v=Qn(e,c,h),S.push(Qa[l])):150===l?(b=1-Qn(a,p,f),v=1-Qn(a,h,c),S.push(Qa[l])):80===l?(x=Qn(e,p,h),E=Qn(e,f,c),S.push(Ka[l])):90===l?(x=1-Qn(a,h,p),E=1-Qn(a,c,f),S.push(Ka[l])):65===l?(_=1-Qn(e,p,f),y=1-Qn(e,h,c),S.push($a[l])):105===l?(_=Qn(a,f,p),y=Qn(a,c,h),S.push($a[l])):160===l?(x=Qn(a,p,h),w=Qn(e,p,h),C=Qn(e,f,c),E=Qn(a,f,c),S.push(Ka[l]),S.push(Ja[l])):10===l?(x=1-Qn(e,h,p),w=1-Qn(a,h,p),C=1-Qn(a,c,f),E=1-Qn(e,c,f),S.push(Ka[l]),S.push(Ja[l])):130===l?(b=1-Qn(e,p,f),_=1-Qn(a,p,f),y=1-Qn(a,h,c),v=1-Qn(e,h,c),S.push(Qa[l]),S.push($a[l])):40===l?(b=Qn(a,f,p),_=Qn(e,f,p),y=Qn(e,c,h),v=Qn(a,c,h),S.push(Qa[l]),S.push($a[l])):101===l?(w=Qn(a,p,h),y=Qn(a,c,h),S.push(Ja[l])):69===l?(w=1-Qn(e,h,p),y=1-Qn(e,h,c),S.push(Ja[l])):149===l?(C=Qn(a,f,c),v=1-Qn(a,h,c),S.push(ts[l])):21===l?(C=1-Qn(e,c,f),v=Qn(e,c,h),S.push(ts[l])):86===l?(b=1-Qn(a,p,f),E=1-Qn(a,c,f),S.push(Qa[l])):84===l?(b=Qn(e,f,p),E=Qn(e,f,c),S.push(Qa[l])):89===l?(x=1-Qn(a,h,p),_=Qn(a,f,p),S.push($a[l])):81===l?(x=Qn(e,p,h),_=1-Qn(e,p,f),S.push($a[l])):96===l?(x=Qn(a,p,h),w=Qn(e,p,h),E=Qn(e,f,c),y=Qn(a,c,h),S.push(Ka[l]),S.push(Ja[l])):74===l?(x=1-Qn(e,h,p),w=1-Qn(a,h,p),E=1-Qn(a,c,f),y=1-Qn(e,h,c),S.push(Ka[l]),S.push(Ja[l])):24===l?(x=1-Qn(a,h,p),b=Qn(a,f,p),_=Qn(e,f,p),v=Qn(e,c,h),S.push(Ka[l]),S.push($a[l])):146===l?(x=Qn(e,p,h),b=1-Qn(e,p,f),_=1-Qn(a,p,f),v=1-Qn(a,h,c),S.push(Ka[l]),S.push($a[l])):6===l?(w=1-Qn(e,h,p),b=1-Qn(a,p,f),C=1-Qn(a,c,f),E=1-Qn(e,c,f),S.push(Ja[l]),S.push(Qa[l])):164===l?(w=Qn(a,p,h),b=Qn(e,f,p),C=Qn(e,f,c),E=Qn(a,f,c),S.push(Ja[l]),S.push(Qa[l])):129===l?(_=1-Qn(e,p,f),C=Qn(a,f,c),y=1-Qn(a,h,c),v=1-Qn(e,h,c),S.push($a[l]),S.push(ts[l])):41===l?(_=Qn(a,f,p),C=1-Qn(e,c,f),y=Qn(e,c,h),v=Qn(a,c,h),S.push($a[l]),S.push(ts[l])):66===l?(b=1-Qn(e,p,f),_=1-Qn(a,p,f),E=1-Qn(a,c,f),y=1-Qn(e,h,c),S.push(Qa[l]),S.push($a[l])):104===l?(b=Qn(a,f,p),_=Qn(e,f,p),E=Qn(e,f,c),y=Qn(a,c,h),S.push($a[l]),S.push(ns[l])):144===l?(x=Qn(e,p,h),C=Qn(e,f,c),E=Qn(a,f,c),v=1-Qn(a,h,c),S.push(Ka[l]),S.push(es[l])):26===l?(x=1-Qn(a,h,p),C=1-Qn(a,c,f),E=1-Qn(e,c,f),v=Qn(e,c,h),S.push(Ka[l]),S.push(es[l])):36===l?(w=Qn(a,p,h),b=Qn(e,f,p),y=Qn(e,c,h),v=Qn(a,c,h),S.push(Ja[l]),S.push(Qa[l])):134===l?(w=1-Qn(e,h,p),b=1-Qn(a,p,f),y=1-Qn(a,h,c),v=1-Qn(e,h,c),S.push(Ja[l]),S.push(Qa[l])):9===l?(x=1-Qn(e,h,p),w=1-Qn(a,h,p),_=Qn(a,f,p),C=1-Qn(e,c,f),S.push(Ka[l]),S.push(Ja[l])):161===l?(x=Qn(a,p,h),w=Qn(e,p,h),_=1-Qn(e,p,f),C=Qn(a,f,c),S.push(Ka[l]),S.push(Ja[l])):37===l?(w=Qn(a,p,h),C=1-Qn(e,c,f),y=Qn(e,c,h),v=Qn(a,c,h),S.push(Ja[l]),S.push(ts[l])):133===l?(w=1-Qn(e,h,p),C=Qn(a,f,c),y=1-Qn(a,h,c),v=1-Qn(e,h,c),S.push(Ja[l]),S.push(ts[l])):148===l?(b=Qn(e,f,p),C=Qn(e,f,c),E=Qn(a,f,c),v=1-Qn(a,h,c),S.push(Qa[l]),S.push(es[l])):22===l?(b=1-Qn(a,p,f),C=1-Qn(a,c,f),E=1-Qn(e,c,f),v=Qn(e,c,h),S.push(Qa[l]),S.push(es[l])):82===l?(x=Qn(e,p,h),b=1-Qn(e,p,f),_=1-Qn(a,p,f),E=1-Qn(a,c,f),S.push(Ka[l]),S.push($a[l])):88===l?(x=1-Qn(a,h,p),b=Qn(a,f,p),_=Qn(e,f,p),E=Qn(e,f,c),S.push(Ka[l]),S.push($a[l])):73===l?(x=1-Qn(e,h,p),w=1-Qn(a,h,p),_=Qn(a,f,p),y=1-Qn(e,h,c),S.push(Ka[l]),S.push(Ja[l])):97===l?(x=Qn(a,p,h),w=Qn(e,p,h),_=1-Qn(e,p,f),y=Qn(a,c,h),S.push(Ka[l]),S.push(Ja[l])):145===l?(x=Qn(e,p,h),_=1-Qn(e,p,f),C=Qn(a,f,c),v=1-Qn(a,h,c),S.push(Ka[l]),S.push(ts[l])):25===l?(x=1-Qn(a,h,p),_=Qn(a,f,p),C=1-Qn(e,c,f),v=Qn(e,c,h),S.push(Ka[l]),S.push(ts[l])):70===l?(w=1-Qn(e,h,p),b=1-Qn(a,p,f),E=1-Qn(a,c,f),y=1-Qn(e,h,c),S.push(Ja[l]),S.push(Qa[l])):100===l?(w=Qn(a,p,h),b=Qn(e,f,p),E=Qn(e,f,c),y=Qn(a,c,h),S.push(Ja[l]),S.push(Qa[l])):34===l?(0===m?(x=1-Qn(e,h,p),w=1-Qn(a,h,p),b=Qn(a,f,p),_=Qn(e,f,p),C=Qn(e,f,c),E=Qn(a,f,c),y=1-Qn(a,h,c),v=1-Qn(e,h,c)):(x=Qn(a,p,h),w=Qn(e,p,h),b=1-Qn(e,p,f),_=1-Qn(a,p,f),C=1-Qn(a,c,f),E=1-Qn(e,c,f),y=Qn(e,c,h),v=Qn(a,c,h)),S.push(Ka[l]),S.push(Ja[l]),S.push(ts[l]),S.push(es[l])):35===l?(4===m?(x=1-Qn(e,h,p),w=1-Qn(a,h,p),b=Qn(a,f,p),_=Qn(e,f,p),C=Qn(e,f,c),E=Qn(a,f,c),y=1-Qn(a,h,c),v=1-Qn(e,h,c)):(x=Qn(a,p,h),w=Qn(e,p,h),b=1-Qn(e,p,f),_=1-Qn(a,p,f),C=1-Qn(a,c,f),E=1-Qn(e,c,f),y=Qn(e,c,h),v=Qn(a,c,h)),S.push(Ka[l]),S.push(Ja[l]),S.push($a[l]),S.push(es[l])):136===l?(0===m?(x=Qn(a,p,h),w=Qn(e,p,h),b=1-Qn(e,p,f),_=1-Qn(a,p,f),C=1-Qn(a,c,f),E=1-Qn(e,c,f),y=Qn(e,c,h),v=Qn(a,c,h)):(x=1-Qn(e,h,p),w=1-Qn(a,h,p),b=Qn(a,f,p),_=Qn(e,f,p),C=Qn(e,f,c),E=Qn(a,f,c),y=1-Qn(a,h,c),v=1-Qn(e,h,c)),S.push(Ka[l]),S.push(Ja[l]),S.push(ts[l]),S.push(es[l])):153===l?(0===m?(x=Qn(e,p,h),_=1-Qn(e,p,f),C=1-Qn(e,c,f),v=Qn(e,c,h)):(x=1-Qn(a,h,p),_=Qn(a,f,p),C=Qn(a,f,c),v=1-Qn(a,h,c)),S.push(Ka[l]),S.push($a[l])):102===l?(0===m?(w=1-Qn(e,h,p),b=Qn(e,f,p),E=Qn(e,f,c),y=1-Qn(e,h,c)):(w=Qn(a,p,h),b=1-Qn(a,p,f),E=1-Qn(a,c,f),y=Qn(a,c,h)),S.push(Ja[l]),S.push(es[l])):155===l?(4===m?(x=Qn(e,p,h),_=1-Qn(e,p,f),C=1-Qn(e,c,f),v=Qn(e,c,h)):(x=1-Qn(a,h,p),_=Qn(a,f,p),C=Qn(a,f,c),v=1-Qn(a,h,c)),S.push(Ka[l]),S.push(ts[l])):103===l?(4===m?(w=1-Qn(e,h,p),b=Qn(e,f,p),E=Qn(e,f,c),y=1-Qn(e,h,c)):(w=Qn(a,p,h),b=1-Qn(a,p,f),E=1-Qn(a,c,f),y=Qn(a,c,h)),S.push(Ja[l]),S.push(Qa[l])):152===l?(0===m?(x=Qn(e,p,h),b=1-Qn(e,p,f),_=1-Qn(a,p,f),C=1-Qn(a,c,f),E=1-Qn(e,c,f),v=Qn(e,c,h)):(x=1-Qn(a,h,p),b=Qn(a,f,p),_=Qn(e,f,p),C=Qn(e,f,c),E=Qn(a,f,c),v=1-Qn(a,h,c)),S.push(Ka[l]),S.push(Qa[l]),S.push($a[l])):156===l?(4===m?(x=Qn(e,p,h),b=1-Qn(e,p,f),_=1-Qn(a,p,f),C=1-Qn(a,c,f),E=1-Qn(e,c,f),v=Qn(e,c,h)):(x=1-Qn(a,h,p),b=Qn(a,f,p),_=Qn(e,f,p),C=Qn(e,f,c),E=Qn(a,f,c),v=1-Qn(a,h,c)),S.push(Ka[l]),S.push($a[l]),S.push(es[l])):137===l?(0===m?(x=Qn(a,p,h),w=Qn(e,p,h),_=1-Qn(e,p,f),C=1-Qn(e,c,f),y=Qn(e,c,h),v=Qn(a,c,h)):(x=1-Qn(e,h,p),w=1-Qn(a,h,p),_=Qn(a,f,p),C=Qn(a,f,c),y=1-Qn(a,h,c),v=1-Qn(e,h,c)),S.push(Ka[l]),S.push(Ja[l]),S.push($a[l])):139===l?(4===m?(x=Qn(a,p,h),w=Qn(e,p,h),_=1-Qn(e,p,f),C=1-Qn(e,c,f),y=Qn(e,c,h),v=Qn(a,c,h)):(x=1-Qn(e,h,p),w=1-Qn(a,h,p),_=Qn(a,f,p),C=Qn(a,f,c),y=1-Qn(a,h,c),v=1-Qn(e,h,c)),S.push(Ka[l]),S.push(Ja[l]),S.push(ts[l])):98===l?(0===m?(x=1-Qn(e,h,p),w=1-Qn(a,h,p),b=Qn(a,f,p),_=Qn(e,f,p),E=Qn(e,f,c),y=1-Qn(e,h,c)):(x=Qn(a,p,h),w=Qn(e,p,h),b=1-Qn(e,p,f),_=1-Qn(a,p,f),E=1-Qn(a,c,f),y=Qn(a,c,h)),S.push(Ka[l]),S.push(Ja[l]),S.push(es[l])):99===l?(4===m?(x=1-Qn(e,h,p),w=1-Qn(a,h,p),b=Qn(a,f,p),_=Qn(e,f,p),E=Qn(e,f,c),y=1-Qn(e,h,c)):(x=Qn(a,p,h),w=Qn(e,p,h),b=1-Qn(e,p,f),_=1-Qn(a,p,f),E=1-Qn(a,c,f),y=Qn(a,c,h)),S.push(Ka[l]),S.push(Ja[l]),S.push($a[l])):38===l?(0===m?(w=1-Qn(e,h,p),b=Qn(e,f,p),C=Qn(e,f,c),E=Qn(a,f,c),y=1-Qn(a,h,c),v=1-Qn(e,h,c)):(w=Qn(a,p,h),b=1-Qn(a,p,f),C=1-Qn(a,c,f),E=1-Qn(e,c,f),y=Qn(e,c,h),v=Qn(a,c,h)),S.push(Ja[l]),S.push(ts[l]),S.push(es[l])):39===l?(4===m?(w=1-Qn(e,h,p),b=Qn(e,f,p),C=Qn(e,f,c),E=Qn(a,f,c),y=1-Qn(a,h,c),v=1-Qn(e,h,c)):(w=Qn(a,p,h),b=1-Qn(a,p,f),C=1-Qn(a,c,f),E=1-Qn(e,c,f),y=Qn(e,c,h),v=Qn(a,c,h)),S.push(Ja[l]),S.push(Qa[l]),S.push(es[l])):85===l&&(x=1,w=0,b=1,_=0,C=0,E=1,y=0,v=1),(y<0||y>1||v<0||v>1||x<0||x>1||b<0||b>1||C<0||C>1||E<0||E>1)&&console.log("MarchingSquaresJS-isoBands: "+l+" "+d+" "+c+","+h+","+p+","+f+" "+m+" "+y+" "+v+" "+x+" "+w+" "+b+" "+_+" "+C+" "+E),o.cells[s][u]={cval:l,cval_real:d,flipped:m,topleft:y,topright:v,righttop:x,rightbottom:w,bottomright:b,bottomleft:_,leftbottom:C,lefttop:E,edges:S}}}}}return o}(t,e,n);return fa.polygons?(fa.verbose&&console.log("MarchingSquaresJS-isoBands: returning single polygons for each grid cell"),u=function(t){var e=[],n=0;return l.cells.forEach(function(t,r){t.forEach(function(t,i){if(void 0!==t){var o=is[t.cval](t);"object"==typeof o&&$n(o)?"object"==typeof o[0]&&$n(o[0])?"object"==typeof o[0][0]&&$n(o[0][0])?o.forEach(function(t){t.forEach(function(t){t[0]+=i,t[1]+=r}),e[n++]=t}):(o.forEach(function(t){t[0]+=i,t[1]+=r}),e[n++]=o):console.log("MarchingSquaresJS-isoBands: bandcell polygon with malformed coordinates"):console.log("MarchingSquaresJS-isoBands: bandcell polygon with null coordinates")}})}),e}()):(fa.verbose&&console.log("MarchingSquaresJS-isoBands: returning polygon paths for entire data grid"),u=function(t){for(var e=[],n=t.rows,r=t.cols,i=[],o=0;o<n;o++)for(var a=0;a<r;a++)if(void 0!==t.cells[o][a]&&t.cells[o][a].edges.length>0){var s=function(t){if(t.edges.length>0){var e=t.cval_real;switch(t.edges[t.edges.length-1]){case 0:return e&ma?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0};case 1:return e&ga?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 2:return e&ga?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0};case 3:return e&ya?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 4:return e&ma?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};case 5:return e&ga?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 6:return e&ga?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};case 7:return e&ya?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 8:return e&ga?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.righttop],x:-1,y:0,o:1};case 9:return e&ya?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 10:return e&ya?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.righttop],x:-1,y:0,o:1};case 11:return e&da?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1};case 12:return e&ga?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 13:return e&ya?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 14:return e&ya?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 15:return e&da?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 16:return e&ga?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.leftbottom],x:1,y:0,o:0};case 17:return e&da?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1};case 18:return e&ya?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 19:return e&da?{p:[t.bottomleft,0],x:0,y:1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 20:return e&da?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.leftbottom],x:1,y:0,o:0};case 21:return e&ma?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.topright,1],x:0,y:-1,o:1};case 22:return e&da?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 23:return e&ma?{p:[0,t.lefttop],x:1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};default:console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t)}}return null}(t.cells[o][a]),u=null,l=a,c=o;null!==s&&i.push([s.p[0]+l,s.p[1]+c]);do{if(null===(u=function(t,e,n,r){var i,o,a,s,u,l=t.cval;switch(e){case-1:switch(r){case 0:i=Ja[l],a=Ta[l],s=ka[l],u=Oa[l];break;default:i=Ka[l],a=Ca[l],s=Sa[l],u=Ia[l]}break;case 1:switch(r){case 0:i=ts[l],a=ja[l],s=Ba[l],u=Va[l];break;default:i=es[l],a=Da[l],s=Fa[l],u=za[l]}break;default:switch(n){case-1:switch(r){case 0:i=ns[l],a=va[l],s=_a[l],u=ba[l];break;default:i=rs[l],a=xa[l],s=wa[l],u=Ea[l]}break;case 1:switch(r){case 0:i=$a[l],a=Pa[l],s=Aa[l],u=Ma[l];break;default:i=Qa[l],a=Ra[l],s=La[l],u=Na[l]}}}if(o=t.edges.indexOf(i),void 0===t.edges[o])return null;switch(function(t,e){delete t.edges[e];for(var n=e+1;n<t.edges.length;n++)t.edges[n-1]=t.edges[n];t.edges.pop()}(t,o),l=t.cval_real,i){case 0:l&ma?(e=t.topleft,n=1):(e=1,n=t.righttop);break;case 1:l&ga?(e=1,n=t.rightbottom):(e=t.topleft,n=1);break;case 2:l&ga?(e=t.topleft,n=1):(e=t.bottomright,n=0);break;case 3:l&ya?(e=t.bottomleft,n=0):(e=t.topleft,n=1);break;case 4:l&ma?(e=t.topright,n=1):(e=1,n=t.righttop);break;case 5:l&ga?(e=1,n=t.rightbottom):(e=t.topright,n=1);break;case 6:l&ga?(e=t.topright,n=1):(e=t.bottomright,n=0);break;case 7:l&ya?(e=t.bottomleft,n=0):(e=t.topright,n=1);break;case 8:l&ga?(e=1,n=t.righttop):(e=t.bottomright,n=0);break;case 9:l&ya?(e=t.bottomleft,n=0):(e=1,n=t.righttop);break;case 10:l&ya?(e=1,n=t.righttop):(e=0,n=t.leftbottom);break;case 11:l&da?(e=0,n=t.lefttop):(e=1,n=t.righttop);break;case 12:l&ga?(e=1,n=t.rightbottom):(e=t.bottomright,n=0);break;case 13:l&ya?(e=t.bottomleft,n=0):(e=1,n=t.rightbottom);break;case 14:l&ya?(e=1,n=t.rightbottom):(e=0,n=t.leftbottom);break;case 15:l&da?(e=0,n=t.lefttop):(e=1,n=t.rightbottom);break;case 16:l&ga?(e=0,n=t.leftbottom):(e=t.bottomright,n=0);break;case 17:l&da?(e=0,n=t.lefttop):(e=t.bottomright,n=0);break;case 18:l&ya?(e=t.bottomleft,n=0):(e=0,n=t.leftbottom);break;case 19:l&da?(e=0,n=t.lefttop):(e=t.bottomleft,n=0);break;case 20:l&da?(e=0,n=t.leftbottom):(e=t.topleft,n=1);break;case 21:l&ma?(e=t.topright,n=1):(e=0,n=t.leftbottom);break;case 22:l&da?(e=0,n=t.lefttop):(e=t.topleft,n=1);break;case 23:l&ma?(e=t.topright,n=1):(e=0,n=t.lefttop);break;default:return console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t),null}return void 0!==e&&void 0!==n&&void 0!==a&&void 0!==s&&void 0!==u||(console.log("MarchingSquaresJS-isoBands: undefined value!"),console.log(t),console.log(e+" "+n+" "+a+" "+s+" "+u)),{p:[e,n],x:a,y:s,o:u}}(t.cells[c][l],s.x,s.y,s.o)))break;if(i.push([u.p[0]+l,u.p[1]+c]),l+=u.x,s=u,(c+=u.y)<0||c>=n||l<0||l>=r||void 0===t.cells[c][l]){var h=function(t,e,n,r,i,o){for(var a=t.cells[n][e],s=a.cval_real,u=e+r,l=n+i,c=[],h=!1;!h;){if(void 0===t.cells[l]||void 0===t.cells[l][u])if(s=(a=t.cells[l-=i][u-=r]).cval_real,-1===i)if(0===o)if(s&ya)c.push([u,l]),r=-1,i=0,o=0;else{if(!(s&ga)){c.push([u+a.bottomright,l]),r=0,i=1,o=1,h=!0;break}c.push([u+1,l]),r=1,i=0,o=0}else{if(!(s&ya)){if(s&ga){c.push([u+a.bottomright,l]),r=0,i=1,o=1,h=!0;break}c.push([u+a.bottomleft,l]),r=0,i=1,o=0,h=!0;break}c.push([u,l]),r=-1,i=0,o=0}else if(1===i)if(0===o){if(!(s&ma)){if(s&da){c.push([u+a.topleft,l+1]),r=0,i=-1,o=0,h=!0;break}c.push([u+a.topright,l+1]),r=0,i=-1,o=1,h=!0;break}c.push([u+1,l+1]),r=1,i=0,o=1}else c.push([u+1,l+1]),r=1,i=0,o=1;else if(-1===r)if(0===o){if(!(s&da)){if(s&ya){c.push([u,l+a.leftbottom]),r=1,i=0,o=0,h=!0;break}c.push([u,l+a.lefttop]),r=1,i=0,o=1,h=!0;break}c.push([u,l+1]),r=0,i=1,o=0}else{if(!(s&da)){console.log("MarchingSquaresJS-isoBands: wtf");break}c.push([u,l+1]),r=0,i=1,o=0}else{if(1!==r){console.log("MarchingSquaresJS-isoBands: we came from nowhere!");break}if(0===o){if(!(s&ga)){c.push([u+1,l+a.rightbottom]),r=-1,i=0,o=0,h=!0;break}c.push([u+1,l]),r=0,i=-1,o=1}else{if(!(s&ga)){if(s&ma){c.push([u+1,l+a.righttop]),r=-1,i=0,o=1;break}c.push([u+1,l+a.rightbottom]),r=-1,i=0,o=0,h=!0;break}c.push([u+1,l]),r=0,i=-1,o=1}}else if(s=(a=t.cells[l][u]).cval_real,-1===r)if(0===o)if(void 0!==t.cells[l-1]&&void 0!==t.cells[l-1][u])r=0,i=-1,o=1;else{if(!(s&ya)){c.push([u+a.bottomright,l]),r=0,i=1,o=1,h=!0;break}c.push([u,l])}else{if(!(s&da)){console.log("MarchingSquaresJS-isoBands: found entry from top at "+u+","+l);break}console.log("MarchingSquaresJS-isoBands: proceeding in x-direction!")}else if(1===r){if(0===o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[l+1]&&void 0!==t.cells[l+1][u])r=0,i=1,o=0;else{if(!(s&ma)){c.push([u+a.topleft,l+1]),r=0,i=-1,o=0,h=!0;break}c.push([u+1,l+1]),r=1,i=0,o=1}}else if(-1===i){if(1!==o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[l][u+1])r=1,i=0,o=1;else{if(!(s&ga)){c.push([u+1,l+a.righttop]),r=-1,i=0,o=1,h=!0;break}c.push([u+1,l]),r=0,i=-1,o=1}}else{if(1!==i){console.log("MarchingSquaresJS-isoBands: where did we came from???");break}if(0!==o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[l][u-1])r=-1,i=0,o=0;else{if(!(s&da)){c.push([u,l+a.leftbottom]),r=1,i=0,o=0,h=!0;break}c.push([u,l+1]),r=0,i=1,o=0}}if(l+=i,(u+=r)===e&&l===n)break}return{path:c,i:u,j:l,x:r,y:i,o:o}}(t,l-=u.x,c-=u.y,u.x,u.y,u.o);if(null===h)break;h.path.forEach(function(t){i.push(t)}),l=h.i,c=h.j,s=h}}while(void 0!==t.cells[c][l]&&t.cells[c][l].edges.length>0);e.push(i),i=[],t.cells[o][a].edges.length>0&&a--}return e}(l)),"function"==typeof fa.successCallback&&fa.successCallback(u),u}function Qn(t,e,n){return(t-e)/(n-e)}function $n(t){return t.constructor.toString().indexOf("Array")>-1}function tr(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");var r=n.pivot,i=n.mutate;if(!t)throw new Error("geojson is required");if(void 0===e||null===e||isNaN(e))throw new Error("angle is required");return 0===e?t:(r||(r=ue(t)),!1!==i&&void 0!==i||(t=Dt(t)),T(t,function(t){var n=Ze(r,t)+e,i=Ke(r,t),o=G(Gn(r,i,n));t[0]=o[0],t[1]=o[1]}),t)}function er(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");var r=n.origin,i=n.mutate;if(!t)throw new Error("geojson required");if("number"!=typeof e||0===e)throw new Error("invalid factor");var o=Array.isArray(r)||"object"==typeof r;return!0!==i&&(t=Dt(t)),"FeatureCollection"!==t.type||o?nr(t,e,r):(A(t,function(n,i){t.features[i]=nr(n,e,r)}),t)}function nr(t,e,n){var i="Point"===J(t);return n=function(t,e){if(void 0!==e&&null!==e||(e="centroid"),Array.isArray(e)||"object"==typeof e)return U(e);var n=t.bbox?t.bbox:q(t),i=n[0],o=n[1],a=n[2],s=n[3];switch(e){case"sw":case"southwest":case"westsouth":case"bottomleft":return r([i,o]);case"se":case"southeast":case"eastsouth":case"bottomright":return r([a,o]);case"nw":case"northwest":case"westnorth":case"topleft":return r([i,s]);case"ne":case"northeast":case"eastnorth":case"topright":return r([a,s]);case"center":return se(t);case void 0:case null:case"centroid":return ue(t);default:throw new Error("invalid origin")}}(t,n),1===e||i?t:(T(t,function(t){var r=Ke(n,t),i=Ze(n,t),o=G(Gn(n,r*e,i));t[0]=o[0],t[1]=o[1],3===t.length&&(t[2]*=e)}),t)}function rr(t){var e=t[0],n=t[1];return[n[0]-e[0],n[1]-e[1]]}function ir(t,e){return t[0]*e[1]-e[0]*t[1]}function or(t,e,n){var r=[],i=y(e,n),o=G(t),a=[];return o.forEach(function(t,e){if(e!==o.length-1){var n=function(t,e,n){var r=Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]));return[[t[0]+n*(e[1]-t[1])/r,t[1]+n*(t[0]-e[0])/r],[e[0]+n*(e[1]-t[1])/r,e[1]+n*(t[0]-e[0])/r]]}(t,o[e+1],i);if(r.push(n),e>0){var s=r[e-1],u=function(t,e){return!function(t,e){return 0===ir(rr(t),rr(e))}(t,e)&&function(t,e){var n=t[0],r=rr(t),i=e[0],o=rr(e),a=ir(r,o);return function(t,e){return[t[0]+e[0],t[1]+e[1]]}(n,function(t,e){return[t*r[0],t*r[1]]}(ir([i[0]-n[0],i[1]-n[1]],o)/a))}(t,e)}(n,s);!1!==u&&(s[1]=u,n[0]=u),a.push(s[0]),e===o.length-2&&(a.push(n[0]),a.push(n[1]))}2===o.length&&(a.push(n[0]),a.push(n[1]))}}),s(a,t.properties)}function ar(t,e,n){return Math.sign((e[0]-t[0])*(n[1]-e[1])-(n[0]-e[0])*(e[1]-t[1]))}function sr(t,e){return e.geometry.coordinates[0].every(function(e){return kt(r(e),t)})}function ur(t,e){for(var n=0;n<t.coordinates.length-1;n++)if(function(t,e,n){var r=e[0]-t[0],i=e[1]-t[1];return(n[0]-t[0])*i-(n[1]-t[1])*r==0&&(Math.abs(r)>=Math.abs(i)?r>0?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:i>0?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1])}(t.coordinates[n],t.coordinates[n+1],e.coordinates))return!0;return!1}function lr(t,e){return Xe(e,kn(t)).features.length>0}function cr(t,e){return!(t[0]>e[0]||t[2]<e[2]||t[1]>e[1]||t[3]<e[3])}function hr(t,e){return t[0]===e[0]&&t[1]===e[1]}function pr(t,e){for(var n=!1,r=!1,i=t.coordinates.length,o=0;o<i&&!n&&!r;){for(var a=0;a<e.coordinates.length-1;a++){var s=!0;0!==a&&a!==e.coordinates.length-2||(s=!1),mr(e.coordinates[a],e.coordinates[a+1],t.coordinates[o],s)?n=!0:r=!0}o++}return n&&r}function fr(t,e){return Xe(t,kn(e)).features.length>0}function dr(t,e){for(var n=!1,i=!1,o=t.coordinates[0].length,a=0;a<o&&n&&i;)kt(r(t.coordinates[0][a]),e)?n=!0:i=!0,a++;return i&&i}function mr(t,e,n,r){var i=e[0]-t[0],o=e[1]-t[1];return 0==(n[0]-t[0])*o-(n[1]-t[1])*i&&(r?Math.abs(i)>=Math.abs(o)?i>0?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:o>0?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1]:Math.abs(i)>=Math.abs(o)?i>0?t[0]<n[0]&&n[0]<e[0]:e[0]<n[0]&&n[0]<t[0]:o>0?t[1]<n[1]&&n[1]<e[1]:e[1]<n[1]&&n[1]<t[1])}function gr(t){return t.coordinates.map(function(e){return{type:t.type.replace("Multi",""),coordinates:e}})}function yr(t,e){return t.hasOwnProperty("coordinates")?t.coordinates.length===e.coordinates.length:t.length===e.length}function vr(t,e){return ps(t,e,{strict:!0})}function _r(t,e){if(!t)throw new Error("feature1 is required");if(!e)throw new Error("feature2 is required");var n=J(t);if(n!==J(e))throw new Error("features must be of the same type");if("Point"===n)throw new Error("Point geometry not supported");if(new ds({precision:6}).compare(t,e))return!1;var r=0;switch(n){case"MultiPoint":var i=R(t),o=R(e);i.forEach(function(t){o.forEach(function(e){t[0]===e[0]&&t[1]===e[1]&&r++})});break;case"LineString":case"MultiLineString":z(t,function(t){z(e,function(e){Vn(t,e).features.length&&r++})});break;case"Polygon":case"MultiPolygon":z(t,function(t){z(e,function(e){Xe(t,e).features.length&&r++})})}return r>0}function br(t,e,n){n=n||[];for(var r=0;r<t;r++)n[r]=e;return n}function xr(t,e){if(t.geometry&&t.geometry.type)return t.geometry.type;if(t.type)return t.type;throw new Error("Invalid GeoJSON object for "+e)}function wr(t){for(var e=t,n=[];e.parent;)n.unshift(e),e=e.parent;return n}function Er(t,e){e=e||{},this.nodes=[],this.diagonal=!!e.diagonal,this.grid=[];for(var n=0;n<t.length;n++){this.grid[n]=[];for(var r=0,i=t[n];r<i.length;r++){var o=new Cr(n,r,i[r]);this.grid[n][r]=o,this.nodes.push(o)}}this.init()}function Cr(t,e,n){this.x=t,this.y=e,this.weight=n}function Sr(t){this.content=[],this.scoreFunction=t}function Ir(t){return t[0]}function Tr(t){return t[1]}function kr(){this._=null}function Or(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function Pr(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function Ar(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function Mr(t){for(;t.L;)t=t.L;return t}function Rr(t,e,n,r){var i=[null,null],o=Ps.push(i)-1;return i.left=t,i.right=e,n&&Nr(i,t,e,n),r&&Nr(i,e,t,r),ks[t.index].halfedges.push(o),ks[e.index].halfedges.push(o),i}function Lr(t,e,n){var r=[e,n];return r.left=t,r}function Nr(t,e,n,r){t[0]||t[1]?t.left===n?t[1]=r:t[0]=r:(t[0]=r,t.left=e,t.right=n)}function Dr(t,e,n,r,i){var o,a=t[0],s=t[1],u=a[0],l=a[1],c=0,h=1,p=s[0]-u,f=s[1]-l;if(o=e-u,p||!(o>0)){if(o/=p,p<0){if(o<c)return;o<h&&(h=o)}else if(p>0){if(o>h)return;o>c&&(c=o)}if(o=r-u,p||!(o<0)){if(o/=p,p<0){if(o>h)return;o>c&&(c=o)}else if(p>0){if(o<c)return;o<h&&(h=o)}if(o=n-l,f||!(o>0)){if(o/=f,f<0){if(o<c)return;o<h&&(h=o)}else if(f>0){if(o>h)return;o>c&&(c=o)}if(o=i-l,f||!(o<0)){if(o/=f,f<0){if(o>h)return;o>c&&(c=o)}else if(f>0){if(o<c)return;o<h&&(h=o)}return!(c>0||h<1)||(c>0&&(t[0]=[u+c*p,l+c*f]),h<1&&(t[1]=[u+h*p,l+h*f]),!0)}}}}}function Fr(t,e,n,r,i){var o=t[1];if(o)return!0;var a,s,u=t[0],l=t.left,c=t.right,h=l[0],p=l[1],f=c[0],d=c[1],m=(h+f)/2,g=(p+d)/2;if(d===p){if(m<e||m>=r)return;if(h>f){if(u){if(u[1]>=i)return}else u=[m,n];o=[m,i]}else{if(u){if(u[1]<n)return}else u=[m,i];o=[m,n]}}else if(s=g-(a=(h-f)/(d-p))*m,a<-1||a>1)if(h>f){if(u){if(u[1]>=i)return}else u=[(n-s)/a,n];o=[(i-s)/a,i]}else{if(u){if(u[1]<n)return}else u=[(i-s)/a,i];o=[(n-s)/a,n]}else if(p<d){if(u){if(u[0]>=r)return}else u=[e,a*e+s];o=[r,a*r+s]}else{if(u){if(u[0]<e)return}else u=[r,a*r+s];o=[e,a*e+s]}return t[0]=u,t[1]=o,!0}function zr(t,e){var n=t.site,r=e.left,i=e.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=e[1],i=e[0]):(r=e[0],i=e[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function jr(t,e){return e[+(e.left!==t.site)]}function Br(t,e){return e[+(e.left===t.site)]}function Vr(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,o=n.site;if(r!==o){var a=i[0],s=i[1],u=r[0]-a,l=r[1]-s,c=o[0]-a,h=o[1]-s,p=2*(u*h-l*c);if(!(p>=-Ls)){var f=u*u+l*l,d=c*c+h*h,m=(h*f-l*d)/p,g=(u*d-c*f)/p,y=As.pop()||new function(){Or(this),this.x=this.y=this.arc=this.site=this.cy=null};y.arc=t,y.site=i,y.x=m+a,y.y=(y.cy=g+s)+Math.sqrt(m*m+g*g),t.circle=y;for(var v=null,_=Os._;_;)if(y.y<_.y||y.y===_.y&&y.x<=_.x){if(!_.L){v=_.P;break}_=_.L}else{if(!_.R){v=_;break}_=_.R}Os.insert(v,y),v||(Is=y)}}}}function qr(t){var e=t.circle;e&&(e.P||(Is=e.N),Os.remove(e),As.push(e),Or(e),t.circle=null)}function Ur(t){var e=Ms.pop()||new function(){Or(this),this.edge=this.site=this.circle=null};return e.site=t,e}function Gr(t){qr(t),Ts.remove(t),Ms.push(t),Or(t)}function Xr(t){var e=t.circle,n=e.x,r=e.cy,i=[n,r],o=t.P,a=t.N,s=[t];Gr(t);for(var u=o;u.circle&&Math.abs(n-u.circle.x)<Rs&&Math.abs(r-u.circle.cy)<Rs;)o=u.P,s.unshift(u),Gr(u),u=o;s.unshift(u),qr(u);for(var l=a;l.circle&&Math.abs(n-l.circle.x)<Rs&&Math.abs(r-l.circle.cy)<Rs;)a=l.N,s.push(l),Gr(l),l=a;s.push(l),qr(l);var c,h=s.length;for(c=1;c<h;++c)Nr((l=s[c]).edge,(u=s[c-1]).site,l.site,i);(l=s[h-1]).edge=Rr((u=s[0]).site,l.site,null,i),Vr(u),Vr(l)}function Hr(t){for(var e,n,r,i,o=t[0],a=t[1],s=Ts._;s;)if((r=Yr(s,a)-o)>Rs)s=s.L;else{if(!((i=o-function(t,e){var n=t.N;if(n)return Yr(n,e);var r=t.site;return r[1]===e?r[0]:1/0}(s,a))>Rs)){r>-Rs?(e=s.P,n=s):i>-Rs?(e=s,n=s.N):e=n=s;break}if(!s.R){e=s;break}s=s.R}!function(t){ks[t.index]={site:t,halfedges:[]}}(t);var u=Ur(t);if(Ts.insert(e,u),e||n){if(e===n)return qr(e),n=Ur(e.site),Ts.insert(u,n),u.edge=n.edge=Rr(e.site,u.site),Vr(e),void Vr(n);if(n){qr(e),qr(n);var l=e.site,c=l[0],h=l[1],p=t[0]-c,f=t[1]-h,d=n.site,m=d[0]-c,g=d[1]-h,y=2*(p*g-f*m),v=p*p+f*f,_=m*m+g*g,b=[(g*v-f*_)/y+c,(p*_-m*v)/y+h];Nr(n.edge,l,d,b),u.edge=Rr(l,t,null,b),n.edge=Rr(t,d,null,b),Vr(e),Vr(n)}else u.edge=Rr(e.site,u.site)}}function Yr(t,e){var n=t.site,r=n[0],i=n[1],o=i-e;if(!o)return r;var a=t.P;if(!a)return-1/0;var s=(n=a.site)[0],u=n[1],l=u-e;if(!l)return s;var c=s-r,h=1/o-1/l,p=c/l;return h?(-p+Math.sqrt(p*p-2*h*(c*c/(-2*l)-u+l/2+i-o/2)))/h+r:(r+s)/2}function Zr(t,e,n){return(t[0]-n[0])*(e[1]-t[1])-(t[0]-e[0])*(n[1]-t[1])}function Wr(t,e){return e[1]-t[1]||e[0]-t[0]}function Kr(t,e){var n,r,i,o=t.sort(Wr).pop();for(Ps=[],ks=new Array(t.length),Ts=new kr,Os=new kr;;)if(i=Is,o&&(!i||o[1]<i.y||o[1]===i.y&&o[0]<i.x))o[0]===n&&o[1]===r||(Hr(o),n=o[0],r=o[1]),o=t.pop();else{if(!i)break;Xr(i.arc)}if(function(){for(var t,e,n,r,i=0,o=ks.length;i<o;++i)if((t=ks[i])&&(r=(e=t.halfedges).length)){var a=new Array(r),s=new Array(r);for(n=0;n<r;++n)a[n]=n,s[n]=zr(t,Ps[e[n]]);for(a.sort(function(t,e){return s[e]-s[t]}),n=0;n<r;++n)s[n]=e[a[n]];for(n=0;n<r;++n)e[n]=s[n]}}(),e){var a=+e[0][0],s=+e[0][1],u=+e[1][0],l=+e[1][1];!function(t,e,n,r){for(var i,o=Ps.length;o--;)Fr(i=Ps[o],t,e,n,r)&&Dr(i,t,e,n,r)&&(Math.abs(i[0][0]-i[1][0])>Rs||Math.abs(i[0][1]-i[1][1])>Rs)||delete Ps[o]}(a,s,u,l),function(t,e,n,r){var i,o,a,s,u,l,c,h,p,f,d,m,g=ks.length,y=!0;for(i=0;i<g;++i)if(o=ks[i]){for(a=o.site,s=(u=o.halfedges).length;s--;)Ps[u[s]]||u.splice(s,1);for(s=0,l=u.length;s<l;)d=(f=Br(o,Ps[u[s]]))[0],m=f[1],h=(c=jr(o,Ps[u[++s%l]]))[0],p=c[1],(Math.abs(d-h)>Rs||Math.abs(m-p)>Rs)&&(u.splice(s,0,Ps.push(Lr(a,f,Math.abs(d-t)<Rs&&r-m>Rs?[t,Math.abs(h-t)<Rs?p:r]:Math.abs(m-r)<Rs&&n-d>Rs?[Math.abs(p-r)<Rs?h:n,r]:Math.abs(d-n)<Rs&&m-e>Rs?[n,Math.abs(h-n)<Rs?p:e]:Math.abs(m-e)<Rs&&d-t>Rs?[Math.abs(p-e)<Rs?h:t,e]:null))-1),++l);l&&(y=!1)}if(y){var v,_,b,x=1/0;for(i=0,y=null;i<g;++i)(o=ks[i])&&(b=(v=(a=o.site)[0]-t)*v+(_=a[1]-e)*_)<x&&(x=b,y=o);if(y){var w=[t,e],E=[t,r],C=[n,r],S=[n,e];y.halfedges.push(Ps.push(Lr(a=y.site,w,E))-1,Ps.push(Lr(a,E,C))-1,Ps.push(Lr(a,C,S))-1,Ps.push(Lr(a,S,w))-1)}}for(i=0;i<g;++i)(o=ks[i])&&(o.halfedges.length||delete ks[i])}(a,s,u,l)}this.edges=Ps,this.cells=ks,Ts=Os=Ps=ks=null}function Jr(t){return(t=t.slice()).push(t[0]),o([t])}function Qr(t,e,n,r){var i=(r=r||{}).steps||64,a=r.units||"kilometers",s=r.angle||0,u=r.pivot||t,l=r.properties||t.properties||{};if(!t)throw new Error("center is required");if(!e)throw new Error("xSemiAxis is required");if(!n)throw new Error("ySemiAxis is required");if(!C(r))throw new Error("options must be an object");if(!E(i))throw new Error("steps must be a number");if(!E(s))throw new Error("angle must be a number");var c=U(t);if("degrees"===a)var h=b(s);else e=Gn(t,e,90,{units:a}),n=Gn(t,n,0,{units:a}),e=U(e)[0]-c[0],n=U(n)[1]-c[1];for(var p=[],f=0;f<i;f+=1){var d=-360*f/i,m=e*n/Math.sqrt(Math.pow(n,2)+Math.pow(e,2)*Math.pow($r(d),2)),g=e*n/Math.sqrt(Math.pow(e,2)+Math.pow(n,2)/Math.pow($r(d),2));if(d<-90&&d>=-270&&(m=-m),d<-180&&d>=-360&&(g=-g),"degrees"===a){var y=m*Math.cos(h)+g*Math.sin(h),v=g*Math.cos(h)-m*Math.sin(h);m=y,g=v}p.push([m+c[0],g+c[1]])}return p.push(p[0]),"degrees"===a?o([p],l):tr(o([p],l),s,{pivot:u})}function $r(t){var e=t*Math.PI/180;return Math.tan(e)}function ti(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.properties,i=e.weight;if(!t)throw new Error("geojson is required");var o=0,a=0,s=0;return L(t,function(t,e,n){var r=n[i];if(!E(r=void 0===r||null===r?1:r))throw new Error("weight value must be a number for feature index "+e);(r=Number(r))>0&&T(t,function(t){o+=t[0]*r,a+=t[1]*r,s+=r})}),r([o/s,a/s],n)}function ei(t,e,n,i){var o=n.properties.tolerance||.001,a=0,s=0,u=0,l=0;if(A(n,function(e){var n=e.properties.weight,r=void 0===n||null===n?1:n;if(!E(r=Number(r)))throw new Error("weight value must be a number");if(r>0){l+=1;var i=r*Nt(e,t);0===i&&(i=1);var o=r/i;a+=e.geometry.coordinates[0]*o,s+=e.geometry.coordinates[1]*o,u+=o}}),l<1)throw new Error("no features to measure");var c=a/u,h=s/u;return 1===l||0===i||Math.abs(c-e[0])<o&&Math.abs(h-e[1])<o?r([c,h],{medianCandidates:n.properties.medianCandidates}):(n.properties.medianCandidates.push([c,h]),ei([c,h],t,n,i-1))}function ni(t,e){return{x:t[0]-e[0],y:t[1]-e[1]}}function ri(t){if(C(t)&&(t=t.bbox),t&&!Array.isArray(t))throw new Error("bbox is invalid");return t?function(t){return[Math.random()*(t[2]-t[0])+t[0],Math.random()*(t[3]-t[1])+t[1]]}(t):[360*si(),180*si()]}function ii(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.bbox;void 0!==t&&null!==t||(t=1);for(var i=[],o=0;o<t;o++)i.push(r(ri(n)));return l(i)}function oi(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.bbox,r=e.num_vertices,i=e.max_radial_length;void 0!==t&&null!==t||(t=1),E(r)||(r=10),E(i)||(i=10);for(var a=[],s=0;s<t;s++){var u=[],c=Array.apply(null,new Array(r+1)).map(Math.random);c.forEach(function(t,e,n){n[e]=e>0?t+n[e-1]:t}),c.forEach(function(t){t=2*t*Math.PI/c[c.length-1];var e=Math.random();u.push([e*i*Math.sin(t),e*i*Math.cos(t)])}),u[u.length-1]=u[0],u=u.map(function(t){return function(e){return[e[0]+t[0],e[1]+t[1]]}}(ri(n))),a.push(o([u]))}return l(a)}function ai(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.bbox,r=e.num_vertices,i=e.max_length,o=e.max_rotation;void 0!==t&&null!==t||(t=1),(!E(r)||r<2)&&(r=10),E(i)||(i=1e-4),E(o)||(o=Math.PI/8);for(var a=[],u=0;u<t;u++){for(var c=[ri(n)],h=0;h<r-1;h++){var p=(0===h?2*Math.random()*Math.PI:Math.tan((c[h][1]-c[h-1][1])/(c[h][0]-c[h-1][0])))+(Math.random()-.5)*o*2,f=Math.random()*i;c.push([c[h][0]+f*Math.cos(p),c[h][1]+f*Math.sin(p)])}a.push(s(c))}return l(a)}function si(){return Math.random()-.5}function ui(t,e){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(void 0===e||null===e)throw new Error("filter is required");var n=[];return A(t,function(t){pi(t.properties,e)&&n.push(t)}),l(n)}function li(t,e,n){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(void 0===e||null===e)throw new Error("property is required");for(var r=hi(t,e),i=Object.keys(r),o=0;o<i.length;o++){for(var a=i[o],s=r[a],u=[],c=0;c<s.length;c++)u.push(t.features[s[c]]);n(l(u),a,o)}}function ci(t,e,n,r){var i=r;return li(t,e,function(t,e,o){i=0===o&&void 0===r?t:n(i,t,e,o)}),i}function hi(t,e){var n={};return A(t,function(t,r){var i=t.properties||{};if(i.hasOwnProperty(e)){var o=i[e];n.hasOwnProperty(o)?n[o].push(r):n[o]=[r]}}),n}function pi(t,e){if(void 0===t)return!1;var n=typeof e;if("number"===n||"string"===n)return t.hasOwnProperty(e);if(Array.isArray(e)){for(var r=0;r<e.length;r++)if(!pi(t,e[r]))return!1;return!0}return fi(t,e)}function fi(t,e){for(var n=Object.keys(e),r=0;r<n.length;r++){var i=n[r];if(t[i]!==e[i])return!1}return!0}function di(t,e){if(!e)return{};if(!e.length)return{};for(var n={},r=0;r<e.length;r++){var i=e[r];t.hasOwnProperty(i)&&(n[i]=t[i])}return n}function mi(){}function gi(t){this.message=t||""}function yi(t){this.message=t||""}function vi(){}function _i(t){return null===t?el:t.color}function bi(t){return null===t?null:t.parent}function xi(t,e){null!==t&&(t.color=e)}function wi(t){return null===t?null:t.left}function Ei(t){return null===t?null:t.right}function Ci(){this.root_=null,this.size_=0}function Si(){}function Ii(){this.array_=[],arguments[0]instanceof Bu&&this.addAll(arguments[0])}function Ti(){}function ki(t){this.message=t||""}function Oi(){this.array_=[]}function Pi(t){switch(t.type){case"Polygon":return sn(t)>1?t:null;case"MultiPolygon":var e=[];if(D(t,function(t){sn(t)>1&&e.push(t.geometry.coordinates)}),e.length)return{type:"MultiPolygon",coordinates:e}}}function Ai(){this.reset()}function Mi(t,e,n){var r=t.s=e+n,i=r-e;t.t=e-(r-i)+(n-i)}function Ri(t){return t>1?sf:t<-1?-sf:Math.asin(t)}function Li(){}function Ni(t,e){t&&wf.hasOwnProperty(t.type)&&wf[t.type](t,e)}function Di(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)e.point((r=t[i])[0],r[1],r[2]);e.lineEnd()}function Fi(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)Di(t[n],e,1);e.polygonEnd()}function zi(t){return[df(t[1],t[0]),Ri(t[2])]}function ji(t){var e=t[0],n=t[1],r=mf(n);return[r*mf(e),r*vf(e),vf(n)]}function Bi(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Vi(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function qi(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Ui(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Gi(t){var e=_f(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Xi(t,e){return[t>af?t-lf:t<-af?t+lf:t,e]}function Hi(t,e,n){return(t%=lf)?e||n?Cf(Zi(t),Wi(e,n)):Zi(t):e||n?Wi(e,n):Xi}function Yi(t){return function(e,n){return[(e+=t)>af?e-lf:e<-af?e+lf:e,n]}}function Zi(t){var e=Yi(t);return e.invert=Yi(-t),e}function Wi(t,e){function n(t,e){var n=mf(e),s=mf(t)*n,u=vf(t)*n,l=vf(e),c=l*r+s*i;return[df(u*o-c*a,s*r-l*i),Ri(c*o+u*a)]}var r=mf(t),i=vf(t),o=mf(e),a=vf(e);return n.invert=function(t,e){var n=mf(e),s=mf(t)*n,u=vf(t)*n,l=vf(e),c=l*o-u*a;return[df(u*o+l*a,s*r+c*i),Ri(c*r-s*i)]},n}function Ki(t,e){(e=ji(e))[0]-=t,Gi(e);var n=function(t){return t>1?0:t<-1?af:Math.acos(t)}(-e[1]);return((-e[2]<0?-n:n)+lf-of)%lf}function Ji(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Qi(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function $i(t){return t.length>1}function to(t,e){return((t=t.x)[0]<0?t[1]-sf-of:sf-t[1])-((e=e.x)[0]<0?e[1]-sf-of:sf-e[1])}function eo(t){return function(e){var n=new no;for(var r in t)n[r]=t[r];return n.stream=e,n}}function no(){}function ro(t,e,n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=o&&t.clipExtent(null),Ef(n,t.stream(jf));var a=jf.result(),s=Math.min(r/(a[1][0]-a[0][0]),i/(a[1][1]-a[0][1])),u=+e[0][0]+(r-s*(a[1][0]+a[0][0]))/2,l=+e[0][1]+(i-s*(a[1][1]+a[0][1]))/2;return null!=o&&t.clipExtent(o),t.scale(150*s).translate([u,l])}function io(t,e){return[t,yf(bf((sf+e)/2))]}function oo(t,e){return[yf(bf((sf+e)/2)),-t]}function ao(t,n,r,i){var o=t.properties||{},a="Feature"===t.type?t.geometry:t;if("GeometryCollection"===a.type){var s=[];return L(t,function(t){var e=ao(t,n,r,i);e&&s.push(e)}),l(s)}var u,c=q(t),h=c[1]>50&&c[3]>50;u=h?{type:a.type,coordinates:function t(e,n){return"object"!=typeof e[0]?n(e):e.map(function(e){return t(e,n)})}(a.coordinates,so(a))}:Je(a);var p,f=(new Gl).read(u),d=m(g(n,r),"meters"),y=Nh.bufferOp(f,d);if(!function t(e){return Array.isArray(e[0])?t(e[0]):isNaN(e[0])}((y=(new Xl).write(y)).coordinates))return(p=h?{type:y.type,coordinates:function t(e,n){return"object"!=typeof e[0]?n.invert(e):e.map(function(e){return t(e,n)})}(y.coordinates,so(a))}:Qe(y)).geometry?p:e(p,o)}function so(t){var e=se(t).geometry.coordinates.reverse(),n=e.map(function(t){return-t});return Hf().center(e).rotate(n).scale(yo)}function uo(){for(var t=new Gl,e=t.read(JSON.stringify(arguments[0].geometry)),n=1;n<arguments.length;n++)e=ef.union(e,t.read(JSON.stringify(arguments[n].geometry)));return{type:"Feature",geometry:e=(new Xl).write(e),properties:arguments[0].properties}}function lo(t,n){var r=W(t),i=W(n);if(Yt(vn(i,{precision:4})).coordinates[0].length<4)return null;if(Yt(vn(r,{precision:4})).coordinates[0].length<4)return null;var o=new Gl,a=o.read(vn(r)),s=o.read(vn(i)),u=Hp.intersection(a,s);return u.isEmpty()?null:e((new Xl).write(u))}function co(t,e){return function(t,e,n){var r,i;if(!Array.isArray(e))throw new Error("Get closest expects an array as second argument");return e.forEach(function(e,n){var o=function(t,e){return t-e}(e,t);o>=0&&(void 0===i||o<i)&&(i=o,r=n)}),r}(t,e)}function ho(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");var r=n.properties||{},i=n.triangles,a=n.mask;if(null===e||void 0===e)throw new Error("cellSide is required");if(!E(e))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(a&&-1===["Polygon","MultiPolygon"].indexOf(J(a)))throw new Error("options.mask must be a (Multi)Polygon");var s=t[0],u=t[1],c=t[2],h=t[3],p=(u+h)/2,f=(s+c)/2,d=2*e/Nt([s,p],[c,p],n)*(c-s),m=2*e/Nt([f,u],[f,h],n)*(h-u),g=d/2,y=2*g,v=Math.sqrt(3)/2*m,_=c-s,b=h-u,x=.75*y,w=v,S=Math.floor((_-y)/(y-g/2)),I=(S*x-g/2-_)/2-g/2+x/2,T=Math.floor((b-v)/v),k=(b-T*v)/2,O=T*v-b>v/2;O&&(k-=v/4);for(var P=[],A=[],M=0;M<6;M++){var R=2*Math.PI/6*M;P.push(Math.cos(R)),A.push(Math.sin(R))}for(var L=[],N=0;N<=S;N++)for(var D=0;D<=T;D++){var F=N%2==1;if(!(0===D&&F||0===D&&O)){var z=N*x+s-I,j=D*w+u+k;if(F&&(j-=v/2),!0===i)(function(t,e,n,r,i,a){for(var s=[],u=0;u<6;u++){var l=[];l.push(t),l.push([t[0]+e*i[u],t[1]+n*a[u]]),l.push([t[0]+e*i[(u+1)%6],t[1]+n*a[(u+1)%6]]),l.push(t),s.push(o([l],r))}return s})([z,j],d/2,m/2,r,P,A).forEach(function(t){a?lo(a,t)&&L.push(t):L.push(t)});else{var B=function(t,e,n,r,i,a){for(var s=[],u=0;u<6;u++)s.push([t[0]+e*i[u],t[1]+n*a[u]]);return s.push(s[0].slice()),o([s],r)}([z,j],d/2,m/2,r,P,A);a?lo(a,B)&&L.push(B):L.push(B)}}}return l(L)}function po(t){if(t.features.length<=1)return t;var e=function(t){var e=To(),n=[];return D(t,function(t,e){var r=q(t);n.push({minX:r[0],minY:r[1],maxX:r[2],maxY:r[3],geojson:t,index:e})}),e.load(n),e}(t),n=[],r={};return D(t,function(t,i){if(r[i])return!0;for(e.remove({index:i},fo),r[i]=!0;;){var o=q(t),a=e.search({minX:o[0],minY:o[1],maxX:o[2],maxY:o[3]});if(a.length>0){var s=a.map(function(t){return r[t.index]=!0,e.remove({index:t.index},fo),t.geojson});s.push(t),t=uo.apply(this,s)}if(0===a.length)break}n.push(t)}),l(n)}function fo(t,e){return t.index===e.index}function mo(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");var r=n.properties,i=n.mask,a=[];if(null===e||void 0===e)throw new Error("cellSide is required");if(!E(e))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(i&&-1===["Polygon","MultiPolygon"].indexOf(J(i)))throw new Error("options.mask must be a (Multi)Polygon");for(var s=t[0],u=t[1],c=t[2],h=t[3],p=e/Nt([s,u],[c,u],n)*(c-s),f=e/Nt([s,u],[s,h],n)*(h-u),d=c-s,m=h-u,g=Math.floor(d/p),y=Math.floor(m/f),v=(m-y*f)/2,_=s+(d-g*p)/2,b=0;b<g;b++){for(var x=u+v,w=0;w<y;w++){var S=o([[[_,x],[_,x+f],[_+p,x+f],[_+p,x],[_,x]]],r);i?lo(i,S)&&a.push(S):a.push(S),x+=f}_+=p}return l(a)}function go(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");var r=n.properties,i=n.mask,a=[];if(null===e||void 0===e)throw new Error("cellSide is required");if(!E(e))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(i&&-1===["Polygon","MultiPolygon"].indexOf(J(i)))throw new Error("options.mask must be a (Multi)Polygon");for(var s=e/Nt([t[0],t[1]],[t[2],t[1]],n)*(t[2]-t[0]),u=e/Nt([t[0],t[1]],[t[0],t[3]],n)*(t[3]-t[1]),c=0,h=t[0];h<=t[2];){for(var p=0,f=t[1];f<=t[3];){var d=null,m=null;c%2==0&&p%2==0?(d=o([[[h,f],[h,f+u],[h+s,f],[h,f]]],r),m=o([[[h,f+u],[h+s,f+u],[h+s,f],[h,f+u]]],r)):c%2==0&&p%2==1?(d=o([[[h,f],[h+s,f+u],[h+s,f],[h,f]]],r),m=o([[[h,f],[h,f+u],[h+s,f+u],[h,f]]],r)):p%2==0&&c%2==1?(d=o([[[h,f],[h,f+u],[h+s,f+u],[h,f]]],r),m=o([[[h,f],[h+s,f+u],[h+s,f],[h,f]]],r)):p%2==1&&c%2==1&&(d=o([[[h,f],[h,f+u],[h+s,f],[h,f]]],r),m=o([[[h,f+u],[h+s,f+u],[h+s,f],[h,f+u]]],r)),i?(lo(i,d)&&a.push(d),lo(i,m)&&a.push(m)):(a.push(d),a.push(m)),f+=u,p++}c++,h+=s}return l(a)}var yo=6371008.8,vo={meters:yo,metres:yo,millimeters:1e3*yo,millimetres:1e3*yo,centimeters:100*yo,centimetres:100*yo,kilometers:yo/1e3,kilometres:yo/1e3,miles:yo/1609.344,nauticalmiles:yo/1852,inches:39.37*yo,yards:yo/1.0936,feet:3.28084*yo,radians:1,degrees:yo/111325},_o={meters:1,metres:1,millimeters:1e3,millimetres:1e3,centimeters:100,centimetres:100,kilometers:.001,kilometres:.001,miles:1/1609.344,nauticalmiles:1/1852,inches:39.37,yards:1/1.0936,feet:3.28084,radians:1/yo,degrees:1/111325},bo={meters:1,metres:1,millimeters:1e6,millimetres:1e6,centimeters:1e4,centimetres:1e4,kilometers:1e-6,kilometres:1e-6,acres:247105e-9,miles:3.86e-7,yards:1.195990046,feet:10.763910417,inches:1550.003100006},xo=Object.freeze({earthRadius:yo,factors:vo,unitsFactors:_o,areaFactors:bo,feature:e,geometry:n,point:r,points:i,polygon:o,polygons:a,lineString:s,lineStrings:u,featureCollection:l,multiLineString:c,multiPoint:h,multiPolygon:p,geometryCollection:f,round:d,radiansToLength:m,lengthToRadians:g,lengthToDegrees:y,bearingToAzimuth:v,radiansToDegrees:_,degreesToRadians:b,convertLength:x,convertArea:w,isNumber:E,isObject:C,validateBBox:S,validateId:I,radians2degrees:function(){throw new Error("method has been renamed to `radiansToDegrees`")},degrees2radians:function(){throw new Error("method has been renamed to `degreesToRadians`")},distanceToDegrees:function(){throw new Error("method has been renamed to `lengthToDegrees`")},distanceToRadians:function(){throw new Error("method has been renamed to `lengthToRadians`")},radiansToDistance:function(){throw new Error("method has been renamed to `radiansToLength`")},bearingToAngle:function(){throw new Error("method has been renamed to `bearingToAzimuth`")},convertDistance:function(){throw new Error("method has been renamed to `convertLength`")}}),wo=Object.freeze({coordEach:T,coordReduce:k,propEach:O,propReduce:P,featureEach:A,featureReduce:M,coordAll:R,geomEach:L,geomReduce:N,flattenEach:D,flattenReduce:F,segmentEach:z,segmentReduce:j,lineEach:B,lineReduce:V}),Eo=Object.freeze({getCoord:U,getCoords:G,containsNumber:X,geojsonType:H,featureOf:Y,collectionOf:Z,getGeom:W,getGeomType:K,getType:J}),Co={successCallback:null,verbose:!1},So={},Io=function t(e,n,r,i,o){for(r=r||0,i=i||e.length-1,o=o||function(t,e){return t<e?-1:t>e?1:0};i>r;){if(i-r>600){var a=i-r+1,s=n-r+1,u=Math.log(a),l=.5*Math.exp(2*u/3),c=.5*Math.sqrt(u*l*(a-l)/a)*(s-a/2<0?-1:1);t(e,n,Math.max(r,Math.floor(n-s*l/a+c)),Math.min(i,Math.floor(n+(a-s)*l/a+c)),o)}var h=e[n],p=r,f=i;for(rt(e,r,n),o(e[i],h)>0&&rt(e,r,i);p<f;){for(rt(e,p,f),p++,f--;o(e[p],h)<0;)p++;for(;o(e[f],h)>0;)f--}0===o(e[r],h)?rt(e,r,f):rt(e,++f,i),f<=n&&(r=f+1),n<=f&&(i=f-1)}},To=it;it.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],r=this.toBBox;if(!ft(t,e))return n;for(var i,o,a,s,u=[];e;){for(i=0,o=e.children.length;i<o;i++)a=e.children[i],ft(t,s=e.leaf?r(a):a)&&(e.leaf?n.push(a):pt(t,s)?this._all(a,n):u.push(a));e=u.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!ft(t,e))return!1;for(var r,i,o,a,s=[];e;){for(r=0,i=e.children.length;r<i;r++)if(o=e.children[r],ft(t,a=e.leaf?n(o):o)){if(e.leaf||pt(t,a))return!0;s.push(o)}e=s.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var i=this.data;this.data=r,r=i}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=dt([]),this},remove:function(t,e){if(!t)return this;for(var n,r,i,o,a=this.data,s=this.toBBox(t),u=[],l=[];a||u.length;){if(a||(a=u.pop(),r=u[u.length-1],n=l.pop(),o=!0),a.leaf&&-1!==(i=function(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}(t,a.children,e)))return a.children.splice(i,1),u.push(a),this._condense(u),this;o||a.leaf||!pt(a,s)?r?(a=r.children[++n],o=!1):a=null:(u.push(a),l.push(n),n=0,r=a,a=a.children[0])}return this},toBBox:function(t){return t},compareMinX:ut,compareMinY:lt,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,r){var i,o=n-e+1,a=this._maxEntries;if(o<=a)return ot(i=dt(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,r-1))),(i=dt([])).leaf=!1,i.height=r;var s,u,l,c,h=Math.ceil(o/a),p=h*Math.ceil(Math.sqrt(a));for(mt(t,e,n,p,this.compareMinX),s=e;s<=n;s+=p)for(mt(t,s,l=Math.min(s+p-1,n),h,this.compareMinY),u=s;u<=l;u+=h)c=Math.min(u+h-1,l),i.children.push(this._build(t,u,c,r-1));return ot(i,this.toBBox),i},_chooseSubtree:function(t,e,n,r){for(var i,o,a,s,u,l,c,h;r.push(e),!e.leaf&&r.length-1!==n;){for(c=h=1/0,i=0,o=e.children.length;i<o;i++)u=ct(a=e.children[i]),(l=function(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}(t,a)-u)<h?(h=l,c=u<c?u:c,s=a):l===h&&u<c&&(c=u,s=a);e=s||e.children[0]}return e},_insert:function(t,e,n){var r=n?t:(0,this.toBBox)(t),i=[],o=this._chooseSubtree(r,this.data,e,i);for(o.children.push(t),st(o,r);e>=0&&i[e].children.length>this._maxEntries;)this._split(i,e),e--;this._adjustParentBBoxes(r,i,e)},_split:function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var o=this._chooseSplitIndex(n,i,r),a=dt(n.children.splice(o,n.children.length-o));a.height=n.height,a.leaf=n.leaf,ot(n,this.toBBox),ot(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(n,a)},_splitRoot:function(t,e){this.data=dt([t,e]),this.data.height=t.height+1,this.data.leaf=!1,ot(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var r,i,o,a,s,u,l,c;for(u=l=1/0,r=e;r<=n-e;r++)a=function(t,e){var n=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),i=Math.min(t.maxX,e.maxX),o=Math.min(t.maxY,e.maxY);return Math.max(0,i-n)*Math.max(0,o-r)}(i=at(t,0,r,this.toBBox),o=at(t,r,n,this.toBBox)),s=ct(i)+ct(o),a<u?(u=a,c=r,l=s<l?s:l):a===u&&s<l&&(l=s,c=r);return c},_chooseSplitAxis:function(t,e,n){var r=t.leaf?this.compareMinX:ut,i=t.leaf?this.compareMinY:lt;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},_allDistMargin:function(t,e,n,r){t.children.sort(r);var i,o,a=this.toBBox,s=at(t,0,e,a),u=at(t,n-e,n,a),l=ht(s)+ht(u);for(i=e;i<n-e;i++)o=t.children[i],st(s,t.leaf?a(o):o),l+=ht(s);for(i=n-e-1;i>=e;i--)o=t.children[i],st(u,t.leaf?a(o):o),l+=ht(u);return l},_adjustParentBBoxes:function(t,e,n){for(var r=n;r>=0;r--)st(e[r],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():ot(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};var ko=function(t,e,n){var r=t*e,i=Oo*t,o=i-(i-t),a=t-o,s=Oo*e,u=s-(s-e),l=e-u,c=a*l-(r-o*u-a*u-o*l);return n?(n[0]=c,n[1]=r,n):[c,r]},Oo=+(Math.pow(2,27)+1),Po=function(t,e){var n=0|t.length,r=0|e.length;if(1===n&&1===r)return function(t,e){var n=t+e,r=n-t,i=t-(n-r)+(e-r);return i?[i,n]:[n]}(t[0],e[0]);var i,o,a=new Array(n+r),s=0,u=0,l=0,c=Math.abs,h=t[u],p=c(h),f=e[l],d=c(f);p<d?(o=h,(u+=1)<n&&(p=c(h=t[u]))):(o=f,(l+=1)<r&&(d=c(f=e[l]))),u<n&&p<d||l>=r?(i=h,(u+=1)<n&&(p=c(h=t[u]))):(i=f,(l+=1)<r&&(d=c(f=e[l])));for(var m,g,y=i+o,v=y-i,_=o-v,b=_,x=y;u<n&&l<r;)p<d?(i=h,(u+=1)<n&&(p=c(h=t[u]))):(i=f,(l+=1)<r&&(d=c(f=e[l]))),(_=(o=b)-(v=(y=i+o)-i))&&(a[s++]=_),b=x-((m=x+y)-(g=m-x))+(y-g),x=m;for(;u<n;)(_=(o=b)-(v=(y=(i=h)+o)-i))&&(a[s++]=_),b=x-((m=x+y)-(g=m-x))+(y-g),x=m,(u+=1)<n&&(h=t[u]);for(;l<r;)(_=(o=b)-(v=(y=(i=f)+o)-i))&&(a[s++]=_),b=x-((m=x+y)-(g=m-x))+(y-g),x=m,(l+=1)<r&&(f=e[l]);return b&&(a[s++]=b),x&&(a[s++]=x),s||(a[s++]=0),a.length=s,a},Ao=function(t,e,n){var r=t+e,i=r-t,o=e-i,a=t-(r-i);return n?(n[0]=a+o,n[1]=r,n):[a+o,r]},Mo=function(t,e){var n=t.length;if(1===n){var r=ko(t[0],e);return r[0]?r:[r[1]]}var i=new Array(2*n),o=[.1,.1],a=[.1,.1],s=0;ko(t[0],e,o),o[0]&&(i[s++]=o[0]);for(var u=1;u<n;++u){ko(t[u],e,a),Ao(o[1],a[0],o),o[0]&&(i[s++]=o[0]);var l=a[1],c=o[1],h=l+c,p=c-(h-l);o[1]=h,p&&(i[s++]=p)}return o[1]&&(i[s++]=o[1]),0===s&&(i[s++]=0),i.length=s,i},Ro=function(t,e){var n=0|t.length,r=0|e.length;if(1===n&&1===r)return function(t,e){var n=t+e,r=n-t,i=t-(n-r)+(e-r);return i?[i,n]:[n]}(t[0],-e[0]);var i,o,a=new Array(n+r),s=0,u=0,l=0,c=Math.abs,h=t[u],p=c(h),f=-e[l],d=c(f);p<d?(o=h,(u+=1)<n&&(p=c(h=t[u]))):(o=f,(l+=1)<r&&(d=c(f=-e[l]))),u<n&&p<d||l>=r?(i=h,(u+=1)<n&&(p=c(h=t[u]))):(i=f,(l+=1)<r&&(d=c(f=-e[l])));for(var m,g,y=i+o,v=y-i,_=o-v,b=_,x=y;u<n&&l<r;)p<d?(i=h,(u+=1)<n&&(p=c(h=t[u]))):(i=f,(l+=1)<r&&(d=c(f=-e[l]))),(_=(o=b)-(v=(y=i+o)-i))&&(a[s++]=_),b=x-((m=x+y)-(g=m-x))+(y-g),x=m;for(;u<n;)(_=(o=b)-(v=(y=(i=h)+o)-i))&&(a[s++]=_),b=x-((m=x+y)-(g=m-x))+(y-g),x=m,(u+=1)<n&&(h=t[u]);for(;l<r;)(_=(o=b)-(v=(y=(i=f)+o)-i))&&(a[s++]=_),b=x-((m=x+y)-(g=m-x))+(y-g),x=m,(l+=1)<r&&(f=-e[l]);return b&&(a[s++]=b),x&&(a[s++]=x),s||(a[s++]=0),a.length=s,a},Lo=gt(function(t){function e(t,e){for(var n=new Array(t.length-1),r=1;r<t.length;++r)for(var i=n[r-1]=new Array(t.length-1),o=0,a=0;o<t.length;++o)o!==e&&(i[a++]=t[r][o]);return n}function n(t){return 1&t?"-":""}function r(t){if(1===t.length)return t[0];if(2===t.length)return["sum(",t[0],",",t[1],")"].join("");var e=t.length>>1;return["sum(",r(t.slice(0,e)),",",r(t.slice(e)),")"].join("")}function i(t){if(2===t.length)return[["sum(prod(",t[0][0],",",t[1][1],"),prod(-",t[0][1],",",t[1][0],"))"].join("")];for(var o=[],a=0;a<t.length;++a)o.push(["scale(",r(i(e(t,a))),",",n(a),t[0][a],")"].join(""));return o}function o(t){for(var n=[],o=[],a=function(t){for(var e=new Array(t),n=0;n<t;++n){e[n]=new Array(t);for(var r=0;r<t;++r)e[n][r]=["m",r,"[",t-n-1,"]"].join("")}return e}(t),s=[],u=0;u<t;++u)0==(1&u)?n.push.apply(n,i(e(a,u))):o.push.apply(o,i(e(a,u))),s.push("m"+u);var l=r(n),c=r(o),h="orientation"+t+"Exact",p=["function ",h,"(",s.join(),"){var p=",l,",n=",c,",d=sub(p,n);return d[d.length-1];};return ",h].join("");return new Function("sum","prod","scale","sub",p)(Po,ko,Mo,Ro)}var a=o(3),s=o(4),u=[function(){return 0},function(){return 0},function(t,e){return e[0]-t[0]},function(t,e,n){var r,i=(t[1]-n[1])*(e[0]-n[0]),o=(t[0]-n[0])*(e[1]-n[1]),s=i-o;if(i>0){if(o<=0)return s;r=i+o}else{if(!(i<0))return s;if(o>=0)return s;r=-(i+o)}var u=3.3306690738754716e-16*r;return s>=u||s<=-u?s:a(t,e,n)},function(t,e,n,r){var i=t[0]-r[0],o=e[0]-r[0],a=n[0]-r[0],u=t[1]-r[1],l=e[1]-r[1],c=n[1]-r[1],h=t[2]-r[2],p=e[2]-r[2],f=n[2]-r[2],d=o*c,m=a*l,g=a*u,y=i*c,v=i*l,_=o*u,b=h*(d-m)+p*(g-y)+f*(v-_),x=7.771561172376103e-16*((Math.abs(d)+Math.abs(m))*Math.abs(h)+(Math.abs(g)+Math.abs(y))*Math.abs(p)+(Math.abs(v)+Math.abs(_))*Math.abs(f));return b>x||-b>x?b:s(t,e,n,r)}];!function(){for(;u.length<=5;)u.push(o(u.length));for(var e=[],n=["slow"],r=0;r<=5;++r)e.push("a"+r),n.push("o"+r);var i=["function getOrientation(",e.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(r=2;r<=5;++r)i.push("case ",r,":return o",r,"(",e.slice(0,r).join(),");");i.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),n.push(i.join(""));var a=Function.apply(void 0,n);for(t.exports=a.apply(void 0,[function(t){var e=u[t.length];return e||(e=u[t.length]=o(t.length)),e.apply(void 0,t)}].concat(u)),r=0;r<=5;++r)t.exports[r]=u[r]}()}),No=function(t){var e=t.length;if(e<3){for(var n=new Array(e),r=0;r<e;++r)n[r]=r;return 2===e&&t[0][0]===t[1][0]&&t[0][1]===t[1][1]?[0]:n}var i=new Array(e);for(r=0;r<e;++r)i[r]=r;i.sort(function(e,n){return t[e][0]-t[n][0]||t[e][1]-t[n][1]});var o=[i[0],i[1]],a=[i[0],i[1]];for(r=2;r<e;++r){for(var s=i[r],u=t[s],l=o.length;l>1&&Do(t[o[l-2]],t[o[l-1]],u)<=0;)l-=1,o.pop();for(o.push(s),l=a.length;l>1&&Do(t[a[l-2]],t[a[l-1]],u)>=0;)l-=1,a.pop();a.push(s)}n=new Array(a.length+o.length-2);for(var c=0,h=(r=0,o.length);r<h;++r)n[c++]=o[r];for(var p=a.length-2;p>0;--p)n[c++]=a[p];return n},Do=Lo[3],Fo=yt,zo=yt;yt.prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var t=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t}},peek:function(){return this.data[0]},_up:function(t){for(var e=this.data,n=this.compare,r=e[t];t>0;){var i=t-1>>1,o=e[i];if(n(r,o)>=0)break;e[t]=o,t=i}e[t]=r},_down:function(t){for(var e=this.data,n=this.compare,r=this.length>>1,i=e[t];t<r;){var o=1+(t<<1),a=o+1,s=e[o];if(a<this.length&&n(e[a],s)<0&&(o=a,s=e[a]),n(s,i)>=0)break;e[t]=s,t=o}e[t]=i}},Fo.default=zo;var jo=function(t,e){for(var n=t[0],r=t[1],i=!1,o=0,a=e.length-1;o<e.length;a=o++){var s=e[o][0],u=e[o][1],l=e[a][1];u>r!=l>r&&n<(e[a][0]-s)*(r-u)/(l-u)+s&&(i=!i)}return i},Bo=Lo[3],Vo=vt;Vo.default=vt;var qo=function(t){return t},Uo=function(t){if(null==t)return qo;var e,n,r=t.scale[0],i=t.scale[1],o=t.translate[0],a=t.translate[1];return function(t,s){s||(e=n=0);var u=2,l=t.length,c=new Array(l);for(c[0]=(e+=t[0])*r+o,c[1]=(n+=t[1])*i+a;u<l;)c[u]=t[u],++u;return c}},Go=function(t,e){for(var n,r=t.length,i=r-e;i<--r;)n=t[i],t[i++]=t[r],t[r]=n},Xo=function(t,e,n,r,i,o){3===arguments.length&&(r=o=Array,i=null);for(var a=new r(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),s=new o(t),u=t-1,l=0;l<t;++l)a[l]=i;return{set:function(r,o){for(var l=e(r)&u,c=a[l],h=0;c!=i;){if(n(c,r))return s[l]=o;if(++h>=t)throw new Error("full hashmap");c=a[l=l+1&u]}return a[l]=r,s[l]=o,o},maybeSet:function(r,o){for(var l=e(r)&u,c=a[l],h=0;c!=i;){if(n(c,r))return s[l];if(++h>=t)throw new Error("full hashmap");c=a[l=l+1&u]}return a[l]=r,s[l]=o,o},get:function(r,o){for(var l=e(r)&u,c=a[l],h=0;c!=i;){if(n(c,r))return s[l];if(++h>=t)break;c=a[l=l+1&u]}return o},keys:function(){for(var t=[],e=0,n=a.length;e<n;++e){var r=a[e];r!=i&&t.push(r)}return t}}},Ho=function(t,e){return t[0]===e[0]&&t[1]===e[1]},Yo=new ArrayBuffer(16),Zo=new Float64Array(Yo),Wo=new Uint32Array(Yo),Ko=function(t){Zo[0]=t[0],Zo[1]=t[1];var e=Wo[0]^Wo[1];return 2147483647&(e<<5^e>>7^Wo[2]^Wo[3])},Jo=function(t){this.points=t.points||[],this.duration=t.duration||1e4,this.sharpness=t.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=t.stepLength||60,this.length=this.points.length,this.delay=0;for(var e=0;e<this.length;e++)this.points[e].z=this.points[e].z||0;for(e=0;e<this.length-1;e++){var n=this.points[e],r=this.points[e+1];this.centers.push({x:(n.x+r.x)/2,y:(n.y+r.y)/2,z:(n.z+r.z)/2})}for(this.controls.push([this.points[0],this.points[0]]),e=0;e<this.centers.length-1;e++){n=this.centers[e],r=this.centers[e+1];var i=this.points[e+1].x-(this.centers[e].x+this.centers[e+1].x)/2,o=this.points[e+1].y-(this.centers[e].y+this.centers[e+1].y)/2,a=this.points[e+1].z-(this.centers[e].y+this.centers[e+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e].x+i),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e].z+a)},{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e+1].x+i),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e+1].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e+1].z+a)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this};Jo.prototype.cacheSteps=function(t){var e=[],n=this.pos(0);e.push(0);for(var r=0;r<this.duration;r+=10){var i=this.pos(r);Math.sqrt((i.x-n.x)*(i.x-n.x)+(i.y-n.y)*(i.y-n.y)+(i.z-n.z)*(i.z-n.z))>t&&(e.push(r),n=i)}return e},Jo.prototype.vector=function(t){var e=this.pos(t+10),n=this.pos(t-10);return{angle:180*Math.atan2(e.y-n.y,e.x-n.x)/3.14,speed:Math.sqrt((n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y)+(n.z-e.z)*(n.z-e.z))}},Jo.prototype.pos=function(t){var e=t-this.delay;e<0&&(e=0),e>this.duration&&(e=this.duration-1);var n=e/this.duration;if(n>=1)return this.points[this.length-1];var r=Math.floor((this.points.length-1)*n);return function(t,e,n,r,i){var o=function(t){var e=t*t;return[e*t,3*e*(1-t),3*t*(1-t)*(1-t),(1-t)*(1-t)*(1-t)]}(t);return{x:i.x*o[0]+r.x*o[1]+n.x*o[2]+e.x*o[3],y:i.y*o[0]+r.y*o[1]+n.y*o[2]+e.y*o[3],z:i.z*o[0]+r.z*o[1]+n.z*o[2]+e.z*o[3]}}((this.length-1)*n-r,this.points[r],this.controls[r][1],this.controls[r+1][0],this.points[r+1])};var Qo=ce,$o=ce;ce.deviation=function(t,e,n,r){var i=e&&e.length,o=Math.abs(Ce(t,0,i?e[0]*n:t.length,n));if(i)for(var a=0,s=e.length;a<s;a++)o-=Math.abs(Ce(t,e[a]*n,a<s-1?e[a+1]*n:t.length,n));var u=0;for(a=0;a<r.length;a+=3){var l=r[a]*n,c=r[a+1]*n,h=r[a+2]*n;u+=Math.abs((t[l]-t[h])*(t[c+1]-t[l+1])-(t[l]-t[c])*(t[h+1]-t[l+1]))}return 0===o&&0===u?0:Math.abs((u-o)/o)},ce.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[i][o][a]);i>0&&n.holes.push(r+=t[i-1].length)}return n},Qo.default=$o,Oe.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],r=this.toBBox;if(!ze(t,e))return n;for(var i,o,a,s,u=[];e;){for(i=0,o=e.children.length;i<o;i++)a=e.children[i],ze(t,s=e.leaf?r(a):a)&&(e.leaf?n.push(a):Fe(t,s)?this._all(a,n):u.push(a));e=u.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!ze(t,e))return!1;for(var r,i,o,a,s=[];e;){for(r=0,i=e.children.length;r<i;r++)if(o=e.children[r],ze(t,a=e.leaf?n(o):o)){if(e.leaf||Fe(t,a))return!0;s.push(o)}e=s.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var i=this.data;this.data=r,r=i}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=je([]),this},remove:function(t,e){if(!t)return this;for(var n,r,i,o,a=this.data,s=this.toBBox(t),u=[],l=[];a||u.length;){if(a||(a=u.pop(),r=u[u.length-1],n=l.pop(),o=!0),a.leaf&&-1!==(i=function(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}(t,a.children,e)))return a.children.splice(i,1),u.push(a),this._condense(u),this;o||a.leaf||!Fe(a,s)?r?(a=r.children[++n],o=!1):a=null:(u.push(a),l.push(n),n=0,r=a,a=a.children[0])}return this},toBBox:function(t){return t},compareMinX:Re,compareMinY:Le,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,r){var i,o=n-e+1,a=this._maxEntries;if(o<=a)return Pe(i=je(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,r-1))),(i=je([])).leaf=!1,i.height=r;var s,u,l,c,h=Math.ceil(o/a),p=h*Math.ceil(Math.sqrt(a));for(Be(t,e,n,p,this.compareMinX),s=e;s<=n;s+=p)for(Be(t,s,l=Math.min(s+p-1,n),h,this.compareMinY),u=s;u<=l;u+=h)c=Math.min(u+h-1,l),i.children.push(this._build(t,u,c,r-1));return Pe(i,this.toBBox),i},_chooseSubtree:function(t,e,n,r){for(var i,o,a,s,u,l,c,h;r.push(e),!e.leaf&&r.length-1!==n;){for(c=h=1/0,i=0,o=e.children.length;i<o;i++)u=Ne(a=e.children[i]),(l=function(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}(t,a)-u)<h?(h=l,c=u<c?u:c,s=a):l===h&&u<c&&(c=u,s=a);e=s||e.children[0]}return e},_insert:function(t,e,n){var r=n?t:(0,this.toBBox)(t),i=[],o=this._chooseSubtree(r,this.data,e,i);for(o.children.push(t),Me(o,r);e>=0&&i[e].children.length>this._maxEntries;)this._split(i,e),e--;this._adjustParentBBoxes(r,i,e)},_split:function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var o=this._chooseSplitIndex(n,i,r),a=je(n.children.splice(o,n.children.length-o));a.height=n.height,a.leaf=n.leaf,Pe(n,this.toBBox),Pe(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(n,a)},_splitRoot:function(t,e){this.data=je([t,e]),this.data.height=t.height+1,this.data.leaf=!1,Pe(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var r,i,o,a,s,u,l,c;for(u=l=1/0,r=e;r<=n-e;r++)a=function(t,e){var n=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),i=Math.min(t.maxX,e.maxX),o=Math.min(t.maxY,e.maxY);return Math.max(0,i-n)*Math.max(0,o-r)}(i=Ae(t,0,r,this.toBBox),o=Ae(t,r,n,this.toBBox)),s=Ne(i)+Ne(o),a<u?(u=a,c=r,l=s<l?s:l):a===u&&s<l&&(l=s,c=r);return c},_chooseSplitAxis:function(t,e,n){var r=t.leaf?this.compareMinX:Re,i=t.leaf?this.compareMinY:Le;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},_allDistMargin:function(t,e,n,r){t.children.sort(r);var i,o,a=this.toBBox,s=Ae(t,0,e,a),u=Ae(t,n-e,n,a),l=De(s)+De(u);for(i=e;i<n-e;i++)o=t.children[i],Me(s,t.leaf?a(o):o),l+=De(s);for(i=n-e-1;i>=e;i--)o=t.children[i],Me(u,t.leaf?a(o):o),l+=De(u);return l},_adjustParentBBoxes:function(t,e,n){for(var r=n;r>=0;r--)Me(e[r],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():Pe(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};var ta=Object.freeze({toMercator:Je,toWgs84:Qe}),ea=6378137,na=function(t,e,n,r,i){this.coord=t,this.param=e,this.ringAndEdgeIn=n,this.ringAndEdgeOut=r,this.nxtIsectAlongEdgeIn=i},ra=function(t,e,n,r,i,o,a){this.coord=t,this.ringAndEdge1=e,this.ringAndEdge2=n,this.nxtIsectAlongRingAndEdge1=r,this.nxtIsectAlongRingAndEdge2=i,this.ringAndEdge1Walkable=o,this.ringAndEdge2Walkable=a};Number.prototype.modulo=function(t){return(this%t+t)%t};var ia=Math.PI/180,oa=180/Math.PI,aa=function(t,e){this.lon=t,this.lat=e,this.x=ia*t,this.y=ia*e};aa.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},aa.prototype.antipode=function(){return new aa(this.lon<0?180+this.lon:-1*(180-this.lon),-1*this.lat)};var sa=function(){this.coords=[],this.length=0};sa.prototype.move_to=function(t){this.length++,this.coords.push(t)};var ua=function(t){this.properties=t||{},this.geometries=[]};ua.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(1===this.geometries.length)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var t=[],e=0;e<this.geometries.length;e++)t.push(this.geometries[e].coords);return{geometry:{type:"MultiLineString",coordinates:t},type:"Feature",properties:this.properties}},ua.prototype.wkt=function(){for(var t="",e="LINESTRING(",n=function(t){e+=t[0]+" "+t[1]+","},r=0;r<this.geometries.length;r++){if(0===this.geometries[r].coords.length)return"LINESTRING(empty)";this.geometries[r].coords.forEach(n),t+=e.substring(0,e.length-1)+")"}return t};var la=function(t,e,n){if(!t||void 0===t.x||void 0===t.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!e||void 0===e.x||void 0===e.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new aa(t.x,t.y),this.end=new aa(e.x,e.y),this.properties=n||{};var r=this.start.x-this.end.x,i=Math.pow(Math.sin((this.start.y-this.end.y)/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(r/2),2);if(this.g=2*Math.asin(Math.sqrt(i)),this.g===Math.PI)throw new Error("it appears "+t.view()+" and "+e.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+t+" and "+e)};la.prototype.interpolate=function(t){var e=Math.sin((1-t)*this.g)/Math.sin(this.g),n=Math.sin(t*this.g)/Math.sin(this.g),r=e*Math.cos(this.start.y)*Math.cos(this.start.x)+n*Math.cos(this.end.y)*Math.cos(this.end.x),i=e*Math.cos(this.start.y)*Math.sin(this.start.x)+n*Math.cos(this.end.y)*Math.sin(this.end.x),o=e*Math.sin(this.start.y)+n*Math.sin(this.end.y),a=oa*Math.atan2(o,Math.sqrt(Math.pow(r,2)+Math.pow(i,2)));return[oa*Math.atan2(i,r),a]},la.prototype.Arc=function(t,e){var n=[];if(!t||t<=2)n.push([this.start.lon,this.start.lat]),n.push([this.end.lon,this.end.lat]);else for(var r=1/(t-1),i=0;i<t;++i){var o=this.interpolate(r*i);n.push(o)}for(var a=!1,s=0,u=e&&e.offset?e.offset:10,l=180-u,c=-180+u,h=360-u,p=1;p<n.length;++p){var f=n[p-1][0],d=n[p][0],m=Math.abs(d-f);m>h&&(d>l&&f<c||f>l&&d<c)?a=!0:m>s&&(s=m)}var g=[];if(a&&s<u){var y=[];g.push(y);for(var v=0;v<n.length;++v){var _=parseFloat(n[v][0]);if(v>0&&Math.abs(_-n[v-1][0])>h){var b=parseFloat(n[v-1][0]),x=parseFloat(n[v-1][1]),w=parseFloat(n[v][0]),E=parseFloat(n[v][1]);if(b>-180&&b<c&&180===w&&v+1<n.length&&n[v-1][0]>-180&&n[v-1][0]<c){y.push([-180,n[v][1]]),y.push([n[++v][0],n[v][1]]);continue}if(b>l&&b<180&&-180===w&&v+1<n.length&&n[v-1][0]>l&&n[v-1][0]<180){y.push([180,n[v][1]]),y.push([n[++v][0],n[v][1]]);continue}if(b<c&&w>l){var C=b;b=w,w=C;var S=x;x=E,E=S}if(b>l&&w<c&&(w+=360),b<=180&&w>=180&&b<w){var I=(180-b)/(w-b),T=I*E+(1-I)*x;y.push([n[v-1][0]>l?180:-180,T]),(y=[]).push([n[v-1][0]>l?-180:180,T]),g.push(y)}else g.push(y=[]);y.push([_,n[v][1]])}else y.push([n[v][0],n[v][1]])}}else{var k=[];g.push(k);for(var O=0;O<n.length;++O)k.push([n[O][0],n[O][1]])}for(var P=new ua(this.properties),A=0;A<g.length;++A){var M=new sa;P.geometries.push(M);for(var R=g[A],L=0;L<R.length;++L)M.move_to(R[L])}return P};var ca=Rn;Rn.polyline=Rn,Rn.polygon=function(t,e){var n,r,i,o,a,s,u;for(r=1;r<=8;r*=2){for(n=[],o=!(Nn(i=t[t.length-1],e)&r),a=0;a<t.length;a++)(u=!(Nn(s=t[a],e)&r))!==o&&n.push(Ln(i,s,r,e)),u&&n.push(s),i=s,o=u;if(!(t=n).length)break}return n};var ha=Array.prototype.slice,pa={successCallback:null,verbose:!1,polygons:!1},fa={},da=64,ma=16,ga=4,ya=1,va=[],_a=[],ba=[],xa=[],wa=[],Ea=[],Ca=[],Sa=[],Ia=[],Ta=[],ka=[],Oa=[],Pa=[],Aa=[],Ma=[],Ra=[],La=[],Na=[],Da=[],Fa=[],za=[],ja=[],Ba=[],Va=[];Ca[85]=Ta[85]=-1,Sa[85]=ka[85]=0,Ia[85]=Oa[85]=1,Da[85]=ja[85]=1,Fa[85]=Ba[85]=0,za[85]=Va[85]=1,va[85]=xa[85]=0,_a[85]=wa[85]=-1,ba[85]=Ma[85]=0,Ra[85]=Pa[85]=0,La[85]=Aa[85]=1,Ea[85]=Na[85]=1,ja[1]=ja[169]=0,Ba[1]=Ba[169]=-1,Va[1]=Va[169]=0,Pa[1]=Pa[169]=-1,Aa[1]=Aa[169]=0,Ma[1]=Ma[169]=0,Ta[4]=Ta[166]=0,ka[4]=ka[166]=-1,Oa[4]=Oa[166]=1,Ra[4]=Ra[166]=1,La[4]=La[166]=0,Na[4]=Na[166]=0,Ca[16]=Ca[154]=0,Sa[16]=Sa[154]=1,Ia[16]=Ia[154]=1,xa[16]=xa[154]=1,wa[16]=wa[154]=0,Ea[16]=Ea[154]=1,Da[64]=Da[106]=0,Fa[64]=Fa[106]=1,za[64]=za[106]=0,va[64]=va[106]=-1,_a[64]=_a[106]=0,ba[64]=ba[106]=1,Da[2]=Da[168]=0,Fa[2]=Fa[168]=-1,za[2]=za[168]=1,ja[2]=ja[168]=0,Ba[2]=Ba[168]=-1,Va[2]=Va[168]=0,Pa[2]=Pa[168]=-1,Aa[2]=Aa[168]=0,Ma[2]=Ma[168]=0,Ra[2]=Ra[168]=-1,La[2]=La[168]=0,Na[2]=Na[168]=1,Ca[8]=Ca[162]=0,Sa[8]=Sa[162]=-1,Ia[8]=Ia[162]=0,Ta[8]=Ta[162]=0,ka[8]=ka[162]=-1,Oa[8]=Oa[162]=1,Pa[8]=Pa[162]=1,Aa[8]=Aa[162]=0,Ma[8]=Ma[162]=1,Ra[8]=Ra[162]=1,La[8]=La[162]=0,Na[8]=Na[162]=0,Ca[32]=Ca[138]=0,Sa[32]=Sa[138]=1,Ia[32]=Ia[138]=1,Ta[32]=Ta[138]=0,ka[32]=ka[138]=1,Oa[32]=Oa[138]=0,va[32]=va[138]=1,_a[32]=_a[138]=0,ba[32]=ba[138]=0,xa[32]=xa[138]=1,wa[32]=wa[138]=0,Ea[32]=Ea[138]=1,ja[128]=ja[42]=0,Ba[128]=Ba[42]=1,Va[128]=Va[42]=1,Da[128]=Da[42]=0,Fa[128]=Fa[42]=1,za[128]=za[42]=0,va[128]=va[42]=-1,_a[128]=_a[42]=0,ba[128]=ba[42]=1,xa[128]=xa[42]=-1,wa[128]=wa[42]=0,Ea[128]=Ea[42]=0,Ta[5]=Ta[165]=-1,ka[5]=ka[165]=0,Oa[5]=Oa[165]=0,ja[5]=ja[165]=1,Ba[5]=Ba[165]=0,Va[5]=Va[165]=0,Ra[20]=Ra[150]=0,La[20]=La[150]=1,Na[20]=Na[150]=1,xa[20]=xa[150]=0,wa[20]=wa[150]=-1,Ea[20]=Ea[150]=1,Ca[80]=Ca[90]=-1,Sa[80]=Sa[90]=0,Ia[80]=Ia[90]=1,Da[80]=Da[90]=1,Fa[80]=Fa[90]=0,za[80]=za[90]=1,Pa[65]=Pa[105]=0,Aa[65]=Aa[105]=1,Ma[65]=Ma[105]=0,va[65]=va[105]=0,_a[65]=_a[105]=-1,ba[65]=ba[105]=0,Ca[160]=Ca[10]=-1,Sa[160]=Sa[10]=0,Ia[160]=Ia[10]=1,Ta[160]=Ta[10]=-1,ka[160]=ka[10]=0,Oa[160]=Oa[10]=0,ja[160]=ja[10]=1,Ba[160]=Ba[10]=0,Va[160]=Va[10]=0,Da[160]=Da[10]=1,Fa[160]=Fa[10]=0,za[160]=za[10]=1,Ra[130]=Ra[40]=0,La[130]=La[40]=1,Na[130]=Na[40]=1,Pa[130]=Pa[40]=0,Aa[130]=Aa[40]=1,Ma[130]=Ma[40]=0,va[130]=va[40]=0,_a[130]=_a[40]=-1,ba[130]=ba[40]=0,xa[130]=xa[40]=0,wa[130]=wa[40]=-1,Ea[130]=Ea[40]=1,Ta[37]=Ta[133]=0,ka[37]=ka[133]=1,Oa[37]=Oa[133]=1,ja[37]=ja[133]=0,Ba[37]=Ba[133]=1,Va[37]=Va[133]=0,va[37]=va[133]=-1,_a[37]=_a[133]=0,ba[37]=ba[133]=0,xa[37]=xa[133]=1,wa[37]=wa[133]=0,Ea[37]=Ea[133]=0,Ra[148]=Ra[22]=-1,La[148]=La[22]=0,Na[148]=Na[22]=0,ja[148]=ja[22]=0,Ba[148]=Ba[22]=-1,Va[148]=Va[22]=1,Da[148]=Da[22]=0,Fa[148]=Fa[22]=1,za[148]=za[22]=1,xa[148]=xa[22]=-1,wa[148]=wa[22]=0,Ea[148]=Ea[22]=1,Ca[82]=Ca[88]=0,Sa[82]=Sa[88]=-1,Ia[82]=Ia[88]=1,Ra[82]=Ra[88]=1,La[82]=La[88]=0,Na[82]=Na[88]=1,Pa[82]=Pa[88]=-1,Aa[82]=Aa[88]=0,Ma[82]=Ma[88]=1,Da[82]=Da[88]=0,Fa[82]=Fa[88]=-1,za[82]=za[88]=0,Ca[73]=Ca[97]=0,Sa[73]=Sa[97]=1,Ia[73]=Ia[97]=0,Ta[73]=Ta[97]=0,ka[73]=ka[97]=-1,Oa[73]=Oa[97]=0,Pa[73]=Pa[97]=1,Aa[73]=Aa[97]=0,Ma[73]=Ma[97]=0,va[73]=va[97]=1,_a[73]=_a[97]=0,ba[73]=ba[97]=1,Ca[145]=Ca[25]=0,Sa[145]=Sa[25]=-1,Ia[145]=Ia[25]=0,Pa[145]=Pa[25]=1,Aa[145]=Aa[25]=0,Ma[145]=Ma[25]=1,ja[145]=ja[25]=0,Ba[145]=Ba[25]=1,Va[145]=Va[25]=1,xa[145]=xa[25]=-1,wa[145]=wa[25]=0,Ea[145]=Ea[25]=0,Ta[70]=Ta[100]=0,ka[70]=ka[100]=1,Oa[70]=Oa[100]=0,Ra[70]=Ra[100]=-1,La[70]=La[100]=0,Na[70]=Na[100]=1,Da[70]=Da[100]=0,Fa[70]=Fa[100]=-1,za[70]=za[100]=1,va[70]=va[100]=1,_a[70]=_a[100]=0,ba[70]=ba[100]=0,Ta[101]=Ta[69]=0,ka[101]=ka[69]=1,Oa[101]=Oa[69]=0,va[101]=va[69]=1,_a[101]=_a[69]=0,ba[101]=ba[69]=0,ja[149]=ja[21]=0,Ba[149]=Ba[21]=1,Va[149]=Va[21]=1,xa[149]=xa[21]=-1,wa[149]=wa[21]=0,Ea[149]=Ea[21]=0,Ra[86]=Ra[84]=-1,La[86]=La[84]=0,Na[86]=Na[84]=1,Da[86]=Da[84]=0,Fa[86]=Fa[84]=-1,za[86]=za[84]=1,Ca[89]=Ca[81]=0,Sa[89]=Sa[81]=-1,Ia[89]=Ia[81]=0,Pa[89]=Pa[81]=1,Aa[89]=Aa[81]=0,Ma[89]=Ma[81]=1,Ca[96]=Ca[74]=0,Sa[96]=Sa[74]=1,Ia[96]=Ia[74]=0,Ta[96]=Ta[74]=-1,ka[96]=ka[74]=0,Oa[96]=Oa[74]=1,Da[96]=Da[74]=1,Fa[96]=Fa[74]=0,za[96]=za[74]=0,va[96]=va[74]=1,_a[96]=_a[74]=0,ba[96]=ba[74]=1,Ca[24]=Ca[146]=0,Sa[24]=Sa[146]=-1,Ia[24]=Ia[146]=1,Ra[24]=Ra[146]=1,La[24]=La[146]=0,Na[24]=Na[146]=1,Pa[24]=Pa[146]=0,Aa[24]=Aa[146]=1,Ma[24]=Ma[146]=1,xa[24]=xa[146]=0,wa[24]=wa[146]=-1,Ea[24]=Ea[146]=0,Ta[6]=Ta[164]=-1,ka[6]=ka[164]=0,Oa[6]=Oa[164]=1,Ra[6]=Ra[164]=-1,La[6]=La[164]=0,Na[6]=Na[164]=0,ja[6]=ja[164]=0,Ba[6]=Ba[164]=-1,Va[6]=Va[164]=1,Da[6]=Da[164]=1,Fa[6]=Fa[164]=0,za[6]=za[164]=0,Pa[129]=Pa[41]=0,Aa[129]=Aa[41]=1,Ma[129]=Ma[41]=1,ja[129]=ja[41]=0,Ba[129]=Ba[41]=1,Va[129]=Va[41]=0,va[129]=va[41]=-1,_a[129]=_a[41]=0,ba[129]=ba[41]=0,xa[129]=xa[41]=0,wa[129]=wa[41]=-1,Ea[129]=Ea[41]=0,Ra[66]=Ra[104]=0,La[66]=La[104]=1,Na[66]=Na[104]=0,Pa[66]=Pa[104]=-1,Aa[66]=Aa[104]=0,Ma[66]=Ma[104]=1,Da[66]=Da[104]=0,Fa[66]=Fa[104]=-1,za[66]=za[104]=0,va[66]=va[104]=0,_a[66]=_a[104]=-1,ba[66]=ba[104]=1,Ca[144]=Ca[26]=-1,Sa[144]=Sa[26]=0,Ia[144]=Ia[26]=0,ja[144]=ja[26]=1,Ba[144]=Ba[26]=0,Va[144]=Va[26]=1,Da[144]=Da[26]=0,Fa[144]=Fa[26]=1,za[144]=za[26]=1,xa[144]=xa[26]=-1,wa[144]=wa[26]=0,Ea[144]=Ea[26]=1,Ta[36]=Ta[134]=0,ka[36]=ka[134]=1,Oa[36]=Oa[134]=1,Ra[36]=Ra[134]=0,La[36]=La[134]=1,Na[36]=Na[134]=0,va[36]=va[134]=0,_a[36]=_a[134]=-1,ba[36]=ba[134]=1,xa[36]=xa[134]=1,wa[36]=wa[134]=0,Ea[36]=Ea[134]=0,Ca[9]=Ca[161]=-1,Sa[9]=Sa[161]=0,Ia[9]=Ia[161]=0,Ta[9]=Ta[161]=0,ka[9]=ka[161]=-1,Oa[9]=Oa[161]=0,Pa[9]=Pa[161]=1,Aa[9]=Aa[161]=0,Ma[9]=Ma[161]=0,ja[9]=ja[161]=1,Ba[9]=Ba[161]=0,Va[9]=Va[161]=1,Ca[136]=0,Sa[136]=1,Ia[136]=1,Ta[136]=0,ka[136]=1,Oa[136]=0,Ra[136]=-1,La[136]=0,Na[136]=1,Pa[136]=-1,Aa[136]=0,Ma[136]=0,ja[136]=0,Ba[136]=-1,Va[136]=0,Da[136]=0,Fa[136]=-1,za[136]=1,va[136]=1,_a[136]=0,ba[136]=0,xa[136]=1,wa[136]=0,Ea[136]=1,Ca[34]=0,Sa[34]=-1,Ia[34]=0,Ta[34]=0,ka[34]=-1,Oa[34]=1,Ra[34]=1,La[34]=0,Na[34]=0,Pa[34]=1,Aa[34]=0,Ma[34]=1,ja[34]=0,Ba[34]=1,Va[34]=1,Da[34]=0,Fa[34]=1,za[34]=0,va[34]=-1,_a[34]=0,ba[34]=1,xa[34]=-1,wa[34]=0,Ea[34]=0,Ca[35]=0,Sa[35]=1,Ia[35]=1,Ta[35]=0,ka[35]=-1,Oa[35]=1,Ra[35]=1,La[35]=0,Na[35]=0,Pa[35]=-1,Aa[35]=0,Ma[35]=0,ja[35]=0,Ba[35]=-1,Va[35]=0,Da[35]=0,Fa[35]=1,za[35]=0,va[35]=-1,_a[35]=0,ba[35]=1,xa[35]=1,wa[35]=0,Ea[35]=1,Ca[153]=0,Sa[153]=1,Ia[153]=1,Pa[153]=-1,Aa[153]=0,Ma[153]=0,ja[153]=0,Ba[153]=-1,Va[153]=0,xa[153]=1,wa[153]=0,Ea[153]=1,Ta[102]=0,ka[102]=-1,Oa[102]=1,Ra[102]=1,La[102]=0,Na[102]=0,Da[102]=0,Fa[102]=1,za[102]=0,va[102]=-1,_a[102]=0,ba[102]=1,Ca[155]=0,Sa[155]=-1,Ia[155]=0,Pa[155]=1,Aa[155]=0,Ma[155]=1,ja[155]=0,Ba[155]=1,Va[155]=1,xa[155]=-1,wa[155]=0,Ea[155]=0,Ta[103]=0,ka[103]=1,Oa[103]=0,Ra[103]=-1,La[103]=0,Na[103]=1,Da[103]=0,Fa[103]=-1,za[103]=1,va[103]=1,_a[103]=0,ba[103]=0,Ca[152]=0,Sa[152]=1,Ia[152]=1,Ra[152]=-1,La[152]=0,Na[152]=1,Pa[152]=-1,Aa[152]=0,Ma[152]=0,ja[152]=0,Ba[152]=-1,Va[152]=0,Da[152]=0,Fa[152]=-1,za[152]=1,xa[152]=1,wa[152]=0,Ea[152]=1,Ca[156]=0,Sa[156]=-1,Ia[156]=1,Ra[156]=1,La[156]=0,Na[156]=1,Pa[156]=-1,Aa[156]=0,Ma[156]=0,ja[156]=0,Ba[156]=-1,Va[156]=0,Da[156]=0,Fa[156]=1,za[156]=1,xa[156]=-1,wa[156]=0,Ea[156]=1,Ca[137]=0,Sa[137]=1,Ia[137]=1,Ta[137]=0,ka[137]=1,Oa[137]=0,Pa[137]=-1,Aa[137]=0,Ma[137]=0,ja[137]=0,Ba[137]=-1,Va[137]=0,va[137]=1,_a[137]=0,ba[137]=0,xa[137]=1,wa[137]=0,Ea[137]=1,Ca[139]=0,Sa[139]=1,Ia[139]=1,Ta[139]=0,ka[139]=-1,Oa[139]=0,Pa[139]=1,Aa[139]=0,Ma[139]=0,ja[139]=0,Ba[139]=1,Va[139]=0,va[139]=-1,_a[139]=0,ba[139]=0,xa[139]=1,wa[139]=0,Ea[139]=1,Ca[98]=0,Sa[98]=-1,Ia[98]=0,Ta[98]=0,ka[98]=-1,Oa[98]=1,Ra[98]=1,La[98]=0,Na[98]=0,Pa[98]=1,Aa[98]=0,Ma[98]=1,Da[98]=0,Fa[98]=1,za[98]=0,va[98]=-1,_a[98]=0,ba[98]=1,Ca[99]=0,Sa[99]=1,Ia[99]=0,Ta[99]=0,ka[99]=-1,Oa[99]=1,Ra[99]=1,La[99]=0,Na[99]=0,Pa[99]=-1,Aa[99]=0,Ma[99]=1,Da[99]=0,Fa[99]=-1,za[99]=0,va[99]=1,_a[99]=0,ba[99]=1,Ta[38]=0,ka[38]=-1,Oa[38]=1,Ra[38]=1,La[38]=0,Na[38]=0,ja[38]=0,Ba[38]=1,Va[38]=1,Da[38]=0,Fa[38]=1,za[38]=0,va[38]=-1,_a[38]=0,ba[38]=1,xa[38]=-1,wa[38]=0,Ea[38]=0,Ta[39]=0,ka[39]=1,Oa[39]=1,Ra[39]=-1,La[39]=0,Na[39]=0,ja[39]=0,Ba[39]=-1,Va[39]=1,Da[39]=0,Fa[39]=1,za[39]=0,va[39]=-1,_a[39]=0,ba[39]=1,xa[39]=1,wa[39]=0,Ea[39]=0;var qa=function(t){return[[t.bottomleft,0],[0,0],[0,t.leftbottom]]},Ua=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0]]},Ga=function(t){return[[t.topright,1],[1,1],[1,t.righttop]]},Xa=function(t){return[[0,t.lefttop],[0,1],[t.topleft,1]]},Ha=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop]]},Ya=function(t){return[[t.bottomright,0],[t.bottomleft,0],[1,t.righttop],[1,t.rightbottom]]},Za=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.topleft,1],[t.topright,1]]},Wa=function(t){return[[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},Ka=[],Ja=[],Qa=[],$a=[],ts=[],es=[],ns=[],rs=[];$a[1]=ts[1]=18,$a[169]=ts[169]=18,Qa[4]=Ja[4]=12,Qa[166]=Ja[166]=12,Ka[16]=rs[16]=4,Ka[154]=rs[154]=4,es[64]=ns[64]=22,es[106]=ns[106]=22,Qa[2]=es[2]=17,$a[2]=ts[2]=18,Qa[168]=es[168]=17,$a[168]=ts[168]=18,Ka[8]=$a[8]=9,Ja[8]=Qa[8]=12,Ka[162]=$a[162]=9,Ja[162]=Qa[162]=12,Ka[32]=rs[32]=4,Ja[32]=ns[32]=1,Ka[138]=rs[138]=4,Ja[138]=ns[138]=1,ts[128]=rs[128]=21,es[128]=ns[128]=22,ts[42]=rs[42]=21,es[42]=ns[42]=22,Ja[5]=ts[5]=14,Ja[165]=ts[165]=14,Qa[20]=rs[20]=6,Qa[150]=rs[150]=6,Ka[80]=es[80]=11,Ka[90]=es[90]=11,$a[65]=ns[65]=3,$a[105]=ns[105]=3,Ka[160]=es[160]=11,Ja[160]=ts[160]=14,Ka[10]=es[10]=11,Ja[10]=ts[10]=14,Qa[130]=rs[130]=6,$a[130]=ns[130]=3,Qa[40]=rs[40]=6,$a[40]=ns[40]=3,Ja[101]=ns[101]=1,Ja[69]=ns[69]=1,ts[149]=rs[149]=21,ts[21]=rs[21]=21,Qa[86]=es[86]=17,Qa[84]=es[84]=17,Ka[89]=$a[89]=9,Ka[81]=$a[81]=9,Ka[96]=ns[96]=0,Ja[96]=es[96]=15,Ka[74]=ns[74]=0,Ja[74]=es[74]=15,Ka[24]=Qa[24]=8,$a[24]=rs[24]=7,Ka[146]=Qa[146]=8,$a[146]=rs[146]=7,Ja[6]=es[6]=15,Qa[6]=ts[6]=16,Ja[164]=es[164]=15,Qa[164]=ts[164]=16,$a[129]=rs[129]=7,ts[129]=ns[129]=20,$a[41]=rs[41]=7,ts[41]=ns[41]=20,Qa[66]=ns[66]=2,$a[66]=es[66]=19,Qa[104]=ns[104]=2,$a[104]=es[104]=19,Ka[144]=ts[144]=10,es[144]=rs[144]=23,Ka[26]=ts[26]=10,es[26]=rs[26]=23,Ja[36]=rs[36]=5,Qa[36]=ns[36]=2,Ja[134]=rs[134]=5,Qa[134]=ns[134]=2,Ka[9]=ts[9]=10,Ja[9]=$a[9]=13,Ka[161]=ts[161]=10,Ja[161]=$a[161]=13,Ja[37]=rs[37]=5,ts[37]=ns[37]=20,Ja[133]=rs[133]=5,ts[133]=ns[133]=20,Qa[148]=ts[148]=16,es[148]=rs[148]=23,Qa[22]=ts[22]=16,es[22]=rs[22]=23,Ka[82]=Qa[82]=8,$a[82]=es[82]=19,Ka[88]=Qa[88]=8,$a[88]=es[88]=19,Ka[73]=ns[73]=0,Ja[73]=$a[73]=13,Ka[97]=ns[97]=0,Ja[97]=$a[97]=13,Ka[145]=$a[145]=9,ts[145]=rs[145]=21,Ka[25]=$a[25]=9,ts[25]=rs[25]=21,Ja[70]=ns[70]=1,Qa[70]=es[70]=17,Ja[100]=ns[100]=1,Qa[100]=es[100]=17,Ka[34]=$a[34]=9,Ja[34]=Qa[34]=12,ts[34]=rs[34]=21,es[34]=ns[34]=22,Ka[136]=rs[136]=4,Ja[136]=ns[136]=1,Qa[136]=es[136]=17,$a[136]=ts[136]=18,Ka[35]=rs[35]=4,Ja[35]=Qa[35]=12,$a[35]=ts[35]=18,es[35]=ns[35]=22,Ka[153]=rs[153]=4,$a[153]=ts[153]=18,Ja[102]=Qa[102]=12,es[102]=ns[102]=22,Ka[155]=$a[155]=9,ts[155]=rs[155]=23,Ja[103]=ns[103]=1,Qa[103]=es[103]=17,Ka[152]=rs[152]=4,Qa[152]=es[152]=17,$a[152]=ts[152]=18,Ka[156]=Qa[156]=8,$a[156]=ts[156]=18,es[156]=rs[156]=23,Ka[137]=rs[137]=4,Ja[137]=ns[137]=1,$a[137]=ts[137]=18,Ka[139]=rs[139]=4,Ja[139]=$a[139]=13,ts[139]=ns[139]=20,Ka[98]=$a[98]=9,Ja[98]=Qa[98]=12,es[98]=ns[98]=22,Ka[99]=ns[99]=0,Ja[99]=Qa[99]=12,$a[99]=es[99]=19,Ja[38]=Qa[38]=12,ts[38]=rs[38]=21,es[38]=ns[38]=22,Ja[39]=rs[39]=5,Qa[39]=ts[39]=16,es[39]=ns[39]=22;var is=[];is[1]=is[169]=qa,is[4]=is[166]=Ua,is[16]=is[154]=Ga,is[64]=is[106]=Xa,is[168]=is[2]=Ha,is[162]=is[8]=Ya,is[138]=is[32]=Za,is[42]=is[128]=Wa,is[5]=is[165]=function(t){return[[0,0],[0,t.leftbottom],[1,t.rightbottom],[1,0]]},is[20]=is[150]=function(t){return[[1,0],[t.bottomright,0],[t.topright,1],[1,1]]},is[80]=is[90]=function(t){return[[1,1],[1,t.righttop],[0,t.lefttop],[0,1]]},is[65]=is[105]=function(t){return[[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},is[160]=is[10]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.leftbottom],[0,t.lefttop]]},is[130]=is[40]=function(t){return[[t.topleft,1],[t.topright,1],[t.bottomright,0],[t.bottomleft,0]]},is[85]=function(){return[[0,0],[0,1],[1,1],[1,0]]},is[101]=is[69]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,1],[t.topleft,1]]},is[149]=is[21]=function(t){return[[t.topright,1],[1,1],[1,0],[0,0],[0,t.leftbottom]]},is[86]=is[84]=function(t){return[[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[1,1]]},is[89]=is[81]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,1]]},is[96]=is[74]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.lefttop],[0,1],[t.topleft,1]]},is[24]=is[146]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[t.topright,1]]},is[6]=is[164]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop]]},is[129]=is[41]=function(t){return[[t.topright,1],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1]]},is[66]=is[104]=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},is[144]=is[26]=function(t){return[[1,1],[1,t.righttop],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},is[36]=is[134]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[t.topleft,1],[t.topright,1]]},is[9]=is[161]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom]]},is[37]=is[133]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},is[148]=is[22]=function(t){return[[1,1],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},is[82]=is[88]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1]]},is[73]=is[97]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},is[145]=is[25]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},is[70]=is[100]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},is[34]=function(t){return[Wa(t),Ya(t)]},is[35]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},is[136]=function(t){return[Za(t),Ha(t)]},is[153]=function(t){return[Ga(t),qa(t)]},is[102]=function(t){return[Ua(t),Xa(t)]},is[155]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},is[103]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},is[152]=function(t){return[Ga(t),Ha(t)]},is[156]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},is[137]=function(t){return[Za(t),qa(t)]},is[139]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},is[98]=function(t){return[Ya(t),Xa(t)]},is[99]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},is[38]=function(t){return[Ua(t),Wa(t)]},is[39]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]};var os=function t(e){this.id=t.buildId(e),this.coordinates=e,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1};os.buildId=function(t){return t.join(",")},os.prototype.removeInnerEdge=function(t){this.innerEdges=this.innerEdges.filter(function(e){return e.from.id!==t.from.id})},os.prototype.removeOuterEdge=function(t){this.outerEdges=this.outerEdges.filter(function(e){return e.to.id!==t.to.id})},os.prototype.addOuterEdge=function(t){this.outerEdges.push(t),this.outerEdgesSorted=!1},os.prototype.sortOuterEdges=function(){var t=this;this.outerEdgesSorted||(this.outerEdges.sort(function(e,n){var r=e.to,i=n.to;if(r.coordinates[0]-t.coordinates[0]>=0&&i.coordinates[0]-t.coordinates[0]<0)return 1;if(r.coordinates[0]-t.coordinates[0]<0&&i.coordinates[0]-t.coordinates[0]>=0)return-1;if(r.coordinates[0]-t.coordinates[0]==0&&i.coordinates[0]-t.coordinates[0]==0)return r.coordinates[1]-t.coordinates[1]>=0||i.coordinates[1]-t.coordinates[1]>=0?r.coordinates[1]-i.coordinates[1]:i.coordinates[1]-r.coordinates[1];var o=ar(t.coordinates,r.coordinates,i.coordinates);return o<0?1:o>0?-1:Math.pow(r.coordinates[0]-t.coordinates[0],2)+Math.pow(r.coordinates[1]-t.coordinates[1],2)-(Math.pow(i.coordinates[0]-t.coordinates[0],2)+Math.pow(i.coordinates[1]-t.coordinates[1],2))}),this.outerEdgesSorted=!0)},os.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},os.prototype.getOuterEdge=function(t){return this.sortOuterEdges(),this.outerEdges[t]},os.prototype.addInnerEdge=function(t){this.innerEdges.push(t)};var as=function(t,e){this.from=t,this.to=e,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)};as.prototype.getSymetric=function(){return this.symetric||(this.symetric=new as(this.to,this.from),this.symetric.symetric=this),this.symetric},as.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},as.prototype.isEqual=function(t){return this.from.id===t.from.id&&this.to.id===t.to.id},as.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},as.prototype.toLineString=function(){return s([this.from.coordinates,this.to.coordinates])},as.prototype.compareTo=function(t){return ar(t.from.coordinates,t.to.coordinates,this.to.coordinates)};var ss=function(){this.edges=[],this.polygon=void 0,this.envelope=void 0},us={length:{configurable:!0}};ss.prototype.push=function(t){this[this.edges.length]=t,this.edges.push(t),this.polygon=this.envelope=void 0},ss.prototype.get=function(t){return this.edges[t]},us.length.get=function(){return this.edges.length},ss.prototype.forEach=function(t){this.edges.forEach(t)},ss.prototype.map=function(t){return this.edges.map(t)},ss.prototype.some=function(t){return this.edges.some(t)},ss.prototype.isValid=function(){return!0},ss.prototype.isHole=function(){var t=this,e=this.edges.reduce(function(e,n,r){return n.from.coordinates[1]>t.edges[e].from.coordinates[1]&&(e=r),e},0),n=(0===e?this.length:e)-1,r=(e+1)%this.length,i=ar(this.edges[n].from.coordinates,this.edges[e].from.coordinates,this.edges[r].from.coordinates);return 0===i?this.edges[n].from.coordinates[0]>this.edges[r].from.coordinates[0]:i>0},ss.prototype.toMultiPoint=function(){return h(this.edges.map(function(t){return t.from.coordinates}))},ss.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var t=this.edges.map(function(t){return t.from.coordinates});return t.push(this.edges[0].from.coordinates),this.polygon=o([t])},ss.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=ne(this.toPolygon())},ss.findEdgeRingContaining=function(t,e){var n,i,o=t.getEnvelope();return e.forEach(function(e){var a=e.getEnvelope();if(i&&(n=i.getEnvelope()),!function(t,e){var n=t.geometry.coordinates.map(function(t){return t[0]}),r=t.geometry.coordinates.map(function(t){return t[1]}),i=e.geometry.coordinates.map(function(t){return t[0]}),o=e.geometry.coordinates.map(function(t){return t[1]});return Math.max(null,n)===Math.max(null,i)&&Math.max(null,r)===Math.max(null,o)&&Math.min(null,n)===Math.min(null,i)&&Math.min(null,r)===Math.min(null,o)}(a,o)&&sr(a,o)){var s=t.map(function(t){return t.from.coordinates}).find(function(t){return!e.some(function(e){return function(t,e){return t[0]===e[0]&&t[1]===e[1]}(t,e.from.coordinates)})});s&&e.inside(r(s))&&(i&&!sr(n,a)||(i=e))}}),i},ss.prototype.inside=function(t){return kt(t,this.toPolygon())},Object.defineProperties(ss.prototype,us);var ls=function(){this.edges=[],this.nodes={}};ls.fromGeoJson=function(t){!function(t){if(!t)throw new Error("No geojson passed");if("FeatureCollection"!==t.type&&"GeometryCollection"!==t.type&&"MultiLineString"!==t.type&&"LineString"!==t.type&&"Feature"!==t.type)throw new Error("Invalid input type '"+t.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")}(t);var e=new ls;return D(t,function(t){Y(t,"LineString","Graph::fromGeoJson"),k(t,function(t,n){if(t){var r=e.getNode(t),i=e.getNode(n);e.addEdge(r,i)}return n})}),e},ls.prototype.getNode=function(t){var e=os.buildId(t),n=this.nodes[e];return n||(n=this.nodes[e]=new os(t)),n},ls.prototype.addEdge=function(t,e){var n=new as(t,e),r=n.getSymetric();this.edges.push(n),this.edges.push(r)},ls.prototype.deleteDangles=function(){var t=this;Object.keys(this.nodes).map(function(e){return t.nodes[e]}).forEach(function(e){return t._removeIfDangle(e)})},ls.prototype._removeIfDangle=function(t){var e=this;if(t.innerEdges.length<=1){var n=t.getOuterEdges().map(function(t){return t.to});this.removeNode(t),n.forEach(function(t){return e._removeIfDangle(t)})}},ls.prototype.deleteCutEdges=function(){var t=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach(function(e){e.label===e.symetric.label&&(t.removeEdge(e.symetric),t.removeEdge(e))})},ls.prototype._computeNextCWEdges=function(t){var e=this;void 0===t?Object.keys(this.nodes).forEach(function(t){return e._computeNextCWEdges(e.nodes[t])}):t.getOuterEdges().forEach(function(e,n){t.getOuterEdge((0===n?t.getOuterEdges().length:n)-1).symetric.next=e})},ls.prototype._computeNextCCWEdges=function(t,e){for(var n,r,i=t.getOuterEdges(),o=i.length-1;o>=0;--o){var a=i[o],s=a.symetric,u=void 0,l=void 0;a.label===e&&(u=a),s.label===e&&(l=s),u&&l&&(l&&(r=l),u&&(r&&(r.next=u,r=void 0),n||(n=u)))}r&&(r.next=n)},ls.prototype._findLabeledEdgeRings=function(){var t=[],e=0;return this.edges.forEach(function(n){if(!(n.label>=0)){t.push(n);var r=n;do{r.label=e,r=r.next}while(!n.isEqual(r));e++}}),t},ls.prototype.getEdgeRings=function(){var t=this;this._computeNextCWEdges(),this.edges.forEach(function(t){t.label=void 0}),this._findLabeledEdgeRings().forEach(function(e){t._findIntersectionNodes(e).forEach(function(n){t._computeNextCCWEdges(n,e.label)})});var e=[];return this.edges.forEach(function(n){n.ring||e.push(t._findEdgeRing(n))}),e},ls.prototype._findIntersectionNodes=function(t){var e=[],n=t,r=function(){var r=0;n.from.getOuterEdges().forEach(function(e){e.label===t.label&&++r}),r>1&&e.push(n.from),n=n.next};do{r()}while(!t.isEqual(n));return e},ls.prototype._findEdgeRing=function(t){var e=t,n=new ss;do{n.push(e),e.ring=n,e=e.next}while(!t.isEqual(e));return n},ls.prototype.removeNode=function(t){var e=this;t.getOuterEdges().forEach(function(t){return e.removeEdge(t)}),t.innerEdges.forEach(function(t){return e.removeEdge(t)}),delete this.nodes[t.id]},ls.prototype.removeEdge=function(t){this.edges=this.edges.filter(function(e){return!e.isEqual(t)}),t.deleteEdge()};var cs=gt(function(t,e){function n(t){var e=[];for(var n in t)e.push(n);return e}(t.exports="function"==typeof Object.keys?Object.keys:n).shim=n}),hs=gt(function(t,e){function n(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function r(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Object.prototype.hasOwnProperty.call(t,"callee")&&!Object.prototype.propertyIsEnumerable.call(t,"callee")||!1}var i="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();(e=t.exports=i?n:r).supported=n,e.unsupported=r}),ps=gt(function(t){function e(t){return null===t||void 0===t}function n(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length||"function"!=typeof t.copy||"function"!=typeof t.slice||t.length>0&&"number"!=typeof t[0])}var r=Array.prototype.slice,i=t.exports=function(t,o,a){return a||(a={}),t===o||(t instanceof Date&&o instanceof Date?t.getTime()===o.getTime():!t||!o||"object"!=typeof t&&"object"!=typeof o?a.strict?t===o:t==o:function(t,o,a){var s,u;if(e(t)||e(o))return!1;if(t.prototype!==o.prototype)return!1;if(hs(t))return!!hs(o)&&(t=r.call(t),o=r.call(o),i(t,o,a));if(n(t)){if(!n(o))return!1;if(t.length!==o.length)return!1;for(s=0;s<t.length;s++)if(t[s]!==o[s])return!1;return!0}try{var l=cs(t),c=cs(o)}catch(t){return!1}if(l.length!=c.length)return!1;for(l.sort(),c.sort(),s=l.length-1;s>=0;s--)if(l[s]!=c[s])return!1;for(s=l.length-1;s>=0;s--)if(!i(t[u=l[s]],o[u],a))return!1;return typeof t==typeof o}(t,o,a))}}),fs=function(t){this.precision=t&&t.precision?t.precision:17,this.direction=!(!t||!t.direction)&&t.direction,this.pseudoNode=!(!t||!t.pseudoNode)&&t.pseudoNode,this.objectComparator=t&&t.objectComparator?t.objectComparator:vr};fs.prototype.compare=function(t,e){if(t.type!==e.type||!yr(t,e))return!1;switch(t.type){case"Point":return this.compareCoord(t.coordinates,e.coordinates);case"LineString":return this.compareLine(t.coordinates,e.coordinates,0,!1);case"Polygon":return this.comparePolygon(t,e);case"Feature":return this.compareFeature(t,e);default:if(0===t.type.indexOf("Multi")){var n=this,r=gr(t),i=gr(e);return r.every(function(t){return this.some(function(e){return n.compare(t,e)})},i)}}return!1},fs.prototype.compareCoord=function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n].toFixed(this.precision)!==e[n].toFixed(this.precision))return!1;return!0},fs.prototype.compareLine=function(t,e,n,r){if(!yr(t,e))return!1;var i=this.pseudoNode?t:this.removePseudo(t),o=this.pseudoNode?e:this.removePseudo(e);if(!r||this.compareCoord(i[0],o[0])||(o=this.fixStartIndex(o,i))){var a=this.compareCoord(i[n],o[n]);return this.direction||a?this.comparePath(i,o):!!this.compareCoord(i[n],o[o.length-(1+n)])&&this.comparePath(i.slice().reverse(),o)}},fs.prototype.fixStartIndex=function(t,e){for(var n,r=-1,i=0;i<t.length;i++)if(this.compareCoord(t[i],e[0])){r=i;break}return r>=0&&(n=[].concat(t.slice(r,t.length),t.slice(1,r+1))),n},fs.prototype.comparePath=function(t,e){var n=this;return t.every(function(t,e){return n.compareCoord(t,this[e])},e)},fs.prototype.comparePolygon=function(t,e){if(this.compareLine(t.coordinates[0],e.coordinates[0],1,!0)){var n=t.coordinates.slice(1,t.coordinates.length),r=e.coordinates.slice(1,e.coordinates.length),i=this;return n.every(function(t){return this.some(function(e){return i.compareLine(t,e,1,!0)})},r)}return!1},fs.prototype.compareFeature=function(t,e){return!(t.id!==e.id||!this.objectComparator(t.properties,e.properties)||!this.compareBBox(t,e))&&this.compare(t.geometry,e.geometry)},fs.prototype.compareBBox=function(t,e){return!!(!t.bbox&&!e.bbox||t.bbox&&e.bbox&&this.compareCoord(t.bbox,e.bbox))},fs.prototype.removePseudo=function(t){return t};var ds=fs,ms=gt(function(t){function e(t,e,n,r){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(t,e,n,r)}e.prototype.run=function(t,e,n,r){this._init(t,e,n,r);for(var i=0;i<this._datasetLength;i++)if(1!==this._visited[i]){this._visited[i]=1;var o=this._regionQuery(i);if(o.length<this.minPts)this.noise.push(i);else{var a=this.clusters.length;this.clusters.push([]),this._addToCluster(i,a),this._expandCluster(a,o)}}return this.clusters},e.prototype._init=function(t,e,n,r){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this.noise=[],this._datasetLength=t.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}e&&(this.epsilon=e),n&&(this.minPts=n),r&&(this.distance=r)},e.prototype._expandCluster=function(t,e){for(var n=0;n<e.length;n++){var r=e[n];if(1!==this._visited[r]){this._visited[r]=1;var i=this._regionQuery(r);i.length>=this.minPts&&(e=this._mergeArrays(e,i))}1!==this._assigned[r]&&this._addToCluster(r,t)}},e.prototype._addToCluster=function(t,e){this.clusters[e].push(t),this._assigned[t]=1},e.prototype._regionQuery=function(t){for(var e=[],n=0;n<this._datasetLength;n++)this.distance(this.dataset[t],this.dataset[n])<this.epsilon&&e.push(n);return e},e.prototype._mergeArrays=function(t,e){for(var n=e.length,r=0;r<n;r++){var i=e[r];t.indexOf(i)<0&&t.push(i)}return t},e.prototype._euclideanDistance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;)n+=(t[r]-e[r])*(t[r]-e[r]);return Math.sqrt(n)},t.exports&&(t.exports=e)}),gs=gt(function(t){function e(t,e,n){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(t,e,n)}e.prototype.init=function(t,e,n){this.assignments=[],this.centroids=[],void 0!==t&&(this.dataset=t),void 0!==e&&(this.k=e),void 0!==n&&(this.distance=n)},e.prototype.run=function(t,e){this.init(t,e);for(var n=this.dataset.length,r=0;r<this.k;r++)this.centroids[r]=this.randomCentroid();for(var i=!0;i;){i=this.assign();for(var o=0;o<this.k;o++){for(var a=new Array(c),s=0,u=0;u<c;u++)a[u]=0;for(var l=0;l<n;l++){var c=this.dataset[l].length;if(o===this.assignments[l]){for(u=0;u<c;u++)a[u]+=this.dataset[l][u];s++}}if(s>0){for(u=0;u<c;u++)a[u]/=s;this.centroids[o]=a}else this.centroids[o]=this.randomCentroid(),i=!0}}return this.getClusters()},e.prototype.randomCentroid=function(){var t,e,n=this.dataset.length-1;do{e=Math.round(Math.random()*n),t=this.dataset[e]}while(this.centroids.indexOf(t)>=0);return t},e.prototype.assign=function(){for(var t,e=!1,n=this.dataset.length,r=0;r<n;r++)(t=this.argmin(this.dataset[r],this.centroids,this.distance))!=this.assignments[r]&&(this.assignments[r]=t,e=!0);return e},e.prototype.getClusters=function(){for(var t,e=new Array(this.k),n=0;n<this.assignments.length;n++)void 0===e[t=this.assignments[n]]&&(e[t]=[]),e[t].push(n);return e},e.prototype.argmin=function(t,e,n){for(var r,i=Number.MAX_VALUE,o=0,a=e.length,s=0;s<a;s++)(r=n(t,e[s]))<i&&(i=r,o=s);return o},e.prototype.distance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;){var i=t[r]-e[r];n+=i*i}return Math.sqrt(n)},t.exports&&(t.exports=e)}),ys=gt(function(t){function e(t,e,n){this._queue=[],this._priorities=[],this._sorting="desc",this._init(t,e,n)}e.prototype.insert=function(t,e){for(var n=this._queue.length,r=n;r--;){var i=this._priorities[r];"desc"===this._sorting?e>i&&(n=r):e<i&&(n=r)}this._insertAt(t,e,n)},e.prototype.remove=function(t){for(var e=this._queue.length;e--;)if(t===this._queue[e]){this._queue.splice(e,1),this._priorities.splice(e,1);break}},e.prototype.forEach=function(t){this._queue.forEach(t)},e.prototype.getElements=function(){return this._queue},e.prototype.getElementPriority=function(t){return this._priorities[t]},e.prototype.getPriorities=function(){return this._priorities},e.prototype.getElementsWithPriorities=function(){for(var t=[],e=0,n=this._queue.length;e<n;e++)t.push([this._queue[e],this._priorities[e]]);return t},e.prototype._init=function(t,e,n){if(t&&e){if(this._queue=[],this._priorities=[],t.length!==e.length)throw new Error("Arrays must have the same length");for(var r=0;r<t.length;r++)this.insert(t[r],e[r])}n&&(this._sorting=n)},e.prototype._insertAt=function(t,e,n){this._queue.length===n?(this._queue.push(t),this._priorities.push(e)):(this._queue.splice(n,0,t),this._priorities.splice(n,0,e))},t.exports&&(t.exports=e)}),vs=gt(function(t){function e(t,e,n,r){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(t,e,n,r)}if(t.exports)var n=ys;e.prototype.run=function(t,e,r,i){this._init(t,e,r,i);for(var o=0,a=this.dataset.length;o<a;o++)if(1!==this._processed[o]){this._processed[o]=1,this.clusters.push([o]);var s=this.clusters.length-1;this._orderedList.push(o);var u=new n(null,null,"asc"),l=this._regionQuery(o);void 0!==this._distanceToCore(o)&&(this._updateQueue(o,l,u),this._expandCluster(s,u))}return this.clusters},e.prototype.getReachabilityPlot=function(){for(var t=[],e=0,n=this._orderedList.length;e<n;e++){var r=this._orderedList[e];t.push([r,this._reachability[r]])}return t},e.prototype._init=function(t,e,n,r){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}e&&(this.epsilon=e),n&&(this.minPts=n),r&&(this.distance=r)},e.prototype._updateQueue=function(t,e,n){var r=this;this._coreDistance=this._distanceToCore(t),e.forEach(function(e){if(void 0===r._processed[e]){var i=r.distance(r.dataset[t],r.dataset[e]),o=Math.max(r._coreDistance,i);void 0===r._reachability[e]?(r._reachability[e]=o,n.insert(e,o)):o<r._reachability[e]&&(r._reachability[e]=o,n.remove(e),n.insert(e,o))}})},e.prototype._expandCluster=function(t,e){for(var n=e.getElements(),r=0,i=n.length;r<i;r++){var o=n[r];if(void 0===this._processed[o]){var a=this._regionQuery(o);this._processed[o]=1,this.clusters[t].push(o),this._orderedList.push(o),void 0!==this._distanceToCore(o)&&(this._updateQueue(o,a,e),this._expandCluster(t,e))}}},e.prototype._distanceToCore=function(t){for(var e=this.epsilon,n=0;n<e;n++)if(this._regionQuery(t,n).length>=this.minPts)return n},e.prototype._regionQuery=function(t,e){e=e||this.epsilon;for(var n=[],r=0,i=this.dataset.length;r<i;r++)this.distance(this.dataset[t],this.dataset[r])<e&&n.push(r);return n},e.prototype._euclideanDistance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;)n+=(t[r]-e[r])*(t[r]-e[r]);return Math.sqrt(n)},t.exports&&(t.exports=e)}),_s=gt(function(t){t.exports&&(t.exports={DBSCAN:ms,KMEANS:gs,OPTICS:vs,PriorityQueue:ys})}),bs=function(t,e,n){for(var r=t.length,i=0,o=0;o<r;o++){var a=(t[o]||0)-(e[o]||0);i+=a*a}return n?Math.sqrt(i):i},xs=bs,ws=function(t,e,n){var r=Math.abs(t-e);return n?r:r*r},Es=bs,Cs={search:function(t,e,n,r){t.cleanDirty();var i=(r=r||{}).heuristic||Cs.heuristics.manhattan,o=r.closest||!1,a=new Sr(function(t){return t.f}),s=e;for(e.h=i(e,n),a.push(e);a.size()>0;){var u=a.pop();if(u===n)return wr(u);u.closed=!0;for(var l=t.neighbors(u),c=0,h=l.length;c<h;++c){var p=l[c];if(!p.closed&&!p.isWall()){var f=u.g+p.getCost(u),d=p.visited;(!d||f<p.g)&&(p.visited=!0,p.parent=u,p.h=p.h||i(p,n),p.g=f,p.f=p.g+p.h,t.markDirty(p),o&&(p.h<s.h||p.h===s.h&&p.g<s.g)&&(s=p),d?a.rescoreElement(p):a.push(p))}}}return o?wr(s):[]},heuristics:{manhattan:function(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},diagonal:function(t,e){var n=Math.sqrt(2),r=Math.abs(e.x-t.x),i=Math.abs(e.y-t.y);return 1*(r+i)+(n-2)*Math.min(r,i)}},cleanNode:function(t){t.f=0,t.g=0,t.h=0,t.visited=!1,t.closed=!1,t.parent=null}};Er.prototype.init=function(){this.dirtyNodes=[];for(var t=0;t<this.nodes.length;t++)Cs.cleanNode(this.nodes[t])},Er.prototype.cleanDirty=function(){for(var t=0;t<this.dirtyNodes.length;t++)Cs.cleanNode(this.dirtyNodes[t]);this.dirtyNodes=[]},Er.prototype.markDirty=function(t){this.dirtyNodes.push(t)},Er.prototype.neighbors=function(t){var e=[],n=t.x,r=t.y,i=this.grid;return i[n-1]&&i[n-1][r]&&e.push(i[n-1][r]),i[n+1]&&i[n+1][r]&&e.push(i[n+1][r]),i[n]&&i[n][r-1]&&e.push(i[n][r-1]),i[n]&&i[n][r+1]&&e.push(i[n][r+1]),this.diagonal&&(i[n-1]&&i[n-1][r-1]&&e.push(i[n-1][r-1]),i[n+1]&&i[n+1][r-1]&&e.push(i[n+1][r-1]),i[n-1]&&i[n-1][r+1]&&e.push(i[n-1][r+1]),i[n+1]&&i[n+1][r+1]&&e.push(i[n+1][r+1])),e},Er.prototype.toString=function(){for(var t,e,n,r,i=[],o=this.grid,a=0,s=o.length;a<s;a++){for(t=[],n=0,r=(e=o[a]).length;n<r;n++)t.push(e[n].weight);i.push(t.join(" "))}return i.join("\n")},Cr.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},Cr.prototype.getCost=function(t){return t&&t.x!==this.x&&t.y!==this.y?1.41421*this.weight:this.weight},Cr.prototype.isWall=function(){return 0===this.weight},Sr.prototype={push:function(t){this.content.push(t),this.sinkDown(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.bubbleUp(0)),t},remove:function(t){var e=this.content.indexOf(t),n=this.content.pop();e!==this.content.length-1&&(this.content[e]=n,this.scoreFunction(n)<this.scoreFunction(t)?this.sinkDown(e):this.bubbleUp(e))},size:function(){return this.content.length},rescoreElement:function(t){this.sinkDown(this.content.indexOf(t))},sinkDown:function(t){for(var e=this.content[t];t>0;){var n=(t+1>>1)-1,r=this.content[n];if(!(this.scoreFunction(e)<this.scoreFunction(r)))break;this.content[n]=e,this.content[t]=r,t=n}},bubbleUp:function(t){for(var e=this.content.length,n=this.content[t],r=this.scoreFunction(n);;){var i,o=t+1<<1,a=o-1,s=null;if(a<e&&(i=this.scoreFunction(this.content[a]))<r&&(s=a),o<e&&this.scoreFunction(this.content[o])<(null===s?r:i)&&(s=o),null===s)break;this.content[t]=this.content[s],this.content[s]=n,t=s}}};var Ss=function(t){return function(){return t}};kr.prototype={constructor:kr,insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=Mr(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(Pr(this,n),n=(t=n).U),n.C=!1,r.C=!0,Ar(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(Ar(this,n),n=(t=n).U),n.C=!1,r.C=!0,Pr(this,r)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,o=t.L,a=t.R;if(n=o?a?Mr(a):o:a,i?i.L===t?i.L=n:i.R=n:this._=n,o&&a?(r=n.C,n.C=t.C,n.L=o,o.U=n,n!==a?(i=n.U,n.U=t.U,i.L=t=n.R,n.R=a,a.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,Pr(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,Ar(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,Pr(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,Ar(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,Pr(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,Ar(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}};var Is,Ts,ks,Os,Ps,As=[],Ms=[],Rs=1e-6,Ls=1e-12;Kr.prototype={constructor:Kr,polygons:function(){var t=this.edges;return this.cells.map(function(e){var n=e.halfedges.map(function(n){return jr(e,t[n])});return n.data=e.site.data,n})},triangles:function(){var t=[],e=this.edges;return this.cells.forEach(function(n,r){if(o=(i=n.halfedges).length)for(var i,o,a,s=n.site,u=-1,l=e[i[o-1]],c=l.left===s?l.right:l.left;++u<o;)a=c,c=(l=e[i[u]]).left===s?l.right:l.left,a&&c&&r<a.index&&r<c.index&&Zr(s,a,c)<0&&t.push([s.data,a.data,c.data])}),t},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(t,e,n){for(var r,i,o=this,a=o._found||0,s=o.cells.length;!(i=o.cells[a]);)if(++a>=s)return null;var u=t-i.site[0],l=e-i.site[1],c=u*u+l*l;do{i=o.cells[r=a],a=null,i.halfedges.forEach(function(n){var r=o.edges[n],s=r.left;if(s!==i.site&&s||(s=r.right)){var u=t-s[0],l=e-s[1],h=u*u+l*l;h<c&&(c=h,a=s.index)}})}while(null!==a);return o._found=r,null==n||c<=n*n?i.site:null}};var Ns=Object.freeze({randomPosition:ri,randomPoint:ii,randomPolygon:oi,randomLineString:ai}),Ds=Object.freeze({getCluster:ui,clusterEach:li,clusterReduce:ci,createBins:hi,applyFilter:pi,propertiesContainsFilter:fi,filterProperties:di});"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(void 0===this||null===this)throw new TypeError(this+" is not an object");var e=Object(this),n=Math.max(Math.min(e.length,9007199254740991),0)||0,r=1 in arguments&&parseInt(Number(arguments[1]),10)||0;r=r<0?Math.max(n+r,0):Math.min(r,n);var i=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:n;for(i=i<0?Math.max(n+arguments[2],0):Math.min(i,n);r<i;)e[r]=t,++r;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};var Fs=function(){};Fs.prototype.interfaces_=function(){return[]},Fs.prototype.getClass=function(){return Fs},Fs.prototype.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n};var zs=function(){},js=function(){},Bs={MAX_VALUE:{configurable:!0}};js.isNaN=function(t){return Number.isNaN(t)},js.doubleToLongBits=function(t){return t},js.longBitsToDouble=function(t){return t},js.isInfinite=function(t){return!Number.isFinite(t)},Bs.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(js,Bs);var Vs=function(){},qs=function(){},Us=function(){},Gs=function t(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=t.NULL_ORDINATE;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.z=e.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=t.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},Xs={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};Gs.prototype.setOrdinate=function(t,e){switch(t){case Gs.X:this.x=e;break;case Gs.Y:this.y=e;break;case Gs.Z:this.z=e;break;default:throw new zs("Invalid ordinate index: "+t)}},Gs.prototype.equals2D=function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!Fs.equalsWithTolerance(this.x,e.x,n)&&!!Fs.equalsWithTolerance(this.y,e.y,n)}},Gs.prototype.getOrdinate=function(t){switch(t){case Gs.X:return this.x;case Gs.Y:return this.y;case Gs.Z:return this.z}throw new zs("Invalid ordinate index: "+t)},Gs.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||js.isNaN(this.z))&&js.isNaN(t.z)},Gs.prototype.equals=function(t){return t instanceof Gs&&this.equals2D(t)},Gs.prototype.equalInZ=function(t,e){return Fs.equalsWithTolerance(this.z,t.z,e)},Gs.prototype.compareTo=function(t){return this.x<t.x?-1:this.x>t.x?1:this.y<t.y?-1:this.y>t.y?1:0},Gs.prototype.clone=function(){},Gs.prototype.copy=function(){return new Gs(this)},Gs.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},Gs.prototype.distance3D=function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return Math.sqrt(e*e+n*n+r*r)},Gs.prototype.distance=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},Gs.prototype.hashCode=function(){var t=17;return 37*(t=37*t+Gs.hashCode(this.x))+Gs.hashCode(this.y)},Gs.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z},Gs.prototype.interfaces_=function(){return[Vs,qs,mi]},Gs.prototype.getClass=function(){return Gs},Gs.hashCode=function(){if(1===arguments.length){var t=js.doubleToLongBits(arguments[0]);return Math.trunc((t^t)>>>32)}},Xs.DimensionalComparator.get=function(){return Hs},Xs.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},Xs.NULL_ORDINATE.get=function(){return js.NaN},Xs.X.get=function(){return 0},Xs.Y.get=function(){return 1},Xs.Z.get=function(){return 2},Object.defineProperties(Gs,Xs);var Hs=function(t){if(this._dimensionsToTest=2,0===arguments.length);else if(1===arguments.length){var e=arguments[0];if(2!==e&&3!==e)throw new zs("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}};Hs.prototype.compare=function(t,e){var n=t,r=e,i=Hs.compare(n.x,r.x);if(0!==i)return i;var o=Hs.compare(n.y,r.y);return 0!==o?o:this._dimensionsToTest<=2?0:Hs.compare(n.z,r.z)},Hs.prototype.interfaces_=function(){return[Us]},Hs.prototype.getClass=function(){return Hs},Hs.compare=function(t,e){return t<e?-1:t>e?1:js.isNaN(t)?js.isNaN(e)?0:-1:js.isNaN(e)?1:0};var Ys=function(){};Ys.prototype.create=function(){},Ys.prototype.interfaces_=function(){return[]},Ys.prototype.getClass=function(){return Ys};var Zs=function(){},Ws={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};Zs.prototype.interfaces_=function(){return[]},Zs.prototype.getClass=function(){return Zs},Zs.toLocationSymbol=function(t){switch(t){case Zs.EXTERIOR:return"e";case Zs.BOUNDARY:return"b";case Zs.INTERIOR:return"i";case Zs.NONE:return"-"}throw new zs("Unknown location value: "+t)},Ws.INTERIOR.get=function(){return 0},Ws.BOUNDARY.get=function(){return 1},Ws.EXTERIOR.get=function(){return 2},Ws.NONE.get=function(){return-1},Object.defineProperties(Zs,Ws);var Ks=function(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1},Js=function(){},Qs={LOG_10:{configurable:!0}};Js.prototype.interfaces_=function(){return[]},Js.prototype.getClass=function(){return Js},Js.log10=function(t){var e=Math.log(t);return js.isInfinite(e)?e:js.isNaN(e)?e:e/Js.LOG_10},Js.min=function(t,e,n,r){var i=t;return e<i&&(i=e),n<i&&(i=n),r<i&&(i=r),i},Js.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var r=arguments[0],i=arguments[1],o=arguments[2];return r<i?i:r>o?o:r}},Js.wrap=function(t,e){return t<0?e- -t%e:t%e},Js.max=function(){if(3===arguments.length){var t=arguments[1],e=arguments[2],n=arguments[0];return t>n&&(n=t),e>n&&(n=e),n}if(4===arguments.length){var r=arguments[1],i=arguments[2],o=arguments[3],a=arguments[0];return r>a&&(a=r),i>a&&(a=i),o>a&&(a=o),a}},Js.average=function(t,e){return(t+e)/2},Qs.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(Js,Qs);var $s=function(t){this.str=t};$s.prototype.append=function(t){this.str+=t},$s.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},$s.prototype.toString=function(t){return this.str};var tu=function(t){this.value=t};tu.prototype.intValue=function(){return this.value},tu.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},tu.isNaN=function(t){return Number.isNaN(t)};var eu=function(){};eu.isWhitespace=function(t){return t<=32&&t>=0||127===t},eu.toUpperCase=function(t){return t.toUpperCase()};var nu=function t(){this._hi=0,this._lo=0,0===arguments.length?this.init(0):1===arguments.length?"number"==typeof arguments[0]?this.init(arguments[0]):arguments[0]instanceof t?this.init(arguments[0]):"string"==typeof arguments[0]&&t.call(this,t.parse(arguments[0])):2===arguments.length&&this.init(arguments[0],arguments[1])},ru={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};nu.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo},nu.prototype.extractSignificantDigits=function(t,e){var n=this.abs(),r=nu.magnitude(n._hi),i=nu.TEN.pow(r);(n=n.divide(i)).gt(nu.TEN)?(n=n.divide(nu.TEN),r+=1):n.lt(nu.ONE)&&(n=n.multiply(nu.TEN),r-=1);for(var o=r+1,a=new $s,s=nu.MAX_PRINT_DIGITS-1,u=0;u<=s;u++){t&&u===o&&a.append(".");var l=Math.trunc(n._hi);if(l<0)break;var c=!1,h=0;l>9?(c=!0,h="9"):h="0"+l,a.append(h),n=n.subtract(nu.valueOf(l)).multiply(nu.TEN),c&&n.selfAdd(nu.TEN);var p=!0,f=nu.magnitude(n._hi);if(f<0&&Math.abs(f)>=s-u&&(p=!1),!p)break}return e[0]=r,a.toString()},nu.prototype.sqr=function(){return this.multiply(this)},nu.prototype.doubleValue=function(){return this._hi+this._lo},nu.prototype.subtract=function(){return arguments[0]instanceof nu?this.add(arguments[0].negate()):"number"==typeof arguments[0]?this.add(-arguments[0]):void 0},nu.prototype.equals=function(){if(1===arguments.length){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}},nu.prototype.isZero=function(){return 0===this._hi&&0===this._lo},nu.prototype.selfSubtract=function(){if(arguments[0]instanceof nu){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},nu.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},nu.prototype.min=function(t){return this.le(t)?this:t},nu.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof nu){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0])return this.selfDivide(arguments[0],0)}else if(2===arguments.length){var e,n,r,i,o=arguments[0],a=null,s=null,u=null,l=null;return this._hi=l=(r=this._hi/o)+(u=(this._hi-(i=r*o)-(l=(a=(u=nu.SPLIT*r)-(a=u-r))*(s=(l=nu.SPLIT*o)-(s=l-o))-i+a*(n=o-s)+(e=r-a)*s+e*n)+this._lo-r*arguments[1])/o),this._lo=r-l+u,this}},nu.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},nu.prototype.divide=function(){if(arguments[0]instanceof nu){var t,e,n,r,i=arguments[0],o=null,a=null,s=null,u=null;return t=(n=this._hi/i._hi)-(o=(s=nu.SPLIT*n)-(o=s-n)),u=o*(a=(u=nu.SPLIT*i._hi)-(a=u-i._hi))-(r=n*i._hi)+o*(e=i._hi-a)+t*a+t*e,new nu(u=n+(s=(this._hi-r-u+this._lo-n*i._lo)/i._hi),n-u+s)}if("number"==typeof arguments[0]){var l=arguments[0];return js.isNaN(l)?nu.createNaN():nu.copy(this).selfDivide(l,0)}},nu.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo},nu.prototype.pow=function(t){if(0===t)return nu.valueOf(1);var e=new nu(this),n=nu.valueOf(1),r=Math.abs(t);if(r>1)for(;r>0;)r%2==1&&n.selfMultiply(e),(r/=2)>0&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n},nu.prototype.ceil=function(){if(this.isNaN())return nu.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new nu(t,e)},nu.prototype.compareTo=function(t){return this._hi<t._hi?-1:this._hi>t._hi?1:this._lo<t._lo?-1:this._lo>t._lo?1:0},nu.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},nu.prototype.setValue=function(){return arguments[0]instanceof nu?(this.init(arguments[0]),this):"number"==typeof arguments[0]?(this.init(arguments[0]),this):void 0},nu.prototype.max=function(t){return this.ge(t)?this:t},nu.prototype.sqrt=function(){if(this.isZero())return nu.valueOf(0);if(this.isNegative())return nu.NaN;var t=1/Math.sqrt(this._hi),e=nu.valueOf(this._hi*t),n=this.subtract(e.sqr())._hi*(.5*t);return e.add(n)},nu.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof nu){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var e,n,r,i,o,a=arguments[0];return this._hi=(e=(r=this._hi+a)+(o=a-(i=r-this._hi)+(this._hi-(r-i))+this._lo))+(n=o+(r-e)),this._lo=n+(e-this._hi),this}}else if(2===arguments.length){var s,u,l,c,h=arguments[0],p=arguments[1],f=null,d=null,m=null;d=(l=this._hi+h)-(m=l-this._hi),f=(u=this._lo+p)-(c=u-this._lo);var g=(s=l+(m=(d=h-m+(this._hi-d))+u))+(m=(f=p-c+(this._lo-f))+(m+(l-s))),y=m+(s-g);return this._hi=g,this._lo=y,this}},nu.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof nu){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0])return this.selfMultiply(arguments[0],0)}else if(2===arguments.length){var e,n,r=arguments[0],i=null,o=null,a=null,s=null;i=(a=nu.SPLIT*this._hi)-this._hi,i=a-i;var u=(a=this._hi*r)+(s=i*(o=(s=nu.SPLIT*r)-(o=s-r))-a+i*(n=r-o)+(e=this._hi-i)*o+e*n+(this._hi*arguments[1]+this._lo*r)),l=s+(i=a-u);return this._hi=u,this._lo=l,this}},nu.prototype.selfSqr=function(){return this.selfMultiply(this)},nu.prototype.floor=function(){if(this.isNaN())return nu.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new nu(t,e)},nu.prototype.negate=function(){return this.isNaN()?this:new nu(-this._hi,-this._lo)},nu.prototype.clone=function(){},nu.prototype.multiply=function(){if(arguments[0]instanceof nu){var t=arguments[0];return t.isNaN()?nu.createNaN():nu.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return js.isNaN(e)?nu.createNaN():nu.copy(this).selfMultiply(e,0)}},nu.prototype.isNaN=function(){return js.isNaN(this._hi)},nu.prototype.intValue=function(){return Math.trunc(this._hi)},nu.prototype.toString=function(){var t=nu.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()},nu.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),r=e[0]+1,i=n;return"."===n.charAt(0)?i="0"+n:r<0?i="0."+nu.stringOfChar("0",-r)+n:-1===n.indexOf(".")&&(i=n+nu.stringOfChar("0",r-n.length)+".0"),this.isNegative()?"-"+i:i},nu.prototype.reciprocal=function(){var t,e,n,r,i=null,o=null,a=null,s=null;t=(n=1/this._hi)-(i=(a=nu.SPLIT*n)-(i=a-n)),o=(s=nu.SPLIT*this._hi)-this._hi;var u=n+(a=(1-(r=n*this._hi)-(s=i*(o=s-o)-r+i*(e=this._hi-o)+t*o+t*e)-n*this._lo)/this._hi);return new nu(u,n-u+a)},nu.prototype.toSciNotation=function(){if(this.isZero())return nu.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),r=nu.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===n.charAt(0))throw new Error("Found leading zero: "+n);var i="";n.length>1&&(i=n.substring(1));var o=n.charAt(0)+"."+i;return this.isNegative()?"-"+o+r:o+r},nu.prototype.abs=function(){return this.isNaN()?nu.NaN:this.isNegative()?this.negate():new nu(this)},nu.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},nu.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo},nu.prototype.add=function(){if(arguments[0]instanceof nu){var t=arguments[0];return nu.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return nu.copy(this).selfAdd(e)}},nu.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0])this._hi=arguments[0],this._lo=0;else if(arguments[0]instanceof nu){var t=arguments[0];this._hi=t._hi,this._lo=t._lo}}else if(2===arguments.length){var e=arguments[1];this._hi=arguments[0],this._lo=e}},nu.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo},nu.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},nu.prototype.trunc=function(){return this.isNaN()?nu.NaN:this.isPositive()?this.floor():this.ceil()},nu.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},nu.prototype.interfaces_=function(){return[mi,Vs,qs]},nu.prototype.getClass=function(){return nu},nu.sqr=function(t){return nu.valueOf(t).selfMultiply(t)},nu.valueOf=function(){return"string"==typeof arguments[0]?nu.parse(arguments[0]):"number"==typeof arguments[0]?new nu(arguments[0]):void 0},nu.sqrt=function(t){return nu.valueOf(t).sqrt()},nu.parse=function(t){for(var e=0,n=t.length;eu.isWhitespace(t.charAt(e));)e++;var r=!1;if(e<n){var i=t.charAt(e);"-"!==i&&"+"!==i||(e++,"-"===i&&(r=!0))}for(var o=new nu,a=0,s=0,u=0;!(e>=n);){var l=t.charAt(e);if(e++,eu.isDigit(l)){var c=l-"0";o.selfMultiply(nu.TEN),o.selfAdd(c),a++}else{if("."!==l){if("e"===l||"E"===l){var h=t.substring(e);try{u=tu.parseInt(h)}catch(e){throw e instanceof Error?new Error("Invalid exponent "+h+" in string "+t):e}break}throw new Error("Unexpected character '"+l+"' at position "+e+" in string "+t)}s=a}}var p=o,f=a-s-u;if(0===f)p=o;else if(f>0){var d=nu.TEN.pow(f);p=o.divide(d)}else if(f<0){var m=nu.TEN.pow(-f);p=o.multiply(m)}return r?p.negate():p},nu.createNaN=function(){return new nu(js.NaN,js.NaN)},nu.copy=function(t){return new nu(t)},nu.magnitude=function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),r=Math.trunc(Math.floor(n));return 10*Math.pow(10,r)<=e&&(r+=1),r},nu.stringOfChar=function(t,e){for(var n=new $s,r=0;r<e;r++)n.append(t);return n.toString()},ru.PI.get=function(){return new nu(3.141592653589793,1.2246467991473532e-16)},ru.TWO_PI.get=function(){return new nu(6.283185307179586,2.4492935982947064e-16)},ru.PI_2.get=function(){return new nu(1.5707963267948966,6.123233995736766e-17)},ru.E.get=function(){return new nu(2.718281828459045,1.4456468917292502e-16)},ru.NaN.get=function(){return new nu(js.NaN,js.NaN)},ru.EPS.get=function(){return 1.23259516440783e-32},ru.SPLIT.get=function(){return 134217729},ru.MAX_PRINT_DIGITS.get=function(){return 32},ru.TEN.get=function(){return nu.valueOf(10)},ru.ONE.get=function(){return nu.valueOf(1)},ru.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},ru.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(nu,ru);var iu=function(){},ou={DP_SAFE_EPSILON:{configurable:!0}};iu.prototype.interfaces_=function(){return[]},iu.prototype.getClass=function(){return iu},iu.orientationIndex=function(t,e,n){var r=iu.orientationIndexFilter(t,e,n);if(r<=1)return r;var i=nu.valueOf(e.x).selfAdd(-t.x),o=nu.valueOf(e.y).selfAdd(-t.y),a=nu.valueOf(n.x).selfAdd(-e.x),s=nu.valueOf(n.y).selfAdd(-e.y);return i.selfMultiply(s).selfSubtract(o.selfMultiply(a)).signum()},iu.signOfDet2x2=function(t,e,n,r){return t.multiply(r).selfSubtract(e.multiply(n)).signum()},iu.intersection=function(t,e,n,r){var i=nu.valueOf(r.y).selfSubtract(n.y).selfMultiply(nu.valueOf(e.x).selfSubtract(t.x)),o=nu.valueOf(r.x).selfSubtract(n.x).selfMultiply(nu.valueOf(e.y).selfSubtract(t.y)),a=i.subtract(o),s=nu.valueOf(r.x).selfSubtract(n.x).selfMultiply(nu.valueOf(t.y).selfSubtract(n.y)),u=nu.valueOf(r.y).selfSubtract(n.y).selfMultiply(nu.valueOf(t.x).selfSubtract(n.x)),l=s.subtract(u).selfDivide(a).doubleValue(),c=nu.valueOf(t.x).selfAdd(nu.valueOf(e.x).selfSubtract(t.x).selfMultiply(l)).doubleValue(),h=nu.valueOf(e.x).selfSubtract(t.x).selfMultiply(nu.valueOf(t.y).selfSubtract(n.y)),p=nu.valueOf(e.y).selfSubtract(t.y).selfMultiply(nu.valueOf(t.x).selfSubtract(n.x)),f=h.subtract(p).selfDivide(a).doubleValue(),d=nu.valueOf(n.y).selfAdd(nu.valueOf(r.y).selfSubtract(n.y).selfMultiply(f)).doubleValue();return new Gs(c,d)},iu.orientationIndexFilter=function(t,e,n){var r=null,i=(t.x-n.x)*(e.y-n.y),o=(t.y-n.y)*(e.x-n.x),a=i-o;if(i>0){if(o<=0)return iu.signum(a);r=i+o}else{if(!(i<0))return iu.signum(a);if(o>=0)return iu.signum(a);r=-i-o}var s=iu.DP_SAFE_EPSILON*r;return a>=s||-a>=s?iu.signum(a):2},iu.signum=function(t){return t>0?1:t<0?-1:0},ou.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(iu,ou);var au=function(){},su={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};su.X.get=function(){return 0},su.Y.get=function(){return 1},su.Z.get=function(){return 2},su.M.get=function(){return 3},au.prototype.setOrdinate=function(t,e,n){},au.prototype.size=function(){},au.prototype.getOrdinate=function(t,e){},au.prototype.getCoordinate=function(){},au.prototype.getCoordinateCopy=function(t){},au.prototype.getDimension=function(){},au.prototype.getX=function(t){},au.prototype.clone=function(){},au.prototype.expandEnvelope=function(t){},au.prototype.copy=function(){},au.prototype.getY=function(t){},au.prototype.toCoordinateArray=function(){},au.prototype.interfaces_=function(){return[qs]},au.prototype.getClass=function(){return au},Object.defineProperties(au,su);var uu=function(){},lu=function(t){function e(){t.call(this,"Projective point not representable on the Cartesian plane.")}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(uu),cu=function(){};cu.arraycopy=function(t,e,n,r,i){for(var o=0,a=e;a<e+i;a++)n[r+o]=t[a],o++},cu.getProperty=function(t){return{"line.separator":"\n"}[t]};var hu=function t(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var n=arguments[1];this.x=arguments[0],this.y=n,this.w=1}else if(arguments[0]instanceof t&&arguments[1]instanceof t){var r=arguments[0],i=arguments[1];this.x=r.y*i.w-i.y*r.w,this.y=i.x*r.w-r.x*i.w,this.w=r.x*i.y-i.x*r.y}else if(arguments[0]instanceof Gs&&arguments[1]instanceof Gs){var o=arguments[0],a=arguments[1];this.x=o.y-a.y,this.y=a.x-o.x,this.w=o.x*a.y-a.x*o.y}}else if(3===arguments.length){var s=arguments[1],u=arguments[2];this.x=arguments[0],this.y=s,this.w=u}else if(4===arguments.length){var l=arguments[0],c=arguments[1],h=arguments[2],p=arguments[3],f=l.y-c.y,d=c.x-l.x,m=l.x*c.y-c.x*l.y,g=h.y-p.y,y=p.x-h.x,v=h.x*p.y-p.x*h.y;this.x=d*v-y*m,this.y=g*m-f*v,this.w=f*y-g*d}};hu.prototype.getY=function(){var t=this.y/this.w;if(js.isNaN(t)||js.isInfinite(t))throw new lu;return t},hu.prototype.getX=function(){var t=this.x/this.w;if(js.isNaN(t)||js.isInfinite(t))throw new lu;return t},hu.prototype.getCoordinate=function(){var t=new Gs;return t.x=this.getX(),t.y=this.getY(),t},hu.prototype.interfaces_=function(){return[]},hu.prototype.getClass=function(){return hu},hu.intersection=function(t,e,n,r){var i=t.y-e.y,o=e.x-t.x,a=t.x*e.y-e.x*t.y,s=n.y-r.y,u=r.x-n.x,l=n.x*r.y-r.x*n.y,c=i*u-s*o,h=(o*l-u*a)/c,p=(s*a-i*l)/c;if(js.isNaN(h)||js.isInfinite(h)||js.isNaN(p)||js.isInfinite(p))throw new lu;return new Gs(h,p)};var pu=function t(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length)if(arguments[0]instanceof Gs){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else arguments[0]instanceof t&&this.init(arguments[0]);else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.init(n.x,r.x,n.y,r.y)}else 4===arguments.length&&this.init(arguments[0],arguments[1],arguments[2],arguments[3])},fu={serialVersionUID:{configurable:!0}};pu.prototype.getArea=function(){return this.getWidth()*this.getHeight()},pu.prototype.equals=function(t){if(!(t instanceof pu))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()},pu.prototype.intersection=function(t){return this.isNull()||t.isNull()||!this.intersects(t)?new pu:new pu(this._minx>t._minx?this._minx:t._minx,this._maxx<t._maxx?this._maxx:t._maxx,this._miny>t._miny?this._miny:t._miny,this._maxy<t._maxy?this._maxy:t._maxy)},pu.prototype.isNull=function(){return this._maxx<this._minx},pu.prototype.getMaxX=function(){return this._maxx},pu.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof Gs){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof pu){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&n>=this._minx&&n<=this._maxx&&r>=this._miny&&r<=this._maxy}},pu.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof pu){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof Gs){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&!(n>this._maxx||n<this._minx||r>this._maxy||r<this._miny)}},pu.prototype.getMinY=function(){return this._miny},pu.prototype.getMinX=function(){return this._minx},pu.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof Gs){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof pu){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=r,this._maxy=r):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),r<this._miny&&(this._miny=r),r>this._maxy&&(this._maxy=r))}},pu.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},pu.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},pu.prototype.compareTo=function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0},pu.prototype.translate=function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},pu.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},pu.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},pu.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},pu.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},pu.prototype.expandBy=function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},pu.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof pu)return this.covers(arguments[0]);if(arguments[0]instanceof Gs)return this.covers(arguments[0])}else if(2===arguments.length)return this.covers(arguments[0],arguments[1])},pu.prototype.centre=function(){return this.isNull()?null:new Gs((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},pu.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof Gs){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof pu){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.init(n.x,r.x,n.y,r.y)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];i<o?(this._minx=i,this._maxx=o):(this._minx=o,this._maxx=i),a<s?(this._miny=a,this._maxy=s):(this._miny=s,this._maxy=a)}},pu.prototype.getMaxY=function(){return this._maxy},pu.prototype.distance=function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)},pu.prototype.hashCode=function(){var t=17;return 37*(t=37*(t=37*(t=37*t+Gs.hashCode(this._minx))+Gs.hashCode(this._maxx))+Gs.hashCode(this._miny))+Gs.hashCode(this._maxy)},pu.prototype.interfaces_=function(){return[Vs,mi]},pu.prototype.getClass=function(){return pu},pu.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],a=arguments[3],s=Math.min(o.x,a.x),u=Math.max(o.x,a.x),l=Math.min(r.x,i.x),c=Math.max(r.x,i.x);return!(l>u||c<s||(s=Math.min(o.y,a.y),u=Math.max(o.y,a.y),l=Math.min(r.y,i.y),c=Math.max(r.y,i.y),l>u||c<s))}},fu.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(pu,fu);var du={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},mu=function(t){this.geometryFactory=t||new zl};mu.prototype.read=function(t){var e,n;t=t.replace(/[\n\r]/g," ");var r=du.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((r=du.emptyTypeStr.exec(t))[2]=void 0),r&&(n=r[1].toLowerCase(),yu[n]&&(e=yu[n].apply(this,[r[2]]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},mu.prototype.write=function(t){return this.extractGeometry(t)},mu.prototype.extractGeometry=function(t){var e=t.getGeometryType().toLowerCase();if(!gu[e])return null;var n=e.toUpperCase();return t.isEmpty()?n+" EMPTY":n+"("+gu[e].apply(this,[t])+")"};var gu={coordinate:function(t){return t.x+" "+t.y},point:function(t){return gu.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+gu.point.apply(this,[t._geometries[n]])+")");return e.join(",")},linestring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(gu.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},linearring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(gu.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},multilinestring:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+gu.linestring.apply(this,[t._geometries[n]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+gu.linestring.apply(this,[t._shell])+")");for(var n=0,r=t._holes.length;n<r;++n)e.push("("+gu.linestring.apply(this,[t._holes[n]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+gu.polygon.apply(this,[t._geometries[n]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push(this.extractGeometry(t._geometries[n]));return e.join(",")}},yu={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(du.spaces);return this.geometryFactory.createPoint(new Gs(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){if(void 0===t)return this.geometryFactory.createMultiPoint();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(du.trimParens,"$1"),r.push(yu.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(r)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(du.spaces),r.push(new Gs(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(r)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(du.spaces),r.push(new Gs(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(r)},multilinestring:function(t){if(void 0===t)return this.geometryFactory.createMultiLineString();for(var e,n=t.trim().split(du.parenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(du.trimParens,"$1"),r.push(yu.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(r)},polygon:function(t){if(void 0===t)return this.geometryFactory.createPolygon();for(var e,n,r,i,o=t.trim().split(du.parenComma),a=[],s=0,u=o.length;s<u;++s)e=o[s].replace(du.trimParens,"$1"),n=yu.linestring.apply(this,[e]),r=this.geometryFactory.createLinearRing(n._points),0===s?i=r:a.push(r);return this.geometryFactory.createPolygon(i,a)},multipolygon:function(t){if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var e,n=t.trim().split(du.doubleParenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(du.trimParens,"$1"),r.push(yu.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(r)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),n=[],r=0,i=e.length;r<i;++r)n.push(this.read(e[r]));return this.geometryFactory.createGeometryCollection(n)}},vu=function(t){this.parser=new mu(t)};vu.prototype.write=function(t){return this.parser.write(t)},vu.toLineString=function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"};var _u=function(t){function e(e){t.call(this,e),this.name="RuntimeException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Error),bu=function(t){function e(){t.call(this),0===arguments.length?t.call(this):1===arguments.length&&t.call(this,arguments[0])}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(_u),xu=function(){};xu.prototype.interfaces_=function(){return[]},xu.prototype.getClass=function(){return xu},xu.shouldNeverReachHere=function(){if(0===arguments.length)xu.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new bu("Should never reach here"+(null!==t?": "+t:""))}},xu.isTrue=function(){var t;if(1===arguments.length)xu.isTrue(arguments[0],null);else if(2===arguments.length&&(t=arguments[1],!arguments[0]))throw null===t?new bu:new bu(t)},xu.equals=function(){var t,e,n;if(2===arguments.length)xu.equals(t=arguments[0],e=arguments[1],null);else if(3===arguments.length&&(n=arguments[2],!(e=arguments[1]).equals(t=arguments[0])))throw new bu("Expected "+t+" but encountered "+e+(null!==n?": "+n:""))};var wu=function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new Gs,this._intPt[1]=new Gs,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},Eu={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};wu.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]},wu.prototype.getTopologySummary=function(){var t=new $s;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},wu.prototype.computeIntersection=function(t,e,n,r){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=r,this._result=this.computeIntersect(t,e,n,r)},wu.prototype.getIntersectionNum=function(){return this._result},wu.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}},wu.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},wu.prototype.setPrecisionModel=function(t){this._precisionModel=t},wu.prototype.isInteriorIntersection=function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var t=arguments[0],e=0;e<this._result;e++)if(!this._intPt[e].equals2D(this._inputLines[t][0])&&!this._intPt[e].equals2D(this._inputLines[t][1]))return!0;return!1}},wu.prototype.getIntersection=function(t){return this._intPt[t]},wu.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},wu.prototype.hasIntersection=function(){return this._result!==wu.NO_INTERSECTION},wu.prototype.getEdgeDistance=function(t,e){return wu.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])},wu.prototype.isCollinear=function(){return this._result===wu.COLLINEAR_INTERSECTION},wu.prototype.toString=function(){return vu.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+vu.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},wu.prototype.getEndpoint=function(t,e){return this._inputLines[t][e]},wu.prototype.isIntersection=function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1},wu.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]},wu.prototype.interfaces_=function(){return[]},wu.prototype.getClass=function(){return wu},wu.computeEdgeDistance=function(t,e,n){var r=Math.abs(n.x-e.x),i=Math.abs(n.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(n))o=r>i?r:i;else{var a=Math.abs(t.x-e.x),s=Math.abs(t.y-e.y);0!==(o=r>i?a:s)||t.equals(e)||(o=Math.max(a,s))}return xu.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o},wu.nonRobustComputeEdgeDistance=function(t,e,n){var r=t.x-e.x,i=t.y-e.y,o=Math.sqrt(r*r+i*i);return xu.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o},Eu.DONT_INTERSECT.get=function(){return 0},Eu.DO_INTERSECT.get=function(){return 1},Eu.COLLINEAR.get=function(){return 2},Eu.NO_INTERSECTION.get=function(){return 0},Eu.POINT_INTERSECTION.get=function(){return 1},Eu.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(wu,Eu);var Cu=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.isInSegmentEnvelopes=function(t){var e=new pu(this._inputLines[0][0],this._inputLines[0][1]),n=new pu(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&n.contains(t)},e.prototype.computeIntersection=function(){if(3!==arguments.length)return t.prototype.computeIntersection.apply(this,arguments);var e=arguments[0],n=arguments[1],r=arguments[2];if(this._isProper=!1,pu.intersects(n,r,e)&&0===Tu.orientationIndex(n,r,e)&&0===Tu.orientationIndex(r,n,e))return this._isProper=!0,(e.equals(n)||e.equals(r))&&(this._isProper=!1),this._result=t.POINT_INTERSECTION,null;this._result=t.NO_INTERSECTION},e.prototype.normalizeToMinimum=function(t,e,n,r,i){i.x=this.smallestInAbsValue(t.x,e.x,n.x,r.x),i.y=this.smallestInAbsValue(t.y,e.y,n.y,r.y),t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.safeHCoordinateIntersection=function(t,n,r,i){var o=null;try{o=hu.intersection(t,n,r,i)}catch(a){if(!(a instanceof lu))throw a;o=e.nearestEndpoint(t,n,r,i)}return o},e.prototype.intersection=function(t,n,r,i){var o=this.intersectionWithNormalization(t,n,r,i);return this.isInSegmentEnvelopes(o)||(o=new Gs(e.nearestEndpoint(t,n,r,i))),null!==this._precisionModel&&this._precisionModel.makePrecise(o),o},e.prototype.smallestInAbsValue=function(t,e,n,r){var i=t,o=Math.abs(i);return Math.abs(e)<o&&(i=e,o=Math.abs(e)),Math.abs(n)<o&&(i=n,o=Math.abs(n)),Math.abs(r)<o&&(i=r),i},e.prototype.checkDD=function(t,e,n,r,i){var o=iu.intersection(t,e,n,r),a=this.isInSegmentEnvelopes(o);cu.out.println("DD in env = "+a+"  --------------------- "+o),i.distance(o)>1e-4&&cu.out.println("Distance = "+i.distance(o))},e.prototype.intersectionWithNormalization=function(t,e,n,r){var i=new Gs(t),o=new Gs(e),a=new Gs(n),s=new Gs(r),u=new Gs;this.normalizeToEnvCentre(i,o,a,s,u);var l=this.safeHCoordinateIntersection(i,o,a,s);return l.x+=u.x,l.y+=u.y,l},e.prototype.computeCollinearIntersection=function(e,n,r,i){var o=pu.intersects(e,n,r),a=pu.intersects(e,n,i),s=pu.intersects(r,i,e),u=pu.intersects(r,i,n);return o&&a?(this._intPt[0]=r,this._intPt[1]=i,t.COLLINEAR_INTERSECTION):s&&u?(this._intPt[0]=e,this._intPt[1]=n,t.COLLINEAR_INTERSECTION):o&&s?(this._intPt[0]=r,this._intPt[1]=e,!r.equals(e)||a||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):o&&u?(this._intPt[0]=r,this._intPt[1]=n,!r.equals(n)||a||s?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):a&&s?(this._intPt[0]=i,this._intPt[1]=e,!i.equals(e)||o||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):a&&u?(this._intPt[0]=i,this._intPt[1]=n,!i.equals(n)||o||s?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):t.NO_INTERSECTION},e.prototype.normalizeToEnvCentre=function(t,e,n,r,i){var o=t.x<e.x?t.x:e.x,a=t.y<e.y?t.y:e.y,s=t.x>e.x?t.x:e.x,u=t.y>e.y?t.y:e.y,l=n.x<r.x?n.x:r.x,c=n.y<r.y?n.y:r.y,h=n.x>r.x?n.x:r.x,p=n.y>r.y?n.y:r.y,f=((a>c?a:c)+(u<p?u:p))/2;i.x=((o>l?o:l)+(s<h?s:h))/2,i.y=f,t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.computeIntersect=function(e,n,r,i){if(this._isProper=!1,!pu.intersects(e,n,r,i))return t.NO_INTERSECTION;var o=Tu.orientationIndex(e,n,r),a=Tu.orientationIndex(e,n,i);if(o>0&&a>0||o<0&&a<0)return t.NO_INTERSECTION;var s=Tu.orientationIndex(r,i,e),u=Tu.orientationIndex(r,i,n);return s>0&&u>0||s<0&&u<0?t.NO_INTERSECTION:0===o&&0===a&&0===s&&0===u?this.computeCollinearIntersection(e,n,r,i):(0===o||0===a||0===s||0===u?(this._isProper=!1,e.equals2D(r)||e.equals2D(i)?this._intPt[0]=e:n.equals2D(r)||n.equals2D(i)?this._intPt[0]=n:0===o?this._intPt[0]=new Gs(r):0===a?this._intPt[0]=new Gs(i):0===s?this._intPt[0]=new Gs(e):0===u&&(this._intPt[0]=new Gs(n))):(this._isProper=!0,this._intPt[0]=this.intersection(e,n,r,i)),t.POINT_INTERSECTION)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.nearestEndpoint=function(t,e,n,r){var i=t,o=Tu.distancePointLine(t,n,r),a=Tu.distancePointLine(e,n,r);return a<o&&(o=a,i=e),(a=Tu.distancePointLine(n,t,e))<o&&(o=a,i=n),(a=Tu.distancePointLine(r,t,e))<o&&(o=a,i=r),i},e}(wu),Su=function(){};Su.prototype.interfaces_=function(){return[]},Su.prototype.getClass=function(){return Su},Su.orientationIndex=function(t,e,n){return Su.signOfDet2x2(e.x-t.x,e.y-t.y,n.x-e.x,n.y-e.y)},Su.signOfDet2x2=function(t,e,n,r){var i=null,o=null,a=null;if(i=1,0===t||0===r)return 0===e||0===n?0:e>0?n>0?-i:i:n>0?i:-i;if(0===e||0===n)return r>0?t>0?i:-i:t>0?-i:i;if(e>0?r>0?e<=r||(i=-i,o=t,t=n,n=o,o=e,e=r,r=o):e<=-r?(i=-i,n=-n,r=-r):(o=t,t=-n,n=o,o=e,e=-r,r=o):r>0?-e<=r?(i=-i,t=-t,e=-e):(o=-t,t=n,n=o,o=-e,e=r,r=o):e>=r?(t=-t,e=-e,n=-n,r=-r):(i=-i,o=-t,t=-n,n=o,o=-e,e=-r,r=o),t>0){if(!(n>0))return i;if(!(t<=n))return i}else{if(n>0)return-i;if(!(t>=n))return-i;i=-i,t=-t,n=-n}for(;;){if(n-=(a=Math.floor(n/t))*t,(r-=a*e)<0)return-i;if(r>e)return i;if(t>n+n){if(e<r+r)return i}else{if(e>r+r)return-i;n=t-n,r=e-r,i=-i}if(0===r)return 0===n?0:-i;if(0===n)return i;if(t-=(a=Math.floor(t/n))*n,(e-=a*r)<0)return i;if(e>r)return-i;if(n>t+t){if(r<e+e)return-i}else{if(r>e+e)return i;t=n-t,e=r-e,i=-i}if(0===e)return 0===t?0:i;if(0===t)return-i}};var Iu=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1,this._p=arguments[0]};Iu.prototype.countSegment=function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,r=e.x;return n>r&&(n=e.x,r=t.x),this._p.x>=n&&this._p.x<=r&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var i=t.y-this._p.y,o=e.y-this._p.y,a=Su.signOfDet2x2(t.x-this._p.x,i,e.x-this._p.x,o);if(0===a)return this._isPointOnSegment=!0,null;o<i&&(a=-a),a>0&&this._crossingCount++}},Iu.prototype.isPointInPolygon=function(){return this.getLocation()!==Zs.EXTERIOR},Iu.prototype.getLocation=function(){return this._isPointOnSegment?Zs.BOUNDARY:this._crossingCount%2==1?Zs.INTERIOR:Zs.EXTERIOR},Iu.prototype.isOnSegment=function(){return this._isPointOnSegment},Iu.prototype.interfaces_=function(){return[]},Iu.prototype.getClass=function(){return Iu},Iu.locatePointInRing=function(){if(arguments[0]instanceof Gs&&Ks(arguments[1],au)){for(var t=arguments[1],e=new Iu(arguments[0]),n=new Gs,r=new Gs,i=1;i<t.size();i++)if(t.getCoordinate(i,n),t.getCoordinate(i-1,r),e.countSegment(n,r),e.isOnSegment())return e.getLocation();return e.getLocation()}if(arguments[0]instanceof Gs&&arguments[1]instanceof Array){for(var o=arguments[1],a=new Iu(arguments[0]),s=1;s<o.length;s++)if(a.countSegment(o[s],o[s-1]),a.isOnSegment())return a.getLocation();return a.getLocation()}};var Tu=function(){},ku={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};Tu.prototype.interfaces_=function(){return[]},Tu.prototype.getClass=function(){return Tu},Tu.orientationIndex=function(t,e,n){return iu.orientationIndex(t,e,n)},Tu.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,r=1;r<t.length-1;r++)e+=(t[r].x-n)*(t[r-1].y-t[r+1].y);return e/2}if(Ks(arguments[0],au)){var i=arguments[0],o=i.size();if(o<3)return 0;var a=new Gs,s=new Gs,u=new Gs;i.getCoordinate(0,s),i.getCoordinate(1,u);var l=s.x;u.x-=l;for(var c=0,h=1;h<o-1;h++)a.y=s.y,s.x=u.x,s.y=u.y,i.getCoordinate(h+1,u),u.x-=l,c+=s.x*(a.y-u.y);return c/2}},Tu.distanceLineLine=function(t,e,n,r){if(t.equals(e))return Tu.distancePointLine(t,n,r);if(n.equals(r))return Tu.distancePointLine(r,t,e);var i=!1;if(pu.intersects(t,e,n,r)){var o=(e.x-t.x)*(r.y-n.y)-(e.y-t.y)*(r.x-n.x);if(0===o)i=!0;else{var a=((t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y))/o,s=((t.y-n.y)*(r.x-n.x)-(t.x-n.x)*(r.y-n.y))/o;(s<0||s>1||a<0||a>1)&&(i=!0)}}else i=!0;return i?Js.min(Tu.distancePointLine(t,n,r),Tu.distancePointLine(e,n,r),Tu.distancePointLine(n,t,e),Tu.distancePointLine(r,t,e)):0},Tu.isPointInRing=function(t,e){return Tu.locatePointInRing(t,e)!==Zs.EXTERIOR},Tu.computeLength=function(t){var e=t.size();if(e<=1)return 0;var n=0,r=new Gs;t.getCoordinate(0,r);for(var i=r.x,o=r.y,a=1;a<e;a++){t.getCoordinate(a,r);var s=r.x,u=r.y,l=s-i,c=u-o;n+=Math.sqrt(l*l+c*c),i=s,o=u}return n},Tu.isCCW=function(t){var e=t.length-1;if(e<3)throw new zs("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],r=0,i=1;i<=e;i++){var o=t[i];o.y>n.y&&(n=o,r=i)}var a=r;do{(a-=1)<0&&(a=e)}while(t[a].equals2D(n)&&a!==r);var s=r;do{s=(s+1)%e}while(t[s].equals2D(n)&&s!==r);var u=t[a],l=t[s];if(u.equals2D(n)||l.equals2D(n)||u.equals2D(l))return!1;var c=Tu.computeOrientation(u,n,l);return 0===c?u.x>l.x:c>0},Tu.locatePointInRing=function(t,e){return Iu.locatePointInRing(t,e)},Tu.distancePointLinePerpendicular=function(t,e,n){var r=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y);return Math.abs(((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/r)*Math.sqrt(r)},Tu.computeOrientation=function(t,e,n){return Tu.orientationIndex(t,e,n)},Tu.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new zs("Line array must contain at least one vertex");for(var n=t.distance(e[0]),r=0;r<e.length-1;r++){var i=Tu.distancePointLine(t,e[r],e[r+1]);i<n&&(n=i)}return n}if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];if(a.x===s.x&&a.y===s.y)return o.distance(a);var u=(s.x-a.x)*(s.x-a.x)+(s.y-a.y)*(s.y-a.y),l=((o.x-a.x)*(s.x-a.x)+(o.y-a.y)*(s.y-a.y))/u;return l<=0?o.distance(a):l>=1?o.distance(s):Math.abs(((a.y-o.y)*(s.x-a.x)-(a.x-o.x)*(s.y-a.y))/u)*Math.sqrt(u)}},Tu.isOnLine=function(t,e){for(var n=new Cu,r=1;r<e.length;r++)if(n.computeIntersection(t,e[r-1],e[r]),n.hasIntersection())return!0;return!1},ku.CLOCKWISE.get=function(){return-1},ku.RIGHT.get=function(){return Tu.CLOCKWISE},ku.COUNTERCLOCKWISE.get=function(){return 1},ku.LEFT.get=function(){return Tu.COUNTERCLOCKWISE},ku.COLLINEAR.get=function(){return 0},ku.STRAIGHT.get=function(){return Tu.COLLINEAR},Object.defineProperties(Tu,ku);var Ou=function(){};Ou.prototype.filter=function(t){},Ou.prototype.interfaces_=function(){return[]},Ou.prototype.getClass=function(){return Ou};var Pu=function(){var t=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()},Au={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};Pu.prototype.isGeometryCollection=function(){return this.getSortIndex()===Pu.SORTINDEX_GEOMETRYCOLLECTION},Pu.prototype.getFactory=function(){return this._factory},Pu.prototype.getGeometryN=function(t){return this},Pu.prototype.getArea=function(){return 0},Pu.prototype.isRectangle=function(){return!1},Pu.prototype.equals=function(){if(arguments[0]instanceof Pu){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];return e instanceof Pu&&this.equalsExact(e)}},Pu.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)},Pu.prototype.geometryChanged=function(){this.apply(Pu.geometryChangedFilter)},Pu.prototype.geometryChangedAction=function(){this._envelope=null},Pu.prototype.equalsNorm=function(t){return null!==t&&this.norm().equalsExact(t.norm())},Pu.prototype.getLength=function(){return 0},Pu.prototype.getNumGeometries=function(){return 1},Pu.prototype.compareTo=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(n,r)}},Pu.prototype.getUserData=function(){return this._userData},Pu.prototype.getSRID=function(){return this._SRID},Pu.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},Pu.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===Pu.SORTINDEX_GEOMETRYCOLLECTION)throw new zs("This method does not support GeometryCollection arguments")},Pu.prototype.equal=function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n},Pu.prototype.norm=function(){var t=this.copy();return t.normalize(),t},Pu.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},Pu.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new pu(this._envelope)},Pu.prototype.setSRID=function(t){this._SRID=t},Pu.prototype.setUserData=function(t){this._userData=t},Pu.prototype.compare=function(t,e){for(var n=t.iterator(),r=e.iterator();n.hasNext()&&r.hasNext();){var i=n.next(),o=r.next(),a=i.compareTo(o);if(0!==a)return a}return n.hasNext()?1:r.hasNext()?-1:0},Pu.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},Pu.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===Pu.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===Pu.SORTINDEX_MULTIPOINT||this.getSortIndex()===Pu.SORTINDEX_MULTILINESTRING||this.getSortIndex()===Pu.SORTINDEX_MULTIPOLYGON},Pu.prototype.interfaces_=function(){return[qs,Vs,mi]},Pu.prototype.getClass=function(){return Pu},Pu.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},Pu.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},Au.serialVersionUID.get=function(){return 0x799ea46522854c00},Au.SORTINDEX_POINT.get=function(){return 0},Au.SORTINDEX_MULTIPOINT.get=function(){return 1},Au.SORTINDEX_LINESTRING.get=function(){return 2},Au.SORTINDEX_LINEARRING.get=function(){return 3},Au.SORTINDEX_MULTILINESTRING.get=function(){return 4},Au.SORTINDEX_POLYGON.get=function(){return 5},Au.SORTINDEX_MULTIPOLYGON.get=function(){return 6},Au.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},Au.geometryChangedFilter.get=function(){return Mu},Object.defineProperties(Pu,Au);var Mu=function(){};Mu.interfaces_=function(){return[Ou]},Mu.filter=function(t){t.geometryChangedAction()};var Ru=function(){};Ru.prototype.filter=function(t){},Ru.prototype.interfaces_=function(){return[]},Ru.prototype.getClass=function(){return Ru};var Lu=function(){},Nu={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};Lu.prototype.isInBoundary=function(t){},Lu.prototype.interfaces_=function(){return[]},Lu.prototype.getClass=function(){return Lu},Nu.Mod2BoundaryNodeRule.get=function(){return Du},Nu.EndPointBoundaryNodeRule.get=function(){return Fu},Nu.MultiValentEndPointBoundaryNodeRule.get=function(){return zu},Nu.MonoValentEndPointBoundaryNodeRule.get=function(){return ju},Nu.MOD2_BOUNDARY_RULE.get=function(){return new Du},Nu.ENDPOINT_BOUNDARY_RULE.get=function(){return new Fu},Nu.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new zu},Nu.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new ju},Nu.OGC_SFS_BOUNDARY_RULE.get=function(){return Lu.MOD2_BOUNDARY_RULE},Object.defineProperties(Lu,Nu);var Du=function(){};Du.prototype.isInBoundary=function(t){return t%2==1},Du.prototype.interfaces_=function(){return[Lu]},Du.prototype.getClass=function(){return Du};var Fu=function(){};Fu.prototype.isInBoundary=function(t){return t>0},Fu.prototype.interfaces_=function(){return[Lu]},Fu.prototype.getClass=function(){return Fu};var zu=function(){};zu.prototype.isInBoundary=function(t){return t>1},zu.prototype.interfaces_=function(){return[Lu]},zu.prototype.getClass=function(){return zu};var ju=function(){};ju.prototype.isInBoundary=function(t){return 1===t},ju.prototype.interfaces_=function(){return[Lu]},ju.prototype.getClass=function(){return ju};var Bu=function(){};Bu.prototype.add=function(){},Bu.prototype.addAll=function(){},Bu.prototype.isEmpty=function(){},Bu.prototype.iterator=function(){},Bu.prototype.size=function(){},Bu.prototype.toArray=function(){},Bu.prototype.remove=function(){};var Vu=function(t){function e(e){t.call(this),this.message=e||""}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={name:{configurable:!0}};return n.name.get=function(){return"IndexOutOfBoundsException"},Object.defineProperties(e,n),e}(Error),qu=function(){};qu.prototype.hasNext=function(){},qu.prototype.next=function(){},qu.prototype.remove=function(){};var Uu=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(){},e.prototype.set=function(){},e.prototype.isEmpty=function(){},e}(Bu);(gi.prototype=new Error).name="NoSuchElementException";var Gu=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof Bu&&this.addAll(arguments[0])}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.ensureCapacity=function(){},e.prototype.interfaces_=function(){return[t,Bu]},e.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(arguments[0],arguments[1]),!0},e.prototype.clear=function(){this.array_=[]},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.set=function(t,e){var n=this.array_[t];return this.array_[t]=e,n},e.prototype.iterator=function(){return new Xu(this)},e.prototype.get=function(t){if(t<0||t>=this.size())throw new Vu;return this.array_[t]},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.size=function(){return this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.remove=function(t){for(var e=!1,n=0,r=this.array_.length;n<r;n++)if(this.array_[n]===t){this.array_.splice(n,1),e=!0;break}return e},e}(Uu),Xu=function(t){function e(e){t.call(this),this.arrayList_=e,this.position_=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new gi;return this.arrayList_.get(this.position_++)},e.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},e.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},e.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},e}(qu),Hu=function(t){function e(){if(t.call(this),0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.ensureCapacity(e.length),this.add(e,!0)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.ensureCapacity(n.length),this.add(n,r)}}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={coordArrayType:{configurable:!0}};return n.coordArrayType.get=function(){return new Array(0).fill(null)},e.prototype.getCoordinate=function(t){return this.get(t)},e.prototype.addAll=function(){if(2===arguments.length){for(var e=arguments[1],n=!1,r=arguments[0].iterator();r.hasNext();)this.add(r.next(),e),n=!0;return n}return t.prototype.addAll.apply(this,arguments)},e.prototype.clone=function(){for(var e=t.prototype.clone.call(this),n=0;n<this.size();n++)e.add(n,this.get(n).copy());return e},e.prototype.toCoordinateArray=function(){return this.toArray(e.coordArrayType)},e.prototype.add=function(){if(1===arguments.length)t.prototype.add.call(this,arguments[0]);else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1])return this.add(arguments[0],arguments[1],!0),!0;if(arguments[0]instanceof Gs&&"boolean"==typeof arguments[1]){var e=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(e))return null;t.prototype.add.call(this,e)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1])return this.add(arguments[0],arguments[1]),!0}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var n=arguments[0],r=arguments[1];if(arguments[2])for(var i=0;i<n.length;i++)this.add(n[i],r);else for(var o=n.length-1;o>=0;o--)this.add(n[o],r);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof Gs){var a=arguments[0],s=arguments[1];if(!arguments[2]){var u=this.size();if(u>0){if(a>0&&this.get(a-1).equals2D(s))return null;if(a<u&&this.get(a).equals2D(s))return null}}t.prototype.add.call(this,a,s)}}else if(4===arguments.length){var l=arguments[0],c=arguments[1],h=arguments[2],p=arguments[3],f=1;h>p&&(f=-1);for(var d=h;d!==p;d+=f)this.add(l[d],c);return!0}},e.prototype.closeRing=function(){this.size()>0&&this.add(new Gs(this.get(0)),!1)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},Object.defineProperties(e,n),e}(Gu),Yu=function(){},Zu={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};Zu.ForwardComparator.get=function(){return Wu},Zu.BidirectionalComparator.get=function(){return Ku},Zu.coordArrayType.get=function(){return new Array(0).fill(null)},Yu.prototype.interfaces_=function(){return[]},Yu.prototype.getClass=function(){return Yu},Yu.isRing=function(t){return!(t.length<4||!t[0].equals2D(t[t.length-1]))},Yu.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(Yu.indexOf(r,e)<0)return r}return null},Yu.scroll=function(t,e){var n=Yu.indexOf(e,t);if(n<0)return null;var r=new Array(t.length).fill(null);cu.arraycopy(t,n,r,0,t.length-n),cu.arraycopy(t,0,r,t.length-n,n),cu.arraycopy(r,0,t,0,t.length)},Yu.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];if(r===i)return!0;if(null===r||null===i)return!1;if(r.length!==i.length)return!1;for(var a=0;a<r.length;a++)if(0!==o.compare(r[a],i[a]))return!1;return!0}},Yu.intersection=function(t,e){for(var n=new Hu,r=0;r<t.length;r++)e.intersects(t[r])&&n.add(t[r],!0);return n.toCoordinateArray()},Yu.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},Yu.removeRepeatedPoints=function(t){return Yu.hasRepeatedPoints(t)?new Hu(t,!1).toCoordinateArray():t},Yu.reverse=function(t){for(var e=t.length-1,n=Math.trunc(e/2),r=0;r<=n;r++){var i=t[r];t[r]=t[e-r],t[e-r]=i}},Yu.removeNull=function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var r=new Array(e).fill(null);if(0===e)return r;for(var i=0,o=0;o<t.length;o++)null!==t[o]&&(r[i++]=t[o]);return r},Yu.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=new Gs(t[n]);return e}if(5===arguments.length)for(var r=arguments[0],i=arguments[1],o=arguments[2],a=arguments[3],s=arguments[4],u=0;u<s;u++)o[a+u]=new Gs(r[i+u])},Yu.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++)if(0!==t[n].compareTo(e[t.length-n-1]))return!1;return!0},Yu.envelope=function(t){for(var e=new pu,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e},Yu.toCoordinateArray=function(t){return t.toArray(Yu.coordArrayType)},Yu.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},Yu.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1},Yu.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t[e].compareTo(t[t.length-1-e]);if(0!==n)return n}return 1},Yu.compare=function(t,e){for(var n=0;n<t.length&&n<e.length;){var r=t[n].compareTo(e[n]);if(0!==r)return r;n++}return n<e.length?-1:n<t.length?1:0},Yu.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(null===e||e.compareTo(t[n])>0)&&(e=t[n]);return e},Yu.extract=function(t,e,n){e=Js.clamp(e,0,t.length);var r=(n=Js.clamp(n,-1,t.length))-e+1;n<0&&(r=0),e>=t.length&&(r=0),n<e&&(r=0);var i=new Array(r).fill(null);if(0===r)return i;for(var o=0,a=e;a<=n;a++)i[o++]=t[a];return i},Object.defineProperties(Yu,Zu);var Wu=function(){};Wu.prototype.compare=function(t,e){return Yu.compare(t,e)},Wu.prototype.interfaces_=function(){return[Us]},Wu.prototype.getClass=function(){return Wu};var Ku=function(){};Ku.prototype.compare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;var i=Yu.compare(n,r);return Yu.isEqualReversed(n,r)?0:i},Ku.prototype.OLDcompare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;for(var i=Yu.increasingDirection(n),o=Yu.increasingDirection(r),a=i>0?0:n.length-1,s=o>0?0:n.length-1,u=0;u<n.length;u++){var l=n[a].compareTo(r[s]);if(0!==l)return l;a+=i,s+=o}return 0},Ku.prototype.interfaces_=function(){return[Us]},Ku.prototype.getClass=function(){return Ku};var Ju=function(){};Ju.prototype.get=function(){},Ju.prototype.put=function(){},Ju.prototype.size=function(){},Ju.prototype.values=function(){},Ju.prototype.entrySet=function(){};var Qu=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Ju);(yi.prototype=new Error).name="OperationNotSupported",(vi.prototype=new Bu).contains=function(){};var $u=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof Bu&&this.addAll(arguments[0])}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(this.array_[e]===t)return!0;return!1},e.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.remove=function(t){throw new Error},e.prototype.size=function(){return this.array_.length},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.iterator=function(){return new tl(this)},e}(vi),tl=function(t){function e(e){t.call(this),this.hashSet_=e,this.position_=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new gi;return this.hashSet_.array_[this.position_++]},e.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},e.prototype.remove=function(){throw new yi},e}(qu),el=0;(Ci.prototype=new Qu).get=function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return e.value;e=e.right}}return null},Ci.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:el,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,r,i=this.root_;do{if(n=i,(r=t.compareTo(i.key))<0)i=i.left;else{if(!(r>0)){var o=i.value;return i.value=e,o}i=i.right}}while(null!==i);var a={key:t,left:null,right:null,value:e,parent:n,color:el,getValue:function(){return this.value},getKey:function(){return this.key}};return r<0?n.left=a:n.right=a,this.fixAfterInsertion(a),this.size_++,null},Ci.prototype.fixAfterInsertion=function(t){for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)if(bi(t)===wi(bi(bi(t)))){var e=Ei(bi(bi(t)));1===_i(e)?(xi(bi(t),el),xi(e,el),xi(bi(bi(t)),1),t=bi(bi(t))):(t===Ei(bi(t))&&(t=bi(t),this.rotateLeft(t)),xi(bi(t),el),xi(bi(bi(t)),1),this.rotateRight(bi(bi(t))))}else{var n=wi(bi(bi(t)));1===_i(n)?(xi(bi(t),el),xi(n,el),xi(bi(bi(t)),1),t=bi(bi(t))):(t===wi(bi(t))&&(t=bi(t),this.rotateRight(t)),xi(bi(t),el),xi(bi(bi(t)),1),this.rotateLeft(bi(bi(t))))}this.root_.color=el},Ci.prototype.values=function(){var t=new Gu,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=Ci.successor(e));)t.add(e.value);return t},Ci.prototype.entrySet=function(){var t=new $u,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=Ci.successor(e));)t.add(e);return t},Ci.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},Ci.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},Ci.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},Ci.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}for(var n=t.parent,r=t;null!==n&&r===n.right;)r=n,n=n.parent;return n},Ci.prototype.size=function(){return this.size_};var nl=function(){};nl.prototype.interfaces_=function(){return[]},nl.prototype.getClass=function(){return nl},Si.prototype=new vi,(Ii.prototype=new Si).contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(0===this.array_[e].compareTo(t))return!0;return!1},Ii.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.array_.length;e<n;e++)if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0;return this.array_.push(t),!0},Ii.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},Ii.prototype.remove=function(t){throw new yi},Ii.prototype.size=function(){return this.array_.length},Ii.prototype.isEmpty=function(){return 0===this.array_.length},Ii.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},Ii.prototype.iterator=function(){return new rl(this)};var rl=function(t){this.treeSet_=t,this.position_=0};rl.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new gi;return this.treeSet_.array_[this.position_++]},rl.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},rl.prototype.remove=function(){throw new yi};var il=function(){};il.sort=function(){var t,e,n,r=arguments[0];if(1===arguments.length)r.sort(function(t,e){return t.compareTo(e)});else if(2===arguments.length)n=arguments[1],r.sort(function(t,e){return n.compare(t,e)});else if(3===arguments.length){(e=r.slice(arguments[1],arguments[2])).sort();var i=r.slice(0,arguments[1]).concat(e,r.slice(arguments[2],r.length));for(r.splice(0,r.length),t=0;t<i.length;t++)r.push(i[t])}else if(4===arguments.length)for(e=r.slice(arguments[1],arguments[2]),n=arguments[3],e.sort(function(t,e){return n.compare(t,e)}),i=r.slice(0,arguments[1]).concat(e,r.slice(arguments[2],r.length)),r.splice(0,r.length),t=0;t<i.length;t++)r.push(i[t])},il.asList=function(t){for(var e=new Gu,n=0,r=t.length;n<r;n++)e.add(t[n]);return e};var ol=function(){},al={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};al.P.get=function(){return 0},al.L.get=function(){return 1},al.A.get=function(){return 2},al.FALSE.get=function(){return-1},al.TRUE.get=function(){return-2},al.DONTCARE.get=function(){return-3},al.SYM_FALSE.get=function(){return"F"},al.SYM_TRUE.get=function(){return"T"},al.SYM_DONTCARE.get=function(){return"*"},al.SYM_P.get=function(){return"0"},al.SYM_L.get=function(){return"1"},al.SYM_A.get=function(){return"2"},ol.prototype.interfaces_=function(){return[]},ol.prototype.getClass=function(){return ol},ol.toDimensionSymbol=function(t){switch(t){case ol.FALSE:return ol.SYM_FALSE;case ol.TRUE:return ol.SYM_TRUE;case ol.DONTCARE:return ol.SYM_DONTCARE;case ol.P:return ol.SYM_P;case ol.L:return ol.SYM_L;case ol.A:return ol.SYM_A}throw new zs("Unknown dimension value: "+t)},ol.toDimensionValue=function(t){switch(eu.toUpperCase(t)){case ol.SYM_FALSE:return ol.FALSE;case ol.SYM_TRUE:return ol.TRUE;case ol.SYM_DONTCARE:return ol.DONTCARE;case ol.SYM_P:return ol.P;case ol.SYM_L:return ol.L;case ol.SYM_A:return ol.A}throw new zs("Unknown dimension symbol: "+t)},Object.defineProperties(ol,al);var sl=function(){};sl.prototype.filter=function(t){},sl.prototype.interfaces_=function(){return[]},sl.prototype.getClass=function(){return sl};var ul=function(){};ul.prototype.filter=function(t,e){},ul.prototype.isDone=function(){},ul.prototype.isGeometryChanged=function(){},ul.prototype.interfaces_=function(){return[]},ul.prototype.getClass=function(){return ul};var ll=function(t){function e(e,n){if(t.call(this,n),this._geometries=e||[],t.hasNullElements(this._geometries))throw new zs("geometries must not contain null elements")}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){for(var t=new pu,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t},e.prototype.getGeometryN=function(t){return this._geometries[t]},e.prototype.getSortIndex=function(){return t.SORTINDEX_GEOMETRYCOLLECTION},e.prototype.getCoordinates=function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this._geometries.length;n++)for(var r=this._geometries[n].getCoordinates(),i=0;i<r.length;i++)t[++e]=r[i];return t},e.prototype.getArea=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e;if(this._geometries.length!==r._geometries.length)return!1;for(var i=0;i<this._geometries.length;i++)if(!this._geometries[i].equalsExact(r._geometries[i],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();il.sort(this._geometries)},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},e.prototype.getBoundaryDimension=function(){for(var t=ol.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t},e.prototype.getDimension=function(){for(var t=ol.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t},e.prototype.getLength=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t},e.prototype.getNumGeometries=function(){return this._geometries.length},e.prototype.reverse=function(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<this._geometries.length;e++)t[e]=this._geometries[e].reverse();return this.getFactory().createGeometryCollection(t)},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=new Ii(il.asList(this._geometries)),n=new Ii(il.asList(t._geometries));return this.compare(e,n)}if(2===arguments.length){for(var r=arguments[1],i=arguments[0],o=this.getNumGeometries(),a=i.getNumGeometries(),s=0;s<o&&s<a;){var u=this.getGeometryN(s),l=i.getGeometryN(s),c=u.compareToSameClass(l,r);if(0!==c)return c;s++}return s<o?1:s<a?-1:0}},e.prototype.apply=function(){if(Ks(arguments[0],Ru))for(var t=arguments[0],e=0;e<this._geometries.length;e++)this._geometries[e].apply(t);else if(Ks(arguments[0],ul)){var n=arguments[0];if(0===this._geometries.length)return null;for(var r=0;r<this._geometries.length&&(this._geometries[r].apply(n),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else if(Ks(arguments[0],sl)){var i=arguments[0];i.filter(this);for(var o=0;o<this._geometries.length;o++)this._geometries[o].apply(i)}else if(Ks(arguments[0],Ou)){var a=arguments[0];a.filter(this);for(var s=0;s<this._geometries.length;s++)this._geometries[s].apply(a)}},e.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),xu.shouldNeverReachHere(),null},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._geometries=new Array(this._geometries.length).fill(null);for(var n=0;n<this._geometries.length;n++)e._geometries[n]=this._geometries[n].clone();return e},e.prototype.getGeometryType=function(){return"GeometryCollection"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.isEmpty=function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(e,n),e}(Pu),cl=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Pu.SORTINDEX_MULTILINESTRING},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?ol.FALSE:0},e.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0},e.prototype.getDimension=function(){return 1},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[t-1-n]=this._geometries[n].reverse();return this.getFactory().createMultiLineString(e)},e.prototype.getBoundary=function(){return new hl(this).getBoundary()},e.prototype.getGeometryType=function(){return"MultiLineString"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[nl]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(e,n),e}(ll),hl=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var t=arguments[0],e=Lu.MOD2_BOUNDARY_RULE;this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._geom=n,this._geomFact=n.getFactory(),this._bnRule=r}};hl.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)},hl.prototype.getBoundary=function(){return this._geom instanceof gl?this.boundaryLineString(this._geom):this._geom instanceof cl?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},hl.prototype.boundaryLineString=function(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},hl.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},hl.prototype.computeBoundaryCoordinates=function(t){var e=new Gu;this._endpointMap=new Ci;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);0!==r.getNumPoints()&&(this.addEndpoint(r.getCoordinateN(0)),this.addEndpoint(r.getCoordinateN(r.getNumPoints()-1)))}for(var i=this._endpointMap.entrySet().iterator();i.hasNext();){var o=i.next(),a=o.getValue().count;this._bnRule.isInBoundary(a)&&e.add(o.getKey())}return Yu.toCoordinateArray(e)},hl.prototype.addEndpoint=function(t){var e=this._endpointMap.get(t);null===e&&(e=new pl,this._endpointMap.put(t,e)),e.count++},hl.prototype.interfaces_=function(){return[]},hl.prototype.getClass=function(){return hl},hl.getBoundary=function(){return 1===arguments.length?new hl(arguments[0]).getBoundary():2===arguments.length?new hl(arguments[0],arguments[1]).getBoundary():void 0};var pl=function(){this.count=null};pl.prototype.interfaces_=function(){return[]},pl.prototype.getClass=function(){return pl};var fl=function(){},dl={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};fl.prototype.interfaces_=function(){return[]},fl.prototype.getClass=function(){return fl},fl.chars=function(t,e){for(var n=new Array(e).fill(null),r=0;r<e;r++)n[r]=t;return String(n)},fl.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new function(){},n=new function(){}(e);return t.printStackTrace(n),e.toString()}if(2===arguments.length){for(var r=arguments[1],i="",o=new function(){}(new function(){}(fl.getStackTrace(arguments[0]))),a=0;a<r;a++)try{i+=o.readLine()+fl.NEWLINE}catch(t){if(!(t instanceof Ti))throw t;xu.shouldNeverReachHere()}return i}},fl.split=function(t,e){for(var n=e.length,r=new Gu,i=""+t,o=i.indexOf(e);o>=0;){var a=i.substring(0,o);r.add(a),o=(i=i.substring(o+n)).indexOf(e)}i.length>0&&r.add(i);for(var s=new Array(r.size()).fill(null),u=0;u<s.length;u++)s[u]=r.get(u);return s},fl.toString=function(){if(1===arguments.length)return fl.SIMPLE_ORDINATE_FORMAT.format(arguments[0])},fl.spaces=function(t){return fl.chars(" ",t)},dl.NEWLINE.get=function(){return cu.getProperty("line.separator")},dl.SIMPLE_ORDINATE_FORMAT.get=function(){return new function(){}("0.#")},Object.defineProperties(fl,dl);var ml=function(){};ml.prototype.interfaces_=function(){return[]},ml.prototype.getClass=function(){return ml},ml.copyCoord=function(t,e,n,r){for(var i=Math.min(t.getDimension(),n.getDimension()),o=0;o<i;o++)n.setOrdinate(r,o,t.getOrdinate(e,o))},ml.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,au.X)===t.getOrdinate(e-1,au.X)&&t.getOrdinate(0,au.Y)===t.getOrdinate(e-1,au.Y)},ml.isEqual=function(t,e){var n=t.size();if(n!==e.size())return!1;for(var r=Math.min(t.getDimension(),e.getDimension()),i=0;i<n;i++)for(var o=0;o<r;o++){var a=t.getOrdinate(i,o),s=e.getOrdinate(i,o);if(!(t.getOrdinate(i,o)===e.getOrdinate(i,o)||js.isNaN(a)&&js.isNaN(s)))return!1}return!0},ml.extend=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();if(ml.copy(e,0,r,0,i),i>0)for(var o=i;o<n;o++)ml.copy(e,i-1,r,o,1);return r},ml.reverse=function(t){for(var e=t.size()-1,n=Math.trunc(e/2),r=0;r<=n;r++)ml.swap(t,r,e-r)},ml.swap=function(t,e,n){if(e===n)return null;for(var r=0;r<t.getDimension();r++){var i=t.getOrdinate(e,r);t.setOrdinate(e,r,t.getOrdinate(n,r)),t.setOrdinate(n,r,i)}},ml.copy=function(t,e,n,r,i){for(var o=0;o<i;o++)ml.copyCoord(t,e+o,n,r+o)},ml.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var n=t.getDimension(),r=new $s;r.append("(");for(var i=0;i<e;i++){i>0&&r.append(" ");for(var o=0;o<n;o++)o>0&&r.append(","),r.append(fl.toString(t.getOrdinate(i,o)))}return r.append(")"),r.toString()}},ml.ensureValidRing=function(t,e){var n=e.size();return 0===n?e:n<=3?ml.createClosedRing(t,e,4):e.getOrdinate(0,au.X)===e.getOrdinate(n-1,au.X)&&e.getOrdinate(0,au.Y)===e.getOrdinate(n-1,au.Y)?e:ml.createClosedRing(t,e,n+1)},ml.createClosedRing=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();ml.copy(e,0,r,0,i);for(var o=i;o<n;o++)ml.copy(e,0,r,o,1);return r};var gl=function(t){function e(e,n){t.call(this,n),this._points=null,this.init(e)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new pu:this._points.expandEnvelope(new pu)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return t.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e;if(this._points.size()!==r._points.size())return!1;for(var i=0;i<this._points.size();i++)if(!this.equal(this._points.getCoordinate(i),r._points.getCoordinate(i),n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<Math.trunc(this._points.size()/2);t++){var e=this._points.size()-1-t;if(!this._points.getCoordinate(t).equals(this._points.getCoordinate(e)))return this._points.getCoordinate(t).compareTo(this._points.getCoordinate(e))>0&&ml.reverse(this._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?ol.FALSE:0},e.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return Tu.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var t=this._points.copy();return ml.reverse(t),this.getFactory().createLineString(t)},e.prototype.compareToSameClass=function(){if(1===arguments.length){for(var t=arguments[0],e=0,n=0;e<this._points.size()&&n<t._points.size();){var r=this._points.getCoordinate(e).compareTo(t._points.getCoordinate(n));if(0!==r)return r;e++,n++}return e<this._points.size()?1:n<t._points.size()?-1:0}if(2===arguments.length)return arguments[1].compare(this._points,arguments[0]._points)},e.prototype.apply=function(){if(Ks(arguments[0],Ru))for(var t=arguments[0],e=0;e<this._points.size();e++)t.filter(this._points.getCoordinate(e));else if(Ks(arguments[0],ul)){var n=arguments[0];if(0===this._points.size())return null;for(var r=0;r<this._points.size()&&(n.filter(this._points,r),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else Ks(arguments[0],sl)?arguments[0].filter(this):Ks(arguments[0],Ou)&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return new hl(this).getBoundary()},e.prototype.isEquivalentClass=function(t){return t instanceof e},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._points=this._points.clone(),e},e.prototype.getCoordinateN=function(t){return this._points.getCoordinate(t)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return 0===this._points.size()},e.prototype.init=function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new zs("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t},e.prototype.isCoordinate=function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))},e.prototype.interfaces_=function(){return[nl]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,n),e}(Pu),yl=function(){};yl.prototype.interfaces_=function(){return[]},yl.prototype.getClass=function(){return yl};var vl=function(t){function e(e,n){t.call(this,n),this._coordinates=e||null,this.init(this._coordinates)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new pu;var t=new pu;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t},e.prototype.getSortIndex=function(){return t.SORTINDEX_POINT},e.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&(!(!this.isEmpty()||!e.isEmpty())||this.isEmpty()===e.isEmpty()&&this.equal(e.getCoordinate(),this.getCoordinate(),n))}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){},e.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},e.prototype.getBoundaryDimension=function(){return ol.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getNumPoints=function(){return this.isEmpty()?0:1},e.prototype.reverse=function(){return this.copy()},e.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length)return arguments[1].compare(this._coordinates,arguments[0]._coordinates)},e.prototype.apply=function(){if(Ks(arguments[0],Ru)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(Ks(arguments[0],ul)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else Ks(arguments[0],sl)?arguments[0].filter(this):Ks(arguments[0],Ou)&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._coordinates=this._coordinates.clone(),e},e.prototype.getGeometryType=function(){return"Point"},e.prototype.copy=function(){return new e(this._coordinates.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._coordinates},e.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},e.prototype.isEmpty=function(){return 0===this._coordinates.size()},e.prototype.init=function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),xu.isTrue(t.size()<=1),this._coordinates=t},e.prototype.isSimple=function(){return!0},e.prototype.interfaces_=function(){return[yl]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(e,n),e}(Pu),_l=function(){};_l.prototype.interfaces_=function(){return[]},_l.prototype.getClass=function(){return _l};var bl=function(t){function e(e,n,r){if(t.call(this,r),this._shell=null,this._holes=null,null===e&&(e=this.getFactory().createLinearRing()),null===n&&(n=[]),t.hasNullElements(n))throw new zs("holes must not contain null elements");if(e.isEmpty()&&t.hasNonEmptyElements(n))throw new zs("shell is empty but holes are not");this._shell=e,this._holes=n}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},e.prototype.getSortIndex=function(){return t.SORTINDEX_POLYGON},e.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this._shell.getCoordinates(),r=0;r<n.length;r++)t[++e]=n[r];for(var i=0;i<this._holes.length;i++)for(var o=this._holes[i].getCoordinates(),a=0;a<o.length;a++)t[++e]=o[a];return t},e.prototype.getArea=function(){var t=0;t+=Math.abs(Tu.signedArea(this._shell.getCoordinateSequence()));for(var e=0;e<this._holes.length;e++)t-=Math.abs(Tu.signedArea(this._holes[e].getCoordinateSequence()));return t},e.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;n<5;n++){var r=t.getX(n);if(r!==e.getMinX()&&r!==e.getMaxX())return!1;var i=t.getY(n);if(i!==e.getMinY()&&i!==e.getMaxY())return!1}for(var o=t.getX(0),a=t.getY(0),s=1;s<=4;s++){var u=t.getX(s),l=t.getY(s);if(u!==o==(l!==a))return!1;o=u,a=l}return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e;if(!this._shell.equalsExact(r._shell,n))return!1;if(this._holes.length!==r._holes.length)return!1;for(var i=0;i<this._holes.length;i++)if(!this._holes[i].equalsExact(r._holes[i],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){if(0===arguments.length){this.normalize(this._shell,!0);for(var t=0;t<this._holes.length;t++)this.normalize(this._holes[t],!1);il.sort(this._holes)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(e.isEmpty())return null;var r=new Array(e.getCoordinates().length-1).fill(null);cu.arraycopy(e.getCoordinates(),0,r,0,r.length);var i=Yu.minCoordinate(e.getCoordinates());Yu.scroll(r,i),cu.arraycopy(r,0,e.getCoordinates(),0,r.length),e.getCoordinates()[r.length]=r[0],Tu.isCCW(e.getCoordinates())===n&&Yu.reverse(e.getCoordinates())}},e.prototype.getCoordinate=function(){return this._shell.getCoordinate()},e.prototype.getNumInteriorRing=function(){return this._holes.length},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.getLength=function(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t},e.prototype.reverse=function(){var t=this.copy();t._shell=this._shell.copy().reverse(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].copy().reverse();return t},e.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},e.prototype.compareToSameClass=function(){if(1===arguments.length)return this._shell.compareToSameClass(arguments[0]._shell);if(2===arguments.length){var t=arguments[1],e=arguments[0],n=this._shell.compareToSameClass(e._shell,t);if(0!==n)return n;for(var r=this.getNumInteriorRing(),i=e.getNumInteriorRing(),o=0;o<r&&o<i;){var a=this.getInteriorRingN(o),s=e.getInteriorRingN(o),u=a.compareToSameClass(s,t);if(0!==u)return u;o++}return o<r?1:o<i?-1:0}},e.prototype.apply=function(t){if(Ks(t,Ru)){this._shell.apply(t);for(var e=0;e<this._holes.length;e++)this._holes[e].apply(t)}else if(Ks(t,ul)){if(this._shell.apply(t),!t.isDone())for(var n=0;n<this._holes.length&&(this._holes[n].apply(t),!t.isDone());n++);t.isGeometryChanged()&&this.geometryChanged()}else if(Ks(t,sl))t.filter(this);else if(Ks(t,Ou)){t.filter(this),this._shell.apply(t);for(var r=0;r<this._holes.length;r++)this._holes[r].apply(t)}},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._shell=this._shell.clone(),e._holes=new Array(this._holes.length).fill(null);for(var n=0;n<this._holes.length;n++)e._holes[n]=this._holes[n].clone();return e},e.prototype.getGeometryType=function(){return"Polygon"},e.prototype.copy=function(){for(var t=this._shell.copy(),n=new Array(this._holes.length).fill(null),r=0;r<n.length;r++)n[r]=this._holes[r].copy();return new e(t,n,this._factory)},e.prototype.getExteriorRing=function(){return this._shell},e.prototype.isEmpty=function(){return this._shell.isEmpty()},e.prototype.getInteriorRingN=function(t){return this._holes[t]},e.prototype.interfaces_=function(){return[_l]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(e,n),e}(Pu),xl=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Pu.SORTINDEX_MULTIPOINT},e.prototype.isValid=function(){return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getCoordinate=function(){return 1===arguments.length?this._geometries[arguments[0]].getCoordinate():t.prototype.getCoordinate.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return ol.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.getGeometryType=function(){return"MultiPoint"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[yl]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(e,n),e}(ll),wl=function(t){function e(e,n){e instanceof Gs&&n instanceof zl&&(e=n.getCoordinateSequenceFactory().create(e)),t.call(this,e,n),this.validateConstruction()}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Pu.SORTINDEX_LINEARRING},e.prototype.getBoundaryDimension=function(){return ol.FALSE},e.prototype.isClosed=function(){return!!this.isEmpty()||t.prototype.isClosed.call(this)},e.prototype.reverse=function(){var t=this._points.copy();return ml.reverse(t),this.getFactory().createLinearRing(t)},e.prototype.validateConstruction=function(){if(!this.isEmpty()&&!t.prototype.isClosed.call(this))throw new zs("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<e.MINIMUM_VALID_SIZE)throw new zs("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},e.prototype.getGeometryType=function(){return"LinearRing"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.MINIMUM_VALID_SIZE.get=function(){return 4},n.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(e,n),e}(gl),El=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Pu.SORTINDEX_MULTIPOLYGON},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.reverse=function(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<this._geometries.length;e++)t[e]=this._geometries[e].reverse();return this.getFactory().createMultiPolygon(t)},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new Gu,e=0;e<this._geometries.length;e++)for(var n=this._geometries[e].getBoundary(),r=0;r<n.getNumGeometries();r++)t.add(n.getGeometryN(r));var i=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(i))},e.prototype.getGeometryType=function(){return"MultiPolygon"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[_l]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(e,n),e}(ll),Cl=function(t){this._factory=t||null,this._isUserDataCopied=!1},Sl={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};Cl.prototype.setCopyUserData=function(t){this._isUserDataCopied=t},Cl.prototype.edit=function(t,e){if(null===t)return null;var n=this.editInternal(t,e);return this._isUserDataCopied&&n.setUserData(t.getUserData()),n},Cl.prototype.editInternal=function(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof ll?this.editGeometryCollection(t,e):t instanceof bl?this.editPolygon(t,e):t instanceof vl?e.edit(t,this._factory):t instanceof gl?e.edit(t,this._factory):(xu.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},Cl.prototype.editGeometryCollection=function(t,e){for(var n=e.edit(t,this._factory),r=new Gu,i=0;i<n.getNumGeometries();i++){var o=this.edit(n.getGeometryN(i),e);null===o||o.isEmpty()||r.add(o)}return n.getClass()===xl?this._factory.createMultiPoint(r.toArray([])):n.getClass()===cl?this._factory.createMultiLineString(r.toArray([])):n.getClass()===El?this._factory.createMultiPolygon(r.toArray([])):this._factory.createGeometryCollection(r.toArray([]))},Cl.prototype.editPolygon=function(t,e){var n=e.edit(t,this._factory);if(null===n&&(n=this._factory.createPolygon(null)),n.isEmpty())return n;var r=this.edit(n.getExteriorRing(),e);if(null===r||r.isEmpty())return this._factory.createPolygon();for(var i=new Gu,o=0;o<n.getNumInteriorRing();o++){var a=this.edit(n.getInteriorRingN(o),e);null===a||a.isEmpty()||i.add(a)}return this._factory.createPolygon(r,i.toArray([]))},Cl.prototype.interfaces_=function(){return[]},Cl.prototype.getClass=function(){return Cl},Cl.GeometryEditorOperation=function(){},Sl.NoOpGeometryOperation.get=function(){return Il},Sl.CoordinateOperation.get=function(){return Tl},Sl.CoordinateSequenceOperation.get=function(){return kl},Object.defineProperties(Cl,Sl);var Il=function(){};Il.prototype.edit=function(t,e){return t},Il.prototype.interfaces_=function(){return[Cl.GeometryEditorOperation]},Il.prototype.getClass=function(){return Il};var Tl=function(){};Tl.prototype.edit=function(t,e){var n=this.editCoordinates(t.getCoordinates(),t);return null===n?t:t instanceof wl?e.createLinearRing(n):t instanceof gl?e.createLineString(n):t instanceof vl?n.length>0?e.createPoint(n[0]):e.createPoint():t},Tl.prototype.interfaces_=function(){return[Cl.GeometryEditorOperation]},Tl.prototype.getClass=function(){return Tl};var kl=function(){};kl.prototype.edit=function(t,e){return t instanceof wl?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof gl?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof vl?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},kl.prototype.interfaces_=function(){return[Cl.GeometryEditorOperation]},kl.prototype.getClass=function(){return kl};var Ol=function(){if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var t=arguments[0];this._coordinates=new Array(t).fill(null);for(var e=0;e<t;e++)this._coordinates[e]=new Gs}else if(Ks(arguments[0],au)){var n=arguments[0];if(null===n)return this._coordinates=new Array(0).fill(null),null;this._dimension=n.getDimension(),this._coordinates=new Array(n.size()).fill(null);for(var r=0;r<this._coordinates.length;r++)this._coordinates[r]=n.getCoordinateCopy(r)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var i=arguments[0],o=arguments[1];this._coordinates=i,this._dimension=o,null===i&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var a=arguments[0],s=arguments[1];this._coordinates=new Array(a).fill(null),this._dimension=s;for(var u=0;u<a;u++)this._coordinates[u]=new Gs}},Pl={serialVersionUID:{configurable:!0}};Ol.prototype.setOrdinate=function(t,e,n){switch(e){case au.X:this._coordinates[t].x=n;break;case au.Y:this._coordinates[t].y=n;break;case au.Z:this._coordinates[t].z=n;break;default:throw new zs("invalid ordinateIndex")}},Ol.prototype.size=function(){return this._coordinates.length},Ol.prototype.getOrdinate=function(t,e){switch(e){case au.X:return this._coordinates[t].x;case au.Y:return this._coordinates[t].y;case au.Z:return this._coordinates[t].z}return js.NaN},Ol.prototype.getCoordinate=function(){if(1===arguments.length)return this._coordinates[arguments[0]];if(2===arguments.length){var t=arguments[0],e=arguments[1];e.x=this._coordinates[t].x,e.y=this._coordinates[t].y,e.z=this._coordinates[t].z}},Ol.prototype.getCoordinateCopy=function(t){return new Gs(this._coordinates[t])},Ol.prototype.getDimension=function(){return this._dimension},Ol.prototype.getX=function(t){return this._coordinates[t].x},Ol.prototype.clone=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].clone();return new Ol(t,this._dimension)},Ol.prototype.expandEnvelope=function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t},Ol.prototype.copy=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy();return new Ol(t,this._dimension)},Ol.prototype.toString=function(){if(this._coordinates.length>0){var t=new $s(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"},Ol.prototype.getY=function(t){return this._coordinates[t].y},Ol.prototype.toCoordinateArray=function(){return this._coordinates},Ol.prototype.interfaces_=function(){return[au,mi]},Ol.prototype.getClass=function(){return Ol},Pl.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(Ol,Pl);var Al=function(){},Ml={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};Al.prototype.readResolve=function(){return Al.instance()},Al.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array)return new Ol(arguments[0]);if(Ks(arguments[0],au))return new Ol(arguments[0])}else if(2===arguments.length){var t=arguments[0],e=arguments[1];return e>3&&(e=3),e<2?new Ol(t):new Ol(t,e)}},Al.prototype.interfaces_=function(){return[Ys,mi]},Al.prototype.getClass=function(){return Al},Al.instance=function(){return Al.instanceObject},Ml.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},Ml.instanceObject.get=function(){return new Al},Object.defineProperties(Al,Ml);var Rl=function(t){function e(){t.call(this),this.map_=new Map}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return this.map_.get(t)||null},e.prototype.put=function(t,e){return this.map_.set(t,e),e},e.prototype.values=function(){for(var t=new Gu,e=this.map_.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t},e.prototype.entrySet=function(){var t=new $u;return this.map_.entries().forEach(function(e){return t.add(e)}),t},e.prototype.size=function(){return this.map_.size()},e}(Ju),Ll=function t(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=t.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof Dl){var e=arguments[0];this._modelType=e,e===t.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var n=arguments[0];this._modelType=t.FIXED,this.setScale(n)}else if(arguments[0]instanceof t){var r=arguments[0];this._modelType=r._modelType,this._scale=r._scale}},Nl={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};Ll.prototype.equals=function(t){return t instanceof Ll&&this._modelType===t._modelType&&this._scale===t._scale},Ll.prototype.compareTo=function(t){var e=t,n=this.getMaximumSignificantDigits(),r=e.getMaximumSignificantDigits();return new tu(n).compareTo(new tu(r))},Ll.prototype.getScale=function(){return this._scale},Ll.prototype.isFloating=function(){return this._modelType===Ll.FLOATING||this._modelType===Ll.FLOATING_SINGLE},Ll.prototype.getType=function(){return this._modelType},Ll.prototype.toString=function(){var t="UNKNOWN";return this._modelType===Ll.FLOATING?t="Floating":this._modelType===Ll.FLOATING_SINGLE?t="Floating-Single":this._modelType===Ll.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},Ll.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var t=arguments[0];return js.isNaN(t)?t:this._modelType===Ll.FLOATING_SINGLE?t:this._modelType===Ll.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof Gs){var e=arguments[0];if(this._modelType===Ll.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}},Ll.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===Ll.FLOATING?t=16:this._modelType===Ll.FLOATING_SINGLE?t=6:this._modelType===Ll.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},Ll.prototype.setScale=function(t){this._scale=Math.abs(t)},Ll.prototype.interfaces_=function(){return[mi,Vs]},Ll.prototype.getClass=function(){return Ll},Ll.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},Nl.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},Nl.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(Ll,Nl);var Dl=function t(e){this._name=e||null,t.nameToTypeMap.put(e,this)},Fl={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};Dl.prototype.readResolve=function(){return Dl.nameToTypeMap.get(this._name)},Dl.prototype.toString=function(){return this._name},Dl.prototype.interfaces_=function(){return[mi]},Dl.prototype.getClass=function(){return Dl},Fl.serialVersionUID.get=function(){return-552860263173159e4},Fl.nameToTypeMap.get=function(){return new Rl},Object.defineProperties(Dl,Fl),Ll.Type=Dl,Ll.FIXED=new Dl("FIXED"),Ll.FLOATING=new Dl("FLOATING"),Ll.FLOATING_SINGLE=new Dl("FLOATING SINGLE");var zl=function t(){this._precisionModel=new Ll,this._SRID=0,this._coordinateSequenceFactory=t.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?Ks(arguments[0],Ys)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof Ll&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},jl={serialVersionUID:{configurable:!0}};zl.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new Gs(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new Gs(t.getMinX(),t.getMinY()),new Gs(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new Gs(t.getMinX(),t.getMinY()),new Gs(t.getMinX(),t.getMaxY()),new Gs(t.getMaxX(),t.getMaxY()),new Gs(t.getMaxX(),t.getMinY()),new Gs(t.getMinX(),t.getMinY())]),null)},zl.prototype.createLineString=function(t){return t?t instanceof Array?new gl(this.getCoordinateSequenceFactory().create(t),this):Ks(t,au)?new gl(t,this):void 0:new gl(this.getCoordinateSequenceFactory().create([]),this)},zl.prototype.createMultiLineString=function(){return 0===arguments.length?new cl(null,this):1===arguments.length?new cl(arguments[0],this):void 0},zl.prototype.buildGeometry=function(t){for(var e=null,n=!1,r=!1,i=t.iterator();i.hasNext();){var o=i.next(),a=o.getClass();null===e&&(e=a),a!==e&&(n=!0),o.isGeometryCollectionOrDerived()&&(r=!0)}if(null===e)return this.createGeometryCollection();if(n||r)return this.createGeometryCollection(zl.toGeometryArray(t));var s=t.iterator().next();if(t.size()>1){if(s instanceof bl)return this.createMultiPolygon(zl.toPolygonArray(t));if(s instanceof gl)return this.createMultiLineString(zl.toLineStringArray(t));if(s instanceof vl)return this.createMultiPoint(zl.toPointArray(t));xu.shouldNeverReachHere("Unhandled class: "+s.getClass().getName())}return s},zl.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},zl.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Gs){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(Ks(arguments[0],au))return new vl(arguments[0],this)}},zl.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},zl.prototype.createPolygon=function(){if(0===arguments.length)return new bl(null,null,this);if(1===arguments.length){if(Ks(arguments[0],au))return this.createPolygon(this.createLinearRing(arguments[0]));if(arguments[0]instanceof Array)return this.createPolygon(this.createLinearRing(arguments[0]));if(arguments[0]instanceof wl)return this.createPolygon(arguments[0],null)}else if(2===arguments.length)return new bl(arguments[0],arguments[1],this)},zl.prototype.getSRID=function(){return this._SRID},zl.prototype.createGeometryCollection=function(){return 0===arguments.length?new ll(null,this):1===arguments.length?new ll(arguments[0],this):void 0},zl.prototype.createGeometry=function(t){return new Cl(this).edit(t,{edit:function(){if(2===arguments.length)return this._coordinateSequenceFactory.create(arguments[0])}})},zl.prototype.getPrecisionModel=function(){return this._precisionModel},zl.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(Ks(arguments[0],au))return new wl(arguments[0],this)}},zl.prototype.createMultiPolygon=function(){return 0===arguments.length?new El(null,this):1===arguments.length?new El(arguments[0],this):void 0},zl.prototype.createMultiPoint=function(){if(0===arguments.length)return new xl(null,this);if(1===arguments.length){if(arguments[0]instanceof Array)return new xl(arguments[0],this);if(arguments[0]instanceof Array){var t=arguments[0];return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(Ks(arguments[0],au)){var e=arguments[0];if(null===e)return this.createMultiPoint(new Array(0).fill(null));for(var n=new Array(e.size()).fill(null),r=0;r<e.size();r++){var i=this.getCoordinateSequenceFactory().create(1,e.getDimension());ml.copy(e,r,i,0,1),n[r]=this.createPoint(i)}return this.createMultiPoint(n)}}},zl.prototype.interfaces_=function(){return[mi]},zl.prototype.getClass=function(){return zl},zl.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},zl.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},zl.getDefaultCoordinateSequenceFactory=function(){return Al.instance()},zl.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},zl.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},zl.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},zl.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},zl.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},zl.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},zl.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},jl.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(zl,jl);var Bl=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],Vl=function(t){this.geometryFactory=t||new zl};Vl.prototype.read=function(t){var e,n=(e="string"==typeof t?JSON.parse(t):t).type;if(!ql[n])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==Bl.indexOf(n)?ql[n].apply(this,[e.coordinates]):ql[n].apply(this,"GeometryCollection"===n?[e.geometries]:[e])},Vl.prototype.write=function(t){var e=t.getGeometryType();if(!Ul[e])throw new Error("Geometry is not supported");return Ul[e].apply(this,[t])};var ql={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){if(!ql[t.geometry.type])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=ql.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(new Gs(r[0],r[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new Gs(t[0],t[1]),new Gs(t[2],t[1]),new Gs(t[2],t[3]),new Gs(t[0],t[3]),new Gs(t[0],t[1])])},Point:function(t){var e=new Gs(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(ql.Point.apply(this,[t[n]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=ql.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(ql.LineString.apply(this,[t[n]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=ql.coordinates.apply(this,[t[0]]),n=this.geometryFactory.createLinearRing(e),r=[],i=1;i<t.length;++i){var o=ql.coordinates.apply(this,[t[i]]),a=this.geometryFactory.createLinearRing(o);r.push(a)}return this.geometryFactory.createPolygon(n,r)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n)e.push(ql.Polygon.apply(this,[t[n]]));return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n)e.push(this.read(t[n]));return this.geometryFactory.createGeometryCollection(e)}},Ul={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:Ul.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=Ul.Point.apply(this,[t._geometries[n]]);e.push(r.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),r=0;r<n.length;++r)e.push(Ul.coordinate.apply(this,[n[r]]));return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=Ul.LineString.apply(this,[t._geometries[n]]);e.push(r.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=Ul.LineString.apply(this,[t._shell]);e.push(n.coordinates);for(var r=0;r<t._holes.length;++r){var i=Ul.LineString.apply(this,[t._holes[r]]);e.push(i.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=Ul.Polygon.apply(this,[t._geometries[n]]);e.push(r.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=r.getGeometryType();e.push(Ul[i].apply(this,[r]))}return{type:"GeometryCollection",geometries:e}}},Gl=function(t){this.geometryFactory=t||new zl,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new Vl(this.geometryFactory)};Gl.prototype.read=function(t){var e=this.parser.read(t);return this.precisionModel.getType()===Ll.FIXED&&this.reducePrecision(e),e},Gl.prototype.reducePrecision=function(t){var e,n;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,n=t.points.length;e<n;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,n=t.geometries.length;e<n;e++)this.reducePrecision(t.geometries[e])};var Xl=function(){this.parser=new Vl(this.geometryFactory)};Xl.prototype.write=function(t){return this.parser.write(t)};var Hl=function(){},Yl={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};Hl.prototype.interfaces_=function(){return[]},Hl.prototype.getClass=function(){return Hl},Hl.opposite=function(t){return t===Hl.LEFT?Hl.RIGHT:t===Hl.RIGHT?Hl.LEFT:t},Yl.ON.get=function(){return 0},Yl.LEFT.get=function(){return 1},Yl.RIGHT.get=function(){return 2},Object.defineProperties(Hl,Yl),(ki.prototype=new Error).name="EmptyStackException",(Oi.prototype=new Uu).add=function(t){return this.array_.push(t),!0},Oi.prototype.get=function(t){if(t<0||t>=this.size())throw new Error;return this.array_[t]},Oi.prototype.push=function(t){return this.array_.push(t),t},Oi.prototype.pop=function(t){if(0===this.array_.length)throw new ki;return this.array_.pop()},Oi.prototype.peek=function(){if(0===this.array_.length)throw new ki;return this.array_[this.array_.length-1]},Oi.prototype.empty=function(){return 0===this.array_.length},Oi.prototype.isEmpty=function(){return this.empty()},Oi.prototype.search=function(t){return this.array_.indexOf(t)},Oi.prototype.size=function(){return this.array_.length},Oi.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t};var Zl=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};Zl.prototype.getCoordinate=function(){return this._minCoord},Zl.prototype.getRightmostSide=function(t,e){var n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),n},Zl.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();xu.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],n=t[this._minIndex+1],r=Tu.computeOrientation(this._minCoord,n,e),i=!1;e.y<this._minCoord.y&&n.y<this._minCoord.y&&r===Tu.COUNTERCLOCKWISE?i=!0:e.y>this._minCoord.y&&n.y>this._minCoord.y&&r===Tu.CLOCKWISE&&(i=!0),i&&(this._minIndex=this._minIndex-1)},Zl.prototype.getRightmostSideOfSegment=function(t,e){var n=t.getEdge().getCoordinates();if(e<0||e+1>=n.length)return-1;if(n[e].y===n[e+1].y)return-1;var r=Hl.LEFT;return n[e].y<n[e+1].y&&(r=Hl.RIGHT),r},Zl.prototype.getEdge=function(){return this._orientedDe},Zl.prototype.checkForRightmostCoordinate=function(t){for(var e=t.getEdge().getCoordinates(),n=0;n<e.length-1;n++)(null===this._minCoord||e[n].x>this._minCoord.x)&&(this._minDe=t,this._minIndex=n,this._minCoord=e[n])},Zl.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},Zl.prototype.findEdge=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}xu.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===Hl.LEFT&&(this._orientedDe=this._minDe.getSym())},Zl.prototype.interfaces_=function(){return[]},Zl.prototype.getClass=function(){return Zl};var Wl=function(t){function e(n,r){t.call(this,e.msgWithCoord(n,r)),this.pt=r?new Gs(r):null,this.name="TopologyException"}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getCoordinate=function(){return this.pt},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.msgWithCoord=function(t,e){return e?t:t+" [ "+e+" ]"},e}(_u),Kl=function(){this.array_=[]};Kl.prototype.addLast=function(t){this.array_.push(t)},Kl.prototype.removeFirst=function(){return this.array_.shift()},Kl.prototype.isEmpty=function(){return 0===this.array_.length};var Jl=function(){this._finder=null,this._dirEdgeList=new Gu,this._nodes=new Gu,this._rightMostCoord=null,this._env=null,this._finder=new Zl};Jl.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)},Jl.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},Jl.prototype.computeNodeDepth=function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var r=n.next();if(r.isVisited()||r.getSym().isVisited()){e=r;break}}if(null===e)throw new Wl("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var i=t.getEdges().iterator();i.hasNext();){var o=i.next();o.setVisited(!0),this.copySymDepths(o)}},Jl.prototype.computeDepth=function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.setEdgeDepths(Hl.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},Jl.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},Jl.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(Hl.RIGHT)>=1&&e.getDepth(Hl.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},Jl.prototype.computeDepths=function(t){var e=new $u,n=new Kl,r=t.getNode();for(n.addLast(r),e.add(r),t.setVisited(!0);!n.isEmpty();){var i=n.removeFirst();e.add(i),this.computeNodeDepth(i);for(var o=i.getEdges().iterator();o.hasNext();){var a=o.next().getSym();if(!a.isVisited()){var s=a.getNode();e.contains(s)||(n.addLast(s),e.add(s))}}}},Jl.prototype.compareTo=function(t){return this._rightMostCoord.x<t._rightMostCoord.x?-1:this._rightMostCoord.x>t._rightMostCoord.x?1:0},Jl.prototype.getEnvelope=function(){if(null===this._env){for(var t=new pu,e=this._dirEdgeList.iterator();e.hasNext();)for(var n=e.next().getEdge().getCoordinates(),r=0;r<n.length-1;r++)t.expandToInclude(n[r]);this._env=t}return this._env},Jl.prototype.addReachable=function(t){var e=new Oi;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}},Jl.prototype.copySymDepths=function(t){var e=t.getSym();e.setDepth(Hl.LEFT,t.getDepth(Hl.RIGHT)),e.setDepth(Hl.RIGHT,t.getDepth(Hl.LEFT))},Jl.prototype.add=function(t,e){t.setVisited(!0),this._nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var r=n.next();this._dirEdgeList.add(r);var i=r.getSym().getNode();i.isVisited()||e.push(i)}},Jl.prototype.getNodes=function(){return this._nodes},Jl.prototype.getDirectedEdges=function(){return this._dirEdgeList},Jl.prototype.interfaces_=function(){return[Vs]},Jl.prototype.getClass=function(){return Jl};var Ql=function t(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array)this.init(arguments[0].length);else if(Number.isInteger(arguments[0])){var e=arguments[0];this.init(1),this.location[Hl.ON]=e}else if(arguments[0]instanceof t){var n=arguments[0];if(this.init(n.location.length),null!==n)for(var r=0;r<this.location.length;r++)this.location[r]=n.location[r]}}else if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];this.init(3),this.location[Hl.ON]=i,this.location[Hl.LEFT]=o,this.location[Hl.RIGHT]=a}};Ql.prototype.setAllLocations=function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},Ql.prototype.isNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==Zs.NONE)return!1;return!0},Ql.prototype.setAllLocationsIfNull=function(t){for(var e=0;e<this.location.length;e++)this.location[e]===Zs.NONE&&(this.location[e]=t)},Ql.prototype.isLine=function(){return 1===this.location.length},Ql.prototype.merge=function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[Hl.ON]=this.location[Hl.ON],e[Hl.LEFT]=Zs.NONE,e[Hl.RIGHT]=Zs.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===Zs.NONE&&n<t.location.length&&(this.location[n]=t.location[n])},Ql.prototype.getLocations=function(){return this.location},Ql.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[Hl.LEFT];this.location[Hl.LEFT]=this.location[Hl.RIGHT],this.location[Hl.RIGHT]=t},Ql.prototype.toString=function(){var t=new $s;return this.location.length>1&&t.append(Zs.toLocationSymbol(this.location[Hl.LEFT])),t.append(Zs.toLocationSymbol(this.location[Hl.ON])),this.location.length>1&&t.append(Zs.toLocationSymbol(this.location[Hl.RIGHT])),t.toString()},Ql.prototype.setLocations=function(t,e,n){this.location[Hl.ON]=t,this.location[Hl.LEFT]=e,this.location[Hl.RIGHT]=n},Ql.prototype.get=function(t){return t<this.location.length?this.location[t]:Zs.NONE},Ql.prototype.isArea=function(){return this.location.length>1},Ql.prototype.isAnyNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===Zs.NONE)return!0;return!1},Ql.prototype.setLocation=function(){1===arguments.length?this.setLocation(Hl.ON,arguments[0]):2===arguments.length&&(this.location[arguments[0]]=arguments[1])},Ql.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(Zs.NONE)},Ql.prototype.isEqualOnSide=function(t,e){return this.location[e]===t.location[e]},Ql.prototype.allPositionsEqual=function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},Ql.prototype.interfaces_=function(){return[]},Ql.prototype.getClass=function(){return Ql};var $l=function t(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var e=arguments[0];this.elt[0]=new Ql(e),this.elt[1]=new Ql(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.elt[0]=new Ql(n.elt[0]),this.elt[1]=new Ql(n.elt[1])}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.elt[0]=new Ql(Zs.NONE),this.elt[1]=new Ql(Zs.NONE),this.elt[r].setLocation(i)}else if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];this.elt[0]=new Ql(o,a,s),this.elt[1]=new Ql(o,a,s)}else if(4===arguments.length){var u=arguments[0],l=arguments[1],c=arguments[2],h=arguments[3];this.elt[0]=new Ql(Zs.NONE,Zs.NONE,Zs.NONE),this.elt[1]=new Ql(Zs.NONE,Zs.NONE,Zs.NONE),this.elt[u].setLocations(l,c,h)}};$l.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},$l.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)},$l.prototype.isNull=function(t){return this.elt[t].isNull()},$l.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else 2===arguments.length&&this.elt[arguments[0]].setAllLocationsIfNull(arguments[1])},$l.prototype.isLine=function(t){return this.elt[t].isLine()},$l.prototype.merge=function(t){for(var e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new Ql(t.elt[e]):this.elt[e].merge(t.elt[e])},$l.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},$l.prototype.getLocation=function(){return 1===arguments.length?this.elt[arguments[0]].get(Hl.ON):2===arguments.length?this.elt[arguments[0]].get(arguments[1]):void 0},$l.prototype.toString=function(){var t=new $s;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},$l.prototype.isArea=function(){return 0===arguments.length?this.elt[0].isArea()||this.elt[1].isArea():1===arguments.length?this.elt[arguments[0]].isArea():void 0},$l.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},$l.prototype.setLocation=function(){2===arguments.length?this.elt[arguments[0]].setLocation(Hl.ON,arguments[1]):3===arguments.length&&this.elt[arguments[0]].setLocation(arguments[1],arguments[2])},$l.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},$l.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)},$l.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new Ql(this.elt[t].location[0]))},$l.prototype.interfaces_=function(){return[]},$l.prototype.getClass=function(){return $l},$l.toLineLabel=function(t){for(var e=new $l(Zs.NONE),n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e};var tc=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new Gu,this._pts=new Gu,this._label=new $l(Zs.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new Gu,this._geometryFactory=null;var t=arguments[0];this._geometryFactory=arguments[1],this.computePoints(t),this.computeRing()};tc.prototype.computeRing=function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=Tu.isCCW(this._ring.getCoordinates())},tc.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},tc.prototype.computePoints=function(t){this._startDe=t;var e=t,n=!0;do{if(null===e)throw new Wl("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new Wl("Directed Edge visited twice during ring-building at "+e.getCoordinate());this._edges.add(e);var r=e.getLabel();xu.isTrue(r.isArea()),this.mergeLabel(r),this.addPoints(e.getEdge(),e.isForward(),n),n=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this._startDe)},tc.prototype.getLinearRing=function(){return this._ring},tc.prototype.getCoordinate=function(t){return this._pts.get(t)},tc.prototype.computeMaxNodeDegree=function(){this._maxNodeDegree=0;var t=this._startDe;do{var e=t.getNode().getEdges().getOutgoingDegree(this);e>this._maxNodeDegree&&(this._maxNodeDegree=e),t=this.getNext(t)}while(t!==this._startDe);this._maxNodeDegree*=2},tc.prototype.addPoints=function(t,e,n){var r=t.getCoordinates();if(e){var i=1;n&&(i=0);for(var o=i;o<r.length;o++)this._pts.add(r[o])}else{var a=r.length-2;n&&(a=r.length-1);for(var s=a;s>=0;s--)this._pts.add(r[s])}},tc.prototype.isHole=function(){return this._isHole},tc.prototype.setInResult=function(){var t=this._startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)},tc.prototype.containsPoint=function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!Tu.isPointInRing(t,e.getCoordinates()))return!1;for(var n=this._holes.iterator();n.hasNext();)if(n.next().containsPoint(t))return!1;return!0},tc.prototype.addHole=function(t){this._holes.add(t)},tc.prototype.isShell=function(){return null===this._shell},tc.prototype.getLabel=function(){return this._label},tc.prototype.getEdges=function(){return this._edges},tc.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},tc.prototype.getShell=function(){return this._shell},tc.prototype.mergeLabel=function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[1],n=arguments[0].getLocation(e,Hl.RIGHT);if(n===Zs.NONE)return null;if(this._label.getLocation(e)===Zs.NONE)return this._label.setLocation(e,n),null}},tc.prototype.setShell=function(t){this._shell=t,null!==t&&t.addHole(this)},tc.prototype.toPolygon=function(t){for(var e=new Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)e[n]=this._holes.get(n).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},tc.prototype.interfaces_=function(){return[]},tc.prototype.getClass=function(){return tc};var ec=function(t){function e(){t.call(this,arguments[0],arguments[1])}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.setEdgeRing=function(t,e){t.setMinEdgeRing(e)},e.prototype.getNext=function(t){return t.getNextMin()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(tc),nc=function(t){function e(){t.call(this,arguments[0],arguments[1])}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.buildMinimalRings=function(){var t=new Gu,e=this._startDe;do{if(null===e.getMinEdgeRing()){var n=new ec(e,this._geometryFactory);t.add(n)}e=e.getNext()}while(e!==this._startDe);return t},e.prototype.setEdgeRing=function(t,e){t.setEdgeRing(e)},e.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var t=this._startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this._startDe)},e.prototype.getNext=function(t){return t.getNext()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(tc),rc=function(){this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length||1===arguments.length&&(this._label=arguments[0])};rc.prototype.setVisited=function(t){this._isVisited=t},rc.prototype.setInResult=function(t){this._isInResult=t},rc.prototype.isCovered=function(){return this._isCovered},rc.prototype.isCoveredSet=function(){return this._isCoveredSet},rc.prototype.setLabel=function(t){this._label=t},rc.prototype.getLabel=function(){return this._label},rc.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},rc.prototype.updateIM=function(t){xu.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},rc.prototype.isInResult=function(){return this._isInResult},rc.prototype.isVisited=function(){return this._isVisited},rc.prototype.interfaces_=function(){return[]},rc.prototype.getClass=function(){return rc};var ic=function(t){function e(){t.call(this),this._coord=null,this._edges=null;var e=arguments[1];this._coord=arguments[0],this._edges=e,this._label=new $l(0,Zs.NONE)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.isIncidentEdgeInResult=function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();)if(t.next().getEdge().isInResult())return!0;return!1},e.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},e.prototype.getCoordinate=function(){return this._coord},e.prototype.print=function(t){t.println("node "+this._coord+" lbl: "+this._label)},e.prototype.computeIM=function(t){},e.prototype.computeMergedLocation=function(t,e){var n=Zs.NONE;if(n=this._label.getLocation(e),!t.isNull(e)){var r=t.getLocation(e);n!==Zs.BOUNDARY&&(n=r)}return n},e.prototype.setLabel=function(){if(2!==arguments.length)return t.prototype.setLabel.apply(this,arguments);var e=arguments[0],n=arguments[1];null===this._label?this._label=new $l(e,n):this._label.setLocation(e,n)},e.prototype.getEdges=function(){return this._edges},e.prototype.mergeLabel=function(){if(arguments[0]instanceof e)this.mergeLabel(arguments[0]._label);else if(arguments[0]instanceof $l)for(var t=arguments[0],n=0;n<2;n++){var r=this.computeMergedLocation(t,n);this._label.getLocation(n)===Zs.NONE&&this._label.setLocation(n,r)}},e.prototype.add=function(t){this._edges.insert(t),t.setNode(this)},e.prototype.setLabelBoundary=function(t){if(null===this._label)return null;var e=Zs.NONE;null!==this._label&&(e=this._label.getLocation(t));var n=null;switch(e){case Zs.BOUNDARY:n=Zs.INTERIOR;break;case Zs.INTERIOR:default:n=Zs.BOUNDARY}this._label.setLocation(t,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(rc),oc=function(){this.nodeMap=new Ci,this.nodeFact=null,this.nodeFact=arguments[0]};oc.prototype.find=function(t){return this.nodeMap.get(t)},oc.prototype.addNode=function(){if(arguments[0]instanceof Gs){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof ic){var n=arguments[0],r=this.nodeMap.get(n.getCoordinate());return null===r?(this.nodeMap.put(n.getCoordinate(),n),n):(r.mergeLabel(n),r)}},oc.prototype.print=function(t){for(var e=this.iterator();e.hasNext();)e.next().print(t)},oc.prototype.iterator=function(){return this.nodeMap.values().iterator()},oc.prototype.values=function(){return this.nodeMap.values()},oc.prototype.getBoundaryNodes=function(t){for(var e=new Gu,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().getLocation(t)===Zs.BOUNDARY&&e.add(r)}return e},oc.prototype.add=function(t){var e=t.getCoordinate();this.addNode(e).add(t)},oc.prototype.interfaces_=function(){return[]},oc.prototype.getClass=function(){return oc};var ac=function(){},sc={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};ac.prototype.interfaces_=function(){return[]},ac.prototype.getClass=function(){return ac},ac.isNorthern=function(t){return t===ac.NE||t===ac.NW},ac.isOpposite=function(t,e){return t!==e&&2==(t-e+4)%4},ac.commonHalfPlane=function(t,e){if(t===e)return t;if(2==(t-e+4)%4)return-1;var n=t<e?t:e;return 0===n&&3===(t>e?t:e)?3:n},ac.isInHalfPlane=function(t,e){return e===ac.SE?t===ac.SE||t===ac.SW:t===e||t===e+1},ac.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new zs("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?ac.NE:ac.SE:e>=0?ac.NW:ac.SW}if(arguments[0]instanceof Gs&&arguments[1]instanceof Gs){var n=arguments[0],r=arguments[1];if(r.x===n.x&&r.y===n.y)throw new zs("Cannot compute the quadrant for two identical points "+n);return r.x>=n.x?r.y>=n.y?ac.NE:ac.SE:r.y>=n.y?ac.NW:ac.SW}},sc.NE.get=function(){return 0},sc.NW.get=function(){return 1},sc.SW.get=function(){return 2},sc.SE.get=function(){return 3},Object.defineProperties(ac,sc);var uc=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length)this._edge=arguments[0];else if(3===arguments.length){var t=arguments[1],e=arguments[2];this._edge=arguments[0],this.init(t,e),this._label=null}else if(4===arguments.length){var n=arguments[1],r=arguments[2],i=arguments[3];this._edge=arguments[0],this.init(n,r),this._label=i}};uc.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:Tu.computeOrientation(t._p0,t._p1,this._p1)},uc.prototype.getDy=function(){return this._dy},uc.prototype.getCoordinate=function(){return this._p0},uc.prototype.setNode=function(t){this._node=t},uc.prototype.print=function(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),r=n.lastIndexOf("."),i=n.substring(r+1);t.print("  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)},uc.prototype.compareTo=function(t){return this.compareDirection(t)},uc.prototype.getDirectedCoordinate=function(){return this._p1},uc.prototype.getDx=function(){return this._dx},uc.prototype.getLabel=function(){return this._label},uc.prototype.getEdge=function(){return this._edge},uc.prototype.getQuadrant=function(){return this._quadrant},uc.prototype.getNode=function(){return this._node},uc.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label},uc.prototype.computeLabel=function(t){},uc.prototype.init=function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=ac.quadrant(this._dx,this._dy),xu.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},uc.prototype.interfaces_=function(){return[Vs]},uc.prototype.getClass=function(){return uc};var lc=function(t){function e(){var e=arguments[0],n=arguments[1];if(t.call(this,e),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=n,n)this.init(e.getCoordinate(0),e.getCoordinate(1));else{var r=e.getNumPoints()-1;this.init(e.getCoordinate(r),e.getCoordinate(r-1))}this.computeDirectedLabel()}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getNextMin=function(){return this._nextMin},e.prototype.getDepth=function(t){return this._depth[t]},e.prototype.setVisited=function(t){this._isVisited=t},e.prototype.computeDirectedLabel=function(){this._label=new $l(this._edge.getLabel()),this._isForward||this._label.flip()},e.prototype.getNext=function(){return this._next},e.prototype.setDepth=function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new Wl("assigned depths do not match",this.getCoordinate());this._depth[t]=e},e.prototype.isInteriorAreaEdge=function(){for(var t=!0,e=0;e<2;e++)this._label.isArea(e)&&this._label.getLocation(e,Hl.LEFT)===Zs.INTERIOR&&this._label.getLocation(e,Hl.RIGHT)===Zs.INTERIOR||(t=!1);return t},e.prototype.setNextMin=function(t){this._nextMin=t},e.prototype.print=function(e){t.prototype.print.call(this,e),e.print(" "+this._depth[Hl.LEFT]+"/"+this._depth[Hl.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")},e.prototype.setMinEdgeRing=function(t){this._minEdgeRing=t},e.prototype.isLineEdge=function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,Zs.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,Zs.EXTERIOR);return t&&e&&n},e.prototype.setEdgeRing=function(t){this._edgeRing=t},e.prototype.getMinEdgeRing=function(){return this._minEdgeRing},e.prototype.getDepthDelta=function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t},e.prototype.setInResult=function(t){this._isInResult=t},e.prototype.getSym=function(){return this._sym},e.prototype.isForward=function(){return this._isForward},e.prototype.getEdge=function(){return this._edge},e.prototype.printEdge=function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)},e.prototype.setSym=function(t){this._sym=t},e.prototype.setVisitedEdge=function(t){this.setVisited(t),this._sym.setVisited(t)},e.prototype.setEdgeDepths=function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var r=1;t===Hl.LEFT&&(r=-1);var i=Hl.opposite(t),o=e+n*r;this.setDepth(t,e),this.setDepth(i,o)},e.prototype.getEdgeRing=function(){return this._edgeRing},e.prototype.isInResult=function(){return this._isInResult},e.prototype.setNext=function(t){this._next=t},e.prototype.isVisited=function(){return this._isVisited},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.depthFactor=function(t,e){return t===Zs.EXTERIOR&&e===Zs.INTERIOR?1:t===Zs.INTERIOR&&e===Zs.EXTERIOR?-1:0},e}(uc),cc=function(){};cc.prototype.createNode=function(t){return new ic(t,null)},cc.prototype.interfaces_=function(){return[]},cc.prototype.getClass=function(){return cc};var hc=function(){this._edges=new Gu,this._nodes=null,this._edgeEndList=new Gu,0===arguments.length?this._nodes=new oc(new cc):1===arguments.length&&(this._nodes=new oc(arguments[0]))};hc.prototype.printEdges=function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var n=this._edges.get(e);n.print(t),n.eiList.print(t)}},hc.prototype.find=function(t){return this._nodes.find(t)},hc.prototype.addNode=function(){return arguments[0]instanceof ic?this._nodes.addNode(arguments[0]):arguments[0]instanceof Gs?this._nodes.addNode(arguments[0]):void 0},hc.prototype.getNodeIterator=function(){return this._nodes.iterator()},hc.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()},hc.prototype.debugPrintln=function(t){cu.out.println(t)},hc.prototype.isBoundaryNode=function(t,e){var n=this._nodes.find(e);if(null===n)return!1;var r=n.getLabel();return null!==r&&r.getLocation(t)===Zs.BOUNDARY},hc.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()},hc.prototype.matchInSameDirection=function(t,e,n,r){return!!t.equals(n)&&Tu.computeOrientation(t,e,r)===Tu.COLLINEAR&&ac.quadrant(t,e)===ac.quadrant(n,r)},hc.prototype.getEdgeEnds=function(){return this._edgeEndList},hc.prototype.debugPrint=function(t){cu.out.print(t)},hc.prototype.getEdgeIterator=function(){return this._edges.iterator()},hc.prototype.findEdgeInSameDirection=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(this.matchInSameDirection(t,e,i[0],i[1]))return r;if(this.matchInSameDirection(t,e,i[i.length-1],i[i.length-2]))return r}return null},hc.prototype.insertEdge=function(t){this._edges.add(t)},hc.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null},hc.prototype.addEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this._edges.add(n);var r=new lc(n,!0),i=new lc(n,!1);r.setSym(i),i.setSym(r),this.add(r),this.add(i)}},hc.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)},hc.prototype.getNodes=function(){return this._nodes.values()},hc.prototype.findEdge=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(t.equals(i[0])&&e.equals(i[1]))return r}return null},hc.prototype.interfaces_=function(){return[]},hc.prototype.getClass=function(){return hc},hc.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()};var pc=function(){this._geometryFactory=null,this._shellList=new Gu,this._geometryFactory=arguments[0]};pc.prototype.sortShellsAndHoles=function(t,e,n){for(var r=t.iterator();r.hasNext();){var i=r.next();i.isHole()?n.add(i):e.add(i)}},pc.prototype.computePolygons=function(t){for(var e=new Gu,n=t.iterator();n.hasNext();){var r=n.next().toPolygon(this._geometryFactory);e.add(r)}return e},pc.prototype.placeFreeHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(null===r.getShell()){var i=this.findEdgeRingContaining(r,t);if(null===i)throw new Wl("unable to assign hole to a shell",r.getCoordinate(0));r.setShell(i)}}},pc.prototype.buildMinimalEdgeRings=function(t,e,n){for(var r=new Gu,i=t.iterator();i.hasNext();){var o=i.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var a=o.buildMinimalRings(),s=this.findShell(a);null!==s?(this.placePolygonHoles(s,a),e.add(s)):n.addAll(a)}else r.add(o)}return r},pc.prototype.containsPoint=function(t){for(var e=this._shellList.iterator();e.hasNext();)if(e.next().containsPoint(t))return!0;return!1},pc.prototype.buildMaximalEdgeRings=function(t){for(var e=new Gu,n=t.iterator();n.hasNext();){var r=n.next();if(r.isInResult()&&r.getLabel().isArea()&&null===r.getEdgeRing()){var i=new nc(r,this._geometryFactory);e.add(i),i.setInResult()}}return e},pc.prototype.placePolygonHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();r.isHole()&&r.setShell(t)}},pc.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},pc.prototype.findEdgeRingContaining=function(t,e){for(var n=t.getLinearRing(),r=n.getEnvelopeInternal(),i=n.getCoordinateN(0),o=null,a=null,s=e.iterator();s.hasNext();){var u=s.next(),l=u.getLinearRing(),c=l.getEnvelopeInternal();null!==o&&(a=o.getLinearRing().getEnvelopeInternal());var h=!1;c.contains(r)&&Tu.isPointInRing(i,l.getCoordinates())&&(h=!0),h&&(null===o||a.contains(c))&&(o=u)}return o},pc.prototype.findShell=function(t){for(var e=0,n=null,r=t.iterator();r.hasNext();){var i=r.next();i.isHole()||(n=i,e++)}return xu.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n},pc.prototype.add=function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0];hc.linkResultDirectedEdges(arguments[1]);var n=this.buildMaximalEdgeRings(e),r=new Gu,i=this.buildMinimalEdgeRings(n,this._shellList,r);this.sortShellsAndHoles(i,this._shellList,r),this.placeFreeHoles(this._shellList,r)}},pc.prototype.interfaces_=function(){return[]},pc.prototype.getClass=function(){return pc};var fc=function(){};fc.prototype.getBounds=function(){},fc.prototype.interfaces_=function(){return[]},fc.prototype.getClass=function(){return fc};var dc=function(){this._bounds=null,this._item=null;var t=arguments[1];this._bounds=arguments[0],this._item=t};dc.prototype.getItem=function(){return this._item},dc.prototype.getBounds=function(){return this._bounds},dc.prototype.interfaces_=function(){return[fc,mi]},dc.prototype.getClass=function(){return dc};var mc=function(){this._size=null,this._items=null,this._size=0,this._items=new Gu,this._items.add(null)};mc.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t},mc.prototype.size=function(){return this._size},mc.prototype.reorder=function(t){for(var e=null,n=this._items.get(t);2*t<=this._size&&((e=2*t)!==this._size&&this._items.get(e+1).compareTo(this._items.get(e))<0&&e++,this._items.get(e).compareTo(n)<0);t=e)this._items.set(t,this._items.get(e));this._items.set(t,n)},mc.prototype.clear=function(){this._size=0,this._items.clear()},mc.prototype.isEmpty=function(){return 0===this._size},mc.prototype.add=function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)},mc.prototype.interfaces_=function(){return[]},mc.prototype.getClass=function(){return mc};var gc=function(){};gc.prototype.visitItem=function(t){},gc.prototype.interfaces_=function(){return[]},gc.prototype.getClass=function(){return gc};var yc=function(){};yc.prototype.insert=function(t,e){},yc.prototype.remove=function(t,e){},yc.prototype.query=function(){},yc.prototype.interfaces_=function(){return[]},yc.prototype.getClass=function(){return yc};var vc=function(){this._childBoundables=new Gu,this._bounds=null,this._level=null,0===arguments.length||1===arguments.length&&(this._level=arguments[0])},_c={serialVersionUID:{configurable:!0}};vc.prototype.getLevel=function(){return this._level},vc.prototype.size=function(){return this._childBoundables.size()},vc.prototype.getChildBoundables=function(){return this._childBoundables},vc.prototype.addChildBoundable=function(t){xu.isTrue(null===this._bounds),this._childBoundables.add(t)},vc.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},vc.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},vc.prototype.interfaces_=function(){return[fc,mi]},vc.prototype.getClass=function(){return vc},_c.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(vc,_c);var bc=function(){};bc.reverseOrder=function(){return{compare:function(t,e){return e.compareTo(t)}}},bc.min=function(t){return bc.sort(t),t.get(0)},bc.sort=function(t,e){var n=t.toArray();e?il.sort(n,e):il.sort(n);for(var r=t.iterator(),i=0,o=n.length;i<o;i++)r.next(),r.set(n[i])},bc.singletonList=function(t){var e=new Gu;return e.add(t),e};var xc=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[1],e=arguments[2];this._boundable1=arguments[0],this._boundable2=t,this._itemDistance=e,this._distance=this.distance()};xc.prototype.expandToQueue=function(t,e){var n=xc.isComposite(this._boundable1),r=xc.isComposite(this._boundable2);if(n&&r)return xc.area(this._boundable1)>xc.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,t,e),null):(this.expand(this._boundable2,this._boundable1,t,e),null);if(n)return this.expand(this._boundable1,this._boundable2,t,e),null;if(r)return this.expand(this._boundable2,this._boundable1,t,e),null;throw new zs("neither boundable is composite")},xc.prototype.isLeaves=function(){return!(xc.isComposite(this._boundable1)||xc.isComposite(this._boundable2))},xc.prototype.compareTo=function(t){return this._distance<t._distance?-1:this._distance>t._distance?1:0},xc.prototype.expand=function(t,e,n,r){for(var i=t.getChildBoundables().iterator();i.hasNext();){var o=i.next(),a=new xc(o,e,this._itemDistance);a.getDistance()<r&&n.add(a)}},xc.prototype.getBoundable=function(t){return 0===t?this._boundable1:this._boundable2},xc.prototype.getDistance=function(){return this._distance},xc.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},xc.prototype.interfaces_=function(){return[Vs]},xc.prototype.getClass=function(){return xc},xc.area=function(t){return t.getBounds().getArea()},xc.isComposite=function(t){return t instanceof vc};var wc=function t(){if(this._root=null,this._built=!1,this._itemBoundables=new Gu,this._nodeCapacity=null,0===arguments.length)this._nodeCapacity=t.DEFAULT_NODE_CAPACITY;else if(1===arguments.length){var e=arguments[0];xu.isTrue(e>1,"Node capacity must be greater than 1"),this._nodeCapacity=e}},Ec={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};wc.prototype.getNodeCapacity=function(){return this._nodeCapacity},wc.prototype.lastNode=function(t){return t.get(t.size()-1)},wc.prototype.size=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();n instanceof vc?t+=this.size(n):n instanceof dc&&(t+=1)}return t}},wc.prototype.removeItem=function(t,e){for(var n=null,r=t.getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof dc&&i.getItem()===e&&(n=i)}return null!==n&&(t.getChildBoundables().remove(n),!0)},wc.prototype.itemsTree=function(){if(0===arguments.length){this.build();var t=this.itemsTree(this._root);return null===t?new Gu:t}if(1===arguments.length){for(var e=arguments[0],n=new Gu,r=e.getChildBoundables().iterator();r.hasNext();){var i=r.next();if(i instanceof vc){var o=this.itemsTree(i);null!==o&&n.add(o)}else i instanceof dc?n.add(i.getItem()):xu.shouldNeverReachHere()}return n.size()<=0?null:n}},wc.prototype.insert=function(t,e){xu.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new dc(t,e))},wc.prototype.boundablesAtLevel=function(){if(1===arguments.length){var t=arguments[0],e=new Gu;return this.boundablesAtLevel(t,this._root,e),e}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];if(xu.isTrue(n>-2),r.getLevel()===n)return i.add(r),null;for(var o=r.getChildBoundables().iterator();o.hasNext();){var a=o.next();a instanceof vc?this.boundablesAtLevel(n,a,i):(xu.isTrue(a instanceof dc),-1===n&&i.add(a))}return null}},wc.prototype.query=function(){if(1===arguments.length){var t=arguments[0];this.build();var e=new Gu;return this.isEmpty()?e:(this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.query(t,this._root,e),e)}if(2===arguments.length){var n=arguments[0],r=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),n)&&this.query(n,this._root,r)}else if(3===arguments.length)if(Ks(arguments[2],gc)&&arguments[0]instanceof Object&&arguments[1]instanceof vc)for(var i=arguments[0],o=arguments[2],a=arguments[1].getChildBoundables(),s=0;s<a.size();s++){var u=a.get(s);this.getIntersectsOp().intersects(u.getBounds(),i)&&(u instanceof vc?this.query(i,u,o):u instanceof dc?o.visitItem(u.getItem()):xu.shouldNeverReachHere())}else if(Ks(arguments[2],Uu)&&arguments[0]instanceof Object&&arguments[1]instanceof vc)for(var l=arguments[0],c=arguments[2],h=arguments[1].getChildBoundables(),p=0;p<h.size();p++){var f=h.get(p);this.getIntersectsOp().intersects(f.getBounds(),l)&&(f instanceof vc?this.query(l,f,c):f instanceof dc?c.add(f.getItem()):xu.shouldNeverReachHere())}},wc.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},wc.prototype.getRoot=function(){return this.build(),this._root},wc.prototype.remove=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=this.removeItem(r,i);if(o)return!0;for(var a=null,s=r.getChildBoundables().iterator();s.hasNext();){var u=s.next();if(this.getIntersectsOp().intersects(u.getBounds(),n)&&u instanceof vc&&(o=this.remove(n,u,i))){a=u;break}}return null!==a&&a.getChildBoundables().isEmpty()&&r.getChildBoundables().remove(a),o}},wc.prototype.createHigherLevels=function(t,e){xu.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)},wc.prototype.depth=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();if(n instanceof vc){var r=this.depth(n);r>t&&(t=r)}}return t+1}},wc.prototype.createParentBoundables=function(t,e){xu.isTrue(!t.isEmpty());var n=new Gu;n.add(this.createNode(e));var r=new Gu(t);bc.sort(r,this.getComparator());for(var i=r.iterator();i.hasNext();){var o=i.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(e)),this.lastNode(n).addChildBoundable(o)}return n},wc.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},wc.prototype.interfaces_=function(){return[mi]},wc.prototype.getClass=function(){return wc},wc.compareDoubles=function(t,e){return t>e?1:t<e?-1:0},Ec.IntersectsOp.get=function(){return Cc},Ec.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},Ec.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(wc,Ec);var Cc=function(){},Sc=function(){};Sc.prototype.distance=function(t,e){},Sc.prototype.interfaces_=function(){return[]},Sc.prototype.getClass=function(){return Sc};var Ic=function(t){function e(n){t.call(this,n=n||e.DEFAULT_NODE_CAPACITY)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return e.prototype.createParentBoundablesFromVerticalSlices=function(t,e){xu.isTrue(t.length>0);for(var n=new Gu,r=0;r<t.length;r++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[r],e));return n},e.prototype.createNode=function(t){return new Tc(t)},e.prototype.size=function(){return 0===arguments.length?t.prototype.size.call(this):t.prototype.size.apply(this,arguments)},e.prototype.insert=function(){if(2!==arguments.length)return t.prototype.insert.apply(this,arguments);var e=arguments[0],n=arguments[1];if(e.isNull())return null;t.prototype.insert.call(this,e,n)},e.prototype.getIntersectsOp=function(){return e.intersectsOp},e.prototype.verticalSlices=function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),r=new Array(e).fill(null),i=t.iterator(),o=0;o<e;o++){r[o]=new Gu;for(var a=0;i.hasNext()&&a<n;){var s=i.next();r[o].add(s),a++}}return r},e.prototype.query=function(){if(1===arguments.length)return t.prototype.query.call(this,arguments[0]);2===arguments.length?t.prototype.query.call(this,arguments[0],arguments[1]):3===arguments.length&&(Ks(arguments[2],gc)&&arguments[0]instanceof Object&&arguments[1]instanceof vc?t.prototype.query.call(this,arguments[0],arguments[1],arguments[2]):Ks(arguments[2],Uu)&&arguments[0]instanceof Object&&arguments[1]instanceof vc&&t.prototype.query.call(this,arguments[0],arguments[1],arguments[2]))},e.prototype.getComparator=function(){return e.yComparator},e.prototype.createParentBoundablesFromVerticalSlice=function(e,n){return t.prototype.createParentBoundables.call(this,e,n)},e.prototype.remove=function(){return 2===arguments.length?t.prototype.remove.call(this,arguments[0],arguments[1]):t.prototype.remove.apply(this,arguments)},e.prototype.depth=function(){return 0===arguments.length?t.prototype.depth.call(this):t.prototype.depth.apply(this,arguments)},e.prototype.createParentBoundables=function(t,n){xu.isTrue(!t.isEmpty());var r=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),i=new Gu(t);bc.sort(i,e.xComparator);var o=this.verticalSlices(i,Math.trunc(Math.ceil(Math.sqrt(r))));return this.createParentBoundablesFromVerticalSlices(o,n)},e.prototype.nearestNeighbour=function(){if(1===arguments.length){if(Ks(arguments[0],Sc)){var t=arguments[0],n=new xc(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(n)}if(arguments[0]instanceof xc)return this.nearestNeighbour(arguments[0],js.POSITIVE_INFINITY)}else if(2===arguments.length){if(arguments[0]instanceof e&&Ks(arguments[1],Sc)){var r=arguments[0],i=arguments[1],o=new xc(this.getRoot(),r.getRoot(),i);return this.nearestNeighbour(o)}if(arguments[0]instanceof xc&&"number"==typeof arguments[1]){var a=arguments[0],s=arguments[1],u=null,l=new mc;for(l.add(a);!l.isEmpty()&&s>0;){var c=l.poll(),h=c.getDistance();if(h>=s)break;c.isLeaves()?(s=h,u=c):c.expandToQueue(l,s)}return[u.getBoundable(0).getItem(),u.getBoundable(1).getItem()]}}else if(3===arguments.length){var p=arguments[2],f=new dc(arguments[0],arguments[1]),d=new xc(this.getRoot(),f,p);return this.nearestNeighbour(d)[0]}},e.prototype.interfaces_=function(){return[yc,mi]},e.prototype.getClass=function(){return e},e.centreX=function(t){return e.avg(t.getMinX(),t.getMaxX())},e.avg=function(t,e){return(t+e)/2},e.centreY=function(t){return e.avg(t.getMinY(),t.getMaxY())},n.STRtreeNode.get=function(){return Tc},n.serialVersionUID.get=function(){return 0x39920f7d5f261e0},n.xComparator.get=function(){return{interfaces_:function(){return[Us]},compare:function(n,r){return t.compareDoubles(e.centreX(n.getBounds()),e.centreX(r.getBounds()))}}},n.yComparator.get=function(){return{interfaces_:function(){return[Us]},compare:function(n,r){return t.compareDoubles(e.centreY(n.getBounds()),e.centreY(r.getBounds()))}}},n.intersectsOp.get=function(){return{interfaces_:function(){return[t.IntersectsOp]},intersects:function(t,e){return t.intersects(e)}}},n.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(e,n),e}(wc),Tc=function(t){function e(){t.call(this,arguments[0])}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.computeBounds=function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();null===t?t=new pu(n.getBounds()):t.expandToInclude(n.getBounds())}return t},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(vc),kc=function(){};kc.prototype.interfaces_=function(){return[]},kc.prototype.getClass=function(){return kc},kc.relativeSign=function(t,e){return t<e?-1:t>e?1:0},kc.compare=function(t,e,n){if(e.equals2D(n))return 0;var r=kc.relativeSign(e.x,n.x),i=kc.relativeSign(e.y,n.y);switch(t){case 0:return kc.compareValue(r,i);case 1:return kc.compareValue(i,r);case 2:return kc.compareValue(i,-r);case 3:return kc.compareValue(-r,i);case 4:return kc.compareValue(-r,-i);case 5:return kc.compareValue(-i,-r);case 6:return kc.compareValue(-i,r);case 7:return kc.compareValue(r,-i)}return xu.shouldNeverReachHere("invalid octant value"),0},kc.compareValue=function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0};var Oc=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._segString=t,this.coord=new Gs(e),this.segmentIndex=n,this._segmentOctant=r,this._isInterior=!e.equals2D(t.getCoordinate(n))};Oc.prototype.getCoordinate=function(){return this.coord},Oc.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},Oc.prototype.compareTo=function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:kc.compare(this._segmentOctant,this.coord,e.coord)},Oc.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},Oc.prototype.isInterior=function(){return this._isInterior},Oc.prototype.interfaces_=function(){return[Vs]},Oc.prototype.getClass=function(){return Oc};var Pc=function(){this._nodeMap=new Ci,this._edge=null,this._edge=arguments[0]};Pc.prototype.getSplitCoordinates=function(){var t=new Hu;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next();this.addEdgeCoordinates(n,r,t),n=r}return t.toCoordinateArray()},Pc.prototype.addCollapsedNodes=function(){var t=new Gu;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this._edge.getCoordinate(n),n)}},Pc.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},Pc.prototype.findCollapsesFromExistingVertices=function(t){for(var e=0;e<this._edge.size()-2;e++){var n=this._edge.getCoordinate(e),r=this._edge.getCoordinate(e+2);n.equals2D(r)&&t.add(new tu(e+1))}},Pc.prototype.addEdgeCoordinates=function(t,e,n){var r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);n.add(new Gs(t.coord),!1);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)n.add(this._edge.getCoordinate(o));i&&n.add(new Gs(e.coord))},Pc.prototype.iterator=function(){return this._nodeMap.values().iterator()},Pc.prototype.addSplitEdges=function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},Pc.prototype.findCollapseIndex=function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var r=e.segmentIndex-t.segmentIndex;return e.isInterior()||r--,1===r&&(n[0]=t.segmentIndex+1,!0)},Pc.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=new Array(1).fill(null),n=this.iterator(),r=n.next();n.hasNext();){var i=n.next();this.findCollapseIndex(r,i,e)&&t.add(new tu(e[0])),r=i}},Pc.prototype.getEdge=function(){return this._edge},Pc.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)},Pc.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),a=0;o[a++]=new Gs(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)o[a++]=this._edge.getCoordinate(s);return i&&(o[a]=new Gs(e.coord)),new Lc(o,this._edge.getData())},Pc.prototype.add=function(t,e){var n=new Oc(this._edge,t,e,this._edge.getSegmentOctant(e)),r=this._nodeMap.get(n);return null!==r?(xu.isTrue(r.coord.equals2D(t),"Found equal nodes with different coordinates"),r):(this._nodeMap.put(n,n),n)},Pc.prototype.checkSplitEdgesCorrectness=function(t){var e=this._edge.getCoordinates(),n=t.get(0).getCoordinate(0);if(!n.equals2D(e[0]))throw new _u("bad split edge start point at "+n);var r=t.get(t.size()-1).getCoordinates(),i=r[r.length-1];if(!i.equals2D(e[e.length-1]))throw new _u("bad split edge end point at "+i)},Pc.prototype.interfaces_=function(){return[]},Pc.prototype.getClass=function(){return Pc};var Ac=function(){};Ac.prototype.interfaces_=function(){return[]},Ac.prototype.getClass=function(){return Ac},Ac.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new zs("Cannot compute the octant for point ( "+t+", "+e+" )");var n=Math.abs(t),r=Math.abs(e);return t>=0?e>=0?n>=r?0:1:n>=r?7:6:e>=0?n>=r?3:2:n>=r?4:5}if(arguments[0]instanceof Gs&&arguments[1]instanceof Gs){var i=arguments[0],o=arguments[1],a=o.x-i.x,s=o.y-i.y;if(0===a&&0===s)throw new zs("Cannot compute the octant for two identical points "+i);return Ac.octant(a,s)}};var Mc=function(){};Mc.prototype.getCoordinates=function(){},Mc.prototype.size=function(){},Mc.prototype.getCoordinate=function(t){},Mc.prototype.isClosed=function(){},Mc.prototype.setData=function(t){},Mc.prototype.getData=function(){},Mc.prototype.interfaces_=function(){return[]},Mc.prototype.getClass=function(){return Mc};var Rc=function(){};Rc.prototype.addIntersection=function(t,e){},Rc.prototype.interfaces_=function(){return[Mc]},Rc.prototype.getClass=function(){return Rc};var Lc=function(){this._nodeList=new Pc(this),this._pts=null,this._data=null;var t=arguments[1];this._pts=arguments[0],this._data=t};Lc.prototype.getCoordinates=function(){return this._pts},Lc.prototype.size=function(){return this._pts.length},Lc.prototype.getCoordinate=function(t){return this._pts[t]},Lc.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Lc.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},Lc.prototype.setData=function(t){this._data=t},Lc.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:Ac.octant(t,e)},Lc.prototype.getData=function(){return this._data},Lc.prototype.addIntersection=function(){if(2===arguments.length)this.addIntersectionNode(arguments[0],arguments[1]);else if(4===arguments.length){var t=arguments[1],e=new Gs(arguments[0].getIntersection(arguments[3]));this.addIntersection(e,t)}},Lc.prototype.toString=function(){return vu.toLineString(new Ol(this._pts))},Lc.prototype.getNodeList=function(){return this._nodeList},Lc.prototype.addIntersectionNode=function(t,e){var n=e,r=n+1;return r<this._pts.length&&t.equals2D(this._pts[r])&&(n=r),this._nodeList.add(t,n)},Lc.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},Lc.prototype.interfaces_=function(){return[Rc]},Lc.prototype.getClass=function(){return Lc},Lc.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new Gu;return Lc.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var n=arguments[1],r=arguments[0].iterator();r.hasNext();)r.next().getNodeList().addSplitEdges(n)};var Nc=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new Gs,this.p1=new Gs;else if(1===arguments.length){var t=arguments[0];this.p0=new Gs(t.p0),this.p1=new Gs(t.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var e=arguments[2],n=arguments[3];this.p0=new Gs(arguments[0],arguments[1]),this.p1=new Gs(e,n)}},Dc={serialVersionUID:{configurable:!0}};Nc.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},Nc.prototype.orientationIndex=function(){if(arguments[0]instanceof Nc){var t=arguments[0],e=Tu.orientationIndex(this.p0,this.p1,t.p0),n=Tu.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&n>=0?Math.max(e,n):e<=0&&n<=0?Math.max(e,n):0}if(arguments[0]instanceof Gs)return Tu.orientationIndex(this.p0,this.p1,arguments[0])},Nc.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])},Nc.prototype.isVertical=function(){return this.p0.x===this.p1.x},Nc.prototype.equals=function(t){if(!(t instanceof Nc))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},Nc.prototype.intersection=function(t){var e=new Cu;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},Nc.prototype.project=function(){if(arguments[0]instanceof Gs){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new Gs(t);var e=this.projectionFactor(t),n=new Gs;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof Nc){var r=arguments[0],i=this.projectionFactor(r.p0),o=this.projectionFactor(r.p1);if(i>=1&&o>=1)return null;if(i<=0&&o<=0)return null;var a=this.project(r.p0);i<0&&(a=this.p0),i>1&&(a=this.p1);var s=this.project(r.p1);return o<0&&(s=this.p0),o>1&&(s=this.p1),new Nc(a,s)}},Nc.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},Nc.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},Nc.prototype.getCoordinate=function(t){return 0===t?this.p0:this.p1},Nc.prototype.distancePerpendicular=function(t){return Tu.distancePointLinePerpendicular(t,this.p0,this.p1)},Nc.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},Nc.prototype.midPoint=function(){return Nc.midPoint(this.p0,this.p1)},Nc.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,r=e*e+n*n;return r<=0?js.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/r},Nc.prototype.closestPoints=function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),r=js.MAX_VALUE,i=null,o=this.closestPoint(t.p0);r=o.distance(t.p0),n[0]=o,n[1]=t.p0;var a=this.closestPoint(t.p1);(i=a.distance(t.p1))<r&&(r=i,n[0]=a,n[1]=t.p1);var s=t.closestPoint(this.p0);(i=s.distance(this.p0))<r&&(r=i,n[0]=this.p0,n[1]=s);var u=t.closestPoint(this.p1);return(i=u.distance(this.p1))<r&&(r=i,n[0]=this.p1,n[1]=u),n},Nc.prototype.closestPoint=function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},Nc.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},Nc.prototype.getLength=function(){return this.p0.distance(this.p1)},Nc.prototype.compareTo=function(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)},Nc.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t},Nc.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)},Nc.prototype.lineIntersection=function(t){try{return hu.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof lu))throw t}return null},Nc.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},Nc.prototype.pointAlongOffset=function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),r=this.p0.y+t*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,a=Math.sqrt(i*i+o*o),s=0,u=0;if(0!==e){if(a<=0)throw new Error("Cannot compute offset from zero-length line segment");s=e*i/a,u=e*o/a}return new Gs(n-u,r+s)},Nc.prototype.setCoordinates=function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}},Nc.prototype.segmentFraction=function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||js.isNaN(e))&&(e=1),e},Nc.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},Nc.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},Nc.prototype.distance=function(){if(arguments[0]instanceof Nc){var t=arguments[0];return Tu.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof Gs)return Tu.distancePointLine(arguments[0],this.p0,this.p1)},Nc.prototype.pointAlong=function(t){var e=new Gs;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},Nc.prototype.hashCode=function(){var t=js.doubleToLongBits(this.p0.x);t^=31*js.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=js.doubleToLongBits(this.p1.x);return n^=31*js.doubleToLongBits(this.p1.y),e^Math.trunc(n)^Math.trunc(n>>32)},Nc.prototype.interfaces_=function(){return[Vs,mi]},Nc.prototype.getClass=function(){return Nc},Nc.midPoint=function(t,e){return new Gs((t.x+e.x)/2,(t.y+e.y)/2)},Dc.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(Nc,Dc);var Fc=function(){this.tempEnv1=new pu,this.tempEnv2=new pu,this._overlapSeg1=new Nc,this._overlapSeg2=new Nc};Fc.prototype.overlap=function(){if(2===arguments.length);else if(4===arguments.length){var t=arguments[2],e=arguments[3];arguments[0].getLineSegment(arguments[1],this._overlapSeg1),t.getLineSegment(e,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},Fc.prototype.interfaces_=function(){return[]},Fc.prototype.getClass=function(){return Fc};var zc=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[1],e=arguments[2],n=arguments[3];this._pts=arguments[0],this._start=t,this._end=e,this._context=n};zc.prototype.getLineSegment=function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]},zc.prototype.computeSelect=function(t,e,n,r){if(r.tempEnv1.init(this._pts[e],this._pts[n]),n-e==1)return r.select(this,e),null;if(!t.intersects(r.tempEnv1))return null;var i=Math.trunc((e+n)/2);e<i&&this.computeSelect(t,e,i,r),i<n&&this.computeSelect(t,i,n,r)},zc.prototype.getCoordinates=function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,n=this._start;n<=this._end;n++)t[e++]=this._pts[n];return t},zc.prototype.computeOverlaps=function(t,e){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,e)},zc.prototype.setId=function(t){this._id=t},zc.prototype.select=function(t,e){this.computeSelect(t,this._start,this._end,e)},zc.prototype.getEnvelope=function(){return null===this._env&&(this._env=new pu(this._pts[this._start],this._pts[this._end])),this._env},zc.prototype.getEndIndex=function(){return this._end},zc.prototype.getStartIndex=function(){return this._start},zc.prototype.getContext=function(){return this._context},zc.prototype.getId=function(){return this._id},zc.prototype.computeOverlapsInternal=function(t,e,n,r,i,o){var a=this._pts[t],s=this._pts[e],u=n._pts[r],l=n._pts[i];if(e-t==1&&i-r==1)return o.overlap(this,t,n,r),null;if(o.tempEnv1.init(a,s),o.tempEnv2.init(u,l),!o.tempEnv1.intersects(o.tempEnv2))return null;var c=Math.trunc((t+e)/2),h=Math.trunc((r+i)/2);t<c&&(r<h&&this.computeOverlapsInternal(t,c,n,r,h,o),h<i&&this.computeOverlapsInternal(t,c,n,h,i,o)),c<e&&(r<h&&this.computeOverlapsInternal(c,e,n,r,h,o),h<i&&this.computeOverlapsInternal(c,e,n,h,i,o))},zc.prototype.interfaces_=function(){return[]},zc.prototype.getClass=function(){return zc};var jc=function(){};jc.prototype.interfaces_=function(){return[]},jc.prototype.getClass=function(){return jc},jc.getChainStartIndices=function(t){var e=0,n=new Gu;n.add(new tu(e));do{var r=jc.findChainEnd(t,e);n.add(new tu(r)),e=r}while(e<t.length-1);return jc.toIntArray(n)},jc.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var r=ac.quadrant(t[n],t[n+1]),i=e+1;i<t.length&&(t[i-1].equals2D(t[i])||ac.quadrant(t[i-1],t[i])===r);)i++;return i-1},jc.getChains=function(){if(1===arguments.length)return jc.getChains(arguments[0],null);if(2===arguments.length){for(var t=arguments[0],e=arguments[1],n=new Gu,r=jc.getChainStartIndices(t),i=0;i<r.length-1;i++){var o=new zc(t,r[i],r[i+1],e);n.add(o)}return n}},jc.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var Bc=function(){};Bc.prototype.computeNodes=function(t){},Bc.prototype.getNodedSubstrings=function(){},Bc.prototype.interfaces_=function(){return[]},Bc.prototype.getClass=function(){return Bc};var Vc=function(){this._segInt=null,0===arguments.length||1===arguments.length&&this.setSegmentIntersector(arguments[0])};Vc.prototype.setSegmentIntersector=function(t){this._segInt=t},Vc.prototype.interfaces_=function(){return[Bc]},Vc.prototype.getClass=function(){return Vc};var qc=function(t){function e(e){e?t.call(this,e):t.call(this),this._monoChains=new Gu,this._index=new Ic,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={SegmentOverlapAction:{configurable:!0}};return e.prototype.getMonotoneChains=function(){return this._monoChains},e.prototype.getNodedSubstrings=function(){return Lc.getNodedSubstrings(this._nodedSegStrings)},e.prototype.getIndex=function(){return this._index},e.prototype.add=function(t){for(var e=jc.getChains(t.getCoordinates(),t).iterator();e.hasNext();){var n=e.next();n.setId(this._idCounter++),this._index.insert(n.getEnvelope(),n),this._monoChains.add(n)}},e.prototype.computeNodes=function(t){this._nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()},e.prototype.intersectChains=function(){for(var t=new Uc(this._segInt),e=this._monoChains.iterator();e.hasNext();)for(var n=e.next(),r=this._index.query(n.getEnvelope()).iterator();r.hasNext();){var i=r.next();if(i.getId()>n.getId()&&(n.computeOverlaps(i,t),this._nOverlaps++),this._segInt.isDone())return null}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.SegmentOverlapAction.get=function(){return Uc},Object.defineProperties(e,n),e}(Vc),Uc=function(t){function e(){t.call(this),this._si=null,this._si=arguments[0]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.overlap=function(){if(4!==arguments.length)return t.prototype.overlap.apply(this,arguments);var e=arguments[1],n=arguments[2],r=arguments[3],i=arguments[0].getContext(),o=n.getContext();this._si.processIntersections(i,e,o,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Fc),Gc=function t(){if(this._quadrantSegments=t.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=t.CAP_ROUND,this._joinStyle=t.JOIN_ROUND,this._mitreLimit=t.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=t.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length)this.setQuadrantSegments(arguments[0]);else if(2===arguments.length){var e=arguments[1];this.setQuadrantSegments(arguments[0]),this.setEndCapStyle(e)}else if(4===arguments.length){var n=arguments[1],r=arguments[2],i=arguments[3];this.setQuadrantSegments(arguments[0]),this.setEndCapStyle(n),this.setJoinStyle(r),this.setMitreLimit(i)}},Xc={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};Gc.prototype.getEndCapStyle=function(){return this._endCapStyle},Gc.prototype.isSingleSided=function(){return this._isSingleSided},Gc.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=Gc.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=Gc.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==Gc.JOIN_ROUND&&(this._quadrantSegments=Gc.DEFAULT_QUADRANT_SEGMENTS)},Gc.prototype.getJoinStyle=function(){return this._joinStyle},Gc.prototype.setJoinStyle=function(t){this._joinStyle=t},Gc.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t},Gc.prototype.getSimplifyFactor=function(){return this._simplifyFactor},Gc.prototype.getQuadrantSegments=function(){return this._quadrantSegments},Gc.prototype.setEndCapStyle=function(t){this._endCapStyle=t},Gc.prototype.getMitreLimit=function(){return this._mitreLimit},Gc.prototype.setMitreLimit=function(t){this._mitreLimit=t},Gc.prototype.setSingleSided=function(t){this._isSingleSided=t},Gc.prototype.interfaces_=function(){return[]},Gc.prototype.getClass=function(){return Gc},Gc.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},Xc.CAP_ROUND.get=function(){return 1},Xc.CAP_FLAT.get=function(){return 2},Xc.CAP_SQUARE.get=function(){return 3},Xc.JOIN_ROUND.get=function(){return 1},Xc.JOIN_MITRE.get=function(){return 2},Xc.JOIN_BEVEL.get=function(){return 3},Xc.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},Xc.DEFAULT_MITRE_LIMIT.get=function(){return 5},Xc.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(Gc,Xc);var Hc=function(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=Tu.COUNTERCLOCKWISE,this._inputLine=t||null},Yc={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};Hc.prototype.isDeletable=function(t,e,n,r){var i=this._inputLine[t],o=this._inputLine[e],a=this._inputLine[n];return!!this.isConcave(i,o,a)&&!!this.isShallow(i,o,a,r)&&this.isShallowSampled(i,o,t,n,r)},Hc.prototype.deleteShallowConcavities=function(){for(var t=1,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e),r=!1;n<this._inputLine.length;){var i=!1;this.isDeletable(t,e,n,this._distanceTol)&&(this._isDeleted[e]=Hc.DELETE,i=!0,r=!0),e=this.findNextNonDeletedIndex(t=i?n:e),n=this.findNextNonDeletedIndex(e)}return r},Hc.prototype.isShallowConcavity=function(t,e,n,r){return Tu.computeOrientation(t,e,n)===this._angleOrientation&&Tu.distancePointLine(e,t,n)<r},Hc.prototype.isShallowSampled=function(t,e,n,r,i){var o=Math.trunc((r-n)/Hc.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var a=n;a<r;a+=o)if(!this.isShallow(t,e,this._inputLine[a],i))return!1;return!0},Hc.prototype.isConcave=function(t,e,n){return Tu.computeOrientation(t,e,n)===this._angleOrientation},Hc.prototype.simplify=function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=Tu.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()},Hc.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===Hc.DELETE;)e++;return e},Hc.prototype.isShallow=function(t,e,n,r){return Tu.distancePointLine(e,t,n)<r},Hc.prototype.collapseLine=function(){for(var t=new Hu,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==Hc.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()},Hc.prototype.interfaces_=function(){return[]},Hc.prototype.getClass=function(){return Hc},Hc.simplify=function(t,e){return new Hc(t).simplify(e)},Yc.INIT.get=function(){return 0},Yc.DELETE.get=function(){return 1},Yc.KEEP.get=function(){return 1},Yc.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(Hc,Yc);var Zc=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new Gu},Wc={COORDINATE_ARRAY_TYPE:{configurable:!0}};Zc.prototype.getCoordinates=function(){return this._ptList.toArray(Zc.COORDINATE_ARRAY_TYPE)},Zc.prototype.setPrecisionModel=function(t){this._precisionModel=t},Zc.prototype.addPt=function(t){var e=new Gs(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)},Zc.prototype.revere=function(){},Zc.prototype.addPts=function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var r=t.length-1;r>=0;r--)this.addPt(t[r])},Zc.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance},Zc.prototype.toString=function(){return(new zl).createLineString(this.getCoordinates()).toString()},Zc.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new Gs(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)},Zc.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t},Zc.prototype.interfaces_=function(){return[]},Zc.prototype.getClass=function(){return Zc},Wc.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(Zc,Wc);var Kc=function(){},Jc={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};Kc.prototype.interfaces_=function(){return[]},Kc.prototype.getClass=function(){return Kc},Kc.toDegrees=function(t){return 180*t/Math.PI},Kc.normalize=function(t){for(;t>Math.PI;)t-=Kc.PI_TIMES_2;for(;t<=-Math.PI;)t+=Kc.PI_TIMES_2;return t},Kc.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return Math.atan2(n.y-e.y,n.x-e.x)}},Kc.isAcute=function(t,e,n){return(t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y)>0},Kc.isObtuse=function(t,e,n){return(t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y)<0},Kc.interiorAngle=function(t,e,n){var r=Kc.angle(e,t),i=Kc.angle(e,n);return Math.abs(i-r)},Kc.normalizePositive=function(t){if(t<0){for(;t<0;)t+=Kc.PI_TIMES_2;t>=Kc.PI_TIMES_2&&(t=0)}else{for(;t>=Kc.PI_TIMES_2;)t-=Kc.PI_TIMES_2;t<0&&(t=0)}return t},Kc.angleBetween=function(t,e,n){var r=Kc.angle(e,t),i=Kc.angle(e,n);return Kc.diff(r,i)},Kc.diff=function(t,e){var n=null;return(n=t<e?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n},Kc.toRadians=function(t){return t*Math.PI/180},Kc.getTurn=function(t,e){var n=Math.sin(e-t);return n>0?Kc.COUNTERCLOCKWISE:n<0?Kc.CLOCKWISE:Kc.NONE},Kc.angleBetweenOriented=function(t,e,n){var r=Kc.angle(e,t),i=Kc.angle(e,n)-r;return i<=-Math.PI?i+Kc.PI_TIMES_2:i>Math.PI?i-Kc.PI_TIMES_2:i},Jc.PI_TIMES_2.get=function(){return 2*Math.PI},Jc.PI_OVER_2.get=function(){return Math.PI/2},Jc.PI_OVER_4.get=function(){return Math.PI/4},Jc.COUNTERCLOCKWISE.get=function(){return Tu.COUNTERCLOCKWISE},Jc.CLOCKWISE.get=function(){return Tu.CLOCKWISE},Jc.NONE.get=function(){return Tu.COLLINEAR},Object.defineProperties(Kc,Jc);var Qc=function t(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new Nc,this._seg1=new Nc,this._offset0=new Nc,this._offset1=new Nc,this._side=0,this._hasNarrowConcaveAngle=!1;var e=arguments[1],n=arguments[2];this._precisionModel=arguments[0],this._bufParams=e,this._li=new Cu,this._filletAngleQuantum=Math.PI/2/e.getQuadrantSegments(),e.getQuadrantSegments()>=8&&e.getJoinStyle()===Gc.JOIN_ROUND&&(this._closingSegLengthFactor=t.MAX_CLOSING_SEG_LEN_FACTOR),this.init(n)},$c={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};Qc.prototype.addNextSegment=function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=Tu.computeOrientation(this._s0,this._s1,this._s2),r=n===Tu.CLOCKWISE&&this._side===Hl.LEFT||n===Tu.COUNTERCLOCKWISE&&this._side===Hl.RIGHT;0===n?this.addCollinear(e):r?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)},Qc.prototype.addLineEndCap=function(t,e){var n=new Nc(t,e),r=new Nc;this.computeOffsetSegment(n,Hl.LEFT,this._distance,r);var i=new Nc;this.computeOffsetSegment(n,Hl.RIGHT,this._distance,i);var o=Math.atan2(e.y-t.y,e.x-t.x);switch(this._bufParams.getEndCapStyle()){case Gc.CAP_ROUND:this._segList.addPt(r.p1),this.addFilletArc(e,o+Math.PI/2,o-Math.PI/2,Tu.CLOCKWISE,this._distance),this._segList.addPt(i.p1);break;case Gc.CAP_FLAT:this._segList.addPt(r.p1),this._segList.addPt(i.p1);break;case Gc.CAP_SQUARE:var a=new Gs;a.x=Math.abs(this._distance)*Math.cos(o),a.y=Math.abs(this._distance)*Math.sin(o);var s=new Gs(r.p1.x+a.x,r.p1.y+a.y),u=new Gs(i.p1.x+a.x,i.p1.y+a.y);this._segList.addPt(s),this._segList.addPt(u)}},Qc.prototype.getCoordinates=function(){return this._segList.getCoordinates()},Qc.prototype.addMitreJoin=function(t,e,n,r){var i=!0,o=null;try{o=hu.intersection(e.p0,e.p1,n.p0,n.p1),(r<=0?1:o.distance(t)/Math.abs(r))>this._bufParams.getMitreLimit()&&(i=!1)}catch(t){if(!(t instanceof lu))throw t;o=new Gs(0,0),i=!1}i?this._segList.addPt(o):this.addLimitedMitreJoin(e,n,r,this._bufParams.getMitreLimit())},Qc.prototype.addFilletCorner=function(t,e,n,r,i){var o=Math.atan2(e.y-t.y,e.x-t.x),a=Math.atan2(n.y-t.y,n.x-t.x);r===Tu.CLOCKWISE?o<=a&&(o+=2*Math.PI):o>=a&&(o-=2*Math.PI),this._segList.addPt(e),this.addFilletArc(t,o,a,r,i),this._segList.addPt(n)},Qc.prototype.addOutsideTurn=function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*Qc.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===Gc.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===Gc.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))},Qc.prototype.createSquare=function(t){this._segList.addPt(new Gs(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new Gs(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new Gs(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new Gs(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()},Qc.prototype.addSegments=function(t,e){this._segList.addPts(t,e)},Qc.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},Qc.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},Qc.prototype.initSideSegments=function(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)},Qc.prototype.addLimitedMitreJoin=function(t,e,n,r){var i=this._seg0.p1,o=Kc.angle(i,this._seg0.p0),a=Kc.angleBetweenOriented(this._seg0.p0,i,this._seg1.p1)/2,s=Kc.normalize(o+a),u=Kc.normalize(s+Math.PI),l=r*n,c=n-l*Math.abs(Math.sin(a)),h=i.x+l*Math.cos(u),p=i.y+l*Math.sin(u),f=new Gs(h,p),d=new Nc(i,f),m=d.pointAlongOffset(1,c),g=d.pointAlongOffset(1,-c);this._side===Hl.LEFT?(this._segList.addPt(m),this._segList.addPt(g)):(this._segList.addPt(g),this._segList.addPt(m))},Qc.prototype.computeOffsetSegment=function(t,e,n,r){var i=e===Hl.LEFT?1:-1,o=t.p1.x-t.p0.x,a=t.p1.y-t.p0.y,s=Math.sqrt(o*o+a*a),u=i*n*o/s,l=i*n*a/s;r.p0.x=t.p0.x-l,r.p0.y=t.p0.y+u,r.p1.x=t.p1.x-l,r.p1.y=t.p1.y+u},Qc.prototype.addFilletArc=function(t,e,n,r,i){var o=r===Tu.CLOCKWISE?-1:1,a=Math.abs(e-n),s=Math.trunc(a/this._filletAngleQuantum+.5);if(s<1)return null;for(var u=a/s,l=0,c=new Gs;l<a;){var h=e+o*l;c.x=t.x+i*Math.cos(h),c.y=t.y+i*Math.sin(h),this._segList.addPt(c),l+=u}},Qc.prototype.addInsideTurn=function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*Qc.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new Gs((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var r=new Gs((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},Qc.prototype.createCircle=function(t){var e=new Gs(t.x+this._distance,t.y);this._segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},Qc.prototype.addBevelJoin=function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)},Qc.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Zc,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*Qc.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},Qc.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===Gc.JOIN_BEVEL||this._bufParams.getJoinStyle()===Gc.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,Tu.CLOCKWISE,this._distance))},Qc.prototype.closeRing=function(){this._segList.closeRing()},Qc.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},Qc.prototype.interfaces_=function(){return[]},Qc.prototype.getClass=function(){return Qc},$c.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},$c.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},$c.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},$c.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(Qc,$c);var th=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[1];this._precisionModel=arguments[0],this._bufParams=t};th.prototype.getOffsetCurve=function(t,e){if(this._distance=e,0===e)return null;var n=e<0,r=Math.abs(e),i=this.getSegGen(r);t.length<=1?this.computePointCurve(t[0],i):this.computeOffsetCurve(t,n,i);var o=i.getCoordinates();return n&&Yu.reverse(o),o},th.prototype.computeSingleSidedBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){n.addSegments(t,!0);var i=Hc.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Hl.LEFT),n.addFirstSegment();for(var a=o-2;a>=0;a--)n.addNextSegment(i[a],!0)}else{n.addSegments(t,!1);var s=Hc.simplify(t,r),u=s.length-1;n.initSideSegments(s[0],s[1],Hl.LEFT),n.addFirstSegment();for(var l=2;l<=u;l++)n.addNextSegment(s[l],!0)}n.addLastSegment(),n.closeRing()},th.prototype.computeRingBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);e===Hl.RIGHT&&(r=-r);var i=Hc.simplify(t,r),o=i.length-1;n.initSideSegments(i[o-1],i[0],e);for(var a=1;a<=o;a++)n.addNextSegment(i[a],1!==a);n.closeRing()},th.prototype.computeLineBufferCurve=function(t,e){var n=this.simplifyTolerance(this._distance),r=Hc.simplify(t,n),i=r.length-1;e.initSideSegments(r[0],r[1],Hl.LEFT);for(var o=2;o<=i;o++)e.addNextSegment(r[o],!0);e.addLastSegment(),e.addLineEndCap(r[i-1],r[i]);var a=Hc.simplify(t,-n),s=a.length-1;e.initSideSegments(a[s],a[s-1],Hl.LEFT);for(var u=s-2;u>=0;u--)e.addNextSegment(a[u],!0);e.addLastSegment(),e.addLineEndCap(a[1],a[0]),e.closeRing()},th.prototype.computePointCurve=function(t,e){switch(this._bufParams.getEndCapStyle()){case Gc.CAP_ROUND:e.createCircle(t);break;case Gc.CAP_SQUARE:e.createSquare(t)}},th.prototype.getLineCurve=function(t,e){if(this._distance=e,e<0&&!this._bufParams.isSingleSided())return null;if(0===e)return null;var n=Math.abs(e),r=this.getSegGen(n);return t.length<=1?this.computePointCurve(t[0],r):this._bufParams.isSingleSided()?this.computeSingleSidedBufferCurve(t,e<0,r):this.computeLineBufferCurve(t,r),r.getCoordinates()},th.prototype.getBufferParameters=function(){return this._bufParams},th.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()},th.prototype.getRingCurve=function(t,e,n){if(this._distance=n,t.length<=2)return this.getLineCurve(t,n);if(0===n)return th.copyCoordinates(t);var r=this.getSegGen(n);return this.computeRingBufferCurve(t,e,r),r.getCoordinates()},th.prototype.computeOffsetCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){var i=Hc.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Hl.LEFT),n.addFirstSegment();for(var a=o-2;a>=0;a--)n.addNextSegment(i[a],!0)}else{var s=Hc.simplify(t,r),u=s.length-1;n.initSideSegments(s[0],s[1],Hl.LEFT),n.addFirstSegment();for(var l=2;l<=u;l++)n.addNextSegment(s[l],!0)}n.addLastSegment()},th.prototype.getSegGen=function(t){return new Qc(this._precisionModel,this._bufParams,t)},th.prototype.interfaces_=function(){return[]},th.prototype.getClass=function(){return th},th.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new Gs(t[n]);return e};var eh=function(){this._subgraphs=null,this._seg=new Nc,this._cga=new Tu,this._subgraphs=arguments[0]},nh={DepthSegment:{configurable:!0}};eh.prototype.findStabbedSegments=function(){if(1===arguments.length){for(var t=arguments[0],e=new Gu,n=this._subgraphs.iterator();n.hasNext();){var r=n.next(),i=r.getEnvelope();t.y<i.getMinY()||t.y>i.getMaxY()||this.findStabbedSegments(t,r.getDirectedEdges(),e)}return e}if(3===arguments.length)if(Ks(arguments[2],Uu)&&arguments[0]instanceof Gs&&arguments[1]instanceof lc){for(var o=arguments[0],a=arguments[1],s=arguments[2],u=a.getEdge().getCoordinates(),l=0;l<u.length-1;l++)if(this._seg.p0=u[l],this._seg.p1=u[l+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<o.x||this._seg.isHorizontal()||o.y<this._seg.p0.y||o.y>this._seg.p1.y||Tu.computeOrientation(this._seg.p0,this._seg.p1,o)===Tu.RIGHT)){var c=a.getDepth(Hl.LEFT);this._seg.p0.equals(u[l])||(c=a.getDepth(Hl.RIGHT));var h=new rh(this._seg,c);s.add(h)}}else if(Ks(arguments[2],Uu)&&arguments[0]instanceof Gs&&Ks(arguments[1],Uu))for(var p=arguments[0],f=arguments[2],d=arguments[1].iterator();d.hasNext();){var m=d.next();m.isForward()&&this.findStabbedSegments(p,m,f)}},eh.prototype.getDepth=function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:bc.min(e)._leftDepth},eh.prototype.interfaces_=function(){return[]},eh.prototype.getClass=function(){return eh},nh.DepthSegment.get=function(){return rh},Object.defineProperties(eh,nh);var rh=function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[1];this._upwardSeg=new Nc(arguments[0]),this._leftDepth=t};rh.prototype.compareTo=function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==n?n:0!=(n=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?n:this._upwardSeg.compareTo(e._upwardSeg)},rh.prototype.compareX=function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)},rh.prototype.toString=function(){return this._upwardSeg.toString()},rh.prototype.interfaces_=function(){return[Vs]},rh.prototype.getClass=function(){return rh};var ih=function(t,e,n){this.p0=t||null,this.p1=e||null,this.p2=n||null};ih.prototype.area=function(){return ih.area(this.p0,this.p1,this.p2)},ih.prototype.signedArea=function(){return ih.signedArea(this.p0,this.p1,this.p2)},ih.prototype.interpolateZ=function(t){if(null===t)throw new zs("Supplied point is null.");return ih.interpolateZ(t,this.p0,this.p1,this.p2)},ih.prototype.longestSideLength=function(){return ih.longestSideLength(this.p0,this.p1,this.p2)},ih.prototype.isAcute=function(){return ih.isAcute(this.p0,this.p1,this.p2)},ih.prototype.circumcentre=function(){return ih.circumcentre(this.p0,this.p1,this.p2)},ih.prototype.area3D=function(){return ih.area3D(this.p0,this.p1,this.p2)},ih.prototype.centroid=function(){return ih.centroid(this.p0,this.p1,this.p2)},ih.prototype.inCentre=function(){return ih.inCentre(this.p0,this.p1,this.p2)},ih.prototype.interfaces_=function(){return[]},ih.prototype.getClass=function(){return ih},ih.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},ih.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},ih.det=function(t,e,n,r){return t*r-e*n},ih.interpolateZ=function(t,e,n,r){var i=e.x,o=e.y,a=n.x-i,s=r.x-i,u=n.y-o,l=r.y-o,c=a*l-s*u,h=t.x-i,p=t.y-o;return e.z+(l*h-s*p)/c*(n.z-e.z)+(-u*h+a*p)/c*(r.z-e.z)},ih.longestSideLength=function(t,e,n){var r=t.distance(e),i=e.distance(n),o=n.distance(t),a=r;return i>a&&(a=i),o>a&&(a=o),a},ih.isAcute=function(t,e,n){return!!Kc.isAcute(t,e,n)&&!!Kc.isAcute(e,n,t)&&!!Kc.isAcute(n,t,e)},ih.circumcentre=function(t,e,n){var r=n.x,i=n.y,o=t.x-r,a=t.y-i,s=e.x-r,u=e.y-i,l=2*ih.det(o,a,s,u),c=ih.det(a,o*o+a*a,u,s*s+u*u),h=ih.det(o,o*o+a*a,s,s*s+u*u);return new Gs(r-c/l,i+h/l)},ih.perpendicularBisector=function(t,e){var n=e.x-t.x,r=e.y-t.y,i=new hu(t.x+n/2,t.y+r/2,1),o=new hu(t.x-r+n/2,t.y+n+r/2,1);return new hu(i,o)},ih.angleBisector=function(t,e,n){var r=e.distance(t),i=r/(r+e.distance(n));return new Gs(t.x+i*(n.x-t.x),t.y+i*(n.y-t.y))},ih.area3D=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=e.z-t.z,a=n.x-t.x,s=n.y-t.y,u=n.z-t.z,l=i*u-o*s,c=o*a-r*u,h=r*s-i*a;return Math.sqrt(l*l+c*c+h*h)/2},ih.centroid=function(t,e,n){return new Gs((t.x+e.x+n.x)/3,(t.y+e.y+n.y)/3)},ih.inCentre=function(t,e,n){var r=e.distance(n),i=t.distance(n),o=t.distance(e),a=r+i+o;return new Gs((r*t.x+i*e.x+o*n.x)/a,(r*t.y+i*e.y+o*n.y)/a)};var oh=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new Gu;var t=arguments[1],e=arguments[2];this._inputGeom=arguments[0],this._distance=t,this._curveBuilder=e};oh.prototype.addPoint=function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,Zs.EXTERIOR,Zs.INTERIOR)},oh.prototype.addPolygon=function(t){var e=this._distance,n=Hl.LEFT;this._distance<0&&(e=-this._distance,n=Hl.RIGHT);var r=t.getExteriorRing(),i=Yu.removeRepeatedPoints(r.getCoordinates());if(this._distance<0&&this.isErodedCompletely(r,this._distance))return null;if(this._distance<=0&&i.length<3)return null;this.addPolygonRing(i,e,n,Zs.EXTERIOR,Zs.INTERIOR);for(var o=0;o<t.getNumInteriorRing();o++){var a=t.getInteriorRingN(o),s=Yu.removeRepeatedPoints(a.getCoordinates());this._distance>0&&this.isErodedCompletely(a,-this._distance)||this.addPolygonRing(s,e,Hl.opposite(n),Zs.INTERIOR,Zs.EXTERIOR)}},oh.prototype.isTriangleErodedCompletely=function(t,e){var n=new ih(t[0],t[1],t[2]),r=n.inCentre();return Tu.distancePointLine(r,n.p0,n.p1)<Math.abs(e)},oh.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var e=Yu.removeRepeatedPoints(t.getCoordinates()),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,Zs.EXTERIOR,Zs.INTERIOR)},oh.prototype.addCurve=function(t,e,n){if(null===t||t.length<2)return null;var r=new Lc(t,new $l(0,Zs.BOUNDARY,e,n));this._curveList.add(r)},oh.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},oh.prototype.addPolygonRing=function(t,e,n,r,i){if(0===e&&t.length<wl.MINIMUM_VALID_SIZE)return null;var o=r,a=i;t.length>=wl.MINIMUM_VALID_SIZE&&Tu.isCCW(t)&&(o=i,a=r,n=Hl.opposite(n));var s=this._curveBuilder.getRingCurve(t,n,e);this.addCurve(s,o,a)},oh.prototype.add=function(t){if(t.isEmpty())return null;t instanceof bl?this.addPolygon(t):t instanceof gl?this.addLineString(t):t instanceof vl?this.addPoint(t):t instanceof xl?this.addCollection(t):t instanceof cl?this.addCollection(t):t instanceof El?this.addCollection(t):t instanceof ll&&this.addCollection(t)},oh.prototype.isErodedCompletely=function(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(4===n.length)return this.isTriangleErodedCompletely(n,e);var r=t.getEnvelopeInternal(),i=Math.min(r.getHeight(),r.getWidth());return e<0&&2*Math.abs(e)>i},oh.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},oh.prototype.interfaces_=function(){return[]},oh.prototype.getClass=function(){return oh};var ah=function(){};ah.prototype.locate=function(t){},ah.prototype.interfaces_=function(){return[]},ah.prototype.getClass=function(){return ah};var sh=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};sh.prototype.next=function(){if(this._atStart)return this._atStart=!1,sh.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new gi;var t=this._parent.getGeometryN(this._index++);return t instanceof ll?(this._subcollectionIterator=new sh(t),this._subcollectionIterator.next()):t},sh.prototype.remove=function(){throw new Error(this.getClass().getName())},sh.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},sh.prototype.interfaces_=function(){return[qu]},sh.prototype.getClass=function(){return sh},sh.isAtomic=function(t){return!(t instanceof ll)};var uh=function(){this._geom=null,this._geom=arguments[0]};uh.prototype.locate=function(t){return uh.locate(t,this._geom)},uh.prototype.interfaces_=function(){return[ah]},uh.prototype.getClass=function(){return uh},uh.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&Tu.isPointInRing(t,e.getCoordinates())},uh.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!uh.isPointInRing(t,n))return!1;for(var r=0;r<e.getNumInteriorRing();r++){var i=e.getInteriorRingN(r);if(uh.isPointInRing(t,i))return!1}return!0},uh.containsPoint=function(t,e){if(e instanceof bl)return uh.containsPointInPolygon(t,e);if(e instanceof ll)for(var n=new sh(e);n.hasNext();){var r=n.next();if(r!==e&&uh.containsPoint(t,r))return!0}return!1},uh.locate=function(t,e){return e.isEmpty()?Zs.EXTERIOR:uh.containsPoint(t,e)?Zs.INTERIOR:Zs.EXTERIOR};var lh=function(){this._edgeMap=new Ci,this._edgeList=null,this._ptInAreaLocation=[Zs.NONE,Zs.NONE]};lh.prototype.getNextCW=function(t){this.getEdges();var e=this._edgeList.indexOf(t),n=e-1;return 0===e&&(n=this._edgeList.size()-1),this._edgeList.get(n)},lh.prototype.propagateSideLabels=function(t){for(var e=Zs.NONE,n=this.iterator();n.hasNext();){var r=n.next().getLabel();r.isArea(t)&&r.getLocation(t,Hl.LEFT)!==Zs.NONE&&(e=r.getLocation(t,Hl.LEFT))}if(e===Zs.NONE)return null;for(var i=e,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getLabel();if(s.getLocation(t,Hl.ON)===Zs.NONE&&s.setLocation(t,Hl.ON,i),s.isArea(t)){var u=s.getLocation(t,Hl.LEFT),l=s.getLocation(t,Hl.RIGHT);if(l!==Zs.NONE){if(l!==i)throw new Wl("side location conflict",a.getCoordinate());u===Zs.NONE&&xu.shouldNeverReachHere("found single null side (at "+a.getCoordinate()+")"),i=u}else xu.isTrue(s.getLocation(t,Hl.LEFT)===Zs.NONE,"found single null side"),s.setLocation(t,Hl.RIGHT,i),s.setLocation(t,Hl.LEFT,i)}}},lh.prototype.getCoordinate=function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},lh.prototype.print=function(t){cu.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();)e.next().print(t)},lh.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},lh.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,r=e.get(n).getLabel().getLocation(t,Hl.LEFT);xu.isTrue(r!==Zs.NONE,"Found unlabelled area edge");for(var i=r,o=this.iterator();o.hasNext();){var a=o.next().getLabel();xu.isTrue(a.isArea(t),"Found non-area edge");var s=a.getLocation(t,Hl.LEFT),u=a.getLocation(t,Hl.RIGHT);if(s===u)return!1;if(u!==i)return!1;i=s}return!0},lh.prototype.findIndex=function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e;return-1},lh.prototype.iterator=function(){return this.getEdges().iterator()},lh.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new Gu(this._edgeMap.values())),this._edgeList},lh.prototype.getLocation=function(t,e,n){return this._ptInAreaLocation[t]===Zs.NONE&&(this._ptInAreaLocation[t]=uh.locate(e,n[t].getGeometry())),this._ptInAreaLocation[t]},lh.prototype.toString=function(){var t=new $s;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append("\n")}return t.toString()},lh.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)},lh.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var r=n.next().getLabel(),i=0;i<2;i++)r.isLine(i)&&r.getLocation(i)===Zs.BOUNDARY&&(e[i]=!0);for(var o=this.iterator();o.hasNext();)for(var a=o.next(),s=a.getLabel(),u=0;u<2;u++)if(s.isAnyNull(u)){var l=Zs.NONE;if(e[u])l=Zs.EXTERIOR;else{var c=a.getCoordinate();l=this.getLocation(u,c,t)}s.setAllLocationsIfNull(u,l)}},lh.prototype.getDegree=function(){return this._edgeMap.size()},lh.prototype.insertEdgeEnd=function(t,e){this._edgeMap.put(t,e),this._edgeList=null},lh.prototype.interfaces_=function(){return[]},lh.prototype.getClass=function(){return lh};var ch=function(t){function e(){t.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();for(var t=null,e=null,n=this._SCANNING_FOR_INCOMING,r=0;r<this._resultAreaEdgeList.size();r++){var i=this._resultAreaEdgeList.get(r),o=i.getSym();if(i.getLabel().isArea())switch(null===t&&i.isInResult()&&(t=i),n){case this._SCANNING_FOR_INCOMING:if(!o.isInResult())continue;e=o,n=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!i.isInResult())continue;e.setNext(i),n=this._SCANNING_FOR_INCOMING}}if(n===this._LINKING_TO_OUTGOING){if(null===t)throw new Wl("no outgoing dirEdge found",this.getCoordinate());xu.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}},e.prototype.insert=function(t){this.insertEdgeEnd(t,t)},e.prototype.getRightmostEdge=function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var n=t.get(0);if(1===e)return n;var r=t.get(e-1),i=n.getQuadrant(),o=r.getQuadrant();return ac.isNorthern(i)&&ac.isNorthern(o)?n:ac.isNorthern(i)||ac.isNorthern(o)?0!==n.getDy()?n:0!==r.getDy()?r:(xu.shouldNeverReachHere("found two horizontal edges incident on node"),null):r},e.prototype.print=function(t){cu.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}},e.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new Gu;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList},e.prototype.updateLabelling=function(t){for(var e=this.iterator();e.hasNext();){var n=e.next().getLabel();n.setAllLocationsIfNull(0,t.getLocation(0)),n.setAllLocationsIfNull(1,t.getLocation(1))}},e.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var t=null,e=null,n=this._edgeList.size()-1;n>=0;n--){var r=this._edgeList.get(n),i=r.getSym();null===e&&(e=i),null!==t&&i.setNext(t),t=r}e.setNext(t)},e.prototype.computeDepths=function(){if(1===arguments.length){var t=arguments[0],e=this.findIndex(t),n=t.getDepth(Hl.LEFT),r=t.getDepth(Hl.RIGHT),i=this.computeDepths(e+1,this._edgeList.size(),n);if(this.computeDepths(0,e,i)!==r)throw new Wl("depth mismatch at "+t.getCoordinate())}else if(3===arguments.length){for(var o=arguments[1],a=arguments[2],s=arguments[0];s<o;s++){var u=this._edgeList.get(s);u.setEdgeDepths(Hl.RIGHT,a),a=u.getDepth(Hl.LEFT)}return a}},e.prototype.mergeSymLabels=function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}},e.prototype.linkMinimalDirectedEdges=function(t){for(var e=null,n=null,r=this._SCANNING_FOR_INCOMING,i=this._resultAreaEdgeList.size()-1;i>=0;i--){var o=this._resultAreaEdgeList.get(i),a=o.getSym();switch(null===e&&o.getEdgeRing()===t&&(e=o),r){case this._SCANNING_FOR_INCOMING:if(a.getEdgeRing()!==t)continue;n=a,r=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(o.getEdgeRing()!==t)continue;n.setNextMin(o),r=this._SCANNING_FOR_INCOMING}}r===this._LINKING_TO_OUTGOING&&(xu.isTrue(null!==e,"found null for first outgoing dirEdge"),xu.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),n.setNextMin(e))},e.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();)e.next().isInResult()&&t++;return t}if(1===arguments.length){for(var n=arguments[0],r=0,i=this.iterator();i.hasNext();)i.next().getEdgeRing()===n&&r++;return r}},e.prototype.getLabel=function(){return this._label},e.prototype.findCoveredLineEdges=function(){for(var t=Zs.NONE,e=this.iterator();e.hasNext();){var n=e.next(),r=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=Zs.INTERIOR;break}if(r.isInResult()){t=Zs.EXTERIOR;break}}}if(t===Zs.NONE)return null;for(var i=t,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getSym();a.isLineEdge()?a.getEdge().setCovered(i===Zs.INTERIOR):(a.isInResult()&&(i=Zs.EXTERIOR),s.isInResult()&&(i=Zs.INTERIOR))}},e.prototype.computeLabelling=function(e){t.prototype.computeLabelling.call(this,e),this._label=new $l(Zs.NONE);for(var n=this.iterator();n.hasNext();)for(var r=n.next().getEdge().getLabel(),i=0;i<2;i++){var o=r.getLocation(i);o!==Zs.INTERIOR&&o!==Zs.BOUNDARY||this._label.setLocation(i,Zs.INTERIOR)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(lh),hh=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createNode=function(t){return new ic(t,new ch)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(cc),ph=function t(){this._pts=null,this._orientation=null;var e=arguments[0];this._pts=e,this._orientation=t.orientation(e)};ph.prototype.compareTo=function(t){return ph.compareOriented(this._pts,this._orientation,t._pts,t._orientation)},ph.prototype.interfaces_=function(){return[Vs]},ph.prototype.getClass=function(){return ph},ph.orientation=function(t){return 1===Yu.increasingDirection(t)},ph.compareOriented=function(t,e,n,r){for(var i=e?1:-1,o=r?1:-1,a=e?t.length:-1,s=r?n.length:-1,u=e?0:t.length-1,l=r?0:n.length-1;;){var c=t[u].compareTo(n[l]);if(0!==c)return c;var h=(u+=i)===a,p=(l+=o)===s;if(h&&!p)return-1;if(!h&&p)return 1;if(h&&p)return 0}};var fh=function(){this._edges=new Gu,this._ocaMap=new Ci};fh.prototype.print=function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e);e>0&&t.print(","),t.print("(");for(var r=n.getCoordinates(),i=0;i<r.length;i++)i>0&&t.print(","),t.print(r[i].x+" "+r[i].y);t.println(")")}t.print(")  ")},fh.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},fh.prototype.findEdgeIndex=function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1},fh.prototype.iterator=function(){return this._edges.iterator()},fh.prototype.getEdges=function(){return this._edges},fh.prototype.get=function(t){return this._edges.get(t)},fh.prototype.findEqualEdge=function(t){var e=new ph(t.getCoordinates());return this._ocaMap.get(e)},fh.prototype.add=function(t){this._edges.add(t);var e=new ph(t.getCoordinates());this._ocaMap.put(e,t)},fh.prototype.interfaces_=function(){return[]},fh.prototype.getClass=function(){return fh};var dh=function(){};dh.prototype.processIntersections=function(t,e,n,r){},dh.prototype.isDone=function(){},dh.prototype.interfaces_=function(){return[]},dh.prototype.getClass=function(){return dh};var mh=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0,this._li=arguments[0]};mh.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(mh.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.size()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},mh.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},mh.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},mh.prototype.getLineIntersector=function(){return this._li},mh.prototype.hasProperIntersection=function(){return this._hasProper},mh.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},mh.prototype.hasIntersection=function(){return this._hasIntersection},mh.prototype.isDone=function(){return!1},mh.prototype.hasInteriorIntersection=function(){return this._hasInterior},mh.prototype.interfaces_=function(){return[dh]},mh.prototype.getClass=function(){return mh},mh.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var gh=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[1],e=arguments[2];this.coord=new Gs(arguments[0]),this.segmentIndex=t,this.dist=e};gh.prototype.getSegmentIndex=function(){return this.segmentIndex},gh.prototype.getCoordinate=function(){return this.coord},gh.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},gh.prototype.compareTo=function(t){return this.compare(t.segmentIndex,t.dist)},gh.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},gh.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},gh.prototype.getDistance=function(){return this.dist},gh.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},gh.prototype.interfaces_=function(){return[Vs]},gh.prototype.getClass=function(){return gh};var yh=function(){this._nodeMap=new Ci,this.edge=null,this.edge=arguments[0]};yh.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},yh.prototype.iterator=function(){return this._nodeMap.values().iterator()},yh.prototype.addSplitEdges=function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},yh.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},yh.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=e.dist>0||!e.coord.equals2D(this.edge.pts[e.segmentIndex]);r||n--;var i=new Array(n).fill(null),o=0;i[o++]=new Gs(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)i[o++]=this.edge.pts[a];return r&&(i[o]=e.coord),new wh(i,new $l(this.edge._label))},yh.prototype.add=function(t,e,n){var r=new gh(t,e,n),i=this._nodeMap.get(r);return null!==i?i:(this._nodeMap.put(r,r),r)},yh.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1},yh.prototype.interfaces_=function(){return[]},yh.prototype.getClass=function(){return yh};var vh=function(){};vh.prototype.getChainStartIndices=function(t){var e=0,n=new Gu;n.add(new tu(e));do{var r=this.findChainEnd(t,e);n.add(new tu(r)),e=r}while(e<t.length-1);return vh.toIntArray(n)},vh.prototype.findChainEnd=function(t,e){for(var n=ac.quadrant(t[e],t[e+1]),r=e+1;r<t.length&&ac.quadrant(t[r-1],t[r])===n;)r++;return r-1},vh.prototype.interfaces_=function(){return[]},vh.prototype.getClass=function(){return vh},vh.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var _h=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new pu,this.env2=new pu;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new vh;this.startIndex=e.getChainStartIndices(this.pts)};_h.prototype.getCoordinates=function(){return this.pts},_h.prototype.getMaxX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n},_h.prototype.getMinX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n},_h.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],arguments[3])}else if(6===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],a=arguments[3],s=arguments[4],u=arguments[5],l=this.pts[r],c=this.pts[i],h=o.pts[a],p=o.pts[s];if(i-r==1&&s-a==1)return u.addIntersections(this.e,r,o.e,a),null;if(this.env1.init(l,c),this.env2.init(h,p),!this.env1.intersects(this.env2))return null;var f=Math.trunc((r+i)/2),d=Math.trunc((a+s)/2);r<f&&(a<d&&this.computeIntersectsForChain(r,f,o,a,d,u),d<s&&this.computeIntersectsForChain(r,f,o,d,s,u)),f<i&&(a<d&&this.computeIntersectsForChain(f,i,o,a,d,u),d<s&&this.computeIntersectsForChain(f,i,o,d,s,u))}},_h.prototype.getStartIndexes=function(){return this.startIndex},_h.prototype.computeIntersects=function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var r=0;r<t.startIndex.length-1;r++)this.computeIntersectsForChain(n,t,r,e)},_h.prototype.interfaces_=function(){return[]},_h.prototype.getClass=function(){return _h};var bh=function t(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var e=0;e<2;e++)for(var n=0;n<3;n++)this._depth[e][n]=t.NULL_VALUE},xh={NULL_VALUE:{configurable:!0}};bh.prototype.getDepth=function(t,e){return this._depth[t][e]},bh.prototype.setDepth=function(t,e,n){this._depth[t][e]=n},bh.prototype.isNull=function(){if(0===arguments.length){for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this._depth[t][e]!==bh.NULL_VALUE)return!1;return!0}return 1===arguments.length?this._depth[arguments[0]][1]===bh.NULL_VALUE:2===arguments.length?this._depth[arguments[0]][arguments[1]]===bh.NULL_VALUE:void 0},bh.prototype.normalize=function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(var n=1;n<3;n++){var r=0;this._depth[t][n]>e&&(r=1),this._depth[t][n]=r}}},bh.prototype.getDelta=function(t){return this._depth[t][Hl.RIGHT]-this._depth[t][Hl.LEFT]},bh.prototype.getLocation=function(t,e){return this._depth[t][e]<=0?Zs.EXTERIOR:Zs.INTERIOR},bh.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},bh.prototype.add=function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<2;e++)for(var n=1;n<3;n++){var r=t.getLocation(e,n);r!==Zs.EXTERIOR&&r!==Zs.INTERIOR||(this.isNull(e,n)?this._depth[e][n]=bh.depthAtLocation(r):this._depth[e][n]+=bh.depthAtLocation(r))}else 3===arguments.length&&arguments[2]===Zs.INTERIOR&&this._depth[arguments[0]][arguments[1]]++},bh.prototype.interfaces_=function(){return[]},bh.prototype.getClass=function(){return bh},bh.depthAtLocation=function(t){return t===Zs.EXTERIOR?0:t===Zs.INTERIOR?1:bh.NULL_VALUE},xh.NULL_VALUE.get=function(){return-1},Object.defineProperties(bh,xh);var wh=function(t){function e(){if(t.call(this),this.pts=null,this._env=null,this.eiList=new yh(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new bh,this._depthDelta=0,1===arguments.length)e.call(this,arguments[0],null);else if(2===arguments.length){var n=arguments[1];this.pts=arguments[0],this._label=n}}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDepth=function(){return this._depth},e.prototype.getCollapsedEdge=function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new e(t,$l.toLineLabel(this._label))},e.prototype.isIsolated=function(){return this._isIsolated},e.prototype.getCoordinates=function(){return this.pts},e.prototype.setIsolated=function(t){this._isIsolated=t},e.prototype.setName=function(t){this._name=t},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;if(this.pts.length!==n.pts.length)return!1;for(var r=!0,i=!0,o=this.pts.length,a=0;a<this.pts.length;a++)if(this.pts[a].equals2D(n.pts[a])||(r=!1),this.pts[a].equals2D(n.pts[--o])||(i=!1),!r&&!i)return!1;return!0},e.prototype.getCoordinate=function(){return 0===arguments.length?this.pts.length>0?this.pts[0]:null:1===arguments.length?this.pts[arguments[0]]:void 0},e.prototype.print=function(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)},e.prototype.computeIM=function(t){e.updateIM(this._label,t)},e.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},e.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},e.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},e.prototype.getDepthDelta=function(){return this._depthDelta},e.prototype.getNumPoints=function(){return this.pts.length},e.prototype.printReverse=function(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")},e.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new _h(this)),this._mce},e.prototype.getEnvelope=function(){if(null===this._env){this._env=new pu;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env},e.prototype.addIntersection=function(t,e,n,r){var i=new Gs(t.getIntersection(r)),o=e,a=t.getEdgeDistance(n,r),s=o+1;s<this.pts.length&&i.equals2D(this.pts[s])&&(o=s,a=0),this.eiList.add(i,o,a)},e.prototype.toString=function(){var t=new $s;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()},e.prototype.isPointwiseEqual=function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},e.prototype.setDepthDelta=function(t){this._depthDelta=t},e.prototype.getEdgeIntersectionList=function(){return this.eiList},e.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.updateIM=function(){if(2!==arguments.length)return t.prototype.updateIM.apply(this,arguments);var e=arguments[0],n=arguments[1];n.setAtLeastIfValid(e.getLocation(0,Hl.ON),e.getLocation(1,Hl.ON),1),e.isArea()&&(n.setAtLeastIfValid(e.getLocation(0,Hl.LEFT),e.getLocation(1,Hl.LEFT),2),n.setAtLeastIfValid(e.getLocation(0,Hl.RIGHT),e.getLocation(1,Hl.RIGHT),2))},e}(rc),Eh=function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new fh,this._bufParams=t||null};Eh.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t},Eh.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new $l(t.getLabel())).flip(),n.merge(r);var i=Eh.depthDelta(r),o=e.getDepthDelta()+i;e.setDepthDelta(o)}else this._edgeList.add(t),t.setDepthDelta(Eh.depthDelta(t.getLabel()))},Eh.prototype.buildSubgraphs=function(t,e){for(var n=new Gu,r=t.iterator();r.hasNext();){var i=r.next(),o=i.getRightmostCoordinate(),a=new eh(n).getDepth(o);i.computeDepth(a),i.findResultEdges(),n.add(i),e.add(i.getDirectedEdges(),i.getNodes())}},Eh.prototype.createSubgraphs=function(t){for(var e=new Gu,n=t.getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isVisited()){var i=new Jl;i.create(r),e.add(i)}}return bc.sort(e,bc.reverseOrder()),e},Eh.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},Eh.prototype.getNoder=function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new qc,n=new Cu;return n.setPrecisionModel(t),e.setSegmentIntersector(new mh(n)),e},Eh.prototype.buffer=function(t,e){var n=this._workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var r=new th(n,this._bufParams),i=new oh(t,e,r).getCurves();if(i.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(i,n),this._graph=new hc(new hh),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),a=new pc(this._geomFact);this.buildSubgraphs(o,a);var s=a.getPolygons();return s.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(s)},Eh.prototype.computeNodedEdges=function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var r=n.getNodedSubstrings().iterator();r.hasNext();){var i=r.next(),o=i.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var a=i.getData(),s=new wh(i.getCoordinates(),new $l(a));this.insertUniqueEdge(s)}}},Eh.prototype.setNoder=function(t){this._workingNoder=t},Eh.prototype.interfaces_=function(){return[]},Eh.prototype.getClass=function(){return Eh},Eh.depthDelta=function(t){var e=t.getLocation(0,Hl.LEFT),n=t.getLocation(0,Hl.RIGHT);return e===Zs.INTERIOR&&n===Zs.EXTERIOR?1:e===Zs.EXTERIOR&&n===Zs.INTERIOR?-1:0},Eh.convertSegStrings=function(t){for(var e=new zl,n=new Gu;t.hasNext();){var r=t.next(),i=e.createLineString(r.getCoordinates());n.add(i)}return e.buildGeometry(n)};var Ch=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var t=arguments[1];this._noder=arguments[0],this._scaleFactor=t,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var e=arguments[1],n=arguments[2],r=arguments[3];this._noder=arguments[0],this._scaleFactor=e,this._offsetX=n,this._offsetY=r,this._isScaled=!this.isIntegerPrecision()}};Ch.prototype.rescale=function(){if(Ks(arguments[0],Bu))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.rescale(e.getCoordinates())}else if(arguments[0]instanceof Array){for(var n=arguments[0],r=0;r<n.length;r++)n[r].x=n[r].x/this._scaleFactor+this._offsetX,n[r].y=n[r].y/this._scaleFactor+this._offsetY;2===n.length&&n[0].equals2D(n[1])&&cu.out.println(n)}},Ch.prototype.scale=function(){if(Ks(arguments[0],Bu)){for(var t=arguments[0],e=new Gu,n=t.iterator();n.hasNext();){var r=n.next();e.add(new Lc(this.scale(r.getCoordinates()),r.getData()))}return e}if(arguments[0]instanceof Array){for(var i=arguments[0],o=new Array(i.length).fill(null),a=0;a<i.length;a++)o[a]=new Gs(Math.round((i[a].x-this._offsetX)*this._scaleFactor),Math.round((i[a].y-this._offsetY)*this._scaleFactor),i[a].z);return Yu.removeRepeatedPoints(o)}},Ch.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},Ch.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t},Ch.prototype.computeNodes=function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)},Ch.prototype.interfaces_=function(){return[Bc]},Ch.prototype.getClass=function(){return Ch};var Sh=function(){this._li=new Cu,this._segStrings=null,this._segStrings=arguments[0]},Ih={fact:{configurable:!0}};Sh.prototype.checkEndPtVertexIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next().getCoordinates();this.checkEndPtVertexIntersections(e[0],this._segStrings),this.checkEndPtVertexIntersections(e[e.length-1],this._segStrings)}else if(2===arguments.length)for(var n=arguments[0],r=arguments[1].iterator();r.hasNext();)for(var i=r.next().getCoordinates(),o=1;o<i.length-1;o++)if(i[o].equals(n))throw new _u("found endpt/interior pt intersection at index "+o+" :pt "+n)},Sh.prototype.checkInteriorIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();)for(var e=t.next(),n=this._segStrings.iterator();n.hasNext();){var r=n.next();this.checkInteriorIntersections(e,r)}else if(2===arguments.length)for(var i=arguments[0],o=arguments[1],a=i.getCoordinates(),s=o.getCoordinates(),u=0;u<a.length-1;u++)for(var l=0;l<s.length-1;l++)this.checkInteriorIntersections(i,u,o,l);else if(4===arguments.length){var c=arguments[0],h=arguments[1],p=arguments[2],f=arguments[3];if(c===p&&h===f)return null;var d=c.getCoordinates()[h],m=c.getCoordinates()[h+1],g=p.getCoordinates()[f],y=p.getCoordinates()[f+1];if(this._li.computeIntersection(d,m,g,y),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,d,m)||this.hasInteriorIntersection(this._li,g,y)))throw new _u("found non-noded intersection at "+d+"-"+m+" and "+g+"-"+y)}},Sh.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},Sh.prototype.checkCollapses=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(1===arguments.length)for(var n=arguments[0].getCoordinates(),r=0;r<n.length-2;r++)this.checkCollapse(n[r],n[r+1],n[r+2])},Sh.prototype.hasInteriorIntersection=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++){var i=t.getIntersection(r);if(!i.equals(e)&&!i.equals(n))return!0}return!1},Sh.prototype.checkCollapse=function(t,e,n){if(t.equals(n))throw new _u("found non-noded collapse at "+Sh.fact.createLineString([t,e,n]))},Sh.prototype.interfaces_=function(){return[]},Sh.prototype.getClass=function(){return Sh},Ih.fact.get=function(){return new zl},Object.defineProperties(Sh,Ih);var Th=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=n,e<=0)throw new zs("Scale factor must be non-zero");1!==e&&(this._pt=new Gs(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new Gs,this._p1Scaled=new Gs),this.initCorners(this._pt)},kh={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};Th.prototype.intersectsScaled=function(t,e){var n=Math.min(t.x,e.x),r=Math.max(t.x,e.x),i=Math.min(t.y,e.y),o=Math.max(t.y,e.y),a=this._maxx<n||this._minx>r||this._maxy<i||this._miny>o;if(a)return!1;var s=this.intersectsToleranceSquare(t,e);return xu.isTrue(!(a&&s),"Found bad envelope test"),s},Th.prototype.initCorners=function(t){this._minx=t.x-.5,this._maxx=t.x+.5,this._miny=t.y-.5,this._maxy=t.y+.5,this._corner[0]=new Gs(this._maxx,this._maxy),this._corner[1]=new Gs(this._minx,this._maxy),this._corner[2]=new Gs(this._minx,this._miny),this._corner[3]=new Gs(this._maxx,this._miny)},Th.prototype.intersects=function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},Th.prototype.scale=function(t){return Math.round(t*this._scaleFactor)},Th.prototype.getCoordinate=function(){return this._originalPt},Th.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},Th.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var t=Th.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new pu(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv},Th.prototype.intersectsPixelClosure=function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.hasIntersection()))))},Th.prototype.intersectsToleranceSquare=function(t,e){var n=!1,r=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.isProper()||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.isProper()||n&&r||t.equals(this._pt)||e.equals(this._pt)))))},Th.prototype.addSnappedNode=function(t,e){var n=t.getCoordinate(e),r=t.getCoordinate(e+1);return!!this.intersects(n,r)&&(t.addIntersection(this.getCoordinate(),e),!0)},Th.prototype.interfaces_=function(){return[]},Th.prototype.getClass=function(){return Th},kh.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(Th,kh);var Oh=function(){this.tempEnv1=new pu,this.selectedSegment=new Nc};Oh.prototype.select=function(){1===arguments.length||2===arguments.length&&(arguments[0].getLineSegment(arguments[1],this.selectedSegment),this.select(this.selectedSegment))},Oh.prototype.interfaces_=function(){return[]},Oh.prototype.getClass=function(){return Oh};var Ph=function(){this._index=null,this._index=arguments[0]},Ah={HotPixelSnapAction:{configurable:!0}};Ph.prototype.snap=function(){if(1===arguments.length)return this.snap(arguments[0],null,-1);if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=t.getSafeEnvelope(),i=new Mh(t,e,n);return this._index.query(r,{interfaces_:function(){return[gc]},visitItem:function(t){t.select(r,i)}}),i.isNodeAdded()}},Ph.prototype.interfaces_=function(){return[]},Ph.prototype.getClass=function(){return Ph},Ah.HotPixelSnapAction.get=function(){return Mh},Object.defineProperties(Ph,Ah);var Mh=function(t){function e(){t.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var e=arguments[1],n=arguments[2];this._hotPixel=arguments[0],this._parentEdge=e,this._hotPixelVertexIndex=n}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.isNodeAdded=function(){return this._isNodeAdded},e.prototype.select=function(){if(2!==arguments.length)return t.prototype.select.apply(this,arguments);var e=arguments[1],n=arguments[0].getContext();if(null!==this._parentEdge&&n===this._parentEdge&&e===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(n,e)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Oh),Rh=function(){this._li=null,this._interiorIntersections=null,this._li=arguments[0],this._interiorIntersections=new Gu};Rh.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];if(this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var u=0;u<this._li.getIntersectionNum();u++)this._interiorIntersections.add(this._li.getIntersection(u));t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)}},Rh.prototype.isDone=function(){return!1},Rh.prototype.getInteriorIntersections=function(){return this._interiorIntersections},Rh.prototype.interfaces_=function(){return[dh]},Rh.prototype.getClass=function(){return Rh};var Lh=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new Cu,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()};Lh.prototype.checkCorrectness=function(t){var e=Lc.getNodedSubstrings(t),n=new Sh(e);try{n.checkValid()}catch(t){if(!(t instanceof uu))throw t;t.printStackTrace()}},Lh.prototype.getNodedSubstrings=function(){return Lc.getNodedSubstrings(this._nodedSegStrings)},Lh.prototype.snapRound=function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)},Lh.prototype.findInteriorIntersections=function(t,e){var n=new Rh(e);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(t),n.getInteriorIntersections()},Lh.prototype.computeVertexSnaps=function(){if(Ks(arguments[0],Bu))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.computeVertexSnaps(e)}else if(arguments[0]instanceof Lc)for(var n=arguments[0],r=n.getCoordinates(),i=0;i<r.length;i++){var o=new Th(r[i],this._scaleFactor,this._li);this._pointSnapper.snap(o,n,i)&&n.addIntersection(r[i],i)}},Lh.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new qc,this._pointSnapper=new Ph(this._noder.getIndex()),this.snapRound(t,this._li)},Lh.prototype.computeIntersectionSnaps=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=new Th(n,this._scaleFactor,this._li);this._pointSnapper.snap(r)}},Lh.prototype.interfaces_=function(){return[Bc]},Lh.prototype.getClass=function(){return Lh};var Nh=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new Gc,this._resultGeometry=null,this._saveException=null,1===arguments.length)this._argGeom=arguments[0];else if(2===arguments.length){var t=arguments[1];this._argGeom=arguments[0],this._bufParams=t}},Dh={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};Nh.prototype.bufferFixedPrecision=function(t){var e=new Ch(new Lh(new Ll(1)),t.getScale()),n=new Eh(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this._resultGeometry=n.buffer(this._argGeom,this._distance)},Nh.prototype.bufferReducedPrecision=function(){var t=this;if(0===arguments.length){for(var e=Nh.MAX_PRECISION_DIGITS;e>=0;e--){try{t.bufferReducedPrecision(e)}catch(e){if(!(e instanceof Wl))throw e;t._saveException=e}if(null!==t._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var n=Nh.precisionScaleFactor(this._argGeom,this._distance,arguments[0]),r=new Ll(n);this.bufferFixedPrecision(r)}},Nh.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===Ll.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},Nh.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)},Nh.prototype.bufferOriginalPrecision=function(){try{var t=new Eh(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof _u))throw t;this._saveException=t}},Nh.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry},Nh.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)},Nh.prototype.interfaces_=function(){return[]},Nh.prototype.getClass=function(){return Nh},Nh.bufferOp=function(){if(2===arguments.length){var t=arguments[1];return new Nh(arguments[0]).getResultGeometry(t)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Pu&&"number"==typeof arguments[1]){var e=arguments[1],n=arguments[2],r=new Nh(arguments[0]);return r.setQuadrantSegments(n),r.getResultGeometry(e)}if(arguments[2]instanceof Gc&&arguments[0]instanceof Pu&&"number"==typeof arguments[1]){var i=arguments[1];return new Nh(arguments[0],arguments[2]).getResultGeometry(i)}}else if(4===arguments.length){var o=arguments[1],a=arguments[2],s=arguments[3],u=new Nh(arguments[0]);return u.setQuadrantSegments(a),u.setEndCapStyle(s),u.getResultGeometry(o)}},Nh.precisionScaleFactor=function(t,e,n){var r=t.getEnvelopeInternal(),i=Js.max(Math.abs(r.getMaxX()),Math.abs(r.getMaxY()),Math.abs(r.getMinX()),Math.abs(r.getMinY()))+2*(e>0?e:0),o=n-Math.trunc(Math.log(i)/Math.log(10)+1);return Math.pow(10,o)},Dh.CAP_ROUND.get=function(){return Gc.CAP_ROUND},Dh.CAP_BUTT.get=function(){return Gc.CAP_FLAT},Dh.CAP_FLAT.get=function(){return Gc.CAP_FLAT},Dh.CAP_SQUARE.get=function(){return Gc.CAP_SQUARE},Dh.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(Nh,Dh);var Fh=function(){this._pt=[new Gs,new Gs],this._distance=js.NaN,this._isNull=!0};Fh.prototype.getCoordinates=function(){return this._pt},Fh.prototype.getCoordinate=function(t){return this._pt[t]},Fh.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},Fh.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[1],r=arguments[2];this._pt[0].setCoordinate(arguments[0]),this._pt[1].setCoordinate(n),this._distance=r,this._isNull=!1}},Fh.prototype.getDistance=function(){return this._distance},Fh.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},Fh.prototype.interfaces_=function(){return[]},Fh.prototype.getClass=function(){return Fh};var zh=function(){};zh.prototype.interfaces_=function(){return[]},zh.prototype.getClass=function(){return zh},zh.computeDistance=function(){if(arguments[2]instanceof Fh&&arguments[0]instanceof gl&&arguments[1]instanceof Gs)for(var t=arguments[1],e=arguments[2],n=arguments[0].getCoordinates(),r=new Nc,i=0;i<n.length-1;i++){r.setCoordinates(n[i],n[i+1]);var o=r.closestPoint(t);e.setMinimum(o,t)}else if(arguments[2]instanceof Fh&&arguments[0]instanceof bl&&arguments[1]instanceof Gs){var a=arguments[0],s=arguments[1],u=arguments[2];zh.computeDistance(a.getExteriorRing(),s,u);for(var l=0;l<a.getNumInteriorRing();l++)zh.computeDistance(a.getInteriorRingN(l),s,u)}else if(arguments[2]instanceof Fh&&arguments[0]instanceof Pu&&arguments[1]instanceof Gs){var c=arguments[0],h=arguments[1],p=arguments[2];if(c instanceof gl)zh.computeDistance(c,h,p);else if(c instanceof bl)zh.computeDistance(c,h,p);else if(c instanceof ll)for(var f=c,d=0;d<f.getNumGeometries();d++){var m=f.getGeometryN(d);zh.computeDistance(m,h,p)}else p.setMinimum(c.getCoordinate(),h)}else if(arguments[2]instanceof Fh&&arguments[0]instanceof Nc&&arguments[1]instanceof Gs){var g=arguments[1],y=arguments[2],v=arguments[0].closestPoint(g);y.setMinimum(v,g)}};var jh=function(t){this._maxPtDist=new Fh,this._inputGeom=t||null},Bh={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};jh.prototype.computeMaxMidpointDistance=function(t){var e=new qh(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},jh.prototype.computeMaxVertexDistance=function(t){var e=new Vh(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},jh.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()},jh.prototype.getDistancePoints=function(){return this._maxPtDist},jh.prototype.interfaces_=function(){return[]},jh.prototype.getClass=function(){return jh},Bh.MaxPointDistanceFilter.get=function(){return Vh},Bh.MaxMidpointDistanceFilter.get=function(){return qh},Object.defineProperties(jh,Bh);var Vh=function(t){this._maxPtDist=new Fh,this._minPtDist=new Fh,this._geom=t||null};Vh.prototype.filter=function(t){this._minPtDist.initialize(),zh.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Vh.prototype.getMaxPointDistance=function(){return this._maxPtDist},Vh.prototype.interfaces_=function(){return[Ru]},Vh.prototype.getClass=function(){return Vh};var qh=function(t){this._maxPtDist=new Fh,this._minPtDist=new Fh,this._geom=t||null};qh.prototype.filter=function(t,e){if(0===e)return null;var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=new Gs((n.x+r.x)/2,(n.y+r.y)/2);this._minPtDist.initialize(),zh.computeDistance(this._geom,i,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},qh.prototype.isDone=function(){return!1},qh.prototype.isGeometryChanged=function(){return!1},qh.prototype.getMaxPointDistance=function(){return this._maxPtDist},qh.prototype.interfaces_=function(){return[ul]},qh.prototype.getClass=function(){return qh};var Uh=function(t){this._comps=t||null};Uh.prototype.filter=function(t){t instanceof bl&&this._comps.add(t)},Uh.prototype.interfaces_=function(){return[sl]},Uh.prototype.getClass=function(){return Uh},Uh.getPolygons=function(){if(1===arguments.length)return Uh.getPolygons(arguments[0],new Gu);if(2===arguments.length){var t=arguments[0],e=arguments[1];return t instanceof bl?e.add(t):t instanceof ll&&t.apply(new Uh(e)),e}};var Gh=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length)this._lines=arguments[0];else if(2===arguments.length){var t=arguments[1];this._lines=arguments[0],this._isForcedToLineString=t}};Gh.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof wl){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof gl&&this._lines.add(t)},Gh.prototype.setForceToLineString=function(t){this._isForcedToLineString=t},Gh.prototype.interfaces_=function(){return[Ou]},Gh.prototype.getClass=function(){return Gh},Gh.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(Gh.getLines(t))}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().buildGeometry(Gh.getLines(e,n))}},Gh.getLines=function(){if(1===arguments.length)return Gh.getLines(arguments[0],!1);if(2===arguments.length){if(Ks(arguments[0],Bu)&&Ks(arguments[1],Bu)){for(var t=arguments[1],e=arguments[0].iterator();e.hasNext();){var n=e.next();Gh.getLines(n,t)}return t}if(arguments[0]instanceof Pu&&"boolean"==typeof arguments[1]){var r=arguments[0],i=arguments[1],o=new Gu;return r.apply(new Gh(o,i)),o}if(arguments[0]instanceof Pu&&Ks(arguments[1],Bu)){var a=arguments[0],s=arguments[1];return a instanceof gl?s.add(a):a.apply(new Gh(s)),s}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&Ks(arguments[0],Bu)&&Ks(arguments[1],Bu)){for(var u=arguments[1],l=arguments[2],c=arguments[0].iterator();c.hasNext();){var h=c.next();Gh.getLines(h,u,l)}return u}if("boolean"==typeof arguments[2]&&arguments[0]instanceof Pu&&Ks(arguments[1],Bu)){var p=arguments[1];return arguments[0].apply(new Gh(p,arguments[2])),p}}};var Xh=function(){if(this._boundaryRule=Lu.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];if(null===t)throw new zs("Rule must be non-null");this._boundaryRule=t}};Xh.prototype.locateInternal=function(){if(arguments[0]instanceof Gs&&arguments[1]instanceof bl){var t=arguments[0],e=arguments[1];if(e.isEmpty())return Zs.EXTERIOR;var n=e.getExteriorRing(),r=this.locateInPolygonRing(t,n);if(r===Zs.EXTERIOR)return Zs.EXTERIOR;if(r===Zs.BOUNDARY)return Zs.BOUNDARY;for(var i=0;i<e.getNumInteriorRing();i++){var o=e.getInteriorRingN(i),a=this.locateInPolygonRing(t,o);if(a===Zs.INTERIOR)return Zs.EXTERIOR;if(a===Zs.BOUNDARY)return Zs.BOUNDARY}return Zs.INTERIOR}if(arguments[0]instanceof Gs&&arguments[1]instanceof gl){var s=arguments[0],u=arguments[1];if(!u.getEnvelopeInternal().intersects(s))return Zs.EXTERIOR;var l=u.getCoordinates();return u.isClosed()||!s.equals(l[0])&&!s.equals(l[l.length-1])?Tu.isOnLine(s,l)?Zs.INTERIOR:Zs.EXTERIOR:Zs.BOUNDARY}if(arguments[0]instanceof Gs&&arguments[1]instanceof vl){var c=arguments[0];return arguments[1].getCoordinate().equals2D(c)?Zs.INTERIOR:Zs.EXTERIOR}},Xh.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?Tu.locatePointInRing(t,e.getCoordinates()):Zs.EXTERIOR},Xh.prototype.intersects=function(t,e){return this.locate(t,e)!==Zs.EXTERIOR},Xh.prototype.updateLocationInfo=function(t){t===Zs.INTERIOR&&(this._isIn=!0),t===Zs.BOUNDARY&&this._numBoundaries++},Xh.prototype.computeLocation=function(t,e){if(e instanceof vl&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof gl)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof bl)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof cl)for(var n=e,r=0;r<n.getNumGeometries();r++){var i=n.getGeometryN(r);this.updateLocationInfo(this.locateInternal(t,i))}else if(e instanceof El)for(var o=e,a=0;a<o.getNumGeometries();a++){var s=o.getGeometryN(a);this.updateLocationInfo(this.locateInternal(t,s))}else if(e instanceof ll)for(var u=new sh(e);u.hasNext();){var l=u.next();l!==e&&this.computeLocation(t,l)}},Xh.prototype.locate=function(t,e){return e.isEmpty()?Zs.EXTERIOR:e instanceof gl?this.locateInternal(t,e):e instanceof bl?this.locateInternal(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?Zs.BOUNDARY:this._numBoundaries>0||this._isIn?Zs.INTERIOR:Zs.EXTERIOR)},Xh.prototype.interfaces_=function(){return[]},Xh.prototype.getClass=function(){return Xh};var Hh=function t(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length)t.call(this,arguments[0],t.INSIDE_AREA,arguments[1]);else if(3===arguments.length){var e=arguments[1],n=arguments[2];this._component=arguments[0],this._segIndex=e,this._pt=n}},Yh={INSIDE_AREA:{configurable:!0}};Hh.prototype.isInsideArea=function(){return this._segIndex===Hh.INSIDE_AREA},Hh.prototype.getCoordinate=function(){return this._pt},Hh.prototype.getGeometryComponent=function(){return this._component},Hh.prototype.getSegmentIndex=function(){return this._segIndex},Hh.prototype.interfaces_=function(){return[]},Hh.prototype.getClass=function(){return Hh},Yh.INSIDE_AREA.get=function(){return-1},Object.defineProperties(Hh,Yh);var Zh=function(t){this._pts=t||null};Zh.prototype.filter=function(t){t instanceof vl&&this._pts.add(t)},Zh.prototype.interfaces_=function(){return[sl]},Zh.prototype.getClass=function(){return Zh},Zh.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof vl?bc.singletonList(t):Zh.getPoints(t,new Gu)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof vl?n.add(e):e instanceof ll&&e.apply(new Zh(n)),n}};var Wh=function(){this._locations=null,this._locations=arguments[0]};Wh.prototype.filter=function(t){(t instanceof vl||t instanceof gl||t instanceof bl)&&this._locations.add(new Hh(t,0,t.getCoordinate()))},Wh.prototype.interfaces_=function(){return[sl]},Wh.prototype.getClass=function(){return Wh},Wh.getLocations=function(t){var e=new Gu;return t.apply(new Wh(e)),e};var Kh=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new Xh,this._minDistanceLocation=null,this._minDistance=js.MAX_VALUE,2===arguments.length)this._geom=[arguments[0],arguments[1]],this._terminateDistance=0;else if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e,this._terminateDistance=n}};Kh.prototype.computeContainmentDistance=function(){if(0===arguments.length){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=1-e,i=Uh.getPolygons(this._geom[e]);if(i.size()>0){var o=Wh.getLocations(this._geom[r]);if(this.computeContainmentDistance(o,i,n),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[r]=n[0],this._minDistanceLocation[e]=n[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&Ks(arguments[0],Uu)&&Ks(arguments[1],Uu)){for(var a=arguments[0],s=arguments[1],u=arguments[2],l=0;l<a.size();l++)for(var c=a.get(l),h=0;h<s.size();h++)if(this.computeContainmentDistance(c,s.get(h),u),this._minDistance<=this._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof Hh&&arguments[1]instanceof bl){var p=arguments[0],f=arguments[1],d=arguments[2],m=p.getCoordinate();if(Zs.EXTERIOR!==this._ptLocator.locate(m,f))return this._minDistance=0,d[0]=p,d[1]=new Hh(f,m),null}},Kh.prototype.computeMinDistanceLinesPoints=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var a=e.get(o);if(this.computeMinDistance(i,a,n),this._minDistance<=this._terminateDistance)return null}},Kh.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),e=Gh.getLines(this._geom[0]),n=Gh.getLines(this._geom[1]),r=Zh.getPoints(this._geom[0]),i=Zh.getPoints(this._geom[1]);return this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,i,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,r,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(r,i,t),void this.updateMinDistance(t,!1))))},Kh.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},Kh.prototype.updateMinDistance=function(t,e){if(null===t[0])return null;e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])},Kh.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},Kh.prototype.computeMinDistance=function(){if(0===arguments.length){if(null!==this._minDistanceLocation)return null;if(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof gl&&arguments[1]instanceof vl){var t=arguments[0],e=arguments[1],n=arguments[2];if(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this._minDistance)return null;for(var r=t.getCoordinates(),i=e.getCoordinate(),o=0;o<r.length-1;o++){var a=Tu.distancePointLine(i,r[o],r[o+1]);if(a<this._minDistance){this._minDistance=a;var s=new Nc(r[o],r[o+1]).closestPoint(i);n[0]=new Hh(t,o,s),n[1]=new Hh(e,0,i)}if(this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof gl&&arguments[1]instanceof gl){var u=arguments[0],l=arguments[1],c=arguments[2];if(u.getEnvelopeInternal().distance(l.getEnvelopeInternal())>this._minDistance)return null;for(var h=u.getCoordinates(),p=l.getCoordinates(),f=0;f<h.length-1;f++)for(var d=0;d<p.length-1;d++){var m=Tu.distanceLineLine(h[f],h[f+1],p[d],p[d+1]);if(m<this._minDistance){this._minDistance=m;var g=new Nc(h[f],h[f+1]),y=new Nc(p[d],p[d+1]),v=g.closestPoints(y);c[0]=new Hh(u,f,v[0]),c[1]=new Hh(l,d,v[1])}if(this._minDistance<=this._terminateDistance)return null}}},Kh.prototype.computeMinDistancePoints=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var a=e.get(o),s=i.getCoordinate().distance(a.getCoordinate());if(s<this._minDistance&&(this._minDistance=s,n[0]=new Hh(i,0,i.getCoordinate()),n[1]=new Hh(a,0,a.getCoordinate())),this._minDistance<=this._terminateDistance)return null}},Kh.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new zs("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},Kh.prototype.computeMinDistanceLines=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var a=e.get(o);if(this.computeMinDistance(i,a,n),this._minDistance<=this._terminateDistance)return null}},Kh.prototype.interfaces_=function(){return[]},Kh.prototype.getClass=function(){return Kh},Kh.distance=function(t,e){return new Kh(t,e).distance()},Kh.isWithinDistance=function(t,e,n){return new Kh(t,e,n).distance()<=n},Kh.nearestPoints=function(t,e){return new Kh(t,e).nearestPoints()};var Jh=function(){this._pt=[new Gs,new Gs],this._distance=js.NaN,this._isNull=!0};Jh.prototype.getCoordinates=function(){return this._pt},Jh.prototype.getCoordinate=function(t){return this._pt[t]},Jh.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},Jh.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[1],r=arguments[2];this._pt[0].setCoordinate(arguments[0]),this._pt[1].setCoordinate(n),this._distance=r,this._isNull=!1}},Jh.prototype.toString=function(){return vu.toLineString(this._pt[0],this._pt[1])},Jh.prototype.getDistance=function(){return this._distance},Jh.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},Jh.prototype.interfaces_=function(){return[]},Jh.prototype.getClass=function(){return Jh};var Qh=function(){};Qh.prototype.interfaces_=function(){return[]},Qh.prototype.getClass=function(){return Qh},Qh.computeDistance=function(){if(arguments[2]instanceof Jh&&arguments[0]instanceof gl&&arguments[1]instanceof Gs)for(var t=arguments[0],e=arguments[1],n=arguments[2],r=new Nc,i=t.getCoordinates(),o=0;o<i.length-1;o++){r.setCoordinates(i[o],i[o+1]);var a=r.closestPoint(e);n.setMinimum(a,e)}else if(arguments[2]instanceof Jh&&arguments[0]instanceof bl&&arguments[1]instanceof Gs){var s=arguments[0],u=arguments[1],l=arguments[2];Qh.computeDistance(s.getExteriorRing(),u,l);for(var c=0;c<s.getNumInteriorRing();c++)Qh.computeDistance(s.getInteriorRingN(c),u,l)}else if(arguments[2]instanceof Jh&&arguments[0]instanceof Pu&&arguments[1]instanceof Gs){var h=arguments[0],p=arguments[1],f=arguments[2];if(h instanceof gl)Qh.computeDistance(h,p,f);else if(h instanceof bl)Qh.computeDistance(h,p,f);else if(h instanceof ll)for(var d=h,m=0;m<d.getNumGeometries();m++){var g=d.getGeometryN(m);Qh.computeDistance(g,p,f)}else f.setMinimum(h.getCoordinate(),p)}else if(arguments[2]instanceof Jh&&arguments[0]instanceof Nc&&arguments[1]instanceof Gs){var y=arguments[1],v=arguments[2],_=arguments[0].closestPoint(y);v.setMinimum(_,y)}};var $h=function(){this._g0=null,this._g1=null,this._ptDist=new Jh,this._densifyFrac=0;var t=arguments[1];this._g0=arguments[0],this._g1=t},tp={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};$h.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},$h.prototype.setDensifyFraction=function(t){if(t>1||t<=0)throw new zs("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t},$h.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)},$h.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},$h.prototype.computeOrientedDistance=function(t,e,n){var r=new ep(e);if(t.apply(r),n.setMaximum(r.getMaxPointDistance()),this._densifyFrac>0){var i=new np(e,this._densifyFrac);t.apply(i),n.setMaximum(i.getMaxPointDistance())}},$h.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},$h.prototype.interfaces_=function(){return[]},$h.prototype.getClass=function(){return $h},$h.distance=function(){if(2===arguments.length)return new $h(arguments[0],arguments[1]).distance();if(3===arguments.length){var t=arguments[2],e=new $h(arguments[0],arguments[1]);return e.setDensifyFraction(t),e.distance()}},tp.MaxPointDistanceFilter.get=function(){return ep},tp.MaxDensifiedByFractionDistanceFilter.get=function(){return np},Object.defineProperties($h,tp);var ep=function(){this._maxPtDist=new Jh,this._minPtDist=new Jh,this._euclideanDist=new Qh,this._geom=null,this._geom=arguments[0]};ep.prototype.filter=function(t){this._minPtDist.initialize(),Qh.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},ep.prototype.getMaxPointDistance=function(){return this._maxPtDist},ep.prototype.interfaces_=function(){return[Ru]},ep.prototype.getClass=function(){return ep};var np=function(){this._maxPtDist=new Jh,this._minPtDist=new Jh,this._geom=null,this._numSubSegs=0;var t=arguments[1];this._geom=arguments[0],this._numSubSegs=Math.trunc(Math.round(1/t))};np.prototype.filter=function(t,e){if(0===e)return null;for(var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=(r.x-n.x)/this._numSubSegs,o=(r.y-n.y)/this._numSubSegs,a=0;a<this._numSubSegs;a++){var s=new Gs(n.x+a*i,n.y+a*o);this._minPtDist.initialize(),Qh.computeDistance(this._geom,s,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}},np.prototype.isDone=function(){return!1},np.prototype.isGeometryChanged=function(){return!1},np.prototype.getMaxPointDistance=function(){return this._maxPtDist},np.prototype.interfaces_=function(){return[ul]},np.prototype.getClass=function(){return np};var rp=function(t,e,n){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=e||null,this._result=n||null},ip={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};rp.prototype.checkMaximumDistance=function(t,e,n){var r=new $h(e,t);if(r.setDensifyFraction(.25),this._maxDistanceFound=r.orientedDistance(),this._maxDistanceFound>n){this._isValid=!1;var i=r.getCoordinates();this._errorLocation=i[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+vu.toLineString(i[0],i[1])+")"}},rp.prototype.isValid=function(){var t=Math.abs(this._bufDistance),e=rp.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-e,this._maxValidDistance=t+e,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),rp.VERBOSE&&cu.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},rp.prototype.checkNegativeValid=function(){if(!(this._input instanceof bl||this._input instanceof El||this._input instanceof ll))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)},rp.prototype.getErrorIndicator=function(){return this._errorIndicator},rp.prototype.checkMinimumDistance=function(t,e,n){var r=new Kh(t,e,n);if(this._minDistanceFound=r.distance(),this._minDistanceFound<n){this._isValid=!1;var i=r.nearestPoints();this._errorLocation=r.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+vu.toLineString(i[0],i[1])+" )"}},rp.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)},rp.prototype.getErrorLocation=function(){return this._errorLocation},rp.prototype.getPolygonLines=function(t){for(var e=new Gu,n=new Gh(e),r=Uh.getPolygons(t).iterator();r.hasNext();)r.next().apply(n);return t.getFactory().buildGeometry(e)},rp.prototype.getErrorMessage=function(){return this._errMsg},rp.prototype.interfaces_=function(){return[]},rp.prototype.getClass=function(){return rp},ip.VERBOSE.get=function(){return!1},ip.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(rp,ip);var op=function(t,e,n){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=e||null,this._result=n||null},ap={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};op.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},op.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*op.MAX_ENV_DIFF_FRAC;0===t&&(t=.001);var e=new pu(this._input.getEnvelopeInternal());e.expandBy(this._distance);var n=new pu(this._result.getEnvelopeInternal());n.expandBy(t),n.contains(e)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(n)),this.report("Envelope")},op.prototype.checkDistance=function(){var t=new rp(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")},op.prototype.checkArea=function(){var t=this._input.getArea(),e=this._result.getArea();this._distance>0&&t>e&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<e&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},op.prototype.checkPolygonal=function(){this._result instanceof bl||this._result instanceof El||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},op.prototype.getErrorIndicator=function(){return this._errorIndicator},op.prototype.getErrorLocation=function(){return this._errorLocation},op.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2?null:this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},op.prototype.report=function(t){if(!op.VERBOSE)return null;cu.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))},op.prototype.getErrorMessage=function(){return this._errorMsg},op.prototype.interfaces_=function(){return[]},op.prototype.getClass=function(){return op},op.isValidMsg=function(t,e,n){var r=new op(t,e,n);return r.isValid()?null:r.getErrorMessage()},op.isValid=function(t,e,n){return!!new op(t,e,n).isValid()},ap.VERBOSE.get=function(){return!1},ap.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(op,ap);var sp=function(){this._pts=null,this._data=null;var t=arguments[1];this._pts=arguments[0],this._data=t};sp.prototype.getCoordinates=function(){return this._pts},sp.prototype.size=function(){return this._pts.length},sp.prototype.getCoordinate=function(t){return this._pts[t]},sp.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},sp.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:Ac.octant(this.getCoordinate(t),this.getCoordinate(t+1))},sp.prototype.setData=function(t){this._data=t},sp.prototype.getData=function(){return this._data},sp.prototype.toString=function(){return vu.toLineString(new Ol(this._pts))},sp.prototype.interfaces_=function(){return[Mc]},sp.prototype.getClass=function(){return sp};var up=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new Gu,this._intersectionCount=0,this._keepIntersections=!0,this._li=arguments[0],this._interiorIntersection=null};up.prototype.getInteriorIntersection=function(){return this._interiorIntersection},up.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t},up.prototype.getIntersectionSegments=function(){return this._intSegments},up.prototype.count=function(){return this._intersectionCount},up.prototype.getIntersections=function(){return this._intersections},up.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},up.prototype.setKeepIntersections=function(t){this._keepIntersections=t},up.prototype.processIntersections=function(t,e,n,r){if(!this._findAllIntersections&&this.hasIntersection())return null;if(t===n&&e===r)return null;if(this._isCheckEndSegmentsOnly&&!this.isEndSegment(t,e)&&!this.isEndSegment(n,r))return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=i,this._intSegments[1]=o,this._intSegments[2]=a,this._intSegments[3]=s,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},up.prototype.isEndSegment=function(t,e){return 0===e||e>=t.size()-2},up.prototype.hasIntersection=function(){return null!==this._interiorIntersection},up.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},up.prototype.interfaces_=function(){return[dh]},up.prototype.getClass=function(){return up},up.createAllIntersectionsFinder=function(t){var e=new up(t);return e.setFindAllIntersections(!0),e},up.createAnyIntersectionFinder=function(t){return new up(t)},up.createIntersectionCounter=function(t){var e=new up(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e};var lp=function(){this._li=new Cu,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0,this._segStrings=arguments[0]};lp.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},lp.prototype.getIntersections=function(){return this._segInt.getIntersections()},lp.prototype.isValid=function(){return this.execute(),this._isValid},lp.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},lp.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new up(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new qc;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},lp.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new Wl(this.getErrorMessage(),this._segInt.getInteriorIntersection())},lp.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+vu.toLineString(t[0],t[1])+" and "+vu.toLineString(t[2],t[3])},lp.prototype.interfaces_=function(){return[]},lp.prototype.getClass=function(){return lp},lp.computeIntersections=function(t){var e=new lp(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()};var cp=function t(){this._nv=null,this._nv=new lp(t.toSegmentStrings(arguments[0]))};cp.prototype.checkValid=function(){this._nv.checkValid()},cp.prototype.interfaces_=function(){return[]},cp.prototype.getClass=function(){return cp},cp.toSegmentStrings=function(t){for(var e=new Gu,n=t.iterator();n.hasNext();){var r=n.next();e.add(new sp(r.getCoordinates(),r))}return e},cp.checkValid=function(t){new cp(t).checkValid()};var hp=function(t){this._mapOp=t};hp.prototype.map=function(t){for(var e=new Gu,n=0;n<t.getNumGeometries();n++){var r=this._mapOp.map(t.getGeometryN(n));r.isEmpty()||e.add(r)}return t.getFactory().createGeometryCollection(zl.toGeometryArray(e))},hp.prototype.interfaces_=function(){return[]},hp.prototype.getClass=function(){return hp},hp.map=function(t,e){return new hp(e).map(t)};var pp=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new Gu,this._resultLineList=new Gu;var t=arguments[1],e=arguments[2];this._op=arguments[0],this._geometryFactory=t,this._ptLocator=e};pp.prototype.collectLines=function(t){for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next();this.collectLineEdge(n,t,this._lineEdgesList),this.collectBoundaryTouchEdge(n,t,this._lineEdgesList)}},pp.prototype.labelIsolatedLine=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,n)},pp.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList},pp.prototype.collectLineEdge=function(t,e,n){var r=t.getLabel(),i=t.getEdge();t.isLineEdge()&&(t.isVisited()||!Hp.isResultOfOp(r,e)||i.isCovered()||(n.add(i),t.setVisitedEdge(!0)))},pp.prototype.findCoveredLineEdges=function(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();)t.next().getEdges().findCoveredLineEdges();for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next(),r=n.getEdge();if(n.isLineEdge()&&!r.isCoveredSet()){var i=this._op.isCoveredByA(n.getCoordinate());r.setCovered(i)}}},pp.prototype.labelIsolatedLines=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=n.getLabel();n.isIsolated()&&(r.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},pp.prototype.buildLines=function(t){for(var e=this._lineEdgesList.iterator();e.hasNext();){var n=e.next(),r=this._geometryFactory.createLineString(n.getCoordinates());this._resultLineList.add(r),n.setInResult(!0)}},pp.prototype.collectBoundaryTouchEdge=function(t,e,n){var r=t.getLabel();return t.isLineEdge()?null:t.isVisited()?null:t.isInteriorAreaEdge()?null:t.getEdge().isInResult()?null:(xu.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(Hp.isResultOfOp(r,e)&&e===Hp.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))},pp.prototype.interfaces_=function(){return[]},pp.prototype.getClass=function(){return pp};var fp=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new Gu;var t=arguments[1];this._op=arguments[0],this._geometryFactory=t};fp.prototype.filterCoveredNodeToPoint=function(t){var e=t.getCoordinate();if(!this._op.isCoveredByLA(e)){var n=this._geometryFactory.createPoint(e);this._resultPointList.add(n)}},fp.prototype.extractNonCoveredResultNodes=function(t){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next();if(!(n.isInResult()||n.isIncidentEdgeInResult()||0!==n.getEdges().getDegree()&&t!==Hp.INTERSECTION)){var r=n.getLabel();Hp.isResultOfOp(r,t)&&this.filterCoveredNodeToPoint(n)}}},fp.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList},fp.prototype.interfaces_=function(){return[]},fp.prototype.getClass=function(){return fp};var dp=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};dp.prototype.transformPoint=function(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},dp.prototype.transformPolygon=function(t,e){var n=!0,r=this.transformLinearRing(t.getExteriorRing(),t);null!==r&&r instanceof wl&&!r.isEmpty()||(n=!1);for(var i=new Gu,o=0;o<t.getNumInteriorRing();o++){var a=this.transformLinearRing(t.getInteriorRingN(o),t);null===a||a.isEmpty()||(a instanceof wl||(n=!1),i.add(a))}if(n)return this._factory.createPolygon(r,i.toArray([]));var s=new Gu;return null!==r&&s.add(r),s.addAll(i),this._factory.buildGeometry(s)},dp.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)},dp.prototype.getInputGeometry=function(){return this._inputGeom},dp.prototype.transformMultiLineString=function(t,e){for(var n=new Gu,r=0;r<t.getNumGeometries();r++){var i=this.transformLineString(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},dp.prototype.transformCoordinates=function(t,e){return this.copy(t)},dp.prototype.transformLineString=function(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},dp.prototype.transformMultiPoint=function(t,e){for(var n=new Gu,r=0;r<t.getNumGeometries();r++){var i=this.transformPoint(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},dp.prototype.transformMultiPolygon=function(t,e){for(var n=new Gu,r=0;r<t.getNumGeometries();r++){var i=this.transformPolygon(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},dp.prototype.copy=function(t){return t.copy()},dp.prototype.transformGeometryCollection=function(t,e){for(var n=new Gu,r=0;r<t.getNumGeometries();r++){var i=this.transform(t.getGeometryN(r));null!==i&&(this._pruneEmptyGeometry&&i.isEmpty()||n.add(i))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(zl.toGeometryArray(n)):this._factory.buildGeometry(n)},dp.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof vl)return this.transformPoint(t,null);if(t instanceof xl)return this.transformMultiPoint(t,null);if(t instanceof wl)return this.transformLinearRing(t,null);if(t instanceof gl)return this.transformLineString(t,null);if(t instanceof cl)return this.transformMultiLineString(t,null);if(t instanceof bl)return this.transformPolygon(t,null);if(t instanceof El)return this.transformMultiPolygon(t,null);if(t instanceof ll)return this.transformGeometryCollection(t,null);throw new zs("Unknown Geometry subtype: "+t.getClass().getName())},dp.prototype.transformLinearRing=function(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===n)return this._factory.createLinearRing(null);var r=n.size();return r>0&&r<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)},dp.prototype.interfaces_=function(){return[]},dp.prototype.getClass=function(){return dp};var mp=function t(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new Nc,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof gl&&"number"==typeof arguments[1]){var e=arguments[1];t.call(this,arguments[0].getCoordinates(),e)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1];this._srcPts=n,this._isClosed=t.isClosed(n),this._snapTolerance=r}};mp.prototype.snapVertices=function(t,e){for(var n=this._isClosed?t.size()-1:t.size(),r=0;r<n;r++){var i=t.get(r),o=this.findSnapForVertex(i,e);null!==o&&(t.set(r,new Gs(o)),0===r&&this._isClosed&&t.set(t.size()-1,new Gs(o)))}},mp.prototype.findSnapForVertex=function(t,e){for(var n=0;n<e.length;n++){if(t.equals2D(e[n]))return null;if(t.distance(e[n])<this._snapTolerance)return e[n]}return null},mp.prototype.snapTo=function(t){var e=new Hu(this._srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},mp.prototype.snapSegments=function(t,e){if(0===e.length)return null;var n=e.length;e[0].equals2D(e[e.length-1])&&(n=e.length-1);for(var r=0;r<n;r++){var i=e[r],o=this.findSegmentIndexToSnap(i,t);o>=0&&t.add(o+1,new Gs(i),!1)}},mp.prototype.findSegmentIndexToSnap=function(t,e){for(var n=js.MAX_VALUE,r=-1,i=0;i<e.size()-1;i++){if(this._seg.p0=e.get(i),this._seg.p1=e.get(i+1),this._seg.p0.equals2D(t)||this._seg.p1.equals2D(t)){if(this._allowSnappingToSourceVertices)continue;return-1}var o=this._seg.distance(t);o<this._snapTolerance&&o<n&&(n=o,r=i)}return r},mp.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t},mp.prototype.interfaces_=function(){return[]},mp.prototype.getClass=function(){return mp},mp.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])};var gp=function(t){this._srcGeom=t||null},yp={SNAP_PRECISION_FACTOR:{configurable:!0}};gp.prototype.snapTo=function(t,e){var n=this.extractTargetCoordinates(t);return new vp(e,n).transform(this._srcGeom)},gp.prototype.snapToSelf=function(t,e){var n=this.extractTargetCoordinates(this._srcGeom),r=new vp(t,n,!0).transform(this._srcGeom),i=r;return e&&Ks(i,_l)&&(i=r.buffer(0)),i},gp.prototype.computeSnapTolerance=function(t){return this.computeMinimumSegmentLength(t)/10},gp.prototype.extractTargetCoordinates=function(t){for(var e=new Ii,n=t.getCoordinates(),r=0;r<n.length;r++)e.add(n[r]);return e.toArray(new Array(0).fill(null))},gp.prototype.computeMinimumSegmentLength=function(t){for(var e=js.MAX_VALUE,n=0;n<t.length-1;n++){var r=t[n].distance(t[n+1]);r<e&&(e=r)}return e},gp.prototype.interfaces_=function(){return[]},gp.prototype.getClass=function(){return gp},gp.snap=function(t,e,n){var r=new Array(2).fill(null),i=new gp(t);r[0]=i.snapTo(e,n);var o=new gp(e);return r[1]=o.snapTo(r[0],n),r},gp.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=gp.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel();if(n.getType()===Ll.FIXED){var r=1/n.getScale()*2/1.415;r>e&&(e=r)}return e}if(2===arguments.length){var i=arguments[1];return Math.min(gp.computeOverlaySnapTolerance(arguments[0]),gp.computeOverlaySnapTolerance(i))}},gp.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*gp.SNAP_PRECISION_FACTOR},gp.snapToSelf=function(t,e,n){return new gp(t).snapToSelf(e,n)},yp.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(gp,yp);var vp=function(t){function e(e,n,r){t.call(this),this._snapTolerance=e||null,this._snapPts=n||null,this._isSelfSnap=void 0!==r&&r}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.snapLine=function(t,e){var n=new mp(t,this._snapTolerance);return n.setAllowSnappingToSourceVertices(this._isSelfSnap),n.snapTo(e)},e.prototype.transformCoordinates=function(t,e){var n=t.toCoordinateArray(),r=this.snapLine(n,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(dp),_p=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};_p.prototype.getCommon=function(){return js.longBitsToDouble(this._commonBits)},_p.prototype.add=function(t){var e=js.doubleToLongBits(t);return this._isFirst?(this._commonBits=e,this._commonSignExp=_p.signExpBits(this._commonBits),this._isFirst=!1,null):_p.signExpBits(e)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=_p.numCommonMostSigMantissaBits(this._commonBits,e),void(this._commonBits=_p.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},_p.prototype.toString=function(){if(1===arguments.length){var t=arguments[0],e=js.longBitsToDouble(t),n="0000000000000000000000000000000000000000000000000000000000000000"+js.toBinaryString(t),r=n.substring(n.length-64);return r.substring(0,1)+"  "+r.substring(1,12)+"(exp) "+r.substring(12)+" [ "+e+" ]"}},_p.prototype.interfaces_=function(){return[]},_p.prototype.getClass=function(){return _p},_p.getBit=function(t,e){return 0!=(t&1<<e)?1:0},_p.signExpBits=function(t){return t>>52},_p.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},_p.numCommonMostSigMantissaBits=function(t,e){for(var n=0,r=52;r>=0;r--){if(_p.getBit(t,r)!==_p.getBit(e,r))return n;n++}return 52};var bp=function(){this._commonCoord=null,this._ccFilter=new wp},xp={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};bp.prototype.addCommonBits=function(t){var e=new Ep(this._commonCoord);t.apply(e),t.geometryChanged()},bp.prototype.removeCommonBits=function(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;var e=new Gs(this._commonCoord);e.x=-e.x,e.y=-e.y;var n=new Ep(e);return t.apply(n),t.geometryChanged(),t},bp.prototype.getCommonCoordinate=function(){return this._commonCoord},bp.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},bp.prototype.interfaces_=function(){return[]},bp.prototype.getClass=function(){return bp},xp.CommonCoordinateFilter.get=function(){return wp},xp.Translater.get=function(){return Ep},Object.defineProperties(bp,xp);var wp=function(){this._commonBitsX=new _p,this._commonBitsY=new _p};wp.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)},wp.prototype.getCommonCoordinate=function(){return new Gs(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},wp.prototype.interfaces_=function(){return[Ru]},wp.prototype.getClass=function(){return wp};var Ep=function(){this.trans=null,this.trans=arguments[0]};Ep.prototype.filter=function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,r=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,r)},Ep.prototype.isDone=function(){return!1},Ep.prototype.isGeometryChanged=function(){return!0},Ep.prototype.interfaces_=function(){return[ul]},Ep.prototype.getClass=function(){return Ep};var Cp=function(t,e){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()};Cp.prototype.selfSnap=function(t){return new gp(t).snapTo(t,this._snapTolerance)},Cp.prototype.removeCommonBits=function(t){this._cbr=new bp,this._cbr.add(t[0]),this._cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e},Cp.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t},Cp.prototype.getResultGeometry=function(t){var e=this.snap(this._geom),n=Hp.overlayOp(e[0],e[1],t);return this.prepareResult(n)},Cp.prototype.checkValid=function(t){t.isValid()||cu.out.println("Snapped geometry is invalid")},Cp.prototype.computeSnapTolerance=function(){this._snapTolerance=gp.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},Cp.prototype.snap=function(t){var e=this.removeCommonBits(t);return gp.snap(e[0],e[1],this._snapTolerance)},Cp.prototype.interfaces_=function(){return[]},Cp.prototype.getClass=function(){return Cp},Cp.overlayOp=function(t,e,n){return new Cp(t,e).getResultGeometry(n)},Cp.union=function(t,e){return Cp.overlayOp(t,e,Hp.UNION)},Cp.intersection=function(t,e){return Cp.overlayOp(t,e,Hp.INTERSECTION)},Cp.symDifference=function(t,e){return Cp.overlayOp(t,e,Hp.SYMDIFFERENCE)},Cp.difference=function(t,e){return Cp.overlayOp(t,e,Hp.DIFFERENCE)};var Sp=function(t,e){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e};Sp.prototype.getResultGeometry=function(t){var e=null,n=!1,r=null;try{e=Hp.overlayOp(this._geom[0],this._geom[1],t),n=!0}catch(t){if(!(t instanceof _u))throw t;r=t}if(!n)try{e=Cp.overlayOp(this._geom[0],this._geom[1],t)}catch(t){throw t instanceof _u?r:t}return e},Sp.prototype.interfaces_=function(){return[]},Sp.prototype.getClass=function(){return Sp},Sp.overlayOp=function(t,e,n){return new Sp(t,e).getResultGeometry(n)},Sp.union=function(t,e){return Sp.overlayOp(t,e,Hp.UNION)},Sp.intersection=function(t,e){return Sp.overlayOp(t,e,Hp.INTERSECTION)},Sp.symDifference=function(t,e){return Sp.overlayOp(t,e,Hp.SYMDIFFERENCE)},Sp.difference=function(t,e){return Sp.overlayOp(t,e,Hp.DIFFERENCE)};var Ip=function(){this.mce=null,this.chainIndex=null;var t=arguments[1];this.mce=arguments[0],this.chainIndex=t};Ip.prototype.computeIntersections=function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},Ip.prototype.interfaces_=function(){return[]},Ip.prototype.getClass=function(){return Ip};var Tp=function t(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var e=arguments[0],n=arguments[1];this._eventType=t.DELETE,this._xValue=e,this._insertEvent=n}else if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._eventType=t.INSERT,this._label=r,this._xValue=i,this._obj=o}},kp={INSERT:{configurable:!0},DELETE:{configurable:!0}};Tp.prototype.isDelete=function(){return this._eventType===Tp.DELETE},Tp.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t},Tp.prototype.getObject=function(){return this._obj},Tp.prototype.compareTo=function(t){return this._xValue<t._xValue?-1:this._xValue>t._xValue?1:this._eventType<t._eventType?-1:this._eventType>t._eventType?1:0},Tp.prototype.getInsertEvent=function(){return this._insertEvent},Tp.prototype.isInsert=function(){return this._eventType===Tp.INSERT},Tp.prototype.isSameLabel=function(t){return null!==this._label&&this._label===t._label},Tp.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},Tp.prototype.interfaces_=function(){return[Vs]},Tp.prototype.getClass=function(){return Tp},kp.INSERT.get=function(){return 1},kp.DELETE.get=function(){return 2},Object.defineProperties(Tp,kp);var Op=function(){};Op.prototype.interfaces_=function(){return[]},Op.prototype.getClass=function(){return Op};var Pp=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var t=arguments[1],e=arguments[2];this._li=arguments[0],this._includeProper=t,this._recordIsolated=e};Pp.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(Pp.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.getNumPoints()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},Pp.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Pp.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t},Pp.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Pp.prototype.isBoundaryPointInternal=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next().getCoordinate();if(t.isIntersection(r))return!0}return!1},Pp.prototype.hasProperIntersection=function(){return this._hasProper},Pp.prototype.hasIntersection=function(){return this._hasIntersection},Pp.prototype.isDone=function(){return this._isDone},Pp.prototype.isBoundaryPoint=function(t,e){return!(null===e||!this.isBoundaryPointInternal(t,e[0])&&!this.isBoundaryPointInternal(t,e[1]))},Pp.prototype.setBoundaryNodes=function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e},Pp.prototype.addIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},Pp.prototype.interfaces_=function(){return[]},Pp.prototype.getClass=function(){return Pp},Pp.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var Ap=function(t){function e(){t.call(this),this.events=new Gu,this.nOverlaps=null}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.prepareEvents=function(){bc.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},e.prototype.computeIntersections=function(){if(1===arguments.length){var t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var e=0;e<this.events.size();e++){var n=this.events.get(e);if(n.isInsert()&&this.processOverlaps(e,n.getDeleteEventIndex(),n,t),t.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof Pp&&Ks(arguments[0],Uu)&&Ks(arguments[1],Uu)){var r=arguments[0],i=arguments[1],o=arguments[2];this.addEdges(r,r),this.addEdges(i,i),this.computeIntersections(o)}else if("boolean"==typeof arguments[2]&&Ks(arguments[0],Uu)&&arguments[1]instanceof Pp){var a=arguments[0],s=arguments[1];arguments[2]?this.addEdges(a,null):this.addEdges(a),this.computeIntersections(s)}},e.prototype.addEdge=function(t,e){for(var n=t.getMonotoneChainEdge(),r=n.getStartIndexes(),i=0;i<r.length-1;i++){var o=new Ip(n,i),a=new Tp(e,n.getMinX(i),o);this.events.add(a),this.events.add(new Tp(n.getMaxX(i),a))}},e.prototype.processOverlaps=function(t,e,n,r){for(var i=n.getObject(),o=t;o<e;o++){var a=this.events.get(o);if(a.isInsert()){var s=a.getObject();n.isSameLabel(a)||(i.computeIntersections(s,r),this.nOverlaps++)}}},e.prototype.addEdges=function(){if(1===arguments.length)for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.addEdge(e,e)}else if(2===arguments.length)for(var n=arguments[1],r=arguments[0].iterator();r.hasNext();){var i=r.next();this.addEdge(i,n)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Op),Mp=function(){this._min=js.POSITIVE_INFINITY,this._max=js.NEGATIVE_INFINITY},Rp={NodeComparator:{configurable:!0}};Mp.prototype.getMin=function(){return this._min},Mp.prototype.intersects=function(t,e){return!(this._min>e||this._max<t)},Mp.prototype.getMax=function(){return this._max},Mp.prototype.toString=function(){return vu.toLineString(new Gs(this._min,0),new Gs(this._max,0))},Mp.prototype.interfaces_=function(){return[]},Mp.prototype.getClass=function(){return Mp},Rp.NodeComparator.get=function(){return Lp},Object.defineProperties(Mp,Rp);var Lp=function(){};Lp.prototype.compare=function(t,e){var n=(t._min+t._max)/2,r=(e._min+e._max)/2;return n<r?-1:n>r?1:0},Lp.prototype.interfaces_=function(){return[Us]},Lp.prototype.getClass=function(){return Lp};var Np=function(t){function e(){t.call(this),this._item=null;var e=arguments[1],n=arguments[2];this._min=arguments[0],this._max=e,this._item=n}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;n.visitItem(this._item)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Mp),Dp=function(t){function e(){t.call(this),this._node1=null,this._node2=null;var e=arguments[1];this._node1=arguments[0],this._node2=e,this.buildExtent(this._node1,this._node2)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.buildExtent=function(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)},e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,n),null!==this._node2&&this._node2.query(t,e,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Mp),Fp=function(){this._leaves=new Gu,this._root=null,this._level=0};Fp.prototype.buildTree=function(){bc.sort(this._leaves,new Mp.NodeComparator);for(var t=this._leaves,e=null,n=new Gu;;){if(this.buildLevel(t,n),1===n.size())return n.get(0);e=t,t=n,n=e}},Fp.prototype.insert=function(t,e,n){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new Np(t,e,n))},Fp.prototype.query=function(t,e,n){this.init(),this._root.query(t,e,n)},Fp.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},Fp.prototype.printNode=function(t){cu.out.println(vu.toLineString(new Gs(t._min,this._level),new Gs(t._max,this._level)))},Fp.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},Fp.prototype.buildLevel=function(t,e){this._level++,e.clear();for(var n=0;n<t.size();n+=2){var r=t.get(n);if(null===(n+1<t.size()?t.get(n):null))e.add(r);else{var i=new Dp(t.get(n),t.get(n+1));e.add(i)}}},Fp.prototype.interfaces_=function(){return[]},Fp.prototype.getClass=function(){return Fp};var zp=function(){this._items=new Gu};zp.prototype.visitItem=function(t){this._items.add(t)},zp.prototype.getItems=function(){return this._items},zp.prototype.interfaces_=function(){return[gc]},zp.prototype.getClass=function(){return zp};var jp=function(){this._index=null;var t=arguments[0];if(!Ks(t,_l))throw new zs("Argument must be Polygonal");this._index=new qp(t)},Bp={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};jp.prototype.locate=function(t){var e=new Iu(t),n=new Vp(e);return this._index.query(t.y,t.y,n),e.getLocation()},jp.prototype.interfaces_=function(){return[ah]},jp.prototype.getClass=function(){return jp},Bp.SegmentVisitor.get=function(){return Vp},Bp.IntervalIndexedGeometry.get=function(){return qp},Object.defineProperties(jp,Bp);var Vp=function(){this._counter=null,this._counter=arguments[0]};Vp.prototype.visitItem=function(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},Vp.prototype.interfaces_=function(){return[gc]},Vp.prototype.getClass=function(){return Vp};var qp=function(){this._index=new Fp,this.init(arguments[0])};qp.prototype.init=function(t){for(var e=Gh.getLines(t).iterator();e.hasNext();){var n=e.next().getCoordinates();this.addLine(n)}},qp.prototype.addLine=function(t){for(var e=1;e<t.length;e++){var n=new Nc(t[e-1],t[e]),r=Math.min(n.p0.y,n.p1.y),i=Math.max(n.p0.y,n.p1.y);this._index.insert(r,i,n)}},qp.prototype.query=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new zp;return this._index.query(t,e,n),n.getItems()}3===arguments.length&&this._index.query(arguments[0],arguments[1],arguments[2])},qp.prototype.interfaces_=function(){return[]},qp.prototype.getClass=function(){return qp};var Up=function(t){function e(){if(t.call(this),this._parentGeom=null,this._lineEdgeMap=new Rl,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new Xh,2===arguments.length){var e=arguments[1],n=Lu.OGC_SFS_BOUNDARY_RULE;this._argIndex=arguments[0],this._parentGeom=e,this._boundaryNodeRule=n,null!==e&&this.add(e)}else if(3===arguments.length){var r=arguments[1],i=arguments[2];this._argIndex=arguments[0],this._parentGeom=r,this._boundaryNodeRule=i,null!==r&&this.add(r)}}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.insertBoundaryPoint=function(t,n){var r=this._nodes.addNode(n).getLabel(),i=1;r.getLocation(t,Hl.ON)===Zs.BOUNDARY&&i++;var o=e.determineBoundary(this._boundaryNodeRule,i);r.setLocation(t,o)},e.prototype.computeSelfNodes=function(){if(2===arguments.length)return this.computeSelfNodes(arguments[0],arguments[1],!1);if(3===arguments.length){var t=arguments[1],e=arguments[2],n=new Pp(arguments[0],!0,!1);return n.setIsDoneIfProperInt(e),this.createEdgeSetIntersector().computeIntersections(this._edges,n,t||!(this._parentGeom instanceof wl||this._parentGeom instanceof bl||this._parentGeom instanceof El)),this.addSelfIntersectionNodes(this._argIndex),n}},e.prototype.computeSplitEdges=function(t){for(var e=this._edges.iterator();e.hasNext();)e.next().eiList.addSplitEdges(t)},e.prototype.computeEdgeIntersections=function(t,e,n){var r=new Pp(e,n,!0);return r.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,r),r},e.prototype.getGeometry=function(){return this._parentGeom},e.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},e.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},e.prototype.addPoint=function(){if(arguments[0]instanceof vl){var t=arguments[0].getCoordinate();this.insertPoint(this._argIndex,t,Zs.INTERIOR)}else arguments[0]instanceof Gs&&this.insertPoint(this._argIndex,arguments[0],Zs.INTERIOR)},e.prototype.addPolygon=function(t){this.addPolygonRing(t.getExteriorRing(),Zs.EXTERIOR,Zs.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var n=t.getInteriorRingN(e);this.addPolygonRing(n,Zs.INTERIOR,Zs.EXTERIOR)}},e.prototype.addEdge=function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],Zs.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],Zs.BOUNDARY)},e.prototype.addLineString=function(t){var e=Yu.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;var n=new wh(e,new $l(this._argIndex,Zs.INTERIOR));this._lineEdgeMap.put(t,n),this.insertEdge(n),xu.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])},e.prototype.getInvalidPoint=function(){return this._invalidPoint},e.prototype.getBoundaryPoints=function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),n=0,r=t.iterator();r.hasNext();){var i=r.next();e[n++]=i.getCoordinate().copy()}return e},e.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},e.prototype.addSelfIntersectionNode=function(t,e,n){if(this.isBoundaryNode(t,e))return null;n===Zs.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n)},e.prototype.addPolygonRing=function(t,e,n){if(t.isEmpty())return null;var r=Yu.removeRepeatedPoints(t.getCoordinates());if(r.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=r[0],null;var i=e,o=n;Tu.isCCW(r)&&(i=n,o=e);var a=new wh(r,new $l(this._argIndex,Zs.BOUNDARY,i,o));this._lineEdgeMap.put(t,a),this.insertEdge(a),this.insertPoint(this._argIndex,r[0],Zs.BOUNDARY)},e.prototype.insertPoint=function(t,e,n){var r=this._nodes.addNode(e),i=r.getLabel();null===i?r._label=new $l(t,n):i.setLocation(t,n)},e.prototype.createEdgeSetIntersector=function(){return new Ap},e.prototype.addSelfIntersectionNodes=function(t){for(var e=this._edges.iterator();e.hasNext();)for(var n=e.next(),r=n.getLabel().getLocation(t),i=n.eiList.iterator();i.hasNext();){var o=i.next();this.addSelfIntersectionNode(t,o.coord,r)}},e.prototype.add=function(){if(1!==arguments.length)return t.prototype.add.apply(this,arguments);var e=arguments[0];if(e.isEmpty())return null;if(e instanceof El&&(this._useBoundaryDeterminationRule=!1),e instanceof bl)this.addPolygon(e);else if(e instanceof gl)this.addLineString(e);else if(e instanceof vl)this.addPoint(e);else if(e instanceof xl)this.addCollection(e);else if(e instanceof cl)this.addCollection(e);else if(e instanceof El)this.addCollection(e);else{if(!(e instanceof ll))throw new Error(e.getClass().getName());this.addCollection(e)}},e.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},e.prototype.locate=function(t){return Ks(this._parentGeom,_l)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new jp(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)},e.prototype.findEdge=function(){return 1===arguments.length?this._lineEdgeMap.get(arguments[0]):t.prototype.findEdge.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.determineBoundary=function(t,e){return t.isInBoundary(e)?Zs.BOUNDARY:Zs.INTERIOR},e}(hc),Gp=function(){if(this._li=new Cu,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new Up(0,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=Lu.OGC_SFS_BOUNDARY_RULE;e.getPrecisionModel().compareTo(n.getPrecisionModel())>=0?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(n.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Up(0,e,r),this._arg[1]=new Up(1,n,r)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];i.getPrecisionModel().compareTo(o.getPrecisionModel())>=0?this.setComputationPrecision(i.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Up(0,i,a),this._arg[1]=new Up(1,o,a)}};Gp.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()},Gp.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)},Gp.prototype.interfaces_=function(){return[]},Gp.prototype.getClass=function(){return Gp};var Xp=function(){};Xp.prototype.interfaces_=function(){return[]},Xp.prototype.getClass=function(){return Xp},Xp.map=function(){if(arguments[0]instanceof Pu&&Ks(arguments[1],Xp.MapOp)){for(var t=arguments[0],e=arguments[1],n=new Gu,r=0;r<t.getNumGeometries();r++){var i=e.map(t.getGeometryN(r));null!==i&&n.add(i)}return t.getFactory().buildGeometry(n)}if(Ks(arguments[0],Bu)&&Ks(arguments[1],Xp.MapOp)){for(var o=arguments[0],a=arguments[1],s=new Gu,u=o.iterator();u.hasNext();){var l=u.next(),c=a.map(l);null!==c&&s.add(c)}return s}},Xp.MapOp=function(){};var Hp=function(t){function e(){var e=arguments[0];t.call(this,e,arguments[1]),this._ptLocator=new Xh,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new fh,this._resultPolyList=new Gu,this._resultLineList=new Gu,this._resultPointList=new Gu,this._graph=new hc(new hh),this._geomFact=e.getFactory()}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new $l(t.getLabel())).flip();var i=e.getDepth();i.isNull()&&i.add(n),i.add(r),n.merge(r)}else this._edgeList.add(t)},e.prototype.getGraph=function(){return this._graph},e.prototype.cancelDuplicateResultEdges=function(){for(var t=this._graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),n=e.getSym();e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1))}},e.prototype.isCoveredByLA=function(t){return!!this.isCovered(t,this._resultLineList)||!!this.isCovered(t,this._resultPolyList)},e.prototype.computeGeometry=function(t,n,r,i){var o=new Gu;return o.addAll(t),o.addAll(n),o.addAll(r),o.isEmpty()?e.createEmptyResult(i,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(o)},e.prototype.mergeSymLabels=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().mergeSymLabels()},e.prototype.isCovered=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(this._ptLocator.locate(t,r)!==Zs.EXTERIOR)return!0}return!1},e.prototype.replaceCollapsedEdges=function(){for(var t=new Gu,e=this._edgeList.iterator();e.hasNext();){var n=e.next();n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()))}this._edgeList.addAll(t)},e.prototype.updateNodeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getEdges().getLabel();e.getLabel().merge(n)}},e.prototype.getResultGeometry=function(t){return this.computeOverlay(t),this._resultGeom},e.prototype.insertUniqueEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertUniqueEdge(n)}},e.prototype.computeOverlay=function(t){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var e=new Gu;this._arg[0].computeSplitEdges(e),this._arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),cp.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var n=new pc(this._geomFact);n.add(this._graph),this._resultPolyList=n.getPolygons();var r=new pp(this,this._geomFact,this._ptLocator);this._resultLineList=r.build(t);var i=new fp(this,this._geomFact,this._ptLocator);this._resultPointList=i.build(t),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,t)},e.prototype.labelIncompleteNode=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setLocation(e,n)},e.prototype.copyPoints=function(t){for(var e=this._arg[t].getNodeIterator();e.hasNext();){var n=e.next();this._graph.addNode(n.getCoordinate()).setLabel(t,n.getLabel().getLocation(t))}},e.prototype.findResultAreaEdges=function(t){for(var n=this._graph.getEdgeEnds().iterator();n.hasNext();){var r=n.next(),i=r.getLabel();i.isArea()&&!r.isInteriorAreaEdge()&&e.isResultOfOp(i.getLocation(0,Hl.RIGHT),i.getLocation(1,Hl.RIGHT),t)&&r.setInResult(!0)}},e.prototype.computeLabelsFromDepths=function(){for(var t=this._edgeList.iterator();t.hasNext();){var e=t.next(),n=e.getLabel(),r=e.getDepth();if(!r.isNull()){r.normalize();for(var i=0;i<2;i++)n.isNull(i)||!n.isArea()||r.isNull(i)||(0===r.getDelta(i)?n.toLine(i):(xu.isTrue(!r.isNull(i,Hl.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(i,Hl.LEFT,r.getLocation(i,Hl.LEFT)),xu.isTrue(!r.isNull(i,Hl.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(i,Hl.RIGHT,r.getLocation(i,Hl.RIGHT))))}}},e.prototype.computeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},e.prototype.labelIncompleteNodes=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getLabel();e.isIsolated()&&(n.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(n)}},e.prototype.isCoveredByA=function(t){return!!this.isCovered(t,this._resultPolyList)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Gp);Hp.overlayOp=function(t,e,n){return new Hp(t,e).getResultGeometry(n)},Hp.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return Hp.createEmptyResult(Hp.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return hp.map(t,{interfaces_:function(){return[Xp.MapOp]},map:function(t){return t.intersection(n)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Sp.overlayOp(t,e,Hp.INTERSECTION)},Hp.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Hp.createEmptyResult(Hp.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Sp.overlayOp(t,e,Hp.SYMDIFFERENCE)},Hp.resultDimension=function(t,e,n){var r=e.getDimension(),i=n.getDimension(),o=-1;switch(t){case Hp.INTERSECTION:o=Math.min(r,i);break;case Hp.UNION:o=Math.max(r,i);break;case Hp.DIFFERENCE:o=r;break;case Hp.SYMDIFFERENCE:o=Math.max(r,i)}return o},Hp.createEmptyResult=function(t,e,n,r){var i=null;switch(Hp.resultDimension(t,e,n)){case-1:i=r.createGeometryCollection(new Array(0).fill(null));break;case 0:i=r.createPoint();break;case 1:i=r.createLineString();break;case 2:i=r.createPolygon()}return i},Hp.difference=function(t,e){return t.isEmpty()?Hp.createEmptyResult(Hp.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Sp.overlayOp(t,e,Hp.DIFFERENCE))},Hp.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=t.getLocation(0),r=t.getLocation(1);return Hp.isResultOfOp(n,r,e)}if(3===arguments.length){var i=arguments[0],o=arguments[1];switch(i===Zs.BOUNDARY&&(i=Zs.INTERIOR),o===Zs.BOUNDARY&&(o=Zs.INTERIOR),arguments[2]){case Hp.INTERSECTION:return i===Zs.INTERIOR&&o===Zs.INTERIOR;case Hp.UNION:return i===Zs.INTERIOR||o===Zs.INTERIOR;case Hp.DIFFERENCE:return i===Zs.INTERIOR&&o!==Zs.INTERIOR;case Hp.SYMDIFFERENCE:return i===Zs.INTERIOR&&o!==Zs.INTERIOR||i!==Zs.INTERIOR&&o===Zs.INTERIOR}return!1}},Hp.INTERSECTION=1,Hp.UNION=2,Hp.DIFFERENCE=3,Hp.SYMDIFFERENCE=4;var Yp=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new Xh,this._seg=new Nc;var t=arguments[0],e=arguments[1];this._g=t,this._boundaryDistanceTolerance=e,this._linework=this.extractLinework(t)};Yp.prototype.isWithinToleranceOfBoundary=function(t){for(var e=0;e<this._linework.getNumGeometries();e++)for(var n=this._linework.getGeometryN(e).getCoordinateSequence(),r=0;r<n.size()-1;r++)if(n.getCoordinate(r,this._seg.p0),n.getCoordinate(r+1,this._seg.p1),this._seg.distance(t)<=this._boundaryDistanceTolerance)return!0;return!1},Yp.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?Zs.BOUNDARY:this._ptLocator.locate(t,this._g)},Yp.prototype.extractLinework=function(t){var e=new Zp;t.apply(e);var n=e.getLinework(),r=zl.toLineStringArray(n);return t.getFactory().createMultiLineString(r)},Yp.prototype.interfaces_=function(){return[]},Yp.prototype.getClass=function(){return Yp};var Zp=function(){this._linework=null,this._linework=new Gu};Zp.prototype.getLinework=function(){return this._linework},Zp.prototype.filter=function(t){if(t instanceof bl){var e=t;this._linework.add(e.getExteriorRing());for(var n=0;n<e.getNumInteriorRing();n++)this._linework.add(e.getInteriorRingN(n))}},Zp.prototype.interfaces_=function(){return[sl]},Zp.prototype.getClass=function(){return Zp};var Wp=function(){this._g=null,this._doLeft=!0,this._doRight=!0,this._g=arguments[0]};Wp.prototype.extractPoints=function(t,e,n){for(var r=t.getCoordinates(),i=0;i<r.length-1;i++)this.computeOffsetPoints(r[i],r[i+1],e,n)},Wp.prototype.setSidesToGenerate=function(t,e){this._doLeft=t,this._doRight=e},Wp.prototype.getPoints=function(t){for(var e=new Gu,n=Gh.getLines(this._g).iterator();n.hasNext();){var r=n.next();this.extractPoints(r,t,e)}return e},Wp.prototype.computeOffsetPoints=function(t,e,n,r){var i=e.x-t.x,o=e.y-t.y,a=Math.sqrt(i*i+o*o),s=n*i/a,u=n*o/a,l=(e.x+t.x)/2,c=(e.y+t.y)/2;if(this._doLeft){var h=new Gs(l-u,c+s);r.add(h)}if(this._doRight){var p=new Gs(l+u,c-s);r.add(p)}},Wp.prototype.interfaces_=function(){return[]},Wp.prototype.getClass=function(){return Wp};var Kp=function t(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=t.TOLERANCE,this._testCoords=new Gu;var e=arguments[0],n=arguments[1],r=arguments[2];this._boundaryDistanceTolerance=t.computeBoundaryDistanceTolerance(e,n),this._geom=[e,n,r],this._locFinder=[new Yp(this._geom[0],this._boundaryDistanceTolerance),new Yp(this._geom[1],this._boundaryDistanceTolerance),new Yp(this._geom[2],this._boundaryDistanceTolerance)]},Jp={TOLERANCE:{configurable:!0}};Kp.prototype.reportResult=function(t,e,n){cu.out.println("Overlay result invalid - A:"+Zs.toLocationSymbol(e[0])+" B:"+Zs.toLocationSymbol(e[1])+" expected:"+(n?"i":"e")+" actual:"+Zs.toLocationSymbol(e[2]))},Kp.prototype.isValid=function(t){return this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]),this.checkValid(t)},Kp.prototype.checkValid=function(){if(1===arguments.length){for(var t=arguments[0],e=0;e<this._testCoords.size();e++){var n=this._testCoords.get(e);if(!this.checkValid(t,n))return this._invalidLocation=n,!1}return!0}if(2===arguments.length){var r=arguments[0],i=arguments[1];return this._location[0]=this._locFinder[0].getLocation(i),this._location[1]=this._locFinder[1].getLocation(i),this._location[2]=this._locFinder[2].getLocation(i),!!Kp.hasLocation(this._location,Zs.BOUNDARY)||this.isValidResult(r,this._location)}},Kp.prototype.addTestPts=function(t){var e=new Wp(t);this._testCoords.addAll(e.getPoints(5*this._boundaryDistanceTolerance))},Kp.prototype.isValidResult=function(t,e){var n=Hp.isResultOfOp(e[0],e[1],t),r=!(n^e[2]===Zs.INTERIOR);return r||this.reportResult(t,e,n),r},Kp.prototype.getInvalidLocation=function(){return this._invalidLocation},Kp.prototype.interfaces_=function(){return[]},Kp.prototype.getClass=function(){return Kp},Kp.hasLocation=function(t,e){for(var n=0;n<3;n++)if(t[n]===e)return!0;return!1},Kp.computeBoundaryDistanceTolerance=function(t,e){return Math.min(gp.computeSizeBasedSnapTolerance(t),gp.computeSizeBasedSnapTolerance(e))},Kp.isValid=function(t,e,n,r){return new Kp(t,e,r).isValid(n)},Jp.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(Kp,Jp);var Qp=function t(e){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=t.extractFactory(e),this._inputGeoms=e};Qp.prototype.extractElements=function(t,e){if(null===t)return null;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);this._skipEmpty&&r.isEmpty()||e.add(r)}},Qp.prototype.combine=function(){for(var t=new Gu,e=this._inputGeoms.iterator();e.hasNext();){var n=e.next();this.extractElements(n,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)},Qp.prototype.interfaces_=function(){return[]},Qp.prototype.getClass=function(){return Qp},Qp.combine=function(){return 1===arguments.length?new Qp(arguments[0]).combine():2===arguments.length?new Qp(Qp.createList(arguments[0],arguments[1])).combine():3===arguments.length?new Qp(Qp.createList(arguments[0],arguments[1],arguments[2])).combine():void 0},Qp.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},Qp.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new Gu;return n.add(t),n.add(e),n}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],a=new Gu;return a.add(r),a.add(i),a.add(o),a}};var $p=function(){this._inputPolys=null,this._geomFactory=null,this._inputPolys=arguments[0],null===this._inputPolys&&(this._inputPolys=new Gu)},tf={STRTREE_NODE_CAPACITY:{configurable:!0}};$p.prototype.reduceToGeometries=function(t){for(var e=new Gu,n=t.iterator();n.hasNext();){var r=n.next(),i=null;Ks(r,Uu)?i=this.unionTree(r):r instanceof Pu&&(i=r),e.add(i)}return e},$p.prototype.extractByEnvelope=function(t,e,n){for(var r=new Gu,i=0;i<e.getNumGeometries();i++){var o=e.getGeometryN(i);o.getEnvelopeInternal().intersects(t)?r.add(o):n.add(o)}return this._geomFactory.buildGeometry(r)},$p.prototype.unionOptimized=function(t,e){var n=t.getEnvelopeInternal(),r=e.getEnvelopeInternal();if(!n.intersects(r))return Qp.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var i=n.intersection(r);return this.unionUsingEnvelopeIntersection(t,e,i)},$p.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new Ic($p.STRTREE_NODE_CAPACITY),e=this._inputPolys.iterator();e.hasNext();){var n=e.next();t.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null;var r=t.itemsTree();return this.unionTree(r)},$p.prototype.binaryUnion=function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];if(r-n<=1){var i=$p.getGeometry(e,n);return this.unionSafe(i,null)}if(r-n==2)return this.unionSafe($p.getGeometry(e,n),$p.getGeometry(e,n+1));var o=Math.trunc((r+n)/2),a=this.binaryUnion(e,n,o),s=this.binaryUnion(e,o,r);return this.unionSafe(a,s)}},$p.prototype.repeatedUnion=function(t){for(var e=null,n=t.iterator();n.hasNext();){var r=n.next();e=null===e?r.copy():e.union(r)}return e},$p.prototype.unionSafe=function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},$p.prototype.unionActual=function(t,e){return $p.restrictToPolygons(t.union(e))},$p.prototype.unionTree=function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)},$p.prototype.unionUsingEnvelopeIntersection=function(t,e,n){var r=new Gu,i=this.extractByEnvelope(n,t,r),o=this.extractByEnvelope(n,e,r),a=this.unionActual(i,o);return r.add(a),Qp.combine(r)},$p.prototype.bufferUnion=function(){if(1===arguments.length){var t=arguments[0];return t.get(0).getFactory().buildGeometry(t).buffer(0)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().createGeometryCollection([e,n]).buffer(0)}},$p.prototype.interfaces_=function(){return[]},$p.prototype.getClass=function(){return $p},$p.restrictToPolygons=function(t){if(Ks(t,_l))return t;var e=Uh.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(zl.toPolygonArray(e))},$p.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},$p.union=function(t){return new $p(t).union()},tf.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties($p,tf);var ef=function(){};ef.prototype.interfaces_=function(){return[]},ef.prototype.getClass=function(){return ef},ef.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Hp.createEmptyResult(Hp.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Sp.overlayOp(t,e,Hp.UNION)};var nf=function(){return new Ai};Ai.prototype={constructor:Ai,reset:function(){this.s=this.t=0},add:function(t){Mi(rf,t,this.t),Mi(this,rf.s,this.s),this.s?this.t+=rf.t:this.s=rf.t},valueOf:function(){return this.s}};var rf=new Ai,of=1e-6,af=Math.PI,sf=af/2,uf=af/4,lf=2*af,cf=180/af,hf=af/180,pf=Math.abs,ff=Math.atan,df=Math.atan2,mf=Math.cos,gf=Math.exp,yf=Math.log,vf=Math.sin,_f=Math.sqrt,bf=Math.tan,xf={Feature:function(t,e){Ni(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)Ni(n[r].geometry,e)}},wf={Sphere:function(t,e){e.sphere()},Point:function(t,e){e.point((t=t.coordinates)[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)e.point((t=n[r])[0],t[1],t[2])},LineString:function(t,e){Di(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Di(n[r],e,0)},Polygon:function(t,e){Fi(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Fi(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)Ni(n[r],e)}},Ef=function(t,e){t&&xf.hasOwnProperty(t.type)?xf[t.type](t,e):Ni(t,e)},Cf=(nf(),nf(),nf(),function(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n});Xi.invert=Xi;var Sf=function(t){function e(e){return(e=t(e[0]*hf,e[1]*hf))[0]*=cf,e[1]*=cf,e}return t=Hi(t[0]*hf,t[1]*hf,t.length>2?t[2]*hf:0),e.invert=function(e){return(e=t.invert(e[0]*hf,e[1]*hf))[0]*=cf,e[1]*=cf,e},e},If=function(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:Li,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}},Tf=function(t,e,n,r,i,o){var a,s=t[0],u=t[1],l=0,c=1,h=e[0]-s,p=e[1]-u;if(a=n-s,h||!(a>0)){if(a/=h,h<0){if(a<l)return;a<c&&(c=a)}else if(h>0){if(a>c)return;a>l&&(l=a)}if(a=i-s,h||!(a<0)){if(a/=h,h<0){if(a>c)return;a>l&&(l=a)}else if(h>0){if(a<l)return;a<c&&(c=a)}if(a=r-u,p||!(a>0)){if(a/=p,p<0){if(a<l)return;a<c&&(c=a)}else if(p>0){if(a>c)return;a>l&&(l=a)}if(a=o-u,p||!(a<0)){if(a/=p,p<0){if(a>c)return;a>l&&(l=a)}else if(p>0){if(a<l)return;a<c&&(c=a)}return l>0&&(t[0]=s+l*h,t[1]=u+l*p),c<1&&(e[0]=s+c*h,e[1]=u+c*p),!0}}}}},kf=function(t,e){return pf(t[0]-e[0])<of&&pf(t[1]-e[1])<of},Of=function(t,e,n,r,i){var o,a,s=[],u=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],a=t[e];if(kf(r,a)){for(i.lineStart(),o=0;o<e;++o)i.point((r=t[o])[0],r[1]);i.lineEnd()}else s.push(n=new Ji(r,t,null,!0)),u.push(n.o=new Ji(r,null,n,!1)),s.push(n=new Ji(a,t,null,!1)),u.push(n.o=new Ji(a,null,n,!0))}}),s.length){for(u.sort(e),Qi(s),Qi(u),o=0,a=u.length;o<a;++o)u[o].e=n=!n;for(var l,c,h=s[0];;){for(var p=h,f=!0;p.v;)if((p=p.n)===h)return;l=p.z,i.lineStart();do{if(p.v=p.o.v=!0,p.e){if(f)for(o=0,a=l.length;o<a;++o)i.point((c=l[o])[0],c[1]);else r(p.x,p.n.x,1,i);p=p.n}else{if(f)for(o=(l=p.p.z).length-1;o>=0;--o)i.point((c=l[o])[0],c[1]);else r(p.x,p.p.x,-1,i);p=p.p}l=(p=p.o).z,f=!f}while(!p.v);i.lineEnd()}}},Pf=function(t){for(var e,n,r,i=t.length,o=-1,a=0;++o<i;)a+=t[o].length;for(n=new Array(a);--i>=0;)for(e=(r=t[i]).length;--e>=0;)n[--a]=r[e];return n},Af=1e9,Mf=-Af,Rf=nf(),Lf=(nf(),function(t){return t}),Nf=(nf(),nf(),1/0),Df=Nf,Ff=-Nf,zf=Ff,jf={point:function(t,e){t<Nf&&(Nf=t),t>Ff&&(Ff=t),e<Df&&(Df=e),e>zf&&(zf=e)},lineStart:Li,lineEnd:Li,polygonStart:Li,polygonEnd:Li,result:function(){var t=[[Nf,Df],[Ff,zf]];return Ff=zf=-(Df=Nf=1/0),t}},Bf=(nf(),function(t,e,n,r){return function(i,o){function a(e,n){var r=i(e,n);t(e=r[0],n=r[1])&&o.point(e,n)}function s(t,e){var n=i(t,e);g.point(n[0],n[1])}function u(){x.point=s,g.lineStart()}function l(){x.point=a,g.lineEnd()}function c(t,e){m.push([t,e]);var n=i(t,e);_.point(n[0],n[1])}function h(){_.lineStart(),m=[]}function p(){c(m[0][0],m[0][1]),_.lineEnd();var t,e,n,r,i=_.clean(),a=v.result(),s=a.length;if(m.pop(),f.push(m),m=null,s)if(1&i){if((e=(n=a[0]).length-1)>0){for(b||(o.polygonStart(),b=!0),o.lineStart(),t=0;t<e;++t)o.point((r=n[t])[0],r[1]);o.lineEnd()}}else s>1&&2&i&&a.push(a.pop().concat(a.shift())),d.push(a.filter($i))}var f,d,m,g=e(o),y=i.invert(r[0],r[1]),v=If(),_=e(v),b=!1,x={point:a,lineStart:u,lineEnd:l,polygonStart:function(){x.point=c,x.lineStart=h,x.lineEnd=p,d=[],f=[]},polygonEnd:function(){x.point=a,x.lineStart=u,x.lineEnd=l,d=Pf(d);var t=function(t,e){var n=e[0],r=e[1],i=[vf(n),-mf(n),0],o=0,a=0;Rf.reset();for(var s=0,u=t.length;s<u;++s)if(c=(l=t[s]).length)for(var l,c,h=l[c-1],p=h[0],f=h[1]/2+uf,d=vf(f),m=mf(f),g=0;g<c;++g,p=v,d=b,m=x,h=y){var y=l[g],v=y[0],_=y[1]/2+uf,b=vf(_),x=mf(_),w=v-p,E=w>=0?1:-1,C=E*w,S=C>af,I=d*b;if(Rf.add(df(I*E*vf(C),m*x+I*mf(C))),o+=S?w+E*lf:w,S^p>=n^v>=n){var T=Vi(ji(h),ji(y));Gi(T);var k=Vi(i,T);Gi(k);var O=(S^w>=0?-1:1)*Ri(k[2]);(r>O||r===O&&(T[0]||T[1]))&&(a+=S^w>=0?1:-1)}}return(o<-of||o<of&&Rf<-of)^1&a}(f,y);d.length?(b||(o.polygonStart(),b=!0),Of(d,to,t,n,o)):t&&(b||(o.polygonStart(),b=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),b&&(o.polygonEnd(),b=!1),d=f=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};return x}}),Vf=Bf(function(){return!0},function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var s=o>0?af:-af,u=pf(o-n);pf(u-af)<of?(t.point(n,r=(r+a)/2>0?sf:-sf),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(o,r),e=0):i!==s&&u>=af&&(pf(n-i)<of&&(n-=i*of),pf(o-s)<of&&(o-=s*of),r=function(t,e,n,r){var i,o,a=vf(t-n);return pf(a)>of?ff((vf(e)*(o=mf(r))*vf(n)-vf(r)*(i=mf(e))*vf(t))/(i*o*a)):(e+r)/2}(n,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),e=0),t.point(n=o,r=a),i=s},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}},function(t,e,n,r){var i;if(null==t)r.point(-af,i=n*sf),r.point(0,i),r.point(af,i),r.point(af,0),r.point(af,-i),r.point(0,-i),r.point(-af,-i),r.point(-af,0),r.point(-af,i);else if(pf(t[0]-e[0])>of){var o=t[0]<e[0]?af:-af;r.point(-o,i=n*o/2),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])},[-af,-sf]);no.prototype={constructor:no,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var qf=16,Uf=mf(30*hf),Gf=function(t,e){return+e?function(t,e){function n(r,i,o,a,s,u,l,c,h,p,f,d,m,g){var y=l-r,v=c-i,_=y*y+v*v;if(_>4*e&&m--){var b=a+p,x=s+f,w=u+d,E=_f(b*b+x*x+w*w),C=Ri(w/=E),S=pf(pf(w)-1)<of||pf(o-h)<of?(o+h)/2:df(x,b),I=t(S,C),T=I[0],k=I[1],O=T-r,P=k-i,A=v*O-y*P;(A*A/_>e||pf((y*O+v*P)/_-.5)>.3||a*p+s*f+u*d<Uf)&&(n(r,i,o,a,s,u,T,k,S,b/=E,x/=E,w,m,g),g.point(T,k),n(T,k,S,b,x,w,l,c,h,p,f,d,m,g))}}return function(e){function r(n,r){n=t(n,r),e.point(n[0],n[1])}function i(){y=NaN,w.point=o,e.lineStart()}function o(r,i){var o=ji([r,i]),a=t(r,i);n(y,v,g,_,b,x,y=a[0],v=a[1],g=r,_=o[0],b=o[1],x=o[2],qf,e),e.point(y,v)}function a(){w.point=r,e.lineEnd()}function s(){i(),w.point=u,w.lineEnd=l}function u(t,e){o(c=t,e),h=y,p=v,f=_,d=b,m=x,w.point=o}function l(){n(y,v,g,_,b,x,h,p,c,f,d,m,qf,e),w.lineEnd=a,a()}var c,h,p,f,d,m,g,y,v,_,b,x,w={point:r,lineStart:i,lineEnd:a,polygonStart:function(){e.polygonStart(),w.lineStart=s},polygonEnd:function(){e.polygonEnd(),w.lineStart=i}};return w}}(t,e):function(t){return eo({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)},Xf=eo({point:function(t,e){this.stream.point(t*hf,e*hf)}});io.invert=function(t,e){return[t,2*ff(gf(e))-sf]},oo.invert=function(t,e){return[-e,2*ff(gf(t))-sf]};var Hf=function(){var t=function(t){function e(){var e=af*s(),a=o(Sf(o.rotate()).invert([0,0]));return l(null==c?[[a[0]-e,a[1]-e],[a[0]+e,a[1]+e]]:t===io?[[Math.max(a[0]-e,c),n],[Math.min(a[0]+e,r),i]]:[[c,Math.max(a[1]-e,n)],[r,Math.min(a[1]+e,i)]])}var n,r,i,o=function(t){return function(t){function e(t){return[(t=l(t[0]*hf,t[1]*hf))[0]*m+a,s-t[1]*m]}function n(t,e){return[(t=o(t,e))[0]*m+a,s-t[1]*m]}function r(){l=Cf(u=Hi(b,x,w),o);var t=o(v,_);return a=g-t[0]*m,s=y+t[1]*m,i()}function i(){return f=d=null,e}var o,a,s,u,l,c,h,p,f,d,m=150,g=480,y=250,v=0,_=0,b=0,x=0,w=0,E=null,C=Vf,S=null,I=Lf,T=.5,k=Gf(n,T);return e.stream=function(t){return f&&d===t?f:f=Xf(C(u,k(I(d=t))))},e.clipAngle=function(t){return arguments.length?(C=+t?function(t,e){function n(t,e){return mf(t)*mf(e)>o}function r(t,e,n){var r=[1,0,0],i=Vi(ji(t),ji(e)),a=Bi(i,i),s=i[0],u=a-s*s;if(!u)return!n&&t;var l=o*a/u,c=-o*s/u,h=Vi(r,i),p=Ui(r,l);qi(p,Ui(i,c));var f=h,d=Bi(p,f),m=Bi(f,f),g=d*d-m*(Bi(p,p)-1);if(!(g<0)){var y=_f(g),v=Ui(f,(-d-y)/m);if(qi(v,p),v=zi(v),!n)return v;var _,b=t[0],x=e[0],w=t[1],E=e[1];x<b&&(_=b,b=x,x=_);var C=x-b,S=pf(C-af)<of;if(!S&&E<w&&(_=w,w=E,E=_),S||C<of?S?w+E>0^v[1]<(pf(v[0]-b)<of?w:E):w<=v[1]&&v[1]<=E:C>af^(b<=v[0]&&v[0]<=x)){var I=Ui(f,(-d+y)/m);return qi(I,p),[v,zi(I)]}}}function i(e,n){var r=a?t:af-t,i=0;return e<-r?i|=1:e>r&&(i|=2),n<-r?i|=4:n>r&&(i|=8),i}var o=mf(t),a=o>0,s=pf(o)>of;return Bf(n,function(t){var e,o,u,l,c;return{lineStart:function(){l=u=!1,c=1},point:function(h,p){var f,d=[h,p],m=n(h,p),g=a?m?0:i(h,p):m?i(h+(h<0?af:-af),p):0;if(!e&&(l=u=m)&&t.lineStart(),m!==u&&(!(f=r(e,d))||kf(e,f)||kf(d,f))&&(d[0]+=of,d[1]+=of,m=n(d[0],d[1])),m!==u)c=0,m?(t.lineStart(),f=r(d,e),t.point(f[0],f[1])):(f=r(e,d),t.point(f[0],f[1]),t.lineEnd()),e=f;else if(s&&e&&a^m){var y;g&o||!(y=r(d,e,!0))||(c=0,a?(t.lineStart(),t.point(y[0][0],y[0][1]),t.point(y[1][0],y[1][1]),t.lineEnd()):(t.point(y[1][0],y[1][1]),t.lineEnd(),t.lineStart(),t.point(y[0][0],y[0][1])))}!m||e&&kf(e,d)||t.point(d[0],d[1]),e=d,u=m,o=g},lineEnd:function(){u&&t.lineEnd(),e=null},clean:function(){return c|(l&&u)<<1}}},function(n,r,i,o){!function(t,e,n,r,i,o){if(n){var a=mf(e),s=vf(e),u=r*n;null==i?(i=e+r*lf,o=e-u/2):(i=Ki(a,i),o=Ki(a,o),(r>0?i<o:i>o)&&(i+=r*lf));for(var l,c=i;r>0?c>o:c<o;c-=u)l=zi([a,-s*mf(c),-s*vf(c)]),t.point(l[0],l[1])}}(o,t,e,i,n,r)},a?[0,-t]:[-af,t-af])}(E=t*hf,6*hf):(E=null,Vf),i()):E*cf},e.clipExtent=function(t){return arguments.length?(I=null==t?(S=c=h=p=null,Lf):function(t,e,n,r){function i(i,o){return t<=i&&i<=n&&e<=o&&o<=r}function o(i,o,s,l){var c=0,h=0;if(null==i||(c=a(i,s))!==(h=a(o,s))||u(i,o)<0^s>0)do{l.point(0===c||3===c?t:n,c>1?r:e)}while((c=(c+s+4)%4)!==h);else l.point(o[0],o[1])}function a(r,i){return pf(r[0]-t)<of?i>0?0:3:pf(r[0]-n)<of?i>0?2:1:pf(r[1]-e)<of?i>0?1:0:i>0?3:2}function s(t,e){return u(t.x,e.x)}function u(t,e){var n=a(t,1),r=a(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(a){function u(t,e){i(t,e)&&x.point(t,e)}function l(o,a){var s=i(o,a);if(h&&p.push([o,a]),_)f=o,d=a,m=s,_=!1,s&&(x.lineStart(),x.point(o,a));else if(s&&v)x.point(o,a);else{var u=[g=Math.max(Mf,Math.min(Af,g)),y=Math.max(Mf,Math.min(Af,y))],l=[o=Math.max(Mf,Math.min(Af,o)),a=Math.max(Mf,Math.min(Af,a))];Tf(u,l,t,e,n,r)?(v||(x.lineStart(),x.point(u[0],u[1])),x.point(l[0],l[1]),s||x.lineEnd(),b=!1):s&&(x.lineStart(),x.point(o,a),b=!1)}g=o,y=a,v=s}var c,h,p,f,d,m,g,y,v,_,b,x=a,w=If(),E={point:u,lineStart:function(){E.point=l,h&&h.push(p=[]),_=!0,v=!1,g=y=NaN},lineEnd:function(){c&&(l(f,d),m&&v&&w.rejoin(),c.push(w.result())),E.point=u,v&&x.lineEnd()},polygonStart:function(){x=w,c=[],h=[],b=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,i=h.length;n<i;++n)for(var o,a,s=h[n],u=1,l=s.length,c=s[0],p=c[0],f=c[1];u<l;++u)o=p,a=f,p=(c=s[u])[0],f=c[1],a<=r?f>r&&(p-o)*(r-a)>(f-a)*(t-o)&&++e:f<=r&&(p-o)*(r-a)<(f-a)*(t-o)&&--e;return e}(),n=b&&e,i=(c=Pf(c)).length;(n||i)&&(a.polygonStart(),n&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),i&&Of(c,s,e,o,a),a.polygonEnd()),x=a,c=h=p=null}};return E}}(S=+t[0][0],c=+t[0][1],h=+t[1][0],p=+t[1][1]),i()):null==S?null:[[S,c],[h,p]]},e.scale=function(t){return arguments.length?(m=+t,r()):m},e.translate=function(t){return arguments.length?(g=+t[0],y=+t[1],r()):[g,y]},e.center=function(t){return arguments.length?(v=t[0]%360*hf,_=t[1]%360*hf,r()):[v*cf,_*cf]},e.rotate=function(t){return arguments.length?(b=t[0]%360*hf,x=t[1]%360*hf,w=t.length>2?t[2]%360*hf:0,r()):[b*cf,x*cf,w*cf]},e.precision=function(t){return arguments.length?(k=Gf(n,T=t*t),i()):_f(T)},e.fitExtent=function(t,n){return ro(e,t,n)},e.fitSize=function(t,n){return function(t,e,n){return ro(t,[[0,0],e],n)}(e,t,n)},function(){return o=t.apply(this,arguments),e.invert=o.invert&&function(t){return(t=l.invert((t[0]-a)/m,(s-t[1])/m))&&[t[0]*cf,t[1]*cf]},r()}}(function(){return t})()}(t),a=o.center,s=o.scale,u=o.translate,l=o.clipExtent,c=null;return o.scale=function(t){return arguments.length?(s(t),e()):s()},o.translate=function(t){return arguments.length?(u(t),e()):u()},o.center=function(t){return arguments.length?(a(t),e()):a()},o.clipExtent=function(t){return arguments.length?(null==t?c=n=r=i=null:(c=+t[0][0],n=+t[0][1],r=+t[1][0],i=+t[1][1]),e()):null==c?null:[[c,n],[r,i]]},e()}(oo),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90]).scale(159.155)};t.projection=ta,t.random=Ns,t.clusters=Ds,t.helpers=xo,t.invariant=Eo,t.meta=wo,t.isolines=function(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");var r=n.zProperty||"elevation",i=n.commonProperties||{},o=n.breaksProperties||[];if(Z(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks must be an Array");if(!C(i))throw new Error("commonProperties must be an Object");if(!Array.isArray(o))throw new Error("breaksProperties must be an Array");var a=function(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.zProperty||"elevation",r=e.flip,i=e.flags;Z(t,"Point","input must contain Points");for(var o=function(t,e){var n={};return A(t,function(t){var e=G(t)[1];n[e]||(n[e]=[]),n[e].push(t)}),Object.keys(n).map(function(t){return n[t].sort(function(t,e){return G(t)[0]-G(e)[0]})}).sort(function(t,n){return e?G(t[0])[1]-G(n[0])[1]:G(n[0])[1]-G(t[0])[1]})}(t,r),a=[],s=0;s<o.length;s++){for(var u=o[s],l=[],c=0;c<u.length;c++){var h=u[c];l.push(h.properties[n]?h.properties[n]:0),!0===i&&(h.properties.matrixPosition=[s,c])}a.push(l)}return a}(t,{zProperty:r,flip:!0});return l(function(t,e,n){var r=q(n),i=r[0],o=r[1],a=(r[2]-r[0])/(e[0].length-1),s=(r[3]-r[1])/(e.length-1),u=function(t){t[0]=t[0]*a+i,t[1]=t[1]*s+o};return t.forEach(function(t){T(t,u)}),t}(function(t,e,n,r,i){for(var o=[],a=1;a<e.length;a++){var s=+e[a],u=Object.assign({},r,i[a]);u[n]=s;var l=c(Q(t,s),u);o.push(l)}return o}(a,e,r,i,o),a,t))},t.convex=Tt,t.pointsWithinPolygon=Pt,t.concave=function(t,n){if(!C(n=n||{}))throw new Error("options is invalid");if(!t)throw new Error("points is required");var r=n.maxEdge||1/0;if(!E(r))throw new Error("maxEdge is invalid");var i=At(function(t){var e=[],n={};return A(t,function(t){if(t.geometry){var r=t.geometry.coordinates.join("-");n.hasOwnProperty(r)||(e.push(t),n[r]=!0)}}),l(e)}(t));if(i.features=i.features.filter(function(t){var e=t.geometry.coordinates[0][0],i=t.geometry.coordinates[0][1],o=t.geometry.coordinates[0][2],a=Nt(e,i,n),s=Nt(i,o,n),u=Nt(e,o,n);return a<=r&&s<=r&&u<=r}),i.features.length<1)return null;var o=function(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==J(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=Dt(t));var r=function(t){var e={};D(t,function(t){e[t.geometry.type]=!0});var n=Object.keys(e);return 1===n.length?n[0]:null}(t);if(!r)throw new Error("geojson must be homogenous");switch(r){case"LineString":return function(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==J(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=Dt(t));var r=[],i=V(t,function(t,e){return function(t,e){var n,r=t.geometry.coordinates,i=e.geometry.coordinates,o=Ht(r[0]),a=Ht(r[r.length-1]),u=Ht(i[0]),l=Ht(i[i.length-1]);if(o===l)n=i.concat(r.slice(1));else if(u===a)n=r.concat(i.slice(1));else if(o===u)n=r.slice(1).reverse().concat(i);else{if(a!==l)return null;n=r.concat(i.reverse().slice(1))}return s(n)}(t,e)||(r.push(t),e)});return i&&r.push(i),r.length?1===r.length?r[0]:c(r.map(function(t){return t.coordinates})):null}(t,e);case"Polygon":return function(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==J(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=Dt(t));var r=[];D(t,function(t){r.push(t.geometry)});var i=function(t,e){function n(t){t&&c.hasOwnProperty(t.type)&&c[t.type](t)}function r(t){var e=[];do{var n=l.get(t);e.push(t[0]<t[1]?n:~n)}while(t=t.next);return e}function i(t){return t.map(r)}var o=function(t){function e(t){null!=t&&l.hasOwnProperty(t.type)&&l[t.type](t)}function n(t){var e=t[0],n=t[1];e<o&&(o=e),e>s&&(s=e),n<a&&(a=n),n>u&&(u=n)}function r(t){t.forEach(n)}function i(t){t.forEach(r)}var o=1/0,a=1/0,s=-1/0,u=-1/0,l={GeometryCollection:function(t){t.geometries.forEach(e)},Point:function(t){n(t.coordinates)},MultiPoint:function(t){t.coordinates.forEach(n)},LineString:function(t){r(t.arcs)},MultiLineString:function(t){t.arcs.forEach(r)},Polygon:function(t){t.arcs.forEach(r)},MultiPolygon:function(t){t.arcs.forEach(i)}};for(var c in t)e(t[c]);return s>=o&&u>=a?[o,a,s,u]:void 0}(t=function(t){var e,n={};for(e in t)n[e]=Vt(t[e]);return n}(t)),a=e>0&&o&&function(t,e,n){function r(t){return[Math.round((t[0]-l)*f),Math.round((t[1]-c)*d)]}function i(t,e){for(var n,r,i,o,a,s=-1,u=0,h=t.length,p=new Array(h);++s<h;)n=t[s],o=Math.round((n[0]-l)*f),a=Math.round((n[1]-c)*d),o===r&&a===i||(p[u++]=[r=o,i=a]);for(p.length=u;u<e;)u=p.push([p[0][0],p[0][1]]);return p}function o(t){return i(t,2)}function a(t){return i(t,4)}function s(t){return t.map(a)}function u(t){null!=t&&m.hasOwnProperty(t.type)&&m[t.type](t)}var l=e[0],c=e[1],h=e[2],p=e[3],f=h-l?(n-1)/(h-l):1,d=p-c?(n-1)/(p-c):1,m={GeometryCollection:function(t){t.geometries.forEach(u)},Point:function(t){t.coordinates=r(t.coordinates)},MultiPoint:function(t){t.coordinates=t.coordinates.map(r)},LineString:function(t){t.arcs=o(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(o)},Polygon:function(t){t.arcs=s(t.arcs)},MultiPolygon:function(t){t.arcs=t.arcs.map(s)}};for(var g in t)u(t[g]);return{scale:[1/f,1/d],translate:[l,c]}}(t,o,e),s=function(t){function e(t){var e,n,r,i,o,a,s,u;if(r=f.get(e=l[t[0]]))for(s=0,u=r.length;s<u;++s)if(function(t,e){var n=t[0],r=e[0],i=t[1];if(n-i!=r-e[1])return!1;for(;n<=i;++n,++r)if(!Ho(l[n],l[r]))return!1;return!0}(i=r[s],t))return t[0]=i[0],void(t[1]=i[1]);if(o=f.get(n=l[t[1]]))for(s=0,u=o.length;s<u;++s)if(a=o[s],function(t,e){var n=a[0],r=a[1],i=e[1];if(n-r!=e[0]-i)return!1;for(;n<=r;++n,--i)if(!Ho(l[n],l[i]))return!1;return!0}(0,t))return t[1]=a[0],void(t[0]=a[1]);r?r.push(t):f.set(e,[t]),o?o.push(t):f.set(n,[t]),d.push(t)}function n(t,e){var n=t[0],r=e[0],o=t[1]-n;if(o!==e[1]-r)return!1;for(var a=i(t),s=i(e),u=0;u<o;++u)if(!Ho(l[n+(u+a)%o],l[r+(u+s)%o]))return!1;return!0}function r(t,e){var n=t[0],r=e[1],o=t[1]-n;if(o!==r-e[0])return!1;for(var a=i(t),s=o-i(e),u=0;u<o;++u)if(!Ho(l[n+(u+a)%o],l[r-(u+s)%o]))return!1;return!0}function i(t){for(var e=t[0],n=t[1],r=e,i=r,o=l[r];++r<n;){var a=l[r];(a[0]<o[0]||a[0]===o[0]&&a[1]<o[1])&&(i=r,o=a)}return i-e}var o,a,s,u,l=t.coordinates,c=t.lines,h=t.rings,p=c.length+h.length;for(delete t.lines,delete t.rings,s=0,u=c.length;s<u;++s)for(o=c[s];o=o.next;)++p;for(s=0,u=h.length;s<u;++s)for(a=h[s];a=a.next;)++p;var f=Xo(2*p*1.4,Ko,Ho),d=t.arcs=[];for(s=0,u=c.length;s<u;++s){o=c[s];do{e(o)}while(o=o.next)}for(s=0,u=h.length;s<u;++s)if((a=h[s]).next)do{e(a)}while(a=a.next);else!function(t){var e,o,a,s,u;if(o=f.get(l[t[0]]))for(s=0,u=o.length;s<u;++s){if(n(a=o[s],t))return t[0]=a[0],void(t[1]=a[1]);if(r(a,t))return t[0]=a[1],void(t[1]=a[0])}if(o=f.get(e=l[t[0]+i(t)]))for(s=0,u=o.length;s<u;++s){if(n(a=o[s],t))return t[0]=a[0],void(t[1]=a[1]);if(r(a,t))return t[0]=a[1],void(t[1]=a[0])}o?o.push(t):f.set(e,[t]),d.push(t)}(a);return t}(function(t){var e,n,r,i=function(t){function e(t,e,n,r){if(p[n]!==t){p[n]=t;var i=f[n];if(i>=0){var o=d[n];i===e&&o===r||i===r&&o===e||(++g,m[n]=1)}else f[n]=e,d[n]=r}}function n(t){return Ko(u[t])}function r(t,e){return Ho(u[t],u[e])}var i,o,a,s,u=t.coordinates,l=t.lines,c=t.rings,h=function(){for(var t=Xo(1.4*u.length,n,r,Int32Array,-1,Int32Array),e=new Int32Array(u.length),i=0,o=u.length;i<o;++i)e[i]=t.maybeSet(i,i);return e}(),p=new Int32Array(u.length),f=new Int32Array(u.length),d=new Int32Array(u.length),m=new Int8Array(u.length),g=0;for(i=0,o=u.length;i<o;++i)p[i]=f[i]=d[i]=-1;for(i=0,o=l.length;i<o;++i){var y=l[i],v=y[0],_=y[1];for(a=h[v],s=h[++v],++g,m[a]=1;++v<=_;)e(i,a,a=s,s=h[v]);++g,m[s]=1}for(i=0,o=u.length;i<o;++i)p[i]=-1;for(i=0,o=c.length;i<o;++i){var b=c[i],x=b[0]+1,w=b[1];for(e(i,h[w-1],a=h[x-1],s=h[x]);++x<=w;)e(i,a,a=s,s=h[x])}p=f=d=null;var E,C=function(t,e,n,r,i){3===arguments.length&&(r=Array,i=null);for(var o=new r(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),a=t-1,s=0;s<t;++s)o[s]=i;return{add:function(r){for(var s=e(r)&a,u=o[s],l=0;u!=i;){if(n(u,r))return!0;if(++l>=t)throw new Error("full hashset");u=o[s=s+1&a]}return o[s]=r,!0},has:function(r){for(var s=e(r)&a,u=o[s],l=0;u!=i;){if(n(u,r))return!0;if(++l>=t)break;u=o[s=s+1&a]}return!1},values:function(){for(var t=[],e=0,n=o.length;e<n;++e){var r=o[e];r!=i&&t.push(r)}return t}}}(1.4*g,Ko,Ho);for(i=0,o=u.length;i<o;++i)m[E=h[i]]&&C.add(u[E]);return C}(t),o=t.coordinates,a=t.lines,s=t.rings;for(n=0,r=a.length;n<r;++n)for(var u=a[n],l=u[0],c=u[1];++l<c;)i.has(o[l])&&(e={0:l,1:u[1]},u[1]=l,u=u.next=e);for(n=0,r=s.length;n<r;++n)for(var h=s[n],p=h[0],f=p,d=h[1],m=i.has(o[p]);++f<d;)i.has(o[f])&&(m?(e={0:f,1:h[1]},h[1]=f,h=h.next=e):(function(t,e,n,r){Bt(t,e,n),Bt(t,e,e+r),Bt(t,e+r,n)}(o,p,d,d-f),o[d]=o[p],m=!0,f=p));return t}(function(t){function e(t){t&&l.hasOwnProperty(t.type)&&l[t.type](t)}function n(t){for(var e=0,n=t.length;e<n;++e)u[++o]=t[e];var r={0:o-n+1,1:o};return a.push(r),r}function r(t){for(var e=0,n=t.length;e<n;++e)u[++o]=t[e];var r={0:o-n+1,1:o};return s.push(r),r}function i(t){return t.map(r)}var o=-1,a=[],s=[],u=[],l={GeometryCollection:function(t){t.geometries.forEach(e)},LineString:function(t){t.arcs=n(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(n)},Polygon:function(t){t.arcs=t.arcs.map(r)},MultiPolygon:function(t){t.arcs=t.arcs.map(i)}};for(var c in t)e(t[c]);return{type:"Topology",coordinates:u,lines:a,rings:s,objects:t}}(t))),u=s.coordinates,l=Xo(1.4*s.arcs.length,Gt,Xt);t=s.objects,s.bbox=o,s.arcs=s.arcs.map(function(t,e){return l.set(t,e),u.slice(t[0],t[1]+1)}),delete s.coordinates,u=null;var c={GeometryCollection:function(t){t.geometries.forEach(n)},LineString:function(t){t.arcs=r(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(r)},Polygon:function(t){t.arcs=t.arcs.map(r)},MultiPolygon:function(t){t.arcs=t.arcs.map(i)}};for(var h in t)n(t[h]);return a&&(s.transform=a,s.arcs=function(t){for(var e=-1,n=t.length;++e<n;){for(var r,i,o=t[e],a=0,s=1,u=o.length,l=o[0],c=l[0],h=l[1];++a<u;)r=(l=o[a])[0],i=l[1],r===c&&i===h||(o[s++]=[r-c,i-h],c=r,h=i);1===s&&(o[s++]=[0,0]),o.length=s}return t}(s.arcs)),s}({geoms:f(r).geometry});return function(t){return jt(t,(function(t,e){function n(t){t.forEach(function(e){e.forEach(function(e){(i[e=e<0?~e:e]||(i[e]=[])).push(t)})}),o.push(t)}function r(e){return function(t){for(var e,n=-1,r=t.length,i=t[r-1],o=0;++n<r;)o+=(e=i)[0]*(i=t[n])[1]-e[1]*i[0];return Math.abs(o)}(jt(t,{type:"Polygon",arcs:[e]}).coordinates[0])}var i={},o=[],a=[];return e.forEach(function t(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(t);break;case"Polygon":n(e.arcs);break;case"MultiPolygon":e.arcs.forEach(n)}}),o.forEach(function(t){if(!t._){var e=[],n=[t];for(t._=1,a.push(e);t=n.pop();)e.push(t),t.forEach(function(t){t.forEach(function(t){i[t<0?~t:t].forEach(function(t){t._||(t._=1,n.push(t))})})})}}),o.forEach(function(t){delete t._}),{type:"MultiPolygon",arcs:a.map(function(e){var n,o=[];if(e.forEach(function(t){t.forEach(function(t){t.forEach(function(t){i[t<0?~t:t].length<2&&o.push(t)})})}),(n=(o=function(t,e){function n(t,e){for(var n in t){var i=t[n];delete e[i.start],delete i.start,delete i.end,i.forEach(function(t){r[t<0?~t:t]=1}),a.push(i)}}var r={},i={},o={},a=[],s=-1;return e.forEach(function(n,r){var i,o=t.arcs[n<0?~n:n];o.length<3&&!o[1][0]&&!o[1][1]&&(i=e[++s],e[s]=n,e[r]=i)}),e.forEach(function(e){var n,r,a=function(e){var n,r=t.arcs[e<0?~e:e],i=r[0];return t.transform?(n=[0,0],r.forEach(function(t){n[0]+=t[0],n[1]+=t[1]})):n=r[r.length-1],e<0?[n,i]:[i,n]}(e),s=a[0],u=a[1];if(n=o[s])if(delete o[n.end],n.push(e),n.end=u,r=i[u]){delete i[r.start];var l=r===n?n:n.concat(r);i[l.start=n.start]=o[l.end=r.end]=l}else i[n.start]=o[n.end]=n;else if(n=i[u])if(delete i[n.start],n.unshift(e),n.start=s,r=o[s]){delete o[r.end];var c=r===n?n:r.concat(n);i[c.start=r.start]=o[c.end=n.end]=c}else i[n.start]=o[n.end]=n;else i[(n=[e]).start=s]=o[n.end=u]=n}),n(o,i),n(i,o),e.forEach(function(t){r[t<0?~t:t]||a.push([t])}),a}(t,o)).length)>1)for(var a,s,u=1,l=r(o[0]);u<n;++u)(a=r(o[u]))>l&&(s=o[0],o[0]=o[u],o[u]=s,l=a);return o})}}).apply(this,arguments))}(i,i.objects.geoms.geometries)}(t,e);default:throw new Error(r+" is not supported")}}(i,n);return 1===o.coordinates.length&&(o.coordinates=o.coordinates[0],o.type="Polygon"),e(o)},t.collect=function(t,e,n,r){var i=To(6),o=e.features.map(function(t){return{minX:t.geometry.coordinates[0],minY:t.geometry.coordinates[1],maxX:t.geometry.coordinates[0],maxY:t.geometry.coordinates[1],property:t.properties[n]}});return i.load(o),t.features.forEach(function(t){t.properties||(t.properties={});var e=q(t),n=[];i.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}).forEach(function(e){kt([e.minX,e.minY],t)&&n.push(e.property)}),t.properties[r]=n}),t},t.flip=function(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if(!t)throw new Error("geojson is required");return!1!==n&&void 0!==n||(t=Dt(t)),T(t,function(t){var e=t[0];t[0]=t[1],t[1]=e}),t},t.simplify=function(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=void 0!==e.tolerance?e.tolerance:1,r=e.highQuality||!1,i=e.mutate||!1;if(!t)throw new Error("geojson is required");if(n&&n<0)throw new Error("invalid tolerance");return!0!==i&&(t=Dt(t)),L(t,function(t){!function(t,e,n){var r=t.type;if("Point"===r||"MultiPoint"===r)return t;Yt(t,!0);var i=t.coordinates;switch(r){case"LineString":t.coordinates=Qt(i,e,n);break;case"MultiLineString":t.coordinates=i.map(function(t){return Qt(t,e,n)});break;case"Polygon":t.coordinates=$t(i,e,n);break;case"MultiPolygon":t.coordinates=i.map(function(t){return $t(t,e,n)})}}(t,n,r)}),t},t.bezierSpline=te,t.tag=function(t,e,n,r){return t=Dt(t),e=Dt(e),A(t,function(t){t.properties||(t.properties={}),A(e,function(e){void 0===t.properties[r]&&kt(t,e)&&(t.properties[r]=e.properties[n])})}),t},t.sample=function(t,e){if(!t)throw new Error("featurecollection is required");if(null===e||void 0===e)throw new Error("num is required");if("number"!=typeof e)throw new Error("num must be a number");return l(function(t,e){for(var n,r,i=t.slice(0),o=t.length,a=o-e;o-- >a;)n=i[r=Math.floor((o+1)*Math.random())],i[r]=i[o],i[o]=n;return i.slice(a)}(t.features,e))},t.envelope=ne,t.square=re,t.circle=oe,t.midpoint=function(t,e){return ie(t,Nt(t,e)/2,ae(t,e))},t.center=se,t.centerOfMass=function t(e,n){switch(J(e)){case"Point":return e;case"Polygon":var i=[];T(e,function(t){i.push(t)});var o,a,s,u,l,c,h,p,f=ue(e,n),d=f.geometry.coordinates,m=0,g=0,y=0,v=i.map(function(t){return[t[0]-d[0],t[1]-d[1]]});for(o=0;o<i.length-1;o++)u=(a=v[o])[0],l=(s=v[o+1])[0],y+=p=u*(h=s[1])-l*(c=a[1]),m+=(u+l)*p,g+=(c+h)*p;if(0===y)return f;var _=1/(.5*y*6);return r([d[0]+_*m,d[1]+_*g],n);default:var b=Tt(e);return b?t(b,n):ue(e,n)}},t.centroid=ue,t.combine=function(t){function n(t,e,n){n?r[e].coordinates=r[e].coordinates.concat(t.geometry.coordinates):r[e].coordinates.push(t.geometry.coordinates),r[e].properties.push(t.properties)}var r={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}},i=Object.keys(r).reduce(function(t,e){return t[e.replace("Multi","")]=e,t},{});return A(t,function(t){t.geometry&&(r[t.geometry.type]?n(t,t.geometry.type,!0):i[t.geometry.type]&&n(t,i[t.geometry.type],!1))}),l(Object.keys(r).filter(function(t){return r[t].coordinates.length}).sort().map(function(t){return e({type:t,coordinates:r[t].coordinates},{collectedProperties:r[t].properties})}))},t.distance=Nt,t.explode=le,t.bbox=q,t.tesselate=function(t){if(!t.geometry||"Polygon"!==t.geometry.type&&"MultiPolygon"!==t.geometry.type)throw new Error("input must be a Polygon or MultiPolygon");var e={type:"FeatureCollection",features:[]};return"Polygon"===t.geometry.type?e.features=Se(t.geometry.coordinates):t.geometry.coordinates.forEach(function(t){e.features=e.features.concat(Se(t))}),e},t.bboxPolygon=ee,t.booleanPointInPolygon=kt,t.nearestPoint=Ie,t.nearestPointOnLine=Ye,t.nearestPointToLine=function(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");var r=n.units,i=n.properties||{};if(!t)throw new Error("points is required");if(!(t=function(t){var e=[];switch(t.geometry?t.geometry.type:t.type){case"GeometryCollection":return L(t,function(t){"Point"===t.type&&e.push({type:"Feature",properties:{},geometry:t})}),{type:"FeatureCollection",features:e};case"FeatureCollection":return t.features=t.features.filter(function(t){return"Point"===t.geometry.type}),t;default:throw new Error("points must be a Point Collection")}}(t)).features.length)throw new Error("points must contain features");if(!e)throw new Error("line is required");if("LineString"!==J(e))throw new Error("line must be a LineString");var o=1/0,a=null;return A(t,function(t){var n=nn(t,e,{units:r});n<o&&(o=n,a=t)}),a&&(a.properties=Object.assign({dist:o},a.properties,i)),a},t.planepoint=function(t,e){var n=U(t),r=W(e).coordinates[0];if(r.length<4)throw new Error("OuterRing of a Polygon must have 4 or more Positions.");var i=e.properties||{},o=i.a,a=i.b,s=i.c,u=n[0],l=n[1],c=r[0][0],h=r[0][1],p=void 0!==o?o:r[0][2],f=r[1][0],d=r[1][1],m=void 0!==a?a:r[1][2],g=r[2][0],y=r[2][1],v=void 0!==s?s:r[2][2];return(v*(u-c)*(l-d)+p*(u-f)*(l-y)+m*(u-g)*(l-h)-m*(u-c)*(l-y)-v*(u-f)*(l-h)-p*(u-g)*(l-d))/((u-c)*(l-d)+(u-f)*(l-y)+(u-g)*(l-h)-(u-c)*(l-y)-(u-f)*(l-h)-(u-g)*(l-d))},t.tin=At,t.bearing=ae,t.destination=ie,t.kinks=function(t){var e,n,i={type:"FeatureCollection",features:[]};if("LineString"===(n="Feature"===t.type?t.geometry:t).type)e=[n.coordinates];else if("MultiLineString"===n.type)e=n.coordinates;else if("MultiPolygon"===n.type)e=[].concat.apply([],n.coordinates);else{if("Polygon"!==n.type)throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");e=n.coordinates}return e.forEach(function(t){e.forEach(function(e){for(var n=0;n<t.length-1;n++)for(var o=n;o<e.length-1;o++){if(t===e){if(1===Math.abs(n-o))continue;if(0===n&&o===t.length-2&&t[n][0]===t[t.length-1][0]&&t[n][1]===t[t.length-1][1])continue}var a=function(t,e,n,r,i,o,a,s){var u,l,c,h,p={x:null,y:null,onLine1:!1,onLine2:!1};return 0==(u=(s-o)*(n-t)-(a-i)*(r-e))?null!==p.x&&null!==p.y&&p:(h=(a-i)*(l=e-o)-(s-o)*(c=t-i),c=((n-t)*l-(r-e)*c)/u,p.x=t+(l=h/u)*(n-t),p.y=e+l*(r-e),l>=0&&l<=1&&(p.onLine1=!0),c>=0&&c<=1&&(p.onLine2=!0),!(!p.onLine1||!p.onLine2)&&[p.x,p.y])}(t[n][0],t[n][1],t[n+1][0],t[n+1][1],e[o][0],e[o][1],e[o+1][0],e[o+1][1]);a&&i.features.push(r([a[0],a[1]]))}})}),i},t.pointOnFeature=on,t.area=sn,t.along=function(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");var i;if("Feature"===t.type)i=t.geometry.coordinates;else{if("LineString"!==t.type)throw new Error("input must be a LineString Feature or Geometry");i=t.coordinates}if(!E(e))throw new Error("distance must be a number");for(var o=0,a=0;a<i.length&&!(e>=o&&a===i.length-1);a++){if(o>=e){var s=e-o;if(s){var u=ae(i[a],i[a-1])-180;return ie(i[a],s,u,n)}return r(i[a])}o+=Nt(i[a],i[a+1],n)}return r(i[i.length-1])},t.length=hn,t.lineSlice=function(t,e,n){var r=G(n);if("LineString"!==J(n))throw new Error("line must be a LineString");for(var i,o=Ye(n,t),a=Ye(n,e),u=[(i=o.properties.index<=a.properties.index?[o,a]:[a,o])[0].geometry.coordinates],l=i[0].properties.index+1;l<i[1].properties.index+1;l++)u.push(r[l]);return u.push(i[1].geometry.coordinates),s(u,n.properties)},t.lineSliceAlong=pn,t.pointGrid=yn,t.truncate=vn,t.flatten=function(t){if(!t)throw new Error("geojson is required");var e=[];return D(t,function(t){e.push(t)}),l(e)},t.lineIntersect=Xe,t.lineChunk=function(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");var r=n.units,i=n.reverse;if(!t)throw new Error("geojson is required");if(e<=0)throw new Error("segmentLength must be greater than 0");var o=[];return D(t,function(t){i&&(t.geometry.coordinates=t.geometry.coordinates.reverse()),function(t,e,n,r){var i=hn(t,{units:n});if(i<=e)return r(t);var o=i/e;Number.isInteger(o)||(o=Math.floor(o)+1);for(var a=0;a<o;a++)r(pn(t,e*a,e*(a+1),{units:n}))}(t,e,r,function(t){o.push(t)})}),l(o)},t.unkinkPolygon=function(t){var e=[];return D(t,function(t){"Polygon"===t.geometry.type&&A(function(t){function e(){for(var t=[],e=0;e<d.features.length;e++)-1==d.features[e].properties.parent&&t.push(e);if(t.length>1)for(e=0;e<t.length;e++){for(var n=-1,r=0;r<d.features.length;r++)t[e]!=r&&kt(d.features[t[e]].geometry.coordinates[0][0],d.features[r],{ignoreBoundary:!0})&&sn(d.features[r])<1/0&&(n=r);d.features[t[e]].properties.parent=n}}function n(){for(var t=0;t<d.features.length;t++)if(-1==d.features[t].properties.parent){var e=d.features[t].properties.winding;d.features[t].properties.netWinding=e,r(t,e)}}function r(t,e){for(var n=0;n<d.features.length;n++)if(d.features[n].properties.parent==t){var i=e+d.features[n].properties.winding;d.features[n].properties.netWinding=i,r(n,i)}}if("Feature"!=t.type)throw new Error("The input must a geojson object of type Feature");if(void 0===t.geometry||null==t.geometry)throw new Error("The input must a geojson object with a non-empty geometry");if("Polygon"!=t.geometry.type)throw new Error("The input must be a geojson Polygon");for(var i=t.geometry.coordinates.length,a=[],s=0;s<i;s++){var u=t.geometry.coordinates[s];xn(u[0],u[u.length-1])||u.push(u[0]),a.push.apply(a,u.slice(0,u.length-1))}if(!function(t){for(var e={},n=1,r=0,i=t.length;r<i;++r){if(e.hasOwnProperty(t[r])){n=0;break}e[t[r]]=1}return n}(a))throw new Error("The input polygon may not have duplicate vertices (except for the first and last vertex of each ring)");var c=a.length,h=function(t,e,n){function r(t,n,r,i){var u,l,c=o[t][n],h=o[t][n+1],p=o[r][i],f=o[r][i+1],d=function(t,e,n,r){if(_n(t,n)||_n(t,r)||_n(e,n)||_n(r,n))return null;var i=t[0],o=t[1],a=e[0],s=e[1],u=n[0],l=n[1],c=r[0],h=r[1],p=(i-a)*(l-h)-(o-s)*(u-c);return 0===p?null:[((i*s-o*a)*(u-c)-(i-a)*(u*h-l*c))/p,((i*s-o*a)*(l-h)-(o-s)*(u*h-l*c))/p]}(c,h,p,f);if(null!==d&&(u=h[0]!==c[0]?(d[0]-c[0])/(h[0]-c[0]):(d[1]-c[1])/(h[1]-c[1]),l=f[0]!==p[0]?(d[0]-p[0])/(f[0]-p[0]):(d[1]-p[1])/(f[1]-p[1]),!(u>=1||u<=0||l>=1||l<=0))){var m=!s[d];m&&(s[d]=!0),a.push(e?e(d,t,n,c,h,u,r,i,p,f,l,m):d)}}function i(t,e){var n,r,i,a,s=o[t][e],u=o[t][e+1];return s[0]<u[0]?(n=s[0],r=u[0]):(n=u[0],r=s[0]),s[1]<u[1]?(i=s[1],a=u[1]):(i=u[1],a=s[1]),{minX:n,minY:i,maxX:r,maxY:a,ring:t,edge:e}}if("Polygon"!==t.geometry.type)throw new Error("The input feature must be a Polygon");void 0===n&&(n=1);var o=t.geometry.coordinates,a=[],s={};if(n){for(var u=[],l=0;l<o.length;l++)for(var c=0;c<o[l].length-1;c++)u.push(i(l,c));var h=To();h.load(u)}for(var p=0;p<o.length;p++)for(var f=0;f<o[p].length-1;f++)if(n)h.search(i(p,f)).forEach(function(t){r(p,f,t.ring,t.edge)});else for(var d=0;d<o.length;d++)for(var m=0;m<o[d].length-1;m++)r(p,f,d,m);return e||(a={type:"Feature",geometry:{type:"MultiPoint",coordinates:a}}),a}(t,function(t,e,n,r,i,o,a,s,u,l,c,h){return[t,e,n,r,i,o,a,s,u,l,c,h]}),p=h.length;if(0==p){var f=[];for(s=0;s<i;s++)f.push(o([t.geometry.coordinates[s]],{parent:-1,winding:function(t){for(var e=0,n=0;n<t.length-1;n++)t[n][0]<t[e][0]&&(e=n);if(bn([t[(e-1).modulo(t.length-1)],t[e],t[(e+1).modulo(t.length-1)]],!0))var r=1;else r=-1;return r}(t.geometry.coordinates[s])}));var d=l(f);return e(),n(),d}var m=[],g=[];for(s=0;s<i;s++){m.push([]);for(var y=0;y<t.geometry.coordinates[s].length-1;y++)m[s].push([new na(t.geometry.coordinates[s][(y+1).modulo(t.geometry.coordinates[s].length-1)],1,[s,y],[s,(y+1).modulo(t.geometry.coordinates[s].length-1)],void 0)]),g.push(new ra(t.geometry.coordinates[s][y],[s,(y-1).modulo(t.geometry.coordinates[s].length-1)],[s,y],void 0,void 0,!1,!0))}for(s=0;s<p;s++)m[h[s][1]][h[s][2]].push(new na(h[s][0],h[s][5],[h[s][1],h[s][2]],[h[s][6],h[s][7]],void 0)),h[s][11]&&g.push(new ra(h[s][0],[h[s][1],h[s][2]],[h[s][6],h[s][7]],void 0,void 0,!0,!0));var v=g.length;for(s=0;s<m.length;s++)for(y=0;y<m[s].length;y++)m[s][y].sort(function(t,e){return t.param<e.param?-1:1});var _=[];for(s=0;s<v;s++)_.push({minX:g[s].coord[0],minY:g[s].coord[1],maxX:g[s].coord[0],maxY:g[s].coord[1],index:s});var b=To();for(b.load(_),s=0;s<m.length;s++)for(y=0;y<m[s].length;y++)for(var x=0;x<m[s][y].length;x++){E=x==m[s][y].length-1?m[s][(y+1).modulo(t.geometry.coordinates[s].length-1)][0].coord:m[s][y][x+1].coord;var w=b.search({minX:E[0],minY:E[1],maxX:E[0],maxY:E[1]})[0];m[s][y][x].nxtIsectAlongEdgeIn=w.index}for(s=0;s<m.length;s++)for(y=0;y<m[s].length;y++)for(x=0;x<m[s][y].length;x++){var E=m[s][y][x].coord,C=(w=b.search({minX:E[0],minY:E[1],maxX:E[0],maxY:E[1]})[0]).index;C<c?g[C].nxtIsectAlongRingAndEdge2=m[s][y][x].nxtIsectAlongEdgeIn:xn(g[C].ringAndEdge1,m[s][y][x].ringAndEdgeIn)?g[C].nxtIsectAlongRingAndEdge1=m[s][y][x].nxtIsectAlongEdgeIn:g[C].nxtIsectAlongRingAndEdge2=m[s][y][x].nxtIsectAlongEdgeIn}var S=[];for(s=0,y=0;y<i;y++){var I=s;for(x=0;x<t.geometry.coordinates[y].length-1;x++)g[s].coord[0]<g[I].coord[0]&&(I=s),s++;var T=g[I].nxtIsectAlongRingAndEdge2;for(x=0;x<g.length;x++)if(g[x].nxtIsectAlongRingAndEdge1==I||g[x].nxtIsectAlongRingAndEdge2==I){var k=x;break}var O=bn([g[k].coord,g[I].coord,g[T].coord],!0)?1:-1;S.push({isect:I,parent:-1,winding:O})}for(S.sort(function(t,e){return g[t.isect].coord>g[e.isect].coord?-1:1}),f=[];S.length>0;){var P=S.pop(),A=P.isect,M=P.parent,R=P.winding,L=f.length,N=[g[A].coord],D=A;if(g[A].ringAndEdge1Walkable)var F=g[A].ringAndEdge1,z=g[A].nxtIsectAlongRingAndEdge1;else F=g[A].ringAndEdge2,z=g[A].nxtIsectAlongRingAndEdge2;for(;!xn(g[A].coord,g[z].coord);){N.push(g[z].coord);var j=void 0;for(s=0;s<S.length;s++)if(S[s].isect==z){j=s;break}if(void 0!=j&&S.splice(j,1),xn(F,g[z].ringAndEdge1)){if(F=g[z].ringAndEdge2,g[z].ringAndEdge2Walkable=!1,g[z].ringAndEdge1Walkable){var B={isect:z};bn([g[D].coord,g[z].coord,g[g[z].nxtIsectAlongRingAndEdge2].coord],1==R)?(B.parent=M,B.winding=-R):(B.parent=L,B.winding=R),S.push(B)}D=z,z=g[z].nxtIsectAlongRingAndEdge2}else F=g[z].ringAndEdge1,g[z].ringAndEdge1Walkable=!1,g[z].ringAndEdge2Walkable&&(B={isect:z},bn([g[D].coord,g[z].coord,g[g[z].nxtIsectAlongRingAndEdge1].coord],1==R)?(B.parent=M,B.winding=-R):(B.parent=L,B.winding=R),S.push(B)),D=z,z=g[z].nxtIsectAlongRingAndEdge1}N.push(g[z].coord),f.push(o([N],{index:L,parent:M,winding:R,netWinding:void 0}))}return d=l(f),e(),n(),d}(t),function(n){e.push(o(n.geometry.coordinates,t.properties))})}),l(e)},t.greatCircle=function(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var r=n.properties,i=n.npoints,o=n.offset;return t=U(t),e=U(e),r=r||{},i=i||100,o=o||10,new la({x:t[0],y:t[1]},{x:e[0],y:e[1]},r).Arc(i,{offset:o}).json()},t.lineSegment=Ge,t.lineSplit=function(t,e){if(!t)throw new Error("line is required");if(!e)throw new Error("splitter is required");var n=J(t),r=J(e);if("LineString"!==n)throw new Error("line must be LineString");if("FeatureCollection"===r)throw new Error("splitter cannot be a FeatureCollection");if("GeometryCollection"===r)throw new Error("splitter cannot be a GeometryCollection");var i=vn(e,{precision:7});switch(r){case"Point":return En(t,i);case"MultiPoint":return wn(t,i);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return wn(t,Xe(t,i))}},t.lineArc=In,t.polygonToLine=kn,t.lineToPolygon=Pn,t.bboxClip=function(t,e){var n=function(t){return t.geometry?t.geometry.type:t.type}(t),r=G(t),i=t.properties;switch(n){case"LineString":case"MultiLineString":var a=[];return"LineString"===n&&(r=[r]),r.forEach(function(t){ca(t,e,a)}),1===a.length?s(a[0],i):c(a,i);case"Polygon":return o(Dn(r,e),i);case"MultiPolygon":return p(r.map(function(t){return Dn(t,e)}),i);default:throw new Error("geometry "+n+" not supported")}},t.lineOverlap=Vn,t.sector=function(t,e,n,r,i){if(!C(i=i||{}))throw new Error("options is invalid");if(!t)throw new Error("center is required");if(void 0===n||null===n)throw new Error("bearing1 is required");if(void 0===r||null===r)throw new Error("bearing2 is required");if(!e)throw new Error("radius is required");if("object"!=typeof i)throw new Error("options must be an object");if(Un(n)===Un(r))return oe(t,e,i);var a=G(t),s=[[a]];return T(In(t,e,n,r,i),function(t){s[0].push(t)}),s[0].push(a),o(s)},t.rhumbBearing=Ze,t.rhumbDistance=Ke,t.rhumbDestination=Gn,t.polygonTangents=function(t,e){var n,i,o,a=G(t),s=G(e);switch(J(e)){case"Polygon":n=s[0][0],i=s[0][0],o=Hn(s[0][0],s[0][s[0].length-1],a);var u=Xn(s[0],a,o,void 0,n,i);n=u[0],i=u[1];break;case"MultiPolygon":n=s[0][0][0],i=s[0][0][0],o=Hn(s[0][0][0],s[0][0][s[0][0].length-1],a),s.forEach(function(t){var e=Xn(t[0],a,o,void 0,n,i);n=e[0],i=e[1]})}return l([r(n),r(i)])},t.rewind=function(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.reverse||!1,r=e.mutate||!1;if(!t)throw new Error("<geojson> is required");if("boolean"!=typeof n)throw new Error("<reverse> must be a boolean");if("boolean"!=typeof r)throw new Error("<mutate> must be a boolean");!1===r&&(t=Dt(t));var i=[];switch(t.type){case"GeometryCollection":return L(t,function(t){Zn(t,n)}),t;case"FeatureCollection":return A(t,function(t){A(Zn(t,n),function(t){i.push(t)})}),l(i)}return Zn(t,n)},t.isobands=function(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");var r=n.zProperty||"elevation",i=n.commonProperties||{},a=n.breaksProperties||[];if(Z(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks is not an Array");if(!C(i))throw new Error("commonProperties is not an Object");if(!Array.isArray(a))throw new Error("breaksProperties is not an Array");var s=function(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.zProperty||"elevation",r=e.flip,i=e.flags;Z(t,"Point","input must contain Points");for(var o=function(t,e){var n={};return A(t,function(t){var e=G(t)[1];n[e]||(n[e]=[]),n[e].push(t)}),Object.keys(n).map(function(t){return n[t].sort(function(t,e){return G(t)[0]-G(e)[0]})}).sort(function(t,n){return e?G(t[0])[1]-G(n[0])[1]:G(n[0])[1]-G(t[0])[1]})}(t,r),a=[],s=0;s<o.length;s++){for(var u=o[s],l=[],c=0;c<u.length;c++){var h=u[c];l.push(h.properties[n]?h.properties[n]:0),!0===i&&(h.properties.matrixPosition=[s,c])}a.push(l)}return a}(t,{zProperty:r,flip:!0}),u=function(t,e,n){for(var r=[],i=1;i<e.length;i++){var a=+e[i-1],s=+e[i],u=Jn(t,a,s-a),l=function(t){var e=[],n=[];u.forEach(function(t){var r=sn(o([t]));n.push(r),e.push({ring:t,area:r})}),n.sort(function(t,e){return e-t});var r=[];return n.forEach(function(t){for(var n=0;n<e.length;n++)if(e[n].area===t){r.push(e[n].ring),e.splice(n,1);break}}),r}(),c=function(t){for(var e=l.map(function(t){return{lrCoordinates:t,grouped:!1}}),n=[];!function(t){for(var e=0;e<t.length;e++)if(!1===t[e].grouped)return!1;return!0}(e);)for(var r=0;r<e.length;r++)if(!e[r].grouped){var i=[];i.push(e[r].lrCoordinates),e[r].grouped=!0;for(var a=o([e[r].lrCoordinates]),s=r+1;s<e.length;s++)if(!e[s].grouped){var u=o([e[s].lrCoordinates]);(function(t,e){for(var n=le(u),r=0;r<n.features.length;r++)if(!kt(n.features[r],e))return!1;return!0})(0,a)&&(i.push(e[s].lrCoordinates),e[s].grouped=!0)}n.push(i)}return n}(),h={};h.groupedRings=c,h[n]=a+"-"+s,r.push(h)}return r}(s,e,r);return l((u=function(t,e,n){var r=q(n),i=r[0],o=r[1],a=(r[2]-r[0])/(e[0].length-1),s=(r[3]-r[1])/(e.length-1),u=function(t){t[0]=t[0]*a+i,t[1]=t[1]*s+o};return t.forEach(function(t){t.groupedRings.forEach(function(t){t.forEach(function(t){t.forEach(u)})})}),t}(u,s,t)).map(function(t,e){if(a[e]&&!C(a[e]))throw new Error("Each mappedProperty is required to be an Object");var n=Object.assign({},i,a[e]);return n[r]=t[r],p(t.groupedRings,n)}))},t.transformRotate=tr,t.transformScale=er,t.transformTranslate=function(t,e,n,r){if(!C(r=r||{}))throw new Error("options is invalid");var i=r.units,o=r.zTranslation,a=r.mutate;if(!t)throw new Error("geojson is required");if(void 0===e||null===e||isNaN(e))throw new Error("distance is required");if(o&&"number"!=typeof o&&isNaN(o))throw new Error("zTranslation is not a number");if(o=void 0!==o?o:0,0===e&&0===o)return t;if(void 0===n||null===n||isNaN(n))throw new Error("direction is required");return e<0&&(e=-e,n=-n),!1!==a&&void 0!==a||(t=Dt(t)),T(t,function(t){var r=G(Gn(t,e,n,{units:i}));t[0]=r[0],t[1]=r[1],o&&3===t.length&&(t[2]+=o)}),t},t.lineOffset=function(t,e,n){if(!C(n=n||{}))throw new Error("options is invalid");var r=n.units;if(!t)throw new Error("geojson is required");if(void 0===e||null===e||isNaN(e))throw new Error("distance is required");var i=J(t),o=t.properties;switch(i){case"LineString":return or(t,e,r);case"MultiLineString":var a=[];return D(t,function(t){a.push(or(t,e,r).geometry.coordinates)}),c(a,o);default:throw new Error("geometry "+i+" is not supported")}},t.polygonize=function(t){var e=ls.fromGeoJson(t);e.deleteDangles(),e.deleteCutEdges();var n=[],r=[];return e.getEdgeRings().filter(function(t){return t.isValid()}).forEach(function(t){t.isHole()?n.push(t):r.push(t)}),n.forEach(function(t){ss.findEdgeRingContaining(t,r)&&r.push(t)}),l(r.map(function(t){return t.toPolygon()}))},t.booleanDisjoint=function(t,e){var n;return D(t,function(t){D(e,function(e){if(!1===n)return!1;n=function(t,e){switch(t.type){case"Point":switch(e.type){case"Point":return!function(t,e){return t[0]===e[0]&&t[1]===e[1]}(t.coordinates,e.coordinates);case"LineString":return!ur(e,t);case"Polygon":return!kt(t,e)}break;case"LineString":switch(e.type){case"Point":return!ur(t,e);case"LineString":return!function(t,e){return Xe(t,e).features.length>0}(t,e);case"Polygon":return!lr(e,t)}break;case"Polygon":switch(e.type){case"Point":return!kt(e,t);case"LineString":return!lr(t,e);case"Polygon":return!function(t,e){for(var n=0;n<t.coordinates[0].length;n++)if(kt(t.coordinates[0][n],e))return!0;for(var r=0;r<e.coordinates[0].length;r++)if(kt(e.coordinates[0][r],t))return!0;return!1}(e,t)}}}(t.geometry,e.geometry)})}),n},t.booleanContains=function(t,e){var n=J(t),r=J(e),i=W(t),o=W(e),a=G(t),s=G(e);switch(n){case"Point":switch(r){case"Point":return hr(a,s);default:throw new Error("feature2 "+r+" geometry not supported")}case"MultiPoint":switch(r){case"Point":return function(t,e){var n,r=!1;for(n=0;n<t.coordinates.length;n++)if(hr(t.coordinates[n],e.coordinates)){r=!0;break}return r}(i,o);case"MultiPoint":return function(t,e){for(var n=0;n<e.coordinates.length;n++){for(var r=!1,i=0;i<t.coordinates.length;i++)if(hr(e.coordinates[n],t.coordinates[i])){r=!0;break}if(!r)return!1}return!0}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"LineString":switch(r){case"Point":return fn(o,i,{ignoreEndVertices:!0});case"LineString":return function(t,e){for(var n=!1,r=0;r<e.coordinates.length;r++)if(fn({type:"Point",coordinates:e.coordinates[r]},t,{ignoreEndVertices:!0})&&(n=!0),!fn({type:"Point",coordinates:e.coordinates[r]},t,{ignoreEndVertices:!1}))return!1;return n}(i,o);case"MultiPoint":return function(t,e){for(var n=!1,r=0;r<e.coordinates.length;r++)if(fn(e.coordinates[r],t,{ignoreEndVertices:!0})&&(n=!0),!fn(e.coordinates[r],t))return!1;return!!n}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"Polygon":switch(r){case"Point":return kt(o,i,{ignoreBoundary:!0});case"LineString":return function(t,e){var n=!1,r=0;if(!cr(q(t),q(e)))return!1;for(;r<e.coordinates.length-1;r++)if(kt({type:"Point",coordinates:function(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}(e.coordinates[r],e.coordinates[r+1])},t,{ignoreBoundary:!0})){n=!0;break}return n}(i,o);case"Polygon":return function(t,e){if(!cr(q(t),q(e)))return!1;for(var n=0;n<e.coordinates[0].length;n++)if(!kt(e.coordinates[0][n],t))return!1;return!0}(i,o);case"MultiPoint":return function(t,e){for(var n=0;n<e.coordinates.length;n++)if(!kt(e.coordinates[n],t,{ignoreBoundary:!0}))return!1;return!0}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}default:throw new Error("feature1 "+n+" geometry not supported")}},t.booleanCrosses=function(t,e){var n=J(t),r=J(e),i=W(t),o=W(e);switch(n){case"MultiPoint":switch(r){case"LineString":return pr(i,o);case"Polygon":return dr(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"LineString":switch(r){case"MultiPoint":return pr(o,i);case"LineString":return function(t,e){if(Xe(t,e).features.length>0)for(var n=0;n<t.coordinates.length-1;n++)for(var r=0;r<e.coordinates.length-1;r++){var i=!0;if(0!==r&&r!==e.coordinates.length-2||(i=!1),mr(t.coordinates[n],t.coordinates[n+1],e.coordinates[r],i))return!0}return!1}(i,o);case"Polygon":return fr(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"Polygon":switch(r){case"MultiPoint":return dr(o,i);case"LineString":return fr(o,i);default:throw new Error("feature2 "+r+" geometry not supported")}default:throw new Error("feature1 "+n+" geometry not supported")}},t.booleanClockwise=Yn,t.booleanOverlap=_r,t.booleanPointOnLine=fn,t.booleanEqual=function(t,e){if(!t)throw new Error("feature1 is required");if(!e)throw new Error("feature2 is required");return J(t)===J(e)&&new ds({precision:6}).compare(Yt(t),Yt(e))},t.booleanWithin=dn,t.clone=Dt,t.cleanCoords=Yt,t.clustersDbscan=function(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var r=n.minPoints,i=n.units;if(Z(t,"Point","Input must contain Points"),null===e||void 0===e)throw new Error("maxDistance is required");if(!(Math.sign(e)>0))throw new Error("Invalid maxDistance");if(!(void 0===r||null===r||Math.sign(r)>0))throw new Error("Invalid minPoints");t=Dt(t),r=r||3;var o=new _s.DBSCAN,a=-1;return o.run(R(t),x(e,i),r,Nt).forEach(function(e){a++,e.forEach(function(e){var n=t.features[e];n.properties||(n.properties={}),n.properties.cluster=a,n.properties.dbscan="core"})}),o.noise.forEach(function(e){var n=t.features[e];n.properties||(n.properties={}),n.properties.dbscan=n.properties.cluster?"edge":"noise"}),t},t.clustersKmeans=function(t,e){if("object"!=typeof(e=e||{}))throw new Error("options is invalid");var n=e.numberOfClusters,r=e.mutate;Z(t,"Point","Input must contain Points");var i=t.features.length;(n=n||Math.round(Math.sqrt(i/2)))>i&&(n=i),!1!==r&&void 0!==r||(t=Dt(t));var o=R(t),a=function(t,e,n,r){var i=[],o=[],a=[],s=[],u=!1,l=1e4,c=t.length,h=t[0].length,p=h>0,f=[];if(n)i="kmrand"==n?function(t,e){for(var n={},r=[],i=e<<2,o=t.length,a=t[0].length>0;r.length<e&&i-- >0;){var s=t[Math.floor(Math.random()*o)],u=a?s.join("_"):""+s;n[u]||(n[u]=!0,r.push(s))}if(r.length<e)throw new Error("Error initializating clusters");return r}(t,e):"kmpp"==n?function(t,e){var n=t[0].length?xs:ws,r=[],i=t.length,o=t[0].length>0,a=t[Math.floor(Math.random()*i)];for(o&&a.join("_"),r.push(a);r.length<e;){for(var s=[],u=r.length,l=0,c=[],h=0;h<i;h++){for(var p=1/0,f=0;f<u;f++){var d=n(t[h],r[f]);d<=p&&(p=d)}s[h]=p}for(var m=0;m<i;m++)l+=s[m];for(var g=0;g<i;g++)c[g]={i:g,v:t[g],pr:s[g]/l,cs:0};c.sort(function(t,e){return t.pr-e.pr}),c[0].cs=c[0].pr;for(var y=1;y<i;y++)c[y].cs=c[y-1].cs+c[y].pr;for(var v=Math.random(),_=0;_<i-1&&c[_++].cs<v;);r.push(c[_-1].v)}return r}(t,e):n;else for(var d={};i.length<e;){var m=Math.floor(Math.random()*c);d[m]||(d[m]=!0,i.push(t[m]))}do{br(e,0,f);for(var g=0;g<c;g++){for(var y=1/0,v=0,_=0;_<e;_++)(s=p?Es(t[g],i[_]):Math.abs(t[g]-i[_]))<=y&&(y=s,v=_);a[g]=v,f[v]++}for(var b=[],x=(o=[],0);x<e;x++)b[x]=p?br(h,0,b[x]):0,o[x]=i[x];if(p){for(var w=0;w<e;w++)i[w]=[];for(var E=0;E<c;E++)for(var C=b[a[E]],S=t[E],I=0;I<h;I++)C[I]+=S[I];u=!0;for(var T=0;T<e;T++){for(var k=i[T],O=b[T],P=o[T],A=f[T],M=0;M<h;M++)k[M]=O[M]/A||0;if(u)for(var R=0;R<h;R++)if(P[R]!=k[R]){u=!1;break}}}else{for(var L=0;L<c;L++)b[a[L]]+=t[L];for(var N=0;N<e;N++)i[N]=b[N]/f[N]||0;u=!0;for(var D=0;D<e;D++)if(o[D]!=i[D]){u=!1;break}}u=u||--l<=0}while(!u);return{it:1e4-l,k:e,idxs:a,centroids:i}}(o,n,o.slice(0,n)),s={};return a.centroids.forEach(function(t,e){s[e]=t}),A(t,function(t,e){var n=a.idxs[e];t.properties.cluster=n,t.properties.centroid=s[n]}),t},t.pointToLineDistance=nn,t.booleanParallel=function(t,e){if(!t)throw new Error("line1 is required");if(!e)throw new Error("line2 is required");if("LineString"!==xr(t,"line1"))throw new Error("line1 must be a LineString");if("LineString"!==xr(e,"line2"))throw new Error("line2 must be a LineString");for(var n=Ge(Yt(t)).features,r=Ge(Yt(e)).features,i=0;i<n.length;i++){var o=n[i].geometry.coordinates;if(!r[i])break;if(!function(t,e){return v(Ze(o[0],o[1]))===v(Ze(e[0],e[1]))}(0,r[i].geometry.coordinates))return!1}return!0},t.shortestPath=function(t,n,i){if(!C(i=i||{}))throw new Error("options is invalid");var o=i.resolution,a=i.minDistance,u=i.obstacles||l([]);if(!t)throw new Error("start is required");if(!n)throw new Error("end is required");if(o&&!E(o)||o<=0)throw new Error("options.resolution must be a number, greater than 0");if(a)throw new Error("options.minDistance is not yet implemented");var c=U(t),h=U(n);switch(t=r(c),n=r(h),J(u)){case"FeatureCollection":if(0===u.features.length)return s([c,h]);break;case"Polygon":u=l([e(W(u))]);break;default:throw new Error("invalid obstacles")}var p=u;p.features.push(t),p.features.push(n);var f=q(er(ee(q(p)),1.15));o||(o=Nt([f[0],f[1]],[f[2],f[1]],i)/100),p.features.pop(),p.features.pop();for(var d=f[0],m=f[1],g=f[2],y=f[3],v=o/Nt([d,m],[g,m],i)*(g-d),_=o/Nt([d,m],[d,y],i)*(y-m),b=g-d,x=y-m,w=(b-Math.floor(b/v)*v)/2,S=[],I=[],T=[],k=[],O=1/0,P=1/0,A=y-(x-Math.floor(x/_)*_)/2,M=0;A>=m;){for(var R=[],L=[],N=d+w,D=0;N<=g;){var F=r([N,A]),z=function(t,e){for(var n=0;n<e.features.length;n++)if(kt(t,e.features[n]))return!0;return!1}(F,u);R.push(z?0:1),L.push(N+"|"+A);var j=Nt(F,t);!z&&j<O&&(O=j,T={x:D,y:M});var B=Nt(F,n);!z&&B<P&&(P=B,k={x:D,y:M}),N+=v,D++}I.push(R),S.push(L),A-=_,M++}var V=new Er(I,{diagonal:!0}),G=[c];return Cs.search(V,V.grid[T.y][T.x],V.grid[k.y][k.x]).forEach(function(t){var e=S[t.x][t.y].split("|");G.push([+e[0],+e[1]])}),G.push(h),Yt(s(G))},t.voronoi=function(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.bbox||[-180,-85,180,85];if(!t)throw new Error("points is required");if(!Array.isArray(n))throw new Error("bbox is invalid");return Z(t,"Point","points"),l(function(){function t(t){return new Kr(t.map(function(r,i){var o=[Math.round(e(r,i,t)/Rs)*Rs,Math.round(n(r,i,t)/Rs)*Rs];return o.index=i,o.data=r,o}),r)}var e=Ir,n=Tr,r=null;return t.polygons=function(e){return t(e).polygons()},t.links=function(e){return t(e).links()},t.triangles=function(e){return t(e).triangles()},t.x=function(n){return arguments.length?(e="function"==typeof n?n:Ss(+n),t):e},t.y=function(e){return arguments.length?(n="function"==typeof e?e:Ss(+e),t):n},t.extent=function(e){return arguments.length?(r=null==e?null:[[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]],t):r&&[[r[0][0],r[0][1]],[r[1][0],r[1][1]]]},t.size=function(e){return arguments.length?(r=null==e?null:[[0,0],[+e[0],+e[1]]],t):r&&[r[1][0]-r[0][0],r[1][1]-r[0][1]]},t}().x(function(t){return t.geometry.coordinates[0]}).y(function(t){return t.geometry.coordinates[1]}).extent([[n[0],n[1]],[n[2],n[3]]]).polygons(t.features).map(Jr))},t.ellipse=Qr,t.centerMean=ti,t.centerMedian=function(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.counter||10;if(!E(n))throw new Error("counter must be a number");var r=e.weight,i=ti(t,{weight:e.weight}),o=l([]);return A(t,function(t){o.features.push(ue(t,{weight:t.properties[r]}))}),o.properties={tolerance:e.tolerance,medianCandidates:[]},ei(i.geometry.coordinates,[0,0],o,n)},t.standardDeviationalEllipse=function(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.steps||64,r=e.weight,i=e.properties||{};if(!E(n))throw new Error("steps must be a number");if(!C(i))throw new Error("properties must be a number");var o=R(t).length,a=ti(t,{weight:r}),s=0,u=0,c=0;A(t,function(t){var e=t.properties[r]||1,n=ni(G(t),G(a));s+=Math.pow(n.x,2)*e,u+=Math.pow(n.y,2)*e,c+=n.x*n.y*e});var h=s-u,p=Math.sqrt(Math.pow(h,2)+4*Math.pow(c,2)),f=Math.atan((h+p)/(2*c)),d=180*f/Math.PI,m=0,g=0,y=0;A(t,function(t){var e=t.properties[r]||1,n=ni(G(t),G(a));m+=Math.pow(n.x*Math.cos(f)-n.y*Math.sin(f),2)*e,g+=Math.pow(n.x*Math.sin(f)+n.y*Math.cos(f),2)*e,y+=e});var v=Math.sqrt(2*m/y),_=Math.sqrt(2*g/y),b=Qr(a,v,_,{units:"degrees",angle:d,steps:n,properties:i}),x=Pt(t,l([b])),w={meanCenterCoordinates:G(a),semiMajorAxis:v,semiMinorAxis:_,numberOfFeatures:o,angle:d,percentageWithinEllipse:100*R(x).length/o};return b.properties.standardDeviationalEllipse=w,b},t.difference=function(t,n){var r=W(t),i=W(n),o=t.properties||{};if(r=Pi(r),i=Pi(i),!r)return null;if(!i)return e(r,o);var a=new Gl,s=a.read(r),u=a.read(i),l=Hp.difference(s,u);return l.isEmpty()?null:e((new Xl).write(l),o)},t.buffer=function(t,e,n){var r=(n=n||{}).units,i=n.steps||64;if(!t)throw new Error("geojson is required");if("object"!=typeof n)throw new Error("options must be an object");if("number"!=typeof i)throw new Error("steps must be an number");if(void 0===e)throw new Error("radius is required");if(i<=0)throw new Error("steps must be greater than 0");i=i||64,r=r||"kilometers";var o=[];switch(t.type){case"GeometryCollection":return L(t,function(t){var n=ao(t,e,r,i);n&&o.push(n)}),l(o);case"FeatureCollection":return A(t,function(t){var n=ao(t,e,r,i);n&&A(n,function(t){t&&o.push(t)})}),l(o)}return ao(t,e,r,i)},t.union=uo,t.intersect=lo,t.dissolve=function(t,e){if(!C(e=e||{}))throw new Error("options is invalid");var n=e.propertyName;Z(t,"Polygon","dissolve");var r=Dt(t),i=r.features,o=[];i.forEach(function(t,e){t.properties.origIndexPosition=e});var a=Ve();for(var u in a.load(r),i){var l=i[u],c=!1;if(a.search(l).features.forEach(function(t){l=i[u];var e=t.properties.origIndexPosition;if(o.length>0&&0!==e)if(e>o[o.length-1])e-=o.length;else{var r=co(e,o);0!==r&&(e-=r)}if(e!==+u){var h=i[e];h&&l&&(void 0!==n&&h.properties[n]!==l.properties[n]||_r(l,h)&&function(t,e){return Xe(s(R(l)),s(R(e))).features.length>0}(0,h)&&(i[u]=uo(l,h),o.push(t.properties.origIndexPosition),o.sort(function(t,e){return t-e}),a.remove(t),i.splice(e,1),l.properties.origIndexPosition=u,a.remove(l,function(t,e){return t.properties.origIndexPosition===e.properties.origIndexPosition}),c=!0))}}),c){if(!l)continue;l.properties.origIndexPosition=u,a.insert(l),u--}}return i.forEach(function(t){delete t.properties.origIndexPosition,delete t.bbox}),r},t.hexGrid=ho,t.mask=function(t,e){var n=o(e&&e.geometry.coordinates||[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]),r=function(t){var e=[],n=[];return D(t,function(t){var r=t.geometry.coordinates,i=r[0],a=r.slice(1);e.push(o([i])),a.forEach(function(t){n.push(o([t]))})}),[l(e),l(n)]}(t),i=r[0],a=r[1];return function(t,e,n){var r=[];return r.push(t.geometry.coordinates[0]),D(e,function(t){r.push(t.geometry.coordinates[0])}),D(n,function(t){r.push(t.geometry.coordinates[0])}),o(r)}(n,i=po(i),a=po(a))},t.squareGrid=mo,t.triangleGrid=go,t.interpolate=function(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var r=n.gridType,i=n.property,o=n.weight;if(!t)throw new Error("points is required");if(Z(t,"Point","input must contain Points"),!e)throw new Error("cellSize is required");if(void 0!==o&&"number"!=typeof o)throw new Error("weight must be a number");i=i||"elevation",r=r||"square",o=o||1;var a,s=q(t);switch(r){case"point":case"points":a=yn(s,e,n);break;case"square":case"squares":a=mo(s,e,n);break;case"hex":case"hexes":a=ho(s,e,n);break;case"triangle":case"triangles":a=go(s,e,n);break;default:throw new Error("invalid gridType")}var u=[];return A(a,function(e){var a=0,s=0;A(t,function(t){var u,l=Nt("point"===r?e:ue(e),t,n);if(void 0!==i&&(u=t.properties[i]),void 0===u&&(u=t.geometry.coordinates[2]),void 0===u)throw new Error("zValue is missing");0===l&&(a=u);var c=1/Math.pow(l,o);s+=c,a+=c*u});var l=Dt(e);l.properties[i]=a/s,u.push(l)}),l(u)},t.pointOnSurface=on,t.polygonToLineString=kn,t.lineStringToPolygon=Pn,t.inside=kt,t.within=Pt,t.bezier=te,t.nearest=Ie,t.pointOnLine=Ye,t.lineDistance=hn,t.radians2degrees=_,t.degrees2radians=b,t.distanceToDegrees=y,t.distanceToRadians=g,t.radiansToDistance=m,t.bearingToAngle=v,t.convertDistance=x,t.toMercator=Je,t.toWgs84=Qe,t.randomPosition=ri,t.randomPoint=ii,t.randomPolygon=oi,t.randomLineString=ai,t.getCluster=ui,t.clusterEach=li,t.clusterReduce=ci,t.createBins=hi,t.applyFilter=pi,t.propertiesContainsFilter=fi,t.filterProperties=di,t.earthRadius=yo,t.factors=vo,t.unitsFactors=_o,t.areaFactors=bo,t.feature=e,t.geometry=n,t.point=r,t.points=i,t.polygon=o,t.polygons=a,t.lineString=s,t.lineStrings=u,t.featureCollection=l,t.multiLineString=c,t.multiPoint=h,t.multiPolygon=p,t.geometryCollection=f,t.round=d,t.radiansToLength=m,t.lengthToRadians=g,t.lengthToDegrees=y,t.bearingToAzimuth=v,t.radiansToDegrees=_,t.degreesToRadians=b,t.convertLength=x,t.convertArea=w,t.isNumber=E,t.isObject=C,t.validateBBox=S,t.validateId=I,t.getCoord=U,t.getCoords=G,t.containsNumber=X,t.geojsonType=H,t.featureOf=Y,t.collectionOf=Z,t.getGeom=W,t.getGeomType=K,t.getType=J,t.coordEach=T,t.coordReduce=k,t.propEach=O,t.propReduce=P,t.featureEach=A,t.featureReduce=M,t.coordAll=R,t.geomEach=L,t.geomReduce=N,t.flattenEach=D,t.flattenReduce=F,t.segmentEach=z,t.segmentReduce=j,t.lineEach=B,t.lineReduce=V,Object.defineProperty(t,"__esModule",{value:!0})}(e)},"E9/g":function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r=n("6Xbx"),i=n("B1iP"),o=n("qLnt"),a=n("grVA"),s=n("V7AE"),u=function(t){function e(n,r,i){switch(t.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=a.a;break;case 1:if(!n){this.destination=a.a;break}if("object"==typeof n){n instanceof e?(this.syncErrorThrowable=n.syncErrorThrowable,this.destination=n,this.destination.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,n));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,n,r,i)}}return Object(r.c)(e,t),e.prototype[s.a]=function(){return this},e.create=function(t,n,r){var i=new e(t,n,r);return i.syncErrorThrowable=!1,i},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parent,e=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=e,this},e}(o.a),l=function(t){function e(e,n,r,o){var s;t.call(this),this._parentSubscriber=e;var u=this;Object(i.a)(n)?s=n:n&&(s=n.next,r=n.error,o=n.complete,n!==a.a&&(u=Object.create(n),Object(i.a)(u.unsubscribe)&&this.add(u.unsubscribe.bind(u)),u.unsubscribe=this.unsubscribe.bind(this))),this._context=u,this._next=s,this._error=r,this._complete=o}return Object(r.c)(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber;if(this._error)e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else{if(!e.syncErrorThrowable)throw this.unsubscribe(),t;e.syncErrorValue=t,e.syncErrorThrown=!0,this.unsubscribe()}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){throw this.unsubscribe(),t}},e.prototype.__tryOrSetError=function(t,e,n){try{e.call(this._context,n)}catch(e){return t.syncErrorValue=e,t.syncErrorThrown=!0,!0}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(u)},"Ecq+":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("6Xbx"),i=function(t){function e(e){t.call(this),this.scheduler=e}return Object(r.c)(e,t),e.create=function(t){return new e(t)},e.dispatch=function(t){t.subscriber.complete()},e.prototype._subscribe=function(t){var n=this.scheduler;if(n)return n.schedule(e.dispatch,0,{subscriber:t});t.complete()},e}(n("AP4T").Observable)},FScj:function(t,e,n){"use strict";e.getIn=function t(e,n){if(!e)return e;if("function"==typeof e.getIn)return e.getIn(n);var r=n[0],i=n.slice(1);return void 0!==e[r]?0===i.length?e[r]:t(e[r],i):void 0}},GQSG:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("AP4T"),i=n("dmC+");r.Observable.prototype.map=i.a},KRwF:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("6Xbx"),i=n("xIGM"),o=function(t){function e(e,n){t.call(this),this.promise=e,this.scheduler=n}return Object(r.c)(e,t),e.create=function(t,n){return new e(t,n)},e.prototype._subscribe=function(t){var e=this,n=this.promise,r=this.scheduler;if(null==r)this._isScalar?t.closed||(t.next(this.value),t.complete()):n.then(function(n){e.value=n,e._isScalar=!0,t.closed||(t.next(n),t.complete())},function(e){t.closed||t.error(e)}).then(null,function(t){i.a.setTimeout(function(){throw t})});else if(this._isScalar){if(!t.closed)return r.schedule(a,0,{value:this.value,subscriber:t})}else n.then(function(n){e.value=n,e._isScalar=!0,t.closed||t.add(r.schedule(a,0,{value:n,subscriber:t}))},function(e){t.closed||t.add(r.schedule(s,0,{err:e,subscriber:t}))}).then(null,function(t){i.a.setTimeout(function(){throw t})})},e}(n("AP4T").Observable);function a(t){var e=t.subscriber;e.closed||(e.next(t.value),e.complete())}function s(t){var e=t.subscriber;e.closed||e.error(t.err)}},LMZF:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),(function(t){n.d(e,"createPlatform",function(){return rn}),n.d(e,"assertPlatform",function(){return an}),n.d(e,"destroyPlatform",function(){return sn}),n.d(e,"getPlatform",function(){return un}),n.d(e,"PlatformRef",function(){return ln}),n.d(e,"ApplicationRef",function(){return hn}),n.d(e,"enableProdMode",function(){return tn}),n.d(e,"isDevMode",function(){return en}),n.d(e,"createPlatformFactory",function(){return on}),n.d(e,"NgProbeToken",function(){return nn}),n.d(e,"APP_ID",function(){return ee}),n.d(e,"PACKAGE_ROOT_URL",function(){return ue}),n.d(e,"PLATFORM_INITIALIZER",function(){return oe}),n.d(e,"PLATFORM_ID",function(){return ae}),n.d(e,"APP_BOOTSTRAP_LISTENER",function(){return se}),n.d(e,"APP_INITIALIZER",function(){return $t}),n.d(e,"ApplicationInitStatus",function(){return te}),n.d(e,"DebugElement",function(){return Dn}),n.d(e,"DebugNode",function(){return Nn}),n.d(e,"asNativeElements",function(){return Fn}),n.d(e,"getDebugNode",function(){return Vn}),n.d(e,"Testability",function(){return He}),n.d(e,"TestabilityRegistry",function(){return Ye}),n.d(e,"setTestabilityGetter",function(){return Ze}),n.d(e,"TRANSLATIONS",function(){return hr}),n.d(e,"TRANSLATIONS_FORMAT",function(){return pr}),n.d(e,"LOCALE_ID",function(){return cr}),n.d(e,"MissingTranslationStrategy",function(){return fr}),n.d(e,"ApplicationModule",function(){return yr}),n.d(e,"wtfCreateScope",function(){return Le}),n.d(e,"wtfLeave",function(){return Ne}),n.d(e,"wtfStartTimeRange",function(){return De}),n.d(e,"wtfEndTimeRange",function(){return Fe}),n.d(e,"Type",function(){return Mt}),n.d(e,"EventEmitter",function(){return ze}),n.d(e,"ErrorHandler",function(){return St}),n.d(e,"Sanitizer",function(){return _r}),n.d(e,"SecurityContext",function(){return vr}),n.d(e,"ANALYZE_FOR_ENTRY_COMPONENTS",function(){return g}),n.d(e,"Attribute",function(){return y}),n.d(e,"ContentChild",function(){return b}),n.d(e,"ContentChildren",function(){return _}),n.d(e,"Query",function(){return v}),n.d(e,"ViewChild",function(){return w}),n.d(e,"ViewChildren",function(){return x}),n.d(e,"Component",function(){return T}),n.d(e,"Directive",function(){return I}),n.d(e,"HostBinding",function(){return A}),n.d(e,"HostListener",function(){return M}),n.d(e,"Input",function(){return O}),n.d(e,"Output",function(){return P}),n.d(e,"Pipe",function(){return k}),n.d(e,"CUSTOM_ELEMENTS_SCHEMA",function(){return R}),n.d(e,"NO_ERRORS_SCHEMA",function(){return L}),n.d(e,"NgModule",function(){return N}),n.d(e,"ViewEncapsulation",function(){return D}),n.d(e,"Version",function(){return F}),n.d(e,"VERSION",function(){return z}),n.d(e,"forwardRef",function(){return $}),n.d(e,"resolveForwardRef",function(){return tt}),n.d(e,"Injector",function(){return ot}),n.d(e,"ReflectiveInjector",function(){return Wt}),n.d(e,"ResolvedReflectiveFactory",function(){return qt}),n.d(e,"ReflectiveKey",function(){return Pt}),n.d(e,"InjectionToken",function(){return u}),n.d(e,"Inject",function(){return j}),n.d(e,"Optional",function(){return B}),n.d(e,"Injectable",function(){return V}),n.d(e,"Self",function(){return q}),n.d(e,"SkipSelf",function(){return U}),n.d(e,"Host",function(){return G}),n.d(e,"NgZone",function(){return je}),n.d(e,"RenderComponentType",function(){return fn}),n.d(e,"Renderer",function(){return mn}),n.d(e,"Renderer2",function(){return _n}),n.d(e,"RendererFactory2",function(){return yn}),n.d(e,"RendererStyleFlags2",function(){return vn}),n.d(e,"RootRenderer",function(){return gn}),n.d(e,"COMPILER_OPTIONS",function(){return fe}),n.d(e,"Compiler",function(){return pe}),n.d(e,"CompilerFactory",function(){return de}),n.d(e,"ModuleWithComponentFactories",function(){return ce}),n.d(e,"ComponentFactory",function(){return ge}),n.d(e,"ComponentRef",function(){return me}),n.d(e,"ComponentFactoryResolver",function(){return we}),n.d(e,"ElementRef",function(){return bn}),n.d(e,"NgModuleFactory",function(){return Ie}),n.d(e,"NgModuleRef",function(){return Se}),n.d(e,"NgModuleFactoryLoader",function(){return xn}),n.d(e,"getModuleFactory",function(){return Cn}),n.d(e,"QueryList",function(){return Sn}),n.d(e,"SystemJsNgModuleLoader",function(){return kn}),n.d(e,"SystemJsNgModuleLoaderConfig",function(){return In}),n.d(e,"TemplateRef",function(){return Pn}),n.d(e,"ViewContainerRef",function(){return An}),n.d(e,"EmbeddedViewRef",function(){return Ln}),n.d(e,"ViewRef",function(){return Rn}),n.d(e,"ChangeDetectionStrategy",function(){return E}),n.d(e,"ChangeDetectorRef",function(){return Mn}),n.d(e,"DefaultIterableDiffer",function(){return Kn}),n.d(e,"IterableDiffers",function(){return ir}),n.d(e,"KeyValueDiffers",function(){return or}),n.d(e,"SimpleChange",function(){return Xn}),n.d(e,"WrappedValue",function(){return Gn}),n.d(e,"platformCore",function(){return lr}),n.d(e,"\u0275ALLOW_MULTIPLE_PLATFORMS",function(){return $e}),n.d(e,"\u0275APP_ID_RANDOM_PROVIDER",function(){return re}),n.d(e,"\u0275devModeEqual",function(){return Un}),n.d(e,"\u0275isListLikeIterable",function(){return Hn}),n.d(e,"\u0275ChangeDetectorStatus",function(){return C}),n.d(e,"\u0275isDefaultChangeDetectionStrategy",function(){return S}),n.d(e,"\u0275Console",function(){return le}),n.d(e,"\u0275ComponentFactory",function(){return ge}),n.d(e,"\u0275CodegenComponentFactoryResolver",function(){return Ee}),n.d(e,"\u0275ReflectionCapabilities",function(){return Nt}),n.d(e,"\u0275RenderDebugInfo",function(){return dn}),n.d(e,"\u0275global",function(){return Y}),n.d(e,"\u0275looseIdentical",function(){return J}),n.d(e,"\u0275stringify",function(){return Q}),n.d(e,"\u0275makeDecorator",function(){return p}),n.d(e,"\u0275isObservable",function(){return Qt}),n.d(e,"\u0275isPromise",function(){return Jt}),n.d(e,"\u0275clearOverrides",function(){return Za}),n.d(e,"\u0275overrideComponentView",function(){return Ya}),n.d(e,"\u0275overrideProvider",function(){return Ha}),n.d(e,"\u0275NOT_FOUND_CHECK_ONLY_ELEMENT_INJECTOR",function(){return vo}),n.d(e,"\u0275defineComponent",function(){return eu}),n.d(e,"\u0275detectChanges",function(){return tu}),n.d(e,"\u0275renderComponent",function(){return $s}),n.d(e,"\u0275C",function(){return Bs}),n.d(e,"\u0275D",function(){return js}),n.d(e,"\u0275E",function(){return Os}),n.d(e,"\u0275T",function(){return Fs}),n.d(e,"\u0275V",function(){return Gs}),n.d(e,"\u0275b",function(){return Ws}),n.d(e,"\u0275b1",function(){return Ks}),n.d(e,"\u0275c",function(){return Vs}),n.d(e,"\u0275cR",function(){return qs}),n.d(e,"\u0275cr",function(){return Us}),n.d(e,"\u0275e",function(){return Rs}),n.d(e,"\u0275p",function(){return Ls}),n.d(e,"\u0275s",function(){return Ds}),n.d(e,"\u0275t",function(){return zs}),n.d(e,"\u0275v",function(){return Xs}),n.d(e,"\u0275registerModuleFactory",function(){return En}),n.d(e,"\u0275EMPTY_ARRAY",function(){return gi}),n.d(e,"\u0275EMPTY_MAP",function(){return yi}),n.d(e,"\u0275and",function(){return vi}),n.d(e,"\u0275ccf",function(){return Fi}),n.d(e,"\u0275cmf",function(){return Wa}),n.d(e,"\u0275crt",function(){return zr}),n.d(e,"\u0275did",function(){return so}),n.d(e,"\u0275eld",function(){return _i}),n.d(e,"\u0275elementEventFullName",function(){return Kr}),n.d(e,"\u0275getComponentViewDefinitionFactory",function(){return zi}),n.d(e,"\u0275inlineInterpolate",function(){return di}),n.d(e,"\u0275interpolate",function(){return fi}),n.d(e,"\u0275mod",function(){return ki}),n.d(e,"\u0275mpd",function(){return Ti}),n.d(e,"\u0275ncd",function(){return Po}),n.d(e,"\u0275nov",function(){return Wi}),n.d(e,"\u0275pid",function(){return uo}),n.d(e,"\u0275prd",function(){return lo}),n.d(e,"\u0275pad",function(){return Ro}),n.d(e,"\u0275pod",function(){return Lo}),n.d(e,"\u0275ppd",function(){return Mo}),n.d(e,"\u0275qud",function(){return So}),n.d(e,"\u0275ted",function(){return Do}),n.d(e,"\u0275unv",function(){return Nr}),n.d(e,"\u0275vid",function(){return jo}),n.d(e,"AUTO_STYLE",function(){return fu}),n.d(e,"trigger",function(){return du}),n.d(e,"animate",function(){return mu}),n.d(e,"group",function(){return gu}),n.d(e,"sequence",function(){return yu}),n.d(e,"style",function(){return vu}),n.d(e,"state",function(){return _u}),n.d(e,"keyframes",function(){return bu}),n.d(e,"transition",function(){return xu}),n.d(e,"\u0275bf",function(){return au}),n.d(e,"\u0275bg",function(){return su}),n.d(e,"\u0275bk",function(){return hu}),n.d(e,"\u0275bh",function(){return uu}),n.d(e,"\u0275bj",function(){return cu}),n.d(e,"\u0275bi",function(){return lu}),n.d(e,"\u0275bl",function(){return pu}),n.d(e,"\u0275be",function(){return ou}),n.d(e,"\u0275n",function(){return dr}),n.d(e,"\u0275o",function(){return mr}),n.d(e,"\u0275q",function(){return gr}),n.d(e,"\u0275i",function(){return ne}),n.d(e,"\u0275j",function(){return sr}),n.d(e,"\u0275k",function(){return ur}),n.d(e,"\u0275l",function(){return Zn}),n.d(e,"\u0275m",function(){return er}),n.d(e,"\u0275f",function(){return Kt}),n.d(e,"\u0275g",function(){return jt}),n.d(e,"\u0275h",function(){return Gt}),n.d(e,"\u0275r",function(){return Me}),n.d(e,"\u0275w",function(){return ke}),n.d(e,"\u0275u",function(){return Te}),n.d(e,"\u0275z",function(){return Ae}),n.d(e,"\u0275x",function(){return Oe}),n.d(e,"\u0275y",function(){return Pe}),n.d(e,"\u0275bc",function(){return cs}),n.d(e,"\u0275a",function(){return d}),n.d(e,"\u0275d",function(){return m}),n.d(e,"\u0275ba",function(){return co}),n.d(e,"\u0275bb",function(){return Tr});var r=n("6Xbx"),i=n("AP4T"),o=n("2kLc"),a=n("URbD"),s=n("TO51"),u=function(){function t(t){this._desc=t,this.ngMetadataName="InjectionToken"}return t.prototype.toString=function(){return"InjectionToken "+this._desc},t}(),l="__annotations__",c="__paramaters__",h="__prop__metadata__";function p(t,e,n,r){var i=f(e);function o(t){if(this instanceof o)return i.call(this,t),this;var e=new o(t),n=function(t){return(t.hasOwnProperty(l)?t[l]:Object.defineProperty(t,l,{value:[]})[l]).push(e),t};return r&&r(n),n}return n&&(o.prototype=Object.create(n.prototype)),o.prototype.ngMetadataName=t,o.annotationCls=o,o}function f(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(t){var r=t.apply(void 0,e);for(var i in r)this[i]=r[i]}}}function d(t,e,n){var r=f(e);function i(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(this instanceof i)return r.apply(this,t),this;var n,o=new((n=i).bind.apply(n,[void 0].concat(t)));return a.annotation=o,a;function a(t,e,n){for(var r=t.hasOwnProperty(c)?t[c]:Object.defineProperty(t,c,{value:[]})[c];r.length<=n;)r.push(null);return(r[n]=r[n]||[]).push(o),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i}function m(t,e,n){var r=f(e);function i(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(this instanceof i)return r.apply(this,t),this;var n,o=new((n=i).bind.apply(n,[void 0].concat(t)));return function(t,e){var n=t.constructor,r=n.hasOwnProperty(h)?n[h]:Object.defineProperty(n,h,{value:{}})[h];r[e]=r.hasOwnProperty(e)&&r[e]||[],r[e].unshift(o)}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i}var g=new u("AnalyzeForEntryComponents"),y=d("Attribute",function(t){return{attributeName:t}}),v=function(){},_=m("ContentChildren",function(t,e){return void 0===e&&(e={}),Object(r.a)({selector:t,first:!1,isViewQuery:!1,descendants:!1},e)},v),b=m("ContentChild",function(t,e){return void 0===e&&(e={}),Object(r.a)({selector:t,first:!0,isViewQuery:!1,descendants:!0},e)},v),x=m("ViewChildren",function(t,e){return void 0===e&&(e={}),Object(r.a)({selector:t,first:!1,isViewQuery:!0,descendants:!0},e)},v),w=m("ViewChild",function(t,e){return Object(r.a)({selector:t,first:!0,isViewQuery:!0,descendants:!0},e)},v),E=function(){var t={OnPush:0,Default:1};return t[t.OnPush]="OnPush",t[t.Default]="Default",t}(),C=function(){var t={CheckOnce:0,Checked:1,CheckAlways:2,Detached:3,Errored:4,Destroyed:5};return t[t.CheckOnce]="CheckOnce",t[t.Checked]="Checked",t[t.CheckAlways]="CheckAlways",t[t.Detached]="Detached",t[t.Errored]="Errored",t[t.Destroyed]="Destroyed",t}();function S(t){return null==t||t===E.Default}var I=p("Directive",function(t){return void 0===t&&(t={}),t}),T=p("Component",function(t){return void 0===t&&(t={}),Object(r.a)({changeDetection:E.Default},t)},I),k=p("Pipe",function(t){return Object(r.a)({pure:!0},t)}),O=m("Input",function(t){return{bindingPropertyName:t}}),P=m("Output",function(t){return{bindingPropertyName:t}}),A=m("HostBinding",function(t){return{hostPropertyName:t}}),M=m("HostListener",function(t,e){return{eventName:t,args:e}}),R={name:"custom-elements"},L={name:"no-errors-schema"},N=p("NgModule",function(t){return t}),D=function(){var t={Emulated:0,Native:1,None:2};return t[t.Emulated]="Emulated",t[t.Native]="Native",t[t.None]="None",t}(),F=function(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")},z=new F("5.2.3"),j=d("Inject",function(t){return{token:t}}),B=d("Optional"),V=p("Injectable"),q=d("Self"),U=d("SkipSelf"),G=d("Host"),X="undefined"!=typeof window&&window,H="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Y=X||"undefined"!=typeof t&&t||H,Z=null;function W(){if(!Z){var t=Y.Symbol;if(t&&t.iterator)Z=t.iterator;else for(var e=Object.getOwnPropertyNames(Map.prototype),n=0;n<e.length;++n){var r=e[n];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(Z=r)}}return Z}function K(t){Zone.current.scheduleMicroTask("scheduleMicrotask",t)}function J(t,e){return t===e||"number"==typeof t&&"number"==typeof e&&isNaN(t)&&isNaN(e)}function Q(t){if("string"==typeof t)return t;if(t instanceof Array)return"["+t.map(Q).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return""+t.overriddenName;if(t.name)return""+t.name;var e=t.toString();if(null==e)return""+e;var n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function $(t){return t.__forward_ref__=$,t.toString=function(){return Q(this())},t}function tt(t){return"function"==typeof t&&t.hasOwnProperty("__forward_ref__")&&t.__forward_ref__===$?t():t}var et="__source",nt=new Object,rt=nt,it=function(){function t(){}return t.prototype.get=function(t,e){if(void 0===e&&(e=nt),e===nt)throw new Error("NullInjectorError: No provider for "+Q(t)+"!");return e},t}(),ot=function(){function t(){}return t.create=function(t,e){return Array.isArray(t)?new mt(t,e):new mt(t.providers,t.parent,t.name||null)},t.THROW_IF_NOT_FOUND=nt,t.NULL=new it,t}(),at=function(t){return t},st=[],ut=at,lt=function(){return Array.prototype.slice.call(arguments)},ct={},ht=function(t){for(var e in t)if(t[e]===ct)return e;throw Error("!prop")}({provide:String,useValue:ct}),pt=ot.NULL,ft=/\n/gm,dt="\u0275",mt=function(){function t(t,e,n){void 0===e&&(e=pt),void 0===n&&(n=null),this.parent=e,this.source=n;var r=this._records=new Map;r.set(ot,{token:ot,fn:at,deps:st,value:this,useNew:!1}),function t(e,n){if(n)if((n=tt(n))instanceof Array)for(var r=0;r<n.length;r++)t(e,n[r]);else{if("function"==typeof n)throw vt("Function/Class not supported",n);if(!n||"object"!=typeof n||!n.provide)throw vt("Unexpected provider",n);var i=tt(n.provide),o=function(t){var e=function(t){var e=st,n=t.deps;if(n&&n.length){e=[];for(var r=0;r<n.length;r++){var i=6;if((u=tt(n[r]))instanceof Array)for(var o=0,a=u;o<a.length;o++){var s=a[o];s instanceof B||s==B?i|=1:s instanceof U||s==U?i&=-3:s instanceof q||s==q?i&=-5:u=s instanceof j?s.token:tt(s)}e.push({token:u,options:i})}}else if(t.useExisting){var u;e=[{token:u=tt(t.useExisting),options:6}]}else if(!(n||ht in t))throw vt("'deps' required",t);return e}(t),n=at,r=st,i=!1,o=tt(t.provide);if(ht in t)r=t.useValue;else if(t.useFactory)n=t.useFactory;else if(t.useExisting);else if(t.useClass)i=!0,n=tt(t.useClass);else{if("function"!=typeof o)throw vt("StaticProvider does not have [useValue|useFactory|useExisting|useClass] or [provide] is not newable",t);i=!0,n=o}return{deps:e,fn:n,useNew:i,value:r}}(n);if(!0===n.multi){var a=e.get(i);if(a){if(a.fn!==lt)throw gt(i)}else e.set(i,a={token:n.provide,deps:[],useNew:!1,fn:lt,value:st});a.deps.push({token:i=n,options:6})}var s=e.get(i);if(s&&s.fn==lt)throw gt(i);e.set(i,o)}}(r,t)}return t.prototype.get=function(t,e){var n=this._records.get(t);try{return function t(e,n,r,i,o){try{return function(e,n,r,i,o){var a,s;if(n){if((a=n.value)==ut)throw Error(dt+"Circular dependency");if(a===st){n.value=ut;var u=n.useNew,l=n.fn,c=n.deps,h=st;if(c.length){h=[];for(var p=0;p<c.length;p++){var f=c[p],d=f.options,m=2&d?r.get(f.token):void 0;h.push(t(f.token,m,r,m||4&d?i:pt,1&d?null:ot.THROW_IF_NOT_FOUND))}}n.value=a=u?new((s=l).bind.apply(s,[void 0].concat(h))):l.apply(void 0,h)}}else a=i.get(e,o);return a}(e,n,r,i,o)}catch(t){throw t instanceof Error||(t=new Error(t)),(t.ngTempTokenPath=t.ngTempTokenPath||[]).unshift(e),n&&n.value==ut&&(n.value=st),t}}(t,n,this._records,this.parent,e)}catch(e){var r=e.ngTempTokenPath;throw t[et]&&r.unshift(t[et]),e.message=yt("\n"+e.message,r,this.source),e.ngTokenPath=r,e.ngTempTokenPath=null,e}},t.prototype.toString=function(){var t=[];return this._records.forEach(function(e,n){return t.push(Q(n))}),"StaticInjector["+t.join(", ")+"]"},t}();function gt(t){return vt("Cannot mix multi providers and regular providers",t)}function yt(t,e,n){void 0===n&&(n=null),t=t&&"\n"===t.charAt(0)&&t.charAt(1)==dt?t.substr(2):t;var r=Q(e);if(e instanceof Array)r=e.map(Q).join(" -> ");else if("object"==typeof e){var i=[];for(var o in e)if(e.hasOwnProperty(o)){var a=e[o];i.push(o+":"+("string"==typeof a?JSON.stringify(a):Q(a)))}r="{"+i.join(", ")+"}"}return"StaticInjectorError"+(n?"("+n+")":"")+"["+r+"]: "+t.replace(ft,"\n  ")}function vt(t,e){return new Error(yt(t,e))}var _t="ngDebugContext",bt="ngOriginalError",xt="ngErrorLogger";function wt(t){return t[_t]}function Et(t){return t[bt]}function Ct(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t.error.apply(t,e)}var St=function(){function t(){this._console=console}return t.prototype.handleError=function(t){var e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t[xt]||Ct}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)},t.prototype._findContext=function(t){return t?wt(t)?wt(t):this._findContext(Et(t)):null},t.prototype._findOriginalError=function(t){for(var e=Et(t);e&&Et(e);)e=Et(e);return e},t}();function It(t){return t.length>1?" ("+function(t){for(var e=[],n=0;n<t.length;++n){if(e.indexOf(t[n])>-1)return e.push(t[n]),e;e.push(t[n])}return e}(t.slice().reverse()).map(function(t){return Q(t.token)}).join(" -> ")+")":""}function Tt(t,e,n,r){var i=[e],o=n(i),a=r?function(t,e){var n=o+" caused by: "+(e instanceof Error?e.message:e),r=Error(n);return r[bt]=e,r}(0,r):Error(o);return a.addKey=kt,a.keys=i,a.injectors=[t],a.constructResolvingMessage=n,a[bt]=r,a}function kt(t,e){this.injectors.push(t),this.keys.push(e),this.message=this.constructResolvingMessage(this.keys)}function Ot(t,e){for(var n=[],r=0,i=e.length;r<i;r++){var o=e[r];n.push(o&&0!=o.length?o.map(Q).join(" "):"?")}return Error("Cannot resolve all parameters for '"+Q(t)+"'("+n.join(", ")+"). Make sure that all the parameters are decorated with Inject or have valid type annotations and that '"+Q(t)+"' is decorated with Injectable.")}var Pt=function(){function t(t,e){if(this.token=t,this.id=e,!t)throw new Error("Token must be defined!");this.displayName=Q(this.token)}return t.get=function(t){return At.get(tt(t))},Object.defineProperty(t,"numberOfKeys",{get:function(){return At.numberOfKeys},enumerable:!0,configurable:!0}),t}(),At=new(function(){function t(){this._allKeys=new Map}return t.prototype.get=function(t){if(t instanceof Pt)return t;if(this._allKeys.has(t))return this._allKeys.get(t);var e=new Pt(t,Pt.numberOfKeys);return this._allKeys.set(t,e),e},Object.defineProperty(t.prototype,"numberOfKeys",{get:function(){return this._allKeys.size},enumerable:!0,configurable:!0}),t}()),Mt=Function;function Rt(t){return"function"==typeof t}var Lt=/^function\s+\S+\(\)\s*{[\s\S]+\.apply\(this,\s*arguments\)/,Nt=function(){function t(t){this._reflect=t||Y.Reflect}return t.prototype.isReflectionEnabled=function(){return!0},t.prototype.factory=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return new(t.bind.apply(t,[void 0].concat(e)))}},t.prototype._zipTypesAndAnnotations=function(t,e){var n;n="undefined"==typeof t?new Array(e.length):new Array(t.length);for(var r=0;r<n.length;r++)n[r]="undefined"==typeof t?[]:t[r]!=Object?[t[r]]:[],e&&null!=e[r]&&(n[r]=n[r].concat(e[r]));return n},t.prototype._ownParameters=function(t,e){if(Lt.exec(t.toString()))return null;if(t.parameters&&t.parameters!==e.parameters)return t.parameters;var n=t.ctorParameters;if(n&&n!==e.ctorParameters){var r="function"==typeof n?n():n,i=r.map(function(t){return t&&t.type}),o=r.map(function(t){return t&&Dt(t.decorators)});return this._zipTypesAndAnnotations(i,o)}var a=t.hasOwnProperty(c)&&t[c],s=this._reflect&&this._reflect.getOwnMetadata&&this._reflect.getOwnMetadata("design:paramtypes",t);return s||a?this._zipTypesAndAnnotations(s,a):new Array(t.length).fill(void 0)},t.prototype.parameters=function(t){if(!Rt(t))return[];var e=Ft(t),n=this._ownParameters(t,e);return n||e===Object||(n=this.parameters(e)),n||[]},t.prototype._ownAnnotations=function(t,e){if(t.annotations&&t.annotations!==e.annotations){var n=t.annotations;return"function"==typeof n&&n.annotations&&(n=n.annotations),n}return t.decorators&&t.decorators!==e.decorators?Dt(t.decorators):t.hasOwnProperty(l)?t[l]:null},t.prototype.annotations=function(t){if(!Rt(t))return[];var e=Ft(t),n=this._ownAnnotations(t,e)||[];return(e!==Object?this.annotations(e):[]).concat(n)},t.prototype._ownPropMetadata=function(t,e){if(t.propMetadata&&t.propMetadata!==e.propMetadata){var n=t.propMetadata;return"function"==typeof n&&n.propMetadata&&(n=n.propMetadata),n}if(t.propDecorators&&t.propDecorators!==e.propDecorators){var r=t.propDecorators,i={};return Object.keys(r).forEach(function(t){i[t]=Dt(r[t])}),i}return t.hasOwnProperty(h)?t[h]:null},t.prototype.propMetadata=function(t){if(!Rt(t))return{};var e=Ft(t),n={};if(e!==Object){var r=this.propMetadata(e);Object.keys(r).forEach(function(t){n[t]=r[t]})}var i=this._ownPropMetadata(t,e);return i&&Object.keys(i).forEach(function(t){var e=[];n.hasOwnProperty(t)&&e.push.apply(e,n[t]),e.push.apply(e,i[t]),n[t]=e}),n},t.prototype.hasLifecycleHook=function(t,e){return t instanceof Mt&&e in t.prototype},t.prototype.guards=function(t){return{}},t.prototype.getter=function(t){return new Function("o","return o."+t+";")},t.prototype.setter=function(t){return new Function("o","v","return o."+t+" = v;")},t.prototype.method=function(t){return new Function("o","args","if (!o."+t+") throw new Error('\""+t+"\" is undefined');\n        return o."+t+".apply(o, args);")},t.prototype.importUri=function(t){return"object"==typeof t&&t.filePath?t.filePath:"./"+Q(t)},t.prototype.resourceUri=function(t){return"./"+Q(t)},t.prototype.resolveIdentifier=function(t,e,n,r){return r},t.prototype.resolveEnum=function(t,e){return t[e]},t}();function Dt(t){return t?t.map(function(t){var e=t.type.annotationCls;return new(e.bind.apply(e,[void 0].concat(t.args?t.args:[])))}):[]}function Ft(t){var e=Object.getPrototypeOf(t.prototype);return(e?e.constructor:null)||Object}var zt=new(function(){function t(t){this.reflectionCapabilities=t}return t.prototype.updateCapabilities=function(t){this.reflectionCapabilities=t},t.prototype.factory=function(t){return this.reflectionCapabilities.factory(t)},t.prototype.parameters=function(t){return this.reflectionCapabilities.parameters(t)},t.prototype.annotations=function(t){return this.reflectionCapabilities.annotations(t)},t.prototype.propMetadata=function(t){return this.reflectionCapabilities.propMetadata(t)},t.prototype.hasLifecycleHook=function(t,e){return this.reflectionCapabilities.hasLifecycleHook(t,e)},t.prototype.getter=function(t){return this.reflectionCapabilities.getter(t)},t.prototype.setter=function(t){return this.reflectionCapabilities.setter(t)},t.prototype.method=function(t){return this.reflectionCapabilities.method(t)},t.prototype.importUri=function(t){return this.reflectionCapabilities.importUri(t)},t.prototype.resourceUri=function(t){return this.reflectionCapabilities.resourceUri(t)},t.prototype.resolveIdentifier=function(t,e,n,r){return this.reflectionCapabilities.resolveIdentifier(t,e,n,r)},t.prototype.resolveEnum=function(t,e){return this.reflectionCapabilities.resolveEnum(t,e)},t}())(new Nt),jt=function(){function t(t,e,n){this.key=t,this.optional=e,this.visibility=n}return t.fromKey=function(e){return new t(e,!1,null)},t}(),Bt=[],Vt=function(t,e,n){this.key=t,this.resolvedFactories=e,this.multiProvider=n,this.resolvedFactory=this.resolvedFactories[0]},qt=function(t,e){this.factory=t,this.dependencies=e};function Ut(t){return new Vt(Pt.get(t.provide),[function(t){var e,n;if(t.useClass){var r=tt(t.useClass);e=zt.factory(r),n=Xt(r)}else t.useExisting?(e=function(t){return t},n=[jt.fromKey(Pt.get(t.useExisting))]):t.useFactory?(e=t.useFactory,n=function(t,e){if(e){var n=e.map(function(t){return[t]});return e.map(function(e){return Ht(t,e,n)})}return Xt(t)}(t.useFactory,t.deps)):(e=function(){return t.useValue},n=Bt);return new qt(e,n)}(t)],t.multi||!1)}function Gt(t){var e=function(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=e.get(r.key.id);if(i){if(r.multiProvider!==i.multiProvider)throw Error("Cannot mix multi providers and regular providers, got: "+i+" "+r);if(r.multiProvider)for(var o=0;o<r.resolvedFactories.length;o++)i.resolvedFactories.push(r.resolvedFactories[o]);else e.set(r.key.id,r)}else{var a;a=r.multiProvider?new Vt(r.key,r.resolvedFactories.slice(),r.multiProvider):r,e.set(r.key.id,a)}}return e}(function t(e,n){return e.forEach(function(e){if(e instanceof Mt)n.push({provide:e,useClass:e});else if(e&&"object"==typeof e&&void 0!==e.provide)n.push(e);else{if(!(e instanceof Array))throw Error("Invalid provider - only instances of Provider and Type are allowed, got: "+e);t(e,n)}}),n}(t,[]).map(Ut),new Map);return Array.from(e.values())}function Xt(t){var e=zt.parameters(t);if(!e)return[];if(e.some(function(t){return null==t}))throw Ot(t,e);return e.map(function(n){return Ht(t,n,e)})}function Ht(t,e,n){var r=null,i=!1;if(!Array.isArray(e))return Yt(e instanceof j?e.token:e,i,null);for(var o=null,a=0;a<e.length;++a){var s=e[a];s instanceof Mt?r=s:s instanceof j?r=s.token:s instanceof B?i=!0:s instanceof q||s instanceof U?o=s:s instanceof u&&(r=s)}if(null!=(r=tt(r)))return Yt(r,i,o);throw Ot(t,n)}function Yt(t,e,n){return new jt(Pt.get(t),e,n)}var Zt=new Object,Wt=function(){function t(){}return t.resolve=function(t){return Gt(t)},t.resolveAndCreate=function(e,n){var r=t.resolve(e);return t.fromResolvedProviders(r,n)},t.fromResolvedProviders=function(t,e){return new Kt(t,e)},t}(),Kt=function(){function t(t,e){this._constructionCounter=0,this._providers=t,this.parent=e||null;var n=t.length;this.keyIds=new Array(n),this.objs=new Array(n);for(var r=0;r<n;r++)this.keyIds[r]=t[r].key.id,this.objs[r]=Zt}return t.prototype.get=function(t,e){return void 0===e&&(e=rt),this._getByKey(Pt.get(t),null,e)},t.prototype.resolveAndCreateChild=function(t){var e=Wt.resolve(t);return this.createChildFromResolved(e)},t.prototype.createChildFromResolved=function(e){var n=new t(e);return n.parent=this,n},t.prototype.resolveAndInstantiate=function(t){return this.instantiateResolved(Wt.resolve([t])[0])},t.prototype.instantiateResolved=function(t){return this._instantiateProvider(t)},t.prototype.getProviderAtIndex=function(t){if(t<0||t>=this._providers.length)throw function(t){return Error("Index "+t+" is out-of-bounds.")}(t);return this._providers[t]},t.prototype._new=function(t){if(this._constructionCounter++>this._getMaxNumberOfObjects())throw Tt(this,t.key,function(t){return"Cannot instantiate cyclic dependency!"+It(t)});return this._instantiateProvider(t)},t.prototype._getMaxNumberOfObjects=function(){return this.objs.length},t.prototype._instantiateProvider=function(t){if(t.multiProvider){for(var e=new Array(t.resolvedFactories.length),n=0;n<t.resolvedFactories.length;++n)e[n]=this._instantiate(t,t.resolvedFactories[n]);return e}return this._instantiate(t,t.resolvedFactories[0])},t.prototype._instantiate=function(t,e){var n,r,i,o=this,a=e.factory;try{n=e.dependencies.map(function(t){return o._getByReflectiveDependency(t)})}catch(e){throw e.addKey&&e.addKey(this,t.key),e}try{r=a.apply(void 0,n)}catch(e){throw Tt(this,t.key,function(t){var e=Q(t[0].token);return i.message+": Error during instantiation of "+e+"!"+It(t)+"."},i=e)}return r},t.prototype._getByReflectiveDependency=function(t){return this._getByKey(t.key,t.visibility,t.optional?null:rt)},t.prototype._getByKey=function(e,n,r){return e===t.INJECTOR_KEY?this:n instanceof q?this._getByKeySelf(e,r):this._getByKeyDefault(e,r,n)},t.prototype._getObjByKeyId=function(t){for(var e=0;e<this.keyIds.length;e++)if(this.keyIds[e]===t)return this.objs[e]===Zt&&(this.objs[e]=this._new(this._providers[e])),this.objs[e];return Zt},t.prototype._throwOrNull=function(t,e){if(e!==rt)return e;throw function(t,e){return Tt(t,e,function(t){return"No provider for "+Q(t[0].token)+"!"+It(t)})}(this,t)},t.prototype._getByKeySelf=function(t,e){var n=this._getObjByKeyId(t.id);return n!==Zt?n:this._throwOrNull(t,e)},t.prototype._getByKeyDefault=function(e,n,r){var i;for(i=r instanceof U?this.parent:this;i instanceof t;){var o=i,a=o._getObjByKeyId(e.id);if(a!==Zt)return a;i=o.parent}return null!==i?i.get(e.token,n):this._throwOrNull(e,n)},Object.defineProperty(t.prototype,"displayName",{get:function(){return"ReflectiveInjector(providers: ["+function(t,e){for(var n=new Array(t._providers.length),r=0;r<t._providers.length;++r)n[r]=' "'+t.getProviderAtIndex(r).key.displayName+'" ';return n}(this).join(", ")+"])"},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return this.displayName},t.INJECTOR_KEY=Pt.get(ot),t}();function Jt(t){return!!t&&"function"==typeof t.then}function Qt(t){return!!t&&"function"==typeof t.subscribe}var $t=new u("Application Initializer"),te=function(){function t(t){var e=this;this.appInits=t,this.initialized=!1,this.done=!1,this.donePromise=new Promise(function(t,n){e.resolve=t,e.reject=n})}return t.prototype.runInitializers=function(){var t=this;if(!this.initialized){var e=[],n=function(){t.done=!0,t.resolve()};if(this.appInits)for(var r=0;r<this.appInits.length;r++){var i=this.appInits[r]();Jt(i)&&e.push(i)}Promise.all(e).then(function(){n()}).catch(function(e){t.reject(e)}),0===e.length&&n(),this.initialized=!0}},t}(),ee=new u("AppId");function ne(){return""+ie()+ie()+ie()}var re={provide:ee,useFactory:ne,deps:[]};function ie(){return String.fromCharCode(97+Math.floor(25*Math.random()))}var oe=new u("Platform Initializer"),ae=new u("Platform ID"),se=new u("appBootstrapListener"),ue=new u("Application Packages Root URL"),le=function(){function t(){}return t.prototype.log=function(t){console.log(t)},t.prototype.warn=function(t){console.warn(t)},t.ctorParameters=function(){return[]},t}(),ce=function(t,e){this.ngModuleFactory=t,this.componentFactories=e};function he(){throw new Error("Runtime compiler is not loaded")}var pe=function(){function t(){}return t.prototype.compileModuleSync=function(t){throw he()},t.prototype.compileModuleAsync=function(t){throw he()},t.prototype.compileModuleAndAllComponentsSync=function(t){throw he()},t.prototype.compileModuleAndAllComponentsAsync=function(t){throw he()},t.prototype.clearCache=function(){},t.prototype.clearCacheFor=function(t){},t}(),fe=new u("compilerOptions"),de=function(){},me=function(){},ge=function(){};function ye(t){var e=Error("No component factory found for "+Q(t)+". Did you add it to @NgModule.entryComponents?");return e[be]=t,e}var ve,_e,be="ngComponent",xe=function(){function t(){}return t.prototype.resolveComponentFactory=function(t){throw ye(t)},t}(),we=function(){function t(){}return t.NULL=new xe,t}(),Ee=function(){function t(t,e,n){this._parent=e,this._ngModule=n,this._factories=new Map;for(var r=0;r<t.length;r++){var i=t[r];this._factories.set(i.componentType,i)}}return t.prototype.resolveComponentFactory=function(t){var e=this._factories.get(t);if(!e&&this._parent&&(e=this._parent.resolveComponentFactory(t)),!e)throw ye(t);return new Ce(e,this._ngModule)},t}(),Ce=function(t){function e(e,n){var r=t.call(this)||this;return r.factory=e,r.ngModule=n,r.selector=e.selector,r.componentType=e.componentType,r.ngContentSelectors=e.ngContentSelectors,r.inputs=e.inputs,r.outputs=e.outputs,r}return Object(r.c)(e,t),e.prototype.create=function(t,e,n,r){return this.factory.create(t,e,n,r||this.ngModule)},e}(ge),Se=function(){},Ie=function(){};function Te(){var t=Y.wtf;return!(!t||!(ve=t.trace)||(_e=ve.events,0))}function ke(t,e){return void 0===e&&(e=null),_e.createScope(t,e)}function Oe(t,e){return ve.leaveScope(t,e),e}function Pe(t,e){return ve.beginTimeRange(t,e)}function Ae(t){ve.endTimeRange(t)}var Me=Te();function Re(t,e){return null}var Le=Me?ke:function(t,e){return Re},Ne=Me?Oe:function(t,e){return e},De=Me?Pe:function(t,e){return null},Fe=Me?Ae:function(t){return null},ze=function(t){function e(e){void 0===e&&(e=!1);var n=t.call(this)||this;return n.__isAsync=e,n}return Object(r.c)(e,t),e.prototype.emit=function(e){t.prototype.next.call(this,e)},e.prototype.subscribe=function(e,n,r){var i,o=function(t){return null},a=function(){return null};return e&&"object"==typeof e?(i=this.__isAsync?function(t){setTimeout(function(){return e.next(t)})}:function(t){e.next(t)},e.error&&(o=this.__isAsync?function(t){setTimeout(function(){return e.error(t)})}:function(t){e.error(t)}),e.complete&&(a=this.__isAsync?function(){setTimeout(function(){return e.complete()})}:function(){e.complete()})):(i=this.__isAsync?function(t){setTimeout(function(){return e(t)})}:function(t){e(t)},n&&(o=this.__isAsync?function(t){setTimeout(function(){return n(t)})}:function(t){n(t)}),r&&(a=this.__isAsync?function(){setTimeout(function(){return r()})}:function(){r()})),t.prototype.subscribe.call(this,i,o,a)},e}(s.a),je=function(){function t(t){var e,n=t.enableLongStackTrace,r=void 0!==n&&n;if(this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ze(!1),this.onMicrotaskEmpty=new ze(!1),this.onStable=new ze(!1),this.onError=new ze(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),(e=this)._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:function(t,n,r,i,o,a){try{return Ue(e),t.invokeTask(r,i,o,a)}finally{Ge(e)}},onInvoke:function(t,n,r,i,o,a,s){try{return Ue(e),t.invoke(r,i,o,a,s)}finally{Ge(e)}},onHasTask:function(t,n,r,i){t.hasTask(r,i),n===r&&("microTask"==i.change?(e.hasPendingMicrotasks=i.microTask,qe(e)):"macroTask"==i.change&&(e.hasPendingMacrotasks=i.macroTask))},onHandleError:function(t,n,r,i){return t.handleError(r,i),e.runOutsideAngular(function(){return e.onError.emit(i)}),!1}})}return t.isInAngularZone=function(){return!0===Zone.current.get("isAngularZone")},t.assertInAngularZone=function(){if(!t.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")},t.assertNotInAngularZone=function(){if(t.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")},t.prototype.run=function(t,e,n){return this._inner.run(t,e,n)},t.prototype.runTask=function(t,e,n,r){var i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,Ve,Be,Be);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}},t.prototype.runGuarded=function(t,e,n){return this._inner.runGuarded(t,e,n)},t.prototype.runOutsideAngular=function(t){return this._outer.run(t)},t}();function Be(){}var Ve={};function qe(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(function(){return t.onStable.emit(null)})}finally{t.isStable=!0}}}function Ue(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Ge(t){t._nesting--,qe(t)}var Xe=function(){function t(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ze,this.onMicrotaskEmpty=new ze,this.onStable=new ze,this.onError=new ze}return t.prototype.run=function(t){return t()},t.prototype.runGuarded=function(t){return t()},t.prototype.runOutsideAngular=function(t){return t()},t.prototype.runTask=function(t){return t()},t}(),He=function(){function t(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this._watchAngularEvents()}return t.prototype._watchAngularEvents=function(){var t=this;this._ngZone.onUnstable.subscribe({next:function(){t._didWork=!0,t._isZoneStable=!1}}),this._ngZone.runOutsideAngular(function(){t._ngZone.onStable.subscribe({next:function(){je.assertNotInAngularZone(),K(function(){t._isZoneStable=!0,t._runCallbacksIfReady()})}})})},t.prototype.increasePendingRequestCount=function(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount},t.prototype.decreasePendingRequestCount=function(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount},t.prototype.isStable=function(){return this._isZoneStable&&0==this._pendingCount&&!this._ngZone.hasPendingMacrotasks},t.prototype._runCallbacksIfReady=function(){var t=this;this.isStable()?K(function(){for(;0!==t._callbacks.length;)t._callbacks.pop()(t._didWork);t._didWork=!1}):this._didWork=!0},t.prototype.whenStable=function(t){this._callbacks.push(t),this._runCallbacksIfReady()},t.prototype.getPendingRequestCount=function(){return this._pendingCount},t.prototype.findProviders=function(t,e,n){return[]},t}(),Ye=function(){function t(){this._applications=new Map,Ke.addToWindow(this)}return t.prototype.registerApplication=function(t,e){this._applications.set(t,e)},t.prototype.unregisterApplication=function(t){this._applications.delete(t)},t.prototype.unregisterAllApplications=function(){this._applications.clear()},t.prototype.getTestability=function(t){return this._applications.get(t)||null},t.prototype.getAllTestabilities=function(){return Array.from(this._applications.values())},t.prototype.getAllRootElements=function(){return Array.from(this._applications.keys())},t.prototype.findTestabilityInTree=function(t,e){return void 0===e&&(e=!0),Ke.findTestabilityInTree(this,t,e)},t.ctorParameters=function(){return[]},t}();function Ze(t){Ke=t}var We,Ke=new(function(){function t(){}return t.prototype.addToWindow=function(t){},t.prototype.findTestabilityInTree=function(t,e,n){return null},t}()),Je=!0,Qe=!1,$e=new u("AllowMultipleToken");function tn(){if(Qe)throw new Error("Cannot enable prod mode after platform setup.");Je=!1}function en(){return Qe=!0,Je}var nn=function(t,e){this.name=t,this.token=e};function rn(t){if(We&&!We.destroyed&&!We.injector.get($e,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");We=t.get(ln);var e=t.get(oe,null);return e&&e.forEach(function(t){return t()}),We}function on(t,e,n){void 0===n&&(n=[]);var r="Platform: "+e,i=new u(r);return function(e){void 0===e&&(e=[]);var o=un();if(!o||o.injector.get($e,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{var a=n.concat(e).concat({provide:i,useValue:!0});rn(ot.create({providers:a,name:r}))}return an(i)}}function an(t){var e=un();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}function sn(){We&&!We.destroyed&&We.destroy()}function un(){return We&&!We.destroyed?We:null}var ln=function(){function t(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}return t.prototype.bootstrapModuleFactory=function(t,e){var n,r=this,i="noop"===(n=e?e.ngZone:void 0)?new Xe:("zone.js"===n?void 0:n)||new je({enableLongStackTrace:en()}),o=[{provide:je,useValue:i}];return i.run(function(){var e=ot.create({providers:o,parent:r.injector,name:t.moduleType.name}),n=t.create(e),a=n.injector.get(St,null);if(!a)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.onDestroy(function(){return pn(r._modules,n)}),i.runOutsideAngular(function(){return i.onError.subscribe({next:function(t){a.handleError(t)}})}),function(t,e,i){try{var o=((a=n.injector.get(te)).runInitializers(),a.donePromise.then(function(){return r._moduleDoBootstrap(n),n}));return Jt(o)?o.catch(function(n){throw e.runOutsideAngular(function(){return t.handleError(n)}),n}):o}catch(n){throw e.runOutsideAngular(function(){return t.handleError(n)}),n}var a}(a,i)})},t.prototype.bootstrapModule=function(t,e){var n=this;void 0===e&&(e=[]);var r=this.injector.get(de),i=cn({},e);return r.createCompiler([i]).compileModuleAsync(t).then(function(t){return n.bootstrapModuleFactory(t,i)})},t.prototype._moduleDoBootstrap=function(t){var e=t.injector.get(hn);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(function(t){return e.bootstrap(t)});else{if(!t.instance.ngDoBootstrap)throw new Error("The module "+Q(t.instance.constructor)+' was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.');t.instance.ngDoBootstrap(e)}this._modules.push(t)},t.prototype.onDestroy=function(t){this._destroyListeners.push(t)},Object.defineProperty(t.prototype,"injector",{get:function(){return this._injector},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(function(t){return t.destroy()}),this._destroyListeners.forEach(function(t){return t()}),this._destroyed=!0},Object.defineProperty(t.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!0,configurable:!0}),t}();function cn(t,e){return Array.isArray(e)?e.reduce(cn,t):Object(r.a)({},t,e)}var hn=function(){function t(t,e,n,r,s,u){var l=this;this._zone=t,this._console=e,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=s,this._initStatus=u,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=en(),this._zone.onMicrotaskEmpty.subscribe({next:function(){l._zone.run(function(){l.tick()})}});var c=new i.Observable(function(t){l._stable=l._zone.isStable&&!l._zone.hasPendingMacrotasks&&!l._zone.hasPendingMicrotasks,l._zone.runOutsideAngular(function(){t.next(l._stable),t.complete()})}),h=new i.Observable(function(t){var e;l._zone.runOutsideAngular(function(){e=l._zone.onStable.subscribe(function(){je.assertNotInAngularZone(),K(function(){l._stable||l._zone.hasPendingMacrotasks||l._zone.hasPendingMicrotasks||(l._stable=!0,t.next(!0))})})});var n=l._zone.onUnstable.subscribe(function(){je.assertInAngularZone(),l._stable&&(l._stable=!1,l._zone.runOutsideAngular(function(){t.next(!1)}))});return function(){e.unsubscribe(),n.unsubscribe()}});this.isStable=Object(o.a)(c,a.a.call(h))}return t.prototype.bootstrap=function(t,e){var n,r=this;if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");n=t instanceof ge?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);var i=n instanceof Ce?null:this._injector.get(Se),o=n.create(ot.NULL,[],e||n.selector,i);o.onDestroy(function(){r._unloadComponent(o)});var a=o.injector.get(He,null);return a&&o.injector.get(Ye).registerApplication(o.location.nativeElement,a),this._loadComponent(o),en()&&this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode."),o},t.prototype.tick=function(){var e=this;if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");var n=t._tickScope();try{this._runningTick=!0,this._views.forEach(function(t){return t.detectChanges()}),this._enforceNoNewChanges&&this._views.forEach(function(t){return t.checkNoChanges()})}catch(t){this._zone.runOutsideAngular(function(){return e._exceptionHandler.handleError(t)})}finally{this._runningTick=!1,Ne(n)}},t.prototype.attachView=function(t){var e=t;this._views.push(e),e.attachToAppRef(this)},t.prototype.detachView=function(t){var e=t;pn(this._views,e),e.detachFromAppRef()},t.prototype._loadComponent=function(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(se,[]).concat(this._bootstrapListeners).forEach(function(e){return e(t)})},t.prototype._unloadComponent=function(t){this.detachView(t.hostView),pn(this.components,t)},t.prototype.ngOnDestroy=function(){this._views.slice().forEach(function(t){return t.destroy()})},Object.defineProperty(t.prototype,"viewCount",{get:function(){return this._views.length},enumerable:!0,configurable:!0}),t._tickScope=Le("ApplicationRef#tick()"),t}();function pn(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)}var fn=function(t,e,n,r,i,o){this.id=t,this.templateUrl=e,this.slotCount=n,this.encapsulation=r,this.styles=i,this.animations=o},dn=function(){},mn=function(){},gn=function(){},yn=function(){},vn=function(){var t={Important:1,DashCase:2};return t[t.Important]="Important",t[t.DashCase]="DashCase",t}(),_n=function(){},bn=function(t){this.nativeElement=t},xn=function(){},wn=new Map;function En(t,e){var n=wn.get(t);if(n)throw new Error("Duplicate module registered for "+t+" - "+n.moduleType.name+" vs "+e.moduleType.name);wn.set(t,e)}function Cn(t){var e=wn.get(t);if(!e)throw new Error("No module with ID "+t+" loaded");return e}var Sn=function(){function t(){this.dirty=!0,this._results=[],this.changes=new ze}return t.prototype.map=function(t){return this._results.map(t)},t.prototype.filter=function(t){return this._results.filter(t)},t.prototype.find=function(t){return this._results.find(t)},t.prototype.reduce=function(t,e){return this._results.reduce(t,e)},t.prototype.forEach=function(t){this._results.forEach(t)},t.prototype.some=function(t){return this._results.some(t)},t.prototype.toArray=function(){return this._results.slice()},t.prototype[W()]=function(){return this._results[W()]()},t.prototype.toString=function(){return this._results.toString()},t.prototype.reset=function(t){this._results=function t(e){return e.reduce(function(e,n){var r=Array.isArray(n)?t(n):n;return e.concat(r)},[])}(t),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]},t.prototype.notifyOnChanges=function(){this.changes.emit(this)},t.prototype.setDirty=function(){this.dirty=!0},t.prototype.destroy=function(){this.changes.complete(),this.changes.unsubscribe()},t}(),In=function(){},Tn={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"},kn=function(){function t(t,e){this._compiler=t,this._config=e||Tn}return t.prototype.load=function(t){return this._compiler instanceof pe?this.loadFactory(t):this.loadAndCompile(t)},t.prototype.loadAndCompile=function(t){var e=this,r=t.split("#"),i=r[0],o=r[1];return void 0===o&&(o="default"),n("YuZA")(i).then(function(t){return t[o]}).then(function(t){return On(t,i,o)}).then(function(t){return e._compiler.compileModuleAsync(t)})},t.prototype.loadFactory=function(t){var e=t.split("#"),r=e[0],i=e[1],o="NgFactory";return void 0===i&&(i="default",o=""),n("YuZA")(this._config.factoryPathPrefix+r+this._config.factoryPathSuffix).then(function(t){return t[i+o]}).then(function(t){return On(t,r,i)})},t}();function On(t,e,n){if(!t)throw new Error("Cannot find '"+n+"' in '"+e+"'");return t}var Pn=function(){},An=function(){},Mn=function(){},Rn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.c)(e,t),e}(Mn),Ln=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.c)(e,t),e}(Rn),Nn=function(){function t(t,e,n){this._debugContext=n,this.nativeNode=t,e&&e instanceof Dn?e.addChild(this):this.parent=null,this.listeners=[]}return Object.defineProperty(t.prototype,"injector",{get:function(){return this._debugContext.injector},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"componentInstance",{get:function(){return this._debugContext.component},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"context",{get:function(){return this._debugContext.context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"references",{get:function(){return this._debugContext.references},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"providerTokens",{get:function(){return this._debugContext.providerTokens},enumerable:!0,configurable:!0}),t}(),Dn=function(t){function e(e,n,r){var i=t.call(this,e,n,r)||this;return i.properties={},i.attributes={},i.classes={},i.styles={},i.childNodes=[],i.nativeElement=e,i}return Object(r.c)(e,t),e.prototype.addChild=function(t){t&&(this.childNodes.push(t),t.parent=this)},e.prototype.removeChild=function(t){var e=this.childNodes.indexOf(t);-1!==e&&(t.parent=null,this.childNodes.splice(e,1))},e.prototype.insertChildrenAfter=function(t,e){var n,r=this,i=this.childNodes.indexOf(t);-1!==i&&((n=this.childNodes).splice.apply(n,[i+1,0].concat(e)),e.forEach(function(t){t.parent&&t.parent.removeChild(t),t.parent=r}))},e.prototype.insertBefore=function(t,e){var n=this.childNodes.indexOf(t);-1===n?this.addChild(e):(e.parent&&e.parent.removeChild(e),e.parent=this,this.childNodes.splice(n,0,e))},e.prototype.query=function(t){return this.queryAll(t)[0]||null},e.prototype.queryAll=function(t){var e=[];return zn(this,t,e),e},e.prototype.queryAllNodes=function(t){var e=[];return jn(this,t,e),e},Object.defineProperty(e.prototype,"children",{get:function(){return this.childNodes.filter(function(t){return t instanceof e})},enumerable:!0,configurable:!0}),e.prototype.triggerEventHandler=function(t,e){this.listeners.forEach(function(n){n.name==t&&n.callback(e)})},e}(Nn);function Fn(t){return t.map(function(t){return t.nativeElement})}function zn(t,e,n){t.childNodes.forEach(function(t){t instanceof Dn&&(e(t)&&n.push(t),zn(t,e,n))})}function jn(t,e,n){t instanceof Dn&&t.childNodes.forEach(function(t){e(t)&&n.push(t),t instanceof Dn&&jn(t,e,n)})}var Bn=new Map;function Vn(t){return Bn.get(t)||null}function qn(t){Bn.set(t.nativeNode,t)}function Un(t,e){var n=Hn(t),r=Hn(e);return n&&r?function(t,e,n){for(var r=t[W()](),i=e[W()]();;){var o=r.next(),a=i.next();if(o.done&&a.done)return!0;if(o.done||a.done)return!1;if(!n(o.value,a.value))return!1}}(t,e,Un):!(n||!t||"object"!=typeof t&&"function"!=typeof t||r||!e||"object"!=typeof e&&"function"!=typeof e)||J(t,e)}var Gn=function(){function t(t){this.wrapped=t}return t.wrap=function(e){return new t(e)},t.unwrap=function(e){return t.isWrapped(e)?e.wrapped:e},t.isWrapped=function(e){return e instanceof t},t}(),Xn=function(){function t(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}return t.prototype.isFirstChange=function(){return this.firstChange},t}();function Hn(t){return!!Yn(t)&&(Array.isArray(t)||!(t instanceof Map)&&W()in t)}function Yn(t){return null!==t&&("function"==typeof t||"object"==typeof t)}var Zn=function(){function t(){}return t.prototype.supports=function(t){return Hn(t)},t.prototype.create=function(t){return new Kn(t)},t}(),Wn=function(t,e){return e},Kn=function(){function t(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Wn}return t.prototype.forEachItem=function(t){var e;for(e=this._itHead;null!==e;e=e._next)t(e)},t.prototype.forEachOperation=function(t){for(var e=this._itHead,n=this._removalsHead,r=0,i=null;e||n;){var o=!n||e&&e.currentIndex<tr(n,r,i)?e:n,a=tr(o,r,i),s=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);var u=a-r,l=s-r;if(u!=l){for(var c=0;c<u;c++){var h=c<i.length?i[c]:i[c]=0,p=h+c;l<=p&&p<u&&(i[c]=h+1)}i[o.previousIndex]=l-u}}a!==s&&t(o,a,s)}},t.prototype.forEachPreviousItem=function(t){var e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)},t.prototype.forEachAddedItem=function(t){var e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)},t.prototype.forEachMovedItem=function(t){var e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)},t.prototype.forEachRemovedItem=function(t){var e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)},t.prototype.forEachIdentityChange=function(t){var e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)},t.prototype.diff=function(t){if(null==t&&(t=[]),!Hn(t))throw new Error("Error trying to diff '"+Q(t)+"'. Only arrays and iterables are allowed");return this.check(t)?this:null},t.prototype.onDestroy=function(){},t.prototype.check=function(t){var e=this;this._reset();var n,r,i,o=this._itHead,a=!1;if(Array.isArray(t)){this.length=t.length;for(var s=0;s<this.length;s++)i=this._trackByFn(s,r=t[s]),null!==o&&J(o.trackById,i)?(a&&(o=this._verifyReinsertion(o,r,i,s)),J(o.item,r)||this._addIdentityChange(o,r)):(o=this._mismatch(o,r,i,s),a=!0),o=o._next}else n=0,function(t,e){if(Array.isArray(t))for(var n=0;n<t.length;n++)e(t[n]);else for(var r=t[W()](),i=void 0;!(i=r.next()).done;)e(i.value)}(t,function(t){i=e._trackByFn(n,t),null!==o&&J(o.trackById,i)?(a&&(o=e._verifyReinsertion(o,t,i,n)),J(o.item,t)||e._addIdentityChange(o,t)):(o=e._mismatch(o,t,i,n),a=!0),o=o._next,n++}),this.length=n;return this._truncate(o),this.collection=t,this.isDirty},Object.defineProperty(t.prototype,"isDirty",{get:function(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead},enumerable:!0,configurable:!0}),t.prototype._reset=function(){if(this.isDirty){var t=void 0,e=void 0;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=e)t.previousIndex=t.currentIndex,e=t._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}},t.prototype._mismatch=function(t,e,n,r){var i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(J(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(J(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):t=this._addAfter(new Jn(e,n),i,r),t},t.prototype._verifyReinsertion=function(t,e,n,r){var i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t},t.prototype._truncate=function(t){for(;null!==t;){var e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)},t.prototype._reinsertAfter=function(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);var r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t},t.prototype._moveAfter=function(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t},t.prototype._addAfter=function(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t},t.prototype._insertAfter=function(t,e,n){var r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new $n),this._linkedRecords.put(t),t.currentIndex=n,t},t.prototype._remove=function(t){return this._addToRemovals(this._unlink(t))},t.prototype._unlink=function(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);var e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t},t.prototype._addToMoves=function(t,e){return t.previousIndex===e?t:(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t,t)},t.prototype._addToRemovals=function(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new $n),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t},t.prototype._addIdentityChange=function(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t},t}(),Jn=function(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null},Qn=function(){function t(){this._head=null,this._tail=null}return t.prototype.add=function(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)},t.prototype.get=function(t,e){var n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&J(n.trackById,t))return n;return null},t.prototype.remove=function(t){var e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head},t}(),$n=function(){function t(){this.map=new Map}return t.prototype.put=function(t){var e=t.trackById,n=this.map.get(e);n||(n=new Qn,this.map.set(e,n)),n.add(t)},t.prototype.get=function(t,e){var n=this.map.get(t);return n?n.get(t,e):null},t.prototype.remove=function(t){var e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t},Object.defineProperty(t.prototype,"isEmpty",{get:function(){return 0===this.map.size},enumerable:!0,configurable:!0}),t.prototype.clear=function(){this.map.clear()},t}();function tr(t,e,n){var r=t.previousIndex;if(null===r)return r;var i=0;return n&&r<n.length&&(i=n[r]),r+e+i}var er=function(){function t(){}return t.prototype.supports=function(t){return t instanceof Map||Yn(t)},t.prototype.create=function(){return new nr},t}(),nr=function(){function t(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}return Object.defineProperty(t.prototype,"isDirty",{get:function(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead},enumerable:!0,configurable:!0}),t.prototype.forEachItem=function(t){var e;for(e=this._mapHead;null!==e;e=e._next)t(e)},t.prototype.forEachPreviousItem=function(t){var e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)},t.prototype.forEachChangedItem=function(t){var e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)},t.prototype.forEachAddedItem=function(t){var e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)},t.prototype.forEachRemovedItem=function(t){var e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)},t.prototype.diff=function(t){if(t){if(!(t instanceof Map||Yn(t)))throw new Error("Error trying to diff '"+Q(t)+"'. Only maps and objects are allowed")}else t=new Map;return this.check(t)?this:null},t.prototype.onDestroy=function(){},t.prototype.check=function(t){var e=this;this._reset();var n=this._mapHead;if(this._appendAfter=null,this._forEach(t,function(t,r){if(n&&n.key===r)e._maybeAddToChanges(n,t),e._appendAfter=n,n=n._next;else{var i=e._getOrCreateRecordForKey(r,t);n=e._insertBeforeOrAppend(n,i)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(var r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty},t.prototype._insertBeforeOrAppend=function(t,e){if(t){var n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null},t.prototype._getOrCreateRecordForKey=function(t,e){if(this._records.has(t)){var n=this._records.get(t);this._maybeAddToChanges(n,e);var r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}var o=new rr(t);return this._records.set(t,o),o.currentValue=e,this._addToAdditions(o),o},t.prototype._reset=function(){if(this.isDirty){var t=void 0;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}},t.prototype._maybeAddToChanges=function(t,e){J(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))},t.prototype._addToAdditions=function(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)},t.prototype._addToChanges=function(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)},t.prototype._forEach=function(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(function(n){return e(t[n],n)})},t}(),rr=function(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null},ir=function(){function t(t){this.factories=t}return t.create=function(e,n){if(null!=n){var r=n.factories.slice();return new t(e=e.concat(r))}return new t(e)},t.extend=function(e){return{provide:t,useFactory:function(n){if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return t.create(e,n)},deps:[[t,new U,new B]]}},t.prototype.find=function(t){var e,n=this.factories.find(function(e){return e.supports(t)});if(null!=n)return n;throw new Error("Cannot find a differ supporting object '"+t+"' of type '"+((e=t).name||typeof e)+"'")},t}(),or=function(){function t(t){this.factories=t}return t.create=function(e,n){if(n){var r=n.factories.slice();e=e.concat(r)}return new t(e)},t.extend=function(e){return{provide:t,useFactory:function(n){if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return t.create(e,n)},deps:[[t,new U,new B]]}},t.prototype.find=function(t){var e=this.factories.find(function(e){return e.supports(t)});if(e)return e;throw new Error("Cannot find a differ supporting object '"+t+"'")},t}(),ar=[new er],sr=new ir([new Zn]),ur=new or(ar),lr=on(null,"core",[{provide:ae,useValue:"unknown"},{provide:ln,deps:[ot]},{provide:Ye,deps:[]},{provide:le,deps:[]}]),cr=new u("LocaleId"),hr=new u("Translations"),pr=new u("TranslationsFormat"),fr=function(){var t={Error:0,Warning:1,Ignore:2};return t[t.Error]="Error",t[t.Warning]="Warning",t[t.Ignore]="Ignore",t}();function dr(){return sr}function mr(){return ur}function gr(t){return t||"en-US"}var yr=function(t){},vr=function(){var t={NONE:0,HTML:1,STYLE:2,SCRIPT:3,URL:4,RESOURCE_URL:5};return t[t.NONE]="NONE",t[t.HTML]="HTML",t[t.STYLE]="STYLE",t[t.SCRIPT]="SCRIPT",t[t.URL]="URL",t[t.RESOURCE_URL]="RESOURCE_URL",t}(),_r=function(){};function br(t,e,n){var r=t.state,i=1792&r;return i===e?(t.state=-1793&r|n,t.initIndex=-1,!0):i===n}function xr(t,e,n){return(1792&t.state)===e&&t.initIndex<=n&&(t.initIndex=n+1,!0)}function wr(t,e){return t.nodes[e]}function Er(t,e){return t.nodes[e]}function Cr(t,e){return t.nodes[e]}function Sr(t,e){return t.nodes[e]}function Ir(t,e){return t.nodes[e]}var Tr=function(){},kr={setCurrentNode:void 0,createRootView:void 0,createEmbeddedView:void 0,createComponentView:void 0,createNgModuleRef:void 0,overrideProvider:void 0,overrideComponentView:void 0,clearOverrides:void 0,checkAndUpdateView:void 0,checkNoChangesView:void 0,destroyView:void 0,resolveDep:void 0,createDebugContext:void 0,handleEvent:void 0,updateDirectives:void 0,updateRenderer:void 0,dirtyParentQueries:void 0};function Or(t,e,n,r){var i="ExpressionChangedAfterItHasBeenCheckedError: Expression has changed after it was checked. Previous value: '"+e+"'. Current value: '"+n+"'.";return r&&(i+=" It seems like the view has been created after its parent and its children have been dirty checked. Has it been created in a change detection hook ?"),function(t,e){var n=new Error(t);return Pr(n,e),n}(i,t)}function Pr(t,e){t[_t]=e,t[xt]=e.logError.bind(e)}function Ar(t){return new Error("ViewDestroyedError: Attempt to use a destroyed view: "+t)}var Mr=function(){},Rr=new Map;function Lr(t){var e=Rr.get(t);return e||(e=Q(t)+"_"+Rr.size,Rr.set(t,e)),e}function Nr(t,e,n,r){if(Gn.isWrapped(r)){r=Gn.unwrap(r);var i=t.def.nodes[e].bindingIndex+n,o=Gn.unwrap(t.oldValues[i]);t.oldValues[i]=new Gn(o)}return r}var Dr="$$undefined",Fr="$$empty";function zr(t){return{id:Dr,styles:t.styles,encapsulation:t.encapsulation,data:t.data}}var jr=0;function Br(t){if(t&&t.id===Dr){var e=null!=t.encapsulation&&t.encapsulation!==D.None||t.styles.length||Object.keys(t.data).length;t.id=e?"c"+jr++:Fr}return t&&t.id===Fr&&(t=null),t||null}function Vr(t,e,n,r){return!(!(2&t.state)&&J(t.oldValues[e.bindingIndex+n],r))}function qr(t,e,n,r){return!!Vr(t,e,n,r)&&(t.oldValues[e.bindingIndex+n]=r,!0)}function Ur(t,e,n,r){var i=t.oldValues[e.bindingIndex+n];if(1&t.state||!Un(i,r)){var o=e.bindings[n].name;throw Or(kr.createDebugContext(t,e.nodeIndex),o+": "+i,o+": "+r,0!=(1&t.state))}}function Gr(t){for(var e=t;e;)2&e.def.flags&&(e.state|=8),e=e.viewContainerParent||e.parent}function Xr(t,e){for(var n=t;n&&n!==e;)n.state|=64,n=n.viewContainerParent||n.parent}function Hr(t,e,n,r){try{return Gr(33554432&t.def.nodes[e].flags?Er(t,e).componentView:t),kr.handleEvent(t,e,n,r)}catch(e){t.root.errorHandler.handleError(e)}}function Yr(t){return t.parent?Er(t.parent,t.parentNodeDef.nodeIndex):null}function Zr(t){return t.parent?t.parentNodeDef.parent:null}function Wr(t,e){switch(201347067&e.flags){case 1:return Er(t,e.nodeIndex).renderElement;case 2:return wr(t,e.nodeIndex).renderText}}function Kr(t,e){return t?t+":"+e:e}function Jr(t){return!!t.parent&&!!(32768&t.parentNodeDef.flags)}function Qr(t){return!(!t.parent||32768&t.parentNodeDef.flags)}function $r(t){return 1<<t%32}function ti(t){var e={},n=0,r={};return t&&t.forEach(function(t){var i=t[0],o=t[1];"number"==typeof i?(e[i]=o,n|=$r(i)):r[i]=o}),{matchedQueries:e,references:r,matchedQueryIds:n}}function ei(t,e){return t.map(function(t){var n,r;return Array.isArray(t)?(r=t[0],n=t[1]):(r=0,n=t),n&&("function"==typeof n||"object"==typeof n)&&e&&Object.defineProperty(n,et,{value:e,configurable:!0}),{flags:r,token:n,tokenKey:Lr(n)}})}function ni(t,e,n){var r=n.renderParent;return r?0==(1&r.flags)||0==(33554432&r.flags)||r.element.componentRendererType&&r.element.componentRendererType.encapsulation===D.Native?Er(t,n.renderParent.nodeIndex).renderElement:void 0:e}var ri=new WeakMap;function ii(t){var e=ri.get(t);return e||((e=t(function(){return Mr})).factory=t,ri.set(t,e)),e}function oi(t,e,n,r,i){3===e&&(n=t.renderer.parentNode(Wr(t,t.def.lastRenderRootNode))),ai(t,e,0,t.def.nodes.length-1,n,r,i)}function ai(t,e,n,r,i,o,a){for(var s=n;s<=r;s++){var u=t.def.nodes[s];11&u.flags&&ui(t,u,e,i,o,a),s+=u.childCount}}function si(t,e,n,r,i,o){for(var a=t;a&&!Jr(a);)a=a.parent;for(var s=a.parent,u=Zr(a),l=u.nodeIndex+u.childCount,c=u.nodeIndex+1;c<=l;c++){var h=s.def.nodes[c];h.ngContentIndex===e&&ui(s,h,n,r,i,o),c+=h.childCount}if(!s.parent){var p=t.root.projectableNodes[e];if(p)for(c=0;c<p.length;c++)li(t,p[c],n,r,i,o)}}function ui(t,e,n,r,i,o){if(8&e.flags)si(t,e.ngContent.index,n,r,i,o);else{var a=Wr(t,e);if(3===n&&33554432&e.flags&&48&e.bindingFlags?(16&e.bindingFlags&&li(t,a,n,r,i,o),32&e.bindingFlags&&li(Er(t,e.nodeIndex).componentView,a,n,r,i,o)):li(t,a,n,r,i,o),16777216&e.flags)for(var s=Er(t,e.nodeIndex).viewContainer._embeddedViews,u=0;u<s.length;u++)oi(s[u],n,r,i,o);1&e.flags&&!e.element.name&&ai(t,n,e.nodeIndex+1,e.nodeIndex+e.childCount,r,i,o)}}function li(t,e,n,r,i,o){var a=t.renderer;switch(n){case 1:a.appendChild(r,e);break;case 2:a.insertBefore(r,e,i);break;case 3:a.removeChild(r,e);break;case 0:o.push(e)}}var ci=/^:([^:]+):(.+)$/;function hi(t){if(":"===t[0]){var e=t.match(ci);return[e[1],e[2]]}return["",t]}function pi(t){for(var e=0,n=0;n<t.length;n++)e|=t[n].flags;return e}function fi(t,e){for(var n="",r=0;r<2*t;r+=2)n=n+e[r]+mi(e[r+1]);return n+e[2*t]}function di(t,e,n,r,i,o,a,s,u,l,c,h,p,f,d,m,g,y,v,_){switch(t){case 1:return e+mi(n)+r;case 2:return e+mi(n)+r+mi(i)+o;case 3:return e+mi(n)+r+mi(i)+o+mi(a)+s;case 4:return e+mi(n)+r+mi(i)+o+mi(a)+s+mi(u)+l;case 5:return e+mi(n)+r+mi(i)+o+mi(a)+s+mi(u)+l+mi(c)+h;case 6:return e+mi(n)+r+mi(i)+o+mi(a)+s+mi(u)+l+mi(c)+h+mi(p)+f;case 7:return e+mi(n)+r+mi(i)+o+mi(a)+s+mi(u)+l+mi(c)+h+mi(p)+f+mi(d)+m;case 8:return e+mi(n)+r+mi(i)+o+mi(a)+s+mi(u)+l+mi(c)+h+mi(p)+f+mi(d)+m+mi(g)+y;case 9:return e+mi(n)+r+mi(i)+o+mi(a)+s+mi(u)+l+mi(c)+h+mi(p)+f+mi(d)+m+mi(g)+y+mi(v)+_;default:throw new Error("Does not support more than 9 expressions")}}function mi(t){return null!=t?t.toString():""}var gi=[],yi={};function vi(t,e,n,r,i,o){t|=1;var a=ti(e);return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,flags:t,checkIndex:-1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:a.matchedQueries,matchedQueryIds:a.matchedQueryIds,references:a.references,ngContentIndex:n,childCount:r,bindings:[],bindingFlags:0,outputs:[],element:{ns:null,name:null,attrs:null,template:o?ii(o):null,componentProvider:null,componentView:null,componentRendererType:null,publicProviders:null,allProviders:null,handleEvent:i||Mr},provider:null,text:null,query:null,ngContent:null}}function _i(t,e,n,r,i,o,a,s,u,l,c,h){void 0===a&&(a=[]),l||(l=Mr);var p=ti(n),f=p.matchedQueries,d=p.references,m=p.matchedQueryIds,g=null,y=null;o&&(g=(P=hi(o))[0],y=P[1]),s=s||[];for(var v=new Array(s.length),_=0;_<s.length;_++){var b=s[_],x=b[0],w=b[2],E=hi(b[1]),C=E[0],S=E[1],I=void 0,T=void 0;switch(15&x){case 4:T=w;break;case 1:case 8:I=w}v[_]={flags:x,ns:C,name:S,nonMinifiedName:S,securityContext:I,suffix:T}}u=u||[];var k=new Array(u.length);for(_=0;_<u.length;_++){var O=u[_];k[_]={type:0,target:O[0],eventName:O[1],propName:null}}var P,A=(a=a||[]).map(function(t){var e=t[1],n=hi(t[0]);return[n[0],n[1],e]});return h=Br(h),c&&(e|=33554432),{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:e|=1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:f,matchedQueryIds:m,references:d,ngContentIndex:r,childCount:i,bindings:v,bindingFlags:pi(v),outputs:k,element:{ns:g,name:y,attrs:A,template:null,componentProvider:null,componentView:c||null,componentRendererType:h,publicProviders:null,allProviders:null,handleEvent:l||Mr},provider:null,text:null,query:null,ngContent:null}}function bi(t,e,n){var r,i=n.element,o=t.root.selectorOrNode,a=t.renderer;if(t.parent||!o){r=i.name?a.createElement(i.name,i.ns):a.createComment("");var s=ni(t,e,n);s&&a.appendChild(s,r)}else r=a.selectRootElement(o);if(i.attrs)for(var u=0;u<i.attrs.length;u++){var l=i.attrs[u];a.setAttribute(r,l[1],l[2],l[0])}return r}function xi(t,e,n,r){for(var i=0;i<n.outputs.length;i++){var o=n.outputs[i],a=wi(t,n.nodeIndex,Kr(o.target,o.eventName)),s=o.target,u=t;"component"===o.target&&(s=null,u=e);var l=u.renderer.listen(s||r,o.eventName,a);t.disposables[n.outputIndex+i]=l}}function wi(t,e,n){return function(r){return Hr(t,e,n,r)}}function Ei(t,e,n,r){if(!qr(t,e,n,r))return!1;var i=e.bindings[n],o=Er(t,e.nodeIndex),a=o.renderElement,s=i.name;switch(15&i.flags){case 1:!function(t,e,n,r,i,o){var a=e.securityContext,s=a?t.root.sanitizer.sanitize(a,o):o;s=null!=s?s.toString():null;var u=t.renderer;null!=o?u.setAttribute(n,i,s,r):u.removeAttribute(n,i,r)}(t,i,a,i.ns,s,r);break;case 2:!function(t,e,n,r){var i=t.renderer;r?i.addClass(e,n):i.removeClass(e,n)}(t,a,s,r);break;case 4:!function(t,e,n,r,i){var o=t.root.sanitizer.sanitize(vr.STYLE,i);if(null!=o){o=o.toString();var a=e.suffix;null!=a&&(o+=a)}else o=null;var s=t.renderer;null!=o?s.setStyle(n,r,o):s.removeStyle(n,r)}(t,i,a,s,r);break;case 8:!function(t,e,n,r,i){var o=e.securityContext,a=o?t.root.sanitizer.sanitize(o,i):i;t.renderer.setProperty(n,r,a)}(33554432&e.flags&&32&i.flags?o.componentView:t,i,a,s,r)}return!0}var Ci=new Object,Si=Lr(ot),Ii=Lr(Se);function Ti(t,e,n,r){return n=tt(n),{index:-1,deps:ei(r,Q(e)),flags:t,token:e,value:n}}function ki(t){for(var e={},n=0;n<t.length;n++){var r=t[n];r.index=n,e[Lr(r.token)]=r}return{factory:null,providersByKey:e,providers:t}}function Oi(t,e,n){if(void 0===n&&(n=ot.THROW_IF_NOT_FOUND),8&e.flags)return e.token;if(2&e.flags&&(n=null),1&e.flags)return t._parent.get(e.token,n);var r=e.tokenKey;switch(r){case Si:case Ii:return t}var i=t._def.providersByKey[r];if(i){var o=t._providers[i.index];return void 0===o&&(o=t._providers[i.index]=Pi(t,i)),o===Ci?void 0:o}return t._parent.get(e.token,n)}function Pi(t,e){var n;switch(201347067&e.flags){case 512:n=function(t,e,n){var r=n.length;switch(r){case 0:return new e;case 1:return new e(Oi(t,n[0]));case 2:return new e(Oi(t,n[0]),Oi(t,n[1]));case 3:return new e(Oi(t,n[0]),Oi(t,n[1]),Oi(t,n[2]));default:for(var i=new Array(r),o=0;o<r;o++)i[o]=Oi(t,n[o]);return new(e.bind.apply(e,[void 0].concat(i)))}}(t,e.value,e.deps);break;case 1024:n=function(t,e,n){var r=n.length;switch(r){case 0:return e();case 1:return e(Oi(t,n[0]));case 2:return e(Oi(t,n[0]),Oi(t,n[1]));case 3:return e(Oi(t,n[0]),Oi(t,n[1]),Oi(t,n[2]));default:for(var i=Array(r),o=0;o<r;o++)i[o]=Oi(t,n[o]);return e.apply(void 0,i)}}(t,e.value,e.deps);break;case 2048:n=Oi(t,e.deps[0]);break;case 256:n=e.value}return void 0===n?Ci:n}function Ai(t,e){var n=t.viewContainer._embeddedViews;if((null==e||e>=n.length)&&(e=n.length-1),e<0)return null;var r=n[e];return r.viewContainerParent=null,Ni(n,e),kr.dirtyParentQueries(r),Ri(r),r}function Mi(t,e,n){var r=e?Wr(e,e.def.lastRenderRootNode):t.renderElement;oi(n,2,n.renderer.parentNode(r),n.renderer.nextSibling(r),void 0)}function Ri(t){oi(t,3,null,null,void 0)}function Li(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Ni(t,e){e>=t.length-1?t.pop():t.splice(e,1)}var Di=new Object;function Fi(t,e,n,r,i,o){return new ji(t,e,n,r,i,o)}function zi(t){return t.viewDefFactory}var ji=function(t){function e(e,n,r,i,o,a){var s=t.call(this)||this;return s.selector=e,s.componentType=n,s._inputs=i,s._outputs=o,s.ngContentSelectors=a,s.viewDefFactory=r,s}return Object(r.c)(e,t),Object.defineProperty(e.prototype,"inputs",{get:function(){var t=[],e=this._inputs;for(var n in e)t.push({propName:n,templateName:e[n]});return t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outputs",{get:function(){var t=[];for(var e in this._outputs)t.push({propName:e,templateName:this._outputs[e]});return t},enumerable:!0,configurable:!0}),e.prototype.create=function(t,e,n,r){if(!r)throw new Error("ngModule should be provided");var i=ii(this.viewDefFactory),o=i.nodes[0].element.componentProvider.nodeIndex,a=kr.createRootView(t,e||[],n,i,r,Di),s=Cr(a,o).instance;return n&&a.renderer.setAttribute(Er(a,0).renderElement,"ng-version",z.full),new Bi(a,new Gi(a),s)},e}(ge),Bi=function(t){function e(e,n,r){var i=t.call(this)||this;return i._view=e,i._viewRef=n,i._component=r,i._elDef=i._view.def.nodes[0],i.hostView=n,i.changeDetectorRef=n,i.instance=r,i}return Object(r.c)(e,t),Object.defineProperty(e.prototype,"location",{get:function(){return new bn(Er(this._view,this._elDef.nodeIndex).renderElement)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"injector",{get:function(){return new Zi(this._view,this._elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"componentType",{get:function(){return this._component.constructor},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){this._viewRef.destroy()},e.prototype.onDestroy=function(t){this._viewRef.onDestroy(t)},e}(me);function Vi(t,e,n){return new qi(t,e,n)}var qi=function(){function t(t,e,n){this._view=t,this._elDef=e,this._data=n,this._embeddedViews=[]}return Object.defineProperty(t.prototype,"element",{get:function(){return new bn(this._data.renderElement)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"injector",{get:function(){return new Zi(this._view,this._elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parentInjector",{get:function(){for(var t=this._view,e=this._elDef.parent;!e&&t;)e=Zr(t),t=t.parent;return t?new Zi(t,e):new Zi(this._view,null)},enumerable:!0,configurable:!0}),t.prototype.clear=function(){for(var t=this._embeddedViews.length-1;t>=0;t--){var e=Ai(this._data,t);kr.destroyView(e)}},t.prototype.get=function(t){var e=this._embeddedViews[t];if(e){var n=new Gi(e);return n.attachToViewContainerRef(this),n}return null},Object.defineProperty(t.prototype,"length",{get:function(){return this._embeddedViews.length},enumerable:!0,configurable:!0}),t.prototype.createEmbeddedView=function(t,e,n){var r=t.createEmbeddedView(e||{});return this.insert(r,n),r},t.prototype.createComponent=function(t,e,n,r,i){var o=n||this.parentInjector;i||t instanceof Ce||(i=o.get(Se));var a=t.create(o,r,void 0,i);return this.insert(a.hostView,e),a},t.prototype.insert=function(t,e){if(t.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");var n,r,i,o,a=t;return i=a._view,o=(n=this._data).viewContainer._embeddedViews,null!==(r=e)&&void 0!==r||(r=o.length),i.viewContainerParent=this._view,Li(o,r,i),function(t,e){var n=Yr(e);if(n&&n!==t&&!(16&e.state)){e.state|=16;var r=n.template._projectedViews;r||(r=n.template._projectedViews=[]),r.push(e),function(t,n){if(!(4&n.flags)){e.parent.def.nodeFlags|=4,n.flags|=4;for(var r=n.parent;r;)r.childFlags|=4,r=r.parent}}(0,e.parentNodeDef)}}(n,i),kr.dirtyParentQueries(i),Mi(n,r>0?o[r-1]:null,i),a.attachToViewContainerRef(this),t},t.prototype.move=function(t,e){if(t.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");var n,r,i,o,a,s=this._embeddedViews.indexOf(t._view);return i=e,a=(o=(n=this._data).viewContainer._embeddedViews)[r=s],Ni(o,r),null==i&&(i=o.length),Li(o,i,a),kr.dirtyParentQueries(a),Ri(a),Mi(n,i>0?o[i-1]:null,a),t},t.prototype.indexOf=function(t){return this._embeddedViews.indexOf(t._view)},t.prototype.remove=function(t){var e=Ai(this._data,t);e&&kr.destroyView(e)},t.prototype.detach=function(t){var e=Ai(this._data,t);return e?new Gi(e):null},t}();function Ui(t){return new Gi(t)}var Gi=function(){function t(t){this._view=t,this._viewContainerRef=null,this._appRef=null}return Object.defineProperty(t.prototype,"rootNodes",{get:function(){return oi(this._view,0,void 0,void 0,t=[]),t;var t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"context",{get:function(){return this._view.context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"destroyed",{get:function(){return 0!=(128&this._view.state)},enumerable:!0,configurable:!0}),t.prototype.markForCheck=function(){Gr(this._view)},t.prototype.detach=function(){this._view.state&=-5},t.prototype.detectChanges=function(){var t=this._view.root.rendererFactory;t.begin&&t.begin();try{kr.checkAndUpdateView(this._view)}finally{t.end&&t.end()}},t.prototype.checkNoChanges=function(){kr.checkNoChangesView(this._view)},t.prototype.reattach=function(){this._view.state|=4},t.prototype.onDestroy=function(t){this._view.disposables||(this._view.disposables=[]),this._view.disposables.push(t)},t.prototype.destroy=function(){this._appRef?this._appRef.detachView(this):this._viewContainerRef&&this._viewContainerRef.detach(this._viewContainerRef.indexOf(this)),kr.destroyView(this._view)},t.prototype.detachFromAppRef=function(){this._appRef=null,Ri(this._view),kr.dirtyParentQueries(this._view)},t.prototype.attachToAppRef=function(t){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t},t.prototype.attachToViewContainerRef=function(t){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=t},t}();function Xi(t,e){return new Hi(t,e)}var Hi=function(t){function e(e,n){var r=t.call(this)||this;return r._parentView=e,r._def=n,r}return Object(r.c)(e,t),e.prototype.createEmbeddedView=function(t){return new Gi(kr.createEmbeddedView(this._parentView,this._def,this._def.element.template,t))},Object.defineProperty(e.prototype,"elementRef",{get:function(){return new bn(Er(this._parentView,this._def.nodeIndex).renderElement)},enumerable:!0,configurable:!0}),e}(Pn);function Yi(t,e){return new Zi(t,e)}var Zi=function(){function t(t,e){this.view=t,this.elDef=e}return t.prototype.get=function(t,e){return void 0===e&&(e=ot.THROW_IF_NOT_FOUND),kr.resolveDep(this.view,this.elDef,!!this.elDef&&0!=(33554432&this.elDef.flags),{flags:0,token:t,tokenKey:Lr(t)},e)},t}();function Wi(t,e){var n=t.def.nodes[e];if(1&n.flags){var r=Er(t,n.nodeIndex);return n.element.template?r.template:r.renderElement}if(2&n.flags)return wr(t,n.nodeIndex).renderText;if(20240&n.flags)return Cr(t,n.nodeIndex).instance;throw new Error("Illegal state: read nodeValue for node index "+e)}function Ki(t){return new Ji(t.renderer)}var Ji=function(){function t(t){this.delegate=t}return t.prototype.selectRootElement=function(t){return this.delegate.selectRootElement(t)},t.prototype.createElement=function(t,e){var n=hi(e),r=this.delegate.createElement(n[1],n[0]);return t&&this.delegate.appendChild(t,r),r},t.prototype.createViewRoot=function(t){return t},t.prototype.createTemplateAnchor=function(t){var e=this.delegate.createComment("");return t&&this.delegate.appendChild(t,e),e},t.prototype.createText=function(t,e){var n=this.delegate.createText(e);return t&&this.delegate.appendChild(t,n),n},t.prototype.projectNodes=function(t,e){for(var n=0;n<e.length;n++)this.delegate.appendChild(t,e[n])},t.prototype.attachViewAfter=function(t,e){for(var n=this.delegate.parentNode(t),r=this.delegate.nextSibling(t),i=0;i<e.length;i++)this.delegate.insertBefore(n,e[i],r)},t.prototype.detachView=function(t){for(var e=0;e<t.length;e++){var n=t[e],r=this.delegate.parentNode(n);this.delegate.removeChild(r,n)}},t.prototype.destroyView=function(t,e){for(var n=0;n<e.length;n++)this.delegate.destroyNode(e[n])},t.prototype.listen=function(t,e,n){return this.delegate.listen(t,e,n)},t.prototype.listenGlobal=function(t,e,n){return this.delegate.listen(t,e,n)},t.prototype.setElementProperty=function(t,e,n){this.delegate.setProperty(t,e,n)},t.prototype.setElementAttribute=function(t,e,n){var r=hi(e),i=r[0],o=r[1];null!=n?this.delegate.setAttribute(t,o,n,i):this.delegate.removeAttribute(t,o,i)},t.prototype.setBindingDebugInfo=function(t,e,n){},t.prototype.setElementClass=function(t,e,n){n?this.delegate.addClass(t,e):this.delegate.removeClass(t,e)},t.prototype.setElementStyle=function(t,e,n){null!=n?this.delegate.setStyle(t,e,n):this.delegate.removeStyle(t,e)},t.prototype.invokeElementMethod=function(t,e,n){t[e].apply(t,n)},t.prototype.setText=function(t,e){this.delegate.setValue(t,e)},t.prototype.animate=function(){throw new Error("Renderer.animate is no longer supported!")},t}();function Qi(t,e,n,r){return new $i(t,e,n,r)}var $i=function(){function t(t,e,n,r){this._moduleType=t,this._parent=e,this._bootstrapComponents=n,this._def=r,this._destroyListeners=[],this._destroyed=!1,this.injector=this,function(t){for(var e=t._def,n=t._providers=new Array(e.providers.length),r=0;r<e.providers.length;r++){var i=e.providers[r];4096&i.flags||(n[r]=Pi(t,i))}}(this)}return t.prototype.get=function(t,e){return void 0===e&&(e=ot.THROW_IF_NOT_FOUND),Oi(this,{token:t,tokenKey:Lr(t),flags:0},e)},Object.defineProperty(t.prototype,"instance",{get:function(){return this.get(this._moduleType)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"componentFactoryResolver",{get:function(){return this.get(we)},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){if(this._destroyed)throw new Error("The ng module "+Q(this.instance.constructor)+" has already been destroyed.");this._destroyed=!0,function(t,e){for(var n=t._def,r=0;r<n.providers.length;r++)if(131072&n.providers[r].flags){var i=t._providers[r];i&&i!==Ci&&i.ngOnDestroy()}}(this),this._destroyListeners.forEach(function(t){return t()})},t.prototype.onDestroy=function(t){this._destroyListeners.push(t)},t}(),to=Lr(mn),eo=Lr(_n),no=Lr(bn),ro=Lr(An),io=Lr(Pn),oo=Lr(Mn),ao=Lr(ot);function so(t,e,n,r,i,o,a,s){var u=[];if(a)for(var l in a){var c=a[l];u[c[0]]={flags:8,name:l,nonMinifiedName:c[1],ns:null,securityContext:null,suffix:null}}var h=[];if(s)for(var p in s)h.push({type:1,propName:p,target:null,eventName:s[p]});return co(t,e|=16384,n,r,i,i,o,u,h)}function uo(t,e,n){return co(-1,t|=16,null,0,e,e,n)}function lo(t,e,n,r,i){return co(-1,t,e,0,n,r,i)}function co(t,e,n,r,i,o,a,s,u){var l=ti(n),c=l.matchedQueries,h=l.references,p=l.matchedQueryIds;u||(u=[]),s||(s=[]),o=tt(o);var f=ei(a,Q(i));return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:e,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:c,matchedQueryIds:p,references:h,ngContentIndex:-1,childCount:r,bindings:s,bindingFlags:pi(s),outputs:u,element:null,provider:{token:i,value:o,deps:f},text:null,query:null,ngContent:null}}function ho(t,e){return go(t,e)}function po(t,e){for(var n=t;n.parent&&!Jr(n);)n=n.parent;return yo(n.parent,Zr(n),!0,e.provider.value,e.provider.deps)}function fo(t,e){var n=yo(t,e.parent,(32768&e.flags)>0,e.provider.value,e.provider.deps);if(e.outputs.length)for(var r=0;r<e.outputs.length;r++){var i=e.outputs[r],o=n[i.propName].subscribe(mo(t,e.parent.nodeIndex,i.eventName));t.disposables[e.outputIndex+r]=o.unsubscribe.bind(o)}return n}function mo(t,e,n){return function(r){return Hr(t,e,n,r)}}function go(t,e){var n=(8192&e.flags)>0,r=e.provider;switch(201347067&e.flags){case 512:return yo(t,e.parent,n,r.value,r.deps);case 1024:return function(t,e,n,r,i){var o=i.length;switch(o){case 0:return r();case 1:return r(_o(t,e,n,i[0]));case 2:return r(_o(t,e,n,i[0]),_o(t,e,n,i[1]));case 3:return r(_o(t,e,n,i[0]),_o(t,e,n,i[1]),_o(t,e,n,i[2]));default:for(var a=Array(o),s=0;s<o;s++)a[s]=_o(t,e,n,i[s]);return r.apply(void 0,a)}}(t,e.parent,n,r.value,r.deps);case 2048:return _o(t,e.parent,n,r.deps[0]);case 256:return r.value}}function yo(t,e,n,r,i){var o=i.length;switch(o){case 0:return new r;case 1:return new r(_o(t,e,n,i[0]));case 2:return new r(_o(t,e,n,i[0]),_o(t,e,n,i[1]));case 3:return new r(_o(t,e,n,i[0]),_o(t,e,n,i[1]),_o(t,e,n,i[2]));default:for(var a=new Array(o),s=0;s<o;s++)a[s]=_o(t,e,n,i[s]);return new(r.bind.apply(r,[void 0].concat(a)))}}var vo={};function _o(t,e,n,r,i){if(void 0===i&&(i=ot.THROW_IF_NOT_FOUND),8&r.flags)return r.token;var o=t;2&r.flags&&(i=null);var a=r.tokenKey;for(a===oo&&(n=!(!e||!e.element.componentView)),e&&1&r.flags&&(n=!1,e=e.parent);t;){if(e)switch(a){case to:return Ki(bo(t,e,n));case eo:return bo(t,e,n).renderer;case no:return new bn(Er(t,e.nodeIndex).renderElement);case ro:return Er(t,e.nodeIndex).viewContainer;case io:if(e.element.template)return Er(t,e.nodeIndex).template;break;case oo:return Ui(bo(t,e,n));case ao:return Yi(t,e);default:var s=(n?e.element.allProviders:e.element.publicProviders)[a];if(s){var u=Cr(t,s.nodeIndex);return u||(u={instance:go(t,s)},t.nodes[s.nodeIndex]=u),u.instance}}n=Jr(t),e=Zr(t),t=t.parent}var l=o.root.injector.get(r.token,vo);return l!==vo||i===vo?l:o.root.ngModule.injector.get(r.token,i)}function bo(t,e,n){var r;if(n)r=Er(t,e.nodeIndex).componentView;else for(r=t;r.parent&&!Jr(r);)r=r.parent;return r}function xo(t,e,n,r,i,o){if(32768&n.flags){var a=Er(t,n.parent.nodeIndex).componentView;2&a.def.flags&&(a.state|=8)}if(e.instance[n.bindings[r].name]=i,524288&n.flags){o=o||{};var s=Gn.unwrap(t.oldValues[n.bindingIndex+r]);o[n.bindings[r].nonMinifiedName]=new Xn(s,i,0!=(2&t.state))}return t.oldValues[n.bindingIndex+r]=i,o}function wo(t,e){if(t.def.nodeFlags&e)for(var n=t.def.nodes,r=0,i=0;i<n.length;i++){var o=n[i],a=o.parent;for(!a&&o.flags&e&&Co(t,i,o.flags&e,r++),0==(o.childFlags&e)&&(i+=o.childCount);a&&1&a.flags&&i===a.nodeIndex+a.childCount;)a.directChildFlags&e&&(r=Eo(t,a,e,r)),a=a.parent}}function Eo(t,e,n,r){for(var i=e.nodeIndex+1;i<=e.nodeIndex+e.childCount;i++){var o=t.def.nodes[i];o.flags&n&&Co(t,i,o.flags&n,r++),i+=o.childCount}return r}function Co(t,e,n,r){var i=Cr(t,e);if(i){var o=i.instance;o&&(kr.setCurrentNode(t,e),1048576&n&&xr(t,512,r)&&o.ngAfterContentInit(),2097152&n&&o.ngAfterContentChecked(),4194304&n&&xr(t,768,r)&&o.ngAfterViewInit(),8388608&n&&o.ngAfterViewChecked(),131072&n&&o.ngOnDestroy())}}function So(t,e,n){var r=[];for(var i in n)r.push({propName:i,bindingType:n[i]});return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:t,childFlags:0,directChildFlags:0,childMatchedQueries:0,ngContentIndex:-1,matchedQueries:{},matchedQueryIds:0,references:{},childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:{id:e,filterId:$r(e),bindings:r},ngContent:null}}function Io(t){for(var e=t.def.nodeMatchedQueries;t.parent&&Qr(t);){var n=t.parentNodeDef;t=t.parent;for(var r=n.nodeIndex+n.childCount,i=0;i<=r;i++)67108864&(o=t.def.nodes[i]).flags&&536870912&o.flags&&(o.query.filterId&e)===o.query.filterId&&Ir(t,i).setDirty(),!(1&o.flags&&i+o.childCount<n.nodeIndex)&&67108864&o.childFlags&&536870912&o.childFlags||(i+=o.childCount)}if(134217728&t.def.nodeFlags)for(i=0;i<t.def.nodes.length;i++){var o;134217728&(o=t.def.nodes[i]).flags&&536870912&o.flags&&Ir(t,i).setDirty(),i+=o.childCount}}function To(t,e){var n=Ir(t,e.nodeIndex);if(n.dirty){var r,i=void 0;if(67108864&e.flags){var o=e.parent.parent;i=ko(t,o.nodeIndex,o.nodeIndex+o.childCount,e.query,[]),r=Cr(t,e.parent.nodeIndex).instance}else 134217728&e.flags&&(i=ko(t,0,t.def.nodes.length-1,e.query,[]),r=t.component);n.reset(i);for(var a=e.query.bindings,s=!1,u=0;u<a.length;u++){var l=a[u],c=void 0;switch(l.bindingType){case 0:c=n.first;break;case 1:c=n,s=!0}r[l.propName]=c}s&&n.notifyOnChanges()}}function ko(t,e,n,r,i){for(var o=e;o<=n;o++){var a=t.def.nodes[o],s=a.matchedQueries[r.id];if(null!=s&&i.push(Oo(t,a,s)),1&a.flags&&a.element.template&&(a.element.template.nodeMatchedQueries&r.filterId)===r.filterId){var u=Er(t,o);if((a.childMatchedQueries&r.filterId)===r.filterId&&(ko(t,o+1,o+a.childCount,r,i),o+=a.childCount),16777216&a.flags)for(var l=u.viewContainer._embeddedViews,c=0;c<l.length;c++){var h=l[c],p=Yr(h);p&&p===u&&ko(h,0,h.def.nodes.length-1,r,i)}var f=u.template._projectedViews;if(f)for(c=0;c<f.length;c++){var d=f[c];ko(d,0,d.def.nodes.length-1,r,i)}}(a.childMatchedQueries&r.filterId)!==r.filterId&&(o+=a.childCount)}return i}function Oo(t,e,n){if(null!=n)switch(n){case 1:return Er(t,e.nodeIndex).renderElement;case 0:return new bn(Er(t,e.nodeIndex).renderElement);case 2:return Er(t,e.nodeIndex).template;case 3:return Er(t,e.nodeIndex).viewContainer;case 4:return Cr(t,e.nodeIndex).instance}}function Po(t,e){return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:8,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:t,childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:null,ngContent:{index:e}}}function Ao(t,e,n){var r=ni(t,e,n);r&&si(t,n.ngContent.index,1,r,null,void 0)}function Mo(t,e){return No(128,t,new Array(e+1))}function Ro(t,e){return No(32,t,new Array(e))}function Lo(t,e){for(var n=Object.keys(e),r=n.length,i=new Array(r),o=0;o<r;o++){var a=n[o];i[e[a]]=a}return No(64,t,i)}function No(t,e,n){for(var r=new Array(n.length),i=0;i<n.length;i++){var o=n[i];r[i]={flags:8,name:o,ns:null,nonMinifiedName:o,securityContext:null,suffix:null}}return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:t,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:-1,childCount:0,bindings:r,bindingFlags:pi(r),outputs:[],element:null,provider:null,text:null,query:null,ngContent:null}}function Do(t,e,n){for(var r=new Array(n.length-1),i=1;i<n.length;i++)r[i-1]={flags:8,name:null,ns:null,nonMinifiedName:null,securityContext:null,suffix:n[i]};return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:2,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:e,childCount:0,bindings:r,bindingFlags:8,outputs:[],element:null,provider:null,text:{prefix:n[0]},query:null,ngContent:null}}function Fo(t,e,n){var r,i=t.renderer;r=i.createText(n.text.prefix);var o=ni(t,e,n);return o&&i.appendChild(o,r),{renderText:r}}function zo(t,e){return(null!=t?t.toString():"")+e.suffix}function jo(t,e,n,r){for(var i=0,o=0,a=0,s=0,u=0,l=null,c=null,h=!1,p=!1,f=null,d=0;d<e.length;d++){var m=e[d];if(m.nodeIndex=d,m.parent=l,m.bindingIndex=i,m.outputIndex=o,m.renderParent=c,a|=m.flags,u|=m.matchedQueryIds,m.element){var g=m.element;g.publicProviders=l?l.element.publicProviders:Object.create(null),g.allProviders=g.publicProviders,h=!1,p=!1,m.element.template&&(u|=m.element.template.nodeMatchedQueries)}if(Vo(l,m,e.length),i+=m.bindings.length,o+=m.outputs.length,!c&&3&m.flags&&(f=m),20224&m.flags){h||(h=!0,l.element.publicProviders=Object.create(l.element.publicProviders),l.element.allProviders=l.element.publicProviders);var y=0!=(32768&m.flags);0==(8192&m.flags)||y?l.element.publicProviders[Lr(m.provider.token)]=m:(p||(p=!0,l.element.allProviders=Object.create(l.element.publicProviders)),l.element.allProviders[Lr(m.provider.token)]=m),y&&(l.element.componentProvider=m)}if(l?(l.childFlags|=m.flags,l.directChildFlags|=m.flags,l.childMatchedQueries|=m.matchedQueryIds,m.element&&m.element.template&&(l.childMatchedQueries|=m.element.template.nodeMatchedQueries)):s|=m.flags,m.childCount>0)l=m,Bo(m)||(c=m);else for(;l&&d===l.nodeIndex+l.childCount;){var v=l.parent;v&&(v.childFlags|=l.childFlags,v.childMatchedQueries|=l.childMatchedQueries),c=(l=v)&&Bo(l)?l.renderParent:l}}return{factory:null,nodeFlags:a,rootNodeFlags:s,nodeMatchedQueries:u,flags:t,nodes:e,updateDirectives:n||Mr,updateRenderer:r||Mr,handleEvent:function(t,n,r,i){return e[n].element.handleEvent(t,r,i)},bindingCount:i,outputCount:o,lastRenderRootNode:f}}function Bo(t){return 0!=(1&t.flags)&&null===t.element.name}function Vo(t,e,n){var r=e.element&&e.element.template;if(r){if(!r.lastRenderRootNode)throw new Error("Illegal State: Embedded templates without nodes are not allowed!");if(r.lastRenderRootNode&&16777216&r.lastRenderRootNode.flags)throw new Error("Illegal State: Last root node of a template can't have embedded views, at index "+e.nodeIndex+"!")}if(20224&e.flags&&0==(1&(t?t.flags:0)))throw new Error("Illegal State: StaticProvider/Directive nodes need to be children of elements or anchors, at index "+e.nodeIndex+"!");if(e.query){if(67108864&e.flags&&(!t||0==(16384&t.flags)))throw new Error("Illegal State: Content Query nodes need to be children of directives, at index "+e.nodeIndex+"!");if(134217728&e.flags&&t)throw new Error("Illegal State: View Query nodes have to be top level nodes, at index "+e.nodeIndex+"!")}if(e.childCount){var i=t?t.nodeIndex+t.childCount:n-1;if(e.nodeIndex<=i&&e.nodeIndex+e.childCount>i)throw new Error("Illegal State: childCount of node leads outside of parent, at index "+e.nodeIndex+"!")}}function qo(t,e,n,r){var i=Xo(t.root,t.renderer,t,e,n);return Ho(i,t.component,r),Yo(i),i}function Uo(t,e,n){var r=Xo(t,t.renderer,null,null,e);return Ho(r,n,n),Yo(r),r}function Go(t,e,n,r){var i,o=e.element.componentRendererType;return i=o?t.root.rendererFactory.createRenderer(r,o):t.root.renderer,Xo(t.root,i,t,e.element.componentProvider,n)}function Xo(t,e,n,r,i){var o=new Array(i.nodes.length),a=i.outputCount?new Array(i.outputCount):null;return{def:i,parent:n,viewContainerParent:null,parentNodeDef:r,context:null,component:null,nodes:o,state:13,root:t,renderer:e,oldValues:new Array(i.bindingCount),disposables:a,initIndex:-1}}function Ho(t,e,n){t.component=e,t.context=n}function Yo(t){var e;Jr(t)&&(e=Er(t.parent,t.parentNodeDef.parent.nodeIndex).renderElement);for(var n=t.def,r=t.nodes,i=0;i<n.nodes.length;i++){var o=n.nodes[i];kr.setCurrentNode(t,i);var a=void 0;switch(201347067&o.flags){case 1:var s=bi(t,e,o),u=void 0;if(33554432&o.flags){var l=ii(o.element.componentView);u=kr.createComponentView(t,o,l,s)}xi(t,u,o,s),a={renderElement:s,componentView:u,viewContainer:null,template:o.element.template?Xi(t,o):void 0},16777216&o.flags&&(a.viewContainer=Vi(t,o,a));break;case 2:a=Fo(t,e,o);break;case 512:case 1024:case 2048:case 256:(a=r[i])||4096&o.flags||(a={instance:ho(t,o)});break;case 16:a={instance:po(t,o)};break;case 16384:(a=r[i])||(a={instance:fo(t,o)}),32768&o.flags&&Ho(Er(t,o.parent.nodeIndex).componentView,a.instance,a.instance);break;case 32:case 64:case 128:a={value:void 0};break;case 67108864:case 134217728:a=new Sn;break;case 8:Ao(t,e,o),a=void 0}r[i]=a}na(t,ea.CreateViewNodes),aa(t,201326592,268435456,0)}function Zo(t){Jo(t),kr.updateDirectives(t,1),ra(t,ea.CheckNoChanges),kr.updateRenderer(t,1),na(t,ea.CheckNoChanges),t.state&=-97}function Wo(t){1&t.state?(t.state&=-2,t.state|=2):t.state&=-3,br(t,0,256),Jo(t),kr.updateDirectives(t,0),ra(t,ea.CheckAndUpdate),aa(t,67108864,536870912,0);var e=br(t,256,512);wo(t,2097152|(e?1048576:0)),kr.updateRenderer(t,0),na(t,ea.CheckAndUpdate),aa(t,134217728,536870912,0),wo(t,8388608|((e=br(t,512,768))?4194304:0)),2&t.def.flags&&(t.state&=-9),t.state&=-97,br(t,768,1024)}function Ko(t,e,n,r,i,o,a,s,u,l,c,h,p){return 0===n?function(t,e,n,r,i,o,a,s,u,l,c,h){switch(201347067&e.flags){case 1:return function(t,e,n,r,i,o,a,s,u,l,c,h){var p=e.bindings.length,f=!1;return p>0&&Ei(t,e,0,n)&&(f=!0),p>1&&Ei(t,e,1,r)&&(f=!0),p>2&&Ei(t,e,2,i)&&(f=!0),p>3&&Ei(t,e,3,o)&&(f=!0),p>4&&Ei(t,e,4,a)&&(f=!0),p>5&&Ei(t,e,5,s)&&(f=!0),p>6&&Ei(t,e,6,u)&&(f=!0),p>7&&Ei(t,e,7,l)&&(f=!0),p>8&&Ei(t,e,8,c)&&(f=!0),p>9&&Ei(t,e,9,h)&&(f=!0),f}(t,e,n,r,i,o,a,s,u,l,c,h);case 2:return function(t,e,n,r,i,o,a,s,u,l,c,h){var p=!1,f=e.bindings,d=f.length;if(d>0&&qr(t,e,0,n)&&(p=!0),d>1&&qr(t,e,1,r)&&(p=!0),d>2&&qr(t,e,2,i)&&(p=!0),d>3&&qr(t,e,3,o)&&(p=!0),d>4&&qr(t,e,4,a)&&(p=!0),d>5&&qr(t,e,5,s)&&(p=!0),d>6&&qr(t,e,6,u)&&(p=!0),d>7&&qr(t,e,7,l)&&(p=!0),d>8&&qr(t,e,8,c)&&(p=!0),d>9&&qr(t,e,9,h)&&(p=!0),p){var m=e.text.prefix;d>0&&(m+=zo(n,f[0])),d>1&&(m+=zo(r,f[1])),d>2&&(m+=zo(i,f[2])),d>3&&(m+=zo(o,f[3])),d>4&&(m+=zo(a,f[4])),d>5&&(m+=zo(s,f[5])),d>6&&(m+=zo(u,f[6])),d>7&&(m+=zo(l,f[7])),d>8&&(m+=zo(c,f[8])),d>9&&(m+=zo(h,f[9]));var g=wr(t,e.nodeIndex).renderText;t.renderer.setValue(g,m)}return p}(t,e,n,r,i,o,a,s,u,l,c,h);case 16384:return function(t,e,n,r,i,o,a,s,u,l,c,h){var p=Cr(t,e.nodeIndex),f=p.instance,d=!1,m=void 0,g=e.bindings.length;return g>0&&Vr(t,e,0,n)&&(d=!0,m=xo(t,p,e,0,n,m)),g>1&&Vr(t,e,1,r)&&(d=!0,m=xo(t,p,e,1,r,m)),g>2&&Vr(t,e,2,i)&&(d=!0,m=xo(t,p,e,2,i,m)),g>3&&Vr(t,e,3,o)&&(d=!0,m=xo(t,p,e,3,o,m)),g>4&&Vr(t,e,4,a)&&(d=!0,m=xo(t,p,e,4,a,m)),g>5&&Vr(t,e,5,s)&&(d=!0,m=xo(t,p,e,5,s,m)),g>6&&Vr(t,e,6,u)&&(d=!0,m=xo(t,p,e,6,u,m)),g>7&&Vr(t,e,7,l)&&(d=!0,m=xo(t,p,e,7,l,m)),g>8&&Vr(t,e,8,c)&&(d=!0,m=xo(t,p,e,8,c,m)),g>9&&Vr(t,e,9,h)&&(d=!0,m=xo(t,p,e,9,h,m)),m&&f.ngOnChanges(m),65536&e.flags&&xr(t,256,e.nodeIndex)&&f.ngOnInit(),262144&e.flags&&f.ngDoCheck(),d}(t,e,n,r,i,o,a,s,u,l,c,h);case 32:case 64:case 128:return function(t,e,n,r,i,o,a,s,u,l,c,h){var p=e.bindings,f=!1,d=p.length;if(d>0&&qr(t,e,0,n)&&(f=!0),d>1&&qr(t,e,1,r)&&(f=!0),d>2&&qr(t,e,2,i)&&(f=!0),d>3&&qr(t,e,3,o)&&(f=!0),d>4&&qr(t,e,4,a)&&(f=!0),d>5&&qr(t,e,5,s)&&(f=!0),d>6&&qr(t,e,6,u)&&(f=!0),d>7&&qr(t,e,7,l)&&(f=!0),d>8&&qr(t,e,8,c)&&(f=!0),d>9&&qr(t,e,9,h)&&(f=!0),f){var m=Sr(t,e.nodeIndex),g=void 0;switch(201347067&e.flags){case 32:g=new Array(p.length),d>0&&(g[0]=n),d>1&&(g[1]=r),d>2&&(g[2]=i),d>3&&(g[3]=o),d>4&&(g[4]=a),d>5&&(g[5]=s),d>6&&(g[6]=u),d>7&&(g[7]=l),d>8&&(g[8]=c),d>9&&(g[9]=h);break;case 64:g={},d>0&&(g[p[0].name]=n),d>1&&(g[p[1].name]=r),d>2&&(g[p[2].name]=i),d>3&&(g[p[3].name]=o),d>4&&(g[p[4].name]=a),d>5&&(g[p[5].name]=s),d>6&&(g[p[6].name]=u),d>7&&(g[p[7].name]=l),d>8&&(g[p[8].name]=c),d>9&&(g[p[9].name]=h);break;case 128:var y=n;switch(d){case 1:g=y.transform(n);break;case 2:g=y.transform(r);break;case 3:g=y.transform(r,i);break;case 4:g=y.transform(r,i,o);break;case 5:g=y.transform(r,i,o,a);break;case 6:g=y.transform(r,i,o,a,s);break;case 7:g=y.transform(r,i,o,a,s,u);break;case 8:g=y.transform(r,i,o,a,s,u,l);break;case 9:g=y.transform(r,i,o,a,s,u,l,c);break;case 10:g=y.transform(r,i,o,a,s,u,l,c,h)}}m.value=g}return f}(t,e,n,r,i,o,a,s,u,l,c,h);default:throw"unreachable"}}(t,e,r,i,o,a,s,u,l,c,h,p):function(t,e,n){switch(201347067&e.flags){case 1:return function(t,e,n){for(var r=!1,i=0;i<n.length;i++)Ei(t,e,i,n[i])&&(r=!0);return r}(t,e,n);case 2:return function(t,e,n){for(var r=e.bindings,i=!1,o=0;o<n.length;o++)qr(t,e,o,n[o])&&(i=!0);if(i){var a="";for(o=0;o<n.length;o++)a+=zo(n[o],r[o]);a=e.text.prefix+a;var s=wr(t,e.nodeIndex).renderText;t.renderer.setValue(s,a)}return i}(t,e,n);case 16384:return function(t,e,n){for(var r=Cr(t,e.nodeIndex),i=r.instance,o=!1,a=void 0,s=0;s<n.length;s++)Vr(t,e,s,n[s])&&(o=!0,a=xo(t,r,e,s,n[s],a));return a&&i.ngOnChanges(a),65536&e.flags&&xr(t,256,e.nodeIndex)&&i.ngOnInit(),262144&e.flags&&i.ngDoCheck(),o}(t,e,n);case 32:case 64:case 128:return function(t,e,n){for(var r=e.bindings,i=!1,o=0;o<n.length;o++)qr(t,e,o,n[o])&&(i=!0);if(i){var a=Sr(t,e.nodeIndex),s=void 0;switch(201347067&e.flags){case 32:s=n;break;case 64:for(s={},o=0;o<n.length;o++)s[r[o].name]=n[o];break;case 128:var u=n[0],l=n.slice(1);s=u.transform.apply(u,l)}a.value=s}return i}(t,e,n);default:throw"unreachable"}}(t,e,r)}function Jo(t){var e=t.def;if(4&e.nodeFlags)for(var n=0;n<e.nodes.length;n++){var r=e.nodes[n];if(4&r.flags){var i=Er(t,n).template._projectedViews;if(i)for(var o=0;o<i.length;o++){var a=i[o];a.state|=32,Xr(a,t)}}else 0==(4&r.childFlags)&&(n+=r.childCount)}}function Qo(t,e,n,r,i,o,a,s,u,l,c,h,p){return 0===n?function(t,e,n,r,i,o,a,s,u,l,c,h){var p=e.bindings.length;p>0&&Ur(t,e,0,n),p>1&&Ur(t,e,1,r),p>2&&Ur(t,e,2,i),p>3&&Ur(t,e,3,o),p>4&&Ur(t,e,4,a),p>5&&Ur(t,e,5,s),p>6&&Ur(t,e,6,u),p>7&&Ur(t,e,7,l),p>8&&Ur(t,e,8,c),p>9&&Ur(t,e,9,h)}(t,e,r,i,o,a,s,u,l,c,h,p):function(t,e,n){for(var r=0;r<n.length;r++)Ur(t,e,r,n[r])}(t,e,r),!1}function $o(t,e){if(Ir(t,e.nodeIndex).dirty)throw Or(kr.createDebugContext(t,e.nodeIndex),"Query "+e.query.id+" not dirty","Query "+e.query.id+" dirty",0!=(1&t.state))}function ta(t){if(!(128&t.state)){if(ra(t,ea.Destroy),na(t,ea.Destroy),wo(t,131072),t.disposables)for(var e=0;e<t.disposables.length;e++)t.disposables[e]();!function(t){if(16&t.state){var e=Yr(t);if(e){var n=e.template._projectedViews;n&&(Ni(n,n.indexOf(t)),kr.dirtyParentQueries(t))}}}(t),t.renderer.destroyNode&&function(t){for(var e=t.def.nodes.length,n=0;n<e;n++){var r=t.def.nodes[n];1&r.flags?t.renderer.destroyNode(Er(t,n).renderElement):2&r.flags?t.renderer.destroyNode(wr(t,n).renderText):(67108864&r.flags||134217728&r.flags)&&Ir(t,n).destroy()}}(t),Jr(t)&&t.renderer.destroy(),t.state|=128}}var ea=function(){var t={CreateViewNodes:0,CheckNoChanges:1,CheckNoChangesProjectedViews:2,CheckAndUpdate:3,CheckAndUpdateProjectedViews:4,Destroy:5};return t[t.CreateViewNodes]="CreateViewNodes",t[t.CheckNoChanges]="CheckNoChanges",t[t.CheckNoChangesProjectedViews]="CheckNoChangesProjectedViews",t[t.CheckAndUpdate]="CheckAndUpdate",t[t.CheckAndUpdateProjectedViews]="CheckAndUpdateProjectedViews",t[t.Destroy]="Destroy",t}();function na(t,e){var n=t.def;if(33554432&n.nodeFlags)for(var r=0;r<n.nodes.length;r++){var i=n.nodes[r];33554432&i.flags?ia(Er(t,r).componentView,e):0==(33554432&i.childFlags)&&(r+=i.childCount)}}function ra(t,e){var n=t.def;if(16777216&n.nodeFlags)for(var r=0;r<n.nodes.length;r++){var i=n.nodes[r];if(16777216&i.flags)for(var o=Er(t,r).viewContainer._embeddedViews,a=0;a<o.length;a++)ia(o[a],e);else 0==(16777216&i.childFlags)&&(r+=i.childCount)}}function ia(t,e){var n=t.state;switch(e){case ea.CheckNoChanges:0==(128&n)&&(12==(12&n)?Zo(t):64&n&&oa(t,ea.CheckNoChangesProjectedViews));break;case ea.CheckNoChangesProjectedViews:0==(128&n)&&(32&n?Zo(t):64&n&&oa(t,e));break;case ea.CheckAndUpdate:0==(128&n)&&(12==(12&n)?Wo(t):64&n&&oa(t,ea.CheckAndUpdateProjectedViews));break;case ea.CheckAndUpdateProjectedViews:0==(128&n)&&(32&n?Wo(t):64&n&&oa(t,e));break;case ea.Destroy:ta(t);break;case ea.CreateViewNodes:Yo(t)}}function oa(t,e){ra(t,e),na(t,e)}function aa(t,e,n,r){if(t.def.nodeFlags&e&&t.def.nodeFlags&n)for(var i=t.def.nodes.length,o=0;o<i;o++){var a=t.def.nodes[o];if(a.flags&e&&a.flags&n)switch(kr.setCurrentNode(t,a.nodeIndex),r){case 0:To(t,a);break;case 1:$o(t,a)}a.childFlags&e&&a.childFlags&n||(o+=a.childCount)}}var sa=!1;function ua(){if(!sa){sa=!0;var t=en()?{setCurrentNode:Pa,createRootView:ca,createEmbeddedView:pa,createComponentView:fa,createNgModuleRef:da,overrideProvider:ya,overrideComponentView:va,clearOverrides:_a,checkAndUpdateView:Ea,checkNoChangesView:Ca,destroyView:Sa,createDebugContext:function(t,e){return new Ba(t,e)},handleEvent:Aa,updateDirectives:Ma,updateRenderer:Ra}:{setCurrentNode:function(){},createRootView:la,createEmbeddedView:qo,createComponentView:Go,createNgModuleRef:Qi,overrideProvider:Mr,overrideComponentView:Mr,clearOverrides:Mr,checkAndUpdateView:Wo,checkNoChangesView:Zo,destroyView:ta,createDebugContext:function(t,e){return new Ba(t,e)},handleEvent:function(t,e,n,r){return t.def.handleEvent(t,e,n,r)},updateDirectives:function(t,e){return t.def.updateDirectives(0===e?xa:wa,t)},updateRenderer:function(t,e){return t.def.updateRenderer(0===e?xa:wa,t)}};kr.setCurrentNode=t.setCurrentNode,kr.createRootView=t.createRootView,kr.createEmbeddedView=t.createEmbeddedView,kr.createComponentView=t.createComponentView,kr.createNgModuleRef=t.createNgModuleRef,kr.overrideProvider=t.overrideProvider,kr.overrideComponentView=t.overrideComponentView,kr.clearOverrides=t.clearOverrides,kr.checkAndUpdateView=t.checkAndUpdateView,kr.checkNoChangesView=t.checkNoChangesView,kr.destroyView=t.destroyView,kr.resolveDep=_o,kr.createDebugContext=t.createDebugContext,kr.handleEvent=t.handleEvent,kr.updateDirectives=t.updateDirectives,kr.updateRenderer=t.updateRenderer,kr.dirtyParentQueries=Io}}function la(t,e,n,r,i,o){return Uo(ha(t,i,i.injector.get(yn),e,n),r,o)}function ca(t,e,n,r,i,o){var a=i.injector.get(yn),s=ha(t,i,new Ga(a),e,n),u=ba(r);return qa(Oa.create,Uo,null,[s,u,o])}function ha(t,e,n,r,i){var o=e.injector.get(_r),a=e.injector.get(St);return{ngModule:e,injector:t,projectableNodes:r,selectorOrNode:i,sanitizer:o,rendererFactory:n,renderer:n.createRenderer(null,null),errorHandler:a}}function pa(t,e,n,r){var i=ba(n);return qa(Oa.create,qo,null,[t,e,i,r])}function fa(t,e,n,r){return n=ga.get(e.element.componentProvider.provider.token)||ba(n),qa(Oa.create,Go,null,[t,e,n,r])}function da(t,e,n,r){return Qi(t,e,n,function(t){var e=function(t){var e=!1,n=!1;return 0===ma.size?{hasOverrides:e,hasDeprecatedOverrides:n}:(t.providers.forEach(function(t){var r=ma.get(t.token);3840&t.flags&&r&&(e=!0,n=n||r.deprecatedBehavior)}),{hasOverrides:e,hasDeprecatedOverrides:n})}(t),n=e.hasDeprecatedOverrides;return e.hasOverrides?(function(t){for(var e=0;e<t.providers.length;e++){var r=t.providers[e];n&&(r.flags|=4096);var i=ma.get(r.token);i&&(r.flags=-3841&r.flags|i.flags,r.deps=ei(i.deps),r.value=i.value)}}(t=t.factory(function(){return Mr})),t):t}(r))}var ma=new Map,ga=new Map;function ya(t){ma.set(t.token,t)}function va(t,e){var n=ii(ii(zi(e)).nodes[0].element.componentView);ga.set(t,n)}function _a(){ma.clear(),ga.clear()}function ba(t){if(0===ma.size)return t;var e=function(t){for(var e=[],n=null,r=0;r<t.nodes.length;r++){var i=t.nodes[r];1&i.flags&&(n=i),n&&3840&i.flags&&ma.has(i.provider.token)&&(e.push(n.nodeIndex),n=null)}return e}(t);if(0===e.length)return t;t=t.factory(function(){return Mr});for(var n=0;n<e.length;n++)r(t,e[n]);return t;function r(t,e){for(var n=e+1;n<t.nodes.length;n++){var r=t.nodes[n];if(1&r.flags)return;if(3840&r.flags){var i=r.provider,o=ma.get(i.token);o&&(r.flags=-3841&r.flags|o.flags,i.deps=ei(o.deps),i.value=o.value)}}}}function xa(t,e,n,r,i,o,a,s,u,l,c,h,p){var f=t.def.nodes[e];return Ko(t,f,n,r,i,o,a,s,u,l,c,h,p),224&f.flags?Sr(t,e).value:void 0}function wa(t,e,n,r,i,o,a,s,u,l,c,h,p){var f=t.def.nodes[e];return Qo(t,f,n,r,i,o,a,s,u,l,c,h,p),224&f.flags?Sr(t,e).value:void 0}function Ea(t){return qa(Oa.detectChanges,Wo,null,[t])}function Ca(t){return qa(Oa.checkNoChanges,Zo,null,[t])}function Sa(t){return qa(Oa.destroy,ta,null,[t])}var Ia,Ta,ka,Oa=function(){var t={create:0,detectChanges:1,checkNoChanges:2,destroy:3,handleEvent:4};return t[t.create]="create",t[t.detectChanges]="detectChanges",t[t.checkNoChanges]="checkNoChanges",t[t.destroy]="destroy",t[t.handleEvent]="handleEvent",t}();function Pa(t,e){Ta=t,ka=e}function Aa(t,e,n,r){return Pa(t,e),qa(Oa.handleEvent,t.def.handleEvent,null,[t,e,n,r])}function Ma(t,e){if(128&t.state)throw Ar(Oa[Ia]);return Pa(t,za(t,0)),t.def.updateDirectives(function(t,n,r){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=t.def.nodes[n];return 0===e?La(t,a,r,i):Na(t,a,r,i),16384&a.flags&&Pa(t,za(t,n)),224&a.flags?Sr(t,a.nodeIndex).value:void 0},t)}function Ra(t,e){if(128&t.state)throw Ar(Oa[Ia]);return Pa(t,ja(t,0)),t.def.updateRenderer(function(t,n,r){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=t.def.nodes[n];return 0===e?La(t,a,r,i):Na(t,a,r,i),3&a.flags&&Pa(t,ja(t,n)),224&a.flags?Sr(t,a.nodeIndex).value:void 0},t)}function La(t,e,n,r){if(Ko.apply(void 0,[t,e,n].concat(r))){var i=1===n?r[0]:r;if(16384&e.flags){for(var o={},a=0;a<e.bindings.length;a++){var s=e.bindings[a],u=i[a];8&s.flags&&(o[(p=s.nonMinifiedName,"ng-reflect-"+(p=p.replace(/[$@]/g,"_").replace(Da,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"-"+t[1].toLowerCase()})))]=Fa(u))}var l=e.parent,c=Er(t,l.nodeIndex).renderElement;if(l.element.name)for(var h in o)null!=(u=o[h])?t.renderer.setAttribute(c,h,u):t.renderer.removeAttribute(c,h);else t.renderer.setValue(c,"bindings="+JSON.stringify(o,null,2))}}var p}function Na(t,e,n,r){Qo.apply(void 0,[t,e,n].concat(r))}var Da=/([A-Z])/g;function Fa(t){try{return null!=t?t.toString().slice(0,30):t}catch(t){return"[ERROR] Exception while trying to serialize the value"}}function za(t,e){for(var n=e;n<t.def.nodes.length;n++){var r=t.def.nodes[n];if(16384&r.flags&&r.bindings&&r.bindings.length)return n}return null}function ja(t,e){for(var n=e;n<t.def.nodes.length;n++){var r=t.def.nodes[n];if(3&r.flags&&r.bindings&&r.bindings.length)return n}return null}var Ba=function(){function t(t,e){this.view=t,this.nodeIndex=e,null==e&&(this.nodeIndex=e=0),this.nodeDef=t.def.nodes[e];for(var n=this.nodeDef,r=t;n&&0==(1&n.flags);)n=n.parent;if(!n)for(;!n&&r;)n=Zr(r),r=r.parent;this.elDef=n,this.elView=r}return Object.defineProperty(t.prototype,"elOrCompView",{get:function(){return Er(this.elView,this.elDef.nodeIndex).componentView||this.view},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"injector",{get:function(){return Yi(this.elView,this.elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"component",{get:function(){return this.elOrCompView.component},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"context",{get:function(){return this.elOrCompView.context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"providerTokens",{get:function(){var t=[];if(this.elDef)for(var e=this.elDef.nodeIndex+1;e<=this.elDef.nodeIndex+this.elDef.childCount;e++){var n=this.elView.def.nodes[e];20224&n.flags&&t.push(n.provider.token),e+=n.childCount}return t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"references",{get:function(){var t={};if(this.elDef){Va(this.elView,this.elDef,t);for(var e=this.elDef.nodeIndex+1;e<=this.elDef.nodeIndex+this.elDef.childCount;e++){var n=this.elView.def.nodes[e];20224&n.flags&&Va(this.elView,n,t),e+=n.childCount}}return t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"componentRenderElement",{get:function(){var t=function(t){for(;t&&!Jr(t);)t=t.parent;return t.parent?Er(t.parent,Zr(t).nodeIndex):null}(this.elOrCompView);return t?t.renderElement:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderNode",{get:function(){return 2&this.nodeDef.flags?Wr(this.view,this.nodeDef):Wr(this.elView,this.elDef)},enumerable:!0,configurable:!0}),t.prototype.logError=function(t){for(var e,n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];2&this.nodeDef.flags?(e=this.view.def,n=this.nodeDef.nodeIndex):(e=this.elView.def,n=this.elDef.nodeIndex);var o=function(t,e){for(var n=-1,r=0;r<=e;r++)3&t.nodes[r].flags&&n++;return n}(e,n),a=-1;e.factory(function(){return++a===o?(e=t.error).bind.apply(e,[t].concat(r)):Mr;var e}),a<o&&(t.error("Illegal state: the ViewDefinitionFactory did not call the logger!"),t.error.apply(t,r))},t}();function Va(t,e,n){for(var r in e.references)n[r]=Oo(t,e,e.references[r])}function qa(t,e,n,r){var i=Ia,o=Ta,a=ka;try{Ia=t;var s=e.apply(n,r);return Ta=o,ka=a,Ia=i,s}catch(t){if(wt(t)||!Ta)throw t;throw function(t,e){return t instanceof Error||(t=new Error(t.toString())),Pr(t,e),t}(t,Ua())}}function Ua(){return Ta?new Ba(Ta,ka):null}var Ga=function(){function t(t){this.delegate=t}return t.prototype.createRenderer=function(t,e){return new Xa(this.delegate.createRenderer(t,e))},t.prototype.begin=function(){this.delegate.begin&&this.delegate.begin()},t.prototype.end=function(){this.delegate.end&&this.delegate.end()},t.prototype.whenRenderingDone=function(){return this.delegate.whenRenderingDone?this.delegate.whenRenderingDone():Promise.resolve(null)},t}(),Xa=function(){function t(t){this.delegate=t,this.data=this.delegate.data}return t.prototype.destroyNode=function(t){!function(t){Bn.delete(t.nativeNode)}(Vn(t)),this.delegate.destroyNode&&this.delegate.destroyNode(t)},t.prototype.destroy=function(){this.delegate.destroy()},t.prototype.createElement=function(t,e){var n=this.delegate.createElement(t,e),r=Ua();if(r){var i=new Dn(n,null,r);i.name=t,qn(i)}return n},t.prototype.createComment=function(t){var e=this.delegate.createComment(t),n=Ua();return n&&qn(new Nn(e,null,n)),e},t.prototype.createText=function(t){var e=this.delegate.createText(t),n=Ua();return n&&qn(new Nn(e,null,n)),e},t.prototype.appendChild=function(t,e){var n=Vn(t),r=Vn(e);n&&r&&n instanceof Dn&&n.addChild(r),this.delegate.appendChild(t,e)},t.prototype.insertBefore=function(t,e,n){var r=Vn(t),i=Vn(e),o=Vn(n);r&&i&&r instanceof Dn&&r.insertBefore(o,i),this.delegate.insertBefore(t,e,n)},t.prototype.removeChild=function(t,e){var n=Vn(t),r=Vn(e);n&&r&&n instanceof Dn&&n.removeChild(r),this.delegate.removeChild(t,e)},t.prototype.selectRootElement=function(t){var e=this.delegate.selectRootElement(t),n=Ua();return n&&qn(new Dn(e,null,n)),e},t.prototype.setAttribute=function(t,e,n,r){var i=Vn(t);i&&i instanceof Dn&&(i.attributes[r?r+":"+e:e]=n),this.delegate.setAttribute(t,e,n,r)},t.prototype.removeAttribute=function(t,e,n){var r=Vn(t);r&&r instanceof Dn&&(r.attributes[n?n+":"+e:e]=null),this.delegate.removeAttribute(t,e,n)},t.prototype.addClass=function(t,e){var n=Vn(t);n&&n instanceof Dn&&(n.classes[e]=!0),this.delegate.addClass(t,e)},t.prototype.removeClass=function(t,e){var n=Vn(t);n&&n instanceof Dn&&(n.classes[e]=!1),this.delegate.removeClass(t,e)},t.prototype.setStyle=function(t,e,n,r){var i=Vn(t);i&&i instanceof Dn&&(i.styles[e]=n),this.delegate.setStyle(t,e,n,r)},t.prototype.removeStyle=function(t,e,n){var r=Vn(t);r&&r instanceof Dn&&(r.styles[e]=null),this.delegate.removeStyle(t,e,n)},t.prototype.setProperty=function(t,e,n){var r=Vn(t);r&&r instanceof Dn&&(r.properties[e]=n),this.delegate.setProperty(t,e,n)},t.prototype.listen=function(t,e,n){if("string"!=typeof t){var r=Vn(t);r&&r.listeners.push(new function(t,e){this.name=t,this.callback=e}(e,n))}return this.delegate.listen(t,e,n)},t.prototype.parentNode=function(t){return this.delegate.parentNode(t)},t.prototype.nextSibling=function(t){return this.delegate.nextSibling(t)},t.prototype.setValue=function(t,e){return this.delegate.setValue(t,e)},t}();function Ha(t){return ua(),kr.overrideProvider(t)}function Ya(t,e){return ua(),kr.overrideComponentView(t,e)}function Za(){return ua(),kr.clearOverrides()}function Wa(t,e,n){return new Ka(t,e,n)}var Ka=function(t){function e(e,n,r){var i=t.call(this)||this;return i.moduleType=e,i._bootstrapComponents=n,i._ngModuleDefFactory=r,i}return Object(r.c)(e,t),e.prototype.create=function(t){ua();var e=ii(this._ngModuleDefFactory);return kr.createNgModuleRef(this.moduleType,t||ot.NULL,this._bootstrapComponents,e)},e}(Ie);function Ja(t){return"string"==typeof t?'"'+t+'"':""+t}function Qa(t,e,n,r){t!=e&&es(t,e,n,"==",r)}function $a(t,e){ts(t,null,e)}function ts(t,e,n){t==e&&es(t,e,n,"!=")}function es(t,e,n,r,i){throw void 0===i&&(i=Ja),new Error("ASSERT: expected "+n+" "+r+" "+i(e)+" but was "+i(t)+"!")}function ns(t,e){ts(t,null,"node"),Qa(3&t.flags,e,"Node.type",rs)}function rs(t){return 1==t?"Projection":0==t?"Container":2==t?"View":3==t?"Element":"??? "+t+" ???"}function is(t,e,n,r){ngDevMode&&ns(t,0),ngDevMode&&ns(e,2);var i=function(t){for(var e=t;e;){ngDevMode&&ns(e,0);var n=e.data.renderParent;if(null!==n)return n.native;var r=e.parent;if(ngDevMode&&$a(r,"container.parent"),3==(3&r.flags))return null;ngDevMode&&ns(r,2),e=r.parent}return null}(t),o=e.child;if(i)for(;o;){var a=3&o.flags,s=null,u=t.view.renderer,l=u.listen;if(3===a)n?l?u.insertBefore(i,o.native,r):i.insertBefore(o.native,r,!0):l?u.removeChild(i,o.native):i.removeChild(o.native),s=o.next;else if(0===a){var c=o.data;n?l?u.appendChild(i,o.native):i.appendChild(o.native):l?u.removeChild(i,o.native):i.removeChild(o.native),s=c.views.length?c.views[0].child:null}else s=1===a?o.data[0]:o.child;if(null===s){for(;o&&!o.next;)(o=o.parent)===e&&(o=null);o=o&&o.next}else o=s}}function os(t,e){var n=t.data.views,r=n[e];return e>0&&as(n[e-1],r.next),n.splice(e,1),function(t){for(var e=t;e;){var n=null;if(e.views&&e.views.length?n=e.views[0].data:e.child?n=e.child:e.next&&(us(e),n=e.next),null==n){for(;e&&!e.next;)us(e),e=ss(e,t);us(e||t),n=e&&e.next}e=n}}(r.data),is(t,r,!1),t.query&&t.query.removeView(t,r,e),r}function as(t,e){t.next=e,t.data.next=e?e.data:null}function ss(t,e){var n;return(n=t.node)&&2==(3&n.flags)?n.parent.data:t.parent===e?null:t.parent}function us(t){if(t.cleanup){for(var e=t.cleanup,n=0;n<e.length-1;n+=2)"string"==typeof e[n]?(e[n+1].removeEventListener(e[n],e[n+2],e[n+3]),n+=2):e[n].call(e[n+1]);t.cleanup=null}}function ls(t,e,n){if(null!==e&&3==(3&t.flags)&&(t.view!==n||null===t.data)){var r=n.renderer;return r.listen?r.appendChild(t.native,e):t.native.appendChild(e),!0}return!1}function cs(t){return"function"==typeof t?t.name||t:"string"==typeof t?t:null==t?"":""+t}"undefined"==typeof ngDevMode&&("undefined"!=typeof window&&(window.ngDevMode=!0),"undefined"!=typeof self&&(self.ngDevMode=!0),"undefined"!=typeof t&&(t.ngDevMode=!0));var hs,ps,fs,ds,ms,gs,ys,vs,_s,bs,xs,ws=function(){var t={Important:1,DashCase:2};return t[t.Important]="Important",t[t.DashCase]="DashCase",t}(),Es={createRenderer:function(t,e){return document}},Cs="__ngHostLNode__";function Ss(t,e){var n=gs;return _s=t.data,bs=t.bindingStartIndex||0,ms=t.ngStaticData,vs=t.creationMode,xs=t.viewHookStartIndex,hs=t.renderer,null!=e&&(fs=e,ds=!0),gs=t,n}function Is(t){!function(){if(null!=xs){for(var t=xs,e=t;t<_s.length;)_s[t+1].call(_s[t+2]),16===_s[t]&&(e<t&&(_s[e]=_s[t],_s[e+1]=_s[t+1],_s[e+2]=_s[t+2]),e+=3),t+=3;_s.length=e}}(),Ss(t,null)}function Ts(t,e,n){return{parent:gs,id:t,node:null,data:[],ngStaticData:n,cleanup:null,renderer:e,child:null,tail:null,next:null,bindingStartIndex:null,creationMode:!0,viewHookStartIndex:null}}function ks(t,e,n,r){var i=ds?fs:fs&&fs.parent,o=(ds?ys:fs&&fs.query)||i&&i.query&&i.query.child(),a=null!=r,s={flags:e,native:n,view:gs,parent:i,child:null,next:null,nodeInjector:i?i.nodeInjector:null,data:a?r:null,query:o,staticData:null};return 2==(2&e)&&a&&(ngDevMode&&Qa(r.node,null,"viewState.node"),r.node=s),null!=t&&(ngDevMode&&Qa(_s.length,t,"data.length not in sequence"),_s[t]=s,t>=ms.length?ms[t]=null:s.staticData=ms[t],ds?(ys=null,fs.view!==gs&&2!=(3&fs.flags)||(ngDevMode&&Qa(fs.child,null,"previousNode.child"),fs.child=s)):fs&&(ngDevMode&&Qa(fs.next,null,"previousNode.next"),fs.next=s)),fs=s,ds=!0,s}function Os(t,e,n,r){var i,o;if(null==e){var a=_s[t];o=a&&a.native}else{ngDevMode&&Qa(gs.bindingStartIndex,null,"bindingStartIndex");var s="string"!=typeof e,u=s?e.tag:e;if(null===u)throw"for now name is required";o=hs.createElement(u);var l=null;if(s){var c=Ps(e.template);l=Ys(Ts(-1,ps.createRenderer(o,e.rendererType),c))}null==(i=ks(t,3,o,l)).staticData&&(ngDevMode&&Qs(t-1),i.staticData=ms[t]=Ns(u,n||null,null,r||null)),n&&function(t,e){ngDevMode&&Qa(e.length%2,0,"attrs.length % 2");for(var n=hs.setAttribute,r=0;r<e.length;r+=2)n?hs.setAttribute(t,e[r],e[1|r]):t.setAttribute(e[r],e[1|r])}(o,n),ls(i.parent,o,gs)}return o}function Ps(t){return t.ngStaticData||(t.ngStaticData=[])}function As(t,e){return new Error("Renderer: "+t+" ["+cs(e)+"]")}function Ms(t,e){ngDevMode&&Qs(-1),ps=t;var n=t.createRenderer(null,null),r="string"==typeof e?n.selectRootElement?n.selectRootElement(e):n.querySelector(e):e;if(ngDevMode&&!r)throw As("string"==typeof e?"Host node with selector not found:":"Host node is required:",e);return r}function Rs(){ds?ds=!1:(ngDevMode&&Js(),fs=fs.parent),ngDevMode&&ns(fs,3);var t=fs.query;t&&t.addNode(fs)}function Ls(t,e,n){if(n!==Zs){var r=_s[t],i=r.staticData;void 0===i.inputs&&(i.inputs=null,i=function(t,e,n){void 0===n&&(n=!1);for(var r=t>>12,i=r,o=r+((4092&t)>>2);i<o;i++){var a=ms[i],s=n?a.inputs:a.outputs;for(var u in s)if(s.hasOwnProperty(u)){var l=s[u],c=n?e.inputs||(e.inputs={}):e.outputs||(e.outputs={});c.hasOwnProperty(u)?c[u].push(i,l):c[u]=[i,l]}}return e}(r.flags,i,!0));var o,a=i.inputs;if(a&&(o=a[e]))!function(t,e){for(var n=0;n<t.length;n+=2)ngDevMode&&Qs(t[n]),_s[t[n]][t[1|n]]=e}(o,n);else{var s=r.native;hs.setProperty?hs.setProperty(s,e,n):s.setProperty?s.setProperty(e,n):s[e]=n}}}function Ns(t,e,n,r){return{tagName:t,attrs:e,localNames:r?[r,-1]:null,initialInputs:void 0,inputs:void 0,outputs:void 0,containerStatic:n}}function Ds(t,e,n,r){if(n!==Zs){var i=_s[t];null==n?hs.removeStyle?hs.removeStyle(i.native,e,ws.DashCase):i.native.style.removeProperty(e):hs.setStyle?hs.setStyle(i.native,e,r?cs(n)+r:cs(n),ws.DashCase):i.native.style.setProperty(e,r?cs(n)+r:cs(n))}}function Fs(t,e){ngDevMode&&Qa(gs.bindingStartIndex,null,"bindingStartIndex");var n=null!=e?hs.createText?hs.createText(cs(e)):hs.createTextNode(cs(e)):null,r=ks(t,3,n);ds=!1,ls(r.parent,n,gs)}function zs(t,e){var n=t<_s.length&&_s[t];n&&n.native?e!==Zs&&(hs.setValue?hs.setValue(n.native,cs(e)):n.native.textContent=cs(e)):n?(n.native=hs.createText?hs.createText(cs(e)):hs.createTextNode(cs(e)),function(t,e){var n=t.parent;if(3==(3&n.flags)&&(n.view!==e||null===n.data)){for(var r=t.next,i=null;r&&null===(i=r.native);)r=r.next;var o=e.renderer;o.listen?o.insertBefore(n.native,t.native,i):n.native.insertBefore(t.native,i,!1)}}(n,gs)):Fs(t,e)}function js(t,e,n,r){var i;if(null==e)ngDevMode&&Qs(t),i=_s[t];else{ngDevMode&&Qa(gs.bindingStartIndex,null,"bindingStartIndex"),ngDevMode&&Qa(ds,!0,"isParent");var o=fs.flags;if(0==(4092&o)?o=t<<12|4|3&o:o+=4,fs.flags=o,ngDevMode&&Qs(t-1),Object.defineProperty(e,Cs,{enumerable:!1,value:fs}),_s[t]=i=e,t>=ms.length&&(ms[t]=n,r)){ngDevMode&&$a(fs.staticData,"previousOrParentNode.staticData");var a=fs.staticData;(a.localNames||(a.localNames=[])).push(r,t)}var s=n.diPublic;s&&s(n);var u=fs.staticData;u&&u.attrs&&function(t,e,r){var i=((4092&fs.flags)>>2)-1,o=r.initialInputs;(void 0===o||i>=o.length)&&(o=function(t,e,n){var r=n.initialInputs||(n.initialInputs=[]);r[t]=null;for(var i=n.attrs,o=0;o<i.length;o+=2){var a=e[i[o]];void 0!==a&&(r[t]||(r[t]=[])).push(a,i[1|o])}return r}(i,n.inputs,r));var a=o[i];if(a)for(var s=0;s<a.length;s+=2)t[a[s]]=a[1|s]}(i,0,u)}return i}function Bs(t,e,n,r,i){ngDevMode&&Qa(gs.bindingStartIndex,null,"bindingStartIndex");var o=hs.createComment(ngDevMode?"container":""),a=null,s=ds?fs:fs.parent;ngDevMode&&ts(s,null,"currentParent"),ls(s,o,gs)&&(a=s);var u=ks(t,0,o,{views:[],nextIndex:0,renderParent:a,template:null==e?null:e,next:null,parent:gs});null==u.staticData&&(u.staticData=ms[t]=Ns(n||null,r||null,[],i||null)),Ys(u.data)}function Vs(){ds?ds=!1:(ngDevMode&&Js(),fs=fs.parent),ngDevMode&&ns(fs,0);var t=fs.query;t&&t.addNode(fs)}function qs(t){ngDevMode&&Qs(t),fs=_s[t],ngDevMode&&ns(fs,0),ds=!0,fs.data.nextIndex=0}function Us(){ds?ds=!1:(ngDevMode&&ns(fs,2),ngDevMode&&Js(),fs=fs.parent),ngDevMode&&ns(fs,0);var t=fs;ngDevMode&&ns(t,0);for(var e=t.data.nextIndex;e<t.data.views.length;)os(t,e)}function Gs(t){var e=ds?fs:fs.parent;ngDevMode&&ns(e,0);var n=e.data,r=n.views,i=!vs&&n.nextIndex<r.length&&r[n.nextIndex],o=i&&t===i.data.id;if(o)fs=r[n.nextIndex++],ngDevMode&&ns(fs,2),ds=!0,Ss(i.data,fs);else{var a=Ts(t,hs,function(t,e){ngDevMode&&ns(e,0);var n=e.staticData.containerStatic;return(t>=n.length||null==n[t])&&(n[t]=[]),n[t]}(t,e));Ss(a,ks(null,2,null,a)),n.nextIndex++}return!o}function Xs(){ds=!1;var t=fs=gs.node,e=fs.parent;ngDevMode&&ns(t,2),ngDevMode&&ns(e,0);var n=e.data,r=n.nextIndex<=n.views.length?n.views[n.nextIndex-1]:null;(null==r||r.data.id!==t.data.id)&&(function(t,e,n){var r=t.data,i=r.views;n>0&&as(i[n-1],e),n<i.length&&i[n].data.id!==e.data.id?(as(e,i[n]),i.splice(n,0,e)):n>=i.length&&i.push(e),r.nextIndex<=n&&r.nextIndex++,null!==t.data.renderParent&&is(t,e,!0,function(e,n,r){var i=n.views;return e+1<i.length?i[e+1].child.native:t.native}(n,r)),t.query&&t.query.insertView(t,e,n)}(e,t,n.nextIndex-1),gs.creationMode=!1),Is(gs.parent),ngDevMode&&Qa(ds,!1,"isParent"),ngDevMode&&ns(fs,2)}gs=Ts(null,null,[]);var Hs=function(t,e,n){ngDevMode&&Qs(e);var r=_s[e];ngDevMode&&ns(r,3),ngDevMode&&ts(r.data,null,"isComponent"),ngDevMode&&Qs(t);var i=r.data;ngDevMode&&ts(i,null,"hostView");var o=_s[t],a=Ss(i,r);try{n(o,vs)}finally{i.creationMode=!1,Is(a)}};function Ys(t){return gs.tail?gs.tail.next=t:gs.child=t,gs.tail=t,t}var Zs={};function Ws(t){var e,n,r;return(e=vs)?("number"!=typeof gs.bindingStartIndex&&(bs=gs.bindingStartIndex=_s.length),_s[bs++]=t):((e=t!==Zs&&(r=t,!((n=_s[bs])!=n&&r!=r)&&n!==r))&&(_s[bs]=t),bs++),e?t:Zs}function Ks(t,e,n){return Ws(e)===Zs?Zs:t+cs(e)+n}function Js(){ts(fs.parent,null,"isParent")}function Qs(t,e){var n,r;null==e&&(e=_s),(n=e?e.length:0)<(r=t)&&es(n,r,"data.length",">")}function $s(t,e){void 0===e&&(e={});var n,r=e.rendererFactory||Es,i=t.ngComponentDef,o=Ms(r,e.host||i.tag),a=Ss(Ts(-1,r.createRenderer(o,i.rendererType),[]),null);try{ds=!1,fs=null,ks(0,3,o,Ts(-1,hs,Ps(i.template))),n=js(1,i.n(),i)}finally{Is(a)}return e.features&&e.features.forEach(function(t){return t(n,i)}),tu(n),n}function tu(t){ngDevMode&&$a(t,"component");var e=t[Cs];ngDevMode&&!e&&As("Not a directive instance",t),ngDevMode&&$a(e.data,"hostNode.data"),function(t,n,r,i){var o=Ss(n,e);try{ps.begin&&ps.begin(),r.constructor.ngComponentDef.r(1,0)}finally{ps.end&&ps.end(),n.creationMode=!1,Is(o)}}(0,e.view,t)}function eu(t){var e={type:t.type,diPublic:null,n:t.factory,tag:t.tag||null,template:t.template||null,r:t.refresh||function(e,n){Hs(e,n,t.template)},h:t.hostBindings||ru,inputs:iu(t.inputs),outputs:iu(t.outputs),methods:iu(t.methods),rendererType:Br(t.rendererType)||null},n=t.features;return n&&n.forEach(function(t){return t(e)}),e}var nu={};function ru(){}function iu(t){if(null==t)return nu;var e={};for(var n in t)e[t[n]]=n;return e}function ou(t,e){return{type:7,name:t,definitions:e,options:{}}}function au(t,e){return void 0===e&&(e=null),{type:4,styles:e,timings:t}}function su(t,e){return void 0===e&&(e=null),{type:3,steps:t,options:e}}function uu(t,e){return void 0===e&&(e=null),{type:2,steps:t,options:e}}function lu(t){return{type:6,styles:t,offset:null}}function cu(t,e,n){return{type:0,name:t,styles:e,options:n}}function hu(t){return{type:5,steps:t}}function pu(t,e,n){return void 0===n&&(n=null),{type:1,expr:t,animation:e,options:n}}var fu="*";function du(t,e){return ou(t,e)}function mu(t,e){return au(t,e)}function gu(t){return su(t)}function yu(t){return uu(t)}function vu(t){return lu(t)}function _u(t,e){return cu(t,e)}function bu(t){return hu(t)}function xu(t,e){return pu(t,e)}}).call(e,n("fRUx"))},LaOa:function(t,e,n){"use strict";e.a=function(t,e){return function(n){return n.lift(new o(t,e))}};var r=n("6Xbx"),i=n("E9/g"),o=function(){function t(t,e){this.predicate=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.predicate,this.thisArg))},t}(),a=function(t){function e(e,n,r){t.call(this,e),this.predicate=n,this.thisArg=r,this.count=0}return Object(r.c)(e,t),e.prototype._next=function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}e&&this.destination.next(t)},e}(i.a)},"N/q0":function(t,e,n){var r,i;i=function(){return function t(e,n,i){function o(s,u){if(!n[s]){if(!e[s]){if(!u&&"function"==typeof r&&r)return r(s,!0);if(a)return a(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[s]={exports:{}};e[s][0].call(c.exports,function(t){return o(e[s][1][t]||t)},c,c.exports,t,e,n,i)}return n[s].exports}for(var a="function"==typeof r&&r,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(t,e,n){function r(t){var e=0;if(t&&t.length>0){e+=Math.abs(i(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(i(t[n]))}return e}function i(t){var e,n,r,i,s,u,l=0,c=t.length;if(c>2){for(u=0;u<c;u++)u===c-2?(r=c-2,i=c-1,s=0):u===c-1?(r=c-1,i=0,s=1):(r=u,i=u+1,s=u+2),e=t[r],n=t[i],l+=(o(t[s][0])-o(e[0]))*Math.sin(o(n[1]));l=l*a.RADIUS*a.RADIUS/2}return l}function o(t){return t*Math.PI/180}var a=t("wgs84");e.exports.geometry=function t(e){var n,i=0;switch(e.type){case"Polygon":return r(e.coordinates);case"MultiPolygon":for(n=0;n<e.coordinates.length;n++)i+=r(e.coordinates[n]);return i;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(n=0;n<e.geometries.length;n++)i+=t(e.geometries[n]);return i}},e.exports.ring=i},{wgs84:37}],2:[function(t,e,n){var r;r=function(){"use strict";return function(){var t=new Float32Array(3);t[0]=0,t[1]=0,t[2]=0}(),function(){var t=new Float32Array(4);t[0]=0,t[1]=0,t[2]=0,t[3]=0}(),{vec3:{transformMat3:function(t,e,n){var r=e[0],i=e[1],o=e[2];return t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8],t}},vec4:{transformMat4:function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,t}},mat2:{create:function(){var t=new Float32Array(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},rotate:function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+o*s,t[1]=i*u+a*s,t[2]=r*-s+o*u,t[3]=i*-s+a*u,t},scale:function(t,e,n){var r=e[1],i=e[2],o=e[3],a=n[0],s=n[1];return t[0]=e[0]*a,t[1]=r*a,t[2]=i*s,t[3]=o*s,t}},mat3:{create:function(){var t=new Float32Array(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},fromRotation:function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}},mat4:{create:function(){var t=new Float32Array(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},identity:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},translate:function(t,e,n){var r,i,o,a,s,u,l,c,h,p,f,d,m=n[0],g=n[1],y=n[2];return e===t?(t[12]=e[0]*m+e[4]*g+e[8]*y+e[12],t[13]=e[1]*m+e[5]*g+e[9]*y+e[13],t[14]=e[2]*m+e[6]*g+e[10]*y+e[14],t[15]=e[3]*m+e[7]*g+e[11]*y+e[15]):(i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],h=e[8],p=e[9],f=e[10],d=e[11],t[0]=r=e[0],t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=l,t[7]=c,t[8]=h,t[9]=p,t[10]=f,t[11]=d,t[12]=r*m+s*g+h*y+e[12],t[13]=i*m+u*g+p*y+e[13],t[14]=o*m+l*g+f*y+e[14],t[15]=a*m+c*g+d*y+e[15]),t},scale:function(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},multiply:function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],h=e[8],p=e[9],f=e[10],d=e[11],m=e[12],g=e[13],y=e[14],v=e[15],_=n[0],b=n[1],x=n[2],w=n[3];return t[0]=_*r+b*s+x*h+w*m,t[1]=_*i+b*u+x*p+w*g,t[2]=_*o+b*l+x*f+w*y,t[3]=_*a+b*c+x*d+w*v,t[4]=(_=n[4])*r+(b=n[5])*s+(x=n[6])*h+(w=n[7])*m,t[5]=_*i+b*u+x*p+w*g,t[6]=_*o+b*l+x*f+w*y,t[7]=_*a+b*c+x*d+w*v,t[8]=(_=n[8])*r+(b=n[9])*s+(x=n[10])*h+(w=n[11])*m,t[9]=_*i+b*u+x*p+w*g,t[10]=_*o+b*l+x*f+w*y,t[11]=_*a+b*c+x*d+w*v,t[12]=(_=n[12])*r+(b=n[13])*s+(x=n[14])*h+(w=n[15])*m,t[13]=_*i+b*u+x*p+w*g,t[14]=_*o+b*l+x*f+w*y,t[15]=_*a+b*c+x*d+w*v,t},perspective:function(t,e,n,r,i){var o=1/Math.tan(e/2),a=1/(r-i);return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(i+r)*a,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*i*r*a,t[15]=0,t},rotateX:function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[4],a=e[5],s=e[6],u=e[7],l=e[8],c=e[9],h=e[10],p=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+l*r,t[5]=a*i+c*r,t[6]=s*i+h*r,t[7]=u*i+p*r,t[8]=l*i-o*r,t[9]=c*i-a*r,t[10]=h*i-s*r,t[11]=p*i-u*r,t},rotateZ:function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],l=e[4],c=e[5],h=e[6],p=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+l*r,t[1]=a*i+c*r,t[2]=s*i+h*r,t[3]=u*i+p*r,t[4]=l*i-o*r,t[5]=c*i-a*r,t[6]=h*i-s*r,t[7]=p*i-u*r,t},invert:function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],l=e[7],c=e[8],h=e[9],p=e[10],f=e[11],d=e[12],m=e[13],g=e[14],y=e[15],v=n*s-r*a,_=n*u-i*a,b=n*l-o*a,x=r*u-i*s,w=r*l-o*s,E=i*l-o*u,C=c*m-h*d,S=c*g-p*d,I=c*y-f*d,T=h*g-p*m,k=h*y-f*m,O=p*y-f*g,P=v*O-_*k+b*T+x*I-w*S+E*C;return P?(t[0]=(s*O-u*k+l*T)*(P=1/P),t[1]=(i*k-r*O-o*T)*P,t[2]=(m*E-g*w+y*x)*P,t[3]=(p*w-h*E-f*x)*P,t[4]=(u*I-a*O-l*S)*P,t[5]=(n*O-i*I+o*S)*P,t[6]=(g*b-d*E-y*_)*P,t[7]=(c*E-p*b+f*_)*P,t[8]=(a*k-s*I+l*C)*P,t[9]=(r*I-n*k-o*C)*P,t[10]=(d*w-m*b+y*v)*P,t[11]=(h*b-c*w-f*v)*P,t[12]=(s*S-a*T-u*C)*P,t[13]=(n*T-r*S+i*C)*P,t[14]=(m*_-d*x-g*v)*P,t[15]=(c*x-h*_+p*v)*P,t):null},ortho:function(t,e,n,r,i,o,a){var s=1/(e-n),u=1/(r-i),l=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*u,t[14]=(a+o)*l,t[15]=1,t}}}},"object"==typeof n&&"undefined"!=typeof e?e.exports=r():this.glMatrix=r()},{}],3:[function(t,e,n){"use strict";function r(t){return!!("undefined"!=typeof window&&"undefined"!=typeof document&&Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray&&Function.prototype&&Function.prototype.bind&&Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions&&"JSON"in window&&"parse"in JSON&&"stringify"in JSON&&function(){if(!("Worker"in window&&"Blob"in window))return!1;var t,e,n=new Blob([""],{type:"text/javascript"}),r=URL.createObjectURL(n);try{e=new Worker(r),t=!0}catch(e){t=!1}return e&&e.terminate(),URL.revokeObjectURL(r),t}()&&"Uint8ClampedArray"in window&&function(t){return void 0===i[t]&&(i[t]=function(t){var e=document.createElement("canvas"),n=Object.create(r.webGLContextAttributes);return n.failIfMajorPerformanceCaveat=t,e.probablySupportsContext?e.probablySupportsContext("webgl",n)||e.probablySupportsContext("experimental-webgl",n):e.supportsContext?e.supportsContext("webgl",n)||e.supportsContext("experimental-webgl",n):e.getContext("webgl",n)||e.getContext("experimental-webgl",n)}(t)),i[t]}(t&&t.failIfMajorPerformanceCaveat))}"undefined"!=typeof e&&e.exports?e.exports=r:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=r);var i={};r.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}},{}],4:[function(t,e,n){"use strict";function r(t,e){this.x=t,this.y=e}e.exports=r,r.prototype={clone:function(){return new r(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[2]*this.x+t[3]*this.y;return this.x=t[0]*this.x+t[1]*this.y,this.y=e,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),n=Math.sin(t),r=n*this.x+e*this.y;return this.x=e*this.x-n*this.y,this.y=r,this},_rotateAround:function(t,e){var n=Math.cos(t),r=Math.sin(t),i=e.y+r*(this.x-e.x)+n*(this.y-e.y);return this.x=e.x+n*(this.x-e.x)-r*(this.y-e.y),this.y=i,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},r.convert=function(t){return t instanceof r?t:Array.isArray(t)?new r(t[0],t[1]):t}},{}],5:[function(t,e,n){var r;r=function(){function t(t,e,n){n=n||{},this.w=t||64,this.h=e||64,this.autoResize=!!n.autoResize,this.shelves=[],this.freebins=[],this.stats={},this.bins={},this.maxId=0}function e(t,e,n){this.x=0,this.y=t,this.w=this.free=e,this.h=n}return t.prototype.pack=function(t,e){t=[].concat(t),e=e||{};for(var n,r,i,o,a=[],s=0;s<t.length;s++)if(n=t[s].w||t[s].width,r=t[s].h||t[s].height,i=t[s].id,n&&r){if(!(o=this.packOne(n,r,i)))continue;e.inPlace&&(t[s].x=o.x,t[s].y=o.y,t[s].id=o.id),a.push(o)}return this.shrink(),a},t.prototype.packOne=function(t,n,r){var i,o,a,s,u,l,c,h,p={freebin:-1,shelf:-1,waste:1/0},f=0;if("string"==typeof r||"number"==typeof r){if(i=this.getBin(r))return this.ref(i),i;"number"==typeof r&&(this.maxId=Math.max(r,this.maxId))}else r=++this.maxId;for(s=0;s<this.freebins.length;s++){if(n===(i=this.freebins[s]).maxh&&t===i.maxw)return this.allocFreebin(s,t,n,r);n>i.maxh||t>i.maxw||n<=i.maxh&&t<=i.maxw&&(a=i.maxw*i.maxh-t*n)<p.waste&&(p.waste=a,p.freebin=s)}for(s=0;s<this.shelves.length;s++)if(f+=(o=this.shelves[s]).h,!(t>o.free)){if(n===o.h)return this.allocShelf(s,t,n,r);n>o.h||n<o.h&&(a=(o.h-n)*t)<p.waste&&(p.freebin=-1,p.waste=a,p.shelf=s)}return-1!==p.freebin?this.allocFreebin(p.freebin,t,n,r):-1!==p.shelf?this.allocShelf(p.shelf,t,n,r):n<=this.h-f&&t<=this.w?(o=new e(f,this.w,n),this.allocShelf(this.shelves.push(o)-1,t,n,r)):this.autoResize?(u=l=this.h,((c=h=this.w)<=u||t>c)&&(h=2*Math.max(t,c)),(u<c||n>u)&&(l=2*Math.max(n,u)),this.resize(h,l),this.packOne(t,n,r)):null},t.prototype.allocFreebin=function(t,e,n,r){var i=this.freebins.splice(t,1)[0];return i.id=r,i.w=e,i.h=n,i.refcount=0,this.bins[r]=i,this.ref(i),i},t.prototype.allocShelf=function(t,e,n,r){var i=this.shelves[t].alloc(e,n,r);return this.bins[r]=i,this.ref(i),i},t.prototype.shrink=function(){if(this.shelves.length>0){for(var t=0,e=0,n=0;n<this.shelves.length;n++){var r=this.shelves[n];e+=r.h,t=Math.max(r.w-r.free,t)}this.resize(t,e)}},t.prototype.getBin=function(t){return this.bins[t]},t.prototype.ref=function(t){if(1==++t.refcount){var e=t.h;this.stats[e]=1+(0|this.stats[e])}return t.refcount},t.prototype.unref=function(t){return 0===t.refcount?0:(0==--t.refcount&&(this.stats[t.h]--,delete this.bins[t.id],this.freebins.push(t)),t.refcount)},t.prototype.clear=function(){this.shelves=[],this.freebins=[],this.stats={},this.bins={},this.maxId=0},t.prototype.resize=function(t,e){this.w=t,this.h=e;for(var n=0;n<this.shelves.length;n++)this.shelves[n].resize(t);return!0},e.prototype.alloc=function(t,e,n){if(t>this.free||e>this.h)return null;var r=this.x;return this.x+=t,this.free-=t,new function(t,e,n,r,i,o,a){this.id=t,this.x=e,this.y=n,this.w=r,this.h=i,this.maxw=o||r,this.maxh=a||i,this.refcount=0}(n,r,this.y,t,e,t,this.h)},e.prototype.resize=function(t){return this.free+=t-this.w,this.w=t,!0},t},"object"==typeof n&&"undefined"!=typeof e?e.exports=r():this.ShelfPack=r()},{}],6:[function(t,e,n){"use strict";function r(t,e,n,r,i,o){this.fontSize=t||24,this.buffer=void 0===e?3:e,this.cutoff=r||.25,this.fontFamily=i||"sans-serif",this.fontWeight=o||"normal",this.radius=n||8;var a=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=a,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.d=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Int16Array(a),this.middle=Math.round(a/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function i(t,e,n,r,i,a,s){for(var u=0;u<e;u++){for(var l=0;l<n;l++)r[l]=t[l*e+u];for(o(r,i,a,s,n),l=0;l<n;l++)t[l*e+u]=i[l]}for(l=0;l<n;l++){for(u=0;u<e;u++)r[u]=t[l*e+u];for(o(r,i,a,s,e),u=0;u<e;u++)t[l*e+u]=Math.sqrt(i[u])}}function o(t,e,n,r,i){n[0]=0,r[0]=-a,r[1]=+a;for(var o=1,s=0;o<i;o++){for(var u=(t[o]+o*o-(t[n[s]]+n[s]*n[s]))/(2*o-2*n[s]);u<=r[s];)u=(t[o]+o*o-(t[n[--s]]+n[s]*n[s]))/(2*o-2*n[s]);n[++s]=o,r[s]=u,r[s+1]=+a}for(o=0,s=0;o<i;o++){for(;r[s+1]<o;)s++;e[o]=(o-n[s])*(o-n[s])+t[n[s]]}}e.exports=r;var a=1e20;r.prototype.draw=function(t){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(t,this.buffer,this.middle);for(var e=this.ctx.getImageData(0,0,this.size,this.size),n=new Uint8ClampedArray(this.size*this.size),r=0;r<this.size*this.size;r++){var o=e.data[4*r+3]/255;this.gridOuter[r]=1===o?0:0===o?a:Math.pow(Math.max(0,.5-o),2),this.gridInner[r]=1===o?a:0===o?0:Math.pow(Math.max(0,o-.5),2)}for(i(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),i(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),r=0;r<this.size*this.size;r++)n[r]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[r]-this.gridInner[r])/this.radius+this.cutoff))));return n}},{}],7:[function(t,e,n){function r(t,e,n,r){this.cx=3*t,this.bx=3*(n-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(r-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=r,this.p2x=n,this.p2y=r}e.exports=r,r.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},r.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},r.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},r.prototype.solveCurveX=function(t,e){var n,r,i,o,a;for(void 0===e&&(e=1e-6),i=t,a=0;a<8;a++){if(o=this.sampleCurveX(i)-t,Math.abs(o)<e)return i;var s=this.sampleCurveDerivativeX(i);if(Math.abs(s)<1e-6)break;i-=o/s}if(r=1,(i=t)<(n=0))return n;if(i>r)return r;for(;n<r;){if(o=this.sampleCurveX(i),Math.abs(o-t)<e)return i;t>o?n=i:r=i,i=.5*(r-n)+n}return i},r.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))}},{}],8:[function(t,e,n){e.exports.VectorTile=t("./lib/vectortile.js"),e.exports.VectorTileFeature=t("./lib/vectortilefeature.js"),e.exports.VectorTileLayer=t("./lib/vectortilelayer.js")},{"./lib/vectortile.js":9,"./lib/vectortilefeature.js":10,"./lib/vectortilelayer.js":11}],9:[function(t,e,n){"use strict";function r(t,e,n){if(3===t){var r=new i(n,n.readVarint()+n.pos);r.length&&(e[r.name]=r)}}var i=t("./vectortilelayer");e.exports=function(t,e){this.layers=t.readFields(r,{},e)}},{"./vectortilelayer":11}],10:[function(t,e,n){"use strict";function r(t,e,n,r,o){this.properties={},this.extent=n,this.type=0,this._pbf=t,this._geometry=-1,this._keys=r,this._values=o,t.readFields(i,this,e)}function i(t,e,n){1==t?e.id=n.readVarint():2==t?function(t,e){for(var n=t.readVarint()+t.pos;t.pos<n;){var r=e._keys[t.readVarint()],i=e._values[t.readVarint()];e.properties[r]=i}}(n,e):3==t?e.type=n.readVarint():4==t&&(e._geometry=n.pos)}function o(t){for(var e,n,r=0,i=0,o=t.length,a=o-1;i<o;a=i++)r+=((n=t[a]).x-(e=t[i]).x)*(e.y+n.y);return r}var a=t("@mapbox/point-geometry");e.exports=r,r.types=["Unknown","Point","LineString","Polygon"],r.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,n=t.readVarint()+t.pos,r=1,i=0,o=0,s=0,u=[];t.pos<n;){if(!i){var l=t.readVarint();r=7&l,i=l>>3}if(i--,1===r||2===r)o+=t.readSVarint(),s+=t.readSVarint(),1===r&&(e&&u.push(e),e=[]),e.push(new a(o,s));else{if(7!==r)throw new Error("unknown command "+r);e&&e.push(e[0].clone())}}return e&&u.push(e),u},r.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,n=1,r=0,i=0,o=0,a=1/0,s=-1/0,u=1/0,l=-1/0;t.pos<e;){if(!r){var c=t.readVarint();n=7&c,r=c>>3}if(r--,1===n||2===n)i+=t.readSVarint(),o+=t.readSVarint(),i<a&&(a=i),i>s&&(s=i),o<u&&(u=o),o>l&&(l=o);else if(7!==n)throw new Error("unknown command "+n)}return[a,u,s,l]},r.prototype.toGeoJSON=function(t,e,n){function i(t){for(var e=0;e<t.length;e++){var n=t[e];t[e]=[360*(n.x+l)/u-180,360/Math.PI*Math.atan(Math.exp((180-360*(n.y+c)/u)*Math.PI/180))-90]}}var a,s,u=this.extent*Math.pow(2,n),l=this.extent*t,c=this.extent*e,h=this.loadGeometry(),p=r.types[this.type];switch(this.type){case 1:var f=[];for(a=0;a<h.length;a++)f[a]=h[a][0];i(h=f);break;case 2:for(a=0;a<h.length;a++)i(h[a]);break;case 3:for(h=function(t){var e=t.length;if(e<=1)return[t];for(var n,r,i=[],a=0;a<e;a++){var s=o(t[a]);0!==s&&(void 0===r&&(r=s<0),r===s<0?(n&&i.push(n),n=[t[a]]):n.push(t[a]))}return n&&i.push(n),i}(h),a=0;a<h.length;a++)for(s=0;s<h[a].length;s++)i(h[a][s])}1===h.length?h=h[0]:p="Multi"+p;var d={type:"Feature",geometry:{type:p,coordinates:h},properties:this.properties};return"id"in this&&(d.id=this.id),d}},{"@mapbox/point-geometry":4}],11:[function(t,e,n){"use strict";function r(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(i,this,e),this.length=this._features.length}function i(t,e,n){15===t?e.version=n.readVarint():1===t?e.name=n.readString():5===t?e.extent=n.readVarint():2===t?e._features.push(n.pos):3===t?e._keys.push(n.readString()):4===t&&e._values.push(function(t){for(var e=null,n=t.readVarint()+t.pos;t.pos<n;){var r=t.readVarint()>>3;e=1===r?t.readString():2===r?t.readFloat():3===r?t.readDouble():4===r?t.readVarint64():5===r?t.readVarint():6===r?t.readSVarint():7===r?t.readBoolean():null}return e}(n))}var o=t("./vectortilefeature.js");e.exports=r,r.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new o(this._pbf,e,this.extent,this._keys,this._values)}},{"./vectortilefeature.js":10}],12:[function(t,e,n){var r;r=this,function(t){function e(t,e,r){var i=n(256*t,256*(e=Math.pow(2,r)-e-1),r),o=n(256*(t+1),256*(e+1),r);return i[0]+","+i[1]+","+o[0]+","+o[1]}function n(t,e,n){var r=2*Math.PI*6378137/256/Math.pow(2,n);return[t*r-2*Math.PI*6378137/2,e*r-2*Math.PI*6378137/2]}t.getURL=function(t,n,r,i,o,a){return a=a||{},t+"?"+["bbox="+e(r,i,o),"format="+(a.format||"image/png"),"service="+(a.service||"WMS"),"version="+(a.version||"1.1.1"),"request="+(a.request||"GetMap"),"srs="+(a.srs||"EPSG:3857"),"width="+(a.width||256),"height="+(a.height||256),"layers="+n].join("&")},t.getTileBBox=e,t.getMercCoords=n,Object.defineProperty(t,"__esModule",{value:!0})}("object"==typeof n&&"undefined"!=typeof e?n:r.WhooTS=r.WhooTS||{})},{}],13:[function(t,e,n){function r(t){return(t=Math.round(t))<0?0:t>255?255:t}function i(t){return r("%"===t[t.length-1]?parseFloat(t)/100*255:parseInt(t))}function o(t){return function(t){return t<0?0:t>1?1:t}("%"===t[t.length-1]?parseFloat(t)/100:parseFloat(t))}function a(t,e,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}var s={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};try{n.parseCSSColor=function(t){var e,n=t.replace(/ /g,"").toLowerCase();if(n in s)return s[n].slice();if("#"===n[0])return 4===n.length?(e=parseInt(n.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===n.length&&(e=parseInt(n.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var u=n.indexOf("("),l=n.indexOf(")");if(-1!==u&&l+1===n.length){var c=n.substr(0,u),h=n.substr(u+1,l-(u+1)).split(","),p=1;switch(c){case"rgba":if(4!==h.length)return null;p=o(h.pop());case"rgb":return 3!==h.length?null:[i(h[0]),i(h[1]),i(h[2]),p];case"hsla":if(4!==h.length)return null;p=o(h.pop());case"hsl":if(3!==h.length)return null;var f=(parseFloat(h[0])%360+360)%360/360,d=o(h[1]),m=o(h[2]),g=m<=.5?m*(d+1):m+d-m*d,y=2*m-g;return[r(255*a(y,g,f+1/3)),r(255*a(y,g,f)),r(255*a(y,g,f-1/3)),p];default:return null}}return null}}catch(t){}},{}],14:[function(t,e,n){"use strict";function r(t,e,n){n=n||2;var r,s,u,l,c,f,m,g=e&&e.length,y=g?e[0]*n:t.length,v=i(t,0,y,n,!0),_=[];if(!v)return _;if(g&&(v=function(t,e,n,r){var a,s,u,l=[];for(a=0,s=e.length;a<s;a++)(u=i(t,e[a]*r,a<s-1?e[a+1]*r:t.length,r,!1))===u.next&&(u.steiner=!0),l.push(d(u));for(l.sort(h),a=0;a<l.length;a++)p(l[a],n),n=o(n,n.next);return n}(t,e,v,n)),t.length>80*n){r=u=t[0],s=l=t[1];for(var b=n;b<y;b+=n)f=t[b+1],(c=t[b])<r&&(r=c),f<s&&(s=f),c>u&&(u=c),f>l&&(l=f);m=0!==(m=Math.max(u-r,l-s))?1/m:0}return a(v,_,n,r,s,m),_}function i(t,e,n,r,i){var o,a;if(i===S(t,e,n,r)>0)for(o=e;o<n;o+=r)a=w(o,t[o],t[o+1],a);else for(o=n-r;o>=e;o-=r)a=w(o,t[o],t[o+1],a);return a&&v(a,a.next)&&(E(a),a=a.next),a}function o(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!v(r,r.next)&&0!==y(r.prev,r,r.next))r=r.next;else{if(E(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function a(t,e,n,r,i,h,p){if(t){!p&&h&&function(t,e,n,r){var i=t;do{null===i.z&&(i.z=f(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,a,s,u,l=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,r=n,s=0,e=0;e<l&&(s++,r=r.nextZ);e++);for(u=l;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,l*=2}while(a>1)}(i)}(t,r,i,h);for(var d,m,g=t;t.prev!==t.next;)if(d=t.prev,m=t.next,h?u(t,r,i,h):s(t))e.push(d.i/n),e.push(t.i/n),e.push(m.i/n),E(t),t=m.next,g=m.next;else if((t=m)===g){p?1===p?a(t=l(t,e,n),e,n,r,i,h,2):2===p&&c(t,e,n,r,i,h):a(o(t),e,n,r,i,h,1);break}}}function s(t){var e=t.prev,n=t,r=t.next;if(y(e,n,r)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(m(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&y(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function u(t,e,n,r){var i=t.prev,o=t,a=t.next;if(y(i,o,a)>=0)return!1;for(var s=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,u=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,l=f(i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,e,n,r),c=f(s,u,e,n,r),h=t.prevZ,p=t.nextZ;h&&h.z>=l&&p&&p.z<=c;){if(h!==t.prev&&h!==t.next&&m(i.x,i.y,o.x,o.y,a.x,a.y,h.x,h.y)&&y(h.prev,h,h.next)>=0)return!1;if(h=h.prevZ,p!==t.prev&&p!==t.next&&m(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&y(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(;h&&h.z>=l;){if(h!==t.prev&&h!==t.next&&m(i.x,i.y,o.x,o.y,a.x,a.y,h.x,h.y)&&y(h.prev,h,h.next)>=0)return!1;h=h.prevZ}for(;p&&p.z<=c;){if(p!==t.prev&&p!==t.next&&m(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&y(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function l(t,e,n){var r=t;do{var i=r.prev,o=r.next.next;!v(i,o)&&_(i,r,r.next,o)&&b(i,o)&&b(o,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(o.i/n),E(r),E(r.next),r=t=o),r=r.next}while(r!==t);return r}function c(t,e,n,r,i,s){var u=t;do{for(var l=u.next.next;l!==u.prev;){if(u.i!==l.i&&g(u,l)){var c=x(u,l);return u=o(u,u.next),c=o(c,c.next),a(u,e,n,r,i,s),void a(c,e,n,r,i,s)}l=l.next}u=u.next}while(u!==t)}function h(t,e){return t.x-e.x}function p(t,e){if(e=function(t,e){var n,r=e,i=t.x,o=t.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===a)return n.prev;var u,l=n,c=n.x,h=n.y,p=1/0;for(r=n.next;r!==l;)i>=r.x&&r.x>=c&&i!==r.x&&m(o<h?i:a,o,c,h,o<h?a:i,o,r.x,r.y)&&((u=Math.abs(o-r.y)/(i-r.x))<p||u===p&&r.x>n.x)&&b(r,t)&&(n=r,p=u),r=r.next;return n}(t,e)){var n=x(e,t);o(n,n.next)}}function f(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function d(t){var e=t,n=t;do{e.x<n.x&&(n=e),e=e.next}while(e!==t);return n}function m(t,e,n,r,i,o,a,s){return(i-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(r-s)-(n-a)*(e-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function g(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&_(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&b(t,e)&&b(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)}function y(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function v(t,e){return t.x===e.x&&t.y===e.y}function _(t,e,n,r){return!!(v(t,e)&&v(n,r)||v(t,r)&&v(n,e))||y(t,e,n)>0!=y(t,e,r)>0&&y(n,r,t)>0!=y(n,r,e)>0}function b(t,e){return y(t.prev,t,t.next)<0?y(t,e,t.next)>=0&&y(t,t.prev,e)>=0:y(t,e,t.prev)<0||y(t,t.next,e)<0}function x(t,e){var n=new C(t.i,t.x,t.y),r=new C(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function w(t,e,n,r){var i=new C(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function E(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function C(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function S(t,e,n,r){for(var i=0,o=e,a=n-r;o<n;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}e.exports=r,e.exports.default=r,r.deviation=function(t,e,n,r){var i=e&&e.length,o=Math.abs(S(t,0,i?e[0]*n:t.length,n));if(i)for(var a=0,s=e.length;a<s;a++)o-=Math.abs(S(t,e[a]*n,a<s-1?e[a+1]*n:t.length,n));var u=0;for(a=0;a<r.length;a+=3){var l=r[a]*n,c=r[a+1]*n,h=r[a+2]*n;u+=Math.abs((t[l]-t[h])*(t[c+1]-t[l+1])-(t[l]-t[c])*(t[h+1]-t[l+1]))}return 0===o&&0===u?0:Math.abs((u-o)/o)},r.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[i][o][a]);i>0&&n.holes.push(r+=t[i-1].length)}return n}},{}],15:[function(t,e,n){function r(t,e){return function(n){return t(n,e)}}function i(t,e){t[0]=o(t[0],e=!!e);for(var n=1;n<t.length;n++)t[n]=o(t[n],!e);return t}function o(t,e){return function(t){return a.ring(t)>=0}(t)===e?t:t.reverse()}var a=t("@mapbox/geojson-area");e.exports=function t(e,n){switch(e&&e.type||null){case"FeatureCollection":return e.features=e.features.map(r(t,n)),e;case"Feature":return e.geometry=t(e.geometry,n),e;case"Polygon":case"MultiPolygon":return function(t,e){return"Polygon"===t.type?t.coordinates=i(t.coordinates,e):"MultiPolygon"===t.type&&(t.coordinates=t.coordinates.map(r(i,e))),t}(e,n);default:return e}}},{"@mapbox/geojson-area":1}],16:[function(t,e,n){"use strict";function r(t,e,n,r,i){for(var o=0;o<t.length;o+=3){var a=t[o+i];a>=n&&a<=r&&(e.push(t[o]),e.push(t[o+1]),e.push(t[o+2]))}}function i(t,e,n,r,i,o){for(var l=[],c=0===i?s:u,h=0;h<t.length-3;h+=3){var p=t[h],f=t[h+1],d=t[h+2],m=t[h+3],g=t[h+4],y=0===i?p:f,v=0===i?m:g,_=!1;y<n?v>=n&&c(l,p,f,m,g,n):y>r?v<=r&&c(l,p,f,m,g,r):a(l,p,f,d),v<n&&y>=n&&(c(l,p,f,m,g,n),_=!0),v>r&&y<=r&&(c(l,p,f,m,g,r),_=!0),!o&&_&&(l.size=t.size,e.push(l),l=[])}var b=t.length-3;p=t[b],f=t[b+1],d=t[b+2],(y=0===i?p:f)>=n&&y<=r&&a(l,p,f,d),b=l.length-3,o&&b>=3&&(l[b]!==l[0]||l[b+1]!==l[1])&&a(l,l[0],l[1],l[2]),l.length&&(l.size=t.size,e.push(l))}function o(t,e,n,r,o,a){for(var s=0;s<t.length;s++)i(t[s],e,n,r,o,a)}function a(t,e,n,r){t.push(e),t.push(n),t.push(r)}function s(t,e,n,r,i,o){t.push(o),t.push(n+(o-e)*(i-n)/(r-e)),t.push(1)}function u(t,e,n,r,i,o){t.push(e+(o-n)*(r-e)/(i-n)),t.push(o),t.push(1)}e.exports=function(t,e,n,a,s,u,c){if(a/=e,u>=(n/=e)&&c<=a)return t;if(u>a||c<n)return null;for(var h=[],p=0;p<t.length;p++){var f=t[p],d=f.geometry,m=f.type,g=0===s?f.minX:f.minY,y=0===s?f.maxX:f.maxY;if(g>=n&&y<=a)h.push(f);else if(!(g>a||y<n)){var v=[];if("Point"===m||"MultiPoint"===m)r(d,v,n,a,s);else if("LineString"===m)i(d,v,n,a,s,!1);else if("MultiLineString"===m)o(d,v,n,a,s,!1);else if("Polygon"===m)o(d,v,n,a,s,!0);else if("MultiPolygon"===m)for(var _=0;_<d.length;_++){var b=[];o(d[_],b,n,a,s,!0),b.length&&v.push(b)}v.length&&("LineString"!==m&&"MultiLineString"!==m||(1===v.length?(m="LineString",v=v[0]):m="MultiLineString"),"Point"!==m&&"MultiPoint"!==m||(m=3===v.length?"Point":"MultiPoint"),h.push(l(f.id,m,v,f.tags)))}}return h.length?h:null};var l=t("./feature")},{"./feature":18}],17:[function(t,e,n){"use strict";function r(t,e,n){if(e.geometry){var s=e.geometry.coordinates,u=e.geometry.type,l=n*n,h=[];if("Point"===u)i(s,h);else if("MultiPoint"===u)for(var p=0;p<s.length;p++)i(s[p],h);else if("LineString"===u)o(s,h,l,!1);else if("MultiLineString"===u)a(s,h,l,!1);else if("Polygon"===u)a(s,h,l,!0);else{if("MultiPolygon"!==u){if("GeometryCollection"===u){for(p=0;p<e.geometry.geometries.length;p++)r(t,{geometry:e.geometry.geometries[p],properties:e.properties},n);return}throw new Error("Input data is not a valid GeoJSON object.")}for(p=0;p<s.length;p++){var f=[];a(s[p],f,l,!0),h.push(f)}}t.push(c(e.id,u,h,e.properties))}}function i(t,e){e.push(s(t[0])),e.push(u(t[1])),e.push(0)}function o(t,e,n,r){for(var i,o,a=0,c=0;c<t.length;c++){var h=s(t[c][0]),p=u(t[c][1]);e.push(h),e.push(p),e.push(0),c>0&&(a+=r?(i*p-h*o)/2:Math.sqrt(Math.pow(h-i,2)+Math.pow(p-o,2))),i=h,o=p}var f=e.length-3;e[2]=1,l(e,0,f,n),e[f+2]=1,e.size=Math.abs(a)}function a(t,e,n,r){for(var i=0;i<t.length;i++){var a=[];o(t[i],a,n,r),e.push(a)}}function s(t){return t/360+.5}function u(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}e.exports=function(t,e){var n=[];if("FeatureCollection"===t.type)for(var i=0;i<t.features.length;i++)r(n,t.features[i],e);else r(n,"Feature"===t.type?t:{geometry:t},e);return n};var l=t("./simplify"),c=t("./feature")},{"./feature":18,"./simplify":20}],18:[function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n+=3)t.minX=Math.min(t.minX,e[n]),t.minY=Math.min(t.minY,e[n+1]),t.maxX=Math.max(t.maxX,e[n]),t.maxY=Math.max(t.maxY,e[n+1])}e.exports=function(t,e,n,i){var o={id:t||null,type:e,geometry:n,tags:i,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(t){var e=t.geometry,n=t.type;if("Point"===n||"MultiPoint"===n||"LineString"===n)r(t,e);else if("Polygon"===n||"MultiLineString"===n)for(var i=0;i<e.length;i++)r(t,e[i]);else if("MultiPolygon"===n)for(i=0;i<e.length;i++)for(var o=0;o<e[i].length;o++)r(t,e[i][o])}(o),o}},{}],19:[function(t,e,n){"use strict";function r(t,e){var n=(e=this.options=function(t,e){for(var n in e)t[n]=e[n];return t}(Object.create(this.options),e)).debug;if(n&&console.time("preprocess data"),e.maxZoom<0||e.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");var r=o(t,e.tolerance/((1<<e.maxZoom)*e.extent));this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(r=u(r,e.buffer/e.extent)).length&&this.splitTile(r,0,0,0),n&&(r.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function i(t,e,n){return 32*((1<<t)*n+e)+t}e.exports=function(t,e){return new r(t,e)};var o=t("./convert"),a=t("./transform"),s=t("./clip"),u=t("./wrap"),l=t("./tile");r.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,debug:0},r.prototype.splitTile=function(t,e,n,r,o,a,u){for(var c=[t,e,n,r],h=this.options,p=h.debug;c.length;){r=c.pop(),n=c.pop(),e=c.pop(),t=c.pop();var f=1<<e,d=i(e,n,r),m=this.tiles[d],g=e===h.maxZoom?0:h.tolerance/(f*h.extent);if(!m&&(p>1&&console.time("creation"),m=this.tiles[d]=l(t,f,n,r,g,e===h.maxZoom),this.tileCoords.push({z:e,x:n,y:r}),p)){p>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,n,r,m.numFeatures,m.numPoints,m.numSimplified),console.timeEnd("creation"));var y="z"+e;this.stats[y]=(this.stats[y]||0)+1,this.total++}if(m.source=t,o){if(e===h.maxZoom||e===o)continue;var v=1<<o-e;if(n!==Math.floor(a/v)||r!==Math.floor(u/v))continue}else if(e===h.indexMaxZoom||m.numPoints<=h.indexMaxPoints)continue;if(m.source=null,0!==t.length){p>1&&console.time("clipping");var _,b,x,w,E,C,S=.5*h.buffer/h.extent,I=.5-S,T=.5+S,k=1+S;_=b=x=w=null,E=s(t,f,n-S,n+T,0,m.minX,m.maxX),C=s(t,f,n+I,n+k,0,m.minX,m.maxX),t=null,E&&(_=s(E,f,r-S,r+T,1,m.minY,m.maxY),b=s(E,f,r+I,r+k,1,m.minY,m.maxY),E=null),C&&(x=s(C,f,r-S,r+T,1,m.minY,m.maxY),w=s(C,f,r+I,r+k,1,m.minY,m.maxY),C=null),p>1&&console.timeEnd("clipping"),c.push(_||[],e+1,2*n,2*r),c.push(b||[],e+1,2*n,2*r+1),c.push(x||[],e+1,2*n+1,2*r),c.push(w||[],e+1,2*n+1,2*r+1)}}},r.prototype.getTile=function(t,e,n){var r=this.options,o=r.extent,s=r.debug;if(t<0||t>24)return null;var u=1<<t,l=i(t,e=(e%u+u)%u,n);if(this.tiles[l])return a.tile(this.tiles[l],o);s>1&&console.log("drilling down to z%d-%d-%d",t,e,n);for(var c,h=t,p=e,f=n;!c&&h>0;)h--,p=Math.floor(p/2),f=Math.floor(f/2),c=this.tiles[i(h,p,f)];return c&&c.source?(s>1&&console.log("found parent tile z%d-%d-%d",h,p,f),s>1&&console.time("drilling down"),this.splitTile(c.source,h,p,f,t,e,n),s>1&&console.timeEnd("drilling down"),this.tiles[l]?a.tile(this.tiles[l],o):null):null}},{"./clip":16,"./convert":17,"./tile":21,"./transform":22,"./wrap":23}],20:[function(t,e,n){"use strict";function r(t,e,n,r,i,o){var a=i-n,s=o-r;if(0!==a||0!==s){var u=((t-n)*a+(e-r)*s)/(a*a+s*s);u>1?(n=i,r=o):u>0&&(n+=a*u,r+=s*u)}return(a=t-n)*a+(s=e-r)*s}e.exports=function t(e,n,i,o){for(var a,s=o,u=e[n],l=e[n+1],c=e[i],h=e[i+1],p=n+3;p<i;p+=3){var f=r(e[p],e[p+1],u,l,c,h);f>s&&(a=p,s=f)}s>o&&(a-n>3&&t(e,n,a,o),e[a+2]=s,i-a>3&&t(e,a,i,o))}},{}],21:[function(t,e,n){"use strict";function r(t,e,n,r){var o=e.geometry,a=e.type,s=[];if("Point"===a||"MultiPoint"===a)for(var u=0;u<o.length;u+=3)s.push(o[u]),s.push(o[u+1]),t.numPoints++,t.numSimplified++;else if("LineString"===a)i(s,o,t,n,r,!1,!1);else if("MultiLineString"===a||"Polygon"===a)for(u=0;u<o.length;u++)i(s,o[u],t,n,r,"Polygon"===a,0===u);else if("MultiPolygon"===a)for(var l=0;l<o.length;l++){var c=o[l];for(u=0;u<c.length;u++)i(s,c[u],t,n,r,!0,0===u)}if(s.length){var h={geometry:s,type:"Polygon"===a||"MultiPolygon"===a?3:"LineString"===a||"MultiLineString"===a?2:1,tags:e.tags||null};null!==e.id&&(h.id=e.id),t.features.push(h)}}function i(t,e,n,r,i,o,a){var s=r*r;if(!i&&e.size<(o?s:r))n.numPoints+=e.length/3;else{for(var u=[],l=0;l<e.length;l+=3)(i||e[l+2]>s)&&(n.numSimplified++,u.push(e[l]),u.push(e[l+1])),n.numPoints++;o&&function(t,e){for(var n=0,r=0,i=t.length,o=i-2;r<i;o=r,r+=2)n+=(t[r]-t[o])*(t[r+1]+t[o+1]);if(n>0===e)for(r=0,i=t.length;r<i/2;r+=2){var a=t[r],s=t[r+1];t[r]=t[i-2-r],t[r+1]=t[i-1-r],t[i-2-r]=a,t[i-1-r]=s}}(u,a),t.push(u)}}e.exports=function(t,e,n,i,o,a){for(var s={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:i,z2:e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},u=0;u<t.length;u++){s.numFeatures++,r(s,t[u],o,a);var l=t[u].minX,c=t[u].minY,h=t[u].maxX,p=t[u].maxY;l<s.minX&&(s.minX=l),c<s.minY&&(s.minY=c),h>s.maxX&&(s.maxX=h),p>s.maxY&&(s.maxY=p)}return s}},{}],22:[function(t,e,n){"use strict";function r(t,e,n,r,i,o){return[Math.round(n*(t*r-i)),Math.round(n*(e*r-o))]}n.tile=function(t,e){if(t.transformed)return t;var n,i,o,a=t.z2,s=t.x,u=t.y;for(n=0;n<t.features.length;n++){var l=t.features[n],c=l.geometry,h=l.type;if(l.geometry=[],1===h)for(i=0;i<c.length;i+=2)l.geometry.push(r(c[i],c[i+1],e,a,s,u));else for(i=0;i<c.length;i++){var p=[];for(o=0;o<c[i].length;o+=2)p.push(r(c[i][o],c[i][o+1],e,a,s,u));l.geometry.push(p)}}return t.transformed=!0,t},n.point=r},{}],23:[function(t,e,n){"use strict";function r(t,e){for(var n=[],r=0;r<t.length;r++){var o,s=t[r],u=s.type;if("Point"===u||"MultiPoint"===u||"LineString"===u)o=i(s.geometry,e);else if("MultiLineString"===u||"Polygon"===u){o=[];for(var l=0;l<s.geometry.length;l++)o.push(i(s.geometry[l],e))}else if("MultiPolygon"===u)for(o=[],l=0;l<s.geometry.length;l++){for(var c=[],h=0;h<s.geometry[l].length;h++)c.push(i(s.geometry[l][h],e));o.push(c)}n.push(a(s.id,u,o,s.tags))}return n}function i(t,e){var n=[];n.size=t.size;for(var r=0;r<t.length;r+=3)n.push(t[r]+e,t[r+1],t[r+2]);return n}var o=t("./clip"),a=t("./feature");e.exports=function(t,e){var n=t,i=o(t,1,-1-e,e,0,-1,2),a=o(t,1,1-e,2+e,0,-1,2);return(i||a)&&(n=o(t,1,-e,1+e,0,-1,2)||[],i&&(n=r(i,1).concat(n)),a&&(n=n.concat(r(a,-1)))),n}},{"./clip":16,"./feature":18}],24:[function(t,e,n){"use strict";function r(t,e,n){var r=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var o=new Int32Array(this.arrayBuffer);t=o[0],this.d=(e=o[1])+2*(n=o[2]);for(var a=0;a<this.d*this.d;a++){var s=o[i+a],u=o[i+a+1];r.push(s===u?null:o.subarray(s,u))}var l=o[i+r.length+1];this.keys=o.subarray(o[i+r.length],l),this.bboxes=o.subarray(l),this.insert=this._insertReadonly}else{this.d=e+2*n;for(var c=0;c<this.d*this.d;c++)r.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=n,this.scale=e/t,this.uid=0;var h=n/e*t;this.min=-h,this.max=t+h}e.exports=r;var i=3;r.prototype.insert=function(t,e,n,r,i){this._forEachCell(e,n,r,i,this._insertCell,this.uid++),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)},r.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},r.prototype._insertCell=function(t,e,n,r,i,o){this.cells[i].push(o)},r.prototype.query=function(t,e,n,r){var i=this.min,o=this.max;if(t<=i&&e<=i&&o<=n&&o<=r)return Array.prototype.slice.call(this.keys);var a=[];return this._forEachCell(t,e,n,r,this._queryCell,a,{}),a},r.prototype._queryCell=function(t,e,n,r,i,o,a){var s=this.cells[i];if(null!==s)for(var u=this.keys,l=this.bboxes,c=0;c<s.length;c++){var h=s[c];if(void 0===a[h]){var p=4*h;t<=l[p+2]&&e<=l[p+3]&&n>=l[p+0]&&r>=l[p+1]?(a[h]=!0,o.push(u[h])):a[h]=!1}}},r.prototype._forEachCell=function(t,e,n,r,i,o,a){for(var s=this._convertToCellCoord(t),u=this._convertToCellCoord(e),l=this._convertToCellCoord(n),c=this._convertToCellCoord(r),h=s;h<=l;h++)for(var p=u;p<=c;p++)if(i.call(this,t,e,n,r,this.d*p+h,o,a))return},r.prototype._convertToCellCoord=function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))},r.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,e=i+this.cells.length+1+1,n=0,r=0;r<this.cells.length;r++)n+=this.cells[r].length;var o=new Int32Array(e+n+this.keys.length+this.bboxes.length);o[0]=this.extent,o[1]=this.n,o[2]=this.padding;for(var a=e,s=0;s<t.length;s++){var u=t[s];o[i+s]=a,o.set(u,a),a+=u.length}return o[i+t.length]=a,o.set(this.keys,a),o[i+t.length+1]=a+=this.keys.length,o.set(this.bboxes,a),a+=this.bboxes.length,o.buffer}},{}],25:[function(t,e,n){n.read=function(t,e,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,l=u>>1,c=-7,h=n?i-1:0,p=n?-1:1,f=t[e+h];for(h+=p,o=f&(1<<-c)-1,f>>=-c,c+=s;c>0;o=256*o+t[e+h],h+=p,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+t[e+h],h+=p,c-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,r),o-=l}return(f?-1:1)*a*Math.pow(2,o-r)},n.write=function(t,e,n,r,i,o){var a,s,u,l=8*o-i-1,c=(1<<l)-1,h=c>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,d=r?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+h>=1?p/u:p*Math.pow(2,1-h))*u>=2&&(a++,u/=2),a+h>=c?(s=0,a=c):a+h>=1?(s=(e*u-1)*Math.pow(2,i),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;t[n+f]=255&s,f+=d,s/=256,i-=8);for(a=a<<i|s,l+=i;l>0;t[n+f]=255&a,f+=d,a/=256,l-=8);t[n+f-d]|=128*m}},{}],26:[function(t,e,n){"use strict";function r(t,e,n,r,s){e=e||i,n=n||o,s=s||Array,this.nodeSize=r||64,this.points=t,this.ids=new s(t.length),this.coords=new s(2*t.length);for(var u=0;u<t.length;u++)this.ids[u]=u,this.coords[2*u]=e(t[u]),this.coords[2*u+1]=n(t[u]);a(this.ids,this.coords,this.nodeSize,0,this.ids.length-1,0)}function i(t){return t[0]}function o(t){return t[1]}var a=t("./sort"),s=t("./range"),u=t("./within");e.exports=function(t,e,n,i,o){return new r(t,e,n,i,o)},r.prototype={range:function(t,e,n,r){return s(this.ids,this.coords,t,e,n,r,this.nodeSize)},within:function(t,e,n){return u(this.ids,this.coords,t,e,n,this.nodeSize)}}},{"./range":27,"./sort":28,"./within":29}],27:[function(t,e,n){"use strict";e.exports=function(t,e,n,r,i,o,a){for(var s,u,l=[0,t.length-1,0],c=[];l.length;){var h=l.pop(),p=l.pop(),f=l.pop();if(p-f<=a)for(var d=f;d<=p;d++)u=e[2*d+1],(s=e[2*d])>=n&&s<=i&&u>=r&&u<=o&&c.push(t[d]);else{var m=Math.floor((f+p)/2);u=e[2*m+1],(s=e[2*m])>=n&&s<=i&&u>=r&&u<=o&&c.push(t[m]);var g=(h+1)%2;(0===h?n<=s:r<=u)&&(l.push(f),l.push(m-1),l.push(g)),(0===h?i>=s:o>=u)&&(l.push(m+1),l.push(p),l.push(g))}}return c}},{}],28:[function(t,e,n){"use strict";function r(t,e,n,r){i(t,n,r),i(e,2*n,2*r),i(e,2*n+1,2*r+1)}function i(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}e.exports=function t(e,n,i,o,a,s){if(!(a-o<=i)){var u=Math.floor((o+a)/2);(function t(e,n,i,o,a,s){for(;a>o;){if(a-o>600){var u=a-o+1,l=i-o+1,c=Math.log(u),h=.5*Math.exp(2*c/3),p=.5*Math.sqrt(c*h*(u-h)/u)*(l-u/2<0?-1:1);t(e,n,i,Math.max(o,Math.floor(i-l*h/u+p)),Math.min(a,Math.floor(i+(u-l)*h/u+p)),s)}var f=n[2*i+s],d=o,m=a;for(r(e,n,o,i),n[2*a+s]>f&&r(e,n,o,a);d<m;){for(r(e,n,d,m),d++,m--;n[2*d+s]<f;)d++;for(;n[2*m+s]>f;)m--}n[2*o+s]===f?r(e,n,o,m):r(e,n,++m,a),m<=i&&(o=m+1),i<=m&&(a=m-1)}})(e,n,u,o,a,s%2),t(e,n,i,o,u-1,s+1),t(e,n,i,u+1,a,s+1)}}},{}],29:[function(t,e,n){"use strict";function r(t,e,n,r){var i=t-n,o=e-r;return i*i+o*o}e.exports=function(t,e,n,i,o,a){for(var s=[0,t.length-1,0],u=[],l=o*o;s.length;){var c=s.pop(),h=s.pop(),p=s.pop();if(h-p<=a)for(var f=p;f<=h;f++)r(e[2*f],e[2*f+1],n,i)<=l&&u.push(t[f]);else{var d=Math.floor((p+h)/2),m=e[2*d],g=e[2*d+1];r(m,g,n,i)<=l&&u.push(t[d]);var y=(c+1)%2;(0===c?n-o<=m:i-o<=g)&&(s.push(p),s.push(d-1),s.push(y)),(0===c?n+o>=m:i+o>=g)&&(s.push(d+1),s.push(h),s.push(y))}}return u}},{}],30:[function(t,e,n){"use strict";function r(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}function i(t){return t.type===r.Bytes?t.readVarint()+t.pos:t.pos+1}function o(t,e,n){return n?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function a(t,e,n){var r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.ceil(Math.log(e)/(7*Math.LN2));n.realloc(r);for(var i=n.pos-1;i>=t;i--)n.buf[i+r]=n.buf[i]}function s(t,e){for(var n=0;n<t.length;n++)e.writeVarint(t[n])}function u(t,e){for(var n=0;n<t.length;n++)e.writeSVarint(t[n])}function l(t,e){for(var n=0;n<t.length;n++)e.writeFloat(t[n])}function c(t,e){for(var n=0;n<t.length;n++)e.writeDouble(t[n])}function h(t,e){for(var n=0;n<t.length;n++)e.writeBoolean(t[n])}function p(t,e){for(var n=0;n<t.length;n++)e.writeFixed32(t[n])}function f(t,e){for(var n=0;n<t.length;n++)e.writeSFixed32(t[n])}function d(t,e){for(var n=0;n<t.length;n++)e.writeFixed64(t[n])}function m(t,e){for(var n=0;n<t.length;n++)e.writeSFixed64(t[n])}function g(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function y(t,e,n){t[n]=e,t[n+1]=e>>>8,t[n+2]=e>>>16,t[n+3]=e>>>24}function v(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}e.exports=r;var _=t("ieee754");r.Varint=0,r.Fixed64=1,r.Bytes=2,r.Fixed32=5,r.prototype={destroy:function(){this.buf=null},readFields:function(t,e,n){for(n=n||this.length;this.pos<n;){var r=this.readVarint(),i=r>>3,o=this.pos;this.type=7&r,t(i,e,this),this.pos===o&&this.skip(r)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=g(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=v(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=g(this.buf,this.pos)+4294967296*g(this.buf,this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=g(this.buf,this.pos)+4294967296*v(this.buf,this.pos+4);return this.pos+=8,t},readFloat:function(){var t=_.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=_.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,n,r=this.buf;return e=127&(n=r[this.pos++]),n<128?e:(e|=(127&(n=r[this.pos++]))<<7,n<128?e:(e|=(127&(n=r[this.pos++]))<<14,n<128?e:(e|=(127&(n=r[this.pos++]))<<21,n<128?e:function(t,e,n){var r,i,a=n.buf;if(r=(112&(i=a[n.pos++]))>>4,i<128)return o(t,r,e);if(r|=(127&(i=a[n.pos++]))<<3,i<128)return o(t,r,e);if(r|=(127&(i=a[n.pos++]))<<10,i<128)return o(t,r,e);if(r|=(127&(i=a[n.pos++]))<<17,i<128)return o(t,r,e);if(r|=(127&(i=a[n.pos++]))<<24,i<128)return o(t,r,e);if(r|=(1&(i=a[n.pos++]))<<31,i<128)return o(t,r,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(n=r[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=function(t,e,n){for(var r="",i=e;i<n;){var o,a,s,u=t[i],l=null,c=u>239?4:u>223?3:u>191?2:1;if(i+c>n)break;1===c?u<128&&(l=u):2===c?128==(192&(o=t[i+1]))&&(l=(31&u)<<6|63&o)<=127&&(l=null):3===c?(a=t[i+2],128==(192&(o=t[i+1]))&&128==(192&a)&&((l=(15&u)<<12|(63&o)<<6|63&a)<=2047||l>=55296&&l<=57343)&&(l=null)):4===c&&(a=t[i+2],s=t[i+3],128==(192&(o=t[i+1]))&&128==(192&a)&&128==(192&s)&&((l=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||l>=1114112)&&(l=null)),null===l?(l=65533,c=1):l>65535&&(l-=65536,r+=String.fromCharCode(l>>>10&1023|55296),l=56320|1023&l),r+=String.fromCharCode(l),i+=c}return r}(this.buf,this.pos,t);return this.pos=t,e},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){var n=i(this);for(t=t||[];this.pos<n;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){var e=i(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){var e=i(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){var e=i(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){var e=i(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){var e=i(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){var e=i(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){var e=i(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){var e=i(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===r.Varint)for(;this.buf[this.pos++]>127;);else if(e===r.Bytes)this.pos=this.readVarint()+this.pos;else if(e===r.Fixed32)this.pos+=4;else{if(e!==r.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var n=new Uint8Array(e);n.set(this.buf),this.buf=n,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),y(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),y(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),y(this.buf,-1&t,this.pos),y(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),y(this.buf,-1&t,this.pos),y(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var n,r;if(t>=0?(n=t%4294967296|0,r=t/4294967296|0):(r=~(-t/4294967296),4294967295^(n=~(-t%4294967296))?n=n+1|0:(n=0,r=r+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,n){n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,n.buf[n.pos]=127&(t>>>=7)}(n,0,e),function(t,e){var n=(7&t)<<4;e.buf[e.pos++]|=n|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(r,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,n){for(var r,i,o=0;o<e.length;o++){if((r=e.charCodeAt(o))>55295&&r<57344){if(!i){r>56319||o+1===e.length?(t[n++]=239,t[n++]=191,t[n++]=189):i=r;continue}if(r<56320){t[n++]=239,t[n++]=191,t[n++]=189,i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&(t[n++]=239,t[n++]=191,t[n++]=189,i=null);r<128?t[n++]=r:(r<2048?t[n++]=r>>6|192:(r<65536?t[n++]=r>>12|224:(t[n++]=r>>18|240,t[n++]=r>>12&63|128),t[n++]=r>>6&63|128),t[n++]=63&r|128)}return n}(this.buf,t,this.pos);var n=this.pos-e;n>=128&&a(e,n,this),this.pos=e-1,this.writeVarint(n),this.pos+=n},writeFloat:function(t){this.realloc(4),_.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),_.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var n=0;n<e;n++)this.buf[this.pos++]=t[n]},writeRawMessage:function(t,e){this.pos++;var n=this.pos;t(e,this);var r=this.pos-n;r>=128&&a(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(t,e,n){this.writeTag(t,r.Bytes),this.writeRawMessage(e,n)},writePackedVarint:function(t,e){this.writeMessage(t,s,e)},writePackedSVarint:function(t,e){this.writeMessage(t,u,e)},writePackedBoolean:function(t,e){this.writeMessage(t,h,e)},writePackedFloat:function(t,e){this.writeMessage(t,l,e)},writePackedDouble:function(t,e){this.writeMessage(t,c,e)},writePackedFixed32:function(t,e){this.writeMessage(t,p,e)},writePackedSFixed32:function(t,e){this.writeMessage(t,f,e)},writePackedFixed64:function(t,e){this.writeMessage(t,d,e)},writePackedSFixed64:function(t,e){this.writeMessage(t,m,e)},writeBytesField:function(t,e){this.writeTag(t,r.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,r.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,r.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,r.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,r.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,r.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,r.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,r.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,r.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,r.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}}},{ieee754:25}],31:[function(t,e,n){"use strict";function r(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function i(t,e){return t<e?-1:t>e?1:0}e.exports=function t(e,n,o,a,s){for(o=o||0,a=a||e.length-1,s=s||i;a>o;){if(a-o>600){var u=a-o+1,l=n-o+1,c=Math.log(u),h=.5*Math.exp(2*c/3),p=.5*Math.sqrt(c*h*(u-h)/u)*(l-u/2<0?-1:1);t(e,n,Math.max(o,Math.floor(n-l*h/u+p)),Math.min(a,Math.floor(n+(u-l)*h/u+p)),s)}var f=e[n],d=o,m=a;for(r(e,o,n),s(e[a],f)>0&&r(e,o,a);d<m;){for(r(e,d,m),d++,m--;s(e[d],f)<0;)d++;for(;s(e[m],f)>0;)m--}0===s(e[o],f)?r(e,o,m):r(e,++m,a),m<=n&&(o=m+1),n<=m&&(a=m-1)}}},{}],32:[function(t,e,n){"use strict";function r(t){this.options=c(Object.create(this.options),t),this.trees=new Array(this.options.maxZoom+1)}function i(t,e,n,r,i){return{x:t,y:e,zoom:1/0,id:r,properties:i,parentId:-1,numPoints:n}}function o(t,e){var n=t.geometry.coordinates;return{x:u(n[0]),y:l(n[1]),zoom:1/0,id:e,parentId:-1}}function a(t){return{type:"Feature",properties:s(t),geometry:{type:"Point",coordinates:[function(t){return 360*(t-.5)}(t.x),function(t){var e=(180-360*t)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}(t.y)]}}}function s(t){var e=t.numPoints,n=e>=1e4?Math.round(e/1e3)+"k":e>=1e3?Math.round(e/100)/10+"k":e;return c(c({},t.properties),{cluster:!0,cluster_id:t.id,point_count:e,point_count_abbreviated:n})}function u(t){return t/360+.5}function l(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function c(t,e){for(var n in e)t[n]=e[n];return t}function h(t){return t.x}function p(t){return t.y}var f=t("kdbush");e.exports=function(t){return new r(t)},r.prototype={options:{minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,reduce:null,initial:function(){return{}},map:function(t){return t}},load:function(t){var e=this.options.log;e&&console.time("total time");var n="prepare "+t.length+" points";e&&console.time(n),this.points=t;var r=t.map(o);e&&console.timeEnd(n);for(var i=this.options.maxZoom;i>=this.options.minZoom;i--){var a=+Date.now();this.trees[i+1]=f(r,h,p,this.options.nodeSize,Float32Array),r=this._cluster(r,i),e&&console.log("z%d: %d clusters in %dms",i,r.length,+Date.now()-a)}return this.trees[this.options.minZoom]=f(r,h,p,this.options.nodeSize,Float32Array),e&&console.timeEnd("total time"),this},getClusters:function(t,e){for(var n=this.trees[this._limitZoom(e)],r=n.range(u(t[0]),l(t[3]),u(t[2]),l(t[1])),i=[],o=0;o<r.length;o++){var s=n.points[r[o]];i.push(s.numPoints?a(s):this.points[s.id])}return i},getChildren:function(t,e){for(var n=this.trees[e+1].points[t],r=this.options.radius/(this.options.extent*Math.pow(2,e)),i=this.trees[e+1].within(n.x,n.y,r),o=[],s=0;s<i.length;s++){var u=this.trees[e+1].points[i[s]];u.parentId===t&&o.push(u.numPoints?a(u):this.points[u.id])}return o},getLeaves:function(t,e,n,r){var i=[];return this._appendLeaves(i,t,e,n=n||10,r=r||0,0),i},getTile:function(t,e,n){var r=this.trees[this._limitZoom(t)],i=Math.pow(2,t),o=this.options.radius/this.options.extent,a=(n-o)/i,s=(n+1+o)/i,u={features:[]};return this._addTileFeatures(r.range((e-o)/i,a,(e+1+o)/i,s),r.points,e,n,i,u),0===e&&this._addTileFeatures(r.range(1-o/i,a,1,s),r.points,i,n,i,u),e===i-1&&this._addTileFeatures(r.range(0,a,o/i,s),r.points,-1,n,i,u),u.features.length?u:null},getClusterExpansionZoom:function(t,e){for(;e<this.options.maxZoom;){var n=this.getChildren(t,e);if(e++,1!==n.length)break;t=n[0].properties.cluster_id}return e},_appendLeaves:function(t,e,n,r,i,o){for(var a=this.getChildren(e,n),s=0;s<a.length;s++){var u=a[s].properties;if(u.cluster?o+u.point_count<=i?o+=u.point_count:o=this._appendLeaves(t,u.cluster_id,n+1,r,i,o):o<i?o++:t.push(a[s]),t.length===r)break}return o},_addTileFeatures:function(t,e,n,r,i,o){for(var a=0;a<t.length;a++){var u=e[t[a]];o.features.push({type:1,geometry:[[Math.round(this.options.extent*(u.x*i-n)),Math.round(this.options.extent*(u.y*i-r))]],tags:u.numPoints?s(u):this.points[u.id].properties})}},_limitZoom:function(t){return Math.max(this.options.minZoom,Math.min(t,this.options.maxZoom+1))},_cluster:function(t,e){for(var n=[],r=this.options.radius/(this.options.extent*Math.pow(2,e)),o=0;o<t.length;o++){var a=t[o];if(!(a.zoom<=e)){a.zoom=e;var s=this.trees[e+1],u=s.within(a.x,a.y,r),l=a.numPoints||1,c=a.x*l,h=a.y*l,p=null;this.options.reduce&&(p=this.options.initial(),this._accumulate(p,a));for(var f=0;f<u.length;f++){var d=s.points[u[f]];if(e<d.zoom){var m=d.numPoints||1;d.zoom=e,c+=d.x*m,h+=d.y*m,l+=m,d.parentId=o,this.options.reduce&&this._accumulate(p,d)}}1===l?n.push(a):(a.parentId=o,n.push(i(c/l,h/l,l,o,p)))}}return n},_accumulate:function(t,e){var n=e.numPoints?e.properties:this.options.map(this.points[e.id].properties);this.options.reduce(t,n)}}},{kdbush:26}],33:[function(t,e,n){"use strict";function r(t,e){if(!(this instanceof r))return new r(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||i,this.length>0)for(var n=this.length>>1;n>=0;n--)this._down(n)}function i(t,e){return t<e?-1:t>e?1:0}e.exports=r,r.prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var t=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t}},peek:function(){return this.data[0]},_up:function(t){for(var e=this.data,n=this.compare,r=e[t];t>0;){var i=t-1>>1,o=e[i];if(n(r,o)>=0)break;e[t]=o,t=i}e[t]=r},_down:function(t){for(var e=this.data,n=this.compare,r=this.length,i=r>>1,o=e[t];t<i;){var a=1+(t<<1),s=a+1,u=e[a];if(s<r&&n(e[s],u)<0&&(a=s,u=e[s]),n(u,o)>=0)break;e[t]=u,t=a}e[t]=o}}},{}],34:[function(t,e,n){function r(t){var e=new h;return function(t,e){for(var n in t.layers)e.writeMessage(3,i,t.layers[n])}(t,e),e.finish()}function i(t,e){e.writeVarintField(15,t.version||1),e.writeStringField(1,t.name||""),e.writeVarintField(5,t.extent||4096);var n,r={keys:[],values:[],keycache:{},valuecache:{}};for(n=0;n<t.length;n++)r.feature=t.feature(n),e.writeMessage(2,o,r);var i=r.keys;for(n=0;n<i.length;n++)e.writeStringField(3,i[n]);var a=r.values;for(n=0;n<a.length;n++)e.writeMessage(4,c,a[n])}function o(t,e){var n=t.feature;void 0!==n.id&&e.writeVarintField(1,n.id),e.writeMessage(2,a,t),e.writeVarintField(3,n.type),e.writeMessage(4,l,n)}function a(t,e){var n=t.feature,r=t.keys,i=t.values,o=t.keycache,a=t.valuecache;for(var s in n.properties){var u=o[s];void 0===u&&(r.push(s),o[s]=u=r.length-1),e.writeVarint(u);var l=n.properties[s],c=typeof l;"string"!==c&&"boolean"!==c&&"number"!==c&&(l=JSON.stringify(l));var h=c+":"+l,p=a[h];void 0===p&&(i.push(l),a[h]=p=i.length-1),e.writeVarint(p)}}function s(t,e){return(e<<3)+(7&t)}function u(t){return t<<1^t>>31}function l(t,e){for(var n=t.loadGeometry(),r=t.type,i=0,o=0,a=n.length,l=0;l<a;l++){var c=n[l],h=1;1===r&&(h=c.length),e.writeVarint(s(1,h));for(var p=0;p<c.length;p++){1===p&&1!==r&&e.writeVarint(s(2,c.length-1));var f=c[p].x-i,d=c[p].y-o;e.writeVarint(u(f)),e.writeVarint(u(d)),i+=f,o+=d}}}function c(t,e){var n=typeof t;"string"===n?e.writeStringField(1,t):"boolean"===n?e.writeBooleanField(7,t):"number"===n&&(t%1!=0?e.writeDoubleField(3,t):t<0?e.writeSVarintField(6,t):e.writeVarintField(5,t))}var h=t("pbf"),p=t("./lib/geojson_wrapper");e.exports=r,e.exports.fromVectorTileJs=r,e.exports.fromGeojsonVt=function(t){var e={};for(var n in t)e[n]=new p(t[n].features),e[n].name=n;return r({layers:e})},e.exports.GeoJSONWrapper=p},{"./lib/geojson_wrapper":35,pbf:30}],35:[function(t,e,n){"use strict";function r(t){this.features=t,this.length=t.length}function i(t){this.id="number"==typeof t.id?t.id:void 0,this.type=t.type,this.rawGeometry=1===t.type?[t.geometry]:t.geometry,this.properties=t.tags,this.extent=4096}var o=t("@mapbox/point-geometry"),a=t("@mapbox/vector-tile").VectorTileFeature;e.exports=r,r.prototype.feature=function(t){return new i(this.features[t])},i.prototype.loadGeometry=function(){var t=this.rawGeometry;this.geometry=[];for(var e=0;e<t.length;e++){for(var n=t[e],r=[],i=0;i<n.length;i++)r.push(new o(n[i][0],n[i][1]));this.geometry.push(r)}return this.geometry},i.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var t=this.geometry,e=1/0,n=-1/0,r=1/0,i=-1/0,o=0;o<t.length;o++)for(var a=t[o],s=0;s<a.length;s++){var u=a[s];e=Math.min(e,u.x),n=Math.max(n,u.x),r=Math.min(r,u.y),i=Math.max(i,u.y)}return[e,r,n,i]},i.prototype.toGeoJSON=a.prototype.toGeoJSON},{"@mapbox/point-geometry":4,"@mapbox/vector-tile":8}],36:[function(t,e,n){var r=arguments[3],i=arguments[4],o=arguments[5],a=JSON.stringify;e.exports=function(t,e){for(var n,s=Object.keys(o),u=0,l=s.length;u<l;u++){var c=o[p=s[u]].exports;if(c===t||c&&c.default===t){n=p;break}}if(!n){n=Math.floor(Math.pow(16,8)*Math.random()).toString(16);var h={};for(u=0,l=s.length;u<l;u++){var p;h[p=s[u]]=p}i[n]=["function(require,module,exports){"+t+"(self); }",h]}var f=Math.floor(Math.pow(16,8)*Math.random()).toString(16),d={};d[n]=n,i[f]=["function(require,module,exports){var f = require("+a(n)+");(f.default ? f.default : f)(self);}",d];var m={};!function t(e){for(var n in m[e]=!0,i[e][1]){var r=i[e][1][n];m[r]||t(r)}}(f);var g="("+r+")({"+Object.keys(m).map(function(t){return a(t)+":["+i[t][0]+","+a(i[t][1])+"]"}).join(",")+"},{},["+a(f)+"])",y=window.URL||window.webkitURL||window.mozURL||window.msURL,v=new Blob([g],{type:"text/javascript"});if(e&&e.bare)return v;var _=y.createObjectURL(v),b=new Worker(_);return b.objectURL=_,b}},{}],37:[function(t,e,n){e.exports.RADIUS=6378137,e.exports.FLATTENING=1/298.257223563,e.exports.POLAR_RADIUS=6356752.3142},{}],38:[function(t,e,n){e.exports={version:"0.44.1"}},{}],39:[function(t,e,n){"use strict";var r=t("../util/struct_array").StructArray,i=t("../util/struct_array").Struct,o=t("../util/web_worker_transfer").register,a=t("@mapbox/point-geometry"),s=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var n=this.length;this.resize(n+1);var r=2*n;return this.int16[r+0]=t,this.int16[r+1]=e,n},e}(r);s.prototype.bytesPerElement=4,o("StructArrayLayout2i4",s);var u=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r){var i=this.length;this.resize(i+1);var o=4*i;return this.int16[o+0]=t,this.int16[o+1]=e,this.int16[o+2]=n,this.int16[o+3]=r,i},e}(r);u.prototype.bytesPerElement=8,o("StructArrayLayout4i8",u);var l=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o){var a=this.length;this.resize(a+1);var s=6*a;return this.int16[s+0]=t,this.int16[s+1]=e,this.int16[s+2]=n,this.int16[s+3]=r,this.int16[s+4]=i,this.int16[s+5]=o,a},e}(r);l.prototype.bytesPerElement=12,o("StructArrayLayout2i4i12",l);var c=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o,a,s){var u=this.length;this.resize(u+1);var l=6*u,c=12*u;return this.int16[l+0]=t,this.int16[l+1]=e,this.int16[l+2]=n,this.int16[l+3]=r,this.uint8[c+8]=i,this.uint8[c+9]=o,this.uint8[c+10]=a,this.uint8[c+11]=s,u},e}(r);c.prototype.bytesPerElement=12,o("StructArrayLayout4i4ub12",c);var h=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o,a,s){var u=this.length;this.resize(u+1);var l=8*u;return this.int16[l+0]=t,this.int16[l+1]=e,this.int16[l+2]=n,this.int16[l+3]=r,this.uint16[l+4]=i,this.uint16[l+5]=o,this.uint16[l+6]=a,this.uint16[l+7]=s,u},e}(r);h.prototype.bytesPerElement=16,o("StructArrayLayout4i4ui16",h);var p=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var r=this.length;this.resize(r+1);var i=3*r;return this.float32[i+0]=t,this.float32[i+1]=e,this.float32[i+2]=n,r},e}(r);p.prototype.bytesPerElement=12,o("StructArrayLayout3f12",p);var f=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.uint32[1*e+0]=t,e},e}(r);f.prototype.bytesPerElement=4,o("StructArrayLayout1ul4",f);var d=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o,a,s,u,l,c){var h=this.length;this.resize(h+1);var p=12*h,f=6*h;return this.int16[p+0]=t,this.int16[p+1]=e,this.int16[p+2]=n,this.int16[p+3]=r,this.int16[p+4]=i,this.int16[p+5]=o,this.uint32[f+3]=a,this.uint16[p+8]=s,this.uint16[p+9]=u,this.int16[p+10]=l,this.int16[p+11]=c,h},e}(r);d.prototype.bytesPerElement=24,o("StructArrayLayout6i1ul2ui2i24",d);var m=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o){var a=this.length;this.resize(a+1);var s=6*a;return this.int16[s+0]=t,this.int16[s+1]=e,this.int16[s+2]=n,this.int16[s+3]=r,this.int16[s+4]=i,this.int16[s+5]=o,a},e}(r);m.prototype.bytesPerElement=12,o("StructArrayLayout2i2i2i12",m);var g=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var n=this.length;this.resize(n+1);var r=4*n;return this.uint8[r+0]=t,this.uint8[r+1]=e,n},e}(r);g.prototype.bytesPerElement=4,o("StructArrayLayout2ub4",g);var y=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o,a,s,u,l,c,h,p,f){var d=this.length;this.resize(d+1);var m=20*d,g=10*d,y=40*d;return this.int16[m+0]=t,this.int16[m+1]=e,this.uint16[m+2]=n,this.uint16[m+3]=r,this.uint32[g+2]=i,this.uint32[g+3]=o,this.uint32[g+4]=a,this.uint16[m+10]=s,this.uint16[m+11]=u,this.uint16[m+12]=l,this.float32[g+7]=c,this.float32[g+8]=h,this.uint8[y+36]=p,this.uint8[y+37]=f,d},e}(r);y.prototype.bytesPerElement=40,o("StructArrayLayout2i2ui3ul3ui2f2ub40",y);var v=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.float32[1*e+0]=t,e},e}(r);v.prototype.bytesPerElement=4,o("StructArrayLayout1f4",v);var _=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var r=this.length;this.resize(r+1);var i=3*r;return this.int16[i+0]=t,this.int16[i+1]=e,this.int16[i+2]=n,r},e}(r);_.prototype.bytesPerElement=6,o("StructArrayLayout3i6",_);var b=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var r=this.length;this.resize(r+1);var i=4*r;return this.uint32[2*r+0]=t,this.uint16[i+2]=e,this.uint16[i+3]=n,r},e}(r);b.prototype.bytesPerElement=8,o("StructArrayLayout1ul2ui8",b);var x=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var r=this.length;this.resize(r+1);var i=3*r;return this.uint16[i+0]=t,this.uint16[i+1]=e,this.uint16[i+2]=n,r},e}(r);x.prototype.bytesPerElement=6,o("StructArrayLayout3ui6",x);var w=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var n=this.length;this.resize(n+1);var r=2*n;return this.uint16[r+0]=t,this.uint16[r+1]=e,n},e}(r);w.prototype.bytesPerElement=4,o("StructArrayLayout2ui4",w);var E=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var n=this.length;this.resize(n+1);var r=2*n;return this.float32[r+0]=t,this.float32[r+1]=e,n},e}(r);E.prototype.bytesPerElement=8,o("StructArrayLayout2f8",E);var C=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r){var i=this.length;this.resize(i+1);var o=4*i;return this.float32[o+0]=t,this.float32[o+1]=e,this.float32[o+2]=n,this.float32[o+3]=r,i},e}(r);C.prototype.bytesPerElement=16,o("StructArrayLayout4f16",C);var S=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={anchorPointX:{},anchorPointY:{},x1:{},y1:{},x2:{},y2:{},featureIndex:{},sourceLayerIndex:{},bucketIndex:{},radius:{},signedDistanceFromAnchor:{},anchorPoint:{}};return n.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorPointX.set=function(t){this._structArray.int16[this._pos2+0]=t},n.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},n.anchorPointY.set=function(t){this._structArray.int16[this._pos2+1]=t},n.x1.get=function(){return this._structArray.int16[this._pos2+2]},n.x1.set=function(t){this._structArray.int16[this._pos2+2]=t},n.y1.get=function(){return this._structArray.int16[this._pos2+3]},n.y1.set=function(t){this._structArray.int16[this._pos2+3]=t},n.x2.get=function(){return this._structArray.int16[this._pos2+4]},n.x2.set=function(t){this._structArray.int16[this._pos2+4]=t},n.y2.get=function(){return this._structArray.int16[this._pos2+5]},n.y2.set=function(t){this._structArray.int16[this._pos2+5]=t},n.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},n.featureIndex.set=function(t){this._structArray.uint32[this._pos4+3]=t},n.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},n.sourceLayerIndex.set=function(t){this._structArray.uint16[this._pos2+8]=t},n.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},n.bucketIndex.set=function(t){this._structArray.uint16[this._pos2+9]=t},n.radius.get=function(){return this._structArray.int16[this._pos2+10]},n.radius.set=function(t){this._structArray.int16[this._pos2+10]=t},n.signedDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+11]},n.signedDistanceFromAnchor.set=function(t){this._structArray.int16[this._pos2+11]=t},n.anchorPoint.get=function(){return new a(this.anchorPointX,this.anchorPointY)},Object.defineProperties(e.prototype,n),e}(i);S.prototype.size=24;var I=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new S(this,t)},e}(d);o("CollisionBoxArray",I);var T=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={anchorX:{},anchorY:{},glyphStartIndex:{},numGlyphs:{},vertexStartIndex:{},lineStartIndex:{},lineLength:{},segment:{},lowerSize:{},upperSize:{},lineOffsetX:{},lineOffsetY:{},writingMode:{},hidden:{}};return n.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorX.set=function(t){this._structArray.int16[this._pos2+0]=t},n.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},n.anchorY.set=function(t){this._structArray.int16[this._pos2+1]=t},n.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},n.glyphStartIndex.set=function(t){this._structArray.uint16[this._pos2+2]=t},n.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},n.numGlyphs.set=function(t){this._structArray.uint16[this._pos2+3]=t},n.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},n.vertexStartIndex.set=function(t){this._structArray.uint32[this._pos4+2]=t},n.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},n.lineStartIndex.set=function(t){this._structArray.uint32[this._pos4+3]=t},n.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},n.lineLength.set=function(t){this._structArray.uint32[this._pos4+4]=t},n.segment.get=function(){return this._structArray.uint16[this._pos2+10]},n.segment.set=function(t){this._structArray.uint16[this._pos2+10]=t},n.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},n.lowerSize.set=function(t){this._structArray.uint16[this._pos2+11]=t},n.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},n.upperSize.set=function(t){this._structArray.uint16[this._pos2+12]=t},n.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},n.lineOffsetX.set=function(t){this._structArray.float32[this._pos4+7]=t},n.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},n.lineOffsetY.set=function(t){this._structArray.float32[this._pos4+8]=t},n.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},n.writingMode.set=function(t){this._structArray.uint8[this._pos1+36]=t},n.hidden.get=function(){return this._structArray.uint8[this._pos1+37]},n.hidden.set=function(t){this._structArray.uint8[this._pos1+37]=t},Object.defineProperties(e.prototype,n),e}(i);T.prototype.size=40;var k=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new T(this,t)},e}(y);o("PlacedSymbolArray",k);var O=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={offsetX:{}};return n.offsetX.get=function(){return this._structArray.float32[this._pos4+0]},n.offsetX.set=function(t){this._structArray.float32[this._pos4+0]=t},Object.defineProperties(e.prototype,n),e}(i);O.prototype.size=4;var P=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getoffsetX=function(t){return this.float32[1*t+0]},e.prototype.get=function(t){return new O(this,t)},e}(v);o("GlyphOffsetArray",P);var A=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={x:{},y:{},tileUnitDistanceFromAnchor:{}};return n.x.get=function(){return this._structArray.int16[this._pos2+0]},n.x.set=function(t){this._structArray.int16[this._pos2+0]=t},n.y.get=function(){return this._structArray.int16[this._pos2+1]},n.y.set=function(t){this._structArray.int16[this._pos2+1]=t},n.tileUnitDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+2]},n.tileUnitDistanceFromAnchor.set=function(t){this._structArray.int16[this._pos2+2]=t},Object.defineProperties(e.prototype,n),e}(i);A.prototype.size=6;var M=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getx=function(t){return this.int16[3*t+0]},e.prototype.gety=function(t){return this.int16[3*t+1]},e.prototype.gettileUnitDistanceFromAnchor=function(t){return this.int16[3*t+2]},e.prototype.get=function(t){return new A(this,t)},e}(_);o("SymbolLineVertexArray",M);var R=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={featureIndex:{},sourceLayerIndex:{},bucketIndex:{}};return n.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},n.featureIndex.set=function(t){this._structArray.uint32[this._pos4+0]=t},n.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},n.sourceLayerIndex.set=function(t){this._structArray.uint16[this._pos2+2]=t},n.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},n.bucketIndex.set=function(t){this._structArray.uint16[this._pos2+3]=t},Object.defineProperties(e.prototype,n),e}(i);R.prototype.size=8;var L=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new R(this,t)},e}(b);o("FeatureIndexArray",L),e.exports={StructArrayLayout2i4:s,StructArrayLayout4i8:u,StructArrayLayout2i4i12:l,StructArrayLayout4i4ub12:c,StructArrayLayout4i4ui16:h,StructArrayLayout3f12:p,StructArrayLayout1ul4:f,StructArrayLayout6i1ul2ui2i24:d,StructArrayLayout2i2i2i12:m,StructArrayLayout2ub4:g,StructArrayLayout2i2ui3ul3ui2f2ub40:y,StructArrayLayout1f4:v,StructArrayLayout3i6:_,StructArrayLayout1ul2ui8:b,StructArrayLayout3ui6:x,StructArrayLayout2ui4:w,StructArrayLayout2f8:E,StructArrayLayout4f16:C,PosArray:s,RasterBoundsArray:u,CircleLayoutArray:s,FillLayoutArray:s,FillExtrusionLayoutArray:l,HeatmapLayoutArray:s,LineLayoutArray:c,SymbolLayoutArray:h,SymbolDynamicLayoutArray:p,SymbolOpacityArray:f,CollisionBoxLayoutArray:m,CollisionCircleLayoutArray:m,CollisionVertexArray:g,TriangleIndexArray:x,LineIndexArray:w,CollisionBoxArray:I,PlacedSymbolArray:k,GlyphOffsetArray:P,SymbolLineVertexArray:M,FeatureIndexArray:L}},{"../util/struct_array":271,"../util/web_worker_transfer":278,"@mapbox/point-geometry":4}],40:[function(t,e,n){"use strict";e.exports={deserialize:function(t,e){var n={};if(!e)return n;for(var r=0,i=t;r<i.length;r+=1){var o=i[r],a=o.layerIds.map(function(t){return e.getLayer(t)}).filter(Boolean);if(0!==a.length){o.layers=a;for(var s=0,u=a;s<u.length;s+=1)n[u[s].id]=o}}return n}}},{}],41:[function(t,e,n){"use strict";var r=t("../../util/struct_array");e.exports=(0,r.createLayout)([{name:"a_pos",components:2,type:"Int16"}],4)},{"../../util/struct_array":271}],42:[function(t,e,n){"use strict";function r(t,e,n,r,i){t.emplaceBack(2*e+(r+1)/2,2*n+(i+1)/2)}var i=t("../array_types").CircleLayoutArray,o=t("./circle_attributes").members,a=t("../segment").SegmentVector,s=t("../program_configuration").ProgramConfigurationSet,u=t("../index_array_type").TriangleIndexArray,l=t("../load_geometry"),c=t("../extent"),h=t("../../util/web_worker_transfer").register,p=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.layoutVertexArray=new i,this.indexArray=new u,this.segments=new a,this.programConfigurations=new s(o,t.layers,t.zoom)};p.prototype.populate=function(t,e){for(var n=this,r=0,i=t;r<i.length;r+=1){var o=i[r],a=o.feature,s=o.index,u=o.sourceLayerIndex;if(n.layers[0]._featureFilter({zoom:n.zoom},a)){var c=l(a);n.addFeature(a,c),e.featureIndex.insert(a,c,s,u,n.index)}}},p.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},p.prototype.upload=function(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,o),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.programConfigurations.upload(t)},p.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},p.prototype.addFeature=function(t,e){for(var n=this,i=0,o=e;i<o.length;i+=1)for(var a=0,s=o[i];a<s.length;a+=1){var u=s[a],l=u.x,h=u.y;if(!(l<0||l>=c||h<0||h>=c)){var p=n.segments.prepareSegment(4,n.layoutVertexArray,n.indexArray),f=p.vertexLength;r(n.layoutVertexArray,l,h,-1,-1),r(n.layoutVertexArray,l,h,1,-1),r(n.layoutVertexArray,l,h,1,1),r(n.layoutVertexArray,l,h,-1,1),n.indexArray.emplaceBack(f,f+1,f+2),n.indexArray.emplaceBack(f,f+3,f+2),p.vertexLength+=4,p.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t)},h("CircleBucket",p,{omit:["layers"]}),e.exports=p},{"../../util/web_worker_transfer":278,"../array_types":39,"../extent":53,"../index_array_type":55,"../load_geometry":56,"../program_configuration":58,"../segment":60,"./circle_attributes":41}],43:[function(t,e,n){arguments[4][41][0].apply(n,arguments)},{"../../util/struct_array":271,dup:41}],44:[function(t,e,n){"use strict";var r=t("../array_types").FillLayoutArray,i=t("./fill_attributes").members,o=t("../segment").SegmentVector,a=t("../program_configuration").ProgramConfigurationSet,s=t("../index_array_type"),u=s.LineIndexArray,l=s.TriangleIndexArray,c=t("../load_geometry"),h=t("earcut"),p=t("../../util/classify_rings"),f=t("../../util/web_worker_transfer").register,d=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.layoutVertexArray=new r,this.indexArray=new l,this.indexArray2=new u,this.programConfigurations=new a(i,t.layers,t.zoom),this.segments=new o,this.segments2=new o};d.prototype.populate=function(t,e){for(var n=this,r=0,i=t;r<i.length;r+=1){var o=i[r],a=o.feature,s=o.index,u=o.sourceLayerIndex;if(n.layers[0]._featureFilter({zoom:n.zoom},a)){var l=c(a);n.addFeature(a,l),e.featureIndex.insert(a,l,s,u,n.index)}}},d.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},d.prototype.upload=function(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,i),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2),this.programConfigurations.upload(t)},d.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},d.prototype.addFeature=function(t,e){for(var n=this,r=0,i=p(e,500);r<i.length;r+=1){for(var o=i[r],a=0,s=0,u=o;s<u.length;s+=1)a+=u[s].length;for(var l=n.segments.prepareSegment(a,n.layoutVertexArray,n.indexArray),c=l.vertexLength,f=[],d=[],m=0,g=o;m<g.length;m+=1){var y=g[m];if(0!==y.length){y!==o[0]&&d.push(f.length/2);var v=n.segments2.prepareSegment(y.length,n.layoutVertexArray,n.indexArray2),_=v.vertexLength;n.layoutVertexArray.emplaceBack(y[0].x,y[0].y),n.indexArray2.emplaceBack(_+y.length-1,_),f.push(y[0].x),f.push(y[0].y);for(var b=1;b<y.length;b++)n.layoutVertexArray.emplaceBack(y[b].x,y[b].y),n.indexArray2.emplaceBack(_+b-1,_+b),f.push(y[b].x),f.push(y[b].y);v.vertexLength+=y.length,v.primitiveLength+=y.length}}for(var x=h(f,d),w=0;w<x.length;w+=3)n.indexArray.emplaceBack(c+x[w],c+x[w+1],c+x[w+2]);l.vertexLength+=a,l.primitiveLength+=x.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t)},f("FillBucket",d,{omit:["layers"]}),e.exports=d},{"../../util/classify_rings":255,"../../util/web_worker_transfer":278,"../array_types":39,"../index_array_type":55,"../load_geometry":56,"../program_configuration":58,"../segment":60,"./fill_attributes":43,earcut:14}],45:[function(t,e,n){"use strict";var r=t("../../util/struct_array");e.exports=(0,r.createLayout)([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4)},{"../../util/struct_array":271}],46:[function(t,e,n){"use strict";function r(t,e,n,r,i,o,a,s){t.emplaceBack(e,n,2*Math.floor(r*v)+a,i*v*2,o*v*2,Math.round(s))}function i(t,e){return t.x===e.x&&(t.x<0||t.x>d)||t.y===e.y&&(t.y<0||t.y>d)}function o(t){return t.every(function(t){return t.x<0})||t.every(function(t){return t.x>d})||t.every(function(t){return t.y<0})||t.every(function(t){return t.y>d})}var a=t("../array_types").FillExtrusionLayoutArray,s=t("./fill_extrusion_attributes").members,u=t("../segment"),l=u.SegmentVector,c=u.MAX_VERTEX_ARRAY_LENGTH,h=t("../program_configuration").ProgramConfigurationSet,p=t("../index_array_type").TriangleIndexArray,f=t("../load_geometry"),d=t("../extent"),m=t("earcut"),g=t("../../util/classify_rings"),y=t("../../util/web_worker_transfer").register,v=Math.pow(2,13),_=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.layoutVertexArray=new a,this.indexArray=new p,this.programConfigurations=new h(s,t.layers,t.zoom),this.segments=new l};_.prototype.populate=function(t,e){for(var n=this,r=0,i=t;r<i.length;r+=1){var o=i[r],a=o.feature,s=o.index,u=o.sourceLayerIndex;if(n.layers[0]._featureFilter({zoom:n.zoom},a)){var l=f(a);n.addFeature(a,l),e.featureIndex.insert(a,l,s,u,n.index)}}},_.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},_.prototype.upload=function(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,s),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.programConfigurations.upload(t)},_.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},_.prototype.addFeature=function(t,e){for(var n=this,a=0,s=g(e,500);a<s.length;a+=1){for(var u=s[a],l=0,h=0,p=u;h<p.length;h+=1)l+=p[h].length;for(var f=n.segments.prepareSegment(4,n.layoutVertexArray,n.indexArray),d=0,y=u;d<y.length;d+=1){var v=y[d];if(0!==v.length&&!o(v))for(var _=0,b=0;b<v.length;b++){var x=v[b];if(b>=1){var w=v[b-1];if(!i(x,w)){f.vertexLength+4>c&&(f=n.segments.prepareSegment(4,n.layoutVertexArray,n.indexArray));var E=x.sub(w)._perp()._unit(),C=w.dist(x);_+C>32768&&(_=0),r(n.layoutVertexArray,x.x,x.y,E.x,E.y,0,0,_),r(n.layoutVertexArray,x.x,x.y,E.x,E.y,0,1,_),r(n.layoutVertexArray,w.x,w.y,E.x,E.y,0,0,_+=C),r(n.layoutVertexArray,w.x,w.y,E.x,E.y,0,1,_);var S=f.vertexLength;n.indexArray.emplaceBack(S,S+1,S+2),n.indexArray.emplaceBack(S+1,S+2,S+3),f.vertexLength+=4,f.primitiveLength+=2}}}}f.vertexLength+l>c&&(f=n.segments.prepareSegment(l,n.layoutVertexArray,n.indexArray));for(var I=[],T=[],k=f.vertexLength,O=0,P=u;O<P.length;O+=1){var A=P[O];if(0!==A.length){A!==u[0]&&T.push(I.length/2);for(var M=0;M<A.length;M++){var R=A[M];r(n.layoutVertexArray,R.x,R.y,0,0,1,1,0),I.push(R.x),I.push(R.y)}}}for(var L=m(I,T),N=0;N<L.length;N+=3)n.indexArray.emplaceBack(k+L[N],k+L[N+1],k+L[N+2]);f.primitiveLength+=L.length/3,f.vertexLength+=l}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t)},y("FillExtrusionBucket",_,{omit:["layers"]}),e.exports=_},{"../../util/classify_rings":255,"../../util/web_worker_transfer":278,"../array_types":39,"../extent":53,"../index_array_type":55,"../load_geometry":56,"../program_configuration":58,"../segment":60,"./fill_extrusion_attributes":45,earcut:14}],47:[function(t,e,n){"use strict";var r=t("./circle_bucket"),i=t("../../util/web_worker_transfer").register,o=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(r);i("HeatmapBucket",o,{omit:["layers"]}),e.exports=o},{"../../util/web_worker_transfer":278,"./circle_bucket":42}],48:[function(t,e,n){"use strict";var r=t("../../util/struct_array");e.exports=(0,r.createLayout)([{name:"a_pos_normal",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4)},{"../../util/struct_array":271}],49:[function(t,e,n){"use strict";function r(t,e,n,r,i,o,a){t.emplaceBack(e.x,e.y,r?1:0,i?1:-1,Math.round(f*n.x)+128,Math.round(f*n.y)+128,1+(0===o?0:o<0?-1:1)|(a*m&63)<<2,a*m>>6)}var i=t("../array_types").LineLayoutArray,o=t("./line_attributes").members,a=t("../segment").SegmentVector,s=t("../program_configuration").ProgramConfigurationSet,u=t("../index_array_type").TriangleIndexArray,l=t("../load_geometry"),c=t("../extent"),h=t("@mapbox/vector-tile").VectorTileFeature.types,p=t("../../util/web_worker_transfer").register,f=63,d=Math.cos(Math.PI/180*37.5),m=.5,g=Math.pow(2,14)/m,y=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.layoutVertexArray=new i,this.indexArray=new u,this.programConfigurations=new s(o,t.layers,t.zoom),this.segments=new a};y.prototype.populate=function(t,e){for(var n=this,r=0,i=t;r<i.length;r+=1){var o=i[r],a=o.feature,s=o.index,u=o.sourceLayerIndex;if(n.layers[0]._featureFilter({zoom:n.zoom},a)){var c=l(a);n.addFeature(a,c),e.featureIndex.insert(a,c,s,u,n.index)}}},y.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},y.prototype.upload=function(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,o),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.programConfigurations.upload(t)},y.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},y.prototype.addFeature=function(t,e){for(var n=this.layers[0].layout,r=n.get("line-join").evaluate(t),i=n.get("line-cap"),o=n.get("line-miter-limit"),a=n.get("line-round-limit"),s=0,u=e;s<u.length;s+=1)this.addLine(u[s],t,r,i,o,a)},y.prototype.addLine=function(t,e,n,r,i,o){for(var a=this,s="Polygon"===h[e.type],u=t.length;u>=2&&t[u-1].equals(t[u-2]);)u--;for(var l=0;l<u-1&&t[l].equals(t[l+1]);)l++;if(!(u<(s?3:2))){"bevel"===n&&(i=1.05);var p=c/(512*this.overscaling)*15,f=t[l],m=this.segments.prepareSegment(10*u,this.layoutVertexArray,this.indexArray);this.distance=0;var g,y,v,_=r,b=s?"butt":r,x=!0,w=void 0,E=void 0,C=void 0,S=void 0;this.e1=this.e2=this.e3=-1,s&&(S=f.sub(g=t[u-2])._unit()._perp());for(var I=l;I<u;I++)if(!(E=s&&I===u-1?t[l+1]:t[I+1])||!t[I].equals(E)){S&&(C=S),g&&(w=g),g=t[I],S=E?E.sub(g)._unit()._perp():C;var T=(C=C||S).add(S);0===T.x&&0===T.y||T._unit();var k=T.x*S.x+T.y*S.y,O=0!==k?1/k:1/0,P=k<d&&w&&E;if(P&&I>l){var A=g.dist(w);if(A>2*p){var M=g.sub(g.sub(w)._mult(p/A)._round());a.distance+=M.dist(w),a.addCurrentVertex(M,a.distance,C.mult(1),0,0,!1,m),w=M}}var R=w&&E,L=R?n:E?_:b;if(R&&"round"===L&&(O<o?L="miter":O<=2&&(L="fakeround")),"miter"===L&&O>i&&(L="bevel"),"bevel"===L&&(O>2&&(L="flipbevel"),O<i&&(L="miter")),w&&(a.distance+=g.dist(w)),"miter"===L)T._mult(O),a.addCurrentVertex(g,a.distance,T,0,0,!1,m);else if("flipbevel"===L){if(O>100)T=S.clone().mult(-1);else{var N=C.x*S.y-C.y*S.x>0?-1:1,D=O*C.add(S).mag()/C.sub(S).mag();T._perp()._mult(D*N)}a.addCurrentVertex(g,a.distance,T,0,0,!1,m),a.addCurrentVertex(g,a.distance,T.mult(-1),0,0,!1,m)}else if("bevel"===L||"fakeround"===L){var F=C.x*S.y-C.y*S.x>0,z=-Math.sqrt(O*O-1);if(F?(v=0,y=z):(y=0,v=z),x||a.addCurrentVertex(g,a.distance,C,y,v,!1,m),"fakeround"===L){for(var j=Math.floor(8*(.5-(k-.5))),B=void 0,V=0;V<j;V++)B=S.mult((V+1)/(j+1))._add(C)._unit(),a.addPieSliceVertex(g,a.distance,B,F,m);a.addPieSliceVertex(g,a.distance,T,F,m);for(var q=j-1;q>=0;q--)B=C.mult((q+1)/(j+1))._add(S)._unit(),a.addPieSliceVertex(g,a.distance,B,F,m)}E&&a.addCurrentVertex(g,a.distance,S,-y,-v,!1,m)}else"butt"===L?(x||a.addCurrentVertex(g,a.distance,C,0,0,!1,m),E&&a.addCurrentVertex(g,a.distance,S,0,0,!1,m)):"square"===L?(x||(a.addCurrentVertex(g,a.distance,C,1,1,!1,m),a.e1=a.e2=-1),E&&a.addCurrentVertex(g,a.distance,S,-1,-1,!1,m)):"round"===L&&(x||(a.addCurrentVertex(g,a.distance,C,0,0,!1,m),a.addCurrentVertex(g,a.distance,C,1,1,!0,m),a.e1=a.e2=-1),E&&(a.addCurrentVertex(g,a.distance,S,-1,-1,!0,m),a.addCurrentVertex(g,a.distance,S,0,0,!1,m)));if(P&&I<u-1){var U=g.dist(E);if(U>2*p){var G=g.add(E.sub(g)._mult(p/U)._round());a.distance+=G.dist(g),a.addCurrentVertex(G,a.distance,S.mult(1),0,0,!1,m),g=G}}x=!1}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e)}},y.prototype.addCurrentVertex=function(t,e,n,i,o,a,s){var u,l=this.layoutVertexArray,c=this.indexArray;u=n.clone(),i&&u._sub(n.perp()._mult(i)),r(l,t,u,a,!1,i,e),this.e3=s.vertexLength++,this.e1>=0&&this.e2>=0&&(c.emplaceBack(this.e1,this.e2,this.e3),s.primitiveLength++),this.e1=this.e2,this.e2=this.e3,u=n.mult(-1),o&&u._sub(n.perp()._mult(o)),r(l,t,u,a,!0,-o,e),this.e3=s.vertexLength++,this.e1>=0&&this.e2>=0&&(c.emplaceBack(this.e1,this.e2,this.e3),s.primitiveLength++),this.e1=this.e2,this.e2=this.e3,e>g/2&&(this.distance=0,this.addCurrentVertex(t,this.distance,n,i,o,a,s))},y.prototype.addPieSliceVertex=function(t,e,n,i,o){n=n.mult(i?-1:1);var a=this.indexArray;r(this.layoutVertexArray,t,n,!1,i,0,e),this.e3=o.vertexLength++,this.e1>=0&&this.e2>=0&&(a.emplaceBack(this.e1,this.e2,this.e3),o.primitiveLength++),i?this.e2=this.e3:this.e1=this.e3},p("LineBucket",y,{omit:["layers"]}),e.exports=y},{"../../util/web_worker_transfer":278,"../array_types":39,"../extent":53,"../index_array_type":55,"../load_geometry":56,"../program_configuration":58,"../segment":60,"./line_attributes":48,"@mapbox/vector-tile":8}],50:[function(t,e,n){"use strict";var r=t("../../util/struct_array").createLayout,i={symbolLayoutAttributes:r([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"}]),dynamicLayoutAttributes:r([{name:"a_projected_pos",components:3,type:"Float32"}],4),placementOpacityAttributes:r([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),collisionVertexAttributes:r([{name:"a_placed",components:2,type:"Uint8"}],4),collisionBox:r([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"},{type:"Int16",name:"radius"},{type:"Int16",name:"signedDistanceFromAnchor"}]),collisionBoxLayout:r([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),collisionCircleLayout:r([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),placement:r([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"hidden"}]),glyphOffset:r([{type:"Float32",name:"offsetX"}]),lineVertex:r([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}])};e.exports=i},{"../../util/struct_array":271}],51:[function(t,e,n){"use strict";function r(t,e,n,r,i,o,a,s){t.emplaceBack(e,n,Math.round(64*r),Math.round(64*i),o,a,s?s[0]:0,s?s[1]:0)}function i(t,e,n){t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n)}var o=t("./symbol_attributes"),a=o.symbolLayoutAttributes,s=o.collisionVertexAttributes,u=o.collisionBoxLayout,l=o.collisionCircleLayout,c=o.dynamicLayoutAttributes,h=t("../array_types"),p=h.SymbolLayoutArray,f=h.SymbolDynamicLayoutArray,d=h.SymbolOpacityArray,m=h.CollisionBoxLayoutArray,g=h.CollisionCircleLayoutArray,y=h.CollisionVertexArray,v=h.PlacedSymbolArray,_=h.GlyphOffsetArray,b=h.SymbolLineVertexArray,x=t("@mapbox/point-geometry"),w=t("../segment").SegmentVector,E=t("../program_configuration").ProgramConfigurationSet,C=t("../index_array_type"),S=C.TriangleIndexArray,I=C.LineIndexArray,T=t("../../symbol/transform_text"),k=t("../../symbol/mergelines"),O=t("../../util/script_detection"),P=t("../load_geometry"),A=t("@mapbox/vector-tile").VectorTileFeature.types,M=t("../../util/verticalize_punctuation"),R=(t("../../symbol/anchor"),t("../../symbol/symbol_size").getSizeData),L=t("../../util/web_worker_transfer").register,N=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}],D=function(t){this.layoutVertexArray=new p,this.indexArray=new S,this.programConfigurations=t,this.segments=new w,this.dynamicLayoutVertexArray=new f,this.opacityVertexArray=new d,this.placedSymbolArray=new v};D.prototype.upload=function(t,e){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,a.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,e),this.programConfigurations.upload(t),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,c.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,N,!0),this.opacityVertexBuffer.itemSize=1},D.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},L("SymbolBuffers",D);var F=function(t,e,n){this.layoutVertexArray=new t,this.layoutAttributes=e,this.indexArray=new n,this.segments=new w,this.collisionVertexArray=new y};F.prototype.upload=function(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,s.members,!0)},F.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},L("CollisionBuffers",F);var z=function(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.pixelRatio=t.pixelRatio;var e=this.layers[0]._unevaluatedLayout._values;this.textSizeData=R(this.zoom,e["text-size"]),this.iconSizeData=R(this.zoom,e["icon-size"]);var n=this.layers[0].layout;this.sortFeaturesByY=n.get("text-allow-overlap")||n.get("icon-allow-overlap")||n.get("text-ignore-placement")||n.get("icon-ignore-placement")};z.prototype.createArrays=function(){this.text=new D(new E(a.members,this.layers,this.zoom,function(t){return/^text/.test(t)})),this.icon=new D(new E(a.members,this.layers,this.zoom,function(t){return/^icon/.test(t)})),this.collisionBox=new F(m,u.members,I),this.collisionCircle=new F(g,l.members,S),this.glyphOffsetArray=new _,this.lineVertexArray=new b},z.prototype.populate=function(t,e){var n=this.layers[0],r=n.layout,i=r.get("text-font"),o=r.get("text-field"),a=r.get("icon-image"),s=("constant"!==o.value.kind||o.value.value.length>0)&&("constant"!==i.value.kind||i.value.value.length>0),u="constant"!==a.value.kind||a.value.value&&a.value.value.length>0;if(this.features=[],s||u){for(var l=e.iconDependencies,c=e.glyphDependencies,h={zoom:this.zoom},p=0,f=t;p<f.length;p+=1){var d=f[p],m=d.feature,g=d.index,y=d.sourceLayerIndex;if(n._featureFilter(h,m)){var v=void 0;s&&(v=n.getValueAndResolveTokens("text-field",m),v=T(v,n,m));var _=void 0;if(u&&(_=n.getValueAndResolveTokens("icon-image",m)),v||_){var b={text:v,icon:_,index:g,sourceLayerIndex:y,geometry:P(m),properties:m.properties,type:A[m.type]};if(void 0!==m.id&&(b.id=m.id),this.features.push(b),_&&(l[_]=!0),v)for(var x=i.evaluate(m).join(","),w=c[x]=c[x]||{},E="map"===r.get("text-rotation-alignment")&&"line"===r.get("symbol-placement"),C=O.allowsVerticalWritingMode(v),S=0;S<v.length;S++)if(w[v.charCodeAt(S)]=!0,E&&C){var I=M.lookup[v.charAt(S)];I&&(w[I.charCodeAt(0)]=!0)}}}}"line"===r.get("symbol-placement")&&(this.features=k(this.features))}},z.prototype.isEmpty=function(){return 0===this.symbolInstances.length},z.prototype.upload=function(t){this.text.upload(t,this.sortFeaturesByY),this.icon.upload(t,this.sortFeaturesByY),this.collisionBox.upload(t),this.collisionCircle.upload(t)},z.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.collisionBox.destroy(),this.collisionCircle.destroy()},z.prototype.addToLineVertexArray=function(t,e){var n=this.lineVertexArray.length;if(void 0!==t.segment){for(var r=t.dist(e[t.segment+1]),i=t.dist(e[t.segment]),o={},a=t.segment+1;a<e.length;a++)o[a]={x:e[a].x,y:e[a].y,tileUnitDistanceFromAnchor:r},a<e.length-1&&(r+=e[a+1].dist(e[a]));for(var s=t.segment||0;s>=0;s--)o[s]={x:e[s].x,y:e[s].y,tileUnitDistanceFromAnchor:i},s>0&&(i+=e[s-1].dist(e[s]));for(var u=0;u<e.length;u++){var l=o[u];this.lineVertexArray.emplaceBack(l.x,l.y,l.tileUnitDistanceFromAnchor)}}return{lineStartIndex:n,lineLength:this.lineVertexArray.length-n}},z.prototype.addSymbols=function(t,e,n,o,a,s,u,l,c,h){for(var p=t.indexArray,f=t.layoutVertexArray,d=t.dynamicLayoutVertexArray,m=t.segments.prepareSegment(4*e.length,t.layoutVertexArray,t.indexArray),g=this.glyphOffsetArray.length,y=m.vertexLength,v=0,_=e;v<_.length;v+=1){var b=_[v],x=b.tl,w=b.tr,E=b.bl,C=b.br,S=b.tex,I=m.vertexLength,T=b.glyphOffset[1];r(f,l.x,l.y,x.x,T+x.y,S.x,S.y,n),r(f,l.x,l.y,w.x,T+w.y,S.x+S.w,S.y,n),r(f,l.x,l.y,E.x,T+E.y,S.x,S.y+S.h,n),r(f,l.x,l.y,C.x,T+C.y,S.x+S.w,S.y+S.h,n),i(d,l,0),p.emplaceBack(I,I+1,I+2),p.emplaceBack(I+1,I+2,I+3),m.vertexLength+=4,m.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(b.glyphOffset[0])}t.placedSymbolArray.emplaceBack(l.x,l.y,g,this.glyphOffsetArray.length-g,y,c,h,l.segment,n?n[0]:0,n?n[1]:0,o[0],o[1],u,!1),t.programConfigurations.populatePaintArrays(t.layoutVertexArray.length,s)},z.prototype._addCollisionDebugVertex=function(t,e,n,r,i){return e.emplaceBack(0,0),t.emplaceBack(n.x,n.y,r.x,r.y,Math.round(i.x),Math.round(i.y))},z.prototype.addCollisionDebugVertices=function(t,e,n,r,i,o,a,s){var u=i.segments.prepareSegment(4,i.layoutVertexArray,i.indexArray),l=u.vertexLength,c=i.layoutVertexArray,h=i.collisionVertexArray;if(this._addCollisionDebugVertex(c,h,o,a.anchor,new x(t,e)),this._addCollisionDebugVertex(c,h,o,a.anchor,new x(n,e)),this._addCollisionDebugVertex(c,h,o,a.anchor,new x(n,r)),this._addCollisionDebugVertex(c,h,o,a.anchor,new x(t,r)),u.vertexLength+=4,s){var p=i.indexArray;p.emplaceBack(l,l+1,l+2),p.emplaceBack(l,l+2,l+3),u.primitiveLength+=2}else{var f=i.indexArray;f.emplaceBack(l,l+1),f.emplaceBack(l+1,l+2),f.emplaceBack(l+2,l+3),f.emplaceBack(l+3,l),u.primitiveLength+=4}},z.prototype.generateCollisionDebugBuffers=function(){for(var t=this,e=0,n=t.symbolInstances;e<n.length;e+=1){var r=n[e];r.textCollisionFeature={boxStartIndex:r.textBoxStartIndex,boxEndIndex:r.textBoxEndIndex},r.iconCollisionFeature={boxStartIndex:r.iconBoxStartIndex,boxEndIndex:r.iconBoxEndIndex};for(var i=0;i<2;i++){var o=r[0===i?"textCollisionFeature":"iconCollisionFeature"];if(o)for(var a=o.boxStartIndex;a<o.boxEndIndex;a++){var s=t.collisionBoxArray.get(a),u=s.radius>0;t.addCollisionDebugVertices(s.x1,s.y1,s.x2,s.y2,u?t.collisionCircle:t.collisionBox,s.anchorPoint,r,u)}}}},z.prototype.deserializeCollisionBoxes=function(t,e,n,r,i){for(var o={},a=e;a<n;a++){var s=t.get(a);if(0===s.radius){o.textBox={x1:s.x1,y1:s.y1,x2:s.x2,y2:s.y2,anchorPointX:s.anchorPointX,anchorPointY:s.anchorPointY};break}o.textCircles||(o.textCircles=[]),o.textCircles.push(s.anchorPointX,s.anchorPointY,s.radius,s.signedDistanceFromAnchor,1)}for(var u=r;u<i;u++){var l=t.get(u);if(0===l.radius){o.iconBox={x1:l.x1,y1:l.y1,x2:l.x2,y2:l.y2,anchorPointX:l.anchorPointX,anchorPointY:l.anchorPointY};break}}return o},z.prototype.hasTextData=function(){return this.text.segments.get().length>0},z.prototype.hasIconData=function(){return this.icon.segments.get().length>0},z.prototype.hasCollisionBoxData=function(){return this.collisionBox.segments.get().length>0},z.prototype.hasCollisionCircleData=function(){return this.collisionCircle.segments.get().length>0},z.prototype.sortFeatures=function(t){var e=this;if(this.sortFeaturesByY&&this.sortedAngle!==t&&(this.sortedAngle=t,!(this.text.segments.get().length>1||this.icon.segments.get().length>1))){for(var n=[],r=0;r<this.symbolInstances.length;r++)n.push(r);var i=Math.sin(t),o=Math.cos(t);n.sort(function(t,n){var r=e.symbolInstances[t],a=e.symbolInstances[n];return(i*r.anchor.x+o*r.anchor.y|0)-(i*a.anchor.x+o*a.anchor.y|0)||a.featureIndex-r.featureIndex}),this.text.indexArray.clear(),this.icon.indexArray.clear();for(var a=0,s=n;a<s.length;a+=1){for(var u=s[a],l=0,c=e.symbolInstances[u].placedTextSymbolIndices;l<c.length;l+=1)for(var h=e.text.placedSymbolArray.get(c[l]),p=h.vertexStartIndex+4*h.numGlyphs,f=h.vertexStartIndex;f<p;f+=4)e.text.indexArray.emplaceBack(f,f+1,f+2),e.text.indexArray.emplaceBack(f+1,f+2,f+3);var d=e.icon.placedSymbolArray.get(u);if(d.numGlyphs){var m=d.vertexStartIndex;e.icon.indexArray.emplaceBack(m,m+1,m+2),e.icon.indexArray.emplaceBack(m+1,m+2,m+3)}}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},L("SymbolBucket",z,{omit:["layers","collisionBoxArray","features","compareText"],shallow:["symbolInstances"]}),z.MAX_GLYPHS=65535,z.addDynamicAttributes=i,e.exports=z},{"../../symbol/anchor":213,"../../symbol/mergelines":221,"../../symbol/symbol_size":228,"../../symbol/transform_text":229,"../../util/script_detection":269,"../../util/verticalize_punctuation":277,"../../util/web_worker_transfer":278,"../array_types":39,"../index_array_type":55,"../load_geometry":56,"../program_configuration":58,"../segment":60,"./symbol_attributes":50,"@mapbox/point-geometry":4,"@mapbox/vector-tile":8}],52:[function(t,e,n){"use strict";var r=t("../util/image").RGBAImage,i=t("../util/util"),o=t("../util/web_worker_transfer").register,a=function(t,e,n){if(t<=0)throw new RangeError("Level must have positive dimension");this.dim=t,this.border=e,this.stride=this.dim+2*this.border,this.data=n||new Int32Array((this.dim+2*this.border)*(this.dim+2*this.border))};a.prototype.set=function(t,e,n){this.data[this._idx(t,e)]=n+65536},a.prototype.get=function(t,e){return this.data[this._idx(t,e)]-65536},a.prototype._idx=function(t,e){if(t<-this.border||t>=this.dim+this.border||e<-this.border||e>=this.dim+this.border)throw new RangeError("out of range source coordinates for DEM data");return(e+this.border)*this.stride+(t+this.border)},o("Level",a);var s=function(t,e,n){this.uid=t,this.scale=e||1,this.level=n||new a(256,512),this.loaded=!!n};s.prototype.loadFromImage=function(t){if(t.height!==t.width)throw new RangeError("DEM tiles must be square");for(var e=this.level=new a(t.width,t.width/2),n=t.data,r=0;r<e.dim;r++)for(var i=0;i<e.dim;i++){var o=4*(r*e.dim+i);e.set(i,r,this.scale*((256*n[o]*256+256*n[o+1]+n[o+2])/10-1e4))}for(var s=0;s<e.dim;s++)e.set(-1,s,e.get(0,s)),e.set(e.dim,s,e.get(e.dim-1,s)),e.set(s,-1,e.get(s,0)),e.set(s,e.dim,e.get(s,e.dim-1));e.set(-1,-1,e.get(0,0)),e.set(e.dim,-1,e.get(e.dim-1,0)),e.set(-1,e.dim,e.get(0,e.dim-1)),e.set(e.dim,e.dim,e.get(e.dim-1,e.dim-1)),this.loaded=!0},s.prototype.getPixels=function(){return new r({width:this.level.dim+2*this.level.border,height:this.level.dim+2*this.level.border},new Uint8Array(this.level.data.buffer))},s.prototype.backfillBorder=function(t,e,n){var r=this.level,o=t.level;if(r.dim!==o.dim)throw new Error("level mismatch (dem dimension)");var a=e*r.dim,s=e*r.dim+r.dim,u=n*r.dim,l=n*r.dim+r.dim;switch(e){case-1:a=s-1;break;case 1:s=a+1}switch(n){case-1:u=l-1;break;case 1:l=u+1}for(var c=i.clamp(a,-r.border,r.dim+r.border),h=i.clamp(s,-r.border,r.dim+r.border),p=i.clamp(u,-r.border,r.dim+r.border),f=i.clamp(l,-r.border,r.dim+r.border),d=-e*r.dim,m=-n*r.dim,g=p;g<f;g++)for(var y=c;y<h;y++)r.set(y,g,o.get(y+d,g+m))},o("DEMData",s),e.exports={DEMData:s,Level:a}},{"../util/image":263,"../util/util":275,"../util/web_worker_transfer":278}],53:[function(t,e,n){"use strict";e.exports=8192},{}],54:[function(t,e,n){"use strict";function r(t,e){return e-t}t("@mapbox/point-geometry");var i=t("./load_geometry"),o=t("./extent"),a=t("../style-spec/feature_filter"),s=t("grid-index"),u=t("../util/dictionary_coder"),l=t("@mapbox/vector-tile"),c=t("pbf"),h=t("../util/vectortile_to_geojson"),p=t("../util/util").arraysIntersect,f=(t("../source/tile_id"),t("../util/web_worker_transfer").register),d=t("./array_types").FeatureIndexArray,m=function(t,e,n,r){this.tileID=t,this.overscaling=e,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=n||new s(o,16,0),this.featureIndexArray=r||new d};m.prototype.insert=function(t,e,n,r,i){var o=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,r,i);for(var a=0;a<e.length;a++){for(var s=e[a],u=[1/0,1/0,-1/0,-1/0],l=0;l<s.length;l++){var c=s[l];u[0]=Math.min(u[0],c.x),u[1]=Math.min(u[1],c.y),u[2]=Math.max(u[2],c.x),u[3]=Math.max(u[3],c.y)}this.grid.insert(o,u[0],u[1],u[2],u[3])}},m.prototype.query=function(t,e){this.vtLayers||(this.vtLayers=new l.VectorTile(new c(this.rawTileData)).layers,this.sourceLayerCoder=new u(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]));for(var n={},i=t.params||{},s=o/t.tileSize/t.scale,h=a(i.filter),p=t.queryGeometry,f=t.additionalRadius*s,d=1/0,m=1/0,g=-1/0,y=-1/0,v=0;v<p.length;v++)for(var _=p[v],b=0;b<_.length;b++){var x=_[b];d=Math.min(d,x.x),m=Math.min(m,x.y),g=Math.max(g,x.x),y=Math.max(y,x.y)}var w=this.grid.query(d-f,m-f,g+f,y+f);w.sort(r),this.filterMatching(n,w,this.featureIndexArray,p,h,i.layers,e,t.bearing,s);var E=t.collisionIndex?t.collisionIndex.queryRenderedSymbols(p,this.tileID,o/t.tileSize,t.collisionBoxArray,t.sourceID,t.bucketInstanceIds):[];return E.sort(),this.filterMatching(n,E,t.collisionBoxArray,p,h,i.layers,e,t.bearing,s),n},m.prototype.filterMatching=function(t,e,n,r,o,a,s,u,l){for(var c,f=this,d=0;d<e.length;d++){var m=e[d];if(m!==c){c=m;var g=n.get(m),y=f.bucketLayerIDs[g.bucketIndex];if(!a||p(a,y)){var v=f.sourceLayerCoder.decode(g.sourceLayerIndex),_=f.vtLayers[v].feature(g.featureIndex);if(o({zoom:f.tileID.overscaledZ},_))for(var b=null,x=0;x<y.length;x++){var w=y[x];if(!(a&&a.indexOf(w)<0)){var E=s[w];if(E&&("symbol"===E.type||(b||(b=i(_)),E.queryIntersectsFeature(r,_,b,f.z,u,l)))){var C=new h(_,f.z,f.x,f.y);C.layer=E.serialize();var S=t[w];void 0===S&&(S=t[w]=[]),S.push({featureIndex:m,feature:C})}}}}}}},m.prototype.hasLayer=function(t){for(var e=0,n=this.bucketLayerIDs;e<n.length;e+=1)for(var r=0,i=n[e];r<i.length;r+=1)if(t===i[r])return!0;return!1},f("FeatureIndex",m,{omit:["rawTileData","sourceLayerCoder"]}),e.exports=m},{"../source/tile_id":114,"../style-spec/feature_filter":148,"../util/dictionary_coder":257,"../util/util":275,"../util/vectortile_to_geojson":276,"../util/web_worker_transfer":278,"./array_types":39,"./extent":53,"./load_geometry":56,"@mapbox/point-geometry":4,"@mapbox/vector-tile":8,"grid-index":24,pbf:30}],55:[function(t,e,n){"use strict";e.exports={LineIndexArray:t("./array_types").LineIndexArray,TriangleIndexArray:t("./array_types").TriangleIndexArray}},{"./array_types":39}],56:[function(t,e,n){"use strict";var r=t("../util/util"),i=t("./extent"),o={min:-1*Math.pow(2,15),max:Math.pow(2,15)-1};e.exports=function(t){for(var e=i/t.extent,n=t.loadGeometry(),a=0;a<n.length;a++)for(var s=n[a],u=0;u<s.length;u++){var l=s[u];l.x=Math.round(l.x*e),l.y=Math.round(l.y*e),(l.x<o.min||l.x>o.max||l.y<o.min||l.y>o.max)&&r.warnOnce("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return n}},{"../util/util":275,"./extent":53}],57:[function(t,e,n){"use strict";var r=t("../util/struct_array");e.exports=(0,r.createLayout)([{name:"a_pos",type:"Int16",components:2}])},{"../util/struct_array":271}],58:[function(t,e,n){"use strict";function r(t){return[o(255*t.r,255*t.g),o(255*t.b,255*t.a)]}function i(t,e){return{"text-opacity":"opacity","icon-opacity":"opacity","text-color":"fill_color","icon-color":"fill_color","text-halo-color":"halo_color","icon-halo-color":"halo_color","text-halo-blur":"halo_blur","icon-halo-blur":"halo_blur","text-halo-width":"halo_width","icon-halo-width":"halo_width","line-gap-width":"gapwidth"}[t]||t.replace(e+"-","").replace(/-/g,"_")}var o=t("../shaders/encode_attribute").packUint8ToFloat,a=(t("../style-spec/util/color"),t("../util/web_worker_transfer").register),s=t("../style/properties").PossiblyEvaluatedPropertyValue,u=t("./array_types"),l=u.StructArrayLayout1f4,c=u.StructArrayLayout2f8,h=u.StructArrayLayout4f16,p=function(t,e,n){this.value=t,this.name=e,this.type=n,this.statistics={max:-1/0}};p.prototype.defines=function(){return["#define HAS_UNIFORM_u_"+this.name]},p.prototype.populatePaintArray=function(){},p.prototype.upload=function(){},p.prototype.destroy=function(){},p.prototype.setUniforms=function(t,e,n,r){var i=r.constantOr(this.value),o=t.gl;"color"===this.type?o.uniform4f(e.uniforms["u_"+this.name],i.r,i.g,i.b,i.a):o.uniform1f(e.uniforms["u_"+this.name],i)};var f=function(t,e,n){this.expression=t,this.name=e,this.type=n,this.statistics={max:-1/0};var r="color"===n?c:l;this.paintVertexAttributes=[{name:"a_"+e,type:"Float32",components:"color"===n?2:1,offset:0}],this.paintVertexArray=new r};f.prototype.defines=function(){return[]},f.prototype.populatePaintArray=function(t,e){var n=this.paintVertexArray,i=n.length;n.reserve(t);var o=this.expression.evaluate({zoom:0},e);if("color"===this.type)for(var a=r(o),s=i;s<t;s++)n.emplaceBack(a[0],a[1]);else{for(var u=i;u<t;u++)n.emplaceBack(o);this.statistics.max=Math.max(this.statistics.max,o)}},f.prototype.upload=function(t){this.paintVertexArray&&(this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes))},f.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},f.prototype.setUniforms=function(t,e){t.gl.uniform1f(e.uniforms["a_"+this.name+"_t"],0)};var d=function(t,e,n,r,i){this.expression=t,this.name=e,this.type=n,this.useIntegerZoom=r,this.zoom=i,this.statistics={max:-1/0};var o="color"===n?h:c;this.paintVertexAttributes=[{name:"a_"+e,type:"Float32",components:"color"===n?4:2,offset:0}],this.paintVertexArray=new o};d.prototype.defines=function(){return[]},d.prototype.populatePaintArray=function(t,e){var n=this.paintVertexArray,i=n.length;n.reserve(t);var o=this.expression.evaluate({zoom:this.zoom},e),a=this.expression.evaluate({zoom:this.zoom+1},e);if("color"===this.type)for(var s=r(o),u=r(a),l=i;l<t;l++)n.emplaceBack(s[0],s[1],u[0],u[1]);else{for(var c=i;c<t;c++)n.emplaceBack(o,a);this.statistics.max=Math.max(this.statistics.max,o,a)}},d.prototype.upload=function(t){this.paintVertexArray&&(this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes))},d.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},d.prototype.interpolationFactor=function(t){return this.expression.interpolationFactor(this.useIntegerZoom?Math.floor(t):t,this.zoom,this.zoom+1)},d.prototype.setUniforms=function(t,e,n){t.gl.uniform1f(e.uniforms["a_"+this.name+"_t"],this.interpolationFactor(n.zoom))};var m=function(){this.binders={},this.cacheKey="",this._buffers=[]};m.createDynamic=function(t,e,n){var r=new m,o=[];for(var a in t.paint._values)if(n(a)){var u=t.paint.get(a);if(u instanceof s&&u.property.specification["property-function"]){var l=i(a,t.type),c=u.property.specification.type,h=u.property.useIntegerZoom;"constant"===u.value.kind?(r.binders[a]=new p(u.value,l,c),o.push("/u_"+l)):"source"===u.value.kind?(r.binders[a]=new f(u.value,l,c),o.push("/a_"+l)):(r.binders[a]=new d(u.value,l,c,h,e),o.push("/z_"+l))}}return r.cacheKey=o.sort().join(""),r},m.prototype.populatePaintArrays=function(t,e){for(var n in this.binders)this.binders[n].populatePaintArray(t,e)},m.prototype.defines=function(){var t=[];for(var e in this.binders)t.push.apply(t,this.binders[e].defines());return t},m.prototype.setUniforms=function(t,e,n,r){for(var i in this.binders)this.binders[i].setUniforms(t,e,r,n.get(i))},m.prototype.getPaintVertexBuffers=function(){return this._buffers},m.prototype.upload=function(t){var e=this;for(var n in e.binders)e.binders[n].upload(t);var r=[];for(var i in e.binders){var o=e.binders[i];(o instanceof f||o instanceof d)&&o.paintVertexBuffer&&r.push(o.paintVertexBuffer)}this._buffers=r},m.prototype.destroy=function(){for(var t in this.binders)this.binders[t].destroy()};var g=function(t,e,n,r){void 0===r&&(r=function(){return!0}),this.programConfigurations={};for(var i=0,o=e;i<o.length;i+=1){var a=o[i];this.programConfigurations[a.id]=m.createDynamic(a,n,r),this.programConfigurations[a.id].layoutAttributes=t}};g.prototype.populatePaintArrays=function(t,e){for(var n in this.programConfigurations)this.programConfigurations[n].populatePaintArrays(t,e)},g.prototype.get=function(t){return this.programConfigurations[t]},g.prototype.upload=function(t){for(var e in this.programConfigurations)this.programConfigurations[e].upload(t)},g.prototype.destroy=function(){for(var t in this.programConfigurations)this.programConfigurations[t].destroy()},a("ConstantBinder",p),a("SourceExpressionBinder",f),a("CompositeExpressionBinder",d),a("ProgramConfiguration",m,{omit:["_buffers"]}),a("ProgramConfigurationSet",g),e.exports={ProgramConfiguration:m,ProgramConfigurationSet:g}},{"../shaders/encode_attribute":96,"../style-spec/util/color":153,"../style/properties":188,"../util/web_worker_transfer":278,"./array_types":39}],59:[function(t,e,n){"use strict";var r=t("../util/struct_array");e.exports=(0,r.createLayout)([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}])},{"../util/struct_array":271}],60:[function(t,e,n){"use strict";var r=t("../util/util").warnOnce,i=t("../util/web_worker_transfer").register,o=Math.pow(2,16)-1,a=function(t){void 0===t&&(t=[]),this.segments=t};a.prototype.prepareSegment=function(t,n,i){var a=this.segments[this.segments.length-1];return t>o&&r("Max vertices per segment is "+o+": bucket requested "+t),(!a||a.vertexLength+t>e.exports.MAX_VERTEX_ARRAY_LENGTH)&&this.segments.push(a={vertexOffset:n.length,primitiveOffset:i.length,vertexLength:0,primitiveLength:0}),a},a.prototype.get=function(){return this.segments},a.prototype.destroy=function(){for(var t=0,e=this.segments;t<e.length;t+=1){var n=e[t];for(var r in n.vaos)n.vaos[r].destroy()}},i("SegmentVector",a),e.exports={SegmentVector:a,MAX_VERTEX_ARRAY_LENGTH:o}},{"../util/util":275,"../util/web_worker_transfer":278}],61:[function(t,e,n){"use strict";var r=function(t,e,n){this.column=t,this.row=e,this.zoom=n};r.prototype.clone=function(){return new r(this.column,this.row,this.zoom)},r.prototype.zoomTo=function(t){return this.clone()._zoomTo(t)},r.prototype.sub=function(t){return this.clone()._sub(t)},r.prototype._zoomTo=function(t){var e=Math.pow(2,t-this.zoom);return this.column*=e,this.row*=e,this.zoom=t,this},r.prototype._sub=function(t){return t=t.zoomTo(this.zoom),this.column-=t.column,this.row-=t.row,this},e.exports=r},{}],62:[function(t,e,n){"use strict";var r=t("../util/util").wrap,i=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid LngLat object: ("+t+", "+e+")");if(this.lng=+t,this.lat=+e,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};i.prototype.wrap=function(){return new i(r(this.lng,-180,180),this.lat)},i.prototype.toArray=function(){return[this.lng,this.lat]},i.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},i.prototype.toBounds=function(e){var n=360*e/40075017,r=n/Math.cos(Math.PI/180*this.lat);return new(t("./lng_lat_bounds"))(new i(this.lng-r,this.lat-n),new i(this.lng+r,this.lat+n))},i.convert=function(t){if(t instanceof i)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new i(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new i(Number(t.lng),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")},e.exports=i},{"../util/util":275,"./lng_lat_bounds":63}],63:[function(t,e,n){"use strict";var r=t("./lng_lat"),i=function(t,e){t&&(e?this.setSouthWest(t).setNorthEast(e):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))};i.prototype.setNorthEast=function(t){return this._ne=t instanceof r?new r(t.lng,t.lat):r.convert(t),this},i.prototype.setSouthWest=function(t){return this._sw=t instanceof r?new r(t.lng,t.lat):r.convert(t),this},i.prototype.extend=function(t){var e,n,o=this._sw,a=this._ne;if(t instanceof r)e=t,n=t;else{if(!(t instanceof i))return Array.isArray(t)?t.every(Array.isArray)?this.extend(i.convert(t)):this.extend(r.convert(t)):this;if(n=t._ne,!(e=t._sw)||!n)return this}return o||a?(o.lng=Math.min(e.lng,o.lng),o.lat=Math.min(e.lat,o.lat),a.lng=Math.max(n.lng,a.lng),a.lat=Math.max(n.lat,a.lat)):(this._sw=new r(e.lng,e.lat),this._ne=new r(n.lng,n.lat)),this},i.prototype.getCenter=function(){return new r((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},i.prototype.getSouthWest=function(){return this._sw},i.prototype.getNorthEast=function(){return this._ne},i.prototype.getNorthWest=function(){return new r(this.getWest(),this.getNorth())},i.prototype.getSouthEast=function(){return new r(this.getEast(),this.getSouth())},i.prototype.getWest=function(){return this._sw.lng},i.prototype.getSouth=function(){return this._sw.lat},i.prototype.getEast=function(){return this._ne.lng},i.prototype.getNorth=function(){return this._ne.lat},i.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},i.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},i.prototype.isEmpty=function(){return!(this._sw&&this._ne)},i.convert=function(t){return!t||t instanceof i?t:new i(t)},e.exports=i},{"./lng_lat":62}],64:[function(t,e,n){"use strict";var r=t("./lng_lat"),i=t("@mapbox/point-geometry"),o=t("./coordinate"),a=t("../util/util"),s=t("../style-spec/util/interpolate").number,u=t("../util/tile_cover"),l=t("../source/tile_id").UnwrappedTileID,c=t("../data/extent"),h=t("@mapbox/gl-matrix"),p=h.vec4,f=h.mat4,d=h.mat2,m=function(t,e,n){this.tileSize=512,this._renderWorldCopies=void 0===n||n,this._minZoom=t||0,this._maxZoom=e||22,this.latRange=[-85.05113,85.05113],this.width=0,this.height=0,this._center=new r(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._posMatrixCache={},this._alignedPosMatrixCache={}},g={minZoom:{},maxZoom:{},renderWorldCopies:{},worldSize:{},centerPoint:{},size:{},bearing:{},pitch:{},fov:{},zoom:{},center:{},unmodified:{},x:{},y:{},point:{}};m.prototype.clone=function(){var t=new m(this._minZoom,this._maxZoom,this._renderWorldCopies);return t.tileSize=this.tileSize,t.latRange=this.latRange,t.width=this.width,t.height=this.height,t._center=this._center,t.zoom=this.zoom,t.angle=this.angle,t._fov=this._fov,t._pitch=this._pitch,t._unmodified=this._unmodified,t._calcMatrices(),t},g.minZoom.get=function(){return this._minZoom},g.minZoom.set=function(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))},g.maxZoom.get=function(){return this._maxZoom},g.maxZoom.set=function(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))},g.renderWorldCopies.get=function(){return this._renderWorldCopies},g.worldSize.get=function(){return this.tileSize*this.scale},g.centerPoint.get=function(){return this.size._div(2)},g.size.get=function(){return new i(this.width,this.height)},g.bearing.get=function(){return-this.angle/Math.PI*180},g.bearing.set=function(t){var e=-a.wrap(t,-180,180)*Math.PI/180;this.angle!==e&&(this._unmodified=!1,this.angle=e,this._calcMatrices(),this.rotationMatrix=d.create(),d.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},g.pitch.get=function(){return this._pitch/Math.PI*180},g.pitch.set=function(t){var e=a.clamp(t,0,60)/180*Math.PI;this._pitch!==e&&(this._unmodified=!1,this._pitch=e,this._calcMatrices())},g.fov.get=function(){return this._fov/Math.PI*180},g.fov.set=function(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())},g.zoom.get=function(){return this._zoom},g.zoom.set=function(t){var e=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==e&&(this._unmodified=!1,this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom,this._constrain(),this._calcMatrices())},g.center.get=function(){return this._center},g.center.set=function(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._constrain(),this._calcMatrices())},m.prototype.coveringZoomLevel=function(t){return(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize))},m.prototype.getVisibleUnwrappedCoordinates=function(t){var e=this.pointCoordinate(new i(0,0),0),n=this.pointCoordinate(new i(this.width,0),0),r=Math.floor(e.column),o=Math.floor(n.column),a=[new l(0,t)];if(this._renderWorldCopies)for(var s=r;s<=o;s++)0!==s&&a.push(new l(s,t));return a},m.prototype.coveringTiles=function(t){var e=this.coveringZoomLevel(t),n=e;if(void 0!==t.minzoom&&e<t.minzoom)return[];void 0!==t.maxzoom&&e>t.maxzoom&&(e=t.maxzoom);var r=this.pointCoordinate(this.centerPoint,e),o=new i(r.column-.5,r.row-.5),a=[this.pointCoordinate(new i(0,0),e),this.pointCoordinate(new i(this.width,0),e),this.pointCoordinate(new i(this.width,this.height),e),this.pointCoordinate(new i(0,this.height),e)];return u(e,a,t.reparseOverscaled?n:e,this._renderWorldCopies).sort(function(t,e){return o.dist(t.canonical)-o.dist(e.canonical)})},m.prototype.resize=function(t,e){this.width=t,this.height=e,this.pixelsToGLUnits=[2/t,-2/e],this._constrain(),this._calcMatrices()},g.unmodified.get=function(){return this._unmodified},m.prototype.zoomScale=function(t){return Math.pow(2,t)},m.prototype.scaleZoom=function(t){return Math.log(t)/Math.LN2},m.prototype.project=function(t){return new i(this.lngX(t.lng),this.latY(t.lat))},m.prototype.unproject=function(t){return new r(this.xLng(t.x),this.yLat(t.y))},g.x.get=function(){return this.lngX(this.center.lng)},g.y.get=function(){return this.latY(this.center.lat)},g.point.get=function(){return new i(this.x,this.y)},m.prototype.lngX=function(t){return(180+t)*this.worldSize/360},m.prototype.latY=function(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))*this.worldSize/360},m.prototype.xLng=function(t){return 360*t/this.worldSize-180},m.prototype.yLat=function(t){return 360/Math.PI*Math.atan(Math.exp((180-360*t/this.worldSize)*Math.PI/180))-90},m.prototype.setLocationAtPoint=function(t,e){var n=this.pointCoordinate(e)._sub(this.pointCoordinate(this.centerPoint));this.center=this.coordinateLocation(this.locationCoordinate(t)._sub(n)),this._renderWorldCopies&&(this.center=this.center.wrap())},m.prototype.locationPoint=function(t){return this.coordinatePoint(this.locationCoordinate(t))},m.prototype.pointLocation=function(t){return this.coordinateLocation(this.pointCoordinate(t))},m.prototype.locationCoordinate=function(t){return new o(this.lngX(t.lng)/this.tileSize,this.latY(t.lat)/this.tileSize,this.zoom).zoomTo(this.tileZoom)},m.prototype.coordinateLocation=function(t){var e=t.zoomTo(this.zoom);return new r(this.xLng(e.column*this.tileSize),this.yLat(e.row*this.tileSize))},m.prototype.pointCoordinate=function(t,e){void 0===e&&(e=this.tileZoom);var n=[t.x,t.y,0,1],r=[t.x,t.y,1,1];p.transformMat4(n,n,this.pixelMatrixInverse),p.transformMat4(r,r,this.pixelMatrixInverse);var i=n[3],a=r[3],u=n[1]/i,l=r[1]/a,c=n[2]/i,h=r[2]/a,f=c===h?0:(0-c)/(h-c);return new o(s(n[0]/i,r[0]/a,f)/this.tileSize,s(u,l,f)/this.tileSize,this.zoom)._zoomTo(e)},m.prototype.coordinatePoint=function(t){var e=t.zoomTo(this.zoom),n=[e.column*this.tileSize,e.row*this.tileSize,0,1];return p.transformMat4(n,n,this.pixelMatrix),new i(n[0]/n[3],n[1]/n[3])},m.prototype.calculatePosMatrix=function(t,e){void 0===e&&(e=!1);var n=t.key,r=e?this._alignedPosMatrixCache:this._posMatrixCache;if(r[n])return r[n];var i=t.canonical,o=this.worldSize/this.zoomScale(i.z),a=i.x+Math.pow(2,i.z)*t.wrap,s=f.identity(new Float64Array(16));return f.translate(s,s,[a*o,i.y*o,0]),f.scale(s,s,[o/c,o/c,1]),f.multiply(s,e?this.alignedProjMatrix:this.projMatrix,s),r[n]=new Float32Array(s),r[n]},m.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var t,e,n,r,o=-90,a=90,s=-180,u=180,l=this.size,c=this._unmodified;if(this.latRange){var h=this.latRange;o=this.latY(h[1]),t=(a=this.latY(h[0]))-o<l.y?l.y/(a-o):0}if(this.lngRange){var p=this.lngRange;s=this.lngX(p[0]),e=(u=this.lngX(p[1]))-s<l.x?l.x/(u-s):0}var f=Math.max(e||0,t||0);if(f)return this.center=this.unproject(new i(e?(u+s)/2:this.x,t?(a+o)/2:this.y)),this.zoom+=this.scaleZoom(f),this._unmodified=c,void(this._constraining=!1);if(this.latRange){var d=this.y,m=l.y/2;d-m<o&&(r=o+m),d+m>a&&(r=a-m)}if(this.lngRange){var g=this.x,y=l.x/2;g-y<s&&(n=s+y),g+y>u&&(n=u-y)}void 0===n&&void 0===r||(this.center=this.unproject(new i(void 0!==n?n:this.x,void 0!==r?r:this.y))),this._unmodified=c,this._constraining=!1}},m.prototype._calcMatrices=function(){if(this.height){this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var t=this._fov/2,e=Math.PI/2+this._pitch,n=Math.sin(t)*this.cameraToCenterDistance/Math.sin(Math.PI-e-t),r=this.x,i=this.y,o=1.01*(Math.cos(Math.PI/2-this._pitch)*n+this.cameraToCenterDistance),a=new Float64Array(16);f.perspective(a,this._fov,this.width/this.height,1,o),f.scale(a,a,[1,-1,1]),f.translate(a,a,[0,0,-this.cameraToCenterDistance]),f.rotateX(a,a,this._pitch),f.rotateZ(a,a,this.angle),f.translate(a,a,[-r,-i,0]);var s=this.worldSize/(2*Math.PI*6378137*Math.abs(Math.cos(this.center.lat*(Math.PI/180))));f.scale(a,a,[1,1,s,1]),this.projMatrix=a;var u=this.width%2/2,l=this.height%2/2,c=Math.cos(this.angle),h=Math.sin(this.angle),p=r-Math.round(r)+c*u+h*l,d=i-Math.round(i)+c*l+h*u,m=new Float64Array(a);if(f.translate(m,m,[p>.5?p-1:p,d>.5?d-1:d,0]),this.alignedProjMatrix=m,a=f.create(),f.scale(a,a,[this.width/2,-this.height/2,1]),f.translate(a,a,[1,-1,0]),this.pixelMatrix=f.multiply(new Float64Array(16),a,this.projMatrix),!(a=f.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=a,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Object.defineProperties(m.prototype,g),e.exports=m},{"../data/extent":53,"../source/tile_id":114,"../style-spec/util/interpolate":158,"../util/tile_cover":273,"../util/util":275,"./coordinate":61,"./lng_lat":62,"@mapbox/gl-matrix":2,"@mapbox/point-geometry":4}],65:[function(t,e,n){"use strict";var r=t("../style-spec/util/color"),i=function(t,e,n){this.blendFunction=t,this.blendColor=e,this.mask=n};i.disabled=new i(i.Replace=[1,0],r.transparent,[!1,!1,!1,!1]),i.unblended=new i(i.Replace,r.transparent,[!0,!0,!0,!0]),i.alphaBlended=new i([1,771],r.transparent,[!0,!0,!0,!0]),e.exports=i},{"../style-spec/util/color":153}],66:[function(t,e,n){"use strict";var r=t("./index_buffer"),i=t("./vertex_buffer"),o=t("./framebuffer"),a=(t("./depth_mode"),t("./stencil_mode"),t("./color_mode")),s=t("../util/util"),u=t("./value"),l=u.ClearColor,c=u.ClearDepth,h=u.ClearStencil,p=u.ColorMask,f=u.DepthMask,d=u.StencilMask,m=u.StencilFunc,g=u.StencilOp,y=u.StencilTest,v=u.DepthRange,_=u.DepthTest,b=u.DepthFunc,x=u.Blend,w=u.BlendFunc,E=u.BlendColor,C=u.Program,S=u.LineWidth,I=u.ActiveTextureUnit,T=u.Viewport,k=u.BindFramebuffer,O=u.BindRenderbuffer,P=u.BindTexture,A=u.BindVertexBuffer,M=u.BindElementBuffer,R=u.BindVertexArrayOES,L=u.PixelStoreUnpack,N=u.PixelStoreUnpackPremultiplyAlpha,D=function(t){this.gl=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.lineWidthRange=t.getParameter(t.ALIASED_LINE_WIDTH_RANGE),this.clearColor=new l(this),this.clearDepth=new c(this),this.clearStencil=new h(this),this.colorMask=new p(this),this.depthMask=new f(this),this.stencilMask=new d(this),this.stencilFunc=new m(this),this.stencilOp=new g(this),this.stencilTest=new y(this),this.depthRange=new v(this),this.depthTest=new _(this),this.depthFunc=new b(this),this.blend=new x(this),this.blendFunc=new w(this),this.blendColor=new E(this),this.program=new C(this),this.lineWidth=new S(this),this.activeTexture=new I(this),this.viewport=new T(this),this.bindFramebuffer=new k(this),this.bindRenderbuffer=new O(this),this.bindTexture=new P(this),this.bindVertexBuffer=new A(this),this.bindElementBuffer=new M(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new R(this),this.pixelStoreUnpack=new L(this),this.pixelStoreUnpackPremultiplyAlpha=new N(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=t.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&t.getExtension("OES_texture_half_float_linear")};D.prototype.createIndexBuffer=function(t,e){return new r(this,t,e)},D.prototype.createVertexBuffer=function(t,e,n){return new i(this,t,e,n)},D.prototype.createRenderbuffer=function(t,e,n){var r=this.gl,i=r.createRenderbuffer();return this.bindRenderbuffer.set(i),r.renderbufferStorage(r.RENDERBUFFER,t,e,n),this.bindRenderbuffer.set(null),i},D.prototype.createFramebuffer=function(t,e){return new o(this,t,e)},D.prototype.clear=function(t){var e=t.color,n=t.depth,r=this.gl,i=0;e&&(i|=r.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),void 0!==n&&(i|=r.DEPTH_BUFFER_BIT,this.clearDepth.set(n),this.depthMask.set(!0)),r.clear(i)},D.prototype.setDepthMode=function(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)},D.prototype.setStencilMode=function(t){t.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)},D.prototype.setColorMode=function(t){s.deepEqual(t.blendFunction,a.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(t.blendFunction),this.blendColor.set(t.blendColor)),this.colorMask.set(t.mask)},e.exports=D},{"../util/util":275,"./color_mode":65,"./depth_mode":67,"./framebuffer":68,"./index_buffer":69,"./stencil_mode":70,"./value":71,"./vertex_buffer":72}],67:[function(t,e,n){"use strict";var r=function(t,e,n){this.func=t,this.mask=e,this.range=n};r.ReadOnly=!1,r.ReadWrite=!0,r.disabled=new r(519,r.ReadOnly,[0,1]),e.exports=r},{}],68:[function(t,e,n){"use strict";var r=t("./value"),i=r.ColorAttachment,o=r.DepthAttachment,a=function(t,e,n){this.context=t,this.width=e,this.height=n;var r=this.framebuffer=t.gl.createFramebuffer();this.colorAttachment=new i(t,r),this.depthAttachment=new o(t,r)};a.prototype.destroy=function(){var t=this.context.gl,e=this.colorAttachment.get();e&&t.deleteTexture(e);var n=this.depthAttachment.get();n&&t.deleteRenderbuffer(n),t.deleteFramebuffer(this.framebuffer)},e.exports=a},{"./value":71}],69:[function(t,e,n){"use strict";var r=function(t,e,n){this.context=t;var r=t.gl;this.buffer=r.createBuffer(),this.dynamicDraw=Boolean(n),this.unbindVAO(),t.bindElementBuffer.set(this.buffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};r.prototype.unbindVAO=function(){this.context.extVertexArrayObject&&this.context.bindVertexArrayOES.set(null)},r.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},r.prototype.updateData=function(t){var e=this.context.gl;this.unbindVAO(),this.bind(),e.bufferSubData(e.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)},r.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)},e.exports=r},{}],70:[function(t,e,n){"use strict";var r=function(t,e,n,r,i,o){this.test=t,this.ref=e,this.mask=n,this.fail=r,this.depthFail=i,this.pass=o};r.disabled=new r({func:519,mask:0},0,0,7680,7680,7680),e.exports=r},{}],71:[function(t,e,n){"use strict";var r=t("../style-spec/util/color"),i=t("../util/util"),o=function(t){this.context=t,this.current=r.transparent};o.prototype.get=function(){return this.current},o.prototype.set=function(t){var e=this.current;t.r===e.r&&t.g===e.g&&t.b===e.b&&t.a===e.a||(this.context.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t)};var a=function(t){this.context=t,this.current=1};a.prototype.get=function(){return this.current},a.prototype.set=function(t){this.current!==t&&(this.context.gl.clearDepth(t),this.current=t)};var s=function(t){this.context=t,this.current=0};s.prototype.get=function(){return this.current},s.prototype.set=function(t){this.current!==t&&(this.context.gl.clearStencil(t),this.current=t)};var u=function(t){this.context=t,this.current=[!0,!0,!0,!0]};u.prototype.get=function(){return this.current},u.prototype.set=function(t){var e=this.current;t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]||(this.context.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t)};var l=function(t){this.context=t,this.current=!0};l.prototype.get=function(){return this.current},l.prototype.set=function(t){this.current!==t&&(this.context.gl.depthMask(t),this.current=t)};var c=function(t){this.context=t,this.current=255};c.prototype.get=function(){return this.current},c.prototype.set=function(t){this.current!==t&&(this.context.gl.stencilMask(t),this.current=t)};var h=function(t){this.context=t,this.current={func:t.gl.ALWAYS,ref:0,mask:255}};h.prototype.get=function(){return this.current},h.prototype.set=function(t){var e=this.current;t.func===e.func&&t.ref===e.ref&&t.mask===e.mask||(this.context.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t)};var p=function(t){this.context=t;var e=this.context.gl;this.current=[e.KEEP,e.KEEP,e.KEEP]};p.prototype.get=function(){return this.current},p.prototype.set=function(t){var e=this.current;t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]||(this.context.gl.stencilOp(t[0],t[1],t[2]),this.current=t)};var f=function(t){this.context=t,this.current=!1};f.prototype.get=function(){return this.current},f.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;t?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),this.current=t}};var d=function(t){this.context=t,this.current=[0,1]};d.prototype.get=function(){return this.current},d.prototype.set=function(t){var e=this.current;t[0]===e[0]&&t[1]===e[1]||(this.context.gl.depthRange(t[0],t[1]),this.current=t)};var m=function(t){this.context=t,this.current=!1};m.prototype.get=function(){return this.current},m.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;t?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),this.current=t}};var g=function(t){this.context=t,this.current=t.gl.LESS};g.prototype.get=function(){return this.current},g.prototype.set=function(t){this.current!==t&&(this.context.gl.depthFunc(t),this.current=t)};var y=function(t){this.context=t,this.current=!1};y.prototype.get=function(){return this.current},y.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;t?e.enable(e.BLEND):e.disable(e.BLEND),this.current=t}};var v=function(t){this.context=t;var e=this.context.gl;this.current=[e.ONE,e.ZERO]};v.prototype.get=function(){return this.current},v.prototype.set=function(t){var e=this.current;t[0]===e[0]&&t[1]===e[1]||(this.context.gl.blendFunc(t[0],t[1]),this.current=t)};var _=function(t){this.context=t,this.current=r.transparent};_.prototype.get=function(){return this.current},_.prototype.set=function(t){var e=this.current;t.r===e.r&&t.g===e.g&&t.b===e.b&&t.a===e.a||(this.context.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t)};var b=function(t){this.context=t,this.current=null};b.prototype.get=function(){return this.current},b.prototype.set=function(t){this.current!==t&&(this.context.gl.useProgram(t),this.current=t)};var x=function(t){this.context=t,this.current=1};x.prototype.get=function(){return this.current},x.prototype.set=function(t){var e=this.context.lineWidthRange,n=i.clamp(t,e[0],e[1]);this.current!==n&&(this.context.gl.lineWidth(n),this.current=t)};var w=function(t){this.context=t,this.current=t.gl.TEXTURE0};w.prototype.get=function(){return this.current},w.prototype.set=function(t){this.current!==t&&(this.context.gl.activeTexture(t),this.current=t)};var E=function(t){this.context=t;var e=this.context.gl;this.current=[0,0,e.drawingBufferWidth,e.drawingBufferHeight]};E.prototype.get=function(){return this.current},E.prototype.set=function(t){var e=this.current;t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]||(this.context.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t)};var C=function(t){this.context=t,this.current=null};C.prototype.get=function(){return this.current},C.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;e.bindFramebuffer(e.FRAMEBUFFER,t),this.current=t}};var S=function(t){this.context=t,this.current=null};S.prototype.get=function(){return this.current},S.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;e.bindRenderbuffer(e.RENDERBUFFER,t),this.current=t}};var I=function(t){this.context=t,this.current=null};I.prototype.get=function(){return this.current},I.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;e.bindTexture(e.TEXTURE_2D,t),this.current=t}};var T=function(t){this.context=t,this.current=null};T.prototype.get=function(){return this.current},T.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;e.bindBuffer(e.ARRAY_BUFFER,t),this.current=t}};var k=function(t){this.context=t,this.current=null};k.prototype.get=function(){return this.current},k.prototype.set=function(t){var e=this.context.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),this.current=t};var O=function(t){this.context=t,this.current=null};O.prototype.get=function(){return this.current},O.prototype.set=function(t){this.current!==t&&this.context.extVertexArrayObject&&(this.context.extVertexArrayObject.bindVertexArrayOES(t),this.current=t)};var P=function(t){this.context=t,this.current=4};P.prototype.get=function(){return this.current},P.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;e.pixelStorei(e.UNPACK_ALIGNMENT,t),this.current=t}};var A=function(t){this.context=t,this.current=!1};A.prototype.get=function(){return this.current},A.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t}};var M=function(t,e){this.context=t,this.current=null,this.parent=e};M.prototype.get=function(){return this.current};var R=function(t){function e(e,n){t.call(this,e,n),this.dirty=!1}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){if(this.dirty||this.current!==t){var e=this.context.gl;this.context.bindFramebuffer.set(this.parent),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}},e.prototype.setDirty=function(){this.dirty=!0},e}(M),L=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;this.context.bindFramebuffer.set(this.parent),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t),this.current=t}},e}(M);e.exports={ClearColor:o,ClearDepth:a,ClearStencil:s,ColorMask:u,DepthMask:l,StencilMask:c,StencilFunc:h,StencilOp:p,StencilTest:f,DepthRange:d,DepthTest:m,DepthFunc:g,Blend:y,BlendFunc:v,BlendColor:_,Program:b,LineWidth:x,ActiveTextureUnit:w,Viewport:E,BindFramebuffer:C,BindRenderbuffer:S,BindTexture:I,BindVertexBuffer:T,BindElementBuffer:k,BindVertexArrayOES:O,PixelStoreUnpack:P,PixelStoreUnpackPremultiplyAlpha:A,ColorAttachment:R,DepthAttachment:L}},{"../style-spec/util/color":153,"../util/util":275}],72:[function(t,e,n){"use strict";var r={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},i=function(t,e,n,r){this.length=e.length,this.attributes=n,this.itemSize=e.bytesPerElement,this.dynamicDraw=r,this.context=t;var i=t.gl;this.buffer=i.createBuffer(),t.bindVertexBuffer.set(this.buffer),i.bufferData(i.ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};i.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},i.prototype.updateData=function(t){var e=this.context.gl;this.bind(),e.bufferSubData(e.ARRAY_BUFFER,0,t.arrayBuffer)},i.prototype.enableAttributes=function(t,e){for(var n=0;n<this.attributes.length;n++){var r=e.attributes[this.attributes[n].name];void 0!==r&&t.enableVertexAttribArray(r)}},i.prototype.setVertexAttribPointers=function(t,e,n){for(var i=this,o=0;o<this.attributes.length;o++){var a=i.attributes[o],s=e.attributes[a.name];void 0!==s&&t.vertexAttribPointer(s,a.components,t[r[a.type]],!1,i.itemSize,a.offset+i.itemSize*(n||0))}},i.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)},e.exports=i},{}],73:[function(t,e,n){"use strict";var r=t("@mapbox/mapbox-gl-supported"),i=t("./util/browser"),o=t("../package.json").version,a=t("./ui/map"),s=t("./ui/control/navigation_control"),u=t("./ui/control/geolocate_control"),l=t("./ui/control/attribution_control"),c=t("./ui/control/scale_control"),h=t("./ui/control/fullscreen_control"),p=t("./ui/popup"),f=t("./ui/marker"),d=t("./style/style"),m=t("./geo/lng_lat"),g=t("./geo/lng_lat_bounds"),y=t("@mapbox/point-geometry"),v=t("./util/evented"),_=t("./util/config"),b=t("./source/rtl_text_plugin");e.exports={version:o,supported:r,workerCount:Math.max(Math.floor(i.hardwareConcurrency/2),1),setRTLTextPlugin:b.setRTLTextPlugin,Map:a,NavigationControl:s,GeolocateControl:u,AttributionControl:l,ScaleControl:c,FullscreenControl:h,Popup:p,Marker:f,Style:d,LngLat:m,LngLatBounds:g,Point:y,Evented:v,config:_,get accessToken(){return _.ACCESS_TOKEN},set accessToken(t){_.ACCESS_TOKEN=t}}},{"../package.json":38,"./geo/lng_lat":62,"./geo/lng_lat_bounds":63,"./source/rtl_text_plugin":109,"./style/style":190,"./ui/control/attribution_control":232,"./ui/control/fullscreen_control":233,"./ui/control/geolocate_control":234,"./ui/control/navigation_control":236,"./ui/control/scale_control":237,"./ui/map":247,"./ui/marker":248,"./ui/popup":249,"./util/browser":252,"./util/config":256,"./util/evented":260,"@mapbox/mapbox-gl-supported":3,"@mapbox/point-geometry":4}],74:[function(t,e,n){"use strict";var r=t("./pattern"),i=t("../gl/stencil_mode"),o=t("../gl/depth_mode");e.exports=function(t,e,n){var a=n.paint.get("background-color"),s=n.paint.get("background-opacity");if(0!==s){var u=t.context,l=u.gl,c=t.transform,h=c.tileSize,p=n.paint.get("background-pattern"),f=p||1!==a.a||1!==s?"translucent":"opaque";if(t.renderPass===f){var d;if(u.setStencilMode(i.disabled),u.setDepthMode(t.depthModeForSublayer(0,"opaque"===f?o.ReadWrite:o.ReadOnly)),u.setColorMode(t.colorModeForRenderPass()),p){if(r.isPatternMissing(p,t))return;d=t.useProgram("backgroundPattern"),r.prepare(p,t,d),t.tileExtentPatternVAO.bind(u,d,t.tileExtentBuffer,[])}else d=t.useProgram("background"),l.uniform4fv(d.uniforms.u_color,[a.r,a.g,a.b,a.a]),t.tileExtentVAO.bind(u,d,t.tileExtentBuffer,[]);l.uniform1f(d.uniforms.u_opacity,s);for(var m=0,g=c.coveringTiles({tileSize:h});m<g.length;m+=1){var y=g[m];p&&r.setTile({tileID:y,tileSize:h},t,d),l.uniformMatrix4fv(d.uniforms.u_matrix,!1,t.transform.calculatePosMatrix(y.toUnwrapped())),l.drawArrays(l.TRIANGLE_STRIP,0,t.tileExtentBuffer.length)}}}}},{"../gl/depth_mode":67,"../gl/stencil_mode":70,"./pattern":91}],75:[function(t,e,n){"use strict";var r=t("../source/pixels_to_tile_units"),i=t("../gl/stencil_mode"),o=t("../gl/depth_mode");e.exports=function(t,e,n,a){if("translucent"===t.renderPass){var s=n.paint.get("circle-opacity"),u=n.paint.get("circle-stroke-width"),l=n.paint.get("circle-stroke-opacity");if(0!==s.constantOr(1)||0!==u.constantOr(1)&&0!==l.constantOr(1)){var c=t.context,h=c.gl;c.setDepthMode(t.depthModeForSublayer(0,o.ReadOnly)),c.setStencilMode(i.disabled),c.setColorMode(t.colorModeForRenderPass());for(var p=!0,f=0;f<a.length;f++){var d=a[f],m=e.getTile(d),g=m.getBucket(n);if(g){var y=t.context.program.get(),v=g.programConfigurations.get(n.id),_=t.useProgram("circle",v);if((p||_.program!==y)&&(v.setUniforms(c,_,n.paint,{zoom:t.transform.zoom}),p=!1),h.uniform1f(_.uniforms.u_camera_to_center_distance,t.transform.cameraToCenterDistance),h.uniform1i(_.uniforms.u_scale_with_map,"map"===n.paint.get("circle-pitch-scale")?1:0),"map"===n.paint.get("circle-pitch-alignment")){h.uniform1i(_.uniforms.u_pitch_with_map,1);var b=r(m,1,t.transform.zoom);h.uniform2f(_.uniforms.u_extrude_scale,b,b)}else h.uniform1i(_.uniforms.u_pitch_with_map,0),h.uniform2fv(_.uniforms.u_extrude_scale,t.transform.pixelsToGLUnits);h.uniformMatrix4fv(_.uniforms.u_matrix,!1,t.translatePosMatrix(d.posMatrix,m,n.paint.get("circle-translate"),n.paint.get("circle-translate-anchor"))),_.draw(c,h.TRIANGLES,n.id,g.layoutVertexBuffer,g.indexBuffer,g.segments,v)}}}}}},{"../gl/depth_mode":67,"../gl/stencil_mode":70,"../source/pixels_to_tile_units":104}],76:[function(t,e,n){"use strict";function r(t,e,n,r,s){var u=t.context,l=u.gl,c=t.useProgram(s?"collisionCircle":"collisionBox");u.setDepthMode(o.disabled),u.setStencilMode(a.disabled),u.setColorMode(t.colorModeForRenderPass());for(var h=0;h<r.length;h++){var p=r[h],f=e.getTile(p),d=f.getBucket(n);if(d){var m=s?d.collisionCircle:d.collisionBox;if(m){l.uniformMatrix4fv(c.uniforms.u_matrix,!1,p.posMatrix),s||u.lineWidth.set(1),l.uniform1f(c.uniforms.u_camera_to_center_distance,t.transform.cameraToCenterDistance);var g=i(f,1,t.transform.zoom),y=Math.pow(2,t.transform.zoom-f.tileID.overscaledZ);l.uniform1f(c.uniforms.u_pixels_to_tile_units,g),l.uniform2f(c.uniforms.u_extrude_scale,t.transform.pixelsToGLUnits[0]/(g*y),t.transform.pixelsToGLUnits[1]/(g*y)),c.draw(u,s?l.TRIANGLES:l.LINES,n.id,m.layoutVertexBuffer,m.indexBuffer,m.segments,null,m.collisionVertexBuffer,null)}}}}var i=t("../source/pixels_to_tile_units"),o=t("../gl/depth_mode"),a=t("../gl/stencil_mode");e.exports=function(t,e,n,i){r(t,e,n,i,!1),r(t,e,n,i,!0)}},{"../gl/depth_mode":67,"../gl/stencil_mode":70,"../source/pixels_to_tile_units":104}],77:[function(t,e,n){"use strict";function r(t,e,n){var r=t.context,f=r.gl;r.lineWidth.set(1*i.devicePixelRatio);var d=n.posMatrix,m=t.useProgram("debug");r.setDepthMode(c.disabled),r.setStencilMode(h.disabled),r.setColorMode(t.colorModeForRenderPass()),f.uniformMatrix4fv(m.uniforms.u_matrix,!1,d),f.uniform4f(m.uniforms.u_color,1,0,0,1),t.debugVAO.bind(r,m,t.debugBuffer,[]),f.drawArrays(f.LINE_STRIP,0,t.debugBuffer.length);for(var g=function(t,e,n,r){r=r||1;var i,o,a,s,u,l,c,h,f=[];for(i=0,o=t.length;i<o;i++)if(u=p[t[i]]){for(h=null,a=0,s=u[1].length;a<s;a+=2)-1===u[1][a]&&-1===u[1][a+1]?h=null:(l=e+u[1][a]*r,c=200-u[1][a+1]*r,h&&f.push(h.x,h.y,l,c),h={x:l,y:c});e+=u[0]*r}return f}(n.toString(),50,0,5),y=new u,v=0;v<g.length;v+=2)y.emplaceBack(g[v],g[v+1]);var _=r.createVertexBuffer(y,l.members);(new s).bind(r,m,_,[]),f.uniform4f(m.uniforms.u_color,1,1,1,1);for(var b=e.getTile(n).tileSize,x=a/(Math.pow(2,t.transform.zoom-n.overscaledZ)*b),w=[[-1,-1],[-1,1],[1,-1],[1,1]],E=0;E<w.length;E++){var C=w[E];f.uniformMatrix4fv(m.uniforms.u_matrix,!1,o.translate([],d,[x*C[0],x*C[1],0])),f.drawArrays(f.LINES,0,_.length)}f.uniform4f(m.uniforms.u_color,0,0,0,1),f.uniformMatrix4fv(m.uniforms.u_matrix,!1,d),f.drawArrays(f.LINES,0,_.length)}var i=t("../util/browser"),o=t("@mapbox/gl-matrix").mat4,a=t("../data/extent"),s=t("./vertex_array_object"),u=t("../data/array_types").PosArray,l=t("../data/pos_attributes"),c=t("../gl/depth_mode"),h=t("../gl/stencil_mode");e.exports=function(t,e,n){for(var i=0;i<n.length;i++)r(t,e,n[i])};var p={" ":[16,[]],"!":[10,[5,21,5,7,-1,-1,5,2,4,1,5,0,6,1,5,2]],'"':[16,[4,21,4,14,-1,-1,12,21,12,14]],"#":[21,[11,25,4,-7,-1,-1,17,25,10,-7,-1,-1,4,12,18,12,-1,-1,3,6,17,6]],$:[20,[8,25,8,-4,-1,-1,12,25,12,-4,-1,-1,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],"%":[24,[21,21,3,0,-1,-1,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,-1,-1,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7]],"&":[26,[23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2]],"'":[10,[5,19,4,20,5,21,6,20,6,18,5,16,4,15]],"(":[14,[11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7]],")":[14,[3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7]],"*":[16,[8,21,8,9,-1,-1,3,18,13,12,-1,-1,13,18,3,12]],"+":[26,[13,18,13,0,-1,-1,4,9,22,9]],",":[10,[6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"-":[26,[4,9,22,9]],".":[10,[5,2,4,1,5,0,6,1,5,2]],"/":[22,[20,25,2,-7]],0:[20,[9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21]],1:[20,[6,17,8,18,11,21,11,0]],2:[20,[4,16,4,17,5,19,6,20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0]],3:[20,[5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],4:[20,[13,21,3,7,18,7,-1,-1,13,21,13,0]],5:[20,[15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],6:[20,[16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7]],7:[20,[17,21,7,0,-1,-1,3,21,17,21]],8:[20,[8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21]],9:[20,[16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3]],":":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,5,2,4,1,5,0,6,1,5,2]],";":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"<":[24,[20,18,4,9,20,0]],"=":[26,[4,12,22,12,-1,-1,4,6,22,6]],">":[24,[4,18,20,9,4,0]],"?":[18,[3,16,3,17,4,19,5,20,7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,-1,-1,9,2,8,1,9,0,10,1,9,2]],"@":[27,[18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,-1,-1,12,16,10,14,9,11,9,8,10,6,11,5,-1,-1,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,-1,-1,19,16,18,8,18,6,19,5]],A:[18,[9,21,1,0,-1,-1,9,21,17,0,-1,-1,4,7,14,7]],B:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,-1,-1,4,11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0]],C:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5]],D:[21,[4,21,4,0,-1,-1,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0]],E:[19,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11,-1,-1,4,0,17,0]],F:[18,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11]],G:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,-1,-1,13,8,18,8]],H:[22,[4,21,4,0,-1,-1,18,21,18,0,-1,-1,4,11,18,11]],I:[8,[4,21,4,0]],J:[16,[12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7]],K:[21,[4,21,4,0,-1,-1,18,21,4,7,-1,-1,9,12,18,0]],L:[17,[4,21,4,0,-1,-1,4,0,16,0]],M:[24,[4,21,4,0,-1,-1,4,21,12,0,-1,-1,20,21,12,0,-1,-1,20,21,20,0]],N:[22,[4,21,4,0,-1,-1,4,21,18,0,-1,-1,18,21,18,0]],O:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21]],P:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10]],Q:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,-1,-1,12,4,18,-2]],R:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,-1,-1,11,11,18,0]],S:[20,[17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],T:[16,[8,21,8,0,-1,-1,1,21,15,21]],U:[22,[4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21]],V:[18,[1,21,9,0,-1,-1,17,21,9,0]],W:[24,[2,21,7,0,-1,-1,12,21,7,0,-1,-1,12,21,17,0,-1,-1,22,21,17,0]],X:[20,[3,21,17,0,-1,-1,17,21,3,0]],Y:[18,[1,21,9,11,9,0,-1,-1,17,21,9,11]],Z:[20,[17,21,3,0,-1,-1,3,21,17,21,-1,-1,3,0,17,0]],"[":[14,[4,25,4,-7,-1,-1,5,25,5,-7,-1,-1,4,25,11,25,-1,-1,4,-7,11,-7]],"\\":[14,[0,21,14,-3]],"]":[14,[9,25,9,-7,-1,-1,10,25,10,-7,-1,-1,3,25,10,25,-1,-1,3,-7,10,-7]],"^":[16,[6,15,8,18,10,15,-1,-1,3,12,8,17,13,12,-1,-1,8,17,8,0]],_:[16,[0,-2,16,-2]],"`":[10,[6,21,5,20,4,18,4,16,5,15,6,16,5,17]],a:[19,[15,14,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],b:[19,[4,21,4,0,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],c:[18,[15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],d:[19,[15,21,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],e:[18,[3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],f:[12,[10,21,8,21,6,20,5,17,5,0,-1,-1,2,14,9,14]],g:[19,[15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],h:[19,[4,21,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],i:[8,[3,21,4,20,5,21,4,22,3,21,-1,-1,4,14,4,0]],j:[10,[5,21,6,20,7,21,6,22,5,21,-1,-1,6,14,6,-3,5,-6,3,-7,1,-7]],k:[17,[4,21,4,0,-1,-1,14,14,4,4,-1,-1,8,8,15,0]],l:[8,[4,21,4,0]],m:[30,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0,-1,-1,15,10,18,13,20,14,23,14,25,13,26,10,26,0]],n:[19,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],o:[19,[8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14]],p:[19,[4,14,4,-7,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],q:[19,[15,14,15,-7,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],r:[13,[4,14,4,0,-1,-1,4,8,5,11,7,13,9,14,12,14]],s:[17,[14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3]],t:[12,[5,21,5,4,6,1,8,0,10,0,-1,-1,2,14,9,14]],u:[19,[4,14,4,4,5,1,7,0,10,0,12,1,15,4,-1,-1,15,14,15,0]],v:[16,[2,14,8,0,-1,-1,14,14,8,0]],w:[22,[3,14,7,0,-1,-1,11,14,7,0,-1,-1,11,14,15,0,-1,-1,19,14,15,0]],x:[17,[3,14,14,0,-1,-1,14,14,3,0]],y:[16,[2,14,8,0,-1,-1,14,14,8,0,6,-4,4,-6,2,-7,1,-7]],z:[17,[14,14,3,0,-1,-1,3,14,14,14,-1,-1,3,0,14,0]],"{":[14,[9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,-1,-1,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,-1,-1,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7]],"|":[8,[4,25,4,-7]],"}":[14,[5,25,7,24,8,23,9,21,9,19,8,17,7,16,6,14,6,12,8,10,-1,-1,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,-1,-1,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7]],"~":[24,[3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,-1,-1,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12]]}},{"../data/array_types":39,"../data/extent":53,"../data/pos_attributes":57,"../gl/depth_mode":67,"../gl/stencil_mode":70,"../util/browser":252,"./vertex_array_object":95,"@mapbox/gl-matrix":2}],78:[function(t,e,n){"use strict";function r(t,e,n,r,i){if(!s.isPatternMissing(n.paint.get("fill-pattern"),t))for(var o=!0,a=0,u=r;a<u.length;a+=1){var l=u[a],c=e.getTile(l),h=c.getBucket(n);h&&(t.context.setStencilMode(t.stencilModeForClipping(l)),i(t,e,n,c,l,h,o),o=!1)}}function i(t,e,n,r,i,o,s){var u=t.context.gl,l=o.programConfigurations.get(n.id);a("fill",n.paint.get("fill-pattern"),t,l,n,r,i,s).draw(t.context,u.TRIANGLES,n.id,o.layoutVertexBuffer,o.indexBuffer,o.segments,l)}function o(t,e,n,r,i,o,s){var u=t.context.gl,l=o.programConfigurations.get(n.id),c=a("fillOutline",n.getPaintProperty("fill-outline-color")?null:n.paint.get("fill-pattern"),t,l,n,r,i,s);u.uniform2f(c.uniforms.u_world,u.drawingBufferWidth,u.drawingBufferHeight),c.draw(t.context,u.LINES,n.id,o.layoutVertexBuffer,o.indexBuffer2,o.segments2,l)}function a(t,e,n,r,i,o,a,u){var l,c=n.context.program.get();return e?(l=n.useProgram(t+"Pattern",r),(u||l.program!==c)&&(r.setUniforms(n.context,l,i.paint,{zoom:n.transform.zoom}),s.prepare(e,n,l)),s.setTile(o,n,l)):(l=n.useProgram(t,r),(u||l.program!==c)&&r.setUniforms(n.context,l,i.paint,{zoom:n.transform.zoom})),n.context.gl.uniformMatrix4fv(l.uniforms.u_matrix,!1,n.translatePosMatrix(a.posMatrix,o,i.paint.get("fill-translate"),i.paint.get("fill-translate-anchor"))),l}var s=t("./pattern"),u=t("../style-spec/util/color"),l=t("../gl/depth_mode");e.exports=function(t,e,n,a){var s=n.paint.get("fill-color"),c=n.paint.get("fill-opacity");if(0!==c.constantOr(1)){var h=t.context;h.setColorMode(t.colorModeForRenderPass());var p=n.paint.get("fill-pattern")||1!==s.constantOr(u.transparent).a||1!==c.constantOr(0)?"translucent":"opaque";t.renderPass===p&&(h.setDepthMode(t.depthModeForSublayer(1,"opaque"===t.renderPass?l.ReadWrite:l.ReadOnly)),r(t,e,n,a,i)),"translucent"===t.renderPass&&n.paint.get("fill-antialias")&&(h.lineWidth.set(2),h.setDepthMode(t.depthModeForSublayer(n.getPaintProperty("fill-outline-color")?2:0,l.ReadOnly)),r(t,e,n,a,o))}}},{"../gl/depth_mode":67,"../style-spec/util/color":153,"./pattern":91}],79:[function(t,e,n){"use strict";function r(t,e,n,r,i,a,s){var u=t.context,c=u.gl,p=n.paint.get("fill-extrusion-pattern"),f=t.context.program.get(),d=a.programConfigurations.get(n.id),m=t.useProgram(p?"fillExtrusionPattern":"fillExtrusion",d);if((s||m.program!==f)&&d.setUniforms(u,m,n.paint,{zoom:t.transform.zoom}),p){if(o.isPatternMissing(p,t))return;o.prepare(p,t,m),o.setTile(r,t,m),c.uniform1f(m.uniforms.u_height_factor,-Math.pow(2,i.overscaledZ)/r.tileSize/8)}t.context.gl.uniformMatrix4fv(m.uniforms.u_matrix,!1,t.translatePosMatrix(i.posMatrix,r,n.paint.get("fill-extrusion-translate"),n.paint.get("fill-extrusion-translate-anchor"))),function(t,e){var n=e.context.gl,r=e.style.light,i=r.properties.get("position"),o=[i.x,i.y,i.z],a=l.create();"viewport"===r.properties.get("anchor")&&l.fromRotation(a,-e.transform.angle),h.transformMat3(o,o,a);var s=r.properties.get("color");n.uniform3fv(t.uniforms.u_lightpos,o),n.uniform1f(t.uniforms.u_lightintensity,r.properties.get("intensity")),n.uniform3f(t.uniforms.u_lightcolor,s.r,s.g,s.b)}(m,t),m.draw(u,c.TRIANGLES,n.id,a.layoutVertexBuffer,a.indexBuffer,a.segments,d)}var i=t("@mapbox/gl-matrix"),o=t("./pattern"),a=t("./texture"),s=t("../style-spec/util/color"),u=t("../gl/depth_mode"),l=i.mat3,c=i.mat4,h=i.vec3,p=t("../gl/stencil_mode");e.exports=function(t,e,n,i){if(0!==n.paint.get("fill-extrusion-opacity"))if("offscreen"===t.renderPass){!function(t,e){var n=t.context,r=n.gl,i=e.viewportFrame;if(t.depthRboNeedsClear&&t.setupOffscreenDepthRenderbuffer(),!i){var o=new a(n,{width:t.width,height:t.height,data:null},r.RGBA);o.bind(r.LINEAR,r.CLAMP_TO_EDGE),(i=e.viewportFrame=n.createFramebuffer(t.width,t.height)).colorAttachment.set(o.texture)}n.bindFramebuffer.set(i.framebuffer),i.depthAttachment.set(t.depthRbo),t.depthRboNeedsClear&&(n.clear({depth:1}),t.depthRboNeedsClear=!1),n.clear({color:s.transparent}),n.setStencilMode(p.disabled),n.setDepthMode(new u(r.LEQUAL,u.ReadWrite,[0,1])),n.setColorMode(t.colorModeForRenderPass())}(t,n);for(var o=!0,l=0,h=i;l<h.length;l+=1){var f=h[l],d=e.getTile(f),m=d.getBucket(n);m&&(r(t,0,n,d,f,m,o),o=!1)}}else"translucent"===t.renderPass&&function(t,e){var n=e.viewportFrame;if(n){var r=t.context,i=r.gl,o=t.useProgram("extrusionTexture");r.setStencilMode(p.disabled),r.setDepthMode(u.disabled),r.setColorMode(t.colorModeForRenderPass()),r.activeTexture.set(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,n.colorAttachment.get()),i.uniform1f(o.uniforms.u_opacity,e.paint.get("fill-extrusion-opacity")),i.uniform1i(o.uniforms.u_image,0);var a=c.create();c.ortho(a,0,t.width,t.height,0,0,1),i.uniformMatrix4fv(o.uniforms.u_matrix,!1,a),i.uniform2f(o.uniforms.u_world,i.drawingBufferWidth,i.drawingBufferHeight),t.viewportVAO.bind(r,o,t.viewportBuffer,[]),i.drawArrays(i.TRIANGLE_STRIP,0,4)}}(t,n)}},{"../gl/depth_mode":67,"../gl/stencil_mode":70,"../style-spec/util/color":153,"./pattern":91,"./texture":93,"@mapbox/gl-matrix":2}],80:[function(t,e,n){"use strict";var r=t("@mapbox/gl-matrix").mat4,i=t("./texture"),o=t("../source/pixels_to_tile_units"),a=t("../style-spec/util/color"),s=t("../gl/depth_mode"),u=t("../gl/stencil_mode"),l=t("../gl/color_mode");e.exports=function(t,e,n,c){if(0!==n.paint.get("heatmap-opacity"))if("offscreen"===t.renderPass){var h=t.context,p=h.gl;h.setDepthMode(t.depthModeForSublayer(0,s.ReadOnly)),h.setStencilMode(u.disabled),function(t,e,n){var r=t.gl;t.activeTexture.set(r.TEXTURE1),t.viewport.set([0,0,e.width/4,e.height/4]);var i=n.heatmapFbo;if(i)r.bindTexture(r.TEXTURE_2D,i.colorAttachment.get()),t.bindFramebuffer.set(i.framebuffer);else{var o=r.createTexture();r.bindTexture(r.TEXTURE_2D,o),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),function t(e,n,r,i){var o=e.gl;o.texImage2D(o.TEXTURE_2D,0,o.RGBA,n.width/4,n.height/4,0,o.RGBA,e.extTextureHalfFloat?e.extTextureHalfFloat.HALF_FLOAT_OES:o.UNSIGNED_BYTE,null),i.colorAttachment.set(r),e.extTextureHalfFloat&&o.checkFramebufferStatus(o.FRAMEBUFFER)!==o.FRAMEBUFFER_COMPLETE&&(e.extTextureHalfFloat=null,i.colorAttachment.setDirty(),t(e,n,r,i))}(t,e,o,i=n.heatmapFbo=t.createFramebuffer(e.width/4,e.height/4))}}(h,t,n),h.clear({color:a.transparent}),h.setColorMode(new l([p.ONE,p.ONE],a.transparent,[!0,!0,!0,!0]));for(var f=!0,d=0;d<c.length;d++){var m=c[d];if(!e.hasRenderableParent(m)){var g=e.getTile(m),y=g.getBucket(n);if(y){var v=t.context.program.get(),_=y.programConfigurations.get(n.id),b=t.useProgram("heatmap",_),x=t.transform.zoom;(f||b.program!==v)&&(_.setUniforms(t.context,b,n.paint,{zoom:x}),f=!1),p.uniform1f(b.uniforms.u_extrude_scale,o(g,1,x)),p.uniform1f(b.uniforms.u_intensity,n.paint.get("heatmap-intensity")),p.uniformMatrix4fv(b.uniforms.u_matrix,!1,m.posMatrix),b.draw(h,p.TRIANGLES,n.id,y.layoutVertexBuffer,y.indexBuffer,y.segments,_)}}}h.viewport.set([0,0,t.width,t.height])}else"translucent"===t.renderPass&&(t.context.setColorMode(t.colorModeForRenderPass()),function(t,e){var n=t.context,o=n.gl,a=e.heatmapFbo;if(a){n.activeTexture.set(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,a.colorAttachment.get()),n.activeTexture.set(o.TEXTURE1);var u=e.colorRampTexture;u||(u=e.colorRampTexture=new i(n,e.colorRamp,o.RGBA)),u.bind(o.LINEAR,o.CLAMP_TO_EDGE),n.setDepthMode(s.disabled);var l=t.useProgram("heatmapTexture"),c=e.paint.get("heatmap-opacity");o.uniform1f(l.uniforms.u_opacity,c),o.uniform1i(l.uniforms.u_image,0),o.uniform1i(l.uniforms.u_color_ramp,1);var h=r.create();r.ortho(h,0,t.width,t.height,0,0,1),o.uniformMatrix4fv(l.uniforms.u_matrix,!1,h),o.uniform2f(l.uniforms.u_world,o.drawingBufferWidth,o.drawingBufferHeight),t.viewportVAO.bind(t.context,l,t.viewportBuffer,[]),o.drawArrays(o.TRIANGLE_STRIP,0,4)}}(t,n))}},{"../gl/color_mode":65,"../gl/depth_mode":67,"../gl/stencil_mode":70,"../source/pixels_to_tile_units":104,"../style-spec/util/color":153,"./texture":93,"@mapbox/gl-matrix":2}],81:[function(t,e,n){"use strict";function r(t,e,n){var r=t.context,i=r.gl,a=e.fbo;if(a){var s=t.useProgram("hillshade"),u=t.transform.calculatePosMatrix(e.tileID.toUnwrapped());!function(t,e,n){var r=n.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===n.paint.get("hillshade-illumination-anchor")&&(r-=e.transform.angle),e.context.gl.uniform2f(t.uniforms.u_light,n.paint.get("hillshade-exaggeration"),r)}(s,t,n);var l=function(t,e){var n=e.toCoordinate(),r=new o(n.column,n.row+1,n.zoom);return[t.transform.coordinateLocation(n).lat,t.transform.coordinateLocation(r).lat]}(t,e.tileID);r.activeTexture.set(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,a.colorAttachment.get()),i.uniformMatrix4fv(s.uniforms.u_matrix,!1,u),i.uniform2fv(s.uniforms.u_latrange,l),i.uniform1i(s.uniforms.u_image,0);var c=n.paint.get("hillshade-shadow-color");i.uniform4f(s.uniforms.u_shadow,c.r,c.g,c.b,c.a);var h=n.paint.get("hillshade-highlight-color");i.uniform4f(s.uniforms.u_highlight,h.r,h.g,h.b,h.a);var p=n.paint.get("hillshade-accent-color");if(i.uniform4f(s.uniforms.u_accent,p.r,p.g,p.b,p.a),e.maskedBoundsBuffer&&e.maskedIndexBuffer&&e.segments)s.draw(r,i.TRIANGLES,n.id,e.maskedBoundsBuffer,e.maskedIndexBuffer,e.segments);else{var f=t.rasterBoundsBuffer;t.rasterBoundsVAO.bind(r,s,f,[]),i.drawArrays(i.TRIANGLE_STRIP,0,f.length)}}}function i(t,e){var n=t.context,r=n.gl;if(e.dem&&e.dem.level){var i=e.dem.level.dim,o=e.dem.getPixels();if(n.activeTexture.set(r.TEXTURE1),n.pixelStoreUnpackPremultiplyAlpha.set(!1),e.demTexture=e.demTexture||t.getTileTexture(e.tileSize),e.demTexture){var l=e.demTexture;l.update(o,!1),l.bind(r.NEAREST,r.CLAMP_TO_EDGE)}else e.demTexture=new a(n,o,r.RGBA,!1),e.demTexture.bind(r.NEAREST,r.CLAMP_TO_EDGE);n.activeTexture.set(r.TEXTURE0);var c=e.fbo;if(!c){var h=new a(n,{width:i,height:i,data:null},r.RGBA);h.bind(r.LINEAR,r.CLAMP_TO_EDGE),(c=e.fbo=n.createFramebuffer(i,i)).colorAttachment.set(h.texture)}n.bindFramebuffer.set(c.framebuffer),n.viewport.set([0,0,i,i]);var p=u.create();u.ortho(p,0,s,-s,0,0,1),u.translate(p,p,[0,-s,0]);var f=t.useProgram("hillshadePrepare");r.uniformMatrix4fv(f.uniforms.u_matrix,!1,p),r.uniform1f(f.uniforms.u_zoom,e.tileID.overscaledZ),r.uniform2fv(f.uniforms.u_dimension,[2*i,2*i]),r.uniform1i(f.uniforms.u_image,1);var d=t.rasterBoundsBuffer;t.rasterBoundsVAO.bind(n,f,d,[]),r.drawArrays(r.TRIANGLE_STRIP,0,d.length),e.needsHillshadePrepare=!1}}var o=t("../geo/coordinate"),a=t("./texture"),s=t("../data/extent"),u=t("@mapbox/gl-matrix").mat4,l=t("../gl/stencil_mode"),c=t("../gl/depth_mode");e.exports=function(t,e,n,o){if("offscreen"===t.renderPass||"translucent"===t.renderPass){var a=t.context;a.setDepthMode(t.depthModeForSublayer(0,c.ReadOnly)),a.setStencilMode(l.disabled),a.setColorMode(t.colorModeForRenderPass());for(var s=0,u=o;s<u.length;s+=1){var h=e.getTile(u[s]);h.needsHillshadePrepare&&"offscreen"===t.renderPass?i(t,h):"translucent"===t.renderPass&&r(t,h,n)}a.viewport.set([0,0,t.width,t.height])}}},{"../data/extent":53,"../geo/coordinate":61,"../gl/depth_mode":67,"../gl/stencil_mode":70,"./texture":93,"@mapbox/gl-matrix":2}],82:[function(t,e,n){"use strict";function r(t,e,n,r,a,s,u,l,c){var h,p,f,d,m=e.context,g=m.gl,y=a.paint.get("line-dasharray"),v=a.paint.get("line-pattern");if(l||c){var _=1/o(n,1,e.transform.tileZoom);if(y){h=e.lineAtlas.getDash(y.from,"round"===a.layout.get("line-cap")),p=e.lineAtlas.getDash(y.to,"round"===a.layout.get("line-cap"));var b=h.width*y.fromScale,x=p.width*y.toScale;g.uniform2f(t.uniforms.u_patternscale_a,_/b,-h.height/2),g.uniform2f(t.uniforms.u_patternscale_b,_/x,-p.height/2),g.uniform1f(t.uniforms.u_sdfgamma,e.lineAtlas.width/(256*Math.min(b,x)*i.devicePixelRatio)/2)}else if(v){if(f=e.imageManager.getPattern(v.from),d=e.imageManager.getPattern(v.to),!f||!d)return;g.uniform2f(t.uniforms.u_pattern_size_a,f.displaySize[0]*v.fromScale/_,d.displaySize[1]),g.uniform2f(t.uniforms.u_pattern_size_b,d.displaySize[0]*v.toScale/_,d.displaySize[1]);var w=e.imageManager.getPixelSize();g.uniform2fv(t.uniforms.u_texsize,[w.width,w.height])}g.uniform2f(t.uniforms.u_gl_units_to_pixels,1/e.transform.pixelsToGLUnits[0],1/e.transform.pixelsToGLUnits[1])}l&&(y?(g.uniform1i(t.uniforms.u_image,0),m.activeTexture.set(g.TEXTURE0),e.lineAtlas.bind(m),g.uniform1f(t.uniforms.u_tex_y_a,h.y),g.uniform1f(t.uniforms.u_tex_y_b,p.y),g.uniform1f(t.uniforms.u_mix,y.t)):v&&(g.uniform1i(t.uniforms.u_image,0),m.activeTexture.set(g.TEXTURE0),e.imageManager.bind(m),g.uniform2fv(t.uniforms.u_pattern_tl_a,f.tl),g.uniform2fv(t.uniforms.u_pattern_br_a,f.br),g.uniform2fv(t.uniforms.u_pattern_tl_b,d.tl),g.uniform2fv(t.uniforms.u_pattern_br_b,d.br),g.uniform1f(t.uniforms.u_fade,v.t))),m.setStencilMode(e.stencilModeForClipping(s));var E=e.translatePosMatrix(s.posMatrix,n,a.paint.get("line-translate"),a.paint.get("line-translate-anchor"));g.uniformMatrix4fv(t.uniforms.u_matrix,!1,E),g.uniform1f(t.uniforms.u_ratio,1/o(n,1,e.transform.zoom)),t.draw(m,g.TRIANGLES,a.id,r.layoutVertexBuffer,r.indexBuffer,r.segments,u)}var i=t("../util/browser"),o=t("../source/pixels_to_tile_units"),a=t("../gl/depth_mode");e.exports=function(t,e,n,i){if("translucent"===t.renderPass&&0!==n.paint.get("line-opacity").constantOr(1)){var o=t.context;o.setDepthMode(t.depthModeForSublayer(0,a.ReadOnly)),o.setColorMode(t.colorModeForRenderPass());for(var s,u=n.paint.get("line-dasharray")?"lineSDF":n.paint.get("line-pattern")?"linePattern":"line",l=!0,c=0,h=i;c<h.length;c+=1){var p=h[c],f=e.getTile(p),d=f.getBucket(n);if(d){var m=d.programConfigurations.get(n.id),g=t.context.program.get(),y=t.useProgram(u,m),v=l||y.program!==g,_=s!==f.tileID.overscaledZ;v&&m.setUniforms(t.context,y,n.paint,{zoom:t.transform.zoom}),r(y,t,f,d,n,p,m,v,_),s=f.tileID.overscaledZ,l=!1}}}}},{"../gl/depth_mode":67,"../source/pixels_to_tile_units":104,"../util/browser":252}],83:[function(t,e,n){"use strict";function r(t,e,n,r,o){var s=r.paint.get("raster-fade-duration");if(s>0){var u=a.now(),l=(u-t.timeAdded)/s,c=e?(u-e.timeAdded)/s:-1,h=n.getSource(),p=o.coveringZoomLevel({tileSize:h.tileSize,roundZoom:h.roundZoom}),f=!e||Math.abs(e.tileID.overscaledZ-p)>Math.abs(t.tileID.overscaledZ-p),d=f&&t.refreshedUponExpiration?1:i.clamp(f?l:1-c,0,1);return t.refreshedUponExpiration&&l>=1&&(t.refreshedUponExpiration=!1),e?{opacity:1,mix:1-d}:{opacity:d,mix:0}}return{opacity:1,mix:0}}var i=t("../util/util"),o=t("../source/image_source"),a=t("../util/browser"),s=t("../gl/stencil_mode"),u=t("../gl/depth_mode");e.exports=function(t,e,n,i){if("translucent"===t.renderPass&&0!==n.paint.get("raster-opacity")){var a=t.context,l=a.gl,c=e.getSource(),h=t.useProgram("raster");a.setStencilMode(s.disabled),a.setColorMode(t.colorModeForRenderPass()),l.uniform1f(h.uniforms.u_brightness_low,n.paint.get("raster-brightness-min")),l.uniform1f(h.uniforms.u_brightness_high,n.paint.get("raster-brightness-max")),l.uniform1f(h.uniforms.u_saturation_factor,function(t){return t>0?1-1/(1.001-t):-t}(n.paint.get("raster-saturation"))),l.uniform1f(h.uniforms.u_contrast_factor,function(t){return t>0?1/(1-t):1+t}(n.paint.get("raster-contrast"))),l.uniform3fv(h.uniforms.u_spin_weights,function(t){t*=Math.PI/180;var e=Math.sin(t),n=Math.cos(t);return[(2*n+1)/3,(-Math.sqrt(3)*e-n+1)/3,(Math.sqrt(3)*e-n+1)/3]}(n.paint.get("raster-hue-rotate"))),l.uniform1f(h.uniforms.u_buffer_scale,1),l.uniform1i(h.uniforms.u_image0,0),l.uniform1i(h.uniforms.u_image1,1);for(var p=i.length&&i[0].overscaledZ,f=0,d=i;f<d.length;f+=1){var m=d[f];a.setDepthMode(t.depthModeForSublayer(m.overscaledZ-p,1===n.paint.get("raster-opacity")?u.ReadWrite:u.ReadOnly,l.LESS));var g=e.getTile(m),y=t.transform.calculatePosMatrix(m.toUnwrapped(),!0);g.registerFadeDuration(n.paint.get("raster-fade-duration")),l.uniformMatrix4fv(h.uniforms.u_matrix,!1,y);var v=e.findLoadedParent(m,0,{}),_=r(g,v,e,n,t.transform),b=void 0,x=void 0;if(a.activeTexture.set(l.TEXTURE0),g.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE,l.LINEAR_MIPMAP_NEAREST),a.activeTexture.set(l.TEXTURE1),v?(v.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE,l.LINEAR_MIPMAP_NEAREST),b=Math.pow(2,v.tileID.overscaledZ-g.tileID.overscaledZ),x=[g.tileID.canonical.x*b%1,g.tileID.canonical.y*b%1]):g.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE,l.LINEAR_MIPMAP_NEAREST),l.uniform2fv(h.uniforms.u_tl_parent,x||[0,0]),l.uniform1f(h.uniforms.u_scale_parent,b||1),l.uniform1f(h.uniforms.u_fade_t,_.mix),l.uniform1f(h.uniforms.u_opacity,_.opacity*n.paint.get("raster-opacity")),c instanceof o){var w=c.boundsBuffer;c.boundsVAO.bind(a,h,w,[]),l.drawArrays(l.TRIANGLE_STRIP,0,w.length)}else if(g.maskedBoundsBuffer&&g.maskedIndexBuffer&&g.segments)h.draw(a,l.TRIANGLES,n.id,g.maskedBoundsBuffer,g.maskedIndexBuffer,g.segments);else{var E=t.rasterBoundsBuffer;t.rasterBoundsVAO.bind(a,h,E,[]),l.drawArrays(l.TRIANGLE_STRIP,0,E.length)}}}}},{"../gl/depth_mode":67,"../gl/stencil_mode":70,"../source/image_source":102,"../util/browser":252,"../util/util":275}],84:[function(t,e,n){"use strict";function r(t,e,n,r,a,s,c,p,f,m){var g=t.context,y=g.gl,v=t.transform,_="map"===p,b="map"===f,x=_&&"line"===n.layout.get("symbol-placement"),w=_&&!b&&!x;g.setDepthMode(b?t.depthModeForSublayer(0,d.ReadOnly):d.disabled);for(var E,C=0,S=r;C<S.length;C+=1){var I=S[C],T=e.getTile(I),k=T.getBucket(n);if(k){var O=a?k.text:k.icon;if(O&&O.segments.get().length){var P=O.programConfigurations.get(n.id),A=a||k.sdfIcons,M=a?k.textSizeData:k.iconSizeData;if(E||(E=t.useProgram(A?"symbolSDF":"symbolIcon",P),P.setUniforms(t.context,E,n.paint,{zoom:t.transform.zoom}),i(E,t,0,a,w,b,M)),g.activeTexture.set(y.TEXTURE0),y.uniform1i(E.uniforms.u_texture,0),a)T.glyphAtlasTexture.bind(y.LINEAR,y.CLAMP_TO_EDGE),y.uniform2fv(E.uniforms.u_texsize,T.glyphAtlasTexture.size);else{var R=1!==n.layout.get("icon-size").constantOr(0)||k.iconsNeedLinear;T.iconAtlasTexture.bind(A||t.options.rotating||t.options.zooming||R||b||0!==v.pitch?y.LINEAR:y.NEAREST,y.CLAMP_TO_EDGE),y.uniform2fv(E.uniforms.u_texsize,T.iconAtlasTexture.size)}y.uniformMatrix4fv(E.uniforms.u_matrix,!1,t.translatePosMatrix(I.posMatrix,T,s,c));var L=u(T,1,t.transform.zoom),N=l.getLabelPlaneMatrix(I.posMatrix,b,_,t.transform,L),D=l.getGlCoordMatrix(I.posMatrix,b,_,t.transform,L);y.uniformMatrix4fv(E.uniforms.u_gl_coord_matrix,!1,t.translatePosMatrix(D,T,s,c,!0)),x?(y.uniformMatrix4fv(E.uniforms.u_label_plane_matrix,!1,h),l.updateLineLabels(k,I.posMatrix,t,a,N,D,b,m)):y.uniformMatrix4fv(E.uniforms.u_label_plane_matrix,!1,N),y.uniform1f(E.uniforms.u_fade_change,t.options.fadeDuration?t.symbolFadeChange:1),o(E,0,t,n,0,O,a,A,b)}}}}function i(t,e,n,r,i,o,a){var s=e.context.gl,u=e.transform;s.uniform1i(t.uniforms.u_pitch_with_map,o?1:0),s.uniform1f(t.uniforms.u_is_text,r?1:0),s.uniform1f(t.uniforms.u_pitch,u.pitch/360*2*Math.PI);var l="constant"===a.functionType||"camera"===a.functionType;s.uniform1i(t.uniforms.u_is_size_zoom_constant,"constant"===a.functionType||"source"===a.functionType?1:0),s.uniform1i(t.uniforms.u_is_size_feature_constant,l?1:0),s.uniform1f(t.uniforms.u_camera_to_center_distance,u.cameraToCenterDistance);var h=c.evaluateSizeForZoom(a,u.zoom,p.properties[r?"text-size":"icon-size"]);void 0!==h.uSizeT&&s.uniform1f(t.uniforms.u_size_t,h.uSizeT),void 0!==h.uSize&&s.uniform1f(t.uniforms.u_size,h.uSize),s.uniform1f(t.uniforms.u_aspect_ratio,u.width/u.height),s.uniform1i(t.uniforms.u_rotate_symbol,i?1:0)}function o(t,e,n,r,i,o,s,u,l){var c=n.context,h=c.gl,p=n.transform;if(u){var f=0!==r.paint.get(s?"text-halo-width":"icon-halo-width").constantOr(1),d=l?Math.cos(p._pitch)*p.cameraToCenterDistance:1;h.uniform1f(t.uniforms.u_gamma_scale,d),f&&(h.uniform1f(t.uniforms.u_is_halo,1),a(o,r,c,t)),h.uniform1f(t.uniforms.u_is_halo,0)}a(o,r,c,t)}function a(t,e,n,r){r.draw(n,n.gl.TRIANGLES,e.id,t.layoutVertexBuffer,t.indexBuffer,t.segments,t.programConfigurations.get(e.id),t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer)}var s=t("./draw_collision_debug"),u=t("../source/pixels_to_tile_units"),l=t("../symbol/projection"),c=t("../symbol/symbol_size"),h=t("@mapbox/gl-matrix").mat4.identity(new Float32Array(16)),p=t("../style/style_layer/symbol_style_layer_properties").layout,f=t("../gl/stencil_mode"),d=t("../gl/depth_mode");e.exports=function(t,e,n,i){if("translucent"===t.renderPass){var o=t.context;o.setStencilMode(f.disabled),o.setColorMode(t.colorModeForRenderPass()),0!==n.paint.get("icon-opacity").constantOr(1)&&r(t,e,n,i,!1,n.paint.get("icon-translate"),n.paint.get("icon-translate-anchor"),n.layout.get("icon-rotation-alignment"),n.layout.get("icon-pitch-alignment"),n.layout.get("icon-keep-upright")),0!==n.paint.get("text-opacity").constantOr(1)&&r(t,e,n,i,!0,n.paint.get("text-translate"),n.paint.get("text-translate-anchor"),n.layout.get("text-rotation-alignment"),n.layout.get("text-pitch-alignment"),n.layout.get("text-keep-upright")),e.map.showCollisionBoxes&&s(t,e,n,i)}}},{"../gl/depth_mode":67,"../gl/stencil_mode":70,"../source/pixels_to_tile_units":104,"../style/style_layer/symbol_style_layer_properties":209,"../symbol/projection":224,"../symbol/symbol_size":228,"./draw_collision_debug":76,"@mapbox/gl-matrix":2}],85:[function(t,e,n){"use strict";var r=t("@mapbox/shelf-pack"),i=t("../util/image").AlphaImage;e.exports={makeGlyphAtlas:function(t){var e=new i({width:0,height:0}),n={},o=new r(0,0,{autoResize:!0});for(var a in t){var s=t[a],u=n[a]={};for(var l in s){var c=s[+l];if(c&&0!==c.bitmap.width&&0!==c.bitmap.height){var h=o.packOne(c.bitmap.width+2,c.bitmap.height+2);e.resize({width:o.w,height:o.h}),i.copy(c.bitmap,e,{x:0,y:0},{x:h.x+1,y:h.y+1},c.bitmap),u[l]={rect:h,metrics:c.metrics}}}}return o.shrink(),e.resize({width:o.w,height:o.h}),{image:e,positions:n}}}},{"../util/image":263,"@mapbox/shelf-pack":5}],86:[function(t,e,n){"use strict";var r=t("../style/load_glyph_range"),i=t("@mapbox/tiny-sdf"),o=t("../util/is_char_in_unicode_block"),a=t("../util/util").asyncAll,s=t("../util/image").AlphaImage,u=function(t,e){this.requestTransform=t,this.localIdeographFontFamily=e,this.entries={}};u.prototype.setURL=function(t){this.url=t},u.prototype.getGlyphs=function(t,e){var n=this,i=[];for(var o in t)for(var s=0,u=t[o];s<u.length;s+=1)i.push({stack:o,id:u[s]});a(i,function(t,e){var i=t.stack,o=t.id,a=n.entries[i];a||(a=n.entries[i]={glyphs:{},requests:{}});var s=a.glyphs[o];if(void 0===s)if(s=n._tinySDF(a,i,o))e(null,{stack:i,id:o,glyph:s});else{var u=Math.floor(o/256);if(256*u>65535)e(new Error("glyphs > 65535 not supported"));else{var l=a.requests[u];l||(l=a.requests[u]=[],r(i,u,n.url,n.requestTransform,function(t,e){if(e)for(var n in e)a.glyphs[+n]=e[+n];for(var r=0,i=l;r<i.length;r+=1)(0,i[r])(t,e);delete a.requests[u]})),l.push(function(t,n){t?e(t):n&&e(null,{stack:i,id:o,glyph:n[o]||null})})}}else e(null,{stack:i,id:o,glyph:s})},function(t,n){if(t)e(t);else if(n){for(var r={},i=0,o=n;i<o.length;i+=1){var a=o[i],s=a.stack,u=a.id,l=a.glyph;(r[s]||(r[s]={}))[u]=l&&{id:l.id,bitmap:l.bitmap.clone(),metrics:l.metrics}}e(null,r)}})},u.prototype._tinySDF=function(t,e,n){var r=this.localIdeographFontFamily;if(r&&(o["CJK Unified Ideographs"](n)||o["Hangul Syllables"](n))){var a=t.tinySDF;if(!a){var u="400";/bold/i.test(e)?u="900":/medium/i.test(e)?u="500":/light/i.test(e)&&(u="200"),a=t.tinySDF=new i(24,3,8,.25,r,u)}return{id:n,bitmap:new s({width:30,height:30},a.draw(String.fromCharCode(n))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},e.exports=u},{"../style/load_glyph_range":184,"../util/image":263,"../util/is_char_in_unicode_block":265,"../util/util":275,"@mapbox/tiny-sdf":6}],87:[function(t,e,n){"use strict";function r(t,e){var n=e.pixelRatio,r={x:t.x+a,y:t.y+a,w:t.w-2*a,h:t.h-2*a};return{pixelRatio:n,textureRect:r,tl:[r.x,r.y],br:[r.x+r.w,r.y+r.h],displaySize:[r.w/n,r.h/n]}}var i=t("@mapbox/shelf-pack"),o=t("../util/image").RGBAImage,a=1;e.exports={imagePosition:r,makeImageAtlas:function(t){var e=new o({width:0,height:0}),n={},s=new i(0,0,{autoResize:!0});for(var u in t){var l=t[u],c=s.packOne(l.data.width+2*a,l.data.height+2*a);e.resize({width:s.w,height:s.h}),o.copy(l.data,e,{x:0,y:0},{x:c.x+a,y:c.y+a},l.data),n[u]=r(c,l)}return s.shrink(),e.resize({width:s.w,height:s.h}),{image:e,positions:n}}}},{"../util/image":263,"@mapbox/shelf-pack":5}],88:[function(t,e,n){"use strict";var r=t("@mapbox/shelf-pack"),i=t("../util/image").RGBAImage,o=t("./image_atlas").imagePosition,a=t("./texture"),s=function(){this.images={},this.loaded=!1,this.requestors=[],this.shelfPack=new r(64,64,{autoResize:!0}),this.patterns={},this.atlasImage=new i({width:64,height:64}),this.dirty=!0};s.prototype.isLoaded=function(){return this.loaded},s.prototype.setLoaded=function(t){if(this.loaded!==t&&(this.loaded=t,t)){for(var e=0,n=this.requestors;e<n.length;e+=1){var r=n[e];this._notify(r.ids,r.callback)}this.requestors=[]}},s.prototype.getImage=function(t){return this.images[t]},s.prototype.addImage=function(t,e){this.images[t]=e},s.prototype.removeImage=function(t){delete this.images[t];var e=this.patterns[t];e&&(this.shelfPack.unref(e.bin),delete this.patterns[t])},s.prototype.getImages=function(t,e){var n=!0;if(!this.isLoaded())for(var r=0,i=t;r<i.length;r+=1)this.images[i[r]]||(n=!1);this.isLoaded()||n?this._notify(t,e):this.requestors.push({ids:t,callback:e})},s.prototype._notify=function(t,e){for(var n={},r=0,i=t;r<i.length;r+=1){var o=i[r],a=this.images[o];a&&(n[o]={data:a.data.clone(),pixelRatio:a.pixelRatio,sdf:a.sdf})}e(null,n)},s.prototype.getPixelSize=function(){return{width:this.shelfPack.w,height:this.shelfPack.h}},s.prototype.getPattern=function(t){var e=this.patterns[t];if(e)return e.position;var n=this.getImage(t);if(!n)return null;var r=this.shelfPack.packOne(n.data.width+2,n.data.height+2);if(!r)return null;this.atlasImage.resize(this.getPixelSize());var a=n.data,s=this.atlasImage,u=r.x+1,l=r.y+1,c=a.width,h=a.height;i.copy(a,s,{x:0,y:0},{x:u,y:l},{width:c,height:h}),i.copy(a,s,{x:0,y:h-1},{x:u,y:l-1},{width:c,height:1}),i.copy(a,s,{x:0,y:0},{x:u,y:l+h},{width:c,height:1}),i.copy(a,s,{x:c-1,y:0},{x:u-1,y:l},{width:1,height:h}),i.copy(a,s,{x:0,y:0},{x:u+c,y:l},{width:1,height:h}),this.dirty=!0;var p=o(r,n);return this.patterns[t]={bin:r,position:p},p},s.prototype.bind=function(t){var e=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new a(t,this.atlasImage,e.RGBA),this.atlasTexture.bind(e.LINEAR,e.CLAMP_TO_EDGE)},e.exports=s},{"../util/image":263,"./image_atlas":87,"./texture":93,"@mapbox/shelf-pack":5}],89:[function(t,e,n){"use strict";var r=t("../util/util"),i=function(t,e){this.width=t,this.height=e,this.nextRow=0,this.bytes=4,this.data=new Uint8Array(this.width*this.height*this.bytes),this.positions={}};i.prototype.getDash=function(t,e){var n=t.join(",")+String(e);return this.positions[n]||(this.positions[n]=this.addDash(t,e)),this.positions[n]},i.prototype.addDash=function(t,e){var n=this,i=e?7:0,o=2*i+1;if(this.nextRow+o>this.height)return r.warnOnce("LineAtlas out of space"),null;for(var a=0,s=0;s<t.length;s++)a+=t[s];for(var u=this.width/a,l=u/2,c=t.length%2==1,h=-i;h<=i;h++)for(var p=n.width*(n.nextRow+i+h),f=c?-t[t.length-1]:0,d=t[0],m=1,g=0;g<this.width;g++){for(;d<g/u;)f=d,d+=t[m],c&&m===t.length-1&&(d+=t[0]),m++;var y=Math.abs(g-f*u),v=Math.abs(g-d*u),_=Math.min(y,v),b=m%2==1,x=void 0;if(e){var w=i?h/i*(l+1):0;if(b){var E=l-Math.abs(w);x=Math.sqrt(_*_+E*E)}else x=l-Math.sqrt(_*_+w*w)}else x=(b?1:-1)*_;n.data[3+4*(p+g)]=Math.max(0,Math.min(255,x+128))}var C={y:(this.nextRow+i+.5)/this.height,height:2*i/this.height,width:a};return this.nextRow+=o,this.dirty=!0,C},i.prototype.bind=function(t){var e=t.gl;this.texture?(e.bindTexture(e.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.width,this.height,e.RGBA,e.UNSIGNED_BYTE,this.data))):(this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.width,this.height,0,e.RGBA,e.UNSIGNED_BYTE,this.data))},e.exports=i},{"../util/util":275}],90:[function(t,e,n){"use strict";var r=t("../util/browser"),i=t("@mapbox/gl-matrix").mat4,o=t("../source/source_cache"),a=t("../data/extent"),s=t("../source/pixels_to_tile_units"),u=t("../util/util"),l=t("./vertex_array_object"),c=t("../data/array_types"),h=c.RasterBoundsArray,p=c.PosArray,f=t("../data/raster_bounds_attributes"),d=t("../data/pos_attributes"),m=t("../data/program_configuration").ProgramConfiguration,g=t("../symbol/cross_tile_symbol_index"),y=t("../shaders"),v=t("./program"),_=t("../gl/context"),b=t("../gl/depth_mode"),x=t("../gl/stencil_mode"),w=t("../gl/color_mode"),E=(t("./texture"),t("./tile_mask")),C=t("../style-spec/util/color"),S={symbol:t("./draw_symbol"),circle:t("./draw_circle"),heatmap:t("./draw_heatmap"),line:t("./draw_line"),fill:t("./draw_fill"),"fill-extrusion":t("./draw_fill_extrusion"),hillshade:t("./draw_hillshade"),raster:t("./draw_raster"),background:t("./draw_background"),debug:t("./draw_debug")},I=function(t,e){this.context=new _(t),this.transform=e,this._tileTextures={},this.setup(),this.numSublayers=o.maxUnderzooming+o.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.depthRboNeedsClear=!0,this.emptyProgramConfiguration=new m,this.crossTileSymbolIndex=new g};I.prototype.resize=function(t,e){var n=this.context.gl;if(this.width=t*r.devicePixelRatio,this.height=e*r.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var i=0,o=this.style._order;i<o.length;i+=1)this.style._layers[o[i]].resize();this.depthRbo&&(n.deleteRenderbuffer(this.depthRbo),this.depthRbo=null)},I.prototype.setup=function(){var t=this.context,e=new p;e.emplaceBack(0,0),e.emplaceBack(a,0),e.emplaceBack(0,a),e.emplaceBack(a,a),this.tileExtentBuffer=t.createVertexBuffer(e,d.members),this.tileExtentVAO=new l,this.tileExtentPatternVAO=new l;var n=new p;n.emplaceBack(0,0),n.emplaceBack(a,0),n.emplaceBack(a,a),n.emplaceBack(0,a),n.emplaceBack(0,0),this.debugBuffer=t.createVertexBuffer(n,d.members),this.debugVAO=new l;var r=new h;r.emplaceBack(0,0,0,0),r.emplaceBack(a,0,a,0),r.emplaceBack(0,a,0,a),r.emplaceBack(a,a,a,a),this.rasterBoundsBuffer=t.createVertexBuffer(r,f.members),this.rasterBoundsVAO=new l;var i=new p;i.emplaceBack(0,0),i.emplaceBack(1,0),i.emplaceBack(0,1),i.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(i,d.members),this.viewportVAO=new l},I.prototype.clearStencil=function(){var t=this.context,e=t.gl;t.setColorMode(w.disabled),t.setDepthMode(b.disabled),t.setStencilMode(new x({func:e.ALWAYS,mask:0},0,255,e.ZERO,e.ZERO,e.ZERO));var n=i.create();i.ortho(n,0,this.width,this.height,0,0,1),i.scale(n,n,[e.drawingBufferWidth,e.drawingBufferHeight,0]);var r=this.useProgram("clippingMask");e.uniformMatrix4fv(r.uniforms.u_matrix,!1,n),this.viewportVAO.bind(t,r,this.viewportBuffer,[]),e.drawArrays(e.TRIANGLE_STRIP,0,4)},I.prototype._renderTileClippingMasks=function(t){var e=this,n=this.context,r=n.gl;n.setColorMode(w.disabled),n.setDepthMode(b.disabled);var i=1;this._tileClippingMaskIDs={};for(var o=0,a=t;o<a.length;o+=1){var s=a[o],u=e._tileClippingMaskIDs[s.key]=i++;n.setStencilMode(new x({func:r.ALWAYS,mask:0},u,255,r.KEEP,r.KEEP,r.REPLACE));var l=e.useProgram("clippingMask");r.uniformMatrix4fv(l.uniforms.u_matrix,!1,s.posMatrix),e.tileExtentVAO.bind(e.context,l,e.tileExtentBuffer,[]),r.drawArrays(r.TRIANGLE_STRIP,0,e.tileExtentBuffer.length)}},I.prototype.stencilModeForClipping=function(t){var e=this.context.gl;return new x({func:e.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,e.KEEP,e.KEEP,e.REPLACE)},I.prototype.colorModeForRenderPass=function(){var t=this.context.gl;return this._showOverdrawInspector?new w([t.CONSTANT_COLOR,t.ONE],new C(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?w.unblended:w.alphaBlended},I.prototype.depthModeForSublayer=function(t,e,n){var r=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new b(n||this.context.gl.LEQUAL,e,[r-1+this.depthRange,r])},I.prototype.render=function(t,e){var n=this;for(var i in this.style=t,this.options=e,this.lineAtlas=t.lineAtlas,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.symbolFadeChange=t.placement.symbolFadeChange(r.now()),t.sourceCaches){var o=n.style.sourceCaches[i];o.used&&o.prepare(n.context)}var a=this.style._order,s=u.filterObject(this.style.sourceCaches,function(t){return"raster"===t.getSource().type||"raster-dem"===t.getSource().type});for(var l in s)!function(t){var e=s[l],r=e.getVisibleCoordinates().map(function(t){return e.getTile(t)});E(r,n.context)}();this.renderPass="offscreen";var c,h=[];this.depthRboNeedsClear=!0;for(var p=0;p<a.length;p++){var f=n.style._layers[a[p]];f.hasOffscreenPass()&&!f.isHidden(n.transform.zoom)&&(f.source!==(c&&c.id)&&(h=[],(c=n.style.sourceCaches[f.source])&&(h=c.getVisibleCoordinates()).reverse()),h.length&&n.renderLayer(n,c,f,h))}this.context.bindFramebuffer.set(null),this.context.clear({color:e.showOverdrawInspector?C.black:C.transparent,depth:1}),this._showOverdrawInspector=e.showOverdrawInspector,this.depthRange=(t._order.length+2)*this.numSublayers*this.depthEpsilon,this.renderPass="opaque";var d,m=[];for(this.currentLayer=a.length-1;this.currentLayer>=0;this.currentLayer--){var g=n.style._layers[a[n.currentLayer]];g.source!==(d&&d.id)&&(m=[],(d=n.style.sourceCaches[g.source])&&(n.clearStencil(),m=d.getVisibleCoordinates(),d.getSource().isTileClipped&&n._renderTileClippingMasks(m))),n.renderLayer(n,d,g,m)}this.renderPass="translucent";var y,v=[];for(this.currentLayer=0;this.currentLayer<a.length;this.currentLayer++){var _=n.style._layers[a[n.currentLayer]];_.source!==(y&&y.id)&&(v=[],(y=n.style.sourceCaches[_.source])&&(n.clearStencil(),v=y.getVisibleCoordinates(),y.getSource().isTileClipped&&n._renderTileClippingMasks(v)),v.reverse()),n.renderLayer(n,y,_,v)}if(this.options.showTileBoundaries){var b=this.style.sourceCaches[Object.keys(this.style.sourceCaches)[0]];b&&S.debug(this,b,b.getVisibleCoordinates())}},I.prototype.setupOffscreenDepthRenderbuffer=function(){var t=this.context;this.depthRbo||(this.depthRbo=t.createRenderbuffer(t.gl.DEPTH_COMPONENT16,this.width,this.height))},I.prototype.renderLayer=function(t,e,n,r){n.isHidden(this.transform.zoom)||("background"===n.type||r.length)&&(this.id=n.id,S[n.type](t,e,n,r))},I.prototype.translatePosMatrix=function(t,e,n,r,o){if(!n[0]&&!n[1])return t;var a=o?"map"===r?this.transform.angle:0:"viewport"===r?-this.transform.angle:0;if(a){var u=Math.sin(a),l=Math.cos(a);n=[n[0]*l-n[1]*u,n[0]*u+n[1]*l]}var c=[o?n[0]:s(e,n[0],this.transform.zoom),o?n[1]:s(e,n[1],this.transform.zoom),0],h=new Float32Array(16);return i.translate(h,t,c),h},I.prototype.saveTileTexture=function(t){var e=this._tileTextures[t.size[0]];e?e.push(t):this._tileTextures[t.size[0]]=[t]},I.prototype.getTileTexture=function(t){var e=this._tileTextures[t];return e&&e.length>0?e.pop():null},I.prototype._createProgramCached=function(t,e){this.cache=this.cache||{};var n=""+t+(e.cacheKey||"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[n]||(this.cache[n]=new v(this.context,y[t],e,this._showOverdrawInspector)),this.cache[n]},I.prototype.useProgram=function(t,e){var n=this._createProgramCached(t,e||this.emptyProgramConfiguration);return this.context.program.set(n.program),n},e.exports=I},{"../data/array_types":39,"../data/extent":53,"../data/pos_attributes":57,"../data/program_configuration":58,"../data/raster_bounds_attributes":59,"../gl/color_mode":65,"../gl/context":66,"../gl/depth_mode":67,"../gl/stencil_mode":70,"../shaders":97,"../source/pixels_to_tile_units":104,"../source/source_cache":111,"../style-spec/util/color":153,"../symbol/cross_tile_symbol_index":218,"../util/browser":252,"../util/util":275,"./draw_background":74,"./draw_circle":75,"./draw_debug":77,"./draw_fill":78,"./draw_fill_extrusion":79,"./draw_heatmap":80,"./draw_hillshade":81,"./draw_line":82,"./draw_raster":83,"./draw_symbol":84,"./program":92,"./texture":93,"./tile_mask":94,"./vertex_array_object":95,"@mapbox/gl-matrix":2}],91:[function(t,e,n){"use strict";var r=t("../source/pixels_to_tile_units");n.isPatternMissing=function(t,e){if(!t)return!1;var n=e.imageManager.getPattern(t.from),r=e.imageManager.getPattern(t.to);return!n||!r},n.prepare=function(t,e,n){var r=e.context,i=r.gl,o=e.imageManager.getPattern(t.from),a=e.imageManager.getPattern(t.to);i.uniform1i(n.uniforms.u_image,0),i.uniform2fv(n.uniforms.u_pattern_tl_a,o.tl),i.uniform2fv(n.uniforms.u_pattern_br_a,o.br),i.uniform2fv(n.uniforms.u_pattern_tl_b,a.tl),i.uniform2fv(n.uniforms.u_pattern_br_b,a.br);var s=e.imageManager.getPixelSize();i.uniform2fv(n.uniforms.u_texsize,[s.width,s.height]),i.uniform1f(n.uniforms.u_mix,t.t),i.uniform2fv(n.uniforms.u_pattern_size_a,o.displaySize),i.uniform2fv(n.uniforms.u_pattern_size_b,a.displaySize),i.uniform1f(n.uniforms.u_scale_a,t.fromScale),i.uniform1f(n.uniforms.u_scale_b,t.toScale),r.activeTexture.set(i.TEXTURE0),e.imageManager.bind(e.context)},n.setTile=function(t,e,n){var i=e.context.gl;i.uniform1f(n.uniforms.u_tile_units_to_pixels,1/r(t,1,e.transform.tileZoom));var o=Math.pow(2,t.tileID.overscaledZ),a=t.tileSize*Math.pow(2,e.transform.tileZoom)/o,s=a*(t.tileID.canonical.x+t.tileID.wrap*o),u=a*t.tileID.canonical.y;i.uniform2f(n.uniforms.u_pixel_coord_upper,s>>16,u>>16),i.uniform2f(n.uniforms.u_pixel_coord_lower,65535&s,65535&u)}},{"../source/pixels_to_tile_units":104}],92:[function(t,e,n){"use strict";var r=t("../util/browser"),i=t("../shaders"),o=(t("../data/program_configuration"),t("./vertex_array_object")),a=(t("../gl/context"),function(t,e,n,o){var a=this,s=t.gl;this.program=s.createProgram();var u=n.defines().concat("#define DEVICE_PIXEL_RATIO "+r.devicePixelRatio.toFixed(1));o&&u.push("#define OVERDRAW_INSPECTOR;");var l=u.concat(i.prelude.fragmentSource,e.fragmentSource).join("\n"),c=u.concat(i.prelude.vertexSource,e.vertexSource).join("\n"),h=s.createShader(s.FRAGMENT_SHADER);s.shaderSource(h,l),s.compileShader(h),s.attachShader(this.program,h);var p=s.createShader(s.VERTEX_SHADER);s.shaderSource(p,c),s.compileShader(p),s.attachShader(this.program,p);for(var f=n.layoutAttributes||[],d=0;d<f.length;d++)s.bindAttribLocation(a.program,d,f[d].name);s.linkProgram(this.program),this.numAttributes=s.getProgramParameter(this.program,s.ACTIVE_ATTRIBUTES),this.attributes={},this.uniforms={};for(var m=0;m<this.numAttributes;m++){var g=s.getActiveAttrib(a.program,m);g&&(a.attributes[g.name]=s.getAttribLocation(a.program,g.name))}for(var y=s.getProgramParameter(this.program,s.ACTIVE_UNIFORMS),v=0;v<y;v++){var _=s.getActiveUniform(a.program,v);_&&(a.uniforms[_.name]=s.getUniformLocation(a.program,_.name))}});a.prototype.draw=function(t,e,n,r,i,a,s,u,l){for(var c,h=t.gl,p=(c={},c[h.LINES]=2,c[h.TRIANGLES]=3,c)[e],f=0,d=a.get();f<d.length;f+=1){var m=d[f],g=m.vaos||(m.vaos={});(g[n]||(g[n]=new o)).bind(t,this,r,s?s.getPaintVertexBuffers():[],i,m.vertexOffset,u,l),h.drawElements(e,m.primitiveLength*p,h.UNSIGNED_SHORT,m.primitiveOffset*p*2)}},e.exports=a},{"../data/program_configuration":58,"../gl/context":66,"../shaders":97,"../util/browser":252,"./vertex_array_object":95}],93:[function(t,e,n){"use strict";var r=t("../util/window"),i=r.HTMLImageElement,o=r.HTMLCanvasElement,a=r.HTMLVideoElement,s=r.ImageData,u=function(t,e,n,r){this.context=t,this.size=[e.width,e.height],this.format=n,this.texture=t.gl.createTexture(),this.update(e,r)};u.prototype.update=function(t,e){var n=t.width,r=t.height;this.size=[n,r];var u=this.context,l=u.gl;l.bindTexture(l.TEXTURE_2D,this.texture),u.pixelStoreUnpack.set(1),this.format===l.RGBA&&!1!==e&&u.pixelStoreUnpackPremultiplyAlpha.set(!0),t instanceof i||t instanceof o||t instanceof a||t instanceof s?l.texImage2D(l.TEXTURE_2D,0,this.format,this.format,l.UNSIGNED_BYTE,t):l.texImage2D(l.TEXTURE_2D,0,this.format,n,r,0,this.format,l.UNSIGNED_BYTE,t.data)},u.prototype.bind=function(t,e,n){var r=this.context.gl;r.bindTexture(r.TEXTURE_2D,this.texture),t!==this.filter&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,n||t),this.filter=t),e!==this.wrap&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,e),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,e),this.wrap=e)},u.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null},e.exports=u},{"../util/window":254}],94:[function(t,e,n){"use strict";function r(t,e,n,i,o){for(var s=0;s<n.length;s++){var u=n[s];if(i.isLessThan(u.tileID))break;if(e.key===u.tileID.key)return;if(u.tileID.isChildOf(e)){for(var l=e.children(1/0),c=0;c<l.length;c++)r(t,l[c],n.slice(s),i,o);return}}var h=e.overscaledZ-t.overscaledZ,p=new a(h,e.canonical.x-(t.canonical.x<<h),e.canonical.y-(t.canonical.y<<h));o[p.key]=o[p.key]||p}var i=t("../source/tile_id"),o=i.OverscaledTileID,a=i.CanonicalTileID;e.exports=function(t,e){for(var n=t.sort(function(t,e){return t.tileID.isLessThan(e.tileID)?-1:e.tileID.isLessThan(t.tileID)?1:0}),i=0;i<n.length;i++){var a={},s=n[i],u=n.slice(i+1);r(s.tileID.wrapped(),s.tileID,u,new o(0,s.tileID.wrap+1,0,0,0),a),s.setMask(a,e)}}},{"../source/tile_id":114}],95:[function(t,e,n){"use strict";var r=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};r.prototype.bind=function(t,e,n,r,i,o,a,s){this.context=t;for(var u=this.boundPaintVertexBuffers.length!==r.length,l=0;!u&&l<r.length;l++)this.boundPaintVertexBuffers[l]!==r[l]&&(u=!0);t.extVertexArrayObject&&this.vao&&this.boundProgram===e&&this.boundLayoutVertexBuffer===n&&!u&&this.boundIndexBuffer===i&&this.boundVertexOffset===o&&this.boundDynamicVertexBuffer===a&&this.boundDynamicVertexBuffer2===s?(t.bindVertexArrayOES.set(this.vao),a&&a.bind(),i&&i.dynamicDraw&&i.bind(),s&&s.bind()):this.freshBind(e,n,r,i,o,a,s)},r.prototype.freshBind=function(t,e,n,r,i,o,a){var s,u=t.numAttributes,l=this.context,c=l.gl;if(l.extVertexArrayObject)this.vao&&this.destroy(),this.vao=l.extVertexArrayObject.createVertexArrayOES(),l.bindVertexArrayOES.set(this.vao),s=0,this.boundProgram=t,this.boundLayoutVertexBuffer=e,this.boundPaintVertexBuffers=n,this.boundIndexBuffer=r,this.boundVertexOffset=i,this.boundDynamicVertexBuffer=o,this.boundDynamicVertexBuffer2=a;else{s=l.currentNumAttributes||0;for(var h=u;h<s;h++)c.disableVertexAttribArray(h)}e.enableAttributes(c,t);for(var p=0,f=n;p<f.length;p+=1)f[p].enableAttributes(c,t);o&&o.enableAttributes(c,t),a&&a.enableAttributes(c,t),e.bind(),e.setVertexAttribPointers(c,t,i);for(var d=0,m=n;d<m.length;d+=1){var g=m[d];g.bind(),g.setVertexAttribPointers(c,t,i)}o&&(o.bind(),o.setVertexAttribPointers(c,t,i)),r&&r.bind(),a&&(a.bind(),a.setVertexAttribPointers(c,t,i)),l.currentNumAttributes=u},r.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)},e.exports=r},{}],96:[function(t,e,n){"use strict";var r=t("../util/util");n.packUint8ToFloat=function(t,e){return 256*(t=r.clamp(Math.floor(t),0,255))+r.clamp(Math.floor(e),0,255)}},{"../util/util":275}],97:[function(t,e,n){"use strict";var r={prelude:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif\n\n// Unpack a pair of values that have been packed into a single float.\n// The packed values are assumed to be 8-bit unsigned integers, and are\n// packed like so:\n// packedValue = floor(input[0]) * 256 + input[1],\nvec2 unpack_float(const float packedValue) {\n    int packedIntValue = int(packedValue);\n    int v0 = packedIntValue / 256;\n    return vec2(v0, packedIntValue - v0 * 256);\n}\n\nvec2 unpack_opacity(const float packedOpacity) {\n    int intOpacity = int(packedOpacity) / 2;\n    return vec2(float(intOpacity) / 127.0, mod(packedOpacity, 2.0));\n}\n\n// To minimize the number of attributes needed, we encode a 4-component\n// color into a pair of floats (i.e. a vec2) as follows:\n// [ floor(color.r * 255) * 256 + color.g * 255,\n//   floor(color.b * 255) * 256 + color.g * 255 ]\nvec4 decode_color(const vec2 encodedColor) {\n    return vec4(\n        unpack_float(encodedColor[0]) / 255.0,\n        unpack_float(encodedColor[1]) / 255.0\n    );\n}\n\n// Unpack a pair of paint values and interpolate between them.\nfloat unpack_mix_vec2(const vec2 packedValue, const float t) {\n    return mix(packedValue[0], packedValue[1], t);\n}\n\n// Unpack a pair of paint values and interpolate between them.\nvec4 unpack_mix_vec4(const vec4 packedColors, const float t) {\n    vec4 minColor = decode_color(vec2(packedColors[0], packedColors[1]));\n    vec4 maxColor = decode_color(vec2(packedColors[2], packedColors[3]));\n    return mix(minColor, maxColor, t);\n}\n\n// The offset depends on how many pixels are between the world origin and the edge of the tile:\n// vec2 offset = mod(pixel_coord, size)\n//\n// At high zoom levels there are a ton of pixels between the world origin and the edge of the tile.\n// The glsl spec only guarantees 16 bits of precision for highp floats. We need more than that.\n//\n// The pixel_coord is passed in as two 16 bit values:\n// pixel_coord_upper = floor(pixel_coord / 2^16)\n// pixel_coord_lower = mod(pixel_coord, 2^16)\n//\n// The offset is calculated in a series of steps that should preserve this precision:\nvec2 get_pattern_pos(const vec2 pixel_coord_upper, const vec2 pixel_coord_lower,\n    const vec2 pattern_size, const float tile_units_to_pixels, const vec2 pos) {\n\n    vec2 offset = mod(mod(mod(pixel_coord_upper, pattern_size) * 256.0, pattern_size) * 256.0 + pixel_coord_lower, pattern_size);\n    return (tile_units_to_pixels * pos + offset) / pattern_size;\n}\n"},background:{fragmentSource:"uniform vec4 u_color;\nuniform float u_opacity;\n\nvoid main() {\n    gl_FragColor = u_color * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},backgroundPattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\nuniform float u_opacity;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\nvoid main() {\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    gl_FragColor = mix(color1, color2, u_mix) * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\n}\n"},circle:{fragmentSource:"#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\n\nvarying vec3 v_data;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize mediump float radius\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize highp vec4 stroke_color\n    #pragma mapbox: initialize mediump float stroke_width\n    #pragma mapbox: initialize lowp float stroke_opacity\n\n    vec2 extrude = v_data.xy;\n    float extrude_length = length(extrude);\n\n    lowp float antialiasblur = v_data.z;\n    float antialiased_blur = -max(blur, antialiasblur);\n\n    float opacity_t = smoothstep(0.0, antialiased_blur, extrude_length - 1.0);\n\n    float color_t = stroke_width < 0.01 ? 0.0 : smoothstep(\n        antialiased_blur,\n        0.0,\n        extrude_length - radius / (radius + stroke_width)\n    );\n\n    gl_FragColor = opacity_t * mix(color * opacity, stroke_color * stroke_opacity, color_t);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform bool u_scale_with_map;\nuniform bool u_pitch_with_map;\nuniform vec2 u_extrude_scale;\nuniform highp float u_camera_to_center_distance;\n\nattribute vec2 a_pos;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\n\nvarying vec3 v_data;\n\nvoid main(void) {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize mediump float radius\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize highp vec4 stroke_color\n    #pragma mapbox: initialize mediump float stroke_width\n    #pragma mapbox: initialize lowp float stroke_opacity\n\n    // unencode the extrusion vector that we snuck into the a_pos vector\n    vec2 extrude = vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\n\n    // multiply a_pos by 0.5, since we had it * 2 in order to sneak\n    // in extrusion data\n    vec2 circle_center = floor(a_pos * 0.5);\n    if (u_pitch_with_map) {\n        vec2 corner_position = circle_center;\n        if (u_scale_with_map) {\n            corner_position += extrude * (radius + stroke_width) * u_extrude_scale;\n        } else {\n            // Pitching the circle with the map effectively scales it with the map\n            // To counteract the effect for pitch-scale: viewport, we rescale the\n            // whole circle based on the pitch scaling effect at its central point\n            vec4 projected_center = u_matrix * vec4(circle_center, 0, 1);\n            corner_position += extrude * (radius + stroke_width) * u_extrude_scale * (projected_center.w / u_camera_to_center_distance);\n        }\n\n        gl_Position = u_matrix * vec4(corner_position, 0, 1);\n    } else {\n        gl_Position = u_matrix * vec4(circle_center, 0, 1);\n\n        if (u_scale_with_map) {\n            gl_Position.xy += extrude * (radius + stroke_width) * u_extrude_scale * u_camera_to_center_distance;\n        } else {\n            gl_Position.xy += extrude * (radius + stroke_width) * u_extrude_scale * gl_Position.w;\n        }\n    }\n\n    // This is a minimum blur distance that serves as a faux-antialiasing for\n    // the circle. since blur is a ratio of the circle's size and the intent is\n    // to keep the blur at roughly 1px, the two are inversely related.\n    lowp float antialiasblur = 1.0 / DEVICE_PIXEL_RATIO / (radius + stroke_width);\n\n    v_data = vec3(extrude.x, extrude.y, antialiasblur);\n}\n"},clippingMask:{fragmentSource:"void main() {\n    gl_FragColor = vec4(1.0);\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},heatmap:{fragmentSource:"#pragma mapbox: define highp float weight\n\nuniform highp float u_intensity;\nvarying vec2 v_extrude;\n\n// Gaussian kernel coefficient: 1 / sqrt(2 * PI)\n#define GAUSS_COEF 0.3989422804014327\n\nvoid main() {\n    #pragma mapbox: initialize highp float weight\n\n    // Kernel density estimation with a Gaussian kernel of size 5x5\n    float d = -0.5 * 3.0 * 3.0 * dot(v_extrude, v_extrude);\n    float val = weight * u_intensity * GAUSS_COEF * exp(d);\n\n    gl_FragColor = vec4(val, 1.0, 1.0, 1.0);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\n\nuniform mat4 u_matrix;\nuniform float u_extrude_scale;\nuniform float u_opacity;\nuniform float u_intensity;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_extrude;\n\n// Effective \"0\" in the kernel density texture to adjust the kernel size to;\n// this empirically chosen number minimizes artifacts on overlapping kernels\n// for typical heatmap cases (assuming clustered source)\nconst highp float ZERO = 1.0 / 255.0 / 16.0;\n\n// Gaussian kernel coefficient: 1 / sqrt(2 * PI)\n#define GAUSS_COEF 0.3989422804014327\n\nvoid main(void) {\n    #pragma mapbox: initialize highp float weight\n    #pragma mapbox: initialize mediump float radius\n\n    // unencode the extrusion vector that we snuck into the a_pos vector\n    vec2 unscaled_extrude = vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\n\n    // This 'extrude' comes in ranging from [-1, -1], to [1, 1].  We'll use\n    // it to produce the vertices of a square mesh framing the point feature\n    // we're adding to the kernel density texture.  We'll also pass it as\n    // a varying, so that the fragment shader can determine the distance of\n    // each fragment from the point feature.\n    // Before we do so, we need to scale it up sufficiently so that the\n    // kernel falls effectively to zero at the edge of the mesh.\n    // That is, we want to know S such that\n    // weight * u_intensity * GAUSS_COEF * exp(-0.5 * 3.0^2 * S^2) == ZERO\n    // Which solves to:\n    // S = sqrt(-2.0 * log(ZERO / (weight * u_intensity * GAUSS_COEF))) / 3.0\n    float S = sqrt(-2.0 * log(ZERO / weight / u_intensity / GAUSS_COEF)) / 3.0;\n\n    // Pass the varying in units of radius\n    v_extrude = S * unscaled_extrude;\n\n    // Scale by radius and the zoom-based scale factor to produce actual\n    // mesh position\n    vec2 extrude = v_extrude * radius * u_extrude_scale;\n\n    // multiply a_pos by 0.5, since we had it * 2 in order to sneak\n    // in extrusion data\n    vec4 pos = vec4(floor(a_pos * 0.5) + extrude, 0, 1);\n\n    gl_Position = u_matrix * pos;\n}\n"},heatmapTexture:{fragmentSource:"uniform sampler2D u_image;\nuniform sampler2D u_color_ramp;\nuniform float u_opacity;\nvarying vec2 v_pos;\n\nvoid main() {\n    float t = texture2D(u_image, v_pos).r;\n    vec4 color = texture2D(u_color_ramp, vec2(t, 0.5));\n    gl_FragColor = color * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(0.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_world;\nattribute vec2 a_pos;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos * u_world, 0, 1);\n\n    v_pos.x = a_pos.x;\n    v_pos.y = 1.0 - a_pos.y;\n}\n"},collisionBox:{fragmentSource:"\nvarying float v_placed;\nvarying float v_notUsed;\n\nvoid main() {\n\n    float alpha = 0.5;\n\n    // Red = collision, hide label\n    gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0) * alpha;\n\n    // Blue = no collision, label is showing\n    if (v_placed > 0.5) {\n        gl_FragColor = vec4(0.0, 0.0, 1.0, 0.5) * alpha;\n    }\n\n    if (v_notUsed > 0.5) {\n        // This box not used, fade it out\n        gl_FragColor *= .1;\n    }\n}",vertexSource:"attribute vec2 a_pos;\nattribute vec2 a_anchor_pos;\nattribute vec2 a_extrude;\nattribute vec2 a_placed;\n\nuniform mat4 u_matrix;\nuniform vec2 u_extrude_scale;\nuniform float u_camera_to_center_distance;\n\nvarying float v_placed;\nvarying float v_notUsed;\n\nvoid main() {\n    vec4 projectedPoint = u_matrix * vec4(a_anchor_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    highp float collision_perspective_ratio = 0.5 + 0.5 * (u_camera_to_center_distance / camera_to_anchor_distance);\n\n    gl_Position = u_matrix * vec4(a_pos, 0.0, 1.0);\n    gl_Position.xy += a_extrude * u_extrude_scale * gl_Position.w * collision_perspective_ratio;\n\n    v_placed = a_placed.x;\n    v_notUsed = a_placed.y;\n}\n"},collisionCircle:{fragmentSource:"\nvarying float v_placed;\nvarying float v_notUsed;\nvarying float v_radius;\nvarying vec2 v_extrude;\nvarying vec2 v_extrude_scale;\n\nvoid main() {\n    float alpha = 0.5;\n\n    // Red = collision, hide label\n    vec4 color = vec4(1.0, 0.0, 0.0, 1.0) * alpha;\n\n    // Blue = no collision, label is showing\n    if (v_placed > 0.5) {\n        color = vec4(0.0, 0.0, 1.0, 0.5) * alpha;\n    }\n\n    if (v_notUsed > 0.5) {\n        // This box not used, fade it out\n        color *= .2;\n    }\n\n    float extrude_scale_length = length(v_extrude_scale);\n    float extrude_length = length(v_extrude) * extrude_scale_length;\n    float stroke_width = 15.0 * extrude_scale_length;\n    float radius = v_radius * extrude_scale_length;\n\n    float distance_to_edge = abs(extrude_length - radius);\n    float opacity_t = smoothstep(-stroke_width, 0.0, -distance_to_edge);\n\n    gl_FragColor = opacity_t * color;\n}\n",vertexSource:"attribute vec2 a_pos;\nattribute vec2 a_anchor_pos;\nattribute vec2 a_extrude;\nattribute vec2 a_placed;\n\nuniform mat4 u_matrix;\nuniform vec2 u_extrude_scale;\nuniform float u_camera_to_center_distance;\n\nvarying float v_placed;\nvarying float v_notUsed;\nvarying float v_radius;\n\nvarying vec2 v_extrude;\nvarying vec2 v_extrude_scale;\n\nvoid main() {\n    vec4 projectedPoint = u_matrix * vec4(a_anchor_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    highp float collision_perspective_ratio = 0.5 + 0.5 * (u_camera_to_center_distance / camera_to_anchor_distance);\n\n    gl_Position = u_matrix * vec4(a_pos, 0.0, 1.0);\n\n    highp float padding_factor = 1.2; // Pad the vertices slightly to make room for anti-alias blur\n    gl_Position.xy += a_extrude * u_extrude_scale * padding_factor * gl_Position.w * collision_perspective_ratio;\n\n    v_placed = a_placed.x;\n    v_notUsed = a_placed.y;\n    v_radius = abs(a_extrude.y); // We don't pitch the circles, so both units of the extrusion vector are equal in magnitude to the radius\n\n    v_extrude = a_extrude * padding_factor;\n    v_extrude_scale = u_extrude_scale * u_camera_to_center_distance * collision_perspective_ratio;\n}\n"},debug:{fragmentSource:"uniform highp vec4 u_color;\n\nvoid main() {\n    gl_FragColor = u_color;\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},fill:{fragmentSource:"#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_FragColor = color * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},fillOutline:{fragmentSource:"#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_pos;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    float dist = length(v_pos - gl_FragCoord.xy);\n    float alpha = 1.0 - smoothstep(0.0, 1.0, dist);\n    gl_FragColor = outline_color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\nuniform vec2 u_world;\n\nvarying vec2 v_pos;\n\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n}\n"},fillOutlinePattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    // find distance to outline for alpha interpolation\n\n    float dist = length(v_pos - gl_FragCoord.xy);\n    float alpha = 1.0 - smoothstep(0.0, 1.0, dist);\n\n\n    gl_FragColor = mix(color1, color2, u_mix) * alpha * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_world;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\n\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n}\n"},fillPattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    gl_FragColor = mix(color1, color2, u_mix) * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\n}\n"},fillExtrusion:{fragmentSource:"varying vec4 v_color;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define highp vec4 color\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n    #pragma mapbox: initialize highp vec4 color\n\n    gl_FragColor = v_color;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec3 u_lightcolor;\nuniform lowp vec3 u_lightpos;\nuniform lowp float u_lightintensity;\n\nattribute vec2 a_pos;\nattribute vec4 a_normal_ed;\n\nvarying vec4 v_color;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\n#pragma mapbox: define highp vec4 color\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n    #pragma mapbox: initialize highp vec4 color\n\n    vec3 normal = a_normal_ed.xyz;\n\n    base = max(0.0, base);\n    height = max(0.0, height);\n\n    float t = mod(normal.x, 2.0);\n\n    gl_Position = u_matrix * vec4(a_pos, t > 0.0 ? height : base, 1);\n\n    // Relative luminance (how dark/bright is the surface color?)\n    float colorvalue = color.r * 0.2126 + color.g * 0.7152 + color.b * 0.0722;\n\n    v_color = vec4(0.0, 0.0, 0.0, 1.0);\n\n    // Add slight ambient lighting so no extrusions are totally black\n    vec4 ambientlight = vec4(0.03, 0.03, 0.03, 1.0);\n    color += ambientlight;\n\n    // Calculate cos(theta), where theta is the angle between surface normal and diffuse light ray\n    float directional = clamp(dot(normal / 16384.0, u_lightpos), 0.0, 1.0);\n\n    // Adjust directional so that\n    // the range of values for highlight/shading is narrower\n    // with lower light intensity\n    // and with lighter/brighter surface colors\n    directional = mix((1.0 - u_lightintensity), max((1.0 - colorvalue + u_lightintensity), 1.0), directional);\n\n    // Add gradient along z axis of side surfaces\n    if (normal.y != 0.0) {\n        directional *= clamp((t + base) * pow(height / 150.0, 0.5), mix(0.7, 0.98, 1.0 - u_lightintensity), 1.0);\n    }\n\n    // Assign final color based on surface + ambient light color, diffuse light directional, and light color\n    // with lower bounds adjusted to hue of light\n    // so that shading is tinted with the complementary (opposite) color to the light color\n    v_color.r += clamp(color.r * directional * u_lightcolor.r, mix(0.0, 0.3, 1.0 - u_lightcolor.r), 1.0);\n    v_color.g += clamp(color.g * directional * u_lightcolor.g, mix(0.0, 0.3, 1.0 - u_lightcolor.g), 1.0);\n    v_color.b += clamp(color.b * directional * u_lightcolor.b, mix(0.0, 0.3, 1.0 - u_lightcolor.b), 1.0);\n}\n"},fillExtrusionPattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec4 v_lighting;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    vec4 mixedColor = mix(color1, color2, u_mix);\n\n    gl_FragColor = mixedColor * v_lighting;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\nuniform float u_height_factor;\n\nuniform vec3 u_lightcolor;\nuniform lowp vec3 u_lightpos;\nuniform lowp float u_lightintensity;\n\nattribute vec2 a_pos;\nattribute vec4 a_normal_ed;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec4 v_lighting;\nvarying float v_directional;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n\n    vec3 normal = a_normal_ed.xyz;\n    float edgedistance = a_normal_ed.w;\n\n    base = max(0.0, base);\n    height = max(0.0, height);\n\n    float t = mod(normal.x, 2.0);\n    float z = t > 0.0 ? height : base;\n\n    gl_Position = u_matrix * vec4(a_pos, z, 1);\n\n    vec2 pos = normal.x == 1.0 && normal.y == 0.0 && normal.z == 16384.0\n        ? a_pos // extrusion top\n        : vec2(edgedistance, z * u_height_factor); // extrusion side\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, pos);\n\n    v_lighting = vec4(0.0, 0.0, 0.0, 1.0);\n    float directional = clamp(dot(normal / 16383.0, u_lightpos), 0.0, 1.0);\n    directional = mix((1.0 - u_lightintensity), max((0.5 + u_lightintensity), 1.0), directional);\n\n    if (normal.y != 0.0) {\n        directional *= clamp((t + base) * pow(height / 150.0, 0.5), mix(0.7, 0.98, 1.0 - u_lightintensity), 1.0);\n    }\n\n    v_lighting.rgb += clamp(directional * u_lightcolor, mix(vec3(0.0), vec3(0.3), 1.0 - u_lightcolor), vec3(1.0));\n}\n"},extrusionTexture:{fragmentSource:"uniform sampler2D u_image;\nuniform float u_opacity;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_FragColor = texture2D(u_image, v_pos) * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(0.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_world;\nattribute vec2 a_pos;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos * u_world, 0, 1);\n\n    v_pos.x = a_pos.x;\n    v_pos.y = 1.0 - a_pos.y;\n}\n"},hillshadePrepare:{fragmentSource:"#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform sampler2D u_image;\nvarying vec2 v_pos;\nuniform vec2 u_dimension;\nuniform float u_zoom;\n\nfloat getElevation(vec2 coord, float bias) {\n    // Convert encoded elevation value to meters\n    vec4 data = texture2D(u_image, coord) * 255.0;\n    return (data.r + data.g * 256.0 + data.b * 256.0 * 256.0) / 4.0;\n}\n\nvoid main() {\n    vec2 epsilon = 1.0 / u_dimension;\n\n    // queried pixels:\n    // +-----------+\n    // |   |   |   |\n    // | a | b | c |\n    // |   |   |   |\n    // +-----------+\n    // |   |   |   |\n    // | d | e | f |\n    // |   |   |   |\n    // +-----------+\n    // |   |   |   |\n    // | g | h | i |\n    // |   |   |   |\n    // +-----------+\n\n    float a = getElevation(v_pos + vec2(-epsilon.x, -epsilon.y), 0.0);\n    float b = getElevation(v_pos + vec2(0, -epsilon.y), 0.0);\n    float c = getElevation(v_pos + vec2(epsilon.x, -epsilon.y), 0.0);\n    float d = getElevation(v_pos + vec2(-epsilon.x, 0), 0.0);\n    float e = getElevation(v_pos, 0.0);\n    float f = getElevation(v_pos + vec2(epsilon.x, 0), 0.0);\n    float g = getElevation(v_pos + vec2(-epsilon.x, epsilon.y), 0.0);\n    float h = getElevation(v_pos + vec2(0, epsilon.y), 0.0);\n    float i = getElevation(v_pos + vec2(epsilon.x, epsilon.y), 0.0);\n\n    // here we divide the x and y slopes by 8 * pixel size\n    // where pixel size (aka meters/pixel) is:\n    // circumference of the world / (pixels per tile * number of tiles)\n    // which is equivalent to: 8 * 40075016.6855785 / (512 * pow(2, u_zoom))\n    // which can be reduced to: pow(2, 19.25619978527 - u_zoom)\n    // we want to vertically exaggerate the hillshading though, because otherwise\n    // it is barely noticeable at low zooms. to do this, we multiply this by some\n    // scale factor pow(2, (u_zoom - 14) * a) where a is an arbitrary value and 14 is the\n    // maxzoom of the tile source. here we use a=0.3 which works out to the\n    // expression below. see nickidlugash's awesome breakdown for more info\n    // https://github.com/mapbox/mapbox-gl-js/pull/5286#discussion_r148419556\n    float exaggeration = u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;\n\n    vec2 deriv = vec2(\n        (c + f + f + i) - (a + d + d + g),\n        (g + h + h + i) - (a + b + b + c)\n    ) /  pow(2.0, (u_zoom - 14.0) * exaggeration + 19.2562 - u_zoom);\n\n    gl_FragColor = clamp(vec4(\n        deriv.x / 2.0 + 0.5,\n        deriv.y / 2.0 + 0.5,\n        1.0,\n        1.0), 0.0, 1.0);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = (a_texture_pos / 8192.0) / 2.0 + 0.25;\n}\n"},hillshade:{fragmentSource:"uniform sampler2D u_image;\nvarying vec2 v_pos;\n\nuniform vec2 u_latrange;\nuniform vec2 u_light;\nuniform vec4 u_shadow;\nuniform vec4 u_highlight;\nuniform vec4 u_accent;\n\n#define PI 3.141592653589793\n\nvoid main() {\n    vec4 pixel = texture2D(u_image, v_pos);\n\n    vec2 deriv = ((pixel.rg * 2.0) - 1.0);\n\n    // We divide the slope by a scale factor based on the cosin of the pixel's approximate latitude\n    // to account for mercator projection distortion. see #4807 for details\n    float scaleFactor = cos(radians((u_latrange[0] - u_latrange[1]) * (1.0 - v_pos.y) + u_latrange[1]));\n    // We also multiply the slope by an arbitrary z-factor of 1.25\n    float slope = atan(1.25 * length(deriv) / scaleFactor);\n    float aspect = deriv.x != 0.0 ? atan(deriv.y, -deriv.x) : PI / 2.0 * (deriv.y > 0.0 ? 1.0 : -1.0);\n\n    float intensity = u_light.x;\n    // We add PI to make this property match the global light object, which adds PI/2 to the light's azimuthal\n    // position property to account for 0deg corresponding to north/the top of the viewport in the style spec\n    // and the original shader was written to accept (-illuminationDirection - 90) as the azimuthal.\n    float azimuth = u_light.y + PI;\n\n    // We scale the slope exponentially based on intensity, using a calculation similar to\n    // the exponential interpolation function in the style spec:\n    // https://github.com/mapbox/mapbox-gl-js/blob/master/src/style-spec/expression/definitions/interpolate.js#L217-L228\n    // so that higher intensity values create more opaque hillshading.\n    float base = 1.875 - intensity * 1.75;\n    float maxValue = 0.5 * PI;\n    float scaledSlope = intensity != 0.5 ? ((pow(base, slope) - 1.0) / (pow(base, maxValue) - 1.0)) * maxValue : slope;\n\n    // The accent color is calculated with the cosine of the slope while the shade color is calculated with the sine\n    // so that the accent color's rate of change eases in while the shade color's eases out.\n    float accent = cos(scaledSlope);\n    // We multiply both the accent and shade color by a clamped intensity value\n    // so that intensities >= 0.5 do not additionally affect the color values\n    // while intensity values < 0.5 make the overall color more transparent.\n    vec4 accent_color = (1.0 - accent) * u_accent * clamp(intensity * 2.0, 0.0, 1.0);\n    float shade = abs(mod((aspect + azimuth) / PI + 0.5, 2.0) - 1.0);\n    vec4 shade_color = mix(u_shadow, u_highlight, shade) * sin(scaledSlope) * clamp(intensity * 2.0, 0.0, 1.0);\n    gl_FragColor = accent_color * (1.0 - shade_color.a) + shade_color;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = a_texture_pos / 8192.0;\n}\n"},line:{fragmentSource:"#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_width2;\nvarying vec2 v_normal;\nvarying float v_gamma_scale;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\n// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float width\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + ANTIALIASING;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_width2 = vec2(outset, inset);\n}\n"},linePattern:{fragmentSource:"uniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_fade;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    float x_a = mod(v_linesofar / u_pattern_size_a.x, 1.0);\n    float x_b = mod(v_linesofar / u_pattern_size_b.x, 1.0);\n    float y_a = 0.5 + (v_normal.y * v_width2.s / u_pattern_size_a.y);\n    float y_b = 0.5 + (v_normal.y * v_width2.s / u_pattern_size_b.y);\n    vec2 pos_a = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, vec2(x_a, y_a));\n    vec2 pos_b = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, vec2(x_b, y_b));\n\n    vec4 color = mix(texture2D(u_image, pos_a), texture2D(u_image, pos_b), u_fade);\n\n    gl_FragColor = color * alpha * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\n// We scale the distance before adding it to the buffers so that we can store\n// long distances for long segments. Use this value to unscale the distance.\n#define LINE_DISTANCE_SCALE 2.0\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize mediump float width\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n    float a_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\n\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + ANTIALIASING;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_linesofar = a_linesofar;\n    v_width2 = vec2(outset, inset);\n}\n"},lineSDF:{fragmentSource:"\nuniform sampler2D u_image;\nuniform float u_sdfgamma;\nuniform float u_mix;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float width\n    #pragma mapbox: initialize lowp float floorwidth\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    float sdfdist_a = texture2D(u_image, v_tex_a).a;\n    float sdfdist_b = texture2D(u_image, v_tex_b).a;\n    float sdfdist = mix(sdfdist_a, sdfdist_b, u_mix);\n    alpha *= smoothstep(0.5 - u_sdfgamma / floorwidth, 0.5 + u_sdfgamma / floorwidth, sdfdist);\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\n// We scale the distance before adding it to the buffers so that we can store\n// long distances for long segments. Use this value to unscale the distance.\n#define LINE_DISTANCE_SCALE 2.0\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_patternscale_a;\nuniform float u_tex_y_a;\nuniform vec2 u_patternscale_b;\nuniform float u_tex_y_b;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float width\n    #pragma mapbox: initialize lowp float floorwidth\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n    float a_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\n\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + ANTIALIASING;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist =outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_tex_a = vec2(a_linesofar * u_patternscale_a.x / floorwidth, normal.y * u_patternscale_a.y + u_tex_y_a);\n    v_tex_b = vec2(a_linesofar * u_patternscale_b.x / floorwidth, normal.y * u_patternscale_b.y + u_tex_y_b);\n\n    v_width2 = vec2(outset, inset);\n}\n"},raster:{fragmentSource:"uniform float u_fade_t;\nuniform float u_opacity;\nuniform sampler2D u_image0;\nuniform sampler2D u_image1;\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nuniform float u_brightness_low;\nuniform float u_brightness_high;\n\nuniform float u_saturation_factor;\nuniform float u_contrast_factor;\nuniform vec3 u_spin_weights;\n\nvoid main() {\n\n    // read and cross-fade colors from the main and parent tiles\n    vec4 color0 = texture2D(u_image0, v_pos0);\n    vec4 color1 = texture2D(u_image1, v_pos1);\n    if (color0.a > 0.0) {\n        color0.rgb = color0.rgb / color0.a;\n    }\n    if (color1.a > 0.0) {\n        color1.rgb = color1.rgb / color1.a;\n    }\n    vec4 color = mix(color0, color1, u_fade_t);\n    color.a *= u_opacity;\n    vec3 rgb = color.rgb;\n\n    // spin\n    rgb = vec3(\n        dot(rgb, u_spin_weights.xyz),\n        dot(rgb, u_spin_weights.zxy),\n        dot(rgb, u_spin_weights.yzx));\n\n    // saturation\n    float average = (color.r + color.g + color.b) / 3.0;\n    rgb += (average - rgb) * u_saturation_factor;\n\n    // contrast\n    rgb = (rgb - 0.5) * u_contrast_factor + 0.5;\n\n    // brightness\n    vec3 u_high_vec = vec3(u_brightness_low, u_brightness_low, u_brightness_low);\n    vec3 u_low_vec = vec3(u_brightness_high, u_brightness_high, u_brightness_high);\n\n    gl_FragColor = vec4(mix(u_high_vec, u_low_vec, rgb) * color.a, color.a);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_tl_parent;\nuniform float u_scale_parent;\nuniform float u_buffer_scale;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    // We are using Int16 for texture position coordinates to give us enough precision for\n    // fractional coordinates. We use 8192 to scale the texture coordinates in the buffer\n    // as an arbitrarily high number to preserve adequate precision when rendering.\n    // This is also the same value as the EXTENT we are using for our tile buffer pos coordinates,\n    // so math for modifying either is consistent.\n    v_pos0 = (((a_texture_pos / 8192.0) - 0.5) / u_buffer_scale ) + 0.5;\n    v_pos1 = (v_pos0 * u_scale_parent) + u_tl_parent;\n}\n"},symbolIcon:{fragmentSource:"uniform sampler2D u_texture;\n\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_tex;\nvarying float v_fade_opacity;\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    lowp float alpha = opacity * v_fade_opacity;\n    gl_FragColor = texture2D(u_texture, v_tex) * alpha;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"const float PI = 3.141592653589793;\n\nattribute vec4 a_pos_offset;\nattribute vec4 a_data;\nattribute vec3 a_projected_pos;\nattribute float a_fade_opacity;\n\nuniform bool u_is_size_zoom_constant;\nuniform bool u_is_size_feature_constant;\nuniform highp float u_size_t; // used to interpolate between zoom stops when size is a composite function\nuniform highp float u_size; // used when size is both zoom and feature constant\nuniform highp float u_camera_to_center_distance;\nuniform highp float u_pitch;\nuniform bool u_rotate_symbol;\nuniform highp float u_aspect_ratio;\nuniform float u_fade_change;\n\n#pragma mapbox: define lowp float opacity\n\nuniform mat4 u_matrix;\nuniform mat4 u_label_plane_matrix;\nuniform mat4 u_gl_coord_matrix;\n\nuniform bool u_is_text;\nuniform bool u_pitch_with_map;\n\nuniform vec2 u_texsize;\n\nvarying vec2 v_tex;\nvarying float v_fade_opacity;\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 a_pos = a_pos_offset.xy;\n    vec2 a_offset = a_pos_offset.zw;\n\n    vec2 a_tex = a_data.xy;\n    vec2 a_size = a_data.zw;\n\n    highp float segment_angle = -a_projected_pos[2];\n\n    float size;\n    if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = mix(a_size[0], a_size[1], u_size_t) / 10.0;\n    } else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = a_size[0] / 10.0;\n    } else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {\n        size = u_size;\n    } else {\n        size = u_size;\n    }\n\n    vec4 projectedPoint = u_matrix * vec4(a_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    // See comments in symbol_sdf.vertex\n    highp float distance_ratio = u_pitch_with_map ?\n        camera_to_anchor_distance / u_camera_to_center_distance :\n        u_camera_to_center_distance / camera_to_anchor_distance;\n    highp float perspective_ratio = 0.5 + 0.5 * distance_ratio;\n\n    size *= perspective_ratio;\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    highp float symbol_rotation = 0.0;\n    if (u_rotate_symbol) {\n        // See comments in symbol_sdf.vertex\n        vec4 offsetProjectedPoint = u_matrix * vec4(a_pos + vec2(1, 0), 0, 1);\n\n        vec2 a = projectedPoint.xy / projectedPoint.w;\n        vec2 b = offsetProjectedPoint.xy / offsetProjectedPoint.w;\n\n        symbol_rotation = atan((b.y - a.y) / u_aspect_ratio, b.x - a.x);\n    }\n\n    highp float angle_sin = sin(segment_angle + symbol_rotation);\n    highp float angle_cos = cos(segment_angle + symbol_rotation);\n    mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\n\n    vec4 projected_pos = u_label_plane_matrix * vec4(a_projected_pos.xy, 0.0, 1.0);\n    gl_Position = u_gl_coord_matrix * vec4(projected_pos.xy / projected_pos.w + rotation_matrix * (a_offset / 64.0 * fontScale), 0.0, 1.0);\n\n    v_tex = a_tex / u_texsize;\n    vec2 fade_opacity = unpack_opacity(a_fade_opacity);\n    float fade_change = fade_opacity[1] > 0.5 ? u_fade_change : -u_fade_change;\n    v_fade_opacity = max(0.0, min(1.0, fade_opacity[0] + fade_change));\n}\n"},symbolSDF:{fragmentSource:"#define SDF_PX 8.0\n#define EDGE_GAMMA 0.105/DEVICE_PIXEL_RATIO\n\nuniform bool u_is_halo;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n\nuniform sampler2D u_texture;\nuniform highp float u_gamma_scale;\nuniform bool u_is_text;\n\nvarying vec2 v_data0;\nvarying vec3 v_data1;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 fill_color\n    #pragma mapbox: initialize highp vec4 halo_color\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float halo_width\n    #pragma mapbox: initialize lowp float halo_blur\n\n    vec2 tex = v_data0.xy;\n    float gamma_scale = v_data1.x;\n    float size = v_data1.y;\n    float fade_opacity = v_data1[2];\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    lowp vec4 color = fill_color;\n    highp float gamma = EDGE_GAMMA / (fontScale * u_gamma_scale);\n    lowp float buff = (256.0 - 64.0) / 256.0;\n    if (u_is_halo) {\n        color = halo_color;\n        gamma = (halo_blur * 1.19 / SDF_PX + EDGE_GAMMA) / (fontScale * u_gamma_scale);\n        buff = (6.0 - halo_width / fontScale) / SDF_PX;\n    }\n\n    lowp float dist = texture2D(u_texture, tex).a;\n    highp float gamma_scaled = gamma * gamma_scale;\n    highp float alpha = smoothstep(buff - gamma_scaled, buff + gamma_scaled, dist);\n\n    gl_FragColor = color * (alpha * opacity * fade_opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"const float PI = 3.141592653589793;\n\nattribute vec4 a_pos_offset;\nattribute vec4 a_data;\nattribute vec3 a_projected_pos;\nattribute float a_fade_opacity;\n\n// contents of a_size vary based on the type of property value\n// used for {text,icon}-size.\n// For constants, a_size is disabled.\n// For source functions, we bind only one value per vertex: the value of {text,icon}-size evaluated for the current feature.\n// For composite functions:\n// [ text-size(lowerZoomStop, feature),\n//   text-size(upperZoomStop, feature) ]\nuniform bool u_is_size_zoom_constant;\nuniform bool u_is_size_feature_constant;\nuniform highp float u_size_t; // used to interpolate between zoom stops when size is a composite function\nuniform highp float u_size; // used when size is both zoom and feature constant\n\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n\nuniform mat4 u_matrix;\nuniform mat4 u_label_plane_matrix;\nuniform mat4 u_gl_coord_matrix;\n\nuniform bool u_is_text;\nuniform bool u_pitch_with_map;\nuniform highp float u_pitch;\nuniform bool u_rotate_symbol;\nuniform highp float u_aspect_ratio;\nuniform highp float u_camera_to_center_distance;\nuniform float u_fade_change;\n\nuniform vec2 u_texsize;\n\nvarying vec2 v_data0;\nvarying vec3 v_data1;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 fill_color\n    #pragma mapbox: initialize highp vec4 halo_color\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float halo_width\n    #pragma mapbox: initialize lowp float halo_blur\n\n    vec2 a_pos = a_pos_offset.xy;\n    vec2 a_offset = a_pos_offset.zw;\n\n    vec2 a_tex = a_data.xy;\n    vec2 a_size = a_data.zw;\n\n    highp float segment_angle = -a_projected_pos[2];\n    float size;\n\n    if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = mix(a_size[0], a_size[1], u_size_t) / 10.0;\n    } else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = a_size[0] / 10.0;\n    } else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {\n        size = u_size;\n    } else {\n        size = u_size;\n    }\n\n    vec4 projectedPoint = u_matrix * vec4(a_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    // If the label is pitched with the map, layout is done in pitched space,\n    // which makes labels in the distance smaller relative to viewport space.\n    // We counteract part of that effect by multiplying by the perspective ratio.\n    // If the label isn't pitched with the map, we do layout in viewport space,\n    // which makes labels in the distance larger relative to the features around\n    // them. We counteract part of that effect by dividing by the perspective ratio.\n    highp float distance_ratio = u_pitch_with_map ?\n        camera_to_anchor_distance / u_camera_to_center_distance :\n        u_camera_to_center_distance / camera_to_anchor_distance;\n    highp float perspective_ratio = 0.5 + 0.5 * distance_ratio;\n\n    size *= perspective_ratio;\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    highp float symbol_rotation = 0.0;\n    if (u_rotate_symbol) {\n        // Point labels with 'rotation-alignment: map' are horizontal with respect to tile units\n        // To figure out that angle in projected space, we draw a short horizontal line in tile\n        // space, project it, and measure its angle in projected space.\n        vec4 offsetProjectedPoint = u_matrix * vec4(a_pos + vec2(1, 0), 0, 1);\n\n        vec2 a = projectedPoint.xy / projectedPoint.w;\n        vec2 b = offsetProjectedPoint.xy / offsetProjectedPoint.w;\n\n        symbol_rotation = atan((b.y - a.y) / u_aspect_ratio, b.x - a.x);\n    }\n\n    highp float angle_sin = sin(segment_angle + symbol_rotation);\n    highp float angle_cos = cos(segment_angle + symbol_rotation);\n    mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\n\n    vec4 projected_pos = u_label_plane_matrix * vec4(a_projected_pos.xy, 0.0, 1.0);\n    gl_Position = u_gl_coord_matrix * vec4(projected_pos.xy / projected_pos.w + rotation_matrix * (a_offset / 64.0 * fontScale), 0.0, 1.0);\n    float gamma_scale = gl_Position.w;\n\n    vec2 tex = a_tex / u_texsize;\n    vec2 fade_opacity = unpack_opacity(a_fade_opacity);\n    float fade_change = fade_opacity[1] > 0.5 ? u_fade_change : -u_fade_change;\n    float interpolated_fade_opacity = max(0.0, min(1.0, fade_opacity[0] + fade_change));\n\n    v_data0 = vec2(tex.x, tex.y);\n    v_data1 = vec3(gamma_scale, size, interpolated_fade_opacity);\n}\n"}},i=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,o=function(t){var e=r[t],n={};e.fragmentSource=e.fragmentSource.replace(i,function(t,e,r,i,o){return n[o]=!0,"define"===e?"\n#ifndef HAS_UNIFORM_u_"+o+"\nvarying "+r+" "+i+" "+o+";\n#else\nuniform "+r+" "+i+" u_"+o+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+o+"\n    "+r+" "+i+" "+o+" = u_"+o+";\n#endif\n"}),e.vertexSource=e.vertexSource.replace(i,function(t,e,r,i,o){var a="float"===i?"vec2":"vec4";return n[o]?"define"===e?"\n#ifndef HAS_UNIFORM_u_"+o+"\nuniform lowp float a_"+o+"_t;\nattribute "+r+" "+a+" a_"+o+";\nvarying "+r+" "+i+" "+o+";\n#else\nuniform "+r+" "+i+" u_"+o+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+o+" = unpack_mix_"+a+"(a_"+o+", a_"+o+"_t);\n#else\n    "+r+" "+i+" "+o+" = u_"+o+";\n#endif\n":"define"===e?"\n#ifndef HAS_UNIFORM_u_"+o+"\nuniform lowp float a_"+o+"_t;\nattribute "+r+" "+a+" a_"+o+";\n#else\nuniform "+r+" "+i+" u_"+o+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+r+" "+i+" "+o+" = unpack_mix_"+a+"(a_"+o+", a_"+o+"_t);\n#else\n    "+r+" "+i+" "+o+" = u_"+o+";\n#endif\n"})};for(var a in r)o(a);e.exports=r},{}],98:[function(t,e,n){"use strict";var r=t("./image_source"),i=t("../util/window"),o=t("../data/raster_bounds_attributes"),a=t("../render/vertex_array_object"),s=t("../render/texture"),u=function(t){function e(e,n,r,i){t.call(this,e,n,r,i),this.options=n,this.animate=void 0===n.animate||n.animate}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.load=function(){this.canvas=this.canvas||i.document.getElementById(this.options.canvas),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire("error",new Error("Canvas dimensions cannot be less than or equal to zero.")):(this.play=function(){this._playing=!0,this.map._rerender()},this.pause=function(){this._playing=!1},this._finishLoading())},e.prototype.getCanvas=function(){return this.canvas},e.prototype.onAdd=function(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()},e.prototype.onRemove=function(){this.pause()},e.prototype.prepare=function(){var t=this,e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var n=this.map.painter.context,r=n.gl;for(var i in this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,o.members)),this.boundsVAO||(this.boundsVAO=new a),this.texture?e?this.texture.update(this.canvas):this._playing&&(this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE),r.texSubImage2D(r.TEXTURE_2D,0,0,0,r.RGBA,r.UNSIGNED_BYTE,this.canvas)):(this.texture=new s(n,this.canvas,r.RGBA),this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE)),t.tiles){var u=t.tiles[i];"loaded"!==u.state&&(u.state="loaded",u.texture=t.texture)}}},e.prototype.serialize=function(){return{type:"canvas",canvas:this.canvas,coordinates:this.coordinates}},e.prototype.hasTransition=function(){return this._playing},e.prototype._hasInvalidDimensions=function(){for(var t=0,e=[this.canvas.width,this.canvas.height];t<e.length;t+=1){var n=e[t];if(isNaN(n)||n<=0)return!0}return!1},e}(r);e.exports=u},{"../data/raster_bounds_attributes":59,"../render/texture":93,"../render/vertex_array_object":95,"../util/window":254,"./image_source":102}],99:[function(t,e,n){"use strict";var r=t("../util/evented"),i=t("../util/util"),o=t("../util/window"),a=t("../data/extent"),s=t("../util/ajax").ResourceType,u=t("../util/browser"),l=function(t){function e(e,n,r,o){t.call(this),this.id=e,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this.dispatcher=r,this.setEventedParent(o),this._data=n.data,this._options=i.extend({},n),this._collectResourceTiming=n.collectResourceTiming,this._resourceTiming=[],void 0!==n.maxzoom&&(this.maxzoom=n.maxzoom),n.type&&(this.type=n.type);var s=a/this.tileSize;this.workerOptions=i.extend({source:this.id,cluster:n.cluster||!1,geojsonVtOptions:{buffer:(void 0!==n.buffer?n.buffer:128)*s,tolerance:(void 0!==n.tolerance?n.tolerance:.375)*s,extent:a,maxZoom:this.maxzoom},superclusterOptions:{maxZoom:void 0!==n.clusterMaxZoom?Math.min(n.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:a,radius:(n.clusterRadius||50)*s,log:!1}},n.workerOptions)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.load=function(){var t=this;this.fire("dataloading",{dataType:"source"}),this._updateWorkerData(function(e){if(e)t.fire("error",{error:e});else{var n={dataType:"source",sourceDataType:"metadata"};t._collectResourceTiming&&t._resourceTiming&&t._resourceTiming.length>0&&(n.resourceTiming=t._resourceTiming,t._resourceTiming=[]),t.fire("data",n)}})},e.prototype.onAdd=function(t){this.map=t,this.load()},e.prototype.setData=function(t){var e=this;return this._data=t,this.fire("dataloading",{dataType:"source"}),this._updateWorkerData(function(t){if(t)return e.fire("error",{error:t});var n={dataType:"source",sourceDataType:"content"};e._collectResourceTiming&&e._resourceTiming&&e._resourceTiming.length>0&&(n.resourceTiming=e._resourceTiming,e._resourceTiming=[]),e.fire("data",n)}),this},e.prototype._updateWorkerData=function(t){var e=this,n=i.extend({},this.workerOptions),r=this._data;"string"==typeof r?(n.request=this.map._transformRequest(function(t){var e=o.document.createElement("a");return e.href=t,e.href}(r),s.Source),n.request.collectResourceTiming=this._collectResourceTiming):n.data=JSON.stringify(r),this.workerID=this.dispatcher.send(this.type+".loadData",n,function(n,r){e._loaded=!0,r&&r.resourceTiming&&r.resourceTiming[e.id]&&(e._resourceTiming=r.resourceTiming[e.id].slice(0)),t(n)},this.workerID)},e.prototype.loadTile=function(t,e){var n=this,r=void 0===t.workerID||"expired"===t.state?"loadTile":"reloadTile",i={type:this.type,uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:u.devicePixelRatio,overscaling:t.tileID.overscaleFactor(),showCollisionBoxes:this.map.showCollisionBoxes};t.workerID=this.dispatcher.send(r,i,function(i,o){return t.unloadVectorData(),t.aborted?e(null):i?e(i):(t.loadVectorData(o,n.map.painter,"reloadTile"===r),e(null))},this.workerID)},e.prototype.abortTile=function(t){t.aborted=!0},e.prototype.unloadTile=function(t){t.unloadVectorData(),this.dispatcher.send("removeTile",{uid:t.uid,type:this.type,source:this.id},null,t.workerID)},e.prototype.onRemove=function(){this.dispatcher.broadcast("removeSource",{type:this.type,source:this.id})},e.prototype.serialize=function(){return i.extend({},this._options,{type:this.type,data:this._data})},e.prototype.hasTransition=function(){return!1},e}(r);e.exports=l},{"../data/extent":53,"../util/ajax":251,"../util/browser":252,"../util/evented":260,"../util/util":275,"../util/window":254}],100:[function(t,e,n){"use strict";function r(t,e){var n=t.source,r=t.tileID.canonical;if(!this._geoJSONIndexes[n])return e(null,null);var i=this._geoJSONIndexes[n].getTile(r.z,r.x,r.y);if(!i)return e(null,null);var o=new s(i.features),a=u(o);0===a.byteOffset&&a.byteLength===a.buffer.byteLength||(a=new Uint8Array(a)),e(null,{vectorTile:o,rawData:a.buffer})}var i=t("../util/ajax"),o=t("../util/performance"),a=t("geojson-rewind"),s=t("./geojson_wrapper"),u=t("vt-pbf"),l=t("supercluster"),c=t("geojson-vt"),h=function(t){function e(e,n,i){t.call(this,e,n,r),i&&(this.loadGeoJSON=i),this._geoJSONIndexes={}}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.loadData=function(t,e){var n=this;this.loadGeoJSON(t,function(r,i){if(r||!i)return e(r);if("object"!=typeof i)return e(new Error("Input data is not a valid GeoJSON object."));a(i,!0);try{n._geoJSONIndexes[t.source]=t.cluster?l(t.superclusterOptions).load(i.features):c(i,t.geojsonVtOptions)}catch(r){return e(r)}n.loaded[t.source]={};var s={};if(t.request&&t.request.collectResourceTiming){var u=o.getEntriesByName(t.request.url);u&&(s.resourceTiming={},s.resourceTiming[t.source]=JSON.parse(JSON.stringify(u)))}e(null,s)})},e.prototype.reloadTile=function(e,n){var r=this.loaded[e.source];return r&&r[e.uid]?t.prototype.reloadTile.call(this,e,n):this.loadTile(e,n)},e.prototype.loadGeoJSON=function(t,e){if(t.request)i.getJSON(t.request,e);else{if("string"!=typeof t.data)return e(new Error("Input data is not a valid GeoJSON object."));try{return e(null,JSON.parse(t.data))}catch(t){return e(new Error("Input data is not a valid GeoJSON object."))}}},e.prototype.removeSource=function(t,e){this._geoJSONIndexes[t.source]&&delete this._geoJSONIndexes[t.source],e()},e}(t("./vector_tile_worker_source"));e.exports=h},{"../util/ajax":251,"../util/performance":268,"./geojson_wrapper":101,"./vector_tile_worker_source":116,"geojson-rewind":15,"geojson-vt":19,supercluster:32,"vt-pbf":34}],101:[function(t,e,n){"use strict";var r=t("@mapbox/point-geometry"),i=t("@mapbox/vector-tile").VectorTileFeature.prototype.toGeoJSON,o=t("../data/extent"),a=function(t){this._feature=t,this.extent=o,this.type=t.type,this.properties=t.tags,"id"in t&&!isNaN(t.id)&&(this.id=parseInt(t.id,10))};a.prototype.loadGeometry=function(){if(1===this._feature.type){for(var t=[],e=0,n=this._feature.geometry;e<n.length;e+=1){var i=n[e];t.push([new r(i[0],i[1])])}return t}for(var o=[],a=0,s=this._feature.geometry;a<s.length;a+=1){for(var u=[],l=0,c=s[a];l<c.length;l+=1){var h=c[l];u.push(new r(h[0],h[1]))}o.push(u)}return o},a.prototype.toGeoJSON=function(t,e,n){return i.call(this,t,e,n)};var s=function(t){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=o,this.length=t.length,this._features=t};s.prototype.feature=function(t){return new a(this._features[t])},e.exports=s},{"../data/extent":53,"@mapbox/point-geometry":4,"@mapbox/vector-tile":8}],102:[function(t,e,n){"use strict";var r=t("../util/util"),i=t("./tile_id").CanonicalTileID,o=t("../geo/lng_lat"),a=t("@mapbox/point-geometry"),s=t("../util/evented"),u=t("../util/ajax"),l=t("../util/browser"),c=t("../data/extent"),h=t("../data/array_types").RasterBoundsArray,p=t("../data/raster_bounds_attributes"),f=t("../render/vertex_array_object"),d=t("../render/texture"),m=function(t){function e(e,n,r,i){t.call(this),this.id=e,this.dispatcher=r,this.coordinates=n.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this.setEventedParent(i),this.options=n}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.load=function(){var t=this;this.fire("dataloading",{dataType:"source"}),this.url=this.options.url,u.getImage(this.map._transformRequest(this.url,u.ResourceType.Image),function(e,n){e?t.fire("error",{error:e}):n&&(t.image=l.getImageData(n),t._finishLoading())})},e.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire("data",{dataType:"source",sourceDataType:"metadata"}))},e.prototype.onAdd=function(t){this.map=t,this.load()},e.prototype.setCoordinates=function(t){this.coordinates=t;var e=this.map,n=t.map(function(t){return e.transform.locationCoordinate(o.convert(t)).zoomTo(0)}),s=this.centerCoord=r.getCoordinatesCenter(n);s.column=Math.floor(s.column),s.row=Math.floor(s.row),this.tileID=new i(s.zoom,s.column,s.row),this.minzoom=this.maxzoom=s.zoom;var u=n.map(function(t){var e=t.zoomTo(s.zoom);return new a(Math.round((e.column-s.column)*c),Math.round((e.row-s.row)*c))});return this._boundsArray=new h,this._boundsArray.emplaceBack(u[0].x,u[0].y,0,0),this._boundsArray.emplaceBack(u[1].x,u[1].y,c,0),this._boundsArray.emplaceBack(u[3].x,u[3].y,0,c),this._boundsArray.emplaceBack(u[2].x,u[2].y,c,c),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire("data",{dataType:"source",sourceDataType:"content"}),this},e.prototype.prepare=function(){var t=this;if(0!==Object.keys(this.tiles).length&&this.image){var e=this.map.painter.context,n=e.gl;for(var r in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,p.members)),this.boundsVAO||(this.boundsVAO=new f),this.texture||(this.texture=new d(e,this.image,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE)),t.tiles){var i=t.tiles[r];"loaded"!==i.state&&(i.state="loaded",i.texture=t.texture)}}},e.prototype.loadTile=function(t,e){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={},e(null)):(t.state="errored",e(null))},e.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},e.prototype.hasTransition=function(){return!1},e}(s);e.exports=m},{"../data/array_types":39,"../data/extent":53,"../data/raster_bounds_attributes":59,"../geo/lng_lat":62,"../render/texture":93,"../render/vertex_array_object":95,"../util/ajax":251,"../util/browser":252,"../util/evented":260,"../util/util":275,"./tile_id":114,"@mapbox/point-geometry":4}],103:[function(t,e,n){"use strict";var r=t("../util/util"),i=t("../util/ajax"),o=t("../util/browser"),a=t("../util/mapbox").normalizeSourceURL;e.exports=function(t,e,n){var s=function(t,e){if(t)return n(t);if(e){var i=r.pick(e,["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds"]);e.vector_layers&&(i.vectorLayers=e.vector_layers,i.vectorLayerIds=i.vectorLayers.map(function(t){return t.id})),n(null,i)}};t.url?i.getJSON(e(a(t.url),i.ResourceType.Source),s):o.frame(function(){return s(null,t)})}},{"../util/ajax":251,"../util/browser":252,"../util/mapbox":267,"../util/util":275}],104:[function(t,e,n){"use strict";var r=t("../data/extent");e.exports=function(t,e,n){return e*(r/(t.tileSize*Math.pow(2,n-t.tileID.overscaledZ)))}},{"../data/extent":53}],105:[function(t,e,n){"use strict";function r(t,e){var n=t.tileID,r=e.tileID;return n.overscaledZ-r.overscaledZ||n.canonical.y-r.canonical.y||n.wrap-r.wrap||n.canonical.x-r.canonical.x}n.rendered=function(t,e,n,i,o,a,s){var u=t.tilesIn(n);u.sort(r);for(var l=[],c=0,h=u;c<h.length;c+=1){var p=h[c];l.push({wrappedTileID:p.tileID.wrapped().key,queryResults:p.tile.queryRenderedFeatures(e,p.queryGeometry,p.scale,i,a,t.id,s)})}return function(t){for(var e={},n={},r=0,i=t;r<i.length;r+=1){var o=i[r],a=o.queryResults,s=o.wrappedTileID,u=n[s]=n[s]||{};for(var l in a)for(var c=a[l],h=u[l]=u[l]||{},p=e[l]=e[l]||[],f=0,d=c;f<d.length;f+=1){var m=d[f];h[m.featureIndex]||(h[m.featureIndex]=!0,p.push(m.feature))}}return e}(l)},n.source=function(t,e){for(var n=t.getRenderableIds().map(function(e){return t.getTileByID(e)}),r=[],i={},o=0;o<n.length;o++){var a=n[o],s=a.tileID.canonical.key;i[s]||(i[s]=!0,a.querySourceFeatures(r,e))}return r}},{}],106:[function(t,e,n){"use strict";var r=t("../util/ajax"),i=t("../util/util"),o=(t("../util/evented"),t("../util/mapbox").normalizeTileURL),a=t("../util/browser"),s=t("./tile_id").OverscaledTileID,u=function(t){function e(e,n,r,o){t.call(this,e,n,r,o),this.type="raster-dem",this.maxzoom=22,this._options=i.extend({},n)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds}},e.prototype.loadTile=function(t,e){var n=o(t.tileID.canonical.url(this.tiles,this.scheme),this.url,this.tileSize);t.request=r.getImage(this.map._transformRequest(n,r.ResourceType.Tile),(function(n,r){if(delete t.request,t.aborted)t.state="unloaded",e(null);else if(n)t.state="errored",e(n);else if(r){this.map._refreshExpiredTiles&&t.setExpiryData(r),delete r.cacheControl,delete r.expires;var i=a.getImageData(r);t.workerID&&"expired"!==t.state||(t.workerID=this.dispatcher.send("loadDEMTile",{uid:t.uid,coord:t.tileID,source:this.id,rawImageData:i},(function(n,r){n&&(t.state="errored",e(n)),r&&(t.dem=r,t.needsHillshadePrepare=!0,t.state="loaded",e(null))}).bind(this)))}}).bind(this)),t.neighboringTiles=this._getNeighboringTiles(t.tileID)},e.prototype._getNeighboringTiles=function(t){var e=t.canonical,n=Math.pow(2,e.z),r=(e.x-1+n)%n,i=0===e.x?t.wrap-1:t.wrap,o=(e.x+1+n)%n,a=e.x+1===n?t.wrap+1:t.wrap,u={};return u[new s(t.overscaledZ,i,e.z,r,e.y).key]={backfilled:!1},u[new s(t.overscaledZ,a,e.z,o,e.y).key]={backfilled:!1},e.y>0&&(u[new s(t.overscaledZ,i,e.z,r,e.y-1).key]={backfilled:!1},u[new s(t.overscaledZ,t.wrap,e.z,e.x,e.y-1).key]={backfilled:!1},u[new s(t.overscaledZ,a,e.z,o,e.y-1).key]={backfilled:!1}),e.y+1<n&&(u[new s(t.overscaledZ,i,e.z,r,e.y+1).key]={backfilled:!1},u[new s(t.overscaledZ,t.wrap,e.z,e.x,e.y+1).key]={backfilled:!1},u[new s(t.overscaledZ,a,e.z,o,e.y+1).key]={backfilled:!1}),u},e.prototype.unloadTile=function(t){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded",this.dispatcher.send("removeDEMTile",{uid:t.uid,source:this.id},void 0,t.workerID)},e}(t("./raster_tile_source"));e.exports=u},{"../util/ajax":251,"../util/browser":252,"../util/evented":260,"../util/mapbox":267,"../util/util":275,"./raster_tile_source":108,"./tile_id":114}],107:[function(t,e,n){"use strict";var r=t("../data/dem_data").DEMData,i=function(){this.loading={},this.loaded={}};i.prototype.loadTile=function(t,e){var n=t.source,i=t.uid;this.loading[n]||(this.loading[n]={});var o=new r(i);this.loading[n][i]=o,o.loadFromImage(t.rawImageData),delete this.loading[n][i],this.loaded[n]=this.loaded[n]||{},this.loaded[n][i]=o,e(null,o)},i.prototype.removeTile=function(t){var e=this.loaded[t.source],n=t.uid;e&&e[n]&&delete e[n]},e.exports=i},{"../data/dem_data":52}],108:[function(t,e,n){"use strict";var r=t("../util/util"),i=t("../util/ajax"),o=t("../util/evented"),a=t("./load_tilejson"),s=t("../util/mapbox").normalizeTileURL,u=t("./tile_bounds"),l=t("../render/texture"),c=function(t){function e(e,n,i,o){t.call(this),this.id=e,this.dispatcher=i,this.setEventedParent(o),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=r.extend({},n),r.extend(this,r.pick(n,["url","scheme","tileSize"]))}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.load=function(){var t=this;this.fire("dataloading",{dataType:"source"}),a(this._options,this.map._transformRequest,function(e,n){e?t.fire("error",e):n&&(r.extend(t,n),n.bounds&&(t.tileBounds=new u(n.bounds,t.minzoom,t.maxzoom)),t.fire("data",{dataType:"source",sourceDataType:"metadata"}),t.fire("data",{dataType:"source",sourceDataType:"content"}))})},e.prototype.onAdd=function(t){this.map=t,this.load()},e.prototype.serialize=function(){return r.extend({},this._options)},e.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},e.prototype.loadTile=function(t,e){var n=this,r=s(t.tileID.canonical.url(this.tiles,this.scheme),this.url,this.tileSize);t.request=i.getImage(this.map._transformRequest(r,i.ResourceType.Tile),function(r,i){if(delete t.request,t.aborted)t.state="unloaded",e(null);else if(r)t.state="errored",e(r);else if(i){n.map._refreshExpiredTiles&&t.setExpiryData(i),delete i.cacheControl,delete i.expires;var o=n.map.painter.context,a=o.gl;t.texture=n.map.painter.getTileTexture(i.width),t.texture?(t.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST),a.texSubImage2D(a.TEXTURE_2D,0,0,0,a.RGBA,a.UNSIGNED_BYTE,i)):(t.texture=new l(o,i,a.RGBA),t.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST),o.extTextureFilterAnisotropic&&a.texParameterf(a.TEXTURE_2D,o.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,o.extTextureFilterAnisotropicMax)),a.generateMipmap(a.TEXTURE_2D),t.state="loaded",e(null)}})},e.prototype.abortTile=function(t,e){t.request&&(t.request.abort(),delete t.request),e()},e.prototype.unloadTile=function(t,e){t.texture&&this.map.painter.saveTileTexture(t.texture),e()},e.prototype.hasTransition=function(){return!1},e}(o);e.exports=c},{"../render/texture":93,"../util/ajax":251,"../util/evented":260,"../util/mapbox":267,"../util/util":275,"./load_tilejson":103,"./tile_bounds":113}],109:[function(t,e,n){"use strict";var r=t("../util/ajax"),i=t("../util/evented"),o=t("../util/window"),a=!1,s=null;e.exports.evented=new i,e.exports.registerForPluginAvailability=function(t){return s?t({pluginBlobURL:s,errorCallback:e.exports.errorCallback}):e.exports.evented.once("pluginAvailable",t),t},e.exports.createBlobURL=function(t){return o.URL.createObjectURL(new o.Blob([t.data],{type:"text/javascript"}))},e.exports.clearRTLTextPlugin=function(){a=!1,s=null},e.exports.setRTLTextPlugin=function(t,n){if(a)throw new Error("setRTLTextPlugin cannot be called multiple times.");a=!0,e.exports.errorCallback=n,r.getArrayBuffer({url:t},function(t,r){t?n(t):r&&(s=e.exports.createBlobURL(r),e.exports.evented.fire("pluginAvailable",{pluginBlobURL:s,errorCallback:n}))})},e.exports.applyArabicShaping=null,e.exports.processBidirectionalText=null},{"../util/ajax":251,"../util/evented":260,"../util/window":254}],110:[function(t,e,n){"use strict";var r=t("../util/util"),i={vector:t("../source/vector_tile_source"),raster:t("../source/raster_tile_source"),"raster-dem":t("../source/raster_dem_tile_source"),geojson:t("../source/geojson_source"),video:t("../source/video_source"),image:t("../source/image_source"),canvas:t("../source/canvas_source")};n.create=function(t,e,n,o){var a=new i[e.type](t,e,n,o);if(a.id!==t)throw new Error("Expected Source id to be "+t+" instead of "+a.id);return r.bindAll(["load","abort","unload","serialize","prepare"],a),a},n.getType=function(t){return i[t]},n.setType=function(t,e){i[t]=e}},{"../source/canvas_source":98,"../source/geojson_source":99,"../source/image_source":102,"../source/raster_dem_tile_source":106,"../source/raster_tile_source":108,"../source/vector_tile_source":115,"../source/video_source":117,"../util/util":275}],111:[function(t,e,n){"use strict";function r(t,e){var n=e.zoomTo(t.canonical.z);return new p((n.column-(t.canonical.x+t.wrap*Math.pow(2,t.canonical.z)))*h,(n.row-t.canonical.y)*h)}function i(t){return"raster"===t||"image"===t||"video"===t}var o=t("./source").create,a=t("./tile"),s=t("../util/evented"),u=t("../util/lru_cache"),l=t("../geo/coordinate"),c=t("../util/util"),h=t("../data/extent"),p=(t("../gl/context"),t("@mapbox/point-geometry")),f=t("../util/browser"),d=t("./tile_id").OverscaledTileID,m=function(t){function e(e,n,r){var i=this;t.call(this),this.id=e,this.dispatcher=r,this.on("data",function(t){"source"===t.dataType&&"metadata"===t.sourceDataType&&(i._sourceLoaded=!0),i._sourceLoaded&&!i._paused&&"source"===t.dataType&&"content"===t.sourceDataType&&(i.reload(),i.transform&&i.update(i.transform))}),this.on("error",function(){i._sourceErrored=!0}),this._source=o(e,n,r,this),this._tiles={},this._cache=new u(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._isIdRenderable=this._isIdRenderable.bind(this),this._coveredTiles={}}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.onAdd=function(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(t)},e.prototype.onRemove=function(t){this._source&&this._source.onRemove&&this._source.onRemove(t)},e.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;for(var t in this._tiles){var e=this._tiles[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}return!0},e.prototype.getSource=function(){return this._source},e.prototype.pause=function(){this._paused=!0},e.prototype.resume=function(){if(this._paused){var t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform)}},e.prototype._loadTile=function(t,e){return this._source.loadTile(t,e)},e.prototype._unloadTile=function(t){if(this._source.unloadTile)return this._source.unloadTile(t,function(){})},e.prototype._abortTile=function(t){if(this._source.abortTile)return this._source.abortTile(t,function(){})},e.prototype.serialize=function(){return this._source.serialize()},e.prototype.prepare=function(t){for(var e in this._source.prepare&&this._source.prepare(),this._tiles)this._tiles[e].upload(t)},e.prototype.getIds=function(){var t=this;return Object.keys(this._tiles).map(Number).sort(function(e,n){var r=t._tiles[e].tileID,i=t._tiles[n].tileID,o=new p(r.canonical.x,r.canonical.y).rotate(t.transform.angle),a=new p(i.canonical.x,i.canonical.y).rotate(t.transform.angle);return r.overscaledZ-i.overscaledZ||a.y-o.y||a.x-o.x})},e.prototype.getRenderableIds=function(){return this.getIds().filter(this._isIdRenderable)},e.prototype.hasRenderableParent=function(t){var e=this.findLoadedParent(t,0,{});return!!e&&this._isIdRenderable(e.tileID.key)},e.prototype._isIdRenderable=function(t){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]},e.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var t in this._resetCache(),this._tiles)this._reloadTile(t,"reloading")},e.prototype._reloadTile=function(t,e){var n=this._tiles[t];n&&("loading"!==n.state&&(n.state=e),this._loadTile(n,this._tileLoaded.bind(this,n,t,e)))},e.prototype._tileLoaded=function(t,e,n,r){if(r)return t.state="errored",void(404!==r.status?this._source.fire("error",{tile:t,error:r}):this.update(this.transform));t.timeAdded=f.now(),"expired"===n&&(t.refreshedUponExpiration=!0),this._setTileReloadTimer(e,t),"raster-dem"===this.getSource().type&&t.dem&&this._backfillDEM(t),this._source.fire("data",{dataType:"source",tile:t,coord:t.tileID}),this.map&&(this.map.painter.tileExtentVAO.vao=null)},e.prototype._backfillDEM=function(t){function e(t,e){t.needsHillshadePrepare=!0;var n=e.tileID.canonical.x-t.tileID.canonical.x,r=e.tileID.canonical.y-t.tileID.canonical.y,i=Math.pow(2,t.tileID.canonical.z),o=e.tileID.key;0===n&&0===r||Math.abs(r)>1||(Math.abs(n)>1&&(1===Math.abs(n+i)?n+=i:1===Math.abs(n-i)&&(n-=i)),e.dem&&t.dem&&(t.dem.backfillBorder(e.dem,n,r),t.neighboringTiles&&t.neighboringTiles[o]&&(t.neighboringTiles[o].backfilled=!0)))}for(var n=this.getRenderableIds(),r=0;r<n.length;r++){var i=n[r];if(t.neighboringTiles&&t.neighboringTiles[i]){var o=this.getTileByID(i);e(t,o),e(o,t)}}},e.prototype.getTile=function(t){return this.getTileByID(t.key)},e.prototype.getTileByID=function(t){return this._tiles[t]},e.prototype.getZoom=function(t){return t.zoom+t.scaleZoom(t.tileSize/this._source.tileSize)},e.prototype._findLoadedChildren=function(t,e,n){var r=this,i=!1;for(var o in r._tiles){var a=r._tiles[o];if(!(n[o]||!a.hasData()||a.tileID.overscaledZ<=t.overscaledZ||a.tileID.overscaledZ>e)){var s=Math.pow(2,a.tileID.canonical.z-t.canonical.z);if(Math.floor(a.tileID.canonical.x/s)===t.canonical.x&&Math.floor(a.tileID.canonical.y/s)===t.canonical.y)for(n[o]=a.tileID,i=!0;a&&a.tileID.overscaledZ-1>t.overscaledZ;){var u=a.tileID.scaledTo(a.tileID.overscaledZ-1);if(!u)break;(a=r._tiles[u.key])&&a.hasData()&&(delete n[o],n[u.key]=u)}}}return i},e.prototype.findLoadedParent=function(t,e,n){for(var r=this,i=t.overscaledZ-1;i>=e;i--){var o=t.scaledTo(i);if(!o)return;var a=String(o.key),s=r._tiles[a];if(s&&s.hasData())return n[a]=o,s;if(r._cache.has(a))return n[a]=o,r._cache.get(a)}},e.prototype.updateCacheSize=function(t){var e=Math.ceil(t.width/this._source.tileSize)+1,n=Math.ceil(t.height/this._source.tileSize)+1,r=Math.floor(e*n*5),i="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,r):r;this._cache.setMaxSize(i)},e.prototype.update=function(t){var n=this;if(this.transform=t,this._sourceLoaded&&!this._paused){var r;this.updateCacheSize(t),this._coveredTiles={},this.used?this._source.tileID?r=t.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(t){return new d(t.canonical.z,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y)}):(r=t.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(r=r.filter(function(t){return n._source.hasTile(t)}))):r=[];var o,a=(this._source.roundZoom?Math.round:Math.floor)(this.getZoom(t)),s=Math.max(a-e.maxOverzooming,this._source.minzoom),u=Math.max(a+e.maxUnderzooming,this._source.minzoom),l=this._updateRetainedTiles(r,a),h={};if(i(this._source.type))for(var p=Object.keys(l),m=0;m<p.length;m++){var g=p[m],y=l[g],v=n._tiles[g];if(v&&(void 0===v.fadeEndTime||v.fadeEndTime>=f.now())){n._findLoadedChildren(y,u,l)&&(l[g]=y);var _=n.findLoadedParent(y,s,h);_&&n._addTile(_.tileID)}}for(o in h)l[o]||(n._coveredTiles[o]=!0);for(o in h)l[o]=h[o];for(var b=c.keysDifference(this._tiles,l),x=0;x<b.length;x++)n._removeTile(b[x])}},e.prototype._updateRetainedTiles=function(t,n){for(var r=this,i={},o={},a=Math.max(n-e.maxOverzooming,this._source.minzoom),s=Math.max(n+e.maxUnderzooming,this._source.minzoom),u=0;u<t.length;u++){var l=t[u],c=r._addTile(l),h=!1;if(c.hasData())i[l.key]=l;else{h=c.wasRequested(),i[l.key]=l;var p=!0;if(n+1>r._source.maxzoom){var f=l.children(r._source.maxzoom)[0],d=r.getTile(f);d&&d.hasData()?i[f.key]=f:p=!1}else{r._findLoadedChildren(l,s,i);for(var m=l.children(r._source.maxzoom),g=0;g<m.length;g++)if(!i[m[g].key]){p=!1;break}}if(!p)for(var y=l.overscaledZ-1;y>=a;--y){var v=l.scaledTo(y);if(o[v.key])break;if(o[v.key]=!0,!(c=r.getTile(v))&&h&&(c=r._addTile(v)),c&&(i[v.key]=v,h=c.wasRequested(),c.hasData()))break}}}return i},e.prototype._addTile=function(t){var e=this._tiles[t.key];if(e)return e;(e=this._cache.getAndRemove(t.key))&&this._cacheTimers[t.key]&&(clearTimeout(this._cacheTimers[t.key]),delete this._cacheTimers[t.key],this._setTileReloadTimer(t.key,e));var n=Boolean(e);return n||(e=new a(t,this._source.tileSize*t.overscaleFactor()),this._loadTile(e,this._tileLoaded.bind(this,e,t.key,e.state))),e?(e.uses++,this._tiles[t.key]=e,n||this._source.fire("dataloading",{tile:e,coord:e.tileID,dataType:"source"}),e):null},e.prototype._setTileReloadTimer=function(t,e){var n=this;t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);var r=e.getExpiryTimeout();r&&(this._timers[t]=setTimeout(function(){n._reloadTile(t,"expired"),delete n._timers[t]},r))},e.prototype._setCacheInvalidationTimer=function(t,e){var n=this;t in this._cacheTimers&&(clearTimeout(this._cacheTimers[t]),delete this._cacheTimers[t]);var r=e.getExpiryTimeout();r&&(this._cacheTimers[t]=setTimeout(function(){n._cache.remove(t),delete n._cacheTimers[t]},r))},e.prototype._removeTile=function(t){var e=this._tiles[t];if(e&&(e.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),!(e.uses>0)))if(e.hasData()){e.tileID=e.tileID.wrapped();var n=e.tileID.key;this._cache.add(n,e),this._setCacheInvalidationTimer(n,e)}else e.aborted=!0,this._abortTile(e),this._unloadTile(e)},e.prototype.clearTiles=function(){for(var t in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(t);this._resetCache()},e.prototype._resetCache=function(){for(var t in this._cacheTimers)clearTimeout(this._cacheTimers[t]);this._cacheTimers={},this._cache.reset()},e.prototype.tilesIn=function(t){for(var e=[],n=this.getIds(),i=1/0,o=1/0,a=-1/0,s=-1/0,u=t[0].zoom,c=0;c<t.length;c++){var p=t[c];i=Math.min(i,p.column),o=Math.min(o,p.row),a=Math.max(a,p.column),s=Math.max(s,p.row)}for(var f=0;f<n.length;f++){var d=this._tiles[n[f]],m=d.tileID,g=[r(m,new l(i,o,u)),r(m,new l(a,s,u))];if(g[0].x<h&&g[0].y<h&&g[1].x>=0&&g[1].y>=0){for(var y=[],v=0;v<t.length;v++)y.push(r(m,t[v]));e.push({tile:d,tileID:m,queryGeometry:[y],scale:Math.pow(2,this.transform.zoom-d.tileID.overscaledZ)})}}return e},e.prototype.getVisibleCoordinates=function(){for(var t=this,e=this.getRenderableIds().map(function(e){return t._tiles[e].tileID}),n=0,r=e;n<r.length;n+=1){var i=r[n];i.posMatrix=t.transform.calculatePosMatrix(i.toUnwrapped())}return e},e.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(i(this._source.type))for(var t in this._tiles){var e=this._tiles[t];if(void 0!==e.fadeEndTime&&e.fadeEndTime>=f.now())return!0}return!1},e}(s);m.maxOverzooming=10,m.maxUnderzooming=3,e.exports=m},{"../data/extent":53,"../geo/coordinate":61,"../gl/context":66,"../util/browser":252,"../util/evented":260,"../util/lru_cache":266,"../util/util":275,"./source":110,"./tile":112,"./tile_id":114,"@mapbox/point-geometry":4}],112:[function(t,e,n){"use strict";var r=t("../util/util"),i=t("../data/bucket").deserialize,o=(t("../data/feature_index"),t("@mapbox/vector-tile")),a=t("pbf"),s=t("../util/vectortile_to_geojson"),u=t("../style-spec/feature_filter"),l=(t("../symbol/collision_index"),t("../data/bucket/symbol_bucket")),c=t("../data/array_types"),h=c.RasterBoundsArray,p=c.CollisionBoxArray,f=t("../data/raster_bounds_attributes"),d=t("../data/extent"),m=t("@mapbox/point-geometry"),g=t("../render/texture"),y=t("../data/segment").SegmentVector,v=t("../data/index_array_type").TriangleIndexArray,_=t("../util/browser"),b=function(t,e){this.tileID=t,this.uid=r.uniqueId(),this.uses=0,this.tileSize=e,this.buckets={},this.expirationTime=null,this.expiredRequestCount=0,this.state="loading"};b.prototype.registerFadeDuration=function(t){var e=t+this.timeAdded;e<_.now()||this.fadeEndTime&&e<this.fadeEndTime||(this.fadeEndTime=e)},b.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},b.prototype.loadVectorData=function(t,e,n){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){if(t.rawTileData&&(this.rawTileData=t.rawTileData),this.collisionBoxArray=t.collisionBoxArray,this.featureIndex=t.featureIndex,this.featureIndex.rawTileData=this.rawTileData,this.buckets=i(t.buckets,e.style),n)for(var r in this.buckets){var o=this.buckets[r];o instanceof l&&(o.justReloaded=!0)}t.iconAtlasImage&&(this.iconAtlasImage=t.iconAtlasImage),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage)}else this.collisionBoxArray=new p},b.prototype.unloadVectorData=function(){for(var t in this.buckets)this.buckets[t].destroy();this.buckets={},this.iconAtlasTexture&&this.iconAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.collisionBoxArray=null,this.featureIndex=null,this.state="unloaded"},b.prototype.unloadDEMData=function(){this.dem=null,this.neighboringTiles=null,this.state="unloaded"},b.prototype.getBucket=function(t){return this.buckets[t.id]},b.prototype.upload=function(t){for(var e in this.buckets){var n=this.buckets[e];n.uploaded||(n.upload(t),n.uploaded=!0)}var r=t.gl;this.iconAtlasImage&&(this.iconAtlasTexture=new g(t,this.iconAtlasImage,r.RGBA),this.iconAtlasImage=null),this.glyphAtlasImage&&(this.glyphAtlasTexture=new g(t,this.glyphAtlasImage,r.ALPHA),this.glyphAtlasImage=null)},b.prototype.queryRenderedFeatures=function(t,e,n,r,i,o,a){if(!this.featureIndex||!this.collisionBoxArray)return{};var s=0,u={};for(var c in t){var h=this.getBucket(t[c]);h&&(s=Math.max(s,t[c].queryRadius(h)),h instanceof l&&void 0!==h.bucketInstanceId&&(u[h.bucketInstanceId]=!0))}return this.featureIndex.query({queryGeometry:e,scale:n,tileSize:this.tileSize,bearing:i,params:r,additionalRadius:s,collisionBoxArray:this.collisionBoxArray,sourceID:o,collisionIndex:a,bucketInstanceIds:u},t)},b.prototype.querySourceFeatures=function(t,e){if(this.rawTileData){this.vtLayers||(this.vtLayers=new o.VectorTile(new a(this.rawTileData)).layers);var n=this.vtLayers._geojsonTileLayer||this.vtLayers[e?e.sourceLayer:""];if(n)for(var r=u(e&&e.filter),i={z:this.tileID.overscaledZ,x:this.tileID.canonical.x,y:this.tileID.canonical.y},l=0;l<n.length;l++){var c=n.feature(l);if(r({zoom:this.tileID.overscaledZ},c)){var h=new s(c,i.z,i.x,i.y);h.tile=i,t.push(h)}}}},b.prototype.clearMask=function(){this.segments&&(this.segments.destroy(),delete this.segments),this.maskedBoundsBuffer&&(this.maskedBoundsBuffer.destroy(),delete this.maskedBoundsBuffer),this.maskedIndexBuffer&&(this.maskedIndexBuffer.destroy(),delete this.maskedIndexBuffer)},b.prototype.setMask=function(t,e){if(!r.deepEqual(this.mask,t)&&(this.mask=t,this.clearMask(),!r.deepEqual(t,{0:!0}))){var n=new h,i=new v;this.segments=new y,this.segments.prepareSegment(0,n,i);for(var o=Object.keys(t),a=0;a<o.length;a++){var s=t[o[a]],u=d>>s.z,l=new m(s.x*u,s.y*u),c=new m(l.x+u,l.y+u),p=this.segments.prepareSegment(4,n,i);n.emplaceBack(l.x,l.y,l.x,l.y),n.emplaceBack(c.x,l.y,c.x,l.y),n.emplaceBack(l.x,c.y,l.x,c.y),n.emplaceBack(c.x,c.y,c.x,c.y);var g=p.vertexLength;i.emplaceBack(g,g+1,g+2),i.emplaceBack(g+1,g+2,g+3),p.vertexLength+=4,p.primitiveLength+=2}this.maskedBoundsBuffer=e.createVertexBuffer(n,f.members),this.maskedIndexBuffer=e.createIndexBuffer(i)}},b.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},b.prototype.setExpiryData=function(t){var e=this.expirationTime;if(t.cacheControl){var n=r.parseCacheControl(t.cacheControl);n["max-age"]&&(this.expirationTime=Date.now()+1e3*n["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){var i=Date.now(),o=!1;if(this.expirationTime>i)o=!1;else if(e)if(this.expirationTime<e)o=!0;else{var a=this.expirationTime-e;a?this.expirationTime=i+Math.max(a,3e4):o=!0}else o=!0;o?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},b.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},e.exports=b},{"../data/array_types":39,"../data/bucket":40,"../data/bucket/symbol_bucket":51,"../data/extent":53,"../data/feature_index":54,"../data/index_array_type":55,"../data/raster_bounds_attributes":59,"../data/segment":60,"../render/texture":93,"../style-spec/feature_filter":148,"../symbol/collision_index":217,"../util/browser":252,"../util/util":275,"../util/vectortile_to_geojson":276,"@mapbox/point-geometry":4,"@mapbox/vector-tile":8,pbf:30}],113:[function(t,e,n){"use strict";var r=t("../geo/lng_lat_bounds"),i=t("../util/util").clamp,o=function(t,e,n){this.bounds=r.convert(this.validateBounds(t)),this.minzoom=e||0,this.maxzoom=n||24};o.prototype.validateBounds=function(t){return Array.isArray(t)&&4===t.length?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]},o.prototype.contains=function(t){var e=Math.floor(this.lngX(this.bounds.getWest(),t.z)),n=Math.floor(this.latY(this.bounds.getNorth(),t.z)),r=Math.ceil(this.lngX(this.bounds.getEast(),t.z)),i=Math.ceil(this.latY(this.bounds.getSouth(),t.z));return t.x>=e&&t.x<r&&t.y>=n&&t.y<i},o.prototype.lngX=function(t,e){return(t+180)*(Math.pow(2,e)/360)},o.prototype.latY=function(t,e){var n=i(Math.sin(Math.PI/180*t),-.9999,.9999),r=Math.pow(2,e)/(2*Math.PI);return Math.pow(2,e-1)+.5*Math.log((1+n)/(1-n))*-r},e.exports=o},{"../geo/lng_lat_bounds":63,"../util/util":275}],114:[function(t,e,n){"use strict";function r(t,e,n,r){(t*=2)<0&&(t=-1*t-1);var i=1<<e;return 32*(i*i*t+i*r+n)+e}var i=t("@mapbox/whoots-js"),o=t("../util/web_worker_transfer").register,a=t("../geo/coordinate"),s=function(t,e,n){this.z=t,this.x=e,this.y=n,this.key=r(0,t,e,n)};s.prototype.equals=function(t){return this.z===t.z&&this.x===t.x&&this.y===t.y},s.prototype.url=function(t,e){var n=i.getTileBBox(this.x,this.y,this.z),r=function(t,e,n){for(var r,i="",o=t;o>0;o--)i+=(e&(r=1<<o-1)?1:0)+(n&r?2:0);return i}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===e?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",r).replace("{bbox-epsg-3857}",n)};var u=function(t,e){this.wrap=t,this.canonical=e,this.key=r(t,e.z,e.x,e.y)},l=function(t,e,n,i,o){this.overscaledZ=t,this.wrap=e,this.canonical=new s(n,+i,+o),this.key=r(e,t,i,o)};l.prototype.scaledTo=function(t){var e=this.canonical.z-t;return t>this.canonical.z?new l(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new l(t,this.wrap,t,this.canonical.x>>e,this.canonical.y>>e)},l.prototype.isChildOf=function(t){var e=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>e&&t.canonical.y===this.canonical.y>>e},l.prototype.children=function(t){if(this.overscaledZ>=t)return[new l(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var e=this.canonical.z+1,n=2*this.canonical.x,r=2*this.canonical.y;return[new l(e,this.wrap,e,n,r),new l(e,this.wrap,e,n+1,r),new l(e,this.wrap,e,n,r+1),new l(e,this.wrap,e,n+1,r+1)]},l.prototype.isLessThan=function(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))},l.prototype.wrapped=function(){return new l(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},l.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},l.prototype.toUnwrapped=function(){return new u(this.wrap,this.canonical)},l.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},l.prototype.toCoordinate=function(){return new a(this.canonical.x+Math.pow(2,this.wrap),this.canonical.y,this.canonical.z)},o("CanonicalTileID",s),o("OverscaledTileID",l,{omit:["posMatrix"]}),e.exports={CanonicalTileID:s,OverscaledTileID:l,UnwrappedTileID:u}},{"../geo/coordinate":61,"../util/web_worker_transfer":278,"@mapbox/whoots-js":12}],115:[function(t,e,n){"use strict";var r=t("../util/evented"),i=t("../util/util"),o=t("./load_tilejson"),a=t("../util/mapbox").normalizeTileURL,s=t("./tile_bounds"),u=t("../util/ajax").ResourceType,l=t("../util/browser"),c=function(t){function e(e,n,r,o){if(t.call(this),this.id=e,this.dispatcher=r,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,i.extend(this,i.pick(n,["url","scheme","tileSize"])),this._options=i.extend({type:"vector"},n),this._collectResourceTiming=n.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(o)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.load=function(){var t=this;this.fire("dataloading",{dataType:"source"}),o(this._options,this.map._transformRequest,function(e,n){e?t.fire("error",e):n&&(i.extend(t,n),n.bounds&&(t.tileBounds=new s(n.bounds,t.minzoom,t.maxzoom)),t.fire("data",{dataType:"source",sourceDataType:"metadata"}),t.fire("data",{dataType:"source",sourceDataType:"content"}))})},e.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},e.prototype.onAdd=function(t){this.map=t,this.load()},e.prototype.serialize=function(){return i.extend({},this._options)},e.prototype.loadTile=function(t,e){function n(n,r){return t.aborted?e(null):n?e(n):(r&&r.resourceTiming&&(t.resourceTiming=r.resourceTiming),this.map._refreshExpiredTiles&&t.setExpiryData(r),t.loadVectorData(r,this.map.painter),e(null),void(t.reloadCallback&&(this.loadTile(t,t.reloadCallback),t.reloadCallback=null)))}var r=t.tileID.overscaleFactor(),i=a(t.tileID.canonical.url(this.tiles,this.scheme),this.url),o={request:this.map._transformRequest(i,u.Tile),uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,tileSize:this.tileSize*r,type:this.type,source:this.id,pixelRatio:l.devicePixelRatio,overscaling:r,showCollisionBoxes:this.map.showCollisionBoxes};o.request.collectResourceTiming=this._collectResourceTiming,void 0===t.workerID||"expired"===t.state?t.workerID=this.dispatcher.send("loadTile",o,n.bind(this)):"loading"===t.state?t.reloadCallback=e:this.dispatcher.send("reloadTile",o,n.bind(this),t.workerID)},e.prototype.abortTile=function(t){this.dispatcher.send("abortTile",{uid:t.uid,type:this.type,source:this.id},void 0,t.workerID)},e.prototype.unloadTile=function(t){t.unloadVectorData(),this.dispatcher.send("removeTile",{uid:t.uid,type:this.type,source:this.id},void 0,t.workerID)},e.prototype.hasTransition=function(){return!1},e}(r);e.exports=c},{"../util/ajax":251,"../util/browser":252,"../util/evented":260,"../util/mapbox":267,"../util/util":275,"./load_tilejson":103,"./tile_bounds":113}],116:[function(t,e,n){"use strict";function r(t,e){var n=i.getArrayBuffer(t.request,function(t,n){t?e(t):n&&e(null,{vectorTile:new o.VectorTile(new a(n.data)),rawData:n.data,cacheControl:n.cacheControl,expires:n.expires})});return function(){n.abort(),e()}}var i=t("../util/ajax"),o=t("@mapbox/vector-tile"),a=t("pbf"),s=t("./worker_tile"),u=t("../util/util"),l=t("../util/performance"),c=function(t,e,n){this.actor=t,this.layerIndex=e,this.loadVectorData=n||r,this.loading={},this.loaded={}};c.prototype.loadTile=function(t,e){var n=this,r=t.source,i=t.uid;this.loading[r]||(this.loading[r]={});var o=this.loading[r][i]=new s(t);o.abort=this.loadVectorData(t,function(a,s){if(delete n.loading[r][i],a||!s)return e(a);var c=s.rawData,h={};s.expires&&(h.expires=s.expires),s.cacheControl&&(h.cacheControl=s.cacheControl);var p={};if(t.request&&t.request.collectResourceTiming){var f=l.getEntriesByName(t.request.url);f&&(p.resourceTiming=JSON.parse(JSON.stringify(f)))}o.vectorTile=s.vectorTile,o.parse(s.vectorTile,n.layerIndex,n.actor,function(t,n){if(t||!n)return e(t);e(null,u.extend({rawTileData:c.slice(0)},n,h,p))}),n.loaded[r]=n.loaded[r]||{},n.loaded[r][i]=o})},c.prototype.reloadTile=function(t,e){var n=this.loaded[t.source],r=t.uid,i=this;if(n&&n[r]){var o=n[r];o.showCollisionBoxes=t.showCollisionBoxes,"parsing"===o.status?o.reloadCallback=e:"done"===o.status&&o.parse(o.vectorTile,this.layerIndex,this.actor,(function(t,n){if(this.reloadCallback){var r=this.reloadCallback;delete this.reloadCallback,this.parse(this.vectorTile,i.layerIndex,i.actor,r)}e(t,n)}).bind(o))}},c.prototype.abortTile=function(t,e){var n=this.loading[t.source],r=t.uid;n&&n[r]&&n[r].abort&&(n[r].abort(),delete n[r]),e()},c.prototype.removeTile=function(t,e){var n=this.loaded[t.source],r=t.uid;n&&n[r]&&delete n[r],e()},e.exports=c},{"../util/ajax":251,"../util/performance":268,"../util/util":275,"./worker_tile":119,"@mapbox/vector-tile":8,pbf:30}],117:[function(t,e,n){"use strict";var r=t("../util/ajax"),i=t("./image_source"),o=t("../data/raster_bounds_attributes"),a=t("../render/vertex_array_object"),s=t("../render/texture"),u=function(t){function e(e,n,r,i){t.call(this,e,n,r,i),this.roundZoom=!0,this.type="video",this.options=n}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.load=function(){var t=this,e=this.options;this.urls=e.urls,r.getVideo(e.urls,function(e,n){e?t.fire("error",{error:e}):n&&(t.video=n,t.video.loop=!0,t.video.addEventListener("playing",function(){t.map._rerender()}),t.map&&t.video.play(),t._finishLoading())})},e.prototype.getVideo=function(){return this.video},e.prototype.onAdd=function(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},e.prototype.prepare=function(){var t=this;if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var e=this.map.painter.context,n=e.gl;for(var r in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,o.members)),this.boundsVAO||(this.boundsVAO=new a),this.texture?this.video.paused||(this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,this.video)):(this.texture=new s(e,this.video,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE)),t.tiles){var i=t.tiles[r];"loaded"!==i.state&&(i.state="loaded",i.texture=t.texture)}}},e.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},e.prototype.hasTransition=function(){return this.video&&!this.video.paused},e}(i);e.exports=u},{"../data/raster_bounds_attributes":59,"../render/texture":93,"../render/vertex_array_object":95,"../util/ajax":251,"./image_source":102}],118:[function(t,e,n){"use strict";var r=t("../util/actor"),i=t("../style/style_layer_index"),o=t("./vector_tile_worker_source"),a=t("./raster_dem_tile_worker_source"),s=t("./geojson_worker_source"),u=t("./rtl_text_plugin"),l=function(t){var e=this;this.self=t,this.actor=new r(t,this),this.layerIndexes={},this.workerSourceTypes={vector:o,geojson:s},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(t,n){if(e.workerSourceTypes[t])throw new Error('Worker source with name "'+t+'" already registered.');e.workerSourceTypes[t]=n},this.self.registerRTLTextPlugin=function(t){if(u.applyArabicShaping||u.processBidirectionalText)throw new Error("RTL text plugin already registered.");u.applyArabicShaping=t.applyArabicShaping,u.processBidirectionalText=t.processBidirectionalText}};l.prototype.setLayers=function(t,e,n){this.getLayerIndex(t).replace(e),n()},l.prototype.updateLayers=function(t,e,n){this.getLayerIndex(t).update(e.layers,e.removedIds),n()},l.prototype.loadTile=function(t,e,n){this.getWorkerSource(t,e.type).loadTile(e,n)},l.prototype.loadDEMTile=function(t,e,n){this.getDEMWorkerSource(t).loadTile(e,n)},l.prototype.reloadTile=function(t,e,n){this.getWorkerSource(t,e.type).reloadTile(e,n)},l.prototype.abortTile=function(t,e,n){this.getWorkerSource(t,e.type).abortTile(e,n)},l.prototype.removeTile=function(t,e,n){this.getWorkerSource(t,e.type).removeTile(e,n)},l.prototype.removeDEMTile=function(t,e){this.getDEMWorkerSource(t).removeTile(e)},l.prototype.removeSource=function(t,e,n){var r=this.getWorkerSource(t,e.type);void 0!==r.removeSource?r.removeSource(e,n):n()},l.prototype.loadWorkerSource=function(t,e,n){try{this.self.importScripts(e.url),n()}catch(t){n(t)}},l.prototype.loadRTLTextPlugin=function(t,e,n){try{u.applyArabicShaping||u.processBidirectionalText||(this.self.importScripts(e),u.applyArabicShaping&&u.processBidirectionalText||n(new Error("RTL Text Plugin failed to import scripts from "+e)))}catch(t){n(t)}},l.prototype.getLayerIndex=function(t){var e=this.layerIndexes[t];return e||(e=this.layerIndexes[t]=new i),e},l.prototype.getWorkerSource=function(t,e){var n=this;return this.workerSources[t]||(this.workerSources[t]={}),this.workerSources[t][e]||(this.workerSources[t][e]=new this.workerSourceTypes[e]({send:function(e,r,i){n.actor.send(e,r,i,t)}},this.getLayerIndex(t))),this.workerSources[t][e]},l.prototype.getDEMWorkerSource=function(t){return this.demWorkerSources[t]||(this.demWorkerSources[t]=new a),this.demWorkerSources[t]},e.exports=function(t){return new l(t)}},{"../style/style_layer_index":210,"../util/actor":250,"./geojson_worker_source":100,"./raster_dem_tile_worker_source":107,"./rtl_text_plugin":109,"./vector_tile_worker_source":116}],119:[function(t,e,n){"use strict";function r(t,e){for(var n=new p(e),r=0,i=t;r<i.length;r+=1)i[r].recalculate(n)}var i=t("../data/feature_index"),o=t("../symbol/symbol_layout").performSymbolLayout,a=t("../data/array_types").CollisionBoxArray,s=t("../util/dictionary_coder"),u=t("../data/bucket/symbol_bucket"),l=t("../util/util"),c=t("../render/image_atlas").makeImageAtlas,h=t("../render/glyph_atlas").makeGlyphAtlas,p=t("../style/evaluation_parameters"),f=t("./tile_id").OverscaledTileID,d=function(t){this.tileID=new f(t.tileID.overscaledZ,t.tileID.wrap,t.tileID.canonical.z,t.tileID.canonical.x,t.tileID.canonical.y),this.uid=t.uid,this.zoom=t.zoom,this.pixelRatio=t.pixelRatio,this.tileSize=t.tileSize,this.source=t.source,this.overscaling=t.overscaling,this.showCollisionBoxes=t.showCollisionBoxes,this.collectResourceTiming=!!t.collectResourceTiming};d.prototype.parse=function(t,e,n,p){function f(){if(P)return p(P);if(A&&M){var t=h(A),e=c(M);for(var n in y){var i=y[n];i instanceof u&&(r(i.layers,this.zoom),o(i,A,t.positions,M,e.positions,this.showCollisionBoxes))}this.status="done",p(null,{buckets:l.values(y).filter(function(t){return!t.isEmpty()}),featureIndex:g,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:t.image,iconAtlasImage:e.image})}}var d=this;this.status="parsing",this.data=t,this.collisionBoxArray=new a;var m=new s(Object.keys(t.layers).sort()),g=new i(this.tileID,this.overscaling);g.bucketLayerIDs=[];var y={},v={featureIndex:g,iconDependencies:{},glyphDependencies:{}},_=e.familiesBySource[this.source];for(var b in _){var x=t.layers[b];if(x){1===x.version&&l.warnOnce('Vector tile source "'+d.source+'" layer "'+b+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var w=m.encode(b),E=[],C=0;C<x.length;C++){var S=x.feature(C);E.push({feature:S,index:C,sourceLayerIndex:w})}for(var I=0,T=_[b];I<T.length;I+=1){var k=T[I],O=k[0];O.minzoom&&d.zoom<Math.floor(O.minzoom)||O.maxzoom&&d.zoom>=O.maxzoom||"none"===O.visibility||(r(k,d.zoom),(y[O.id]=O.createBucket({index:g.bucketLayerIDs.length,layers:k,zoom:d.zoom,pixelRatio:d.pixelRatio,overscaling:d.overscaling,collisionBoxArray:d.collisionBoxArray})).populate(E,v),g.bucketLayerIDs.push(k.map(function(t){return t.id})))}}}var P,A,M,R=l.mapObject(v.glyphDependencies,function(t){return Object.keys(t).map(Number)});Object.keys(R).length?n.send("getGlyphs",{uid:this.uid,stacks:R},function(t,e){P||(P=t,A=e,f.call(d))}):A={};var L=Object.keys(v.iconDependencies);L.length?n.send("getImages",{icons:L},function(t,e){P||(P=t,M=e,f.call(d))}):M={},f.call(this)},e.exports=d},{"../data/array_types":39,"../data/bucket/symbol_bucket":51,"../data/feature_index":54,"../render/glyph_atlas":85,"../render/image_atlas":87,"../style/evaluation_parameters":182,"../symbol/symbol_layout":227,"../util/dictionary_coder":257,"../util/util":275,"./tile_id":114}],120:[function(t,e,n){"use strict";function r(t,e){var n={};for(var r in t)"ref"!==r&&(n[r]=t[r]);return i.forEach(function(t){t in e&&(n[t]=e[t])}),n}var i=t("./util/ref_properties");e.exports=function(t){t=t.slice();for(var e=Object.create(null),n=0;n<t.length;n++)e[t[n].id]=t[n];for(var i=0;i<t.length;i++)"ref"in t[i]&&(t[i]=r(t[i],e[t[i].ref]));return t}},{"./util/ref_properties":159}],121:[function(t,e,n){"use strict";function r(t,e,n){n.push({command:h.addSource,args:[t,e[t]]})}function i(t,e,n){e.push({command:h.removeSource,args:[t]}),n[t]=!0}function o(t,e,n,o){i(t,n,o),r(t,e,n)}function a(t,e,n){var r;for(r in t[n])if(t[n].hasOwnProperty(r)&&"data"!==r&&!c(t[n][r],e[n][r]))return!1;for(r in e[n])if(e[n].hasOwnProperty(r)&&"data"!==r&&!c(t[n][r],e[n][r]))return!1;return!0}function s(t,e,n,r,i,o){var a;for(a in t=t||{},e=e||{},t)t.hasOwnProperty(a)&&(c(t[a],e[a])||n.push({command:o,args:[r,a,e[a],i]}));for(a in e)e.hasOwnProperty(a)&&!t.hasOwnProperty(a)&&(c(t[a],e[a])||n.push({command:o,args:[r,a,e[a],i]}))}function u(t){return t.id}function l(t,e){return t[e.id]=e,t}var c=t("./util/deep_equal"),h={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};e.exports=function(t,e){if(!t)return[{command:h.setStyle,args:[e]}];var n=[];try{if(!c(t.version,e.version))return[{command:h.setStyle,args:[e]}];c(t.center,e.center)||n.push({command:h.setCenter,args:[e.center]}),c(t.zoom,e.zoom)||n.push({command:h.setZoom,args:[e.zoom]}),c(t.bearing,e.bearing)||n.push({command:h.setBearing,args:[e.bearing]}),c(t.pitch,e.pitch)||n.push({command:h.setPitch,args:[e.pitch]}),c(t.sprite,e.sprite)||n.push({command:h.setSprite,args:[e.sprite]}),c(t.glyphs,e.glyphs)||n.push({command:h.setGlyphs,args:[e.glyphs]}),c(t.transition,e.transition)||n.push({command:h.setTransition,args:[e.transition]}),c(t.light,e.light)||n.push({command:h.setLight,args:[e.light]});var p={},f=[];!function(t,e,n,s){var u;for(u in t=t||{},e=e||{},t)t.hasOwnProperty(u)&&(e.hasOwnProperty(u)||i(u,n,s));for(u in e)e.hasOwnProperty(u)&&(t.hasOwnProperty(u)?c(t[u],e[u])||("geojson"===t[u].type&&"geojson"===e[u].type&&a(t,e,u)?n.push({command:h.setGeoJSONSourceData,args:[u,e[u].data]}):o(u,e,n,s)):r(u,e,n))}(t.sources,e.sources,f,p);var d=[];t.layers&&t.layers.forEach(function(t){p[t.source]?n.push({command:h.removeLayer,args:[t.id]}):d.push(t)}),n=n.concat(f),function(t,e,n){t=t||[],e=e||[];var r,i,o,a,p,f,d,m=t.map(u),g=e.map(u),y=t.reduce(l,{}),v=e.reduce(l,{}),_=m.slice(),b=Object.create(null);for(r=0,i=0;r<m.length;r++)v.hasOwnProperty(o=m[r])?i++:(n.push({command:h.removeLayer,args:[o]}),_.splice(_.indexOf(o,i),1));for(r=0,i=0;r<g.length;r++)_[_.length-1-r]!==(o=g[g.length-1-r])&&(y.hasOwnProperty(o)?(n.push({command:h.removeLayer,args:[o]}),_.splice(_.lastIndexOf(o,_.length-i),1)):i++,n.push({command:h.addLayer,args:[v[o],f=_[_.length-r]]}),_.splice(_.length-r,0,o),b[o]=!0);for(r=0;r<g.length;r++)if(a=y[o=g[r]],p=v[o],!b[o]&&!c(a,p))if(c(a.source,p.source)&&c(a["source-layer"],p["source-layer"])&&c(a.type,p.type)){for(d in s(a.layout,p.layout,n,o,null,h.setLayoutProperty),s(a.paint,p.paint,n,o,null,h.setPaintProperty),c(a.filter,p.filter)||n.push({command:h.setFilter,args:[o,p.filter]}),c(a.minzoom,p.minzoom)&&c(a.maxzoom,p.maxzoom)||n.push({command:h.setLayerZoomRange,args:[o,p.minzoom,p.maxzoom]}),a)a.hasOwnProperty(d)&&"layout"!==d&&"paint"!==d&&"filter"!==d&&"metadata"!==d&&"minzoom"!==d&&"maxzoom"!==d&&(0===d.indexOf("paint.")?s(a[d],p[d],n,o,d.slice(6),h.setPaintProperty):c(a[d],p[d])||n.push({command:h.setLayerProperty,args:[o,d,p[d]]}));for(d in p)p.hasOwnProperty(d)&&!a.hasOwnProperty(d)&&"layout"!==d&&"paint"!==d&&"filter"!==d&&"metadata"!==d&&"minzoom"!==d&&"maxzoom"!==d&&(0===d.indexOf("paint.")?s(a[d],p[d],n,o,d.slice(6),h.setPaintProperty):c(a[d],p[d])||n.push({command:h.setLayerProperty,args:[o,d,p[d]]}))}else n.push({command:h.removeLayer,args:[o]}),f=_[_.lastIndexOf(o)+1],n.push({command:h.addLayer,args:[p,f]})}(d,e.layers,n)}catch(t){console.warn("Unable to compute style diff:",t),n=[{command:h.setStyle,args:[e]}]}return n},e.exports.operations=h},{"./util/deep_equal":155}],122:[function(t,e,n){"use strict";e.exports=function(t,e,n){this.message=(t?t+": ":"")+n,null!==e&&void 0!==e&&e.__line__&&(this.line=e.__line__)}},{}],123:[function(t,e,n){"use strict";var r=t("./types").toString,i=t("./parsing_context"),o=(t("./evaluation_context"),function(t,e,n,r){this.name=t,this.type=e,this._evaluate=n,this.args=r});o.prototype.evaluate=function(t){return this._evaluate(t,this.args)},o.prototype.eachChild=function(t){this.args.forEach(t)},o.prototype.possibleOutputs=function(){return[void 0]},o.parse=function(t,e){var n=t[0],a=o.definitions[n];if(!a)return e.error('Unknown expression "'+n+'". If you wanted a literal array, use ["literal", [...]].',0);for(var s=Array.isArray(a)?a[0]:a.type,u=Array.isArray(a)?[[a[1],a[2]]]:a.overloads,l=u.filter(function(e){var n=e[0];return!Array.isArray(n)||n.length===t.length-1}),c=[],h=1;h<t.length;h++){var p=t[h],f=void 0;if(1===l.length){var d=l[0][0];f=Array.isArray(d)?d[h-1]:d.type}var m=e.parse(p,1+c.length,f);if(!m)return null;c.push(m)}for(var g=null,y=0,v=l;y<v.length;y+=1){var _=v[y],b=_[0],x=_[1];if(g=new i(e.registry,e.path,null,e.scope),Array.isArray(b)&&b.length!==c.length)g.error("Expected "+b.length+" arguments, but found "+c.length+" instead.");else{for(var w=0;w<c.length;w++){var E=Array.isArray(b)?b[w]:b.type,C=c[w];g.concat(w+1).checkSubtype(E,C.type)}if(0===g.errors.length)return new o(n,s,x,c)}}if(1===l.length)e.errors.push.apply(e.errors,g.errors);else{var S=(l.length?l:u).map(function(t){return function(t){return Array.isArray(t)?"("+t.map(r).join(", ")+")":"("+r(t.type)+"...)"}(t[0])}).join(" | "),I=c.map(function(t){return r(t.type)}).join(", ");e.error("Expected arguments of type "+S+", but found ("+I+") instead.")}return null},o.register=function(t,e){for(var n in o.definitions=e,e)t[n]=o},e.exports={CompoundExpression:o,varargs:function(t){return{type:t}}}},{"./evaluation_context":138,"./parsing_context":141,"./types":146}],124:[function(t,e,n){"use strict";var r=t("../types"),i=r.toString,o=r.array,a=r.ValueType,s=r.StringType,u=r.NumberType,l=r.BooleanType,c=r.checkSubtype,h=t("../values").typeOf,p=t("../runtime_error"),f={string:s,number:u,boolean:l},d=function(t,e){this.type=t,this.input=e};d.parse=function(t,e){if(t.length<2||t.length>4)return e.error("Expected 1, 2, or 3 arguments, but found "+(t.length-1)+" instead.");var n,r;if(t.length>2){var i=t[1];if("string"!=typeof i||!(i in f))return e.error('The item type argument of "array" must be one of string, number, boolean',1);n=f[i]}else n=a;if(t.length>3){if("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2]))return e.error('The length argument to "array" must be a positive integer literal',2);r=t[2]}var s=o(n,r),u=e.parse(t[t.length-1],t.length-1,a);return u?new d(s,u):null},d.prototype.evaluate=function(t){var e=this.input.evaluate(t);if(c(this.type,h(e)))throw new p("Expected value to be of type "+i(this.type)+", but found "+i(h(e))+" instead.");return e},d.prototype.eachChild=function(t){t(this.input)},d.prototype.possibleOutputs=function(){return this.input.possibleOutputs()},e.exports=d},{"../runtime_error":143,"../types":146,"../values":147}],125:[function(t,e,n){"use strict";var r=t("../types"),i=r.ObjectType,o=r.ValueType,a=r.StringType,s=r.NumberType,u=r.BooleanType,l=t("../runtime_error"),c=t("../types"),h=c.checkSubtype,p=c.toString,f=t("../values").typeOf,d={string:a,number:s,boolean:u,object:i},m=function(t,e){this.type=t,this.args=e};m.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");for(var n=d[t[0]],r=[],i=1;i<t.length;i++){var a=e.parse(t[i],i,o);if(!a)return null;r.push(a)}return new m(n,r)},m.prototype.evaluate=function(t){for(var e=this,n=0;n<this.args.length;n++){var r=e.args[n].evaluate(t);if(!h(e.type,f(r)))return r;if(n===e.args.length-1)throw new l("Expected value to be of type "+p(e.type)+", but found "+p(f(r))+" instead.")}return null},m.prototype.eachChild=function(t){this.args.forEach(t)},m.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.args.map(function(t){return t.possibleOutputs()}));var t},e.exports=m},{"../runtime_error":143,"../types":146,"../values":147}],126:[function(t,e,n){"use strict";var r=t("../types"),i=r.array,o=r.ValueType,a=r.NumberType,s=t("../runtime_error"),u=function(t,e,n){this.type=t,this.index=e,this.input=n};u.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var n=e.parse(t[1],1,a),r=e.parse(t[2],2,i(e.expectedType||o));return n&&r?new u(r.type.itemType,n,r):null},u.prototype.evaluate=function(t){var e=this.index.evaluate(t),n=this.input.evaluate(t);if(e<0||e>=n.length)throw new s("Array index out of bounds: "+e+" > "+n.length+".");if(e!==Math.floor(e))throw new s("Array index must be an integer, but found "+e+" instead.");return n[e]},u.prototype.eachChild=function(t){t(this.index),t(this.input)},u.prototype.possibleOutputs=function(){return[void 0]},e.exports=u},{"../runtime_error":143,"../types":146}],127:[function(t,e,n){"use strict";var r=t("../types").BooleanType,i=function(t,e,n){this.type=t,this.branches=e,this.otherwise=n};i.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found only "+(t.length-1)+".");if(t.length%2!=0)return e.error("Expected an odd number of arguments.");var n;e.expectedType&&"value"!==e.expectedType.kind&&(n=e.expectedType);for(var o=[],a=1;a<t.length-1;a+=2){var s=e.parse(t[a],a,r);if(!s)return null;var u=e.parse(t[a+1],a+1,n);if(!u)return null;o.push([s,u]),n=n||u.type}var l=e.parse(t[t.length-1],t.length-1,n);return l?new i(n,o,l):null},i.prototype.evaluate=function(t){for(var e=0,n=this.branches;e<n.length;e+=1){var r=n[e],i=r[1];if(r[0].evaluate(t))return i.evaluate(t)}return this.otherwise.evaluate(t)},i.prototype.eachChild=function(t){for(var e=0,n=this.branches;e<n.length;e+=1){var r=n[e],i=r[1];t(r[0]),t(i)}t(this.otherwise)},i.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.branches.map(function(t){return t[1].possibleOutputs()})).concat(this.otherwise.possibleOutputs());var t},e.exports=i},{"../types":146}],128:[function(t,e,n){"use strict";var r=t("../types"),i=r.checkSubtype,o=r.ValueType,a=function(t,e){this.type=t,this.args=e};a.parse=function(t,e){if(t.length<2)return e.error("Expectected at least one argument.");var n=null,r=e.expectedType;r&&"value"!==r.kind&&(n=r);for(var s=[],u=0,l=t.slice(1);u<l.length;u+=1){var c=e.parse(l[u],1+s.length,n,void 0,{omitTypeAnnotations:!0});if(!c)return null;n=n||c.type,s.push(c)}return r&&s.some(function(t){return i(r,t.type)})?new a(o,s):new a(n,s)},a.prototype.evaluate=function(t){for(var e=null,n=0,r=this.args;n<r.length&&null===(e=r[n].evaluate(t));n+=1);return e},a.prototype.eachChild=function(t){this.args.forEach(t)},a.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.args.map(function(t){return t.possibleOutputs()}));var t},e.exports=a},{"../types":146}],129:[function(t,e,n){"use strict";var r=t("../types"),i=r.ColorType,o=r.ValueType,a=r.NumberType,s=t("../values"),u=s.Color,l=s.validateRGBA,c=t("../runtime_error"),h={"to-number":a,"to-color":i},p=function(t,e){this.type=t,this.args=e};p.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");for(var n=h[t[0]],r=[],i=1;i<t.length;i++){var a=e.parse(t[i],i,o);if(!a)return null;r.push(a)}return new p(n,r)},p.prototype.evaluate=function(t){if("color"===this.type.kind){for(var e,n,r=0,i=this.args;r<i.length;r+=1)if(n=null,"string"==typeof(e=i[r].evaluate(t))){var o=t.parseColor(e);if(o)return o}else if(Array.isArray(e)&&!(n=e.length<3||e.length>4?"Invalid rbga value "+JSON.stringify(e)+": expected an array containing either three or four numeric values.":l(e[0],e[1],e[2],e[3])))return new u(e[0]/255,e[1]/255,e[2]/255,e[3]);throw new c(n||"Could not parse color from value '"+("string"==typeof e?e:JSON.stringify(e))+"'")}for(var a=null,s=0,h=this.args;s<h.length;s+=1)if(null!==(a=h[s].evaluate(t))){var p=Number(a);if(!isNaN(p))return p}throw new c("Could not convert "+JSON.stringify(a)+" to number.")},p.prototype.eachChild=function(t){this.args.forEach(t)},p.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.args.map(function(t){return t.possibleOutputs()}));var t},e.exports=p},{"../runtime_error":143,"../types":146,"../values":147}],130:[function(t,e,n){"use strict";function r(t){return"string"===t.kind||"number"===t.kind||"boolean"===t.kind||"null"===t.kind}function i(t){return function(){function e(t,e){this.type=s,this.lhs=t,this.rhs=e}return e.parse=function(t,n){if(3!==t.length)return n.error("Expected two arguments.");var i=n.parse(t[1],1,a);if(!i)return null;var o=n.parse(t[2],2,a);return o?r(i.type)||r(o.type)?i.type.kind!==o.type.kind&&"value"!==i.type.kind&&"value"!==o.type.kind?n.error("Cannot compare "+u(i.type)+" and "+u(o.type)+"."):new e(i,o):n.error("Expected at least one argument to be a string, number, boolean, or null, but found ("+u(i.type)+", "+u(o.type)+") instead."):null},e.prototype.evaluate=function(e){return t(this.lhs.evaluate(e),this.rhs.evaluate(e))},e.prototype.eachChild=function(t){t(this.lhs),t(this.rhs)},e.prototype.possibleOutputs=function(){return[!0,!1]},e}()}var o=t("../types"),a=o.ValueType,s=o.BooleanType,u=t("../types").toString;e.exports={Equals:i(function(t,e){return t===e}),NotEquals:i(function(t,e){return t!==e})}},{"../types":146}],131:[function(t,e,n){"use strict";function r(t,e){var n=e[0],r=e[1],i=e[2],o=e[3];n=n.evaluate(t),r=r.evaluate(t),i=i.evaluate(t);var a=o?o.evaluate(t):1,s=C(n,r,i,a);if(s)throw new k(s);return new E(n/255*a,r/255*a,i/255*a,a)}function i(t,e){return t in e}function o(t,e){var n=e[t];return void 0===n?null:n}function a(t,e){return e[0].evaluate(t).length}function s(t,e){var n=e[1];return e[0].evaluate(t)<n.evaluate(t)}function u(t,e){var n=e[1];return e[0].evaluate(t)>n.evaluate(t)}function l(t,e){var n=e[1];return e[0].evaluate(t)<=n.evaluate(t)}function c(t,e){var n=e[1];return e[0].evaluate(t)>=n.evaluate(t)}var h=t("../types"),p=h.NumberType,f=h.StringType,d=h.BooleanType,m=h.ColorType,g=h.ObjectType,y=h.ValueType,v=h.ErrorType,_=h.array,b=h.toString,x=t("../values"),w=x.typeOf,E=x.Color,C=x.validateRGBA,S=t("../compound_expression"),I=S.CompoundExpression,T=S.varargs,k=t("../runtime_error"),O=t("./let"),P=t("./var"),A=t("./literal"),M=t("./assertion"),R=t("./array"),L=t("./coercion"),N=t("./at"),D=t("./match"),F=t("./case"),z=t("./step"),j=t("./interpolate"),B=t("./coalesce"),V=t("./equals"),q={"==":V.Equals,"!=":V.NotEquals,array:R,at:N,boolean:M,case:F,coalesce:B,interpolate:j,let:O,literal:A,match:D,number:M,object:M,step:z,string:M,"to-color":L,"to-number":L,var:P};I.register(q,{error:[v,[f],function(t,e){throw new k(e[0].evaluate(t))}],typeof:[f,[y],function(t,e){return b(w(e[0].evaluate(t)))}],"to-string":[f,[y],function(t,e){var n=e[0],r=typeof(n=n.evaluate(t));return null===n||"string"===r||"number"===r||"boolean"===r?String(n):n instanceof E?n.toString():JSON.stringify(n)}],"to-boolean":[d,[y],function(t,e){return Boolean(e[0].evaluate(t))}],"to-rgba":[_(p,4),[m],function(t,e){var n=e[0].evaluate(t),r=n.a;return[255*n.r/r,255*n.g/r,255*n.b/r,r]}],rgb:[m,[p,p,p],r],rgba:[m,[p,p,p,p],r],length:{type:p,overloads:[[[f],a],[[_(y)],a]]},has:{type:d,overloads:[[[f],function(t,e){return i(e[0].evaluate(t),t.properties())}],[[f,g],function(t,e){var n=e[1];return i(e[0].evaluate(t),n.evaluate(t))}]]},get:{type:y,overloads:[[[f],function(t,e){return o(e[0].evaluate(t),t.properties())}],[[f,g],function(t,e){var n=e[1];return o(e[0].evaluate(t),n.evaluate(t))}]]},properties:[g,[],function(t){return t.properties()}],"geometry-type":[f,[],function(t){return t.geometryType()}],id:[y,[],function(t){return t.id()}],zoom:[p,[],function(t){return t.globals.zoom}],"heatmap-density":[p,[],function(t){return t.globals.heatmapDensity||0}],"+":[p,T(p),function(t,e){for(var n=0,r=0,i=e;r<i.length;r+=1)n+=i[r].evaluate(t);return n}],"*":[p,T(p),function(t,e){for(var n=1,r=0,i=e;r<i.length;r+=1)n*=i[r].evaluate(t);return n}],"-":{type:p,overloads:[[[p,p],function(t,e){var n=e[1];return e[0].evaluate(t)-n.evaluate(t)}],[[p],function(t,e){return-e[0].evaluate(t)}]]},"/":[p,[p,p],function(t,e){var n=e[1];return e[0].evaluate(t)/n.evaluate(t)}],"%":[p,[p,p],function(t,e){var n=e[1];return e[0].evaluate(t)%n.evaluate(t)}],ln2:[p,[],function(){return Math.LN2}],pi:[p,[],function(){return Math.PI}],e:[p,[],function(){return Math.E}],"^":[p,[p,p],function(t,e){var n=e[1];return Math.pow(e[0].evaluate(t),n.evaluate(t))}],sqrt:[p,[p],function(t,e){return Math.sqrt(e[0].evaluate(t))}],log10:[p,[p],function(t,e){return Math.log10(e[0].evaluate(t))}],ln:[p,[p],function(t,e){return Math.log(e[0].evaluate(t))}],log2:[p,[p],function(t,e){return Math.log2(e[0].evaluate(t))}],sin:[p,[p],function(t,e){return Math.sin(e[0].evaluate(t))}],cos:[p,[p],function(t,e){return Math.cos(e[0].evaluate(t))}],tan:[p,[p],function(t,e){return Math.tan(e[0].evaluate(t))}],asin:[p,[p],function(t,e){return Math.asin(e[0].evaluate(t))}],acos:[p,[p],function(t,e){return Math.acos(e[0].evaluate(t))}],atan:[p,[p],function(t,e){return Math.atan(e[0].evaluate(t))}],min:[p,T(p),function(t,e){return Math.min.apply(Math,e.map(function(e){return e.evaluate(t)}))}],max:[p,T(p),function(t,e){return Math.max.apply(Math,e.map(function(e){return e.evaluate(t)}))}],"filter-==":[d,[f,y],function(t,e){var n=e[0],r=e[1];return t.properties()[n.value]===r.value}],"filter-id-==":[d,[y],function(t,e){var n=e[0];return t.id()===n.value}],"filter-type-==":[d,[f],function(t,e){var n=e[0];return t.geometryType()===n.value}],"filter-<":[d,[f,y],function(t,e){var n=e[0],r=e[1],i=t.properties()[n.value],o=r.value;return typeof i==typeof o&&i<o}],"filter-id-<":[d,[y],function(t,e){var n=e[0],r=t.id(),i=n.value;return typeof r==typeof i&&r<i}],"filter->":[d,[f,y],function(t,e){var n=e[0],r=e[1],i=t.properties()[n.value],o=r.value;return typeof i==typeof o&&i>o}],"filter-id->":[d,[y],function(t,e){var n=e[0],r=t.id(),i=n.value;return typeof r==typeof i&&r>i}],"filter-<=":[d,[f,y],function(t,e){var n=e[0],r=e[1],i=t.properties()[n.value],o=r.value;return typeof i==typeof o&&i<=o}],"filter-id-<=":[d,[y],function(t,e){var n=e[0],r=t.id(),i=n.value;return typeof r==typeof i&&r<=i}],"filter->=":[d,[f,y],function(t,e){var n=e[0],r=e[1],i=t.properties()[n.value],o=r.value;return typeof i==typeof o&&i>=o}],"filter-id->=":[d,[y],function(t,e){var n=e[0],r=t.id(),i=n.value;return typeof r==typeof i&&r>=i}],"filter-has":[d,[y],function(t,e){return e[0].value in t.properties()}],"filter-has-id":[d,[],function(t){return null!==t.id()}],"filter-type-in":[d,[_(f)],function(t,e){return e[0].value.indexOf(t.geometryType())>=0}],"filter-id-in":[d,[_(y)],function(t,e){return e[0].value.indexOf(t.id())>=0}],"filter-in-small":[d,[f,_(y)],function(t,e){var n=e[0];return e[1].value.indexOf(t.properties()[n.value])>=0}],"filter-in-large":[d,[f,_(y)],function(t,e){var n=e[0],r=e[1];return function(t,e,n,r){for(;n<=r;){var i=n+r>>1;if(e[i]===t)return!0;e[i]>t?r=i-1:n=i+1}return!1}(t.properties()[n.value],r.value,0,r.value.length-1)}],">":{type:d,overloads:[[[p,p],u],[[f,f],u]]},"<":{type:d,overloads:[[[p,p],s],[[f,f],s]]},">=":{type:d,overloads:[[[p,p],c],[[f,f],c]]},"<=":{type:d,overloads:[[[p,p],l],[[f,f],l]]},all:{type:d,overloads:[[[d,d],function(t,e){var n=e[1];return e[0].evaluate(t)&&n.evaluate(t)}],[T(d),function(t,e){for(var n=0,r=e;n<r.length;n+=1)if(!r[n].evaluate(t))return!1;return!0}]]},any:{type:d,overloads:[[[d,d],function(t,e){var n=e[1];return e[0].evaluate(t)||n.evaluate(t)}],[T(d),function(t,e){for(var n=0,r=e;n<r.length;n+=1)if(r[n].evaluate(t))return!0;return!1}]]},"!":[d,[d],function(t,e){return!e[0].evaluate(t)}],upcase:[f,[f],function(t,e){return e[0].evaluate(t).toUpperCase()}],downcase:[f,[f],function(t,e){return e[0].evaluate(t).toLowerCase()}],concat:[f,T(f),function(t,e){return e.map(function(e){return e.evaluate(t)}).join("")}]}),e.exports=q},{"../compound_expression":123,"../runtime_error":143,"../types":146,"../values":147,"./array":124,"./assertion":125,"./at":126,"./case":127,"./coalesce":128,"./coercion":129,"./equals":130,"./interpolate":132,"./let":133,"./literal":134,"./match":135,"./step":136,"./var":137}],132:[function(t,e,n){"use strict";function r(t,e,n,r){var i=r-n,o=t-n;return 0===i?0:1===e?o/i:(Math.pow(e,o)-1)/(Math.pow(e,i)-1)}var i=t("@mapbox/unitbezier"),o=t("../../util/interpolate"),a=t("../types"),s=a.toString,u=a.NumberType,l=t("../stops").findStopLessThanOrEqualTo,c=function(t,e,n,r){this.type=t,this.interpolation=e,this.input=n,this.labels=[],this.outputs=[];for(var i=0,o=r;i<o.length;i+=1){var a=o[i],s=a[1];this.labels.push(a[0]),this.outputs.push(s)}};c.interpolationFactor=function(t,e,n,o){var a=0;if("exponential"===t.name)a=r(e,t.base,n,o);else if("linear"===t.name)a=r(e,1,n,o);else if("cubic-bezier"===t.name){var s=t.controlPoints;a=new i(s[0],s[1],s[2],s[3]).solve(r(e,1,n,o))}return a},c.parse=function(t,e){var n=t[1],r=t[2],i=t.slice(3);if(!Array.isArray(n)||0===n.length)return e.error("Expected an interpolation type expression.",1);if("linear"===n[0])n={name:"linear"};else if("exponential"===n[0]){var o=n[1];if("number"!=typeof o)return e.error("Exponential interpolation requires a numeric base.",1,1);n={name:"exponential",base:o}}else{if("cubic-bezier"!==n[0])return e.error("Unknown interpolation type "+String(n[0]),1,0);var a=n.slice(1);if(4!==a.length||a.some(function(t){return"number"!=typeof t||t<0||t>1}))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);n={name:"cubic-bezier",controlPoints:a}}if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(!(r=e.parse(r,2,u)))return null;var l=[],h=null;e.expectedType&&"value"!==e.expectedType.kind&&(h=e.expectedType);for(var p=0;p<i.length;p+=2){var f=i[p],d=i[p+1],m=p+3,g=p+4;if("number"!=typeof f)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',m);if(l.length&&l[l.length-1][0]>=f)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',m);var y=e.parse(d,g,h);if(!y)return null;h=h||y.type,l.push([f,y])}return"number"===h.kind||"color"===h.kind||"array"===h.kind&&"number"===h.itemType.kind&&"number"==typeof h.N?new c(h,n,r,l):e.error("Type "+s(h)+" is not interpolatable.")},c.prototype.evaluate=function(t){var e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);var r=this.input.evaluate(t);if(r<=e[0])return n[0].evaluate(t);var i=e.length;if(r>=e[i-1])return n[i-1].evaluate(t);var a=l(e,r),s=c.interpolationFactor(this.interpolation,r,e[a],e[a+1]),u=n[a].evaluate(t),h=n[a+1].evaluate(t);return o[this.type.kind.toLowerCase()](u,h,s)},c.prototype.eachChild=function(t){t(this.input);for(var e=0,n=this.outputs;e<n.length;e+=1)t(n[e])},c.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.outputs.map(function(t){return t.possibleOutputs()}));var t},e.exports=c},{"../../util/interpolate":158,"../stops":145,"../types":146,"@mapbox/unitbezier":7}],133:[function(t,e,n){"use strict";var r=function(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e};r.prototype.evaluate=function(t){t.pushScope(this.bindings);var e=this.result.evaluate(t);return t.popScope(),e},r.prototype.eachChild=function(t){for(var e=0,n=this.bindings;e<n.length;e+=1)t(n[e][1]);t(this.result)},r.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found "+(t.length-1)+" instead.");for(var n=[],i=1;i<t.length-1;i+=2){var o=t[i];if("string"!=typeof o)return e.error("Expected string, but found "+typeof o+" instead.",i);if(/[^a-zA-Z0-9_]/.test(o))return e.error("Variable names must contain only alphanumeric characters or '_'.",i);var a=e.parse(t[i+1],i+1);if(!a)return null;n.push([o,a])}var s=e.parse(t[t.length-1],t.length-1,void 0,n);return s?new r(n,s):null},r.prototype.possibleOutputs=function(){return this.result.possibleOutputs()},e.exports=r},{}],134:[function(t,e,n){"use strict";var r=t("../values"),i=r.isValue,o=r.typeOf,a=function(t,e){this.type=t,this.value=e};a.parse=function(t,e){if(2!==t.length)return e.error("'literal' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(!i(t[1]))return e.error("invalid value");var n=t[1],r=o(n),s=e.expectedType;return"array"!==r.kind||0!==r.N||!s||"array"!==s.kind||"number"==typeof s.N&&0!==s.N||(r=s),new a(r,n)},a.prototype.evaluate=function(){return this.value},a.prototype.eachChild=function(){},a.prototype.possibleOutputs=function(){return[this.value]},e.exports=a},{"../values":147}],135:[function(t,e,n){"use strict";var r=t("../values").typeOf,i=function(t,e,n,r,i,o){this.inputType=t,this.type=e,this.input=n,this.cases=r,this.outputs=i,this.otherwise=o};i.parse=function(t,e){if(t.length<5)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if(t.length%2!=1)return e.error("Expected an even number of arguments.");var n,o;e.expectedType&&"value"!==e.expectedType.kind&&(o=e.expectedType);for(var a={},s=[],u=2;u<t.length-1;u+=2){var l=t[u],c=t[u+1];Array.isArray(l)||(l=[l]);var h=e.concat(u);if(0===l.length)return h.error("Expected at least one branch label.");for(var p=0,f=l;p<f.length;p+=1){var d=f[p];if("number"!=typeof d&&"string"!=typeof d)return h.error("Branch labels must be numbers or strings.");if("number"==typeof d&&Math.abs(d)>Number.MAX_SAFE_INTEGER)return h.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof d&&Math.floor(d)!==d)return h.error("Numeric branch labels must be integer values.");if(n){if(h.checkSubtype(n,r(d)))return null}else n=r(d);if(void 0!==a[String(d)])return h.error("Branch labels must be unique.");a[String(d)]=s.length}var m=e.parse(c,u,o);if(!m)return null;o=o||m.type,s.push(m)}var g=e.parse(t[1],1,n);if(!g)return null;var y=e.parse(t[t.length-1],t.length-1,o);return y?new i(n,o,g,a,s,y):null},i.prototype.evaluate=function(t){var e=this.input.evaluate(t);return(this.outputs[this.cases[e]]||this.otherwise).evaluate(t)},i.prototype.eachChild=function(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)},i.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.outputs.map(function(t){return t.possibleOutputs()})).concat(this.otherwise.possibleOutputs());var t},e.exports=i},{"../values":147}],136:[function(t,e,n){"use strict";var r=t("../types").NumberType,i=t("../stops").findStopLessThanOrEqualTo,o=function(t,e,n){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(var r=0,i=n;r<i.length;r+=1){var o=i[r],a=o[1];this.labels.push(o[0]),this.outputs.push(a)}};o.parse=function(t,e){var n=t[1],i=t.slice(2);if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(!(n=e.parse(n,1,r)))return null;var a=[],s=null;e.expectedType&&"value"!==e.expectedType.kind&&(s=e.expectedType),i.unshift(-1/0);for(var u=0;u<i.length;u+=2){var l=i[u],c=i[u+1],h=u+1,p=u+2;if("number"!=typeof l)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',h);if(a.length&&a[a.length-1][0]>=l)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',h);var f=e.parse(c,p,s);if(!f)return null;s=s||f.type,a.push([l,f])}return new o(s,n,a)},o.prototype.evaluate=function(t){var e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);var r=this.input.evaluate(t);if(r<=e[0])return n[0].evaluate(t);var o=e.length;return r>=e[o-1]?n[o-1].evaluate(t):n[i(e,r)].evaluate(t)},o.prototype.eachChild=function(t){t(this.input);for(var e=0,n=this.outputs;e<n.length;e+=1)t(n[e])},o.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.outputs.map(function(t){return t.possibleOutputs()}));var t},e.exports=o},{"../stops":145,"../types":146}],137:[function(t,e,n){"use strict";var r=function(t,e){this.type=e,this.name=t};r.parse=function(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");var n=t[1];return e.scope.has(n)?new r(n,e.scope.get(n).type):e.error('Unknown variable "'+n+'". Make sure "'+n+'" has been bound in an enclosing "let" expression before using it.',1)},r.prototype.evaluate=function(t){return t.scope.get(this.name).evaluate(t)},r.prototype.eachChild=function(){},r.prototype.possibleOutputs=function(){return[void 0]},e.exports=r},{}],138:[function(t,e,n){"use strict";var r=t("./scope"),i=t("./values").Color,o=["Unknown","Point","LineString","Polygon"],a=function(){this.scope=new r,this._parseColorCache={}};a.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},a.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?o[this.feature.type]:this.feature.type:null},a.prototype.properties=function(){return this.feature&&this.feature.properties||{}},a.prototype.pushScope=function(t){this.scope=this.scope.concat(t)},a.prototype.popScope=function(){this.scope=this.scope.parent},a.prototype.parseColor=function(t){var e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=i.parse(t)),e},e.exports=a},{"./scope":144,"./values":147}],139:[function(t,e,n){"use strict";function r(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in m}function i(t,e,n){void 0===n&&(n={});var r=new u(m,[],function(t){var e={color:A,string:M,number:R,enum:M,boolean:L};return"array"===t.type?D(e[t.value]||N,t.length):e[t.type]||null}(e)),i=r.parse(t);return i?_(!1===n.handleErrors?new x(i):new w(i,e)):b(r.errors)}function o(t,e,n){if(void 0===n&&(n={}),"error"===(t=i(t,e,n)).result)return t;var r=t.value.expression,o=g.isFeatureConstant(r);if(!o&&!e["property-function"])return b([new s("","property expressions not supported")]);var a=g.isGlobalPropertyConstant(r,["zoom"]);if(!a&&!1===e["zoom-function"])return b([new s("","zoom expressions not supported")]);var u=function t(e){var n=null;if(e instanceof d)n=t(e.result);else if(e instanceof f)for(var r=0,i=e.args;r<i.length&&!(n=t(i[r]));r+=1);else(e instanceof h||e instanceof p)&&e.input instanceof c&&"zoom"===e.input.name&&(n=e);return n instanceof s?n:(e.eachChild(function(e){var r=t(e);r instanceof s?n=r:!n&&r?n=new s("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&r&&n!==r&&(n=new s("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n)}(r);return u||a?u instanceof s?b([u]):u instanceof p&&"piecewise-constant"===e.function?b([new s("",'"interpolate" expressions cannot be used with this property')]):_(u?new C(o?"camera":"composite",t.value,u):new E(o?"constant":"source",t.value)):b([new s("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}var a=t("../util/extend"),s=t("./parsing_error"),u=t("./parsing_context"),l=t("./evaluation_context"),c=t("./compound_expression").CompoundExpression,h=t("./definitions/step"),p=t("./definitions/interpolate"),f=t("./definitions/coalesce"),d=t("./definitions/let"),m=t("./definitions"),g=t("./is_constant"),y=t("./runtime_error"),v=t("../util/result"),_=v.success,b=v.error,x=function(t){this.expression=t};x.prototype.evaluate=function(t,e){return this._evaluator||(this._evaluator=new l),this._evaluator.globals=t,this._evaluator.feature=e,this.expression.evaluate(this._evaluator)};var w=function(t){function e(e,n){t.call(this,e),this._warningHistory={},this._defaultValue=function(t){return"color"===t.type&&I(t.default)?new k(0,0,0,0):"color"===t.type?k.parse(t.default)||null:void 0===t.default?null:t.default}(n),"enum"===n.type&&(this._enumValues=n.values)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.evaluate=function(t,e){this._evaluator||(this._evaluator=new l),this._evaluator.globals=t,this._evaluator.feature=e;try{var n=this.expression.evaluate(this._evaluator);if(null===n||void 0===n)return this._defaultValue;if(this._enumValues&&!(n in this._enumValues))throw new y("Expected value to be one of "+Object.keys(this._enumValues).map(function(t){return JSON.stringify(t)}).join(", ")+", but found "+JSON.stringify(n)+" instead.");return n}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}},e}(x),E=function(t,e){this.kind=t,this._styleExpression=e};E.prototype.evaluate=function(t,e){return this._styleExpression.evaluate(t,e)};var C=function(t,e,n){this.kind=t,this.zoomStops=n.labels,this._styleExpression=e,n instanceof p&&(this._interpolationType=n.interpolation)};C.prototype.evaluate=function(t,e){return this._styleExpression.evaluate(t,e)},C.prototype.interpolationFactor=function(t,e,n){return this._interpolationType?p.interpolationFactor(this._interpolationType,t,e,n):0};var S=t("../function"),I=S.isFunction,T=S.createFunction,k=t("./values").Color,O=function(t,e){this._parameters=t,this._specification=e,a(this,T(this._parameters,this._specification))};O.deserialize=function(t){return new O(t._parameters,t._specification)},O.serialize=function(t){return{_parameters:t._parameters,_specification:t._specification}},e.exports={StyleExpression:x,StyleExpressionWithErrorHandling:w,isExpression:r,createExpression:i,createPropertyExpression:o,normalizePropertyExpression:function(t,e){if(I(t))return new O(t,e);if(r(t)){var n=o(t,e);if("error"===n.result)throw new Error(n.value.map(function(t){return t.key+": "+t.message}).join(", "));return n.value}var i=t;return"string"==typeof t&&"color"===e.type&&(i=k.parse(t)),{kind:"constant",evaluate:function(){return i}}},ZoomConstantExpression:E,ZoomDependentExpression:C,StylePropertyFunction:O};var P=t("./types"),A=P.ColorType,M=P.StringType,R=P.NumberType,L=P.BooleanType,N=P.ValueType,D=P.array},{"../function":149,"../util/extend":156,"../util/result":160,"./compound_expression":123,"./definitions":131,"./definitions/coalesce":128,"./definitions/interpolate":132,"./definitions/let":133,"./definitions/step":136,"./evaluation_context":138,"./is_constant":140,"./parsing_context":141,"./parsing_error":142,"./runtime_error":143,"./types":146,"./values":147}],140:[function(t,e,n){"use strict";var r=t("./compound_expression").CompoundExpression;e.exports={isFeatureConstant:function t(e){if(e instanceof r){if("get"===e.name&&1===e.args.length)return!1;if("has"===e.name&&1===e.args.length)return!1;if("properties"===e.name||"geometry-type"===e.name||"id"===e.name)return!1;if(/^filter-/.test(e.name))return!1}var n=!0;return e.eachChild(function(e){n&&!t(e)&&(n=!1)}),n},isGlobalPropertyConstant:function t(e,n){if(e instanceof r&&n.indexOf(e.name)>=0)return!1;var i=!0;return e.eachChild(function(e){i&&!t(e,n)&&(i=!1)}),i}}},{"./compound_expression":123}],141:[function(t,e,n){"use strict";var r=t("./scope"),i=t("./types").checkSubtype,o=t("./parsing_error"),a=t("./definitions/literal"),s=t("./definitions/assertion"),u=t("./definitions/array"),l=t("./definitions/coercion"),c=function(t,e,n,i,o){void 0===e&&(e=[]),void 0===i&&(i=new r),void 0===o&&(o=[]),this.registry=t,this.path=e,this.key=e.map(function(t){return"["+t+"]"}).join(""),this.scope=i,this.errors=o,this.expectedType=n};c.prototype.parse=function(e,n,r,i,o){void 0===o&&(o={});var c=this;if(n&&(c=c.concat(n,r,i)),null!==e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e||(e=["literal",e]),Array.isArray(e)){if(0===e.length)return c.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var h=e[0];if("string"!=typeof h)return c.error("Expression name must be a string, but found "+typeof h+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var p=c.registry[h];if(p){var f=p.parse(e,c);if(!f)return null;if(c.expectedType){var d=c.expectedType,m=f.type;if("string"!==d.kind&&"number"!==d.kind&&"boolean"!==d.kind||"value"!==m.kind)if("array"===d.kind&&"value"===m.kind)o.omitTypeAnnotations||(f=new u(d,f));else if("color"!==d.kind||"value"!==m.kind&&"string"!==m.kind){if(c.checkSubtype(c.expectedType,f.type))return null}else o.omitTypeAnnotations||(f=new l(d,[f]));else o.omitTypeAnnotations||(f=new s(d,[f]))}if(!(f instanceof a)&&function(e){var n=t("./compound_expression").CompoundExpression,r=t("./is_constant"),i=r.isGlobalPropertyConstant,o=r.isFeatureConstant;if(e instanceof t("./definitions/var"))return!1;if(e instanceof n&&"error"===e.name)return!1;var s=!0;return e.eachChild(function(t){t instanceof a||(s=!1)}),!!s&&o(e)&&i(e,["zoom","heatmap-density"])}(f)){var g=new(t("./evaluation_context"));try{f=new a(f.type,f.evaluate(g))}catch(e){return c.error(e.message),null}}return f}return c.error('Unknown expression "'+h+'". If you wanted a literal array, use ["literal", [...]].',0)}return c.error(void 0===e?"'undefined' value invalid. Use null instead.":"object"==typeof e?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof e+" instead.")},c.prototype.concat=function(t,e,n){var r="number"==typeof t?this.path.concat(t):this.path,i=n?this.scope.concat(n):this.scope;return new c(this.registry,r,e||null,i,this.errors)},c.prototype.error=function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];var r=""+this.key+e.map(function(t){return"["+t+"]"}).join("");this.errors.push(new o(r,t))},c.prototype.checkSubtype=function(t,e){var n=i(t,e);return n&&this.error(n),n},e.exports=c},{"./compound_expression":123,"./definitions/array":124,"./definitions/assertion":125,"./definitions/coercion":129,"./definitions/literal":134,"./definitions/var":137,"./evaluation_context":138,"./is_constant":140,"./parsing_error":142,"./scope":144,"./types":146}],142:[function(t,e,n){"use strict";var r=function(t){function e(e,n){t.call(this,n),this.message=n,this.key=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Error);e.exports=r},{}],143:[function(t,e,n){"use strict";var r=function(t){this.name="ExpressionEvaluationError",this.message=t};r.prototype.toJSON=function(){return this.message},e.exports=r},{}],144:[function(t,e,n){"use strict";var r=function(t,e){void 0===e&&(e=[]),this.parent=t,this.bindings={};for(var n=0,r=e;n<r.length;n+=1){var i=r[n];this.bindings[i[0]]=i[1]}};r.prototype.concat=function(t){return new r(this,t)},r.prototype.get=function(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(t+" not found in scope.")},r.prototype.has=function(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)},e.exports=r},{}],145:[function(t,e,n){"use strict";var r=t("./runtime_error");e.exports={findStopLessThanOrEqualTo:function(t,e){for(var n,i=0,o=t.length-1,a=0;i<=o;){if(e===(n=t[a=Math.floor((i+o)/2)])||e>n&&e<t[a+1])return a;if(n<e)i=a+1;else{if(!(n>e))throw new r("Input is not a number.");o=a-1}}return Math.max(a-1,0)}}},{"./runtime_error":143}],146:[function(t,e,n){"use strict";function r(t,e){return{kind:"array",itemType:t,N:e}}function i(t){if("array"===t.kind){var e=i(t.itemType);return"number"==typeof t.N?"array<"+e+", "+t.N+">":"value"===t.itemType.kind?"array":"array<"+e+">"}return t.kind}var o={kind:"null"},a={kind:"number"},s={kind:"string"},u={kind:"boolean"},l={kind:"color"},c={kind:"object"},h={kind:"value"},p=[o,a,s,u,l,c,r(h)];e.exports={NullType:o,NumberType:a,StringType:s,BooleanType:u,ColorType:l,ObjectType:c,ValueType:h,array:r,ErrorType:{kind:"error"},toString:i,checkSubtype:function t(e,n){if("error"===n.kind)return null;if("array"===e.kind){if("array"===n.kind&&!t(e.itemType,n.itemType)&&("number"!=typeof e.N||e.N===n.N))return null}else{if(e.kind===n.kind)return null;if("value"===e.kind)for(var r=0,o=p;r<o.length;r+=1)if(!t(o[r],n))return null}return"Expected "+i(e)+" but found "+i(n)+" instead."}}},{}],147:[function(t,e,n){"use strict";var r=t("../util/color"),i=t("./types"),o=i.NullType,a=i.NumberType,s=i.StringType,u=i.BooleanType,l=i.ColorType,c=i.ObjectType,h=i.ValueType,p=i.array;e.exports={Color:r,validateRGBA:function(t,e,n,r){return"number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof n&&n>=0&&n<=255?void 0===r||"number"==typeof r&&r>=0&&r<=1?null:"Invalid rgba value ["+[t,e,n,r].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof r?[t,e,n,r]:[t,e,n]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."},isValue:function t(e){if(null===e)return!0;if("string"==typeof e)return!0;if("boolean"==typeof e)return!0;if("number"==typeof e)return!0;if(e instanceof r)return!0;if(Array.isArray(e)){for(var n=0,i=e;n<i.length;n+=1)if(!t(i[n]))return!1;return!0}if("object"==typeof e){for(var o in e)if(!t(e[o]))return!1;return!0}return!1},typeOf:function t(e){if(null===e)return o;if("string"==typeof e)return s;if("boolean"==typeof e)return u;if("number"==typeof e)return a;if(e instanceof r)return l;if(Array.isArray(e)){for(var n,i=e.length,f=0,d=e;f<d.length;f+=1){var m=t(d[f]);if(n){if(n===m)continue;n=h;break}n=m}return p(n||h,i)}return c}}},{"../util/color":153,"./types":146}],148:[function(t,e,n){"use strict";function r(t){if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3===t.length&&(Array.isArray(t[1])||Array.isArray(t[2]));case"any":case"all":for(var e=0,n=t.slice(1);e<n.length;e+=1){var i=n[e];if(!r(i)&&"boolean"!=typeof i)return!1}return!0;default:return!0}}function i(t,e){return t<e?-1:t>e?1:0}function o(t){if(!t)return!0;var e=t[0];return t.length<=1?"any"!==e:"=="===e?a(t[1],t[2],"=="):"!="===e?l(a(t[1],t[2],"==")):"<"===e||">"===e||"<="===e||">="===e?a(t[1],t[2],e):"any"===e?function(t){return["any"].concat(t.map(o))}(t.slice(1)):"all"===e?["all"].concat(t.slice(1).map(o)):"none"===e?["all"].concat(t.slice(1).map(o).map(l)):"in"===e?s(t[1],t.slice(2)):"!in"===e?l(s(t[1],t.slice(2))):"has"===e?u(t[1]):"!has"!==e||l(u(t[1]))}function a(t,e,n){switch(t){case"$type":return["filter-type-"+n,e];case"$id":return["filter-id-"+n,e];default:return["filter-"+n,t,e]}}function s(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(function(t){return typeof t!=typeof e[0]})?["filter-in-large",t,["literal",e.sort(i)]]:["filter-in-small",t,["literal",e]]}}function u(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function l(t){return["!",t]}var c=t("../expression").createExpression;e.exports=function(t){if(!t)return function(){return!0};r(t)||(t=o(t));var e=c(t,h);if("error"===e.result)throw new Error(e.value.map(function(t){return t.key+": "+t.message}).join(", "));return function(t,n){return e.value.evaluate(t,n)}},e.exports.isExpressionFilter=r;var h={type:"boolean",default:!1,function:!0,"property-function":!0,"zoom-function":!0}},{"../expression":139}],149:[function(t,e,n){"use strict";function r(t){return t}function i(t,e,n){return void 0!==t?t:void 0!==e?e:void 0!==n?n:void 0}function o(t,e,n,r,o){return i(typeof n===o?r[n]:void 0,t.default,e.default)}function a(t,e,n){if("number"!==f(n))return i(t.default,e.default);var r=t.stops.length;if(1===r)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[r-1][0])return t.stops[r-1][1];var o=l(t.stops,n);return t.stops[o][1]}function s(t,e,n){var o=void 0!==t.base?t.base:1;if("number"!==f(n))return i(t.default,e.default);var a=t.stops.length;if(1===a)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[a-1][0])return t.stops[a-1][1];var s=l(t.stops,n),u=function(t,e,n,r){var i=r-n,o=t-n;return 0===i?0:1===e?o/i:(Math.pow(e,o)-1)/(Math.pow(e,i)-1)}(n,o,t.stops[s][0],t.stops[s+1][0]),h=t.stops[s][1],p=t.stops[s+1][1],m=d[e.type]||r;if(t.colorSpace&&"rgb"!==t.colorSpace){var g=c[t.colorSpace];m=function(t,e){return g.reverse(g.interpolate(g.forward(t),g.forward(e),u))}}return"function"==typeof h.evaluate?{evaluate:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=h.evaluate.apply(void 0,t),r=p.evaluate.apply(void 0,t);if(void 0!==n&&void 0!==r)return m(n,r,u)}}:m(h,p,u)}function u(t,e,n){return"color"===e.type?n=h.parse(n):f(n)===e.type||"enum"===e.type&&e.values[n]||(n=void 0),i(n,t.default,e.default)}function l(t,e){for(var n,r=0,i=t.length-1,o=0;r<=i;){if(e===(n=t[o=Math.floor((r+i)/2)][0])||e>n&&e<t[o+1][0])return o;n<e?r=o+1:n>e&&(i=o-1)}return Math.max(o-1,0)}var c=t("../util/color_spaces"),h=t("../util/color"),p=t("../util/extend"),f=t("../util/get_type"),d=t("../util/interpolate"),m=t("../expression/definitions/interpolate");e.exports={createFunction:function t(e,n){var r,l,f,d=e.stops&&"object"==typeof e.stops[0][0],g=d||!(d||void 0!==e.property),y=e.type||("interpolated"===n.function?"exponential":"interval");if("color"===n.type&&((e=p({},e)).stops&&(e.stops=e.stops.map(function(t){return[t[0],h.parse(t[1])]})),e.default=h.parse(e.default?e.default:n.default)),e.colorSpace&&"rgb"!==e.colorSpace&&!c[e.colorSpace])throw new Error("Unknown color space: "+e.colorSpace);if("exponential"===y)r=s;else if("interval"===y)r=a;else if("categorical"===y){r=o,l=Object.create(null);for(var v=0,_=e.stops;v<_.length;v+=1){var b=_[v];l[b[0]]=b[1]}f=typeof e.stops[0][0]}else{if("identity"!==y)throw new Error('Unknown function type "'+y+'"');r=u}if(d){for(var x={},w=[],E=0;E<e.stops.length;E++){var C=e.stops[E],S=C[0].zoom;void 0===x[S]&&(x[S]={zoom:S,type:e.type,property:e.property,default:e.default,stops:[]},w.push(S)),x[S].stops.push([C[0].value,C[1]])}for(var I=[],T=0,k=w;T<k.length;T+=1){var O=k[T];I.push([x[O].zoom,t(x[O],n)])}return{kind:"composite",interpolationFactor:m.interpolationFactor.bind(void 0,{name:"linear"}),zoomStops:I.map(function(t){return t[0]}),evaluate:function(t,r){var i=t.zoom;return s({stops:I,base:e.base},n,i).evaluate(i,r)}}}return g?{kind:"camera",interpolationFactor:"exponential"===y?m.interpolationFactor.bind(void 0,{name:"exponential",base:void 0!==e.base?e.base:1}):function(){return 0},zoomStops:e.stops.map(function(t){return t[0]}),evaluate:function(t){return r(e,n,t.zoom,l,f)}}:{kind:"source",evaluate:function(t,o){var a=o&&o.properties?o.properties[e.property]:void 0;return void 0===a?i(e.default,n.default):r(e,n,a,l,f)}}},isFunction:function(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}}},{"../expression/definitions/interpolate":132,"../util/color":153,"../util/color_spaces":154,"../util/extend":156,"../util/get_type":157,"../util/interpolate":158}],150:[function(t,e,n){"use strict";function r(t){var e=typeof t;if("number"===e||"boolean"===e||"string"===e||void 0===t||null===t)return JSON.stringify(t);if(Array.isArray(t)){for(var n="[",i=0,o=t;i<o.length;i+=1)n+=r(o[i])+",";return n+"]"}for(var a=Object.keys(t).sort(),s="{",u=0;u<a.length;u++)s+=JSON.stringify(a[u])+":"+r(t[a[u]])+",";return s+"}"}function i(t){for(var e="",n=0,i=o;n<i.length;n+=1)e+="/"+r(t[i[n]]);return e}var o=t("./util/ref_properties");e.exports=function(t){for(var e={},n=0;n<t.length;n++){var r=i(t[n]),o=e[r];o||(o=e[r]=[]),o.push(t[n])}var a=[];for(var s in e)a.push(e[s]);return a}},{"./util/ref_properties":159}],151:[function(t,e,n){"use strict";e.exports=t("./v8.json")},{"./v8.json":152}],152:[function(t,e,n){e.exports={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image","source_canvas"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.0511,180,85.0511]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.0511,180,85.0511]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.0511,180,85.0511]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_canvas:{type:{required:!0,type:"enum",values:{canvas:{}}},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}},animate:{type:"boolean",default:"true"},canvas:{type:"string",required:!0}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_fill:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_circle:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_line:{"line-cap":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{butt:{},round:{},square:{}},default:"butt"},"line-join":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{bevel:{},round:{},miter:{}},default:"miter"},"line-miter-limit":{type:"number",default:2,function:"interpolated","zoom-function":!0,requires:[{"line-join":"miter"}]},"line-round-limit":{type:"number",default:1.05,function:"interpolated","zoom-function":!0,requires:[{"line-join":"round"}]},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_symbol:{"symbol-placement":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{point:{},line:{}},default:"point"},"symbol-spacing":{type:"number",default:250,minimum:1,function:"interpolated","zoom-function":!0,units:"pixels",requires:[{"symbol-placement":"line"}]},"symbol-avoid-edges":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1},"icon-allow-overlap":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["icon-image"]},"icon-ignore-placement":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["icon-image"]},"icon-optional":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["icon-image","text-field"]},"icon-rotation-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"]},"icon-size":{type:"number",default:1,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,units:"factor of the original icon size",requires:["icon-image"]},"icon-text-fit":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"]},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",function:"interpolated","zoom-function":!0,requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}]},"icon-image":{type:"string",function:"piecewise-constant","zoom-function":!0,"property-function":!0,tokens:!0},"icon-rotate":{type:"number",default:0,period:360,function:"interpolated","zoom-function":!0,"property-function":!0,units:"degrees",requires:["icon-image"]},"icon-padding":{type:"number",default:2,minimum:0,function:"interpolated","zoom-function":!0,units:"pixels",requires:["icon-image"]},"icon-keep-upright":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":"line"}]},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,"property-function":!0,requires:["icon-image"]},"icon-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"]},"icon-pitch-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"]},"text-pitch-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"]},"text-rotation-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"]},"text-field":{type:"string",function:"piecewise-constant","zoom-function":!0,"property-function":!0,default:"",tokens:!0},"text-font":{type:"array",value:"string",function:"piecewise-constant","zoom-function":!0,"property-function":!0,default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"]},"text-size":{type:"number",default:16,minimum:0,units:"pixels",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-line-height":{type:"number",default:1.2,units:"ems",function:"interpolated","zoom-function":!0,requires:["text-field"]},"text-letter-spacing":{type:"number",default:0,units:"ems",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-justify":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{left:{},center:{},right:{}},default:"center",requires:["text-field"]},"text-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field"]},"text-max-angle":{type:"number",default:45,units:"degrees",function:"interpolated","zoom-function":!0,requires:["text-field",{"symbol-placement":"line"}]},"text-rotate":{type:"number",default:0,period:360,units:"degrees",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",function:"interpolated","zoom-function":!0,requires:["text-field"]},"text-keep-upright":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":"line"}]},"text-transform":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"]},"text-offset":{type:"array",value:"number",units:"ems",function:"interpolated","zoom-function":!0,"property-function":!0,length:2,default:[0,0],requires:["text-field"]},"text-allow-overlap":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["text-field"]},"text-ignore-placement":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["text-field"]},"text-optional":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["text-field","icon-image"]},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:22,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},transition:!1,"zoom-function":!0,"property-function":!1,function:"piecewise-constant"},position:{type:"array",default:[1.15,210,30],length:3,value:"number",transition:!0,function:"interpolated","zoom-function":!0,"property-function":!1},color:{type:"color",default:"#ffffff",function:"interpolated","zoom-function":!0,"property-function":!1,transition:!0},intensity:{type:"number",default:.5,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!1,transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!0},"fill-opacity":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:1,minimum:0,maximum:1,transition:!0},"fill-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"fill-pattern"}]},"fill-outline-color":{type:"color",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}]},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"fill-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["fill-translate"]},"fill-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,transition:!0}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!1,default:1,minimum:0,maximum:1,transition:!0},"fill-extrusion-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"fill-extrusion-pattern"}]},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"fill-extrusion-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"]},"fill-extrusion-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,transition:!0},"fill-extrusion-height":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:0,minimum:0,units:"meters",transition:!0},"fill-extrusion-base":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"]}},paint_line:{"line-opacity":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:1,minimum:0,maximum:1,transition:!0},"line-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"line-pattern"}]},"line-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"line-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["line-translate"]},"line-width":{type:"number",default:1,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-gap-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-offset":{type:"number",default:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-blur":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-dasharray":{type:"array",value:"number",function:"piecewise-constant","zoom-function":!0,minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}]},"line-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,transition:!0}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"circle-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-blur":{type:"number",default:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"circle-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["circle-translate"]},"circle-pitch-scale":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map"},"circle-pitch-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"viewport"},"circle-stroke-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"circle-stroke-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"heatmap-weight":{type:"number",default:1,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!1},"heatmap-intensity":{type:"number",default:1,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!1,transition:!0},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],function:"interpolated","zoom-function":!1,"property-function":!1,transition:!1},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!1,transition:!0}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["icon-image"]},"icon-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["icon-image"]},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["icon-image"]},"icon-halo-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-halo-blur":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"]},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["text-field"]},"text-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["text-field"]},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["text-field"]},"text-halo-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-halo-blur":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"]}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"raster-hue-rotate":{type:"number",default:0,period:360,function:"interpolated","zoom-function":!0,transition:!0,units:"degrees"},"raster-brightness-min":{type:"number",function:"interpolated","zoom-function":!0,default:0,minimum:0,maximum:1,transition:!0},"raster-brightness-max":{type:"number",function:"interpolated","zoom-function":!0,default:1,minimum:0,maximum:1,transition:!0},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"raster-fade-duration":{type:"number",default:300,minimum:0,function:"interpolated","zoom-function":!0,transition:!1,units:"milliseconds"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,function:"interpolated","zoom-function":!0,transition:!1},"hillshade-illumination-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"viewport"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"hillshade-shadow-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,transition:!0},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",function:"interpolated","zoom-function":!0,transition:!0},"hillshade-accent-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,transition:!0}},paint_background:{"background-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,transition:!0,requires:[{"!":"background-pattern"}]},"background-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,transition:!0},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,transition:!0}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}}}},{}],153:[function(t,e,n){"use strict";var r=t("csscolorparser").parseCSSColor,i=function(t,e,n,r){void 0===r&&(r=1),this.r=t,this.g=e,this.b=n,this.a=r};i.parse=function(t){if(t){if(t instanceof i)return t;if("string"==typeof t){var e=r(t);if(e)return new i(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3])}}},i.prototype.toString=function(){var t=this;return"rgba("+[this.r,this.g,this.b].map(function(e){return Math.round(255*e/t.a)}).concat(this.a).join(",")+")"},i.black=new i(0,0,0,1),i.white=new i(1,1,1,1),i.transparent=new i(0,0,0,0),e.exports=i},{csscolorparser:13}],154:[function(t,e,n){"use strict";function r(t){return t>y?Math.pow(t,1/3):t/g+d}function i(t){return t>m?t*t*t:g*(t-d)}function o(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function a(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function s(t){var e=a(t.r),n=a(t.g),i=a(t.b),o=r((.4124564*e+.3575761*n+.1804375*i)/h),s=r((.2126729*e+.7151522*n+.072175*i)/p);return{l:116*s-16,a:500*(o-s),b:200*(s-r((.0193339*e+.119192*n+.9503041*i)/f)),alpha:t.a}}function u(t){var e=(t.l+16)/116,n=isNaN(t.a)?e:e+t.a/500,r=isNaN(t.b)?e:e-t.b/200;return e=p*i(e),n=h*i(n),r=f*i(r),new l(o(3.2404542*n-1.5371385*e-.4985314*r),o(-.969266*n+1.8760108*e+.041556*r),o(.0556434*n-.2040259*e+1.0572252*r),t.alpha)}var l=t("./color"),c=t("./interpolate").number,h=.95047,p=1,f=1.08883,d=4/29,m=6/29,g=3*m*m,y=m*m*m,v=Math.PI/180,_=180/Math.PI;e.exports={lab:{forward:s,reverse:u,interpolate:function(t,e,n){return{l:c(t.l,e.l,n),a:c(t.a,e.a,n),b:c(t.b,e.b,n),alpha:c(t.alpha,e.alpha,n)}}},hcl:{forward:function(t){var e=s(t),n=e.l,r=e.a,i=e.b,o=Math.atan2(i,r)*_;return{h:o<0?o+360:o,c:Math.sqrt(r*r+i*i),l:n,alpha:t.a}},reverse:function(t){var e=t.h*v,n=t.c;return u({l:t.l,a:Math.cos(e)*n,b:Math.sin(e)*n,alpha:t.alpha})},interpolate:function(t,e,n){return{h:function(t,e,n){var r=e-t;return t+n*(r>180||r<-180?r-360*Math.round(r/360):r)}(t.h,e.h,n),c:c(t.c,e.c,n),l:c(t.l,e.l,n),alpha:c(t.alpha,e.alpha,n)}}}}},{"./color":153,"./interpolate":158}],155:[function(t,e,n){"use strict";e.exports=function t(e,n){if(Array.isArray(e)){if(!Array.isArray(n)||e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(!t(e[r],n[r]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==n){if("object"!=typeof n)return!1;if(Object.keys(e).length!==Object.keys(n).length)return!1;for(var i in e)if(!t(e[i],n[i]))return!1;return!0}return e===n}},{}],156:[function(t,e,n){"use strict";e.exports=function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];for(var r=0,i=e;r<i.length;r+=1){var o=i[r];for(var a in o)t[a]=o[a]}return t}},{}],157:[function(t,e,n){"use strict";e.exports=function(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}},{}],158:[function(t,e,n){"use strict";function r(t,e,n){return t*(1-n)+e*n}var i=t("./color");e.exports={number:r,color:function(t,e,n){return new i(r(t.r,e.r,n),r(t.g,e.g,n),r(t.b,e.b,n),r(t.a,e.a,n))},array:function(t,e,n){return t.map(function(t,i){return r(t,e[i],n)})}}},{"./color":153}],159:[function(t,e,n){"use strict";e.exports=["type","source","source-layer","minzoom","maxzoom","filter","layout"]},{}],160:[function(t,e,n){"use strict";e.exports={success:function(t){return{result:"success",value:t}},error:function(t){return{result:"error",value:t}}}},{}],161:[function(t,e,n){"use strict";function r(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}e.exports=r,e.exports.deep=function t(e){return Array.isArray(e)?e.map(t):r(e)}},{}],162:[function(t,e,n){"use strict";var r=t("../util/extend"),i=t("../util/unbundle_jsonlint"),o=t("../expression").isExpression,a=t("../function").isFunction;e.exports=function(e){var n=t("./validate_function"),s=t("./validate_expression"),u=t("./validate_object"),l={"*":function(){return[]},array:t("./validate_array"),boolean:t("./validate_boolean"),number:t("./validate_number"),color:t("./validate_color"),constants:t("./validate_constants"),enum:t("./validate_enum"),filter:t("./validate_filter"),function:t("./validate_function"),layer:t("./validate_layer"),object:t("./validate_object"),source:t("./validate_source"),light:t("./validate_light"),string:t("./validate_string")},c=e.value,h=e.valueSpec,p=e.styleSpec;return h.function&&a(i(c))?n(e):h.function&&o(i.deep(c))?s(e):h.type&&l[h.type]?l[h.type](e):u(r({},e,{valueSpec:h.type?p[h.type]:h}))}},{"../expression":139,"../function":149,"../util/extend":156,"../util/unbundle_jsonlint":161,"./validate_array":163,"./validate_boolean":164,"./validate_color":165,"./validate_constants":166,"./validate_enum":167,"./validate_expression":168,"./validate_filter":169,"./validate_function":170,"./validate_layer":172,"./validate_light":174,"./validate_number":175,"./validate_object":176,"./validate_source":179,"./validate_string":180}],163:[function(t,e,n){"use strict";var r=t("../util/get_type"),i=t("./validate"),o=t("../error/validation_error");e.exports=function(t){var e=t.value,n=t.valueSpec,a=t.style,s=t.styleSpec,u=t.key,l=t.arrayElementValidator||i;if("array"!==r(e))return[new o(u,e,"array expected, "+r(e)+" found")];if(n.length&&e.length!==n.length)return[new o(u,e,"array length "+n.length+" expected, length "+e.length+" found")];if(n["min-length"]&&e.length<n["min-length"])return[new o(u,e,"array length at least "+n["min-length"]+" expected, length "+e.length+" found")];var c={type:n.value};s.$version<7&&(c.function=n.function),"object"===r(n.value)&&(c=n.value);for(var h=[],p=0;p<e.length;p++)h=h.concat(l({array:e,arrayIndex:p,value:e[p],valueSpec:c,style:a,styleSpec:s,key:u+"["+p+"]"}));return h}},{"../error/validation_error":122,"../util/get_type":157,"./validate":162}],164:[function(t,e,n){"use strict";var r=t("../util/get_type"),i=t("../error/validation_error");e.exports=function(t){var e=t.value,n=t.key,o=r(e);return"boolean"!==o?[new i(n,e,"boolean expected, "+o+" found")]:[]}},{"../error/validation_error":122,"../util/get_type":157}],165:[function(t,e,n){"use strict";var r=t("../error/validation_error"),i=t("../util/get_type"),o=t("csscolorparser").parseCSSColor;e.exports=function(t){var e=t.key,n=t.value,a=i(n);return"string"!==a?[new r(e,n,"color expected, "+a+" found")]:null===o(n)?[new r(e,n,'color expected, "'+n+'" found')]:[]}},{"../error/validation_error":122,"../util/get_type":157,csscolorparser:13}],166:[function(t,e,n){"use strict";var r=t("../error/validation_error");e.exports=function(t){var e=t.value;return e?[new r(t.key,e,"constants have been deprecated as of v8")]:[]}},{"../error/validation_error":122}],167:[function(t,e,n){"use strict";var r=t("../error/validation_error"),i=t("../util/unbundle_jsonlint");e.exports=function(t){var e=t.key,n=t.value,o=t.valueSpec,a=[];return Array.isArray(o.values)?-1===o.values.indexOf(i(n))&&a.push(new r(e,n,"expected one of ["+o.values.join(", ")+"], "+JSON.stringify(n)+" found")):-1===Object.keys(o.values).indexOf(i(n))&&a.push(new r(e,n,"expected one of ["+Object.keys(o.values).join(", ")+"], "+JSON.stringify(n)+" found")),a}},{"../error/validation_error":122,"../util/unbundle_jsonlint":161}],168:[function(t,e,n){"use strict";var r=t("../error/validation_error"),i=t("../expression"),o=i.createExpression,a=i.createPropertyExpression,s=t("../util/unbundle_jsonlint");e.exports=function(t){var e=("property"===t.expressionContext?a:o)(s.deep(t.value),t.valueSpec);return"error"===e.result?e.value.map(function(e){return new r(""+t.key+e.key,t.value,e.message)}):"property"===t.expressionContext&&"text-font"===t.propertyKey&&-1!==e.value._styleExpression.expression.possibleOutputs().indexOf(void 0)?[new r(t.key,t.value,'Invalid data expression for "text-font". Output values must be contained as literals within the expression.')]:[]}},{"../error/validation_error":122,"../expression":139,"../util/unbundle_jsonlint":161}],169:[function(t,e,n){"use strict";var r=t("../error/validation_error"),i=t("./validate_expression"),o=t("./validate_enum"),a=t("../util/get_type"),s=t("../util/unbundle_jsonlint"),u=t("../util/extend"),l=t("../feature_filter").isExpressionFilter;e.exports=function(t){return l(s.deep(t.value))?i(u({},t,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function t(e){var n=e.value,i=e.key;if("array"!==a(n))return[new r(i,n,"array expected, "+a(n)+" found")];var u,l=e.styleSpec,c=[];if(n.length<1)return[new r(i,n,"filter array must have at least 1 element")];switch(c=c.concat(o({key:i+"[0]",value:n[0],valueSpec:l.filter_operator,style:e.style,styleSpec:e.styleSpec})),s(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&"$type"===s(n[1])&&c.push(new r(i,n,'"$type" cannot be use with operator "'+n[0]+'"'));case"==":case"!=":3!==n.length&&c.push(new r(i,n,'filter array for operator "'+n[0]+'" must have 3 elements'));case"in":case"!in":n.length>=2&&"string"!==(u=a(n[1]))&&c.push(new r(i+"[1]",n[1],"string expected, "+u+" found"));for(var h=2;h<n.length;h++)u=a(n[h]),"$type"===s(n[1])?c=c.concat(o({key:i+"["+h+"]",value:n[h],valueSpec:l.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==u&&"number"!==u&&"boolean"!==u&&c.push(new r(i+"["+h+"]",n[h],"string, number, or boolean expected, "+u+" found"));break;case"any":case"all":case"none":for(var p=1;p<n.length;p++)c=c.concat(t({key:i+"["+p+"]",value:n[p],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":u=a(n[1]),2!==n.length?c.push(new r(i,n,'filter array for "'+n[0]+'" operator must have 2 elements')):"string"!==u&&c.push(new r(i+"[1]",n[1],"string expected, "+u+" found"))}return c}(t)}},{"../error/validation_error":122,"../feature_filter":148,"../util/extend":156,"../util/get_type":157,"../util/unbundle_jsonlint":161,"./validate_enum":167,"./validate_expression":168}],170:[function(t,e,n){"use strict";var r=t("../error/validation_error"),i=t("../util/get_type"),o=t("./validate"),a=t("./validate_object"),s=t("./validate_array"),u=t("./validate_number"),l=t("../util/unbundle_jsonlint");e.exports=function(t){function e(t){var e=[],s=t.value,c=t.key;if("array"!==i(s))return[new r(c,s,"array expected, "+i(s)+" found")];if(2!==s.length)return[new r(c,s,"array length 2 expected, length "+s.length+" found")];if(v){if("object"!==i(s[0]))return[new r(c,s,"object expected, "+i(s[0])+" found")];if(void 0===s[0].zoom)return[new r(c,s,"object stop key must have zoom")];if(void 0===s[0].value)return[new r(c,s,"object stop key must have value")];if(p&&p>l(s[0].zoom))return[new r(c,s[0].zoom,"stop zoom values must appear in ascending order")];l(s[0].zoom)!==p&&(p=l(s[0].zoom),h=void 0,m={}),e=e.concat(a({key:c+"[0]",value:s[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:u,value:n}}))}else e=e.concat(n({key:c+"[0]",value:s[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec},s));return e.concat(o({key:c+"[1]",value:s[1],valueSpec:f,style:t.style,styleSpec:t.styleSpec}))}function n(t,e){var n=i(t.value),o=l(t.value),a=null!==t.value?t.value:e;if(c){if(n!==c)return[new r(t.key,a,n+" stop domain type must match previous stop domain type "+c)]}else c=n;if("number"!==n&&"string"!==n&&"boolean"!==n)return[new r(t.key,a,"stop domain value must be a number, string, or boolean")];if("number"!==n&&"categorical"!==d){var s="number expected, "+n+" found";return f["property-function"]&&void 0===d&&(s+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new r(t.key,a,s)]}return"categorical"!==d||"number"!==n||isFinite(o)&&Math.floor(o)===o?"categorical"!==d&&"number"===n&&void 0!==h&&o<h?[new r(t.key,a,"stop domain values must appear in ascending order")]:(h=o,"categorical"===d&&o in m?[new r(t.key,a,"stop domain values must be unique")]:(m[o]=!0,[])):[new r(t.key,a,"integer expected, found "+o)]}var c,h,p,f=t.valueSpec,d=l(t.value.type),m={},g="categorical"!==d&&void 0===t.value.property,y=!g,v="array"===i(t.value.stops)&&"array"===i(t.value.stops[0])&&"object"===i(t.value.stops[0][0]),_=a({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(t){if("identity"===d)return[new r(t.key,t.value,'identity function may not have a "stops" property')];var n=[],o=t.value;return n=n.concat(s({key:t.key,value:o,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:e})),"array"===i(o)&&0===o.length&&n.push(new r(t.key,o,"array must have at least one stop")),n},default:function(t){return o({key:t.key,value:t.value,valueSpec:f,style:t.style,styleSpec:t.styleSpec})}}});return"identity"===d&&g&&_.push(new r(t.key,t.value,'missing required property "property"')),"identity"===d||t.value.stops||_.push(new r(t.key,t.value,'missing required property "stops"')),"exponential"===d&&"piecewise-constant"===t.valueSpec.function&&_.push(new r(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(y&&!t.valueSpec["property-function"]?_.push(new r(t.key,t.value,"property functions not supported")):g&&!t.valueSpec["zoom-function"]&&"heatmap-color"!==t.objectKey&&_.push(new r(t.key,t.value,"zoom functions not supported"))),"categorical"!==d&&!v||void 0!==t.value.property||_.push(new r(t.key,t.value,'"property" property is required')),_}},{"../error/validation_error":122,"../util/get_type":157,"../util/unbundle_jsonlint":161,"./validate":162,"./validate_array":163,"./validate_number":175,"./validate_object":176}],171:[function(t,e,n){"use strict";var r=t("../error/validation_error"),i=t("./validate_string");e.exports=function(t){var e=t.value,n=t.key,o=i(t);return o.length?o:(-1===e.indexOf("{fontstack}")&&o.push(new r(n,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&o.push(new r(n,e,'"glyphs" url must include a "{range}" token')),o)}},{"../error/validation_error":122,"./validate_string":180}],172:[function(t,e,n){"use strict";var r=t("../error/validation_error"),i=t("../util/unbundle_jsonlint"),o=t("./validate_object"),a=t("./validate_filter"),s=t("./validate_paint_property"),u=t("./validate_layout_property"),l=t("./validate"),c=t("../util/extend");e.exports=function(t){var e=[],n=t.value,h=t.key,p=t.style,f=t.styleSpec;n.type||n.ref||e.push(new r(h,n,'either "type" or "ref" is required'));var d,m=i(n.type),g=i(n.ref);if(n.id)for(var y=i(n.id),v=0;v<t.arrayIndex;v++){var _=p.layers[v];i(_.id)===y&&e.push(new r(h,n.id,'duplicate layer id "'+n.id+'", previously used at line '+_.id.__line__))}if("ref"in n)["type","source","source-layer","filter","layout"].forEach(function(t){t in n&&e.push(new r(h,n[t],'"'+t+'" is prohibited for ref layers'))}),p.layers.forEach(function(t){i(t.id)===g&&(d=t)}),d?d.ref?e.push(new r(h,n.ref,"ref cannot reference another ref layer")):m=i(d.type):e.push(new r(h,n.ref,'ref layer "'+g+'" not found'));else if("background"!==m)if(n.source){var b=p.sources&&p.sources[n.source],x=b&&i(b.type);b?"vector"===x&&"raster"===m?e.push(new r(h,n.source,'layer "'+n.id+'" requires a raster source')):"raster"===x&&"raster"!==m?e.push(new r(h,n.source,'layer "'+n.id+'" requires a vector source')):"vector"!==x||n["source-layer"]?"raster-dem"===x&&"hillshade"!==m&&e.push(new r(h,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):e.push(new r(h,n,'layer "'+n.id+'" must specify a "source-layer"')):e.push(new r(h,n.source,'source "'+n.source+'" not found'))}else e.push(new r(h,n,'missing required property "source"'));return e=e.concat(o({key:h,value:n,valueSpec:f.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return l({key:h+".type",value:n.type,valueSpec:f.layer.type,style:t.style,styleSpec:t.styleSpec,object:n,objectKey:"type"})},filter:a,layout:function(t){return o({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return u(c({layerType:m},t))}}})},paint:function(t){return o({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return s(c({layerType:m},t))}}})}}}))}},{"../error/validation_error":122,"../util/extend":156,"../util/unbundle_jsonlint":161,"./validate":162,"./validate_filter":169,"./validate_layout_property":173,"./validate_object":176,"./validate_paint_property":177}],173:[function(t,e,n){"use strict";var r=t("./validate_property");e.exports=function(t){return r(t,"layout")}},{"./validate_property":178}],174:[function(t,e,n){"use strict";var r=t("../error/validation_error"),i=t("../util/get_type"),o=t("./validate");e.exports=function(t){var e=t.value,n=t.styleSpec,a=n.light,s=t.style,u=[],l=i(e);if(void 0===e)return u;if("object"!==l)return u.concat([new r("light",e,"object expected, "+l+" found")]);for(var c in e){var h=c.match(/^(.*)-transition$/);u=u.concat(h&&a[h[1]]&&a[h[1]].transition?o({key:c,value:e[c],valueSpec:n.transition,style:s,styleSpec:n}):a[c]?o({key:c,value:e[c],valueSpec:a[c],style:s,styleSpec:n}):[new r(c,e[c],'unknown property "'+c+'"')])}return u}},{"../error/validation_error":122,"../util/get_type":157,"./validate":162}],175:[function(t,e,n){"use strict";var r=t("../util/get_type"),i=t("../error/validation_error");e.exports=function(t){var e=t.key,n=t.value,o=t.valueSpec,a=r(n);return"number"!==a?[new i(e,n,"number expected, "+a+" found")]:"minimum"in o&&n<o.minimum?[new i(e,n,n+" is less than the minimum value "+o.minimum)]:"maximum"in o&&n>o.maximum?[new i(e,n,n+" is greater than the maximum value "+o.maximum)]:[]}},{"../error/validation_error":122,"../util/get_type":157}],176:[function(t,e,n){"use strict";var r=t("../error/validation_error"),i=t("../util/get_type"),o=t("./validate");e.exports=function(t){var e=t.key,n=t.value,a=t.valueSpec||{},s=t.objectElementValidators||{},u=t.style,l=t.styleSpec,c=[],h=i(n);if("object"!==h)return[new r(e,n,"object expected, "+h+" found")];for(var p in n){var f=p.split(".")[0],d=a[f]||a["*"],m=void 0;if(s[f])m=s[f];else if(a[f])m=o;else if(s["*"])m=s["*"];else{if(!a["*"]){c.push(new r(e,n[p],'unknown property "'+p+'"'));continue}m=o}c=c.concat(m({key:(e?e+".":e)+p,value:n[p],valueSpec:d,style:u,styleSpec:l,object:n,objectKey:p},n))}for(var g in a)s[g]||a[g].required&&void 0===a[g].default&&void 0===n[g]&&c.push(new r(e,n,'missing required property "'+g+'"'));return c}},{"../error/validation_error":122,"../util/get_type":157,"./validate":162}],177:[function(t,e,n){"use strict";var r=t("./validate_property");e.exports=function(t){return r(t,"paint")}},{"./validate_property":178}],178:[function(t,e,n){"use strict";var r=t("./validate"),i=t("../error/validation_error"),o=t("../util/get_type"),a=t("../function").isFunction,s=t("../util/unbundle_jsonlint");e.exports=function(t,e){var n=t.key,u=t.style,l=t.styleSpec,c=t.value,h=t.objectKey,p=l[e+"_"+t.layerType];if(!p)return[];var f=h.match(/^(.*)-transition$/);if("paint"===e&&f&&p[f[1]]&&p[f[1]].transition)return r({key:n,value:c,valueSpec:l.transition,style:u,styleSpec:l});var d,m=t.valueSpec||p[h];if(!m)return[new i(n,c,'unknown property "'+h+'"')];if("string"===o(c)&&m["property-function"]&&!m.tokens&&(d=/^{([^}]+)}$/.exec(c)))return[new i(n,c,'"'+h+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(d[1])+" }`.")];var g=[];return"symbol"===t.layerType&&("text-field"===h&&u&&!u.glyphs&&g.push(new i(n,c,'use of "text-field" requires a style "glyphs" property')),"text-font"===h&&a(s.deep(c))&&"identity"===s(c.type)&&g.push(new i(n,c,'"text-font" does not support identity functions'))),g.concat(r({key:t.key,value:c,valueSpec:m,style:u,styleSpec:l,expressionContext:"property",propertyKey:h}))}},{"../error/validation_error":122,"../function":149,"../util/get_type":157,"../util/unbundle_jsonlint":161,"./validate":162}],179:[function(t,e,n){"use strict";var r=t("../error/validation_error"),i=t("../util/unbundle_jsonlint"),o=t("./validate_object"),a=t("./validate_enum");e.exports=function(t){var e=t.value,n=t.key,s=t.styleSpec,u=t.style;if(!e.type)return[new r(n,e,'"type" is required')];var l=i(e.type),c=[];switch(l){case"vector":case"raster":case"raster-dem":if(c=c.concat(o({key:n,value:e,valueSpec:s["source_"+l.replace("-","_")],style:t.style,styleSpec:s})),"url"in e)for(var h in e)["type","url","tileSize"].indexOf(h)<0&&c.push(new r(n+"."+h,e[h],'a source with a "url" property may not include a "'+h+'" property'));return c;case"geojson":return o({key:n,value:e,valueSpec:s.source_geojson,style:u,styleSpec:s});case"video":return o({key:n,value:e,valueSpec:s.source_video,style:u,styleSpec:s});case"image":return o({key:n,value:e,valueSpec:s.source_image,style:u,styleSpec:s});case"canvas":return o({key:n,value:e,valueSpec:s.source_canvas,style:u,styleSpec:s});default:return a({key:n+".type",value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image","canvas"]},style:u,styleSpec:s})}}},{"../error/validation_error":122,"../util/unbundle_jsonlint":161,"./validate_enum":167,"./validate_object":176}],180:[function(t,e,n){"use strict";var r=t("../util/get_type"),i=t("../error/validation_error");e.exports=function(t){var e=t.value,n=t.key,o=r(e);return"string"!==o?[new i(n,e,"string expected, "+o+" found")]:[]}},{"../error/validation_error":122,"../util/get_type":157}],181:[function(t,e,n){"use strict";function r(t,e){var n=[];return n=n.concat(s({key:"",value:t,valueSpec:(e=e||u).$root,styleSpec:e,style:t,objectElementValidators:{glyphs:l,"*":function(){return[]}}})),t.constants&&(n=n.concat(a({key:"constants",value:t.constants,style:t,styleSpec:e}))),i(n)}function i(t){return[].concat(t).sort(function(t,e){return t.line-e.line})}function o(t){return function(){return i(t.apply(this,arguments))}}var a=t("./validate/validate_constants"),s=t("./validate/validate"),u=t("./reference/latest"),l=t("./validate/validate_glyphs_url");r.source=o(t("./validate/validate_source")),r.light=o(t("./validate/validate_light")),r.layer=o(t("./validate/validate_layer")),r.filter=o(t("./validate/validate_filter")),r.paintProperty=o(t("./validate/validate_paint_property")),r.layoutProperty=o(t("./validate/validate_layout_property")),e.exports=r},{"./reference/latest":151,"./validate/validate":162,"./validate/validate_constants":166,"./validate/validate_filter":169,"./validate/validate_glyphs_url":171,"./validate/validate_layer":172,"./validate/validate_layout_property":173,"./validate/validate_light":174,"./validate/validate_paint_property":177,"./validate/validate_source":179}],182:[function(t,e,n){"use strict";var r=t("./zoom_history"),i=function(t,e){this.zoom=t,e?(this.now=e.now,this.fadeDuration=e.fadeDuration,this.zoomHistory=e.zoomHistory,this.transition=e.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new r,this.transition={})};i.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},e.exports=i},{"./zoom_history":212}],183:[function(t,e,n){"use strict";var r=t("../style-spec/reference/latest"),i=t("../util/util"),o=t("../util/evented"),a=t("./validate_style"),s=t("../util/util").sphericalToCartesian,u=(t("../style-spec/util/color"),t("../style-spec/util/interpolate")),l=t("./properties"),c=l.Properties,h=l.Transitionable,p=l.DataConstantProperty,f=function(){this.specification=r.light.position};f.prototype.possiblyEvaluate=function(t,e){return s(t.expression.evaluate(e))},f.prototype.interpolate=function(t,e,n){return{x:u.number(t.x,e.x,n),y:u.number(t.y,e.y,n),z:u.number(t.z,e.z,n)}};var d=new c({anchor:new p(r.light.anchor),position:new f,color:new p(r.light.color),intensity:new p(r.light.intensity)}),m=function(t){function e(e){t.call(this),this._transitionable=new h(d),this.setLight(e),this._transitioning=this._transitionable.untransitioned()}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getLight=function(){return this._transitionable.serialize()},e.prototype.setLight=function(t){if(!this._validate(a.light,t))for(var e in t){var n=t[e];i.endsWith(e,"-transition")?this._transitionable.setTransition(e.slice(0,-"-transition".length),n):this._transitionable.setValue(e,n)}},e.prototype.updateTransitions=function(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)},e.prototype.hasTransition=function(){return this._transitioning.hasTransition()},e.prototype.recalculate=function(t){this.properties=this._transitioning.possiblyEvaluate(t)},e.prototype._validate=function(t,e){return a.emitErrors(this,t.call(a,i.extend({value:e,style:{glyphs:!0,sprite:!0},styleSpec:r})))},e}(o);e.exports=m},{"../style-spec/reference/latest":151,"../style-spec/util/color":153,"../style-spec/util/interpolate":158,"../util/evented":260,"../util/util":275,"./properties":188,"./validate_style":211}],184:[function(t,e,n){"use strict";var r=t("../util/mapbox").normalizeGlyphsURL,i=t("../util/ajax"),o=t("./parse_glyph_pbf");e.exports=function(t,e,n,a,s){var u=256*e,l=u+255,c=a(r(n).replace("{fontstack}",t).replace("{range}",u+"-"+l),i.ResourceType.Glyphs);i.getArrayBuffer(c,function(t,e){if(t)s(t);else if(e){for(var n={},r=0,i=o(e.data);r<i.length;r+=1){var a=i[r];n[a.id]=a}s(null,n)}})}},{"../util/ajax":251,"../util/mapbox":267,"./parse_glyph_pbf":186}],185:[function(t,e,n){"use strict";var r=t("../util/ajax"),i=t("../util/browser"),o=t("../util/mapbox").normalizeSpriteURL,a=t("../util/image").RGBAImage;e.exports=function(t,e,n){function s(){if(c)n(c);else if(u&&l){var t=i.getImageData(l),e={};for(var r in u){var o=u[r],s=o.width,h=o.height,p=o.x,f=o.y,d=o.sdf,m=o.pixelRatio,g=new a({width:s,height:h});a.copy(t,g,{x:p,y:f},{x:0,y:0},{width:s,height:h}),e[r]={data:g,pixelRatio:m,sdf:d}}n(null,e)}}var u,l,c,h=i.devicePixelRatio>1?"@2x":"";r.getJSON(e(o(t,h,".json"),r.ResourceType.SpriteJSON),function(t,e){c||(c=t,u=e,s())}),r.getImage(e(o(t,h,".png"),r.ResourceType.SpriteImage),function(t,e){c||(c=t,l=e,s())})}},{"../util/ajax":251,"../util/browser":252,"../util/image":263,"../util/mapbox":267}],186:[function(t,e,n){"use strict";function r(t,e,n){1===t&&n.readMessage(i,e)}function i(t,e,n){if(3===t){var r=n.readMessage(o,{}),i=r.width,s=r.height,l=r.left,c=r.top,h=r.advance;e.push({id:r.id,bitmap:new a({width:i+2*u,height:s+2*u},r.bitmap),metrics:{width:i,height:s,left:l,top:c,advance:h}})}}function o(t,e,n){1===t?e.id=n.readVarint():2===t?e.bitmap=n.readBytes():3===t?e.width=n.readVarint():4===t?e.height=n.readVarint():5===t?e.left=n.readSVarint():6===t?e.top=n.readSVarint():7===t&&(e.advance=n.readVarint())}var a=t("../util/image").AlphaImage,s=t("pbf"),u=3;e.exports=function(t){return new s(t).readFields(r,[])},e.exports.GLYPH_PBF_BORDER=u},{"../util/image":263,pbf:30}],187:[function(t,e,n){"use strict";var r=t("../util/browser"),i=t("../symbol/placement"),o=function(){this._currentTileIndex=0,this._seenCrossTileIDs={}};o.prototype.continuePlacement=function(t,e,n,r,i){for(var o=this;this._currentTileIndex<t.length;)if(e.placeLayerTile(r,t[o._currentTileIndex],n,o._seenCrossTileIDs),o._currentTileIndex++,i())return!0};var a=function(t,e,n,r,o){this.placement=new i(t,o),this._currentPlacementIndex=e.length-1,this._forceFullPlacement=n,this._showCollisionBoxes=r,this._done=!1};a.prototype.isDone=function(){return this._done},a.prototype.continuePlacement=function(t,e,n){for(var i=this,a=r.now(),s=function(){var t=r.now()-a;return!i._forceFullPlacement&&t>2};this._currentPlacementIndex>=0;){var u=e[t[i._currentPlacementIndex]],l=i.placement.collisionIndex.transform.zoom;if("symbol"===u.type&&(!u.minzoom||u.minzoom<=l)&&(!u.maxzoom||u.maxzoom>l)){if(i._inProgressLayer||(i._inProgressLayer=new o),i._inProgressLayer.continuePlacement(n[u.source],i.placement,i._showCollisionBoxes,u,s))return;delete i._inProgressLayer}i._currentPlacementIndex--}this._done=!0},a.prototype.commit=function(t,e){return this.placement.commit(t,e),this.placement},e.exports=a},{"../symbol/placement":223,"../util/browser":252}],188:[function(t,e,n){"use strict";var r=t("../util/util"),i=r.clone,o=r.extend,a=r.easeCubicInOut,s=t("../style-spec/util/interpolate"),u=t("../style-spec/expression").normalizePropertyExpression,l=(t("../style-spec/util/color"),t("../util/web_worker_transfer").register),c=function(t,e){this.property=t,this.value=e,this.expression=u(void 0===e?t.specification.default:e,t.specification)};c.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},c.prototype.possiblyEvaluate=function(t){return this.property.possiblyEvaluate(this,t)};var h=function(t){this.property=t,this.value=new c(t,void 0)};h.prototype.transitioned=function(t,e){return new f(this.property,this.value,e,o({},t.transition,this.transition),t.now)},h.prototype.untransitioned=function(){return new f(this.property,this.value,null,{},0)};var p=function(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)};p.prototype.getValue=function(t){return i(this._values[t].value.value)},p.prototype.setValue=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new h(this._values[t].property)),this._values[t].value=new c(this._values[t].property,null===e?void 0:i(e))},p.prototype.getTransition=function(t){return i(this._values[t].transition)},p.prototype.setTransition=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new h(this._values[t].property)),this._values[t].transition=i(e)||void 0},p.prototype.serialize=function(){for(var t=this,e={},n=0,r=Object.keys(t._values);n<r.length;n+=1){var i=r[n],o=t.getValue(i);void 0!==o&&(e[i]=o);var a=t.getTransition(i);void 0!==a&&(e[i+"-transition"]=a)}return e},p.prototype.transitioned=function(t,e){for(var n=new d(this._properties),r=0,i=Object.keys(this._values);r<i.length;r+=1){var o=i[r];n._values[o]=this._values[o].transitioned(t,e._values[o])}return n},p.prototype.untransitioned=function(){for(var t=new d(this._properties),e=0,n=Object.keys(this._values);e<n.length;e+=1){var r=n[e];t._values[r]=this._values[r].untransitioned()}return t};var f=function(t,e,n,r,i){this.property=t,this.value=e,this.begin=i+r.delay||0,this.end=this.begin+r.duration||0,t.specification.transition&&(r.delay||r.duration)&&(this.prior=n)};f.prototype.possiblyEvaluate=function(t){var e=t.now||0,n=this.value.possiblyEvaluate(t),r=this.prior;if(r){if(e>this.end)return this.prior=null,n;if(this.value.isDataDriven())return this.prior=null,n;if(e<this.begin)return r.possiblyEvaluate(t);var i=(e-this.begin)/(this.end-this.begin);return this.property.interpolate(r.possiblyEvaluate(t),n,a(i))}return n};var d=function(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)};d.prototype.possiblyEvaluate=function(t){for(var e=new y(this._properties),n=0,r=Object.keys(this._values);n<r.length;n+=1){var i=r[n];e._values[i]=this._values[i].possiblyEvaluate(t)}return e},d.prototype.hasTransition=function(){for(var t=0,e=Object.keys(this._values);t<e.length;t+=1)if(this._values[e[t]].prior)return!0;return!1};var m=function(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)};m.prototype.getValue=function(t){return i(this._values[t].value)},m.prototype.setValue=function(t,e){this._values[t]=new c(this._values[t].property,null===e?void 0:i(e))},m.prototype.serialize=function(){for(var t={},e=0,n=Object.keys(this._values);e<n.length;e+=1){var r=n[e],i=this.getValue(r);void 0!==i&&(t[r]=i)}return t},m.prototype.possiblyEvaluate=function(t){for(var e=new y(this._properties),n=0,r=Object.keys(this._values);n<r.length;n+=1){var i=r[n];e._values[i]=this._values[i].possiblyEvaluate(t)}return e};var g=function(t,e,n){this.property=t,this.value=e,this.globals=n};g.prototype.isConstant=function(){return"constant"===this.value.kind},g.prototype.constantOr=function(t){return"constant"===this.value.kind?this.value.value:t},g.prototype.evaluate=function(t){return this.property.evaluate(this.value,this.globals,t)};var y=function(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)};y.prototype.get=function(t){return this._values[t]};var v=function(t){this.specification=t};v.prototype.possiblyEvaluate=function(t,e){return t.expression.evaluate(e)},v.prototype.interpolate=function(t,e,n){var r=s[this.specification.type];return r?r(t,e,n):t};var _=function(t){this.specification=t};_.prototype.possiblyEvaluate=function(t,e){return new g(this,"constant"===t.expression.kind||"camera"===t.expression.kind?{kind:"constant",value:t.expression.evaluate(e)}:t.expression,e)},_.prototype.interpolate=function(t,e,n){if("constant"!==t.value.kind||"constant"!==e.value.kind)return t;if(void 0!==t.value.value&&void 0!==e.value.value){var r=s[this.specification.type];return r?new g(this,{kind:"constant",value:r(t.value.value,e.value.value,n)},t.globals):t}},_.prototype.evaluate=function(t,e,n){return"constant"===t.kind?t.value:t.evaluate(e,n)};var b=function(t){this.specification=t};b.prototype.possiblyEvaluate=function(t,e){if(void 0!==t.value){if("constant"===t.expression.kind){var n=t.expression.evaluate(e);return this._calculate(n,n,n,e)}return this._calculate(t.expression.evaluate({zoom:e.zoom-1}),t.expression.evaluate({zoom:e.zoom}),t.expression.evaluate({zoom:e.zoom+1}),e)}},b.prototype._calculate=function(t,e,n,r){var i=r.zoom,o=i-Math.floor(i),a=r.crossFadingFactor();return i>r.zoomHistory.lastIntegerZoom?{from:t,to:e,fromScale:2,toScale:1,t:o+(1-o)*a}:{from:n,to:e,fromScale:.5,toScale:1,t:1-(1-a)*o}},b.prototype.interpolate=function(t){return t};var x=function(t){this.specification=t};x.prototype.possiblyEvaluate=function(){},x.prototype.interpolate=function(){},l("DataDrivenProperty",_),l("DataConstantProperty",v),l("CrossFadedProperty",b),l("HeatmapColorProperty",x),e.exports={PropertyValue:c,Transitionable:p,Transitioning:d,Layout:m,PossiblyEvaluatedPropertyValue:g,PossiblyEvaluated:y,DataConstantProperty:v,DataDrivenProperty:_,CrossFadedProperty:b,HeatmapColorProperty:x,Properties:function(t){var e=this;for(var n in this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},t){var r=t[n],i=e.defaultPropertyValues[n]=new c(r,void 0),o=e.defaultTransitionablePropertyValues[n]=new h(r);e.defaultTransitioningPropertyValues[n]=o.untransitioned(),e.defaultPossiblyEvaluatedValues[n]=i.possiblyEvaluate({})}}}},{"../style-spec/expression":139,"../style-spec/util/color":153,"../style-spec/util/interpolate":158,"../util/util":275,"../util/web_worker_transfer":278}],189:[function(t,e,n){"use strict";var r=t("@mapbox/point-geometry");e.exports={getMaximumPaintValue:function(t,e,n){var r=e.paint.get(t).value;return"constant"===r.kind?r.value:n.programConfigurations.get(e.id).binders[t].statistics.max},translateDistance:function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])},translate:function(t,e,n,i,o){if(!e[0]&&!e[1])return t;var a=r.convert(e);"viewport"===n&&a._rotate(-i);for(var s=[],u=0;u<t.length;u++){for(var l=t[u],c=[],h=0;h<l.length;h++)c.push(l[h].sub(a._mult(o)));s.push(c)}return s}}},{"@mapbox/point-geometry":4}],190:[function(t,e,n){"use strict";var r=t("../util/evented"),i=t("./style_layer"),o=t("./load_sprite"),a=t("../render/image_manager"),s=t("../render/glyph_manager"),u=t("./light"),l=t("../render/line_atlas"),c=t("../util/util"),h=t("../util/ajax"),p=t("../util/mapbox"),f=t("../util/browser"),d=t("../util/dispatcher"),m=t("./validate_style"),g=t("../source/source").getType,y=t("../source/source").setType,v=t("../source/query_features"),_=t("../source/source_cache"),b=(t("../source/geojson_source"),t("../style-spec/reference/latest")),x=t("../util/global_worker_pool"),w=t("../style-spec/deref"),E=t("../style-spec/diff"),C=t("../source/rtl_text_plugin"),S=t("./pauseable_placement"),I=t("./zoom_history"),T=t("../symbol/cross_tile_symbol_index"),k=c.pick(E.operations,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),O=c.pick(E.operations,["setCenter","setZoom","setBearing","setPitch"]),P=function(t){function e(e,n){var r=this;void 0===n&&(n={}),t.call(this),this.map=e,this.dispatcher=new d(x(),this),this.imageManager=new a,this.glyphManager=new s(e._transformRequest,n.localIdeographFontFamily),this.lineAtlas=new l(256,512),this.crossTileSymbolIndex=new T,this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new I,this._loaded=!1,this._resetUpdates();var i=this;this._rtlTextPluginCallback=C.registerForPluginAvailability(function(t){for(var e in i.dispatcher.broadcast("loadRTLTextPlugin",t.pluginBlobURL,t.errorCallback),i.sourceCaches)i.sourceCaches[e].reload()}),this.on("data",function(t){if("source"===t.dataType&&"metadata"===t.sourceDataType){var e=r.sourceCaches[t.sourceId];if(e){var n=e.getSource();if(n&&n.vectorLayerIds)for(var i in r._layers){var o=r._layers[i];o.source===n.id&&r._validateLayer(o)}}}})}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.loadURL=function(t,e){var n=this;void 0===e&&(e={}),this.fire("dataloading",{dataType:"style"});var r="boolean"==typeof e.validate?e.validate:!p.isMapboxURL(t);t=p.normalizeStyleURL(t,e.accessToken);var i=this.map._transformRequest(t,h.ResourceType.Style);h.getJSON(i,function(t,e){t?n.fire("error",{error:t}):e&&n._load(e,r)})},e.prototype.loadJSON=function(t,e){var n=this;void 0===e&&(e={}),this.fire("dataloading",{dataType:"style"}),f.frame(function(){n._load(t,!1!==e.validate)})},e.prototype._load=function(t,e){var n=this;if(!e||!m.emitErrors(this,m(t))){for(var r in this._loaded=!0,this.stylesheet=t,t.sources)n.addSource(r,t.sources[r],{validate:!1});t.sprite?o(t.sprite,this.map._transformRequest,function(t,e){if(t)n.fire("error",t);else if(e)for(var r in e)n.imageManager.addImage(r,e[r]);n.imageManager.setLoaded(!0),n.fire("data",{dataType:"style"})}):this.imageManager.setLoaded(!0),this.glyphManager.setURL(t.glyphs);var a=w(this.stylesheet.layers);this._order=a.map(function(t){return t.id}),this._layers={};for(var s=0,l=a;s<l.length;s+=1){var c=l[s];(c=i.create(c)).setEventedParent(n,{layer:{id:c.id}}),n._layers[c.id]=c}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new u(this.stylesheet.light),this.fire("data",{dataType:"style"}),this.fire("style.load")}},e.prototype._validateLayer=function(t){var e=this.sourceCaches[t.source];if(e){var n=t.sourceLayer;if(n){var r=e.getSource();("geojson"===r.type||r.vectorLayerIds&&-1===r.vectorLayerIds.indexOf(n))&&this.fire("error",{error:new Error('Source layer "'+n+'" does not exist on source "'+r.id+'" as specified by style layer "'+t.id+'"')})}}},e.prototype.loaded=function(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var t in this.sourceCaches)if(!this.sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()},e.prototype._serializeLayers=function(t){var e=this;return t.map(function(t){return e._layers[t].serialize()})},e.prototype.hasTransitions=function(){var t=this;if(this.light&&this.light.hasTransition())return!0;for(var e in t.sourceCaches)if(t.sourceCaches[e].hasTransition())return!0;for(var n in t._layers)if(t._layers[n].hasTransition())return!0;return!1},e.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},e.prototype.update=function(t){var e=this;if(this._loaded){if(this._changed){var n=Object.keys(this._updatedLayers),r=Object.keys(this._removedLayers);for(var i in(n.length||r.length)&&this._updateWorkerLayers(n,r),e._updatedSources){var o=e._updatedSources[i];"reload"===o?e._reloadSource(i):"clear"===o&&e._clearSource(i)}for(var a in e._updatedPaintProps)e._layers[a].updateTransitions(t);this.light.updateTransitions(t),this._resetUpdates(),this.fire("data",{dataType:"style"})}for(var s in e.sourceCaches)e.sourceCaches[s].used=!1;for(var u=0,l=e._order;u<l.length;u+=1){var c=e._layers[l[u]];c.recalculate(t),!c.isHidden(t.zoom)&&c.source&&(e.sourceCaches[c.source].used=!0)}this.light.recalculate(t),this.z=t.zoom}},e.prototype._updateWorkerLayers=function(t,e){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(t),removedIds:e})},e.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={}},e.prototype.setState=function(t){var e=this;if(this._checkLoaded(),m.emitErrors(this,m(t)))return!1;(t=c.clone(t)).layers=w(t.layers);var n=E(this.serialize(),t).filter(function(t){return!(t.command in O)});if(0===n.length)return!1;var r=n.filter(function(t){return!(t.command in k)});if(r.length>0)throw new Error("Unimplemented: "+r.map(function(t){return t.command}).join(", ")+".");return n.forEach(function(t){"setTransition"!==t.command&&e[t.command].apply(e,t.args)}),this.stylesheet=t,!0},e.prototype.addImage=function(t,e){if(this.getImage(t))return this.fire("error",{error:new Error("An image with this name already exists.")});this.imageManager.addImage(t,e),this.fire("data",{dataType:"style"})},e.prototype.getImage=function(t){return this.imageManager.getImage(t)},e.prototype.removeImage=function(t){if(!this.getImage(t))return this.fire("error",{error:new Error("No image with this name exists.")});this.imageManager.removeImage(t),this.fire("data",{dataType:"style"})},e.prototype.addSource=function(t,e,n){var r=this;if(this._checkLoaded(),void 0!==this.sourceCaches[t])throw new Error("There is already a source with this ID");if(!e.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(e).join(", ")+".");if(!(["vector","raster","geojson","video","image","canvas"].indexOf(e.type)>=0&&this._validate(m.source,"sources."+t,e,null,n))){this.map&&this.map._collectResourceTiming&&(e.collectResourceTiming=!0);var i=this.sourceCaches[t]=new _(t,e,this.dispatcher);i.style=this,i.setEventedParent(this,function(){return{isSourceLoaded:r.loaded(),source:i.serialize(),sourceId:t}}),i.onAdd(this.map),this._changed=!0}},e.prototype.removeSource=function(t){var e=this;if(this._checkLoaded(),void 0===this.sourceCaches[t])throw new Error("There is no source with this ID");for(var n in e._layers)if(e._layers[n].source===t)return e.fire("error",{error:new Error('Source "'+t+'" cannot be removed while layer "'+n+'" is using it.')});var r=this.sourceCaches[t];delete this.sourceCaches[t],delete this._updatedSources[t],r.fire("data",{sourceDataType:"metadata",dataType:"source",sourceId:t}),r.setEventedParent(null),r.clearTiles(),r.onRemove&&r.onRemove(this.map),this._changed=!0},e.prototype.setGeoJSONSourceData=function(t,e){this._checkLoaded(),this.sourceCaches[t].getSource().setData(e),this._changed=!0},e.prototype.getSource=function(t){return this.sourceCaches[t]&&this.sourceCaches[t].getSource()},e.prototype.addLayer=function(t,e,n){this._checkLoaded();var r=t.id;if("object"==typeof t.source&&(this.addSource(r,t.source),t=c.clone(t),t=c.extend(t,{source:r})),!this._validate(m.layer,"layers."+r,t,{arrayIndex:-1},n)){var o=i.create(t);this._validateLayer(o),o.setEventedParent(this,{layer:{id:r}});var a=e?this._order.indexOf(e):this._order.length;if(e&&-1===a)return void this.fire("error",{error:new Error('Layer with id "'+e+'" does not exist on this map.')});if(this._order.splice(a,0,r),this._layerOrderChanged=!0,this._layers[r]=o,this._removedLayers[r]&&o.source){var s=this._removedLayers[r];delete this._removedLayers[r],s.type!==o.type?this._updatedSources[o.source]="clear":(this._updatedSources[o.source]="reload",this.sourceCaches[o.source].pause())}this._updateLayer(o)}},e.prototype.moveLayer=function(t,e){if(this._checkLoaded(),this._changed=!0,this._layers[t]){var n=this._order.indexOf(t);this._order.splice(n,1);var r=e?this._order.indexOf(e):this._order.length;e&&-1===r?this.fire("error",{error:new Error('Layer with id "'+e+'" does not exist on this map.')}):(this._order.splice(r,0,t),this._layerOrderChanged=!0)}else this.fire("error",{error:new Error("The layer '"+t+"' does not exist in the map's style and cannot be moved.")})},e.prototype.removeLayer=function(t){this._checkLoaded();var e=this._layers[t];if(e){e.setEventedParent(null);var n=this._order.indexOf(t);this._order.splice(n,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[t]=e,delete this._layers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t]}else this.fire("error",{error:new Error("The layer '"+t+"' does not exist in the map's style and cannot be removed.")})},e.prototype.getLayer=function(t){return this._layers[t]},e.prototype.setLayerZoomRange=function(t,e,n){this._checkLoaded();var r=this.getLayer(t);r?r.minzoom===e&&r.maxzoom===n||(null!=e&&(r.minzoom=e),null!=n&&(r.maxzoom=n),this._updateLayer(r)):this.fire("error",{error:new Error("The layer '"+t+"' does not exist in the map's style and cannot have zoom extent.")})},e.prototype.setFilter=function(t,e){this._checkLoaded();var n=this.getLayer(t);if(n)return c.deepEqual(n.filter,e)?void 0:null===e||void 0===e?(n.filter=void 0,void this._updateLayer(n)):void(this._validate(m.filter,"layers."+n.id+".filter",e)||(n.filter=c.clone(e),this._updateLayer(n)));this.fire("error",{error:new Error("The layer '"+t+"' does not exist in the map's style and cannot be filtered.")})},e.prototype.getFilter=function(t){return c.clone(this.getLayer(t).filter)},e.prototype.setLayoutProperty=function(t,e,n){this._checkLoaded();var r=this.getLayer(t);r?c.deepEqual(r.getLayoutProperty(e),n)||(r.setLayoutProperty(e,n),this._updateLayer(r)):this.fire("error",{error:new Error("The layer '"+t+"' does not exist in the map's style and cannot be styled.")})},e.prototype.getLayoutProperty=function(t,e){return this.getLayer(t).getLayoutProperty(e)},e.prototype.setPaintProperty=function(t,e,n){this._checkLoaded();var r=this.getLayer(t);if(r){if(!c.deepEqual(r.getPaintProperty(e),n)){var i=r._transitionablePaint._values[e].value.isDataDriven();r.setPaintProperty(e,n),(r._transitionablePaint._values[e].value.isDataDriven()||i)&&this._updateLayer(r),this._changed=!0,this._updatedPaintProps[t]=!0}}else this.fire("error",{error:new Error("The layer '"+t+"' does not exist in the map's style and cannot be styled.")})},e.prototype.getPaintProperty=function(t,e){return this.getLayer(t).getPaintProperty(e)},e.prototype.getTransition=function(){return c.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},e.prototype.serialize=function(){var t=this;return c.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:c.mapObject(this.sourceCaches,function(t){return t.serialize()}),layers:this._order.map(function(e){return t._layers[e].serialize()})},function(t){return void 0!==t})},e.prototype._updateLayer=function(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&(this._updatedSources[t.source]="reload",this.sourceCaches[t.source].pause()),this._changed=!0},e.prototype._flattenRenderedFeatures=function(t){for(var e=[],n=this._order.length-1;n>=0;n--)for(var r=this._order[n],i=0,o=t;i<o.length;i+=1){var a=o[i][r];if(a)for(var s=0,u=a;s<u.length;s+=1)e.push(u[s])}return e},e.prototype.queryRenderedFeatures=function(t,e,n,r){var i=this;e&&e.filter&&this._validate(m.filter,"queryRenderedFeatures.filter",e.filter);var o={};if(e&&e.layers){if(!Array.isArray(e.layers))return this.fire("error",{error:"parameters.layers must be an Array."}),[];for(var a=0,s=e.layers;a<s.length;a+=1){var u=s[a],l=i._layers[u];if(!l)return i.fire("error",{error:"The layer '"+u+"' does not exist in the map's style and cannot be queried for features."}),[];o[l.source]=!0}}var c=[];for(var h in i.sourceCaches)if(!e.layers||o[h]){var p=v.rendered(i.sourceCaches[h],i._layers,t,e,n,r,i.placement?i.placement.collisionIndex:null);c.push(p)}return this._flattenRenderedFeatures(c)},e.prototype.querySourceFeatures=function(t,e){e&&e.filter&&this._validate(m.filter,"querySourceFeatures.filter",e.filter);var n=this.sourceCaches[t];return n?v.source(n,e):[]},e.prototype.addSourceType=function(t,e,n){return g(t)?n(new Error('A source type called "'+t+'" already exists.')):(y(t,e),e.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:e.workerSourceURL},n):n(null,null))},e.prototype.getLight=function(){return this.light.getLight()},e.prototype.setLight=function(t){this._checkLoaded();var e=this.light.getLight(),n=!1;for(var r in t)if(!c.deepEqual(t[r],e[r])){n=!0;break}if(n){var i={now:f.now(),transition:c.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(t),this.light.updateTransitions(i)}},e.prototype._validate=function(t,e,n,r,i){return(!i||!1!==i.validate)&&m.emitErrors(this,t.call(m,c.extend({key:e,style:this.serialize(),value:n,styleSpec:b},r)))},e.prototype._remove=function(){for(var t in C.evented.off("pluginAvailable",this._rtlTextPluginCallback),this.sourceCaches)this.sourceCaches[t].clearTiles();this.dispatcher.remove()},e.prototype._clearSource=function(t){this.sourceCaches[t].clearTiles()},e.prototype._reloadSource=function(t){this.sourceCaches[t].resume(),this.sourceCaches[t].reload()},e.prototype._updateSources=function(t){for(var e in this.sourceCaches)this.sourceCaches[e].update(t)},e.prototype._generateCollisionBoxes=function(){for(var t in this.sourceCaches)this._reloadSource(t)},e.prototype._updatePlacement=function(t,e,n){for(var r=this,i=!1,o=!1,a={},s=0,u=r._order;s<u.length;s+=1){var l=r._layers[u[s]];if("symbol"===l.type){if(!a[l.source]){var c=r.sourceCaches[l.source];a[l.source]=c.getRenderableIds().map(function(t){return c.getTileByID(t)}).sort(function(t,e){return e.tileID.overscaledZ-t.tileID.overscaledZ||(t.tileID.isLessThan(e.tileID)?-1:1)})}var h=r.crossTileSymbolIndex.addLayer(l,a[l.source]);i=i||h}}this.crossTileSymbolIndex.pruneUnusedLayers(this._order);var p=this._layerOrderChanged;if((p||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(f.now()))&&(this.pauseablePlacement=new S(t,this._order,p,e,n),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,a),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(this.placement,f.now()),o=!0),i&&this.pauseablePlacement.placement.setStale()),o||i)for(var d=0,m=r._order;d<m.length;d+=1){var g=r._layers[m[d]];"symbol"===g.type&&r.placement.updateLayerOpacities(g,a[g.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(f.now())},e.prototype.getImages=function(t,e,n){this.imageManager.getImages(e.icons,n)},e.prototype.getGlyphs=function(t,e,n){this.glyphManager.getGlyphs(e.stacks,n)},e}(r);e.exports=P},{"../render/glyph_manager":86,"../render/image_manager":88,"../render/line_atlas":89,"../source/geojson_source":99,"../source/query_features":105,"../source/rtl_text_plugin":109,"../source/source":110,"../source/source_cache":111,"../style-spec/deref":120,"../style-spec/diff":121,"../style-spec/reference/latest":151,"../symbol/cross_tile_symbol_index":218,"../util/ajax":251,"../util/browser":252,"../util/dispatcher":258,"../util/evented":260,"../util/global_worker_pool":262,"../util/mapbox":267,"../util/util":275,"./light":183,"./load_sprite":185,"./pauseable_placement":187,"./style_layer":191,"./validate_style":211,"./zoom_history":212}],191:[function(t,e,n){"use strict";var r=t("../util/util"),i=t("../style-spec/reference/latest"),o=t("./validate_style"),a=t("../util/evented"),s=t("./properties"),u=s.Layout,l=s.Transitionable,c=function(t){function e(e,n){for(var r in t.call(this),this.id=e.id,this.metadata=e.metadata,this.type=e.type,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,this.visibility="visible","background"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),this._featureFilter=function(){return!0},n.layout&&(this._unevaluatedLayout=new u(n.layout)),this._transitionablePaint=new l(n.paint),e.paint)this.setPaintProperty(r,e.paint[r],{validate:!1});for(var i in e.layout)this.setLayoutProperty(i,e.layout[i],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned()}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getLayoutProperty=function(t){return"visibility"===t?this.visibility:this._unevaluatedLayout.getValue(t)},e.prototype.setLayoutProperty=function(t,e,n){null!==e&&void 0!==e&&this._validate(o.layoutProperty,"layers."+this.id+".layout."+t,t,e,n)||("visibility"!==t?this._unevaluatedLayout.setValue(t,e):this.visibility="none"===e?e:"visible")},e.prototype.getPaintProperty=function(t){return r.endsWith(t,"-transition")?this._transitionablePaint.getTransition(t.slice(0,-"-transition".length)):this._transitionablePaint.getValue(t)},e.prototype.setPaintProperty=function(t,e,n){null!==e&&void 0!==e&&this._validate(o.paintProperty,"layers."+this.id+".paint."+t,t,e,n)||(r.endsWith(t,"-transition")?this._transitionablePaint.setTransition(t.slice(0,-"-transition".length),e||void 0):this._transitionablePaint.setValue(t,e))},e.prototype.isHidden=function(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.visibility},e.prototype.updateTransitions=function(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)},e.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},e.prototype.recalculate=function(t){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t)),this.paint=this._transitioningPaint.possiblyEvaluate(t)},e.prototype.serialize=function(){var t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return"none"===this.visibility&&(t.layout=t.layout||{},t.layout.visibility="none"),r.filterObject(t,function(t,e){return!(void 0===t||"layout"===e&&!Object.keys(t).length||"paint"===e&&!Object.keys(t).length)})},e.prototype._validate=function(t,e,n,r,a){return(!a||!1!==a.validate)&&o.emitErrors(this,t.call(o,{key:e,layerType:this.type,objectKey:n,value:r,styleSpec:i,style:{glyphs:!0,sprite:!0}}))},e.prototype.hasOffscreenPass=function(){return!1},e.prototype.resize=function(){},e}(a);e.exports=c;var h={circle:t("./style_layer/circle_style_layer"),heatmap:t("./style_layer/heatmap_style_layer"),hillshade:t("./style_layer/hillshade_style_layer"),fill:t("./style_layer/fill_style_layer"),"fill-extrusion":t("./style_layer/fill_extrusion_style_layer"),line:t("./style_layer/line_style_layer"),symbol:t("./style_layer/symbol_style_layer"),background:t("./style_layer/background_style_layer"),raster:t("./style_layer/raster_style_layer")};c.create=function(t){return new h[t.type](t)}},{"../style-spec/reference/latest":151,"../util/evented":260,"../util/util":275,"./properties":188,"./style_layer/background_style_layer":192,"./style_layer/circle_style_layer":194,"./style_layer/fill_extrusion_style_layer":196,"./style_layer/fill_style_layer":198,"./style_layer/heatmap_style_layer":200,"./style_layer/hillshade_style_layer":202,"./style_layer/line_style_layer":204,"./style_layer/raster_style_layer":206,"./style_layer/symbol_style_layer":208,"./validate_style":211}],192:[function(t,e,n){"use strict";var r=t("../style_layer"),i=t("./background_style_layer_properties"),o=(t("../properties"),function(t){function e(e){t.call(this,e,i)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(r));e.exports=o},{"../properties":188,"../style_layer":191,"./background_style_layer_properties":193}],193:[function(t,e,n){"use strict";var r=t("../../style-spec/reference/latest"),i=t("../properties"),o=i.DataConstantProperty,a=i.CrossFadedProperty,s=new(0,i.Properties)({"background-color":new o(r.paint_background["background-color"]),"background-pattern":new a(r.paint_background["background-pattern"]),"background-opacity":new o(r.paint_background["background-opacity"])});e.exports={paint:s}},{"../../style-spec/reference/latest":151,"../properties":188}],194:[function(t,e,n){"use strict";var r=t("../style_layer"),i=t("../../data/bucket/circle_bucket"),o=t("../../util/intersection_tests").multiPolygonIntersectsBufferedMultiPoint,a=t("../query_utils"),s=a.getMaximumPaintValue,u=a.translateDistance,l=a.translate,c=t("./circle_style_layer_properties"),h=(t("../properties"),function(t){function e(e){t.call(this,e,c)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createBucket=function(t){return new i(t)},e.prototype.queryRadius=function(t){var e=t;return s("circle-radius",this,e)+s("circle-stroke-width",this,e)+u(this.paint.get("circle-translate"))},e.prototype.queryIntersectsFeature=function(t,e,n,r,i,a){var s=l(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),i,a),u=this.paint.get("circle-radius").evaluate(e)*a,c=this.paint.get("circle-stroke-width").evaluate(e)*a;return o(s,n,u+c)},e}(r));e.exports=h},{"../../data/bucket/circle_bucket":42,"../../util/intersection_tests":264,"../properties":188,"../query_utils":189,"../style_layer":191,"./circle_style_layer_properties":195}],195:[function(t,e,n){"use strict";var r=t("../../style-spec/reference/latest"),i=t("../properties"),o=i.DataConstantProperty,a=i.DataDrivenProperty,s=new(0,i.Properties)({"circle-radius":new a(r.paint_circle["circle-radius"]),"circle-color":new a(r.paint_circle["circle-color"]),"circle-blur":new a(r.paint_circle["circle-blur"]),"circle-opacity":new a(r.paint_circle["circle-opacity"]),"circle-translate":new o(r.paint_circle["circle-translate"]),"circle-translate-anchor":new o(r.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new o(r.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new o(r.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new a(r.paint_circle["circle-stroke-width"]),"circle-stroke-color":new a(r.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new a(r.paint_circle["circle-stroke-opacity"])});e.exports={paint:s}},{"../../style-spec/reference/latest":151,"../properties":188}],196:[function(t,e,n){"use strict";var r=t("../style_layer"),i=t("../../data/bucket/fill_extrusion_bucket"),o=t("../../util/intersection_tests").multiPolygonIntersectsMultiPolygon,a=t("../query_utils"),s=a.translateDistance,u=a.translate,l=t("./fill_extrusion_style_layer_properties"),c=(t("../properties"),function(t){function e(e){t.call(this,e,l)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createBucket=function(t){return new i(t)},e.prototype.queryRadius=function(){return s(this.paint.get("fill-extrusion-translate"))},e.prototype.queryIntersectsFeature=function(t,e,n,r,i,a){var s=u(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),i,a);return o(s,n)},e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("fill-extrusion-opacity")&&"none"!==this.visibility},e.prototype.resize=function(){this.viewportFrame&&(this.viewportFrame.destroy(),this.viewportFrame=null)},e}(r));e.exports=c},{"../../data/bucket/fill_extrusion_bucket":46,"../../util/intersection_tests":264,"../properties":188,"../query_utils":189,"../style_layer":191,"./fill_extrusion_style_layer_properties":197}],197:[function(t,e,n){"use strict";var r=t("../../style-spec/reference/latest"),i=t("../properties"),o=i.DataConstantProperty,a=i.DataDrivenProperty,s=i.CrossFadedProperty,u=new(0,i.Properties)({"fill-extrusion-opacity":new o(r["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new a(r["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new o(r["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new o(r["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new s(r["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new a(r["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new a(r["paint_fill-extrusion"]["fill-extrusion-base"])});e.exports={paint:u}},{"../../style-spec/reference/latest":151,"../properties":188}],198:[function(t,e,n){"use strict";var r=t("../style_layer"),i=t("../../data/bucket/fill_bucket"),o=t("../../util/intersection_tests").multiPolygonIntersectsMultiPolygon,a=t("../query_utils"),s=a.translateDistance,u=a.translate,l=t("./fill_style_layer_properties"),c=(t("../properties"),function(t){function e(e){t.call(this,e,l)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.recalculate=function(t){this.paint=this._transitioningPaint.possiblyEvaluate(t),void 0===this._transitionablePaint.getValue("fill-outline-color")&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},e.prototype.createBucket=function(t){return new i(t)},e.prototype.queryRadius=function(){return s(this.paint.get("fill-translate"))},e.prototype.queryIntersectsFeature=function(t,e,n,r,i,a){var s=u(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),i,a);return o(s,n)},e}(r));e.exports=c},{"../../data/bucket/fill_bucket":44,"../../util/intersection_tests":264,"../properties":188,"../query_utils":189,"../style_layer":191,"./fill_style_layer_properties":199}],199:[function(t,e,n){"use strict";var r=t("../../style-spec/reference/latest"),i=t("../properties"),o=i.DataConstantProperty,a=i.DataDrivenProperty,s=i.CrossFadedProperty,u=new(0,i.Properties)({"fill-antialias":new o(r.paint_fill["fill-antialias"]),"fill-opacity":new a(r.paint_fill["fill-opacity"]),"fill-color":new a(r.paint_fill["fill-color"]),"fill-outline-color":new a(r.paint_fill["fill-outline-color"]),"fill-translate":new o(r.paint_fill["fill-translate"]),"fill-translate-anchor":new o(r.paint_fill["fill-translate-anchor"]),"fill-pattern":new s(r.paint_fill["fill-pattern"])});e.exports={paint:u}},{"../../style-spec/reference/latest":151,"../properties":188}],200:[function(t,e,n){"use strict";var r=t("../style_layer"),i=t("../../data/bucket/heatmap_bucket"),o=t("../../util/image").RGBAImage,a=t("./heatmap_style_layer_properties"),s=(t("../properties"),function(t){function e(e){t.call(this,e,a),this._updateColorRamp()}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createBucket=function(t){return new i(t)},e.prototype.setPaintProperty=function(e,n,r){t.prototype.setPaintProperty.call(this,e,n,r),"heatmap-color"===e&&this._updateColorRamp()},e.prototype._updateColorRamp=function(){for(var t=this._transitionablePaint._values["heatmap-color"].value.expression,e=new Uint8Array(1024),n=e.length,r=4;r<n;r+=4){var i=t.evaluate({heatmapDensity:r/n});e[r+0]=Math.floor(255*i.r/i.a),e[r+1]=Math.floor(255*i.g/i.a),e[r+2]=Math.floor(255*i.b/i.a),e[r+3]=Math.floor(255*i.a)}this.colorRamp=new o({width:256,height:1},e),this.colorRampTexture=null},e.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},e}(r));e.exports=s},{"../../data/bucket/heatmap_bucket":47,"../../util/image":263,"../properties":188,"../style_layer":191,"./heatmap_style_layer_properties":201}],201:[function(t,e,n){"use strict";var r=t("../../style-spec/reference/latest"),i=t("../properties"),o=i.DataConstantProperty,a=i.DataDrivenProperty,s=i.HeatmapColorProperty,u=new(0,i.Properties)({"heatmap-radius":new a(r.paint_heatmap["heatmap-radius"]),"heatmap-weight":new a(r.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new o(r.paint_heatmap["heatmap-intensity"]),"heatmap-color":new s(r.paint_heatmap["heatmap-color"]),"heatmap-opacity":new o(r.paint_heatmap["heatmap-opacity"])});e.exports={paint:u}},{"../../style-spec/reference/latest":151,"../properties":188}],202:[function(t,e,n){"use strict";var r=t("../style_layer"),i=t("./hillshade_style_layer_properties"),o=(t("../properties"),function(t){function e(e){t.call(this,e,i)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},e}(r));e.exports=o},{"../properties":188,"../style_layer":191,"./hillshade_style_layer_properties":203}],203:[function(t,e,n){"use strict";var r=t("../../style-spec/reference/latest"),i=t("../properties"),o=i.DataConstantProperty,a=new(0,i.Properties)({"hillshade-illumination-direction":new o(r.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new o(r.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new o(r.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new o(r.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new o(r.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new o(r.paint_hillshade["hillshade-accent-color"])});e.exports={paint:a}},{"../../style-spec/reference/latest":151,"../properties":188}],204:[function(t,e,n){"use strict";function r(t,e){return e>0?e+2*t:t}var i=t("@mapbox/point-geometry"),o=t("../style_layer"),a=t("../../data/bucket/line_bucket"),s=t("../../util/intersection_tests").multiPolygonIntersectsBufferedMultiLine,u=t("../query_utils"),l=u.getMaximumPaintValue,c=u.translateDistance,h=u.translate,p=t("./line_style_layer_properties"),f=t("../../util/util").extend,d=t("../evaluation_parameters"),m=new(function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.possiblyEvaluate=function(e,n){return n=new d(Math.floor(n.zoom),{now:n.now,fadeDuration:n.fadeDuration,zoomHistory:n.zoomHistory,transition:n.transition}),t.prototype.possiblyEvaluate.call(this,e,n)},e.prototype.evaluate=function(e,n,r){return n=f({},n,{zoom:Math.floor(n.zoom)}),t.prototype.evaluate.call(this,e,n,r)},e}(t("../properties").DataDrivenProperty))(p.paint.properties["line-width"].specification);m.useIntegerZoom=!0;var g=function(t){function e(e){t.call(this,e,p)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.recalculate=function(e){t.prototype.recalculate.call(this,e),this.paint._values["line-floorwidth"]=m.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)},e.prototype.createBucket=function(t){return new a(t)},e.prototype.queryRadius=function(t){var e=t,n=r(l("line-width",this,e),l("line-gap-width",this,e)),i=l("line-offset",this,e);return n/2+Math.abs(i)+c(this.paint.get("line-translate"))},e.prototype.queryIntersectsFeature=function(t,e,n,o,a,u){var l=h(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),a,u),c=u/2*r(this.paint.get("line-width").evaluate(e),this.paint.get("line-gap-width").evaluate(e)),p=this.paint.get("line-offset").evaluate(e);return p&&(n=function(t,e){for(var n=[],r=new i(0,0),o=0;o<t.length;o++){for(var a=t[o],s=[],u=0;u<a.length;u++){var l=a[u],c=a[u+1],h=0===u?r:l.sub(a[u-1])._unit()._perp(),p=u===a.length-1?r:c.sub(l)._unit()._perp(),f=h._add(p)._unit();f._mult(1/(f.x*p.x+f.y*p.y)),s.push(f._mult(e)._add(l))}n.push(s)}return n}(n,p*u)),s(l,n,c)},e}(o);e.exports=g},{"../../data/bucket/line_bucket":49,"../../util/intersection_tests":264,"../../util/util":275,"../evaluation_parameters":182,"../properties":188,"../query_utils":189,"../style_layer":191,"./line_style_layer_properties":205,"@mapbox/point-geometry":4}],205:[function(t,e,n){"use strict";var r=t("../../style-spec/reference/latest"),i=t("../properties"),o=i.Properties,a=i.DataConstantProperty,s=i.DataDrivenProperty,u=i.CrossFadedProperty,l=new o({"line-cap":new a(r.layout_line["line-cap"]),"line-join":new s(r.layout_line["line-join"]),"line-miter-limit":new a(r.layout_line["line-miter-limit"]),"line-round-limit":new a(r.layout_line["line-round-limit"])}),c=new o({"line-opacity":new s(r.paint_line["line-opacity"]),"line-color":new s(r.paint_line["line-color"]),"line-translate":new a(r.paint_line["line-translate"]),"line-translate-anchor":new a(r.paint_line["line-translate-anchor"]),"line-width":new s(r.paint_line["line-width"]),"line-gap-width":new s(r.paint_line["line-gap-width"]),"line-offset":new s(r.paint_line["line-offset"]),"line-blur":new s(r.paint_line["line-blur"]),"line-dasharray":new u(r.paint_line["line-dasharray"]),"line-pattern":new u(r.paint_line["line-pattern"])});e.exports={paint:c,layout:l}},{"../../style-spec/reference/latest":151,"../properties":188}],206:[function(t,e,n){"use strict";var r=t("../style_layer"),i=t("./raster_style_layer_properties"),o=(t("../properties"),function(t){function e(e){t.call(this,e,i)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(r));e.exports=o},{"../properties":188,"../style_layer":191,"./raster_style_layer_properties":207}],207:[function(t,e,n){"use strict";var r=t("../../style-spec/reference/latest"),i=t("../properties"),o=i.DataConstantProperty,a=new(0,i.Properties)({"raster-opacity":new o(r.paint_raster["raster-opacity"]),"raster-hue-rotate":new o(r.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new o(r.paint_raster["raster-brightness-min"]),"raster-brightness-max":new o(r.paint_raster["raster-brightness-max"]),"raster-saturation":new o(r.paint_raster["raster-saturation"]),"raster-contrast":new o(r.paint_raster["raster-contrast"]),"raster-fade-duration":new o(r.paint_raster["raster-fade-duration"])});e.exports={paint:a}},{"../../style-spec/reference/latest":151,"../properties":188}],208:[function(t,e,n){"use strict";var r=t("../style_layer"),i=t("../../data/bucket/symbol_bucket"),o=t("../../util/token"),a=t("../../style-spec/expression").isExpression,s=t("./symbol_style_layer_properties"),u=(t("../properties"),function(t){function e(e){t.call(this,e,s)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.recalculate=function(e){t.prototype.recalculate.call(this,e),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="line"===this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="line"===this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"))},e.prototype.getValueAndResolveTokens=function(t,e){var n=this.layout.get(t).evaluate(e),r=this._unevaluatedLayout._values[t];return r.isDataDriven()||a(r.value)?n:o(e.properties,n)},e.prototype.createBucket=function(t){return new i(t)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e}(r));e.exports=u},{"../../data/bucket/symbol_bucket":51,"../../style-spec/expression":139,"../../util/token":274,"../properties":188,"../style_layer":191,"./symbol_style_layer_properties":209}],209:[function(t,e,n){"use strict";var r=t("../../style-spec/reference/latest"),i=t("../properties"),o=i.Properties,a=i.DataConstantProperty,s=i.DataDrivenProperty,u=new o({"symbol-placement":new a(r.layout_symbol["symbol-placement"]),"symbol-spacing":new a(r.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new a(r.layout_symbol["symbol-avoid-edges"]),"icon-allow-overlap":new a(r.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new a(r.layout_symbol["icon-ignore-placement"]),"icon-optional":new a(r.layout_symbol["icon-optional"]),"icon-rotation-alignment":new a(r.layout_symbol["icon-rotation-alignment"]),"icon-size":new s(r.layout_symbol["icon-size"]),"icon-text-fit":new a(r.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new a(r.layout_symbol["icon-text-fit-padding"]),"icon-image":new s(r.layout_symbol["icon-image"]),"icon-rotate":new s(r.layout_symbol["icon-rotate"]),"icon-padding":new a(r.layout_symbol["icon-padding"]),"icon-keep-upright":new a(r.layout_symbol["icon-keep-upright"]),"icon-offset":new s(r.layout_symbol["icon-offset"]),"icon-anchor":new s(r.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new a(r.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new a(r.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new a(r.layout_symbol["text-rotation-alignment"]),"text-field":new s(r.layout_symbol["text-field"]),"text-font":new s(r.layout_symbol["text-font"]),"text-size":new s(r.layout_symbol["text-size"]),"text-max-width":new s(r.layout_symbol["text-max-width"]),"text-line-height":new a(r.layout_symbol["text-line-height"]),"text-letter-spacing":new s(r.layout_symbol["text-letter-spacing"]),"text-justify":new s(r.layout_symbol["text-justify"]),"text-anchor":new s(r.layout_symbol["text-anchor"]),"text-max-angle":new a(r.layout_symbol["text-max-angle"]),"text-rotate":new s(r.layout_symbol["text-rotate"]),"text-padding":new a(r.layout_symbol["text-padding"]),"text-keep-upright":new a(r.layout_symbol["text-keep-upright"]),"text-transform":new s(r.layout_symbol["text-transform"]),"text-offset":new s(r.layout_symbol["text-offset"]),"text-allow-overlap":new a(r.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new a(r.layout_symbol["text-ignore-placement"]),"text-optional":new a(r.layout_symbol["text-optional"])}),l=new o({"icon-opacity":new s(r.paint_symbol["icon-opacity"]),"icon-color":new s(r.paint_symbol["icon-color"]),"icon-halo-color":new s(r.paint_symbol["icon-halo-color"]),"icon-halo-width":new s(r.paint_symbol["icon-halo-width"]),"icon-halo-blur":new s(r.paint_symbol["icon-halo-blur"]),"icon-translate":new a(r.paint_symbol["icon-translate"]),"icon-translate-anchor":new a(r.paint_symbol["icon-translate-anchor"]),"text-opacity":new s(r.paint_symbol["text-opacity"]),"text-color":new s(r.paint_symbol["text-color"]),"text-halo-color":new s(r.paint_symbol["text-halo-color"]),"text-halo-width":new s(r.paint_symbol["text-halo-width"]),"text-halo-blur":new s(r.paint_symbol["text-halo-blur"]),"text-translate":new a(r.paint_symbol["text-translate"]),"text-translate-anchor":new a(r.paint_symbol["text-translate-anchor"])});e.exports={paint:l,layout:u}},{"../../style-spec/reference/latest":151,"../properties":188}],210:[function(t,e,n){"use strict";var r=t("./style_layer"),i=t("../util/util"),o=t("../style-spec/feature_filter"),a=t("../style-spec/group_by_layout"),s=function(t){t&&this.replace(t)};s.prototype.replace=function(t){this._layerConfigs={},this._layers={},this.update(t,[])},s.prototype.update=function(t,e){for(var n=this,s=0,u=t;s<u.length;s+=1){var l=u[s];n._layerConfigs[l.id]=l;var c=n._layers[l.id]=r.create(l);c._featureFilter=o(c.filter)}for(var h=0,p=e;h<p.length;h+=1){var f=p[h];delete n._layerConfigs[f],delete n._layers[f]}this.familiesBySource={};for(var d=0,m=a(i.values(this._layerConfigs));d<m.length;d+=1){var g=m[d].map(function(t){return n._layers[t.id]}),y=g[0];if("none"!==y.visibility){var v=y.source||"",_=n.familiesBySource[v];_||(_=n.familiesBySource[v]={});var b=y.sourceLayer||"_geojsonTileLayer",x=_[b];x||(x=_[b]=[]),x.push(g)}}},e.exports=s},{"../style-spec/feature_filter":148,"../style-spec/group_by_layout":150,"../util/util":275,"./style_layer":191}],211:[function(t,e,n){"use strict";e.exports=t("../style-spec/validate_style.min"),e.exports.emitErrors=function(t,e){if(e&&e.length){for(var n=0,r=e;n<r.length;n+=1)t.fire("error",{error:new Error(r[n].message)});return!0}return!1}},{"../style-spec/validate_style.min":181}],212:[function(t,e,n){"use strict";var r=function(){this.first=!0};r.prototype.update=function(t,e){var n=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=n,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=n,!0):(this.lastFloorZoom>n?(this.lastIntegerZoom=n+1,this.lastIntegerZoomTime=e):this.lastFloorZoom<n&&(this.lastIntegerZoom=n,this.lastIntegerZoomTime=e),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=n,!0))},e.exports=r},{}],213:[function(t,e,n){"use strict";var r=t("@mapbox/point-geometry"),i=t("../util/web_worker_transfer").register,o=function(t){function e(e,n,r,i){t.call(this,e,n),this.angle=r,void 0!==i&&(this.segment=i)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.clone=function(){return new e(this.x,this.y,this.angle,this.segment)},e}(r);i("Anchor",o),e.exports=o},{"../util/web_worker_transfer":278,"@mapbox/point-geometry":4}],214:[function(t,e,n){"use strict";e.exports=function(t,e,n,r,i){if(void 0===e.segment)return!0;for(var o=e,a=e.segment+1,s=0;s>-n/2;){if(--a<0)return!1;s-=t[a].dist(o),o=t[a]}s+=t[a].dist(t[a+1]),a++;for(var u=[],l=0;s<n/2;){var c=t[a-1],h=t[a],p=t[a+1];if(!p)return!1;var f=c.angleTo(h)-h.angleTo(p);for(f=Math.abs((f+3*Math.PI)%(2*Math.PI)-Math.PI),u.push({distance:s,angleDelta:f}),l+=f;s-u[0].distance>r;)l-=u.shift().angleDelta;if(l>i)return!1;a++,s+=h.dist(p)}return!0}},{}],215:[function(t,e,n){"use strict";var r=t("@mapbox/point-geometry");e.exports=function(t,e,n,i,o){for(var a=[],s=0;s<t.length;s++)for(var u=t[s],l=void 0,c=0;c<u.length-1;c++){var h=u[c],p=u[c+1];h.x<e&&p.x<e||(h.x<e?h=new r(e,h.y+(e-h.x)/(p.x-h.x)*(p.y-h.y))._round():p.x<e&&(p=new r(e,h.y+(e-h.x)/(p.x-h.x)*(p.y-h.y))._round()),h.y<n&&p.y<n||(h.y<n?h=new r(h.x+(n-h.y)/(p.y-h.y)*(p.x-h.x),n)._round():p.y<n&&(p=new r(h.x+(n-h.y)/(p.y-h.y)*(p.x-h.x),n)._round()),h.x>=i&&p.x>=i||(h.x>=i?h=new r(i,h.y+(i-h.x)/(p.x-h.x)*(p.y-h.y))._round():p.x>=i&&(p=new r(i,h.y+(i-h.x)/(p.x-h.x)*(p.y-h.y))._round()),h.y>=o&&p.y>=o||(h.y>=o?h=new r(h.x+(o-h.y)/(p.y-h.y)*(p.x-h.x),o)._round():p.y>=o&&(p=new r(h.x+(o-h.y)/(p.y-h.y)*(p.x-h.x),o)._round()),l&&h.equals(l[l.length-1])||a.push(l=[h]),l.push(p)))))}return a}},{"@mapbox/point-geometry":4}],216:[function(t,e,n){"use strict";var r=function(t,e,n,r,i,o,a,s,u,l,c){var h=a.top*s-u,p=a.bottom*s+u,f=a.left*s-u,d=a.right*s+u;if(this.boxStartIndex=t.length,l){var m=p-h,g=d-f;m>0&&(m=Math.max(10*s,m),this._addLineCollisionCircles(t,e,n,n.segment,g,m,r,i,o,c))}else t.emplaceBack(n.x,n.y,f,h,d,p,r,i,o,0,0);this.boxEndIndex=t.length};r.prototype._addLineCollisionCircles=function(t,e,n,r,i,o,a,s,u,l){var c=o/2,h=Math.floor(i/c),p=1+.4*Math.log(l)/Math.LN2,f=Math.floor(h*p/2),d=-o/2,m=n,g=r+1,y=d,v=-i/2,_=v-i/4;do{if(--g<0){if(y>v)return;g=0;break}y-=e[g].dist(m),m=e[g]}while(y>_);for(var b=e[g].dist(e[g+1]),x=-f;x<h+f;x++){var w=x*c,E=v+w;if(w<0&&(E+=w),w>i&&(E+=w-i),!(E<y)){for(;y+b<E;){if(y+=b,++g+1>=e.length)return;b=e[g].dist(e[g+1])}var C=E-y,S=e[g],I=e[g+1].sub(S)._unit()._mult(C)._add(S)._round(),T=Math.abs(E-d)<c?0:.8*(E-d);t.emplaceBack(I.x,I.y,-o/2,-o/2,o/2,o/2,a,s,u,o/2,T)}}},e.exports=r},{}],217:[function(t,e,n){"use strict";function r(t,e,n){t[e+4]=n?1:0}var i=t("@mapbox/point-geometry"),o=t("../util/intersection_tests"),a=t("./grid_index"),s=(t("@mapbox/gl-matrix"),t("../symbol/projection")),u=function(t,e,n){void 0===e&&(e=new a(t.width+200,t.height+200,25)),void 0===n&&(n=new a(t.width+200,t.height+200,25)),this.transform=t,this.grid=e,this.ignoredGrid=n,this.pitchfactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+100,this.screenBottomBoundary=t.height+100};u.prototype.placeCollisionBox=function(t,e,n,r){var i=this.projectAndGetPerspectiveRatio(r,t.anchorPointX,t.anchorPointY),o=n*i.perspectiveRatio,a=t.x1*o+i.point.x,s=t.y1*o+i.point.y,u=t.x2*o+i.point.x,l=t.y2*o+i.point.y;return!e&&this.grid.hitTest(a,s,u,l)?{box:[],offscreen:!1}:{box:[a,s,u,l],offscreen:this.isOffscreen(a,s,u,l)}},u.prototype.approximateTileDistance=function(t,e,n,r,i){var o=t.lastSegmentViewportDistance*n;return t.prevTileDistance+o+((i?1:r/this.pitchfactor)-1)*o*Math.abs(Math.sin(e))},u.prototype.placeCollisionCircles=function(t,e,n,o,a,u,l,c,h,p,f,d,m){var g=this,y=[],v=this.projectAnchor(p,u.anchorX,u.anchorY),_=h/24,b=u.lineOffsetX*h,x=u.lineOffsetY*h,w=new i(u.anchorX,u.anchorY),E=s.project(w,f).point,C=s.placeFirstAndLastGlyph(_,c,b,x,!1,E,w,u,l,f,{},!0),S=!1,I=!0,T=v.perspectiveRatio*o,k=1/(o*n),O=0,P=0;C&&(O=this.approximateTileDistance(C.first.tileDistance,C.first.angle,k,v.cameraDistance,m),P=this.approximateTileDistance(C.last.tileDistance,C.last.angle,k,v.cameraDistance,m));for(var A=0;A<t.length;A+=5){var M=t[A],R=t[A+1],L=t[A+2],N=t[A+3];if(!C||N<-O||N>P)r(t,A,!1);else{var D=g.projectPoint(p,M,R),F=L*T;if(y.length>0){var z=D.x-y[y.length-4],j=D.y-y[y.length-3];if(F*F*2>z*z+j*j&&A+8<t.length){var B=t[A+8];if(B>-O&&B<P){r(t,A,!1);continue}}}if(y.push(D.x,D.y,F,A/5),r(t,A,!0),I=I&&g.isOffscreen(D.x-F,D.y-F,D.x+F,D.y+F),!e&&g.grid.hitTestCircle(D.x,D.y,F)){if(!d)return{circles:[],offscreen:!1};S=!0}}}return{circles:S?[]:y,offscreen:I}},u.prototype.queryRenderedSymbols=function(t,e,n,r,a,s){var u={},l=[];if(0===t.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return l;for(var c=this.transform.calculatePosMatrix(e.toUnwrapped()),h=[],p=1/0,f=1/0,d=-1/0,m=-1/0,g=0;g<t.length;g++)for(var y=t[g],v=0;v<y.length;v++){var _=this.projectPoint(c,y[v].x,y[v].y);p=Math.min(p,_.x),f=Math.min(f,_.y),d=Math.max(d,_.x),m=Math.max(m,_.y),h.push(_)}for(var b=e.key,x=[],w=this.grid.query(p,f,d,m),E=0;E<w.length;E++)w[E].sourceID===a&&w[E].tileID===b&&s[w[E].bucketInstanceId]&&x.push(w[E].boxIndex);for(var C=this.ignoredGrid.query(p,f,d,m),S=0;S<C.length;S++)C[S].sourceID===a&&C[S].tileID===b&&s[C[S].bucketInstanceId]&&x.push(C[S].boxIndex);for(var I=0;I<x.length;I++){var T=r.get(x[I]),k=T.sourceLayerIndex,O=T.featureIndex,P=T.bucketIndex;if(void 0===u[k]&&(u[k]={}),void 0===u[k][O]&&(u[k][O]={}),!u[k][O][P]){var A=this.projectAndGetPerspectiveRatio(c,T.anchorPointX,T.anchorPointY),M=n*A.perspectiveRatio,R=T.x1*M+A.point.x,L=T.y1*M+A.point.y,N=T.x2*M+A.point.x,D=T.y2*M+A.point.y,F=[new i(R,L),new i(N,L),new i(N,D),new i(R,D)];o.polygonIntersectsPolygon(h,F)&&(u[k][O][P]=!0,l.push(x[I]))}}return l},u.prototype.insertCollisionBox=function(t,e,n,r,i,o){(e?this.ignoredGrid:this.grid).insert({tileID:n,sourceID:r,bucketInstanceId:i,boxIndex:o},t[0],t[1],t[2],t[3])},u.prototype.insertCollisionCircles=function(t,e,n,r,i,o){for(var a=e?this.ignoredGrid:this.grid,s=0;s<t.length;s+=4)a.insertCircle({tileID:n,sourceID:r,bucketInstanceId:i,boxIndex:o+t[s+3]},t[s],t[s+1],t[s+2])},u.prototype.projectAnchor=function(t,e,n){var r=[e,n,0,1];return s.xyTransformMat4(r,r,t),{perspectiveRatio:.5+this.transform.cameraToCenterDistance/r[3]*.5,cameraDistance:r[3]}},u.prototype.projectPoint=function(t,e,n){var r=[e,n,0,1];return s.xyTransformMat4(r,r,t),new i((r[0]/r[3]+1)/2*this.transform.width+100,(-r[1]/r[3]+1)/2*this.transform.height+100)},u.prototype.projectAndGetPerspectiveRatio=function(t,e,n){var r=[e,n,0,1];return s.xyTransformMat4(r,r,t),{point:new i((r[0]/r[3]+1)/2*this.transform.width+100,(-r[1]/r[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/r[3]*.5}},u.prototype.isOffscreen=function(t,e,n,r){return n<100||t>=this.screenRightBoundary||r<100||e>this.screenBottomBoundary},e.exports=u},{"../symbol/projection":224,"../util/intersection_tests":264,"./grid_index":220,"@mapbox/gl-matrix":2,"@mapbox/point-geometry":4}],218:[function(t,e,n){"use strict";var r=t("../data/extent"),i=512/r/2,o=function(t,e,n){var r=this;this.tileID=t,this.indexedSymbolInstances={},this.bucketInstanceId=n;for(var i=0,o=e;i<o.length;i+=1){var a=o[i],s=a.key;r.indexedSymbolInstances[s]||(r.indexedSymbolInstances[s]=[]),r.indexedSymbolInstances[s].push({crossTileID:a.crossTileID,coord:r.getScaledCoordinates(a,t)})}};o.prototype.getScaledCoordinates=function(t,e){var n=i/Math.pow(2,e.canonical.z-this.tileID.canonical.z),o=t.anchor;return{x:Math.floor((e.canonical.x*r+o.x)*n),y:Math.floor((e.canonical.y*r+o.y)*n)}},o.prototype.findMatches=function(t,e,n){for(var r=this.tileID.canonical.z<e.canonical.z?1:Math.pow(2,this.tileID.canonical.z-e.canonical.z),i=0,o=t;i<o.length;i+=1){var a=o[i];if(!a.crossTileID){var s=this.indexedSymbolInstances[a.key];if(s)for(var u=this.getScaledCoordinates(a,e),l=0,c=s;l<c.length;l+=1){var h=c[l];if(Math.abs(h.coord.x-u.x)<=r&&Math.abs(h.coord.y-u.y)<=r&&!n[h.crossTileID]){n[h.crossTileID]=!0,a.crossTileID=h.crossTileID;break}}}}};var a=function(){this.maxCrossTileID=0};a.prototype.generate=function(){return++this.maxCrossTileID};var s=function(){this.indexes={},this.usedCrossTileIDs={}};s.prototype.addBucket=function(t,e,n){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===e.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(var r=0,i=e.symbolInstances;r<i.length;r+=1)i[r].crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});var a=this.usedCrossTileIDs[t.overscaledZ];for(var s in this.indexes){var u=this.indexes[s];if(Number(s)>t.overscaledZ)for(var l in u){var c=u[l];c.tileID.isChildOf(t)&&c.findMatches(e.symbolInstances,t,a)}else{var h=u[t.scaledTo(Number(s)).key];h&&h.findMatches(e.symbolInstances,t,a)}}for(var p=0,f=e.symbolInstances;p<f.length;p+=1){var d=f[p];d.crossTileID||(d.crossTileID=n.generate(),a[d.crossTileID]=!0)}return void 0===this.indexes[t.overscaledZ]&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new o(t,e.symbolInstances,e.bucketInstanceId),!0},s.prototype.removeBucketCrossTileIDs=function(t,e){for(var n in e.indexedSymbolInstances)for(var r=0,i=e.indexedSymbolInstances[n];r<i.length;r+=1)delete this.usedCrossTileIDs[t][i[r].crossTileID]},s.prototype.removeStaleBuckets=function(t){var e=this,n=!1;for(var r in e.indexes){var i=e.indexes[r];for(var o in i)t[i[o].bucketInstanceId]||(e.removeBucketCrossTileIDs(r,i[o]),delete i[o],n=!0)}return n};var u=function(){this.layerIndexes={},this.crossTileIDs=new a,this.maxBucketInstanceId=0};u.prototype.addLayer=function(t,e){var n=this.layerIndexes[t.id];void 0===n&&(n=this.layerIndexes[t.id]=new s);for(var r=!1,i={},o=0,a=e;o<a.length;o+=1){var u=a[o],l=u.getBucket(t);l&&(l.bucketInstanceId||(l.bucketInstanceId=++this.maxBucketInstanceId),n.addBucket(u.tileID,l,this.crossTileIDs)&&(r=!0),i[l.bucketInstanceId]=!0)}return n.removeStaleBuckets(i)&&(r=!0),r},u.prototype.pruneUnusedLayers=function(t){var e={};for(var n in t.forEach(function(t){e[t]=!0}),this.layerIndexes)e[n]||delete this.layerIndexes[n]},e.exports=u},{"../data/extent":53}],219:[function(t,e,n){"use strict";var r=t("../style-spec/util/interpolate").number,i=t("../symbol/anchor"),o=t("./check_max_angle");e.exports=function(t,e,n,a,s,u,l,c,h){var p=a?.6*u*l:0,f=Math.max(a?a.right-a.left:0,s?s.right-s.left:0),d=0===t[0].x||t[0].x===h||0===t[0].y||t[0].y===h;return e-f*l<e/4&&(e=f*l+e/4),function t(e,n,a,s,u,l,c,h,p){for(var f=l/2,d=0,m=0;m<e.length-1;m++)d+=e[m].dist(e[m+1]);for(var g=0,y=n-a,v=[],_=0;_<e.length-1;_++){for(var b=e[_],x=e[_+1],w=b.dist(x),E=x.angleTo(b);y+a<g+w;){var C=((y+=a)-g)/w,S=r(b.x,x.x,C),I=r(b.y,x.y,C);if(S>=0&&S<p&&I>=0&&I<p&&y-f>=0&&y+f<=d){var T=new i(S,I,E,_);T._round(),s&&!o(e,T,l,s,u)||v.push(T)}}g+=w}return h||v.length||c||(v=t(e,g/2,a,s,u,l,c,!0,p)),v}(t,d?e/2*c%e:(f/2+2*u)*l*c%e,e,p,n,f*l,d,!1,h)}},{"../style-spec/util/interpolate":158,"../symbol/anchor":213,"./check_max_angle":214}],220:[function(t,e,n){"use strict";var r=function(t,e,n){var r=this.boxCells=[],i=this.circleCells=[];this.xCellCount=Math.ceil(t/n),this.yCellCount=Math.ceil(e/n);for(var o=0;o<this.xCellCount*this.yCellCount;o++)r.push([]),i.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=e,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/e,this.boxUid=0,this.circleUid=0};r.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},r.prototype.insert=function(t,e,n,r,i){this._forEachCell(e,n,r,i,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)},r.prototype.insertCircle=function(t,e,n,r){this._forEachCell(e-r,n-r,e+r,n+r,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(e),this.circles.push(n),this.circles.push(r)},r.prototype._insertBoxCell=function(t,e,n,r,i,o){this.boxCells[i].push(o)},r.prototype._insertCircleCell=function(t,e,n,r,i,o){this.circleCells[i].push(o)},r.prototype._query=function(t,e,n,r,i){if(n<0||t>this.width||r<0||e>this.height)return!i&&[];var o=[];return t<=0&&e<=0&&this.width<=n&&this.height<=r?o=Array.prototype.slice.call(this.boxKeys).concat(this.circleKeys):this._forEachCell(t,e,n,r,this._queryCell,o,{hitTest:i,seenUids:{box:{},circle:{}}}),i?o.length>0:o},r.prototype._queryCircle=function(t,e,n,r){var i=t-n,o=t+n,a=e-n,s=e+n;if(o<0||i>this.width||s<0||a>this.height)return!r&&[];var u=[];return this._forEachCell(i,a,o,s,this._queryCellCircle,u,{hitTest:r,circle:{x:t,y:e,radius:n},seenUids:{box:{},circle:{}}}),r?u.length>0:u},r.prototype.query=function(t,e,n,r){return this._query(t,e,n,r,!1)},r.prototype.hitTest=function(t,e,n,r){return this._query(t,e,n,r,!0)},r.prototype.hitTestCircle=function(t,e,n){return this._queryCircle(t,e,n,!0)},r.prototype._queryCell=function(t,e,n,r,i,o,a){var s=this,u=a.seenUids,l=this.boxCells[i];if(null!==l)for(var c=this.bboxes,h=0,p=l;h<p.length;h+=1){var f=p[h];if(!u.box[f]){u.box[f]=!0;var d=4*f;if(t<=c[d+2]&&e<=c[d+3]&&n>=c[d+0]&&r>=c[d+1]){if(a.hitTest)return o.push(!0),!0;o.push(s.boxKeys[f])}}}var m=this.circleCells[i];if(null!==m)for(var g=this.circles,y=0,v=m;y<v.length;y+=1){var _=v[y];if(!u.circle[_]){u.circle[_]=!0;var b=3*_;if(s._circleAndRectCollide(g[b],g[b+1],g[b+2],t,e,n,r)){if(a.hitTest)return o.push(!0),!0;o.push(s.circleKeys[_])}}}},r.prototype._queryCellCircle=function(t,e,n,r,i,o,a){var s=a.circle,u=a.seenUids,l=this.boxCells[i];if(null!==l)for(var c=this.bboxes,h=0,p=l;h<p.length;h+=1){var f=p[h];if(!u.box[f]){u.box[f]=!0;var d=4*f;if(this._circleAndRectCollide(s.x,s.y,s.radius,c[d+0],c[d+1],c[d+2],c[d+3]))return o.push(!0),!0}}var m=this.circleCells[i];if(null!==m)for(var g=this.circles,y=0,v=m;y<v.length;y+=1){var _=v[y];if(!u.circle[_]){u.circle[_]=!0;var b=3*_;if(this._circlesCollide(g[b],g[b+1],g[b+2],s.x,s.y,s.radius))return o.push(!0),!0}}},r.prototype._forEachCell=function(t,e,n,r,i,o,a){for(var s=this._convertToXCellCoord(t),u=this._convertToYCellCoord(e),l=this._convertToXCellCoord(n),c=this._convertToYCellCoord(r),h=s;h<=l;h++)for(var p=u;p<=c;p++)if(i.call(this,t,e,n,r,this.xCellCount*p+h,o,a))return},r.prototype._convertToXCellCoord=function(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))},r.prototype._convertToYCellCoord=function(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))},r.prototype._circlesCollide=function(t,e,n,r,i,o){var a=r-t,s=i-e,u=n+o;return u*u>a*a+s*s},r.prototype._circleAndRectCollide=function(t,e,n,r,i,o,a){var s=(o-r)/2,u=Math.abs(t-(r+s));if(u>s+n)return!1;var l=(a-i)/2,c=Math.abs(e-(i+l));if(c>l+n)return!1;if(u<=s||c<=l)return!0;var h=u-s,p=c-l;return h*h+p*p<=n*n},e.exports=r},{}],221:[function(t,e,n){"use strict";e.exports=function(t){function e(e){s.push(t[e]),u++}function n(t,e,n){var r=a[t];return delete a[t],a[e]=r,s[r].geometry[0].pop(),s[r].geometry[0]=s[r].geometry[0].concat(n[0]),r}function r(t,e,n){var r=o[e];return delete o[e],o[t]=r,s[r].geometry[0].shift(),s[r].geometry[0]=n[0].concat(s[r].geometry[0]),r}function i(t,e,n){var r=n?e[0][e[0].length-1]:e[0][0];return t+":"+r.x+":"+r.y}for(var o={},a={},s=[],u=0,l=0;l<t.length;l++){var c=t[l],h=c.geometry,p=c.text;if(p){var f=i(p,h),d=i(p,h,!0);if(f in a&&d in o&&a[f]!==o[d]){var m=r(f,d,h),g=n(f,d,s[m].geometry);delete o[f],delete a[d],a[i(p,s[g].geometry,!0)]=g,s[m].geometry=null}else f in a?n(f,d,h):d in o?r(f,d,h):(e(l),o[f]=u-1,a[d]=u-1)}else e(l)}return s.filter(function(t){return t.geometry})}},{}],222:[function(t,e,n){"use strict";var r=t("../util/web_worker_transfer").register,i=function(){this.opacity=0,this.targetOpacity=0,this.time=0};i.prototype.clone=function(){var t=new i;return t.opacity=this.opacity,t.targetOpacity=this.targetOpacity,t.time=this.time,t},r("OpacityState",i),e.exports=i},{"../util/web_worker_transfer":278}],223:[function(t,e,n){"use strict";function r(t,e,n){t.emplaceBack(e?1:0,n?1:0),t.emplaceBack(e?1:0,n?1:0),t.emplaceBack(e?1:0,n?1:0),t.emplaceBack(e?1:0,n?1:0)}function i(t){if(0===t.opacity&&!t.placed)return 0;if(1===t.opacity&&t.placed)return 4294967295;var e=t.placed?1:0,n=Math.floor(127*t.opacity);return n*m+e*g+n*y+e*v+n*_+e*b+n*x+e}var o=t("./collision_index"),a=t("../data/extent"),s=t("./symbol_size"),u=t("./projection"),l=t("../style/style_layer/symbol_style_layer_properties").layout,c=t("../source/pixels_to_tile_units"),h=function(t,e,n,r){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?e:-e))):r&&n?1:0,this.placed=n};h.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var p=function(t,e,n,r,i){this.text=new h(t?t.text:null,e,n,i),this.icon=new h(t?t.icon:null,e,r,i)};p.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var f=function(t,e,n){this.text=t,this.icon=e,this.skipFade=n},d=function(t,e){this.transform=t.clone(),this.collisionIndex=new o(this.transform),this.placements={},this.opacities={},this.stale=!1,this.fadeDuration=e};d.prototype.placeLayerTile=function(t,e,n,r){var i=e.getBucket(t);if(i){var o=i.layers[0].layout,s=Math.pow(2,this.transform.zoom-e.tileID.overscaledZ),l=e.tileSize/a,h=this.transform.calculatePosMatrix(e.tileID.toUnwrapped()),p=u.getLabelPlaneMatrix(h,"map"===o.get("text-pitch-alignment"),"map"===o.get("text-rotation-alignment"),this.transform,c(e,1,this.transform.zoom)),f=u.getLabelPlaneMatrix(h,"map"===o.get("icon-pitch-alignment"),"map"===o.get("icon-rotation-alignment"),this.transform,c(e,1,this.transform.zoom));this.placeLayerBucket(i,h,p,f,s,l,n,r,e.collisionBoxArray,e.tileID.key,t.source)}},d.prototype.placeLayerBucket=function(t,e,n,r,i,o,a,u,c,h,p){for(var d=this,m=t.layers[0].layout,g=s.evaluateSizeForZoom(t.textSizeData,this.transform.zoom,l.properties["text-size"]),y=!t.hasTextData()||m.get("text-optional"),v=!t.hasIconData()||m.get("icon-optional"),_=0,b=t.symbolInstances;_<b.length;_+=1){var x=b[_];if(!u[x.crossTileID]){var w=!1,E=!1,C=!0,S=null,I=null,T=null;x.collisionArrays||(x.collisionArrays=t.deserializeCollisionBoxes(c,x.textBoxStartIndex,x.textBoxEndIndex,x.iconBoxStartIndex,x.iconBoxEndIndex)),x.collisionArrays.textBox&&(w=(S=d.collisionIndex.placeCollisionBox(x.collisionArrays.textBox,m.get("text-allow-overlap"),o,e)).box.length>0,C=C&&S.offscreen);var k=x.collisionArrays.textCircles;if(k){var O=t.text.placedSymbolArray.get(x.placedTextSymbolIndices[0]),P=s.evaluateSizeForFeature(t.textSizeData,g,O);I=d.collisionIndex.placeCollisionCircles(k,m.get("text-allow-overlap"),i,o,x.key,O,t.lineVertexArray,t.glyphOffsetArray,P,e,n,a,"map"===m.get("text-pitch-alignment")),w=m.get("text-allow-overlap")||I.circles.length>0,C=C&&I.offscreen}x.collisionArrays.iconBox&&(E=(T=d.collisionIndex.placeCollisionBox(x.collisionArrays.iconBox,m.get("icon-allow-overlap"),o,e)).box.length>0,C=C&&T.offscreen),y||v?v?y||(E=E&&w):w=E&&w:E=w=E&&w,w&&S&&d.collisionIndex.insertCollisionBox(S.box,m.get("text-ignore-placement"),h,p,t.bucketInstanceId,x.textBoxStartIndex),E&&T&&d.collisionIndex.insertCollisionBox(T.box,m.get("icon-ignore-placement"),h,p,t.bucketInstanceId,x.iconBoxStartIndex),w&&I&&d.collisionIndex.insertCollisionCircles(I.circles,m.get("text-ignore-placement"),h,p,t.bucketInstanceId,x.textBoxStartIndex),d.placements[x.crossTileID]=new f(w,E,C||t.justReloaded),u[x.crossTileID]=!0}}t.justReloaded=!1},d.prototype.commit=function(t,e){var n=this;this.commitTime=e;var r=!1,i=t&&0!==this.fadeDuration?(this.commitTime-t.commitTime)/this.fadeDuration:1,o=t?t.opacities:{};for(var a in n.placements){var s=n.placements[a],u=o[a];u?(n.opacities[a]=new p(u,i,s.text,s.icon),r=r||s.text!==u.text.placed||s.icon!==u.icon.placed):(n.opacities[a]=new p(null,i,s.text,s.icon,s.skipFade),r=r||s.text||s.icon)}for(var l in o){var c=o[l];if(!n.opacities[l]){var h=new p(c,i,!1,!1);h.isHidden()||(n.opacities[l]=h,r=r||c.text.placed||c.icon.placed)}}r?this.lastPlacementChangeTime=e:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=t?t.lastPlacementChangeTime:e)},d.prototype.updateLayerOpacities=function(t,e){for(var n={},r=0,i=e;r<i.length;r+=1){var o=i[r],a=o.getBucket(t);a&&this.updateBucketOpacities(a,n,o.collisionBoxArray)}},d.prototype.updateBucketOpacities=function(t,e,n){t.hasTextData()&&t.text.opacityVertexArray.clear(),t.hasIconData()&&t.icon.opacityVertexArray.clear(),t.hasCollisionBoxData()&&t.collisionBox.collisionVertexArray.clear(),t.hasCollisionCircleData()&&t.collisionCircle.collisionVertexArray.clear();for(var o=t.layers[0].layout,a=new p(null,0,o.get("text-allow-overlap"),o.get("icon-allow-overlap"),!0),s=0;s<t.symbolInstances.length;s++){var u=t.symbolInstances[s],l=e[u.crossTileID],c=this.opacities[u.crossTileID];c?l&&(c=a):this.opacities[u.crossTileID]=c=a,e[u.crossTileID]=!0;var h=u.numIconVertices>0;if(u.numGlyphVertices>0||u.numVerticalGlyphVertices>0){for(var f=i(c.text),d=(u.numGlyphVertices+u.numVerticalGlyphVertices)/4,m=0;m<d;m++)t.text.opacityVertexArray.emplaceBack(f);for(var g=0,y=u.placedTextSymbolIndices;g<y.length;g+=1)t.text.placedSymbolArray.get(y[g]).hidden=c.text.isHidden()}if(h){for(var v=i(c.icon),_=0;_<u.numIconVertices/4;_++)t.icon.opacityVertexArray.emplaceBack(v);t.icon.placedSymbolArray.get(s).hidden=c.icon.isHidden()}u.collisionArrays||(u.collisionArrays=t.deserializeCollisionBoxes(n,u.textBoxStartIndex,u.textBoxEndIndex,u.iconBoxStartIndex,u.iconBoxEndIndex));var b=u.collisionArrays;if(b){b.textBox&&t.hasCollisionBoxData()&&r(t.collisionBox.collisionVertexArray,c.text.placed,!1),b.iconBox&&t.hasCollisionBoxData()&&r(t.collisionBox.collisionVertexArray,c.icon.placed,!1);var x=b.textCircles;if(x&&t.hasCollisionCircleData())for(var w=0;w<x.length;w+=5)r(t.collisionCircle.collisionVertexArray,c.text.placed,l||0===x[w+4])}}t.sortFeatures(this.transform.angle),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasCollisionBoxData()&&t.collisionBox.collisionVertexBuffer&&t.collisionBox.collisionVertexBuffer.updateData(t.collisionBox.collisionVertexArray),t.hasCollisionCircleData()&&t.collisionCircle.collisionVertexBuffer&&t.collisionCircle.collisionVertexBuffer.updateData(t.collisionCircle.collisionVertexArray)},d.prototype.symbolFadeChange=function(t){return 0===this.fadeDuration?1:(t-this.commitTime)/this.fadeDuration},d.prototype.hasTransitions=function(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration},d.prototype.stillRecent=function(t){return"undefined"!==this.commitTime&&this.commitTime+this.fadeDuration>t},d.prototype.setStale=function(){this.stale=!0};var m=Math.pow(2,25),g=Math.pow(2,24),y=Math.pow(2,17),v=Math.pow(2,16),_=Math.pow(2,9),b=Math.pow(2,8),x=Math.pow(2,1);e.exports=d},{"../data/extent":53,"../source/pixels_to_tile_units":104,"../style/style_layer/symbol_style_layer_properties":209,"./collision_index":217,"./projection":224,"./symbol_size":228}],224:[function(t,e,n){"use strict";function r(t,e){var n=[t.x,t.y,0,1];h(n,n,e);var r=n[3];return{point:new p(n[0]/r,n[1]/r),signedDistanceFromCamera:r}}function i(t,e){var n=t[0]/t[3],r=t[1]/t[3];return n>=-e[0]&&n<=e[0]&&r>=-e[1]&&r<=e[1]}function o(t,e,n,r,i,o,a,s,u,c,h,p){var f=s.glyphStartIndex+s.numGlyphs,d=s.lineStartIndex,m=s.lineStartIndex+s.lineLength,g=e.getoffsetX(s.glyphStartIndex),y=e.getoffsetX(f-1),v=l(t*g,n,r,i,o,a,s.segment,d,m,u,c,h,p);if(!v)return null;var _=l(t*y,n,r,i,o,a,s.segment,d,m,u,c,h,p);return _?{first:v,last:_}:null}function a(t,e,n,r){return t===_.horizontal&&Math.abs(n.y-e.y)>Math.abs(n.x-e.x)*r?{useVertical:!0}:(t===_.vertical?e.y<n.y:e.x>n.x)?{needsFlipping:!0}:null}function s(t,e,n,i,s,c,h,f,d,m,g,v,_,b){var x,w=e/24,E=t.lineOffsetX*e,C=t.lineOffsetY*e;if(t.numGlyphs>1){var S=t.glyphStartIndex+t.numGlyphs,I=t.lineStartIndex,T=t.lineStartIndex+t.lineLength,k=o(w,f,E,C,n,g,v,t,d,c,_,!1);if(!k)return{notEnoughRoom:!0};var O=r(k.first.point,h).point,P=r(k.last.point,h).point;if(i&&!n){var A=a(t.writingMode,O,P,b);if(A)return A}x=[k.first];for(var M=t.glyphStartIndex+1;M<S-1;M++)x.push(l(w*f.getoffsetX(M),E,C,n,g,v,t.segment,I,T,d,c,_,!1));x.push(k.last)}else{if(i&&!n){var R=r(v,s).point,L=t.lineStartIndex+t.segment+1,N=new p(d.getx(L),d.gety(L)),D=r(N,s),F=D.signedDistanceFromCamera>0?D.point:u(v,N,R,1,s),z=a(t.writingMode,R,F,b);if(z)return z}var j=l(w*f.getoffsetX(t.glyphStartIndex),E,C,n,g,v,t.segment,t.lineStartIndex,t.lineStartIndex+t.lineLength,d,c,_,!1);if(!j)return{notEnoughRoom:!0};x=[j]}for(var B=0,V=x;B<V.length;B+=1){var q=V[B];y(m,q.point,q.angle)}return{}}function u(t,e,n,i,o){var a=r(t.add(t.sub(e)._unit()),o).point,s=n.sub(a);return n.add(s._mult(i/s.mag()))}function l(t,e,n,i,o,a,s,l,c,h,f,d,m){var g=i?t-e:t+e,y=g>0?1:-1,v=0;i&&(y*=-1,v=Math.PI),y<0&&(v+=Math.PI);for(var _=y>0?l+s:l+s+1,b=_,x=o,w=o,E=0,C=0,S=Math.abs(g);E+C<=S;){if((_+=y)<l||_>=c)return null;if(w=x,void 0===(x=d[_])){var I=new p(h.getx(_),h.gety(_)),T=r(I,f);if(T.signedDistanceFromCamera>0)x=d[_]=T.point;else{var k=_-y;x=u(0===E?a:new p(h.getx(k),h.gety(k)),I,w,S-E+1,f)}}E+=C,C=w.dist(x)}var O=(S-E)/C,P=x.sub(w),A=P.mult(O)._add(w);return A._add(P._unit()._perp()._mult(n*y)),{point:A,angle:v+Math.atan2(x.y-w.y,x.x-w.x),tileDistance:m?{prevTileDistance:_-y===b?0:h.gettileUnitDistanceFromAnchor(_-y),lastSegmentViewportDistance:S-E}:null}}function c(t,e){for(var n=0;n<t;n++){var r=e.length;e.resize(r+4),e.float32.set(b,3*r)}}function h(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t[3]=n[3]*r+n[7]*i+n[15],t}var p=t("@mapbox/point-geometry"),f=t("@mapbox/gl-matrix"),d=f.mat4,m=f.vec4,g=t("./symbol_size"),y=t("../data/bucket/symbol_bucket").addDynamicAttributes,v=t("../style/style_layer/symbol_style_layer_properties").layout,_=t("../symbol/shaping").WritingMode;e.exports={updateLineLabels:function(t,e,n,o,a,u,l,h){var f=o?t.textSizeData:t.iconSizeData,d=g.evaluateSizeForZoom(f,n.transform.zoom,v.properties[o?"text-size":"icon-size"]),y=[256/n.width*2+1,256/n.height*2+1],b=o?t.text.dynamicLayoutVertexArray:t.icon.dynamicLayoutVertexArray;b.clear();for(var x=t.lineVertexArray,w=o?t.text.placedSymbolArray:t.icon.placedSymbolArray,E=n.transform.width/n.transform.height,C=!1,S=0;S<w.length;S++){var I=w.get(S);if(I.hidden||I.writingMode===_.vertical&&!C)c(I.numGlyphs,b);else{C=!1;var T=[I.anchorX,I.anchorY,0,1];if(m.transformMat4(T,T,e),i(T,y)){var k=.5+T[3]/n.transform.cameraToCenterDistance*.5,O=g.evaluateSizeForFeature(f,d,I),P=l?O*k:O/k,A=new p(I.anchorX,I.anchorY),M=r(A,a).point,R={},L=s(I,P,!1,h,e,a,u,t.glyphOffsetArray,x,b,M,A,R,E);C=L.useVertical,(L.notEnoughRoom||C||L.needsFlipping&&s(I,P,!0,h,e,a,u,t.glyphOffsetArray,x,b,M,A,R,E).notEnoughRoom)&&c(I.numGlyphs,b)}else c(I.numGlyphs,b)}}o?t.text.dynamicLayoutVertexBuffer.updateData(b):t.icon.dynamicLayoutVertexBuffer.updateData(b)},getLabelPlaneMatrix:function(t,e,n,r,i){var o=d.identity(new Float32Array(16));return e?(d.identity(o),d.scale(o,o,[1/i,1/i,1]),n||d.rotateZ(o,o,r.angle)):(d.scale(o,o,[r.width/2,-r.height/2,1]),d.translate(o,o,[1,-1,0]),d.multiply(o,o,t)),o},getGlCoordMatrix:function(t,e,n,r,i){var o=d.identity(new Float32Array(16));return e?(d.multiply(o,o,t),d.scale(o,o,[i,i,1]),n||d.rotateZ(o,o,-r.angle)):(d.scale(o,o,[1,-1,1]),d.translate(o,o,[-1,-1,0]),d.scale(o,o,[2/r.width,2/r.height,1])),o},project:r,placeFirstAndLastGlyph:o,xyTransformMat4:h};var b=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0])},{"../data/bucket/symbol_bucket":51,"../style/style_layer/symbol_style_layer_properties":209,"../symbol/shaping":226,"./symbol_size":228,"@mapbox/gl-matrix":2,"@mapbox/point-geometry":4}],225:[function(t,e,n){"use strict";var r=t("@mapbox/point-geometry"),i=t("../style/parse_glyph_pbf").GLYPH_PBF_BORDER;e.exports={getIconQuads:function(t,e,n,i,o,a,s){var u,l,c,h,p=e.image,f=n.layout,d=e.top-1/p.pixelRatio,m=e.left-1/p.pixelRatio,g=e.bottom+1/p.pixelRatio,y=e.right+1/p.pixelRatio;if("none"!==f.get("icon-text-fit")&&o){var v=y-m,_=g-d,b=f.get("text-size").evaluate(s)/24,x=o.left*b,w=o.top*b,E=o.right*b-x,C=o.bottom*b-w,S=f.get("icon-text-fit-padding")[0],I=f.get("icon-text-fit-padding")[1],T=f.get("icon-text-fit-padding")[2],k=f.get("icon-text-fit-padding")[3],O="width"===f.get("icon-text-fit")?.5*(C-_):0,P="height"===f.get("icon-text-fit")?.5*(E-v):0,A="width"===f.get("icon-text-fit")||"both"===f.get("icon-text-fit")?E:v,M="height"===f.get("icon-text-fit")||"both"===f.get("icon-text-fit")?C:_;u=new r(x+P-k,w+O-S),l=new r(x+P+I+A,w+O-S),c=new r(x+P+I+A,w+O+T+M),h=new r(x+P-k,w+O+T+M)}else u=new r(m,d),l=new r(y,d),c=new r(y,g),h=new r(m,g);var R=n.layout.get("icon-rotate").evaluate(s)*Math.PI/180;if(R){var L=Math.sin(R),N=Math.cos(R),D=[N,-L,L,N];u._matMult(D),l._matMult(D),h._matMult(D),c._matMult(D)}return[{tl:u,tr:l,bl:h,br:c,tex:{x:p.textureRect.x-1,y:p.textureRect.y-1,w:p.textureRect.w+2,h:p.textureRect.h+2},writingMode:void 0,glyphOffset:[0,0]}]},getGlyphQuads:function(t,e,n,o,a,s,u){for(var l=n.layout.get("text-rotate").evaluate(s)*Math.PI/180,c=n.layout.get("text-offset").evaluate(s).map(function(t){return 24*t}),h=e.positionedGlyphs,p=[],f=0;f<h.length;f++){var d=h[f],m=u[d.glyph];if(m){var g=m.rect;if(g){var y=i+1,v=m.metrics.advance/2,_=o?[d.x+v,d.y]:[0,0],b=o?[0,0]:[d.x+v+c[0],d.y+c[1]],x=m.metrics.left-y-v+b[0],w=-m.metrics.top-y+b[1],E=x+g.w,C=w+g.h,S=new r(x,w),I=new r(E,w),T=new r(x,C),k=new r(E,C);if(o&&d.vertical){var O=new r(-v,v),P=-Math.PI/2,A=new r(5,0);S._rotateAround(P,O)._add(A),I._rotateAround(P,O)._add(A),T._rotateAround(P,O)._add(A),k._rotateAround(P,O)._add(A)}if(l){var M=Math.sin(l),R=Math.cos(l),L=[R,-M,M,R];S._matMult(L),I._matMult(L),T._matMult(L),k._matMult(L)}p.push({tl:S,tr:I,bl:T,br:k,tex:g,writingMode:e.writingMode,glyphOffset:_})}}}return p}}},{"../style/parse_glyph_pbf":186,"@mapbox/point-geometry":4}],226:[function(t,e,n){"use strict";function r(t,e,n,r){var i=Math.pow(t-e,2);return r?t<e?i/2:2*i:i+Math.abs(n)*n}function i(t,e){var n=0;return 10===t&&(n-=1e4),40!==t&&65288!==t||(n+=50),41!==e&&65289!==e||(n+=50),n}function o(t,e,n,i,o,a){for(var s=null,u=r(e,n,o,a),l=0,c=i;l<c.length;l+=1){var h=c[l],p=r(e-h.x,n,o,a)+h.badness;p<=u&&(s=h,u=p)}return{index:t,x:e,priorBreak:s,badness:u}}function a(t,e,n,r){if(!n)return[];if(!t)return[];for(var a=[],s=function(t,e,n,r){for(var i=0,o=0;o<t.length;o++){var a=r[t.charCodeAt(o)];a&&(i+=a.metrics.advance+e)}return i/Math.max(1,Math.ceil(i/n))}(t,e,n,r),u=0,c=0;c<t.length;c++){var h=t.charCodeAt(c),p=r[h];p&&!f[h]&&(u+=p.metrics.advance+e),c<t.length-1&&(d[h]||l.charAllowsIdeographicBreaking(h))&&a.push(o(c+1,u,s,a,i(h,t.charCodeAt(c+1)),!1))}return function t(e){return e?t(e.priorBreak).concat(e.index):[]}(o(t.length,u,s,a,0,!0))}function s(t){var e=.5,n=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(t){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:e,verticalAlign:n}}function u(t,e,n,r,i){if(i){var o=e[t[r].glyph];if(o)for(var a=(t[r].x+o.metrics.advance)*i,s=n;s<=r;s++)t[s].x-=a}}var l=t("../util/script_detection"),c=t("../util/verticalize_punctuation"),h=t("../source/rtl_text_plugin"),p={horizontal:1,vertical:2,horizontalOnly:3};e.exports={shapeText:function(t,e,n,r,i,o,f,d,m,g){var y=t.trim();g===p.vertical&&(y=c(y));var v=[],_={positionedGlyphs:v,text:y,top:d[1],bottom:d[1],left:d[0],right:d[0],writingMode:g},b=h.processBidirectionalText;return function(t,e,n,r,i,o,a,c,h){for(var f=0,d=-17,m=0,g=t.positionedGlyphs,y="right"===o?1:"left"===o?0:.5,v=0,_=n;v<_.length;v+=1){var b=_[v];if((b=b.trim()).length){for(var x=g.length,w=0;w<b.length;w++){var E=b.charCodeAt(w),C=e[E];C&&(l.charHasUprightVerticalOrientation(E)&&a!==p.horizontal?(g.push({glyph:E,x:f,y:0,vertical:!0}),f+=h+c):(g.push({glyph:E,x:f,y:d,vertical:!1}),f+=C.metrics.advance+c))}g.length!==x&&(m=Math.max(f-c,m),u(g,e,x,g.length-1,y)),f=0,d+=r}else d+=r}var S=s(i),I=S.horizontalAlign,T=S.verticalAlign;!function(t,e,n,r,i,o,a){for(var s=(y-I)*m,u=(-T*a+.5)*o,l=0;l<t.length;l++)t[l].x+=s,t[l].y+=u}(g,0,0,0,0,r,n.length);var k=n.length*r;t.top+=-T*k,t.bottom=t.top+k,t.left+=-I*m,t.right=t.left+m}(_,e,b?b(y,a(y,f,n,e)):function(t,e){for(var n=[],r=0,i=0,o=e;i<o.length;i+=1){var a=o[i];n.push(t.substring(r,a)),r=a}return r<t.length&&n.push(t.substring(r,t.length)),n}(y,a(y,f,n,e)),r,i,o,g,f,m),!!v.length&&_},shapeIcon:function(t,e,n){var r=s(n),i=e[0]-t.displaySize[0]*r.horizontalAlign,o=e[1]-t.displaySize[1]*r.verticalAlign;return{image:t,top:o,bottom:o+t.displaySize[1],left:i,right:i+t.displaySize[0]}},WritingMode:p};var f={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},d={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0}},{"../source/rtl_text_plugin":109,"../util/script_detection":269,"../util/verticalize_punctuation":277}],227:[function(t,e,n){"use strict";function r(t,e,n,r,c,h){var p=h.layoutTextSize.evaluate(e),d=h.layoutIconSize.evaluate(e),m=h.textMaxSize.evaluate(e);void 0===m&&(m=p);var _=t.layers[0].layout,C=_.get("text-offset").evaluate(e),S=_.get("icon-offset").evaluate(e),I=t.tilePixelRatio*(p/24),T=t.tilePixelRatio*m/24,k=t.tilePixelRatio*d,O=t.tilePixelRatio*_.get("symbol-spacing"),P=_.get("text-padding")*t.tilePixelRatio,A=_.get("icon-padding")*t.tilePixelRatio,M=_.get("text-max-angle")/180*Math.PI,R="map"===_.get("text-rotation-alignment")&&"line"===_.get("symbol-placement"),L="map"===_.get("icon-rotation-alignment")&&"line"===_.get("symbol-placement"),N=O/2,D=function(o,a){a.x<0||a.x>=w||a.y<0||a.y>=w||t.symbolInstances.push(function(t,e,n,r,o,a,s,u,c,h,p,d,m,_,b,x,w,C,S,I,T,k){var O,P,A=t.addToLineVertexArray(e,n),M=0,R=0,L=0,N=r.horizontal?r.horizontal.text:"",D=[];r.horizontal&&(O=new y(s,n,e,u,c,h,r.horizontal,p,d,m,t.overscaling),R+=i(t,e,r.horizontal,a,m,S,I,_,A,r.vertical?f.horizontal:f.horizontalOnly,D,T,k),r.vertical&&(L+=i(t,e,r.vertical,a,m,S,I,_,A,f.vertical,D,T,k)));var F=O?O.boxStartIndex:t.collisionBoxArray.length,z=O?O.boxEndIndex:t.collisionBoxArray.length;if(o){var j=g(e,o,a,w,r.horizontal,S,I);P=new y(s,n,e,u,c,h,o,b,x,!1,t.overscaling),M=4*j.length;var B=t.iconSizeData,V=null;"source"===B.functionType?V=[10*a.layout.get("icon-size").evaluate(I)]:"composite"===B.functionType&&(V=[10*k.compositeIconSizes[0].evaluate(I),10*k.compositeIconSizes[1].evaluate(I)]),t.addSymbols(t.icon,j,V,C,w,I,!1,e,A.lineStartIndex,A.lineLength)}var q=P?P.boxStartIndex:t.collisionBoxArray.length,U=P?P.boxEndIndex:t.collisionBoxArray.length;return t.glyphOffsetArray.length>=E.MAX_GLYPHS&&v.warnOnce("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),{key:N,textBoxStartIndex:F,textBoxEndIndex:z,iconBoxStartIndex:q,iconBoxEndIndex:U,textOffset:_,iconOffset:C,anchor:e,line:n,featureIndex:u,feature:I,numGlyphVertices:R,numVerticalGlyphVertices:L,numIconVertices:M,textOpacityState:new l,iconOpacityState:new l,isDuplicate:!1,placedTextSymbolIndices:D,crossTileID:0}}(t,a,o,n,r,t.layers[0],t.collisionBoxArray,e.index,e.sourceLayerIndex,t.index,I,P,R,C,k,A,L,S,{zoom:t.zoom},e,c,h))};if("line"===_.get("symbol-placement"))for(var F=0,z=u(e.geometry,0,0,w,w);F<z.length;F+=1)for(var j=z[F],B=0,V=s(j,O,M,n.vertical||n.horizontal,r,24,T,t.overscaling,w);B<V.length;B+=1){var q=V[B],U=n.horizontal;U&&o(t,U.text,N,q)||D(j,q)}else if("Polygon"===e.type)for(var G=0,X=x(e.geometry,0);G<X.length;G+=1){var H=X[G],Y=b(H,16);D(H[0],new a(Y.x,Y.y,0))}else if("LineString"===e.type)for(var Z=0,W=e.geometry;Z<W.length;Z+=1){var K=W[Z];D(K,new a(K[0].x,K[0].y,0))}else if("Point"===e.type)for(var J=0,Q=e.geometry;J<Q.length;J+=1)for(var $=0,tt=Q[J];$<tt.length;$+=1){var et=tt[$];D([et],new a(et.x,et.y,0))}}function i(t,e,n,r,i,o,a,s,u,l,c,h,p){var f=m(e,n,r,i,o,a,h),d=t.textSizeData,g=null;return"source"===d.functionType?g=[10*r.layout.get("text-size").evaluate(a)]:"composite"===d.functionType&&(g=[10*p.compositeTextSizes[0].evaluate(a),10*p.compositeTextSizes[1].evaluate(a)]),t.addSymbols(t.text,f,g,s,i,a,l,e,u.lineStartIndex,u.lineLength),c.push(t.text.placedSymbolArray.length-1),4*f.length}function o(t,e,n,r){var i=t.compareText;if(e in i){for(var o=i[e],a=o.length-1;a>=0;a--)if(r.dist(o[a])<n)return!0}else i[e]=[];return i[e].push(r),!1}var a=t("./anchor"),s=t("./get_anchors"),u=t("./clip_line"),l=t("./opacity_state"),c=t("./shaping"),h=c.shapeText,p=c.shapeIcon,f=c.WritingMode,d=t("./quads"),m=d.getGlyphQuads,g=d.getIconQuads,y=t("./collision_feature"),v=t("../util/util"),_=t("../util/script_detection"),b=t("../util/find_pole_of_inaccessibility"),x=t("../util/classify_rings"),w=t("../data/extent"),E=t("../data/bucket/symbol_bucket"),C=t("../style/evaluation_parameters");t("@mapbox/point-geometry"),e.exports={performSymbolLayout:function(t,e,n,i,o,a){t.createArrays(),t.symbolInstances=[],t.tilePixelRatio=w/(512*t.overscaling),t.compareText={},t.iconsNeedLinear=!1;var s=t.layers[0].layout,u=t.layers[0]._unevaluatedLayout._values,l={};if("composite"===t.textSizeData.functionType){var c=t.textSizeData.zoomRange,d=c.max;l.compositeTextSizes=[u["text-size"].possiblyEvaluate(new C(c.min)),u["text-size"].possiblyEvaluate(new C(d))]}if("composite"===t.iconSizeData.functionType){var m=t.iconSizeData.zoomRange,g=m.max;l.compositeIconSizes=[u["icon-size"].possiblyEvaluate(new C(m.min)),u["icon-size"].possiblyEvaluate(new C(g))]}l.layoutTextSize=u["text-size"].possiblyEvaluate(new C(t.zoom+1)),l.layoutIconSize=u["icon-size"].possiblyEvaluate(new C(t.zoom+1)),l.textMaxSize=u["text-size"].possiblyEvaluate(new C(18));for(var y=24*s.get("text-line-height"),b="map"===s.get("text-rotation-alignment")&&"line"===s.get("symbol-placement"),x=s.get("text-keep-upright"),E=0,S=t.features;E<S.length;E+=1){var I=S[E],T=s.get("text-font").evaluate(I).join(","),k=e[T]||{},O=n[T]||{},P={},A=I.text;if(A){var M=_.allowsVerticalWritingMode(A),R=s.get("text-offset").evaluate(I).map(function(t){return 24*t}),L=24*s.get("text-letter-spacing").evaluate(I),N=_.allowsLetterSpacing(A)?L:0,D=s.get("text-anchor").evaluate(I),F=s.get("text-justify").evaluate(I),z="line"!==s.get("symbol-placement")?24*s.get("text-max-width").evaluate(I):0;P.horizontal=h(A,k,z,y,D,F,N,R,24,f.horizontal),M&&b&&x&&(P.vertical=h(A,k,z,y,D,F,N,R,24,f.vertical))}var j=void 0;if(I.icon){var B=i[I.icon];B&&(j=p(o[I.icon],s.get("icon-offset").evaluate(I),s.get("icon-anchor").evaluate(I)),void 0===t.sdfIcons?t.sdfIcons=B.sdf:t.sdfIcons!==B.sdf&&v.warnOnce("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),B.pixelRatio!==t.pixelRatio?t.iconsNeedLinear=!0:0!==s.get("icon-rotate").constantOr(1)&&(t.iconsNeedLinear=!0))}(P.horizontal||j)&&r(t,I,P,j,O,l)}a&&t.generateCollisionDebugBuffers()}}},{"../data/bucket/symbol_bucket":51,"../data/extent":53,"../style/evaluation_parameters":182,"../util/classify_rings":255,"../util/find_pole_of_inaccessibility":261,"../util/script_detection":269,"../util/util":275,"./anchor":213,"./clip_line":215,"./collision_feature":216,"./get_anchors":219,"./opacity_state":222,"./quads":225,"./shaping":226,"@mapbox/point-geometry":4}],228:[function(t,e,n){"use strict";var r=t("../style-spec/expression").normalizePropertyExpression,i=t("../style-spec/util/interpolate"),o=t("../util/util");e.exports={getSizeData:function(t,e){var n=e.expression;if("constant"===n.kind)return{functionType:"constant",layoutSize:n.evaluate({zoom:t+1})};if("source"===n.kind)return{functionType:"source"};for(var r=n.zoomStops,i=0;i<r.length&&r[i]<=t;)i++;for(var o=i=Math.max(0,i-1);o<r.length&&r[o]<t+1;)o++;o=Math.min(r.length-1,o);var a={min:r[i],max:r[o]};return"composite"===n.kind?{functionType:"composite",zoomRange:a,propertyValue:e.value}:{functionType:"camera",layoutSize:n.evaluate({zoom:t+1}),zoomRange:a,sizeRange:{min:n.evaluate({zoom:a.min}),max:n.evaluate({zoom:a.max})},propertyValue:e.value}},evaluateSizeForFeature:function(t,e,n){var r=e;return"source"===t.functionType?n.lowerSize/10:"composite"===t.functionType?i.number(n.lowerSize/10,n.upperSize/10,r.uSizeT):r.uSize},evaluateSizeForZoom:function(t,e,n){if("constant"===t.functionType)return{uSizeT:0,uSize:t.layoutSize};if("source"===t.functionType)return{uSizeT:0,uSize:0};if("camera"===t.functionType){var i=t.zoomRange,a=t.sizeRange,s=r(t.propertyValue,n.specification),u=o.clamp(s.interpolationFactor(e,i.min,i.max),0,1);return{uSizeT:0,uSize:a.min+u*(a.max-a.min)}}var l=t.zoomRange,c=r(t.propertyValue,n.specification);return{uSizeT:o.clamp(c.interpolationFactor(e,l.min,l.max),0,1),uSize:0}}}},{"../style-spec/expression":139,"../style-spec/util/interpolate":158,"../util/util":275}],229:[function(t,e,n){"use strict";var r=t("../source/rtl_text_plugin");e.exports=function(t,e,n){var i=e.layout.get("text-transform").evaluate(n);return"uppercase"===i?t=t.toLocaleUpperCase():"lowercase"===i&&(t=t.toLocaleLowerCase()),r.applyArabicShaping&&(t=r.applyArabicShaping(t)),t}},{"../source/rtl_text_plugin":109}],230:[function(t,e,n){"use strict";var r=t("../util/dom"),i=t("@mapbox/point-geometry"),o={scrollZoom:t("./handler/scroll_zoom"),boxZoom:t("./handler/box_zoom"),dragRotate:t("./handler/drag_rotate"),dragPan:t("./handler/drag_pan"),keyboard:t("./handler/keyboard"),doubleClickZoom:t("./handler/dblclick_zoom"),touchZoomRotate:t("./handler/touch_zoom_rotate")};e.exports=function(t,e){function n(){p=null}function a(e,n){var i=r.mousePos(u,n);return t.fire(e,{lngLat:t.unproject(i),point:i,originalEvent:n})}function s(e,n){var o=r.touchPos(u,n),a=o.reduce(function(t,e,n,r){return t.add(e.div(r.length))},new i(0,0));return t.fire(e,{lngLat:t.unproject(a),point:a,lngLats:o.map(function(e){return t.unproject(e)},this),points:o,originalEvent:n})}var u=t.getCanvasContainer(),l=null,c=!1,h=null,p=null;for(var f in o)t[f]=new o[f](t,e),e.interactive&&e[f]&&t[f].enable(e[f]);u.addEventListener("mouseout",function(t){a("mouseout",t)},!1),u.addEventListener("mousedown",function(e){t.doubleClickZoom.isActive()||t.stop(),h=r.mousePos(u,e),a("mousedown",e),c=!0},!1),u.addEventListener("mouseup",function(e){var n=t.dragRotate&&t.dragRotate.isActive();l&&!n&&a("contextmenu",l),l=null,c=!1,a("mouseup",e)},!1),u.addEventListener("mousemove",function(e){if(!(t.dragPan&&t.dragPan.isActive()||t.dragRotate&&t.dragRotate.isActive())){for(var n=e.toElement||e.target;n&&n!==u;)n=n.parentNode;n===u&&a("mousemove",e)}},!1),u.addEventListener("mouseover",function(t){for(var e=t.toElement||t.target;e&&e!==u;)e=e.parentNode;e===u&&a("mouseover",t)},!1),u.addEventListener("touchstart",function(e){t.stop(),s("touchstart",e),!e.touches||e.touches.length>1||(p?(clearTimeout(p),p=null,a("dblclick",e)):p=setTimeout(n,300))},!1),u.addEventListener("touchend",function(t){s("touchend",t)},!1),u.addEventListener("touchmove",function(t){s("touchmove",t)},!1),u.addEventListener("touchcancel",function(t){s("touchcancel",t)},!1),u.addEventListener("click",function(t){r.mousePos(u,t).equals(h)&&a("click",t)},!1),u.addEventListener("dblclick",function(t){a("dblclick",t),t.preventDefault()},!1),u.addEventListener("contextmenu",function(e){var n=t.dragRotate&&t.dragRotate.isActive();c||n?c&&(l=e):a("contextmenu",e),e.preventDefault()},!1)}},{"../util/dom":259,"./handler/box_zoom":239,"./handler/dblclick_zoom":240,"./handler/drag_pan":241,"./handler/drag_rotate":242,"./handler/keyboard":243,"./handler/scroll_zoom":244,"./handler/touch_zoom_rotate":245,"@mapbox/point-geometry":4}],231:[function(t,e,n){"use strict";var r=t("../util/util"),i=t("../style-spec/util/interpolate").number,o=t("../util/browser"),a=t("../geo/lng_lat"),s=t("../geo/lng_lat_bounds"),u=t("@mapbox/point-geometry"),l=function(t){function e(e,n){t.call(this),this.moving=!1,this.transform=e,this._bearingSnap=n.bearingSnap}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getCenter=function(){return this.transform.center},e.prototype.setCenter=function(t,e){return this.jumpTo({center:t},e)},e.prototype.panBy=function(t,e,n){return t=u.convert(t).mult(-1),this.panTo(this.transform.center,r.extend({offset:t},e),n)},e.prototype.panTo=function(t,e,n){return this.easeTo(r.extend({center:t},e),n)},e.prototype.getZoom=function(){return this.transform.zoom},e.prototype.setZoom=function(t,e){return this.jumpTo({zoom:t},e),this},e.prototype.zoomTo=function(t,e,n){return this.easeTo(r.extend({zoom:t},e),n)},e.prototype.zoomIn=function(t,e){return this.zoomTo(this.getZoom()+1,t,e),this},e.prototype.zoomOut=function(t,e){return this.zoomTo(this.getZoom()-1,t,e),this},e.prototype.getBearing=function(){return this.transform.bearing},e.prototype.setBearing=function(t,e){return this.jumpTo({bearing:t},e),this},e.prototype.rotateTo=function(t,e,n){return this.easeTo(r.extend({bearing:t},e),n)},e.prototype.resetNorth=function(t,e){return this.rotateTo(0,r.extend({duration:1e3},t),e),this},e.prototype.snapToNorth=function(t,e){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,e):this},e.prototype.getPitch=function(){return this.transform.pitch},e.prototype.setPitch=function(t,e){return this.jumpTo({pitch:t},e),this},e.prototype.fitBounds=function(t,e,n){if("number"==typeof(e=r.extend({padding:{top:0,bottom:0,right:0,left:0},offset:[0,0],maxZoom:this.transform.maxZoom},e)).padding){var i=e.padding;e.padding={top:i,bottom:i,right:i,left:i}}if(!r.deepEqual(Object.keys(e.padding).sort(function(t,e){return t<e?-1:t>e?1:0}),["bottom","left","right","top"]))return r.warnOnce("options.padding must be a positive number, or an Object with keys 'bottom', 'left', 'right', 'top'"),this;t=s.convert(t);var o=[(e.padding.left-e.padding.right)/2,(e.padding.top-e.padding.bottom)/2],a=Math.min(e.padding.right,e.padding.left),l=Math.min(e.padding.top,e.padding.bottom);e.offset=[e.offset[0]+o[0],e.offset[1]+o[1]];var c=u.convert(e.offset),h=this.transform,p=h.project(t.getNorthWest()),f=h.project(t.getSouthEast()),d=f.sub(p),m=(h.width-2*a-2*Math.abs(c.x))/d.x,g=(h.height-2*l-2*Math.abs(c.y))/d.y;return g<0||m<0?(r.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset."),this):(e.center=h.unproject(p.add(f).div(2)),e.zoom=Math.min(h.scaleZoom(h.scale*Math.min(m,g)),e.maxZoom),e.bearing=0,e.linear?this.easeTo(e,n):this.flyTo(e,n))},e.prototype.jumpTo=function(t,e){this.stop();var n=this.transform,r=!1,i=!1,o=!1;return"zoom"in t&&n.zoom!==+t.zoom&&(r=!0,n.zoom=+t.zoom),void 0!==t.center&&(n.center=a.convert(t.center)),"bearing"in t&&n.bearing!==+t.bearing&&(i=!0,n.bearing=+t.bearing),"pitch"in t&&n.pitch!==+t.pitch&&(o=!0,n.pitch=+t.pitch),this.fire("movestart",e).fire("move",e),r&&this.fire("zoomstart",e).fire("zoom",e).fire("zoomend",e),i&&this.fire("rotate",e),o&&this.fire("pitchstart",e).fire("pitch",e).fire("pitchend",e),this.fire("moveend",e)},e.prototype.easeTo=function(t,e){var n=this;this.stop(),!1===(t=r.extend({offset:[0,0],duration:500,easing:r.ease},t)).animate&&(t.duration=0);var o=this.transform,s=this.getZoom(),l=this.getBearing(),c=this.getPitch(),h="zoom"in t?+t.zoom:s,p="bearing"in t?this._normalizeBearing(t.bearing,l):l,f="pitch"in t?+t.pitch:c,d=o.centerPoint.add(u.convert(t.offset)),m=o.pointLocation(d),g=a.convert(t.center||m);this._normalizeCenter(g);var y,v,_=o.project(m),b=o.project(g).sub(_),x=o.zoomScale(h-s);return t.around&&(y=a.convert(t.around),v=o.locationPoint(y)),this.zooming=h!==s,this.rotating=l!==p,this.pitching=f!==c,this._prepareEase(e,t.noMoveStart),clearTimeout(this._onEaseEnd),this._ease(function(t){if(n.zooming&&(o.zoom=i(s,h,t)),n.rotating&&(o.bearing=i(l,p,t)),n.pitching&&(o.pitch=i(c,f,t)),y)o.setLocationAtPoint(y,v);else{var r=o.zoomScale(o.zoom-s),a=h>s?Math.min(2,x):Math.max(.5,x),u=Math.pow(a,1-t),m=o.unproject(_.add(b.mult(t*u)).mult(r));o.setLocationAtPoint(o.renderWorldCopies?m.wrap():m,d)}n._fireMoveEvents(e)},function(){t.delayEndEvents?n._onEaseEnd=setTimeout(function(){return n._afterEase(e)},t.delayEndEvents):n._afterEase(e)},t),this},e.prototype._prepareEase=function(t,e){this.moving=!0,e||this.fire("movestart",t),this.zooming&&this.fire("zoomstart",t),this.pitching&&this.fire("pitchstart",t)},e.prototype._fireMoveEvents=function(t){this.fire("move",t),this.zooming&&this.fire("zoom",t),this.rotating&&this.fire("rotate",t),this.pitching&&this.fire("pitch",t)},e.prototype._afterEase=function(t){var e=this.zooming,n=this.pitching;this.moving=!1,this.zooming=!1,this.rotating=!1,this.pitching=!1,e&&this.fire("zoomend",t),n&&this.fire("pitchend",t),this.fire("moveend",t)},e.prototype.flyTo=function(t,e){function n(t){var e=(S*S-C*C+(t?-1:1)*O*O*I*I)/(2*(t?S:C)*O*I);return Math.log(Math.sqrt(e*e+1)-e)}function o(t){return(Math.exp(t)-Math.exp(-t))/2}function s(t){return(Math.exp(t)+Math.exp(-t))/2}var l=this;this.stop(),t=r.extend({offset:[0,0],speed:1.2,curve:1.42,easing:r.ease},t);var c=this.transform,h=this.getZoom(),p=this.getBearing(),f=this.getPitch(),d="zoom"in t?r.clamp(+t.zoom,c.minZoom,c.maxZoom):h,m="bearing"in t?this._normalizeBearing(t.bearing,p):p,g="pitch"in t?+t.pitch:f,y=c.zoomScale(d-h),v=c.centerPoint.add(u.convert(t.offset)),_=c.pointLocation(v),b=a.convert(t.center||_);this._normalizeCenter(b);var x=c.project(_),w=c.project(b).sub(x),E=t.curve,C=Math.max(c.width,c.height),S=C/y,I=w.mag();if("minZoom"in t){var T=r.clamp(Math.min(t.minZoom,h,d),c.minZoom,c.maxZoom),k=C/c.zoomScale(T-h);E=Math.sqrt(k/I*2)}var O=E*E,P=n(0),A=function(t){return s(P)/s(P+E*t)},M=function(t){return C*((s(P)*function(t){return o(t)/s(t)}(P+E*t)-o(P))/O)/I},R=(n(1)-P)/E;if(Math.abs(I)<1e-6||!isFinite(R)){if(Math.abs(C-S)<1e-6)return this.easeTo(t,e);var L=S<C?-1:1;R=Math.abs(Math.log(S/C))/E,M=function(){return 0},A=function(t){return Math.exp(L*E*t)}}return t.duration="duration"in t?+t.duration:1e3*R/("screenSpeed"in t?+t.screenSpeed/E:+t.speed),t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0),this.zooming=!0,this.rotating=p!==m,this.pitching=g!==f,this._prepareEase(e,!1),this._ease(function(t){var n=t*R,r=1/A(n);c.zoom=h+c.scaleZoom(r),l.rotating&&(c.bearing=i(p,m,t)),l.pitching&&(c.pitch=i(f,g,t));var o=c.unproject(x.add(w.mult(M(n))).mult(r));c.setLocationAtPoint(c.renderWorldCopies?o.wrap():o,v),l._fireMoveEvents(e)},function(){return l._afterEase(e)},t),this},e.prototype.isEasing=function(){return!!this._isEasing},e.prototype.isMoving=function(){return this.moving},e.prototype.stop=function(){return this._onFrame&&this._finishAnimation(),this},e.prototype._ease=function(t,e,n){var r=this;!1===n.animate||0===n.duration?(t(1),e()):(this._easeStart=o.now(),this._isEasing=!0,this._easeOptions=n,this._startAnimation(function(e){var n=Math.min((o.now()-r._easeStart)/r._easeOptions.duration,1);t(r._easeOptions.easing(n)),1===n&&r.stop()},function(){r._isEasing=!1,e()}))},e.prototype._updateCamera=function(){this._onFrame&&this._onFrame(this.transform)},e.prototype._startAnimation=function(t,e){return void 0===e&&(e=function(){}),this.stop(),this._onFrame=t,this._finishFn=e,this._update(),this},e.prototype._finishAnimation=function(){delete this._onFrame;var t=this._finishFn;delete this._finishFn,t.call(this)},e.prototype._normalizeBearing=function(t,e){t=r.wrap(t,-180,180);var n=Math.abs(t-e);return Math.abs(t-360-e)<n&&(t-=360),Math.abs(t+360-e)<n&&(t+=360),t},e.prototype._normalizeCenter=function(t){var e=this.transform;if(e.renderWorldCopies&&!e.lngRange){var n=t.lng-e.center.lng;t.lng+=n>180?-360:n<-180?360:0}},e}(t("../util/evented"));e.exports=l},{"../geo/lng_lat":62,"../geo/lng_lat_bounds":63,"../style-spec/util/interpolate":158,"../util/browser":252,"../util/evented":260,"../util/util":275,"@mapbox/point-geometry":4}],232:[function(t,e,n){"use strict";var r=t("../../util/dom"),i=t("../../util/util"),o=t("../../util/config"),a=function(t){this.options=t,i.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};a.prototype.getDefaultPosition=function(){return"bottom-right"},a.prototype.onAdd=function(t){var e=this.options&&this.options.compact;return this._map=t,this._container=r.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),e&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===e&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},a.prototype.onRemove=function(){r.remove(this._container),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0},a.prototype._updateEditLink=function(){var t=this._editLink;t||(t=this._editLink=this._container.querySelector(".mapbox-improve-map"));var e=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:o.ACCESS_TOKEN}];if(t){var n=e.reduce(function(t,n,r){return n.value&&(t+=n.key+"="+n.value+(r<e.length-1?"&":"")),t},"?");t.href="https://www.mapbox.com/feedback/"+n+(this._map._hash?this._map._hash.getHashString(!0):"")}},a.prototype._updateData=function(t){t&&"metadata"===t.sourceDataType&&(this._updateAttributions(),this._updateEditLink())},a.prototype._updateAttributions=function(){if(this._map.style){var t=[];if(this._map.style.stylesheet){var e=this._map.style.stylesheet;this.styleOwner=e.owner,this.styleId=e.id}var n=this._map.style.sourceCaches;for(var r in n){var i=n[r].getSource();i.attribution&&t.indexOf(i.attribution)<0&&t.push(i.attribution)}t.sort(function(t,e){return t.length-e.length}),(t=t.filter(function(e,n){for(var r=n+1;r<t.length;r++)if(t[r].indexOf(e)>=0)return!1;return!0})).length?(this._container.innerHTML=t.join(" | "),this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null}},a.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")},e.exports=a},{"../../util/config":256,"../../util/dom":259,"../../util/util":275}],233:[function(t,e,n){"use strict";var r=t("../../util/dom"),i=t("../../util/util"),o=t("../../util/window"),a=function(){this._fullscreen=!1,i.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in o.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in o.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in o.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in o.document&&(this._fullscreenchange="MSFullscreenChange"),this._className="mapboxgl-ctrl"};a.prototype.onAdd=function(t){return this._map=t,this._mapContainer=this._map.getContainer(),this._container=r.create("div",this._className+" mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._container.style.display="none",i.warnOnce("This device does not support fullscreen mode.")),this._container},a.prototype.onRemove=function(){r.remove(this._container),this._map=null,o.document.removeEventListener(this._fullscreenchange,this._changeIcon)},a.prototype._checkFullscreenSupport=function(){return!!(o.document.fullscreenEnabled||o.document.mozFullScreenEnabled||o.document.msFullscreenEnabled||o.document.webkitFullscreenEnabled)},a.prototype._setupUI=function(){var t=this._fullscreenButton=r.create("button",this._className+"-icon "+this._className+"-fullscreen",this._container);t.setAttribute("aria-label","Toggle fullscreen"),t.type="button",this._fullscreenButton.addEventListener("click",this._onClickFullscreen),o.document.addEventListener(this._fullscreenchange,this._changeIcon)},a.prototype._isFullscreen=function(){return this._fullscreen},a.prototype._changeIcon=function(){(o.document.fullscreenElement||o.document.mozFullScreenElement||o.document.webkitFullscreenElement||o.document.msFullscreenElement)===this._mapContainer!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle(this._className+"-shrink"),this._fullscreenButton.classList.toggle(this._className+"-fullscreen"))},a.prototype._onClickFullscreen=function(){this._isFullscreen()?o.document.exitFullscreen?o.document.exitFullscreen():o.document.mozCancelFullScreen?o.document.mozCancelFullScreen():o.document.msExitFullscreen?o.document.msExitFullscreen():o.document.webkitCancelFullScreen&&o.document.webkitCancelFullScreen():this._mapContainer.requestFullscreen?this._mapContainer.requestFullscreen():this._mapContainer.mozRequestFullScreen?this._mapContainer.mozRequestFullScreen():this._mapContainer.msRequestFullscreen?this._mapContainer.msRequestFullscreen():this._mapContainer.webkitRequestFullscreen&&this._mapContainer.webkitRequestFullscreen()},e.exports=a},{"../../util/dom":259,"../../util/util":275,"../../util/window":254}],234:[function(t,e,n){"use strict";var r,i=t("../../util/evented"),o=t("../../util/dom"),a=t("../../util/window"),s=t("../../util/util"),u=t("../../geo/lng_lat"),l=t("../marker"),c={positionOptions:{enableHighAccuracy:!1,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showUserLocation:!0},h=function(t){function e(e){t.call(this),this.options=s.extend({},c,e),s.bindAll(["_onSuccess","_onError","_finish","_setupUI","_updateCamera","_updateMarker","_onClickGeolocate"],this)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.onAdd=function(t){return this._map=t,this._container=o.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),function(t){void 0!==r?t(r):void 0!==a.navigator.permissions?a.navigator.permissions.query({name:"geolocation"}).then(function(e){t(r="denied"!==e.state)}):t(r=!!a.navigator.geolocation)}(this._setupUI),this._container},e.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(a.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker.remove(),o.remove(this._container),this._map=void 0},e.prototype._onSuccess=function(t){if(this.options.trackUserLocation)switch(this._lastKnownPosition=t,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(t),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(t),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire("geolocate",t),this._finish()},e.prototype._updateCamera=function(t){var e=new u(t.coords.longitude,t.coords.latitude);this._map.fitBounds(e.toBounds(t.coords.accuracy),this.options.fitBoundsOptions,{geolocateSource:!0})},e.prototype._updateMarker=function(t){t?this._userLocationDotMarker.setLngLat([t.coords.longitude,t.coords.latitude]).addTo(this._map):this._userLocationDotMarker.remove()},e.prototype._onError=function(t){if(this.options.trackUserLocation)if(1===t.code)this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),void 0!==this._geolocationWatchID&&this._clearWatch();else switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire("error",t),this._finish()},e.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},e.prototype._setupUI=function(t){var e=this;!1!==t&&(this._container.addEventListener("contextmenu",function(t){return t.preventDefault()}),this._geolocateButton=o.create("button","mapboxgl-ctrl-icon mapboxgl-ctrl-geolocate",this._container),this._geolocateButton.type="button",this._geolocateButton.setAttribute("aria-label","Geolocate"),this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=o.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new l(this._dotElement),this.options.trackUserLocation&&(this._watchState="OFF")),this._geolocateButton.addEventListener("click",this._onClickGeolocate.bind(this)),this.options.trackUserLocation&&this._map.on("movestart",function(t){t.geolocateSource||"ACTIVE_LOCK"!==e._watchState||(e._watchState="BACKGROUND",e._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),e._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),e.fire("trackuserlocationend"))}))},e.prototype._onClickGeolocate=function(){if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire("trackuserlocationstart");break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire("trackuserlocationend");break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire("trackuserlocationstart")}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}"OFF"===this._watchState&&void 0!==this._geolocationWatchID?this._clearWatch():void 0===this._geolocationWatchID&&(this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._geolocationWatchID=a.navigator.geolocation.watchPosition(this._onSuccess,this._onError,this.options.positionOptions))}else a.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4)},e.prototype._clearWatch=function(){a.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},e}(i);e.exports=h},{"../../geo/lng_lat":62,"../../util/dom":259,"../../util/evented":260,"../../util/util":275,"../../util/window":254,"../marker":248}],235:[function(t,e,n){"use strict";var r=t("../../util/dom"),i=t("../../util/util"),o=function(){i.bindAll(["_updateLogo"],this)};o.prototype.onAdd=function(t){this._map=t,this._container=r.create("div","mapboxgl-ctrl");var e=r.create("a","mapboxgl-ctrl-logo");return e.target="_blank",e.href="https://www.mapbox.com/",e.setAttribute("aria-label","Mapbox logo"),this._container.appendChild(e),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._container},o.prototype.onRemove=function(){r.remove(this._container),this._map.off("sourcedata",this._updateLogo)},o.prototype.getDefaultPosition=function(){return"bottom-left"},o.prototype._updateLogo=function(t){t&&"metadata"!==t.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},o.prototype._logoRequired=function(){if(this._map.style){var t=this._map.style.sourceCaches;for(var e in t)if(t[e].getSource().mapbox_logo)return!0;return!1}},e.exports=o},{"../../util/dom":259,"../../util/util":275}],236:[function(t,e,n){"use strict";var r=t("../../util/dom"),i=t("../../util/util"),o=t("../handler/drag_rotate"),a={showCompass:!0,showZoom:!0},s=function(t){var e=this;this.options=i.extend({},a,t),this._container=r.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(t){return t.preventDefault()}),this.options.showZoom&&(this._zoomInButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-in","Zoom In",function(){return e._map.zoomIn()}),this._zoomOutButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-out","Zoom Out",function(){return e._map.zoomOut()})),this.options.showCompass&&(i.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-compass","Reset North",function(){return e._map.resetNorth()}),this._compassArrow=r.create("span","mapboxgl-ctrl-compass-arrow",this._compass))};s.prototype._rotateCompassArrow=function(){var t="rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassArrow.style.transform=t},s.prototype.onAdd=function(t){return this._map=t,this.options.showCompass&&(this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new o(t,{button:"left",element:this._compass}),this._handler.enable()),this._container},s.prototype.onRemove=function(){r.remove(this._container),this.options.showCompass&&(this._map.off("rotate",this._rotateCompassArrow),this._handler.disable(),delete this._handler),delete this._map},s.prototype._createButton=function(t,e,n){var i=r.create("button",t,this._container);return i.type="button",i.setAttribute("aria-label",e),i.addEventListener("click",n),i},e.exports=s},{"../../util/dom":259,"../../util/util":275,"../handler/drag_rotate":242}],237:[function(t,e,n){"use strict";function r(t,e,n,r){var i=function(t){var e=Math.pow(10,(""+Math.floor(t)).length-1),n=t/e;return e*(n>=10?10:n>=5?5:n>=3?3:n>=2?2:1)}(n),o=i/n;"m"===r&&i>=1e3&&(i/=1e3,r="km"),t.style.width=e*o+"px",t.innerHTML=i+r}var i=t("../../util/dom"),o=t("../../util/util"),a=function(t){this.options=t,o.bindAll(["_onMove"],this)};a.prototype.getDefaultPosition=function(){return"bottom-left"},a.prototype._onMove=function(){!function(t,e,n){var i=n&&n.maxWidth||100,o=t._container.clientHeight/2,a=function(t,e){var n=Math.PI/180,r=t.lat*n,i=e.lat*n,o=Math.sin(r)*Math.sin(i)+Math.cos(r)*Math.cos(i)*Math.cos((e.lng-t.lng)*n);return 6371e3*Math.acos(Math.min(o,1))}(t.unproject([0,o]),t.unproject([i,o]));if(n&&"imperial"===n.unit){var s=3.2808*a;s>5280?r(e,i,s/5280,"mi"):r(e,i,s,"ft")}else n&&"nautical"===n.unit?r(e,i,a/1852,"nm"):r(e,i,a,"m")}(this._map,this._container,this.options)},a.prototype.onAdd=function(t){return this._map=t,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",t.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},a.prototype.onRemove=function(){i.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},e.exports=a},{"../../util/dom":259,"../../util/util":275}],238:[function(t,e,n){"use strict"},{}],239:[function(t,e,n){"use strict";var r=t("../../util/dom"),i=t("../../geo/lng_lat_bounds"),o=t("../../util/util"),a=t("../../util/window"),s=function(t){this._map=t,this._el=t.getCanvasContainer(),this._container=t.getContainer(),o.bindAll(["_onMouseDown","_onMouseMove","_onMouseUp","_onKeyDown"],this)};s.prototype.isEnabled=function(){return!!this._enabled},s.prototype.isActive=function(){return!!this._active},s.prototype.enable=function(){this.isEnabled()||(this._map.dragPan&&this._map.dragPan.disable(),this._el.addEventListener("mousedown",this._onMouseDown,!1),this._map.dragPan&&this._map.dragPan.enable(),this._enabled=!0)},s.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("mousedown",this._onMouseDown),this._enabled=!1)},s.prototype._onMouseDown=function(t){t.shiftKey&&0===t.button&&(a.document.addEventListener("mousemove",this._onMouseMove,!1),a.document.addEventListener("keydown",this._onKeyDown,!1),a.document.addEventListener("mouseup",this._onMouseUp,!1),r.disableDrag(),this._startPos=r.mousePos(this._el,t),this._active=!0)},s.prototype._onMouseMove=function(t){var e=this._startPos,n=r.mousePos(this._el,t);this._box||(this._box=r.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",t));var i=Math.min(e.x,n.x),o=Math.max(e.x,n.x),a=Math.min(e.y,n.y),s=Math.max(e.y,n.y);r.setTransform(this._box,"translate("+i+"px,"+a+"px)"),this._box.style.width=o-i+"px",this._box.style.height=s-a+"px"},s.prototype._onMouseUp=function(t){if(0===t.button){var e=this._startPos,n=r.mousePos(this._el,t),o=(new i).extend(this._map.unproject(e)).extend(this._map.unproject(n));this._finish(),e.x===n.x&&e.y===n.y?this._fireEvent("boxzoomcancel",t):this._map.fitBounds(o,{linear:!0}).fire("boxzoomend",{originalEvent:t,boxZoomBounds:o})}},s.prototype._onKeyDown=function(t){27===t.keyCode&&(this._finish(),this._fireEvent("boxzoomcancel",t))},s.prototype._finish=function(){this._active=!1,a.document.removeEventListener("mousemove",this._onMouseMove,!1),a.document.removeEventListener("keydown",this._onKeyDown,!1),a.document.removeEventListener("mouseup",this._onMouseUp,!1),this._container.classList.remove("mapboxgl-crosshair"),this._box&&(r.remove(this._box),this._box=null),r.enableDrag()},s.prototype._fireEvent=function(t,e){return this._map.fire(t,{originalEvent:e})},e.exports=s},{"../../geo/lng_lat_bounds":63,"../../util/dom":259,"../../util/util":275,"../../util/window":254}],240:[function(t,e,n){"use strict";var r=t("../../util/util"),i=function(t){this._map=t,r.bindAll(["_onDblClick","_onZoomEnd"],this)};i.prototype.isEnabled=function(){return!!this._enabled},i.prototype.isActive=function(){return!!this._active},i.prototype.enable=function(){this.isEnabled()||(this._map.on("dblclick",this._onDblClick),this._enabled=!0)},i.prototype.disable=function(){this.isEnabled()&&(this._map.off("dblclick",this._onDblClick),this._enabled=!1)},i.prototype._onDblClick=function(t){this._active=!0,this._map.on("zoomend",this._onZoomEnd),this._map.zoomTo(this._map.getZoom()+(t.originalEvent.shiftKey?-1:1),{around:t.lngLat},t)},i.prototype._onZoomEnd=function(){this._active=!1,this._map.off("zoomend",this._onZoomEnd)},e.exports=i},{"../../util/util":275}],241:[function(t,e,n){"use strict";var r=t("../../util/dom"),i=t("../../util/util"),o=t("../../util/window"),a=t("../../util/browser"),s=i.bezier(0,0,.3,1),u=function(t){this._map=t,this._el=t.getCanvasContainer(),i.bindAll(["_onDown","_onMove","_onUp","_onTouchEnd","_onMouseUp","_onDragFrame","_onDragFinished"],this)};u.prototype.isEnabled=function(){return!!this._enabled},u.prototype.isActive=function(){return!!this._active},u.prototype.enable=function(){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-drag-pan"),this._el.addEventListener("mousedown",this._onDown),this._el.addEventListener("touchstart",this._onDown),this._enabled=!0)},u.prototype.disable=function(){this.isEnabled()&&(this._el.classList.remove("mapboxgl-touch-drag-pan"),this._el.removeEventListener("mousedown",this._onDown),this._el.removeEventListener("touchstart",this._onDown),this._enabled=!1)},u.prototype._onDown=function(t){this._ignoreEvent(t)||this.isActive()||(t.touches?(o.document.addEventListener("touchmove",this._onMove),o.document.addEventListener("touchend",this._onTouchEnd)):(o.document.addEventListener("mousemove",this._onMove),o.document.addEventListener("mouseup",this._onMouseUp)),o.addEventListener("blur",this._onMouseUp),this._active=!1,this._previousPos=r.mousePos(this._el,t),this._inertia=[[a.now(),this._previousPos]])},u.prototype._onMove=function(t){if(!this._ignoreEvent(t)){this._lastMoveEvent=t,t.preventDefault();var e=r.mousePos(this._el,t);if(this._drainInertiaBuffer(),this._inertia.push([a.now(),e]),!this._previousPos)return void(this._previousPos=e);this._pos=e,this.isActive()||(this._active=!0,this._map.moving=!0,this._fireEvent("dragstart",t),this._fireEvent("movestart",t),this._map._startAnimation(this._onDragFrame,this._onDragFinished)),this._map._update()}},u.prototype._onDragFrame=function(t){var e=this._lastMoveEvent;e&&(t.setLocationAtPoint(t.pointLocation(this._previousPos),this._pos),this._fireEvent("drag",e),this._fireEvent("move",e),this._previousPos=this._pos,delete this._lastMoveEvent)},u.prototype._onDragFinished=function(t){var e=this;if(this.isActive()){this._active=!1,delete this._lastMoveEvent,delete this._previousPos,delete this._pos,this._fireEvent("dragend",t),this._drainInertiaBuffer();var n=function(){e._map.moving=!1,e._fireEvent("moveend",t)},r=this._inertia;if(r.length<2)return void n();var i=r[r.length-1],o=r[0],a=i[1].sub(o[1]),u=(i[0]-o[0])/1e3;if(0===u||i[1].equals(o[1]))return void n();var l=a.mult(.3/u),c=l.mag();c>1400&&(c=1400,l._unit()._mult(c));var h=c/750,p=l.mult(-h/2);this._map.panBy(p,{duration:1e3*h,easing:s,noMoveStart:!0},{originalEvent:t})}},u.prototype._onUp=function(t){this._onDragFinished(t)},u.prototype._onMouseUp=function(t){this._ignoreEvent(t)||(this._onUp(t),o.document.removeEventListener("mousemove",this._onMove),o.document.removeEventListener("mouseup",this._onMouseUp),o.removeEventListener("blur",this._onMouseUp))},u.prototype._onTouchEnd=function(t){this._ignoreEvent(t)||(this._onUp(t),o.document.removeEventListener("touchmove",this._onMove),o.document.removeEventListener("touchend",this._onTouchEnd))},u.prototype._fireEvent=function(t,e){return this._map.fire(t,e?{originalEvent:e}:{})},u.prototype._ignoreEvent=function(t){var e=this._map;return!(!e.boxZoom||!e.boxZoom.isActive())||!(!e.dragRotate||!e.dragRotate.isActive())||(t.touches?t.touches.length>1:!!t.ctrlKey||"mousemove"!==t.type&&t.button&&0!==t.button)},u.prototype._drainInertiaBuffer=function(){for(var t=this._inertia,e=a.now();t.length>0&&e-t[0][0]>160;)t.shift()},e.exports=u},{"../../util/browser":252,"../../util/dom":259,"../../util/util":275,"../../util/window":254}],242:[function(t,e,n){"use strict";var r=t("../../util/dom"),i=t("../../util/util"),o=t("../../util/window"),a=t("../../util/browser"),s=i.bezier(0,0,.25,1),u=function(t,e){this._map=t,this._el=e.element||t.getCanvasContainer(),this._button=e.button||"right",this._bearingSnap=e.bearingSnap||0,this._pitchWithRotate=!1!==e.pitchWithRotate,i.bindAll(["_onDown","_onMove","_onUp","_onDragFrame","_onDragFinished"],this)};u.prototype.isEnabled=function(){return!!this._enabled},u.prototype.isActive=function(){return!!this._active},u.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener("mousedown",this._onDown),this._enabled=!0)},u.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("mousedown",this._onDown),this._enabled=!1)},u.prototype._onDown=function(t){if(!(this._map.boxZoom&&this._map.boxZoom.isActive()||this._map.dragPan&&this._map.dragPan.isActive()||this.isActive())){if("right"===this._button){var e=t.ctrlKey?0:2,n=t.button;if(void 0!==o.InstallTrigger&&2===t.button&&t.ctrlKey&&o.navigator.platform.toUpperCase().indexOf("MAC")>=0&&(n=0),n!==e)return}else if(t.ctrlKey||0!==t.button)return;r.disableDrag(),o.document.addEventListener("mousemove",this._onMove,{capture:!0}),o.document.addEventListener("mouseup",this._onUp),o.addEventListener("blur",this._onUp),this._active=!1,this._inertia=[[a.now(),this._map.getBearing()]],this._previousPos=r.mousePos(this._el,t),this._center=this._map.transform.centerPoint,t.preventDefault()}},u.prototype._onMove=function(t){this._lastMoveEvent=t;var e=r.mousePos(this._el,t);this._previousPos?(this._pos=e,this.isActive()||(this._active=!0,this._map.moving=!0,this._fireEvent("rotatestart",t),this._fireEvent("movestart",t),this._pitchWithRotate&&this._fireEvent("pitchstart",t),this._map._startAnimation(this._onDragFrame,this._onDragFinished)),this._map._update()):this._previousPos=e},u.prototype._onUp=function(t){o.document.removeEventListener("mousemove",this._onMove,{capture:!0}),o.document.removeEventListener("mouseup",this._onUp),o.removeEventListener("blur",this._onUp),r.enableDrag(),this._onDragFinished(t)},u.prototype._onDragFrame=function(t){var e=this._lastMoveEvent;if(e){var n=this._previousPos,r=this._pos,i=t.bearing-.8*(n.x-r.x),o=t.pitch- -.5*(n.y-r.y),s=this._inertia,u=s[s.length-1];this._drainInertiaBuffer(),s.push([a.now(),this._map._normalizeBearing(i,u[1])]),t.bearing=i,this._pitchWithRotate&&(this._fireEvent("pitch",e),t.pitch=o),this._fireEvent("rotate",e),this._fireEvent("move",e),delete this._lastMoveEvent,this._previousPos=this._pos}},u.prototype._onDragFinished=function(t){var e=this;if(this.isActive()){this._active=!1,delete this._lastMoveEvent,delete this._previousPos,this._fireEvent("rotateend",t),this._drainInertiaBuffer();var n=this._map,r=n.getBearing(),i=this._inertia,o=function(){Math.abs(r)<e._bearingSnap?n.resetNorth({noMoveStart:!0},{originalEvent:t}):(e._map.moving=!1,e._fireEvent("moveend",t)),e._pitchWithRotate&&e._fireEvent("pitchend",t)};if(i.length<2)return void o();var a=i[0],u=i[i.length-1],l=n._normalizeBearing(r,i[i.length-2][1]),c=u[1]-a[1],h=c<0?-1:1,p=(u[0]-a[0])/1e3;if(0===c||0===p)return void o();var f=Math.abs(c*(.25/p));f>180&&(f=180);var d=f/180;l+=h*f*(d/2),Math.abs(n._normalizeBearing(l,0))<this._bearingSnap&&(l=n._normalizeBearing(0,l)),n.rotateTo(l,{duration:1e3*d,easing:s,noMoveStart:!0},{originalEvent:t})}},u.prototype._fireEvent=function(t,e){return this._map.fire(t,e?{originalEvent:e}:{})},u.prototype._drainInertiaBuffer=function(){for(var t=this._inertia,e=a.now();t.length>0&&e-t[0][0]>160;)t.shift()},e.exports=u},{"../../util/browser":252,"../../util/dom":259,"../../util/util":275,"../../util/window":254}],243:[function(t,e,n){"use strict";function r(t){return t*(2-t)}var i=t("../../util/util"),o=function(t){this._map=t,this._el=t.getCanvasContainer(),i.bindAll(["_onKeyDown"],this)};o.prototype.isEnabled=function(){return!!this._enabled},o.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener("keydown",this._onKeyDown,!1),this._enabled=!0)},o.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("keydown",this._onKeyDown),this._enabled=!1)},o.prototype._onKeyDown=function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e=0,n=0,i=0,o=0,a=0;switch(t.keyCode){case 61:case 107:case 171:case 187:e=1;break;case 189:case 109:case 173:e=-1;break;case 37:t.shiftKey?n=-1:(t.preventDefault(),o=-1);break;case 39:t.shiftKey?n=1:(t.preventDefault(),o=1);break;case 38:t.shiftKey?i=1:(t.preventDefault(),a=-1);break;case 40:t.shiftKey?i=-1:(a=1,t.preventDefault());break;default:return}var s=this._map,u=s.getZoom(),l={duration:300,delayEndEvents:500,easing:r,zoom:e?Math.round(u)+e*(t.shiftKey?2:1):u,bearing:s.getBearing()+15*n,pitch:s.getPitch()+10*i,offset:[100*-o,100*-a],center:s.getCenter()};s.easeTo(l,{originalEvent:t})}},e.exports=o},{"../../util/util":275}],244:[function(t,e,n){"use strict";var r=t("../../util/dom"),i=t("../../util/util"),o=t("../../util/browser"),a=t("../../util/window"),s=t("../../style-spec/util/interpolate").number,u=t("../../geo/lng_lat"),l=a.navigator.userAgent.toLowerCase(),c=-1!==l.indexOf("firefox"),h=-1!==l.indexOf("safari")&&-1===l.indexOf("chrom"),p=function(t){this._map=t,this._el=t.getCanvasContainer(),this._delta=0,i.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};p.prototype.isEnabled=function(){return!!this._enabled},p.prototype.isActive=function(){return!!this._active},p.prototype.enable=function(t){this.isEnabled()||(this._el.addEventListener("wheel",this._onWheel,!1),this._el.addEventListener("mousewheel",this._onWheel,!1),this._enabled=!0,this._aroundCenter=t&&"center"===t.around)},p.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("wheel",this._onWheel),this._el.removeEventListener("mousewheel",this._onWheel),this._enabled=!1)},p.prototype._onWheel=function(t){var e=0;"wheel"===t.type?(e=t.deltaY,c&&t.deltaMode===a.WheelEvent.DOM_DELTA_PIXEL&&(e/=o.devicePixelRatio),t.deltaMode===a.WheelEvent.DOM_DELTA_LINE&&(e*=40)):"mousewheel"===t.type&&(e=-t.wheelDeltaY,h&&(e/=3));var n=o.now(),r=n-(this._lastWheelEventTime||0);this._lastWheelEventTime=n,0!==e&&e%4.000244140625==0?this._type="wheel":0!==e&&Math.abs(e)<4?this._type="trackpad":r>400?(this._type=null,this._lastValue=e,this._timeout=setTimeout(this._onTimeout,40,t)):this._type||(this._type=Math.abs(r*e)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,e+=this._lastValue)),t.shiftKey&&e&&(e/=4),this._type&&(this._lastWheelEvent=t,this._delta-=e,this.isActive()||this._start(t)),t.preventDefault()},p.prototype._onTimeout=function(t){this._type="wheel",this._delta-=this._lastValue,this.isActive()||this._start(t)},p.prototype._start=function(t){if(this._delta){this._active=!0,this._map.moving=!0,this._map.zooming=!0,this._map.fire("movestart",{originalEvent:t}),this._map.fire("zoomstart",{originalEvent:t}),clearTimeout(this._finishTimeout);var e=r.mousePos(this._el,t);this._around=u.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(e)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._map._startAnimation(this._onScrollFrame,this._onScrollFinished)}},p.prototype._onScrollFrame=function(t){if(this.isActive()){if(0!==this._delta){var e="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?1/450:.01,n=2/(1+Math.exp(-Math.abs(this._delta*e)));this._delta<0&&0!==n&&(n=1/n);var r="number"==typeof this._targetZoom?t.zoomScale(this._targetZoom):t.scale;this._targetZoom=Math.min(t.maxZoom,Math.max(t.minZoom,t.scaleZoom(r*n))),"wheel"===this._type&&(this._startZoom=t.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}if("wheel"===this._type){var i=Math.min((o.now()-this._lastWheelEventTime)/200,1),a=this._easing(i);t.zoom=s(this._startZoom,this._targetZoom,a),1===i&&this._map.stop()}else t.zoom=this._targetZoom,this._map.stop();t.setLocationAtPoint(this._around,this._aroundPoint),this._map.fire("move",{originalEvent:this._lastWheelEvent}),this._map.fire("zoom",{originalEvent:this._lastWheelEvent})}},p.prototype._onScrollFinished=function(){var t=this;this.isActive()&&(this._active=!1,this._finishTimeout=setTimeout(function(){t._map.moving=!1,t._map.zooming=!1,t._map.fire("zoomend"),t._map.fire("moveend"),delete t._targetZoom},200))},p.prototype._smoothOutEasing=function(t){var e=i.ease;if(this._prevEase){var n=this._prevEase,r=(o.now()-n.start)/n.duration,a=n.easing(r+.01)-n.easing(r),s=.27/Math.sqrt(a*a+1e-4)*.01,u=Math.sqrt(.0729-s*s);e=i.bezier(s,u,.25,1)}return this._prevEase={start:o.now(),duration:t,easing:e},e},e.exports=p},{"../../geo/lng_lat":62,"../../style-spec/util/interpolate":158,"../../util/browser":252,"../../util/dom":259,"../../util/util":275,"../../util/window":254}],245:[function(t,e,n){"use strict";var r=t("../../util/dom"),i=t("../../util/util"),o=t("../../util/window"),a=t("../../util/browser"),s=i.bezier(0,0,.15,1),u=function(t){this._map=t,this._el=t.getCanvasContainer(),i.bindAll(["_onStart","_onMove","_onEnd"],this)};u.prototype.isEnabled=function(){return!!this._enabled},u.prototype.enable=function(t){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-zoom-rotate"),this._el.addEventListener("touchstart",this._onStart,!1),this._enabled=!0,this._aroundCenter=t&&"center"===t.around)},u.prototype.disable=function(){this.isEnabled()&&(this._el.classList.remove("mapboxgl-touch-zoom-rotate"),this._el.removeEventListener("touchstart",this._onStart),this._enabled=!1)},u.prototype.disableRotation=function(){this._rotationDisabled=!0},u.prototype.enableRotation=function(){this._rotationDisabled=!1},u.prototype._onStart=function(t){if(2===t.touches.length){var e=r.mousePos(this._el,t.touches[0]),n=r.mousePos(this._el,t.touches[1]);this._startVec=e.sub(n),this._startScale=this._map.transform.scale,this._startBearing=this._map.transform.bearing,this._gestureIntent=void 0,this._inertia=[],o.document.addEventListener("touchmove",this._onMove,!1),o.document.addEventListener("touchend",this._onEnd,!1)}},u.prototype._onMove=function(t){if(2===t.touches.length){var e=r.mousePos(this._el,t.touches[0]),n=r.mousePos(this._el,t.touches[1]),i=e.add(n).div(2),o=e.sub(n),s=o.mag()/this._startVec.mag(),u=this._rotationDisabled?0:180*o.angleWith(this._startVec)/Math.PI,l=this._map;if(this._gestureIntent){var c={duration:0,around:l.unproject(i)};"rotate"===this._gestureIntent&&(c.bearing=this._startBearing+u),"zoom"!==this._gestureIntent&&"rotate"!==this._gestureIntent||(c.zoom=l.transform.scaleZoom(this._startScale*s)),l.stop(),this._drainInertiaBuffer(),this._inertia.push([a.now(),s,i]),l.easeTo(c,{originalEvent:t})}else{var h=Math.abs(1-s)>.15;Math.abs(u)>10?this._gestureIntent="rotate":h&&(this._gestureIntent="zoom"),this._gestureIntent&&(this._startVec=o,this._startScale=l.transform.scale,this._startBearing=l.transform.bearing)}t.preventDefault()}},u.prototype._onEnd=function(t){o.document.removeEventListener("touchmove",this._onMove),o.document.removeEventListener("touchend",this._onEnd),this._drainInertiaBuffer();var e=this._inertia,n=this._map;if(e.length<2)n.snapToNorth({},{originalEvent:t});else{var r=e[e.length-1],i=e[0],a=n.transform.scaleZoom(this._startScale*r[1]),u=n.transform.scaleZoom(this._startScale*i[1]),l=(r[0]-i[0])/1e3,c=r[2];if(0!==l&&a!==u){var h=.15*(a-u)/l;Math.abs(h)>2.5&&(h=h>0?2.5:-2.5);var p=1e3*Math.abs(h/(12*.15)),f=a+h*p/2e3;f<0&&(f=0),n.easeTo({zoom:f,duration:p,easing:s,around:this._aroundCenter?n.getCenter():n.unproject(c)},{originalEvent:t})}else n.snapToNorth({},{originalEvent:t})}},u.prototype._drainInertiaBuffer=function(){for(var t=this._inertia,e=a.now();t.length>2&&e-t[0][0]>160;)t.shift()},e.exports=u},{"../../util/browser":252,"../../util/dom":259,"../../util/util":275,"../../util/window":254}],246:[function(t,e,n){"use strict";var r=t("../util/util"),i=t("../util/window"),o=t("../util/throttle"),a=function(){r.bindAll(["_onHashChange","_updateHash"],this),this._updateHash=o(this._updateHashUnthrottled.bind(this),300)};a.prototype.addTo=function(t){return this._map=t,i.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},a.prototype.remove=function(){return i.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),delete this._map,this},a.prototype.getHashString=function(t){var e=this._map.getCenter(),n=Math.round(100*this._map.getZoom())/100,r=Math.ceil((n*Math.LN2+Math.log(512/360/.5))/Math.LN10),i=Math.pow(10,r),o=Math.round(e.lng*i)/i,a=Math.round(e.lat*i)/i,s=this._map.getBearing(),u=this._map.getPitch(),l="";return l+=t?"#/"+o+"/"+a+"/"+n:"#"+n+"/"+a+"/"+o,(s||u)&&(l+="/"+Math.round(10*s)/10),u&&(l+="/"+Math.round(u)),l},a.prototype._onHashChange=function(){var t=i.location.hash.replace("#","").split("/");return t.length>=3&&(this._map.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:+(t[3]||0),pitch:+(t[4]||0)}),!0)},a.prototype._updateHashUnthrottled=function(){var t=this.getHashString();i.history.replaceState("","",t)},e.exports=a},{"../util/throttle":272,"../util/util":275,"../util/window":254}],247:[function(t,e,n){"use strict";function r(t){t.parentNode&&t.parentNode.removeChild(t)}var i=t("../util/util"),o=t("../util/browser"),a=t("../util/window"),s=t("../util/window"),u=s.HTMLImageElement,l=s.HTMLElement,c=t("../util/dom"),h=t("../util/ajax"),p=t("../style/style"),f=t("../style/evaluation_parameters"),d=t("../render/painter"),m=t("../geo/transform"),g=t("./hash"),y=t("./bind_handlers"),v=t("./camera"),_=t("../geo/lng_lat"),b=t("../geo/lng_lat_bounds"),x=t("@mapbox/point-geometry"),w=t("./control/attribution_control"),E=t("./control/logo_control"),C=t("@mapbox/mapbox-gl-supported"),S=t("../util/image").RGBAImage;t("./events");var I={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:0,maxZoom:22,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,bearingSnap:7,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,transformRequest:null,fadeDuration:300},T=function(t){function e(e){if(null!=(e=i.extend({},I,e)).minZoom&&null!=e.maxZoom&&e.minZoom>e.maxZoom)throw new Error("maxZoom must be greater than minZoom");var n=new m(e.minZoom,e.maxZoom,e.renderWorldCopies);t.call(this,n,e),this._interactive=e.interactive,this._maxTileCacheSize=e.maxTileCacheSize,this._failIfMajorPerformanceCaveat=e.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=e.preserveDrawingBuffer,this._trackResize=e.trackResize,this._bearingSnap=e.bearingSnap,this._refreshExpiredTiles=e.refreshExpiredTiles,this._fadeDuration=e.fadeDuration,this._crossFadingFactor=1,this._collectResourceTiming=e.collectResourceTiming;var r=e.transformRequest;if(this._transformRequest=r?function(t,e){return r(t,e)||{url:t}}:function(t){return{url:t}},"string"==typeof e.container){var o=a.document.getElementById(e.container);if(!o)throw new Error("Container '"+e.container+"' not found.");this._container=o}else{if(!(e.container instanceof l))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=e.container}e.maxBounds&&this.setMaxBounds(e.maxBounds),i.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored","_update","_render","_onData","_onDataLoading"],this),this._setupContainer(),this._setupPainter(),this.on("move",this._update.bind(this,!1)),this.on("zoom",this._update.bind(this,!0)),void 0!==a&&(a.addEventListener("online",this._onWindowOnline,!1),a.addEventListener("resize",this._onWindowResize,!1)),y(this,e),this._hash=e.hash&&(new g).addTo(this),this._hash&&this._hash._onHashChange()||this.jumpTo({center:e.center,zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}),this.resize(),e.style&&this.setStyle(e.style,{localIdeographFontFamily:e.localIdeographFontFamily}),e.attributionControl&&this.addControl(new w),this.addControl(new E,e.logoPosition),this.on("style.load",function(){this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",this._onData),this.on("dataloading",this._onDataLoading)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={showTileBoundaries:{},showCollisionBoxes:{},showOverdrawInspector:{},repaint:{},vertices:{}};return e.prototype.addControl=function(t,e){void 0===e&&t.getDefaultPosition&&(e=t.getDefaultPosition()),void 0===e&&(e="top-right");var n=t.onAdd(this),r=this._controlPositions[e];return-1!==e.indexOf("bottom")?r.insertBefore(n,r.firstChild):r.appendChild(n),this},e.prototype.removeControl=function(t){return t.onRemove(this),this},e.prototype.resize=function(){var t=this._containerDimensions(),e=t[0],n=t[1];return this._resizeCanvas(e,n),this.transform.resize(e,n),this.painter.resize(e,n),this.fire("movestart").fire("move").fire("resize").fire("moveend")},e.prototype.getBounds=function(){var t=new b(this.transform.pointLocation(new x(0,this.transform.height)),this.transform.pointLocation(new x(this.transform.width,0)));return(this.transform.angle||this.transform.pitch)&&(t.extend(this.transform.pointLocation(new x(this.transform.size.x,0))),t.extend(this.transform.pointLocation(new x(0,this.transform.size.y)))),t},e.prototype.getMaxBounds=function(){return this.transform.latRange&&2===this.transform.latRange.length&&this.transform.lngRange&&2===this.transform.lngRange.length?new b([this.transform.lngRange[0],this.transform.latRange[0]],[this.transform.lngRange[1],this.transform.latRange[1]]):null},e.prototype.setMaxBounds=function(t){if(t){var e=b.convert(t);this.transform.lngRange=[e.getWest(),e.getEast()],this.transform.latRange=[e.getSouth(),e.getNorth()],this.transform._constrain(),this._update()}else null!==t&&void 0!==t||(this.transform.lngRange=null,this.transform.latRange=null,this._update());return this},e.prototype.setMinZoom=function(t){if((t=null===t||void 0===t?0:t)>=0&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t&&this.setZoom(t),this;throw new Error("minZoom must be between 0 and the current maxZoom, inclusive")},e.prototype.getMinZoom=function(){return this.transform.minZoom},e.prototype.setMaxZoom=function(t){if((t=null===t||void 0===t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t&&this.setZoom(t),this;throw new Error("maxZoom must be greater than the current minZoom")},e.prototype.getMaxZoom=function(){return this.transform.maxZoom},e.prototype.project=function(t){return this.transform.locationPoint(_.convert(t))},e.prototype.unproject=function(t){return this.transform.pointLocation(x.convert(t))},e.prototype.on=function(e,n,r){var o=this;if(void 0===r)return t.prototype.on.call(this,e,n);var a=function(){if("mouseenter"===e||"mouseover"===e){var t=!1;return{layer:n,listener:r,delegates:{mousemove:function(a){var s=o.getLayer(n)?o.queryRenderedFeatures(a.point,{layers:[n]}):[];s.length?t||(t=!0,r.call(o,i.extend({features:s},a,{type:e}))):t=!1},mouseout:function(){t=!1}}}}if("mouseleave"===e||"mouseout"===e){var a=!1;return{layer:n,listener:r,delegates:{mousemove:function(t){(o.getLayer(n)?o.queryRenderedFeatures(t.point,{layers:[n]}):[]).length?a=!0:a&&(a=!1,r.call(o,i.extend({},t,{type:e})))},mouseout:function(t){a&&(a=!1,r.call(o,i.extend({},t,{type:e})))}}}}var s;return{layer:n,listener:r,delegates:(s={},s[e]=function(t){var e=o.getLayer(n)?o.queryRenderedFeatures(t.point,{layers:[n]}):[];e.length&&r.call(o,i.extend({features:e},t))},s)}}();for(var s in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[e]=this._delegatedListeners[e]||[],this._delegatedListeners[e].push(a),a.delegates)o.on(s,a.delegates[s]);return this},e.prototype.off=function(e,n,r){if(void 0===r)return t.prototype.off.call(this,e,n);if(this._delegatedListeners&&this._delegatedListeners[e])for(var i=this._delegatedListeners[e],o=0;o<i.length;o++){var a=i[o];if(a.layer===n&&a.listener===r){for(var s in a.delegates)this.off(s,a.delegates[s]);return i.splice(o,1),this}}return this},e.prototype.queryRenderedFeatures=function(t,e){return 2===arguments.length?(t=arguments[0],e=arguments[1]):1===arguments.length&&function(t){return t instanceof x||Array.isArray(t)}(arguments[0])?(t=arguments[0],e={}):1===arguments.length?(t=void 0,e=arguments[0]):(t=void 0,e={}),this.style?this.style.queryRenderedFeatures(this._makeQueryGeometry(t),e,this.transform.zoom,this.transform.angle):[]},e.prototype._makeQueryGeometry=function(t){var e,n=this;if(void 0===t&&(t=[x.convert([0,0]),x.convert([this.transform.width,this.transform.height])]),t instanceof x||"number"==typeof t[0])e=[x.convert(t)];else{var r=[x.convert(t[0]),x.convert(t[1])];e=[r[0],new x(r[1].x,r[0].y),r[1],new x(r[0].x,r[1].y),r[0]]}return e.map(function(t){return n.transform.pointCoordinate(t)})},e.prototype.querySourceFeatures=function(t,e){return this.style.querySourceFeatures(t,e)},e.prototype.setStyle=function(t,e){if((!e||!1!==e.diff&&!e.localIdeographFontFamily)&&this.style&&t&&"object"==typeof t)try{return this.style.setState(t)&&this._update(!0),this}catch(t){i.warnOnce("Unable to perform style diff: "+(t.message||t.error||t)+".  Rebuilding the style from scratch.")}return this.style&&(this.style.setEventedParent(null),this.style._remove()),t?(this.style=new p(this,e||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof t?this.style.loadURL(t):this.style.loadJSON(t),this):(delete this.style,this)},e.prototype.getStyle=function(){if(this.style)return this.style.serialize()},e.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():i.warnOnce("There is no style added to the map.")},e.prototype.addSource=function(t,e){return this.style.addSource(t,e),this._update(!0),this},e.prototype.isSourceLoaded=function(t){var e=this.style&&this.style.sourceCaches[t];return void 0===e?void this.fire("error",{error:new Error("There is no source with ID '"+t+"'")}):e.loaded()},e.prototype.areTilesLoaded=function(){var t=this.style&&this.style.sourceCaches;for(var e in t){var n=t[e]._tiles;for(var r in n){var i=n[r];if("loaded"!==i.state&&"errored"!==i.state)return!1}}return!0},e.prototype.addSourceType=function(t,e,n){return this.style.addSourceType(t,e,n)},e.prototype.removeSource=function(t){return this.style.removeSource(t),this._update(!0),this},e.prototype.getSource=function(t){return this.style.getSource(t)},e.prototype.addImage=function(t,e,n){void 0===n&&(n={});var r=n.pixelRatio;void 0===r&&(r=1);var i=n.sdf;if(void 0===i&&(i=!1),e instanceof u){var a=o.getImageData(e);this.style.addImage(t,{data:new S({width:a.width,height:a.height},a.data),pixelRatio:r,sdf:i})}else{if(void 0===e.width||void 0===e.height)return this.fire("error",{error:new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")});this.style.addImage(t,{data:new S({width:e.width,height:e.height},e.data.slice(0)),pixelRatio:r,sdf:i})}},e.prototype.hasImage=function(t){return t?!!this.style.getImage(t):(this.fire("error",{error:new Error("Missing required image id")}),!1)},e.prototype.removeImage=function(t){this.style.removeImage(t)},e.prototype.loadImage=function(t,e){h.getImage(this._transformRequest(t,h.ResourceType.Image),e)},e.prototype.addLayer=function(t,e){return this.style.addLayer(t,e),this._update(!0),this},e.prototype.moveLayer=function(t,e){return this.style.moveLayer(t,e),this._update(!0),this},e.prototype.removeLayer=function(t){return this.style.removeLayer(t),this._update(!0),this},e.prototype.getLayer=function(t){return this.style.getLayer(t)},e.prototype.setFilter=function(t,e){return this.style.setFilter(t,e),this._update(!0),this},e.prototype.setLayerZoomRange=function(t,e,n){return this.style.setLayerZoomRange(t,e,n),this._update(!0),this},e.prototype.getFilter=function(t){return this.style.getFilter(t)},e.prototype.setPaintProperty=function(t,e,n){return this.style.setPaintProperty(t,e,n),this._update(!0),this},e.prototype.getPaintProperty=function(t,e){return this.style.getPaintProperty(t,e)},e.prototype.setLayoutProperty=function(t,e,n){return this.style.setLayoutProperty(t,e,n),this._update(!0),this},e.prototype.getLayoutProperty=function(t,e){return this.style.getLayoutProperty(t,e)},e.prototype.setLight=function(t){return this.style.setLight(t),this._update(!0),this},e.prototype.getLight=function(){return this.style.getLight()},e.prototype.getContainer=function(){return this._container},e.prototype.getCanvasContainer=function(){return this._canvasContainer},e.prototype.getCanvas=function(){return this._canvas},e.prototype._containerDimensions=function(){var t=0,e=0;return this._container&&(t=this._container.offsetWidth||400,e=this._container.offsetHeight||300),[t,e]},e.prototype._setupContainer=function(){var t=this._container;t.classList.add("mapboxgl-map"),(this._missingCSSContainer=c.create("div","mapboxgl-missing-css",t)).innerHTML="Missing Mapbox GL JS CSS";var e=this._canvasContainer=c.create("div","mapboxgl-canvas-container",t);this._interactive&&e.classList.add("mapboxgl-interactive"),this._canvas=c.create("canvas","mapboxgl-canvas",e),this._canvas.style.position="absolute",this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var n=this._containerDimensions();this._resizeCanvas(n[0],n[1]);var r=this._controlContainer=c.create("div","mapboxgl-control-container",t),i=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(t){i[t]=c.create("div","mapboxgl-ctrl-"+t,r)})},e.prototype._resizeCanvas=function(t,e){var n=a.devicePixelRatio||1;this._canvas.width=n*t,this._canvas.height=n*e,this._canvas.style.width=t+"px",this._canvas.style.height=e+"px"},e.prototype._setupPainter=function(){var t=i.extend({failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer},C.webGLContextAttributes),e=this._canvas.getContext("webgl",t)||this._canvas.getContext("experimental-webgl",t);e?this.painter=new d(e,this.transform):this.fire("error",{error:new Error("Failed to initialize WebGL")})},e.prototype._contextLost=function(t){t.preventDefault(),this._frameId&&(o.cancelFrame(this._frameId),this._frameId=null),this.fire("webglcontextlost",{originalEvent:t})},e.prototype._contextRestored=function(t){this._setupPainter(),this.resize(),this._update(),this.fire("webglcontextrestored",{originalEvent:t})},e.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!(!this.style||!this.style.loaded())},e.prototype._update=function(t){this.style&&(this._styleDirty=this._styleDirty||t,this._sourcesDirty=!0,this._rerender())},e.prototype._render=function(){this._updateCamera();var t=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var e=this.transform.zoom,n=o.now();this.style.zoomHistory.update(e,n);var r=new f(e,{now:n,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),i=r.crossFadingFactor();1===i&&i===this._crossFadingFactor||(t=!0,this._crossFadingFactor=i),this.style.update(r)}return this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.rotating,zooming:this.zooming,fadeDuration:this._fadeDuration}),this.fire("render"),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire("load")),this.style&&(this.style.hasTransitions()||t)&&(this._styleDirty=!0),(this._sourcesDirty||this._repaint||this._styleDirty||this._placementDirty)&&this._rerender(),this},e.prototype.remove=function(){this._hash&&this._hash.remove(),o.cancelFrame(this._frameId),this._frameId=null,this.setStyle(null),void 0!==a&&(a.removeEventListener("resize",this._onWindowResize,!1),a.removeEventListener("online",this._onWindowOnline,!1));var t=this.painter.context.gl.getExtension("WEBGL_lose_context");t&&t.loseContext(),r(this._canvasContainer),r(this._controlContainer),r(this._missingCSSContainer),this._container.classList.remove("mapboxgl-map"),this.fire("remove")},e.prototype._rerender=function(){var t=this;this.style&&!this._frameId&&(this._frameId=o.frame(function(){t._frameId=null,t._render()}))},e.prototype._onWindowOnline=function(){this._update()},e.prototype._onWindowResize=function(){this._trackResize&&this.stop().resize()._update()},n.showTileBoundaries.get=function(){return!!this._showTileBoundaries},n.showTileBoundaries.set=function(t){this._showTileBoundaries!==t&&(this._showTileBoundaries=t,this._update())},n.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},n.showCollisionBoxes.set=function(t){this._showCollisionBoxes!==t&&(this._showCollisionBoxes=t,t?this.style._generateCollisionBoxes():this._update())},n.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},n.showOverdrawInspector.set=function(t){this._showOverdrawInspector!==t&&(this._showOverdrawInspector=t,this._update())},n.repaint.get=function(){return!!this._repaint},n.repaint.set=function(t){this._repaint=t,this._update()},n.vertices.get=function(){return!!this._vertices},n.vertices.set=function(t){this._vertices=t,this._update()},e.prototype._onData=function(t){this._update("style"===t.dataType),this.fire(t.dataType+"data",t)},e.prototype._onDataLoading=function(t){this.fire(t.dataType+"dataloading",t)},Object.defineProperties(e.prototype,n),e}(v);e.exports=T},{"../geo/lng_lat":62,"../geo/lng_lat_bounds":63,"../geo/transform":64,"../render/painter":90,"../style/evaluation_parameters":182,"../style/style":190,"../util/ajax":251,"../util/browser":252,"../util/dom":259,"../util/image":263,"../util/util":275,"../util/window":254,"./bind_handlers":230,"./camera":231,"./control/attribution_control":232,"./control/logo_control":235,"./events":238,"./hash":246,"@mapbox/mapbox-gl-supported":3,"@mapbox/point-geometry":4}],248:[function(t,e,n){"use strict";var r=t("../util/dom"),i=t("../geo/lng_lat"),o=t("@mapbox/point-geometry"),a=t("../util/smart_wrap"),s=t("../util/util").bindAll,u=function(t,e){if(s(["_update","_onMapClick"],this),!t){t=r.create("div");var n=r.createNS("http://www.w3.org/2000/svg","svg");n.setAttributeNS(null,"height","41px"),n.setAttributeNS(null,"width","27px"),n.setAttributeNS(null,"viewBox","0 0 27 41");var i=r.createNS("http://www.w3.org/2000/svg","g");i.setAttributeNS(null,"stroke","none"),i.setAttributeNS(null,"stroke-width","1"),i.setAttributeNS(null,"fill","none"),i.setAttributeNS(null,"fill-rule","evenodd");var a=r.createNS("http://www.w3.org/2000/svg","g");a.setAttributeNS(null,"fill-rule","nonzero");var u=r.createNS("http://www.w3.org/2000/svg","g");u.setAttributeNS(null,"transform","translate(3.0, 29.0)"),u.setAttributeNS(null,"fill","#000000");for(var l=0,c=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];l<c.length;l+=1){var h=c[l],p=r.createNS("http://www.w3.org/2000/svg","ellipse");p.setAttributeNS(null,"opacity","0.04"),p.setAttributeNS(null,"cx","10.5"),p.setAttributeNS(null,"cy","5.80029008"),p.setAttributeNS(null,"rx",h.rx),p.setAttributeNS(null,"ry",h.ry),u.appendChild(p)}var f=r.createNS("http://www.w3.org/2000/svg","g");f.setAttributeNS(null,"fill","#3FB1CE");var d=r.createNS("http://www.w3.org/2000/svg","path");d.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),f.appendChild(d);var m=r.createNS("http://www.w3.org/2000/svg","g");m.setAttributeNS(null,"opacity","0.25"),m.setAttributeNS(null,"fill","#000000");var g=r.createNS("http://www.w3.org/2000/svg","path");g.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),m.appendChild(g);var y=r.createNS("http://www.w3.org/2000/svg","g");y.setAttributeNS(null,"transform","translate(6.0, 7.0)"),y.setAttributeNS(null,"fill","#FFFFFF");var v=r.createNS("http://www.w3.org/2000/svg","g");v.setAttributeNS(null,"transform","translate(8.0, 8.0)");var _=r.createNS("http://www.w3.org/2000/svg","circle");_.setAttributeNS(null,"fill","#000000"),_.setAttributeNS(null,"opacity","0.25"),_.setAttributeNS(null,"cx","5.5"),_.setAttributeNS(null,"cy","5.5"),_.setAttributeNS(null,"r","5.4999962");var b=r.createNS("http://www.w3.org/2000/svg","circle");b.setAttributeNS(null,"fill","#FFFFFF"),b.setAttributeNS(null,"cx","5.5"),b.setAttributeNS(null,"cy","5.5"),b.setAttributeNS(null,"r","5.4999962"),v.appendChild(_),v.appendChild(b),a.appendChild(u),a.appendChild(f),a.appendChild(m),a.appendChild(y),a.appendChild(v),n.appendChild(a),t.appendChild(n);var x=[0,-14];e&&e.offset||(e?e.offset=x:e={offset:x})}this._offset=o.convert(e&&e.offset||[0,0]),t.classList.add("mapboxgl-marker"),this._element=t,this._popup=null};u.prototype.addTo=function(t){return this.remove(),this._map=t,t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),this._update(),this._map.on("click",this._onMapClick),this},u.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),delete this._map),r.remove(this._element),this._popup&&this._popup.remove(),this},u.prototype.getLngLat=function(){return this._lngLat},u.prototype.setLngLat=function(t){return this._lngLat=i.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},u.prototype.getElement=function(){return this._element},u.prototype.setPopup=function(t){return this._popup&&(this._popup.remove(),this._popup=null),t&&("offset"in t.options||(t.options.offset=this._offset),this._popup=t,this._lngLat&&this._popup.setLngLat(this._lngLat)),this},u.prototype._onMapClick=function(t){var e=t.originalEvent.target,n=this._element;this._popup&&(e===n||n.contains(e))&&this.togglePopup()},u.prototype.getPopup=function(){return this._popup},u.prototype.togglePopup=function(){var t=this._popup;return t?(t.isOpen()?t.remove():t.addTo(this._map),this):this},u.prototype._update=function(t){this._map&&(this._map.transform.renderWorldCopies&&(this._lngLat=a(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset),t&&"moveend"!==t.type||(this._pos=this._pos.round()),r.setTransform(this._element,"translate(-50%, -50%) translate("+this._pos.x+"px, "+this._pos.y+"px)"))},u.prototype.getOffset=function(){return this._offset},u.prototype.setOffset=function(t){return this._offset=o.convert(t),this._update(),this},e.exports=u},{"../geo/lng_lat":62,"../util/dom":259,"../util/smart_wrap":270,"../util/util":275,"@mapbox/point-geometry":4}],249:[function(t,e,n){"use strict";var r=t("../util/util"),i=t("../util/evented"),o=t("../util/dom"),a=t("../geo/lng_lat"),s=t("@mapbox/point-geometry"),u=t("../util/window"),l=t("../util/smart_wrap"),c={closeButton:!0,closeOnClick:!0},h=function(t){function e(e){t.call(this),this.options=r.extend(Object.create(c),e),r.bindAll(["_update","_onClickClose"],this)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.addTo=function(t){return this._map=t,this._map.on("move",this._update),this.options.closeOnClick&&this._map.on("click",this._onClickClose),this._update(),this},e.prototype.isOpen=function(){return!!this._map},e.prototype.remove=function(){return this._content&&o.remove(this._content),this._container&&(o.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("click",this._onClickClose),delete this._map),this.fire("close"),this},e.prototype.getLngLat=function(){return this._lngLat},e.prototype.setLngLat=function(t){return this._lngLat=a.convert(t),this._pos=null,this._update(),this},e.prototype.setText=function(t){return this.setDOMContent(u.document.createTextNode(t))},e.prototype.setHTML=function(t){var e,n=u.document.createDocumentFragment(),r=u.document.createElement("body");for(r.innerHTML=t;e=r.firstChild;)n.appendChild(e);return this.setDOMContent(n)},e.prototype.setDOMContent=function(t){return this._createContent(),this._content.appendChild(t),this._update(),this},e.prototype._createContent=function(){this._content&&o.remove(this._content),this._content=o.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=o.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClickClose))},e.prototype._update=function(){if(this._map&&this._lngLat&&this._content){this._container||(this._container=o.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=o.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content)),this._map.transform.renderWorldCopies&&(this._lngLat=l(this._lngLat,this._pos,this._map.transform));var t=this._pos=this._map.project(this._lngLat),e=this.options.anchor,n=function t(e){if(e){if("number"==typeof e){var n=Math.round(Math.sqrt(.5*Math.pow(e,2)));return{top:new s(0,e),"top-left":new s(n,n),"top-right":new s(-n,n),bottom:new s(0,-e),"bottom-left":new s(n,-n),"bottom-right":new s(-n,-n),left:new s(e,0),right:new s(-e,0)}}if(e instanceof s||Array.isArray(e)){var r=s.convert(e);return{top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{top:s.convert(e.top||[0,0]),"top-left":s.convert(e["top-left"]||[0,0]),"top-right":s.convert(e["top-right"]||[0,0]),bottom:s.convert(e.bottom||[0,0]),"bottom-left":s.convert(e["bottom-left"]||[0,0]),"bottom-right":s.convert(e["bottom-right"]||[0,0]),left:s.convert(e.left||[0,0]),right:s.convert(e.right||[0,0])}}return t(new s(0,0))}(this.options.offset);if(!e){var r=this._container.offsetWidth,i=this._container.offsetHeight;e=t.y+n.bottom.y<i?["top"]:t.y>this._map.transform.height-i?["bottom"]:[],t.x<r/2?e.push("left"):t.x>this._map.transform.width-r/2&&e.push("right"),e=0===e.length?"bottom":e.join("-")}var a=t.add(n[e]).round(),u={top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"},c=this._container.classList;for(var h in u)c.remove("mapboxgl-popup-anchor-"+h);c.add("mapboxgl-popup-anchor-"+e),o.setTransform(this._container,u[e]+" translate("+a.x+"px,"+a.y+"px)")}},e.prototype._onClickClose=function(){this.remove()},e}(i);e.exports=h},{"../geo/lng_lat":62,"../util/dom":259,"../util/evented":260,"../util/smart_wrap":270,"../util/util":275,"../util/window":254,"@mapbox/point-geometry":4}],250:[function(t,e,n){"use strict";var r=t("./util"),i=t("./web_worker_transfer"),o=i.serialize,a=i.deserialize,s=function(t,e,n){this.target=t,this.parent=e,this.mapId=n,this.callbacks={},this.callbackID=0,r.bindAll(["receive"],this),this.target.addEventListener("message",this.receive,!1)};s.prototype.send=function(t,e,n,r){var i=n?this.mapId+":"+this.callbackID++:null;n&&(this.callbacks[i]=n);var a=[];this.target.postMessage({targetMapId:r,sourceMapId:this.mapId,type:t,id:String(i),data:o(e,a)},a)},s.prototype.receive=function(t){var e,n=this,r=t.data,i=r.id;if(!r.targetMapId||this.mapId===r.targetMapId){var s=function(t,e){var r=[];n.target.postMessage({sourceMapId:n.mapId,type:"<response>",id:String(i),error:t?String(t):null,data:o(e,r)},r)};if("<response>"===r.type)e=this.callbacks[r.id],delete this.callbacks[r.id],e&&r.error?e(new Error(r.error)):e&&e(null,a(r.data));else if(void 0!==r.id&&this.parent[r.type])this.parent[r.type](r.sourceMapId,a(r.data),s);else if(void 0!==r.id&&this.parent.getWorkerSource){var u=r.type.split(".");this.parent.getWorkerSource(r.sourceMapId,u[0])[u[1]](a(r.data),s)}else this.parent[r.type](a(r.data))}},s.prototype.remove=function(){this.target.removeEventListener("message",this.receive,!1)},e.exports=s},{"./util":275,"./web_worker_transfer":278}],251:[function(t,e,n){"use strict";function r(t){var e=new o.XMLHttpRequest;for(var n in e.open("GET",t.url,!0),t.headers)e.setRequestHeader(n,t.headers[n]);return e.withCredentials="include"===t.credentials,e}function i(t){var e=o.document.createElement("a");return e.href=t,e.protocol===o.document.location.protocol&&e.host===o.document.location.host}var o=t("./window"),a={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};n.ResourceType=a,"function"==typeof Object.freeze&&Object.freeze(a);var s=function(t){function e(e,n){t.call(this,e),this.status=n}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Error);n.getJSON=function(t,e){var n=r(t);return n.setRequestHeader("Accept","application/json"),n.onerror=function(){e(new Error(n.statusText))},n.onload=function(){if(n.status>=200&&n.status<300&&n.response){var t;try{t=JSON.parse(n.response)}catch(t){return e(t)}e(null,t)}else e(new s(n.statusText,n.status))},n.send(),n},n.getArrayBuffer=function(t,e){var n=r(t);return n.responseType="arraybuffer",n.onerror=function(){e(new Error(n.statusText))},n.onload=function(){var t=n.response;if(0===t.byteLength&&200===n.status)return e(new Error("http status 200 returned without content."));n.status>=200&&n.status<300&&n.response?e(null,{data:t,cacheControl:n.getResponseHeader("Cache-Control"),expires:n.getResponseHeader("Expires")}):e(new s(n.statusText,n.status))},n.send(),n},n.getImage=function(t,e){return n.getArrayBuffer(t,function(t,n){if(t)e(t);else if(n){var r=new o.Image,i=o.URL||o.webkitURL;r.onload=function(){e(null,r),i.revokeObjectURL(r.src)};var a=new o.Blob([new Uint8Array(n.data)],{type:"image/png"});r.cacheControl=n.cacheControl,r.expires=n.expires,r.src=n.data.byteLength?i.createObjectURL(a):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}})},n.getVideo=function(t,e){var n=o.document.createElement("video");n.onloadstart=function(){e(null,n)};for(var r=0;r<t.length;r++){var a=o.document.createElement("source");i(t[r])||(n.crossOrigin="Anonymous"),a.src=t[r],n.appendChild(a)}return n}},{"./window":254}],252:[function(t,e,n){"use strict";var r=t("./window"),i=r.performance&&r.performance.now?r.performance.now.bind(r.performance):Date.now.bind(Date),o=r.requestAnimationFrame||r.mozRequestAnimationFrame||r.webkitRequestAnimationFrame||r.msRequestAnimationFrame,a=r.cancelAnimationFrame||r.mozCancelAnimationFrame||r.webkitCancelAnimationFrame||r.msCancelAnimationFrame;e.exports={now:i,frame:function(t){return o(t)},cancelFrame:function(t){return a(t)},getImageData:function(t){var e=r.document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("failed to create canvas 2d context");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0,t.width,t.height),n.getImageData(0,0,t.width,t.height)},hardwareConcurrency:r.navigator.hardwareConcurrency||4,get devicePixelRatio(){return r.devicePixelRatio},supportsWebp:!1};var s=r.document.createElement("img");s.onload=function(){e.exports.supportsWebp=!0},s.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="},{"./window":254}],253:[function(t,e,n){"use strict";var r=t("webworkify"),i=t("../window"),o=i.URL.createObjectURL(new r(t("../../source/worker"),{bare:!0}));e.exports=function(){return new i.Worker(o)}},{"../../source/worker":118,"../window":254,webworkify:36}],254:[function(t,e,n){"use strict";e.exports=self},{}],255:[function(t,e,n){"use strict";function r(t,e){return e.area-t.area}var i=t("quickselect"),o=t("./util").calculateSignedArea;e.exports=function(t,e){var n=t.length;if(n<=1)return[t];for(var a,s,u=[],l=0;l<n;l++){var c=o(t[l]);0!==c&&(t[l].area=Math.abs(c),void 0===s&&(s=c<0),s===c<0?(a&&u.push(a),a=[t[l]]):a.push(t[l]))}if(a&&u.push(a),e>1)for(var h=0;h<u.length;h++)u[h].length<=e||(i(u[h],e,1,u[h].length-1,r),u[h]=u[h].slice(0,e));return u}},{"./util":275,quickselect:31}],256:[function(t,e,n){"use strict";e.exports={API_URL:"https://api.mapbox.com",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null}},{}],257:[function(t,e,n){"use strict";var r=function(t){this._stringToNumber={},this._numberToString=[];for(var e=0;e<t.length;e++){var n=t[e];this._stringToNumber[n]=e,this._numberToString[e]=n}};r.prototype.encode=function(t){return this._stringToNumber[t]},r.prototype.decode=function(t){return this._numberToString[t]},e.exports=r},{}],258:[function(t,e,n){"use strict";var r=t("./util"),i=t("./actor"),o=function(t,e){this.workerPool=t,this.actors=[],this.currentActor=0,this.id=r.uniqueId();for(var n=this.workerPool.acquire(this.id),o=0;o<n.length;o++){var a=new i(n[o],e,this.id);a.name="Worker "+o,this.actors.push(a)}};o.prototype.broadcast=function(t,e,n){r.asyncAll(this.actors,function(n,r){n.send(t,e,r)},n=n||function(){})},o.prototype.send=function(t,e,n,r){return("number"!=typeof r||isNaN(r))&&(r=this.currentActor=(this.currentActor+1)%this.actors.length),this.actors[r].send(t,e,n),r},o.prototype.remove=function(){this.actors.forEach(function(t){t.remove()}),this.actors=[],this.workerPool.release(this.id)},e.exports=o},{"./actor":250,"./util":275}],259:[function(t,e,n){"use strict";function r(t){for(var e=0;e<t.length;e++)if(t[e]in s)return t[e];return t[0]}var i=t("@mapbox/point-geometry"),o=t("./window");n.create=function(t,e,n){var r=o.document.createElement(t);return e&&(r.className=e),n&&n.appendChild(r),r},n.createNS=function(t,e){return o.document.createElementNS(t,e)};var a,s=o.document.documentElement.style,u=r(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);n.disableDrag=function(){u&&(a=s[u],s[u]="none")},n.enableDrag=function(){u&&(s[u]=a)};var l=r(["transform","WebkitTransform"]);n.setTransform=function(t,e){t.style[l]=e};var c=function(t){t.preventDefault(),t.stopPropagation(),o.removeEventListener("click",c,!0)};n.suppressClick=function(){o.addEventListener("click",c,!0),o.setTimeout(function(){o.removeEventListener("click",c,!0)},0)},n.mousePos=function(t,e){var n=t.getBoundingClientRect();return new i((e=e.touches?e.touches[0]:e).clientX-n.left-t.clientLeft,e.clientY-n.top-t.clientTop)},n.touchPos=function(t,e){for(var n=t.getBoundingClientRect(),r=[],o="touchend"===e.type?e.changedTouches:e.touches,a=0;a<o.length;a++)r.push(new i(o[a].clientX-n.left-t.clientLeft,o[a].clientY-n.top-t.clientTop));return r},n.remove=function(t){t.parentNode&&t.parentNode.removeChild(t)}},{"./window":254,"@mapbox/point-geometry":4}],260:[function(t,e,n){"use strict";function r(t,e,n){n[t]=n[t]||[],n[t].push(e)}function i(t,e,n){if(n&&n[t]){var r=n[t].indexOf(e);-1!==r&&n[t].splice(r,1)}}var o=t("./util"),a=function(){};a.prototype.on=function(t,e){return this._listeners=this._listeners||{},r(t,e,this._listeners),this},a.prototype.off=function(t,e){return i(t,e,this._listeners),i(t,e,this._oneTimeListeners),this},a.prototype.once=function(t,e){return this._oneTimeListeners=this._oneTimeListeners||{},r(t,e,this._oneTimeListeners),this},a.prototype.fire=function(t,e){var n=this;if(this.listens(t)){e=o.extend({},e,{type:t,target:this});for(var r=0,a=this._listeners&&this._listeners[t]?this._listeners[t].slice():[];r<a.length;r+=1)a[r].call(n,e);for(var s=0,u=this._oneTimeListeners&&this._oneTimeListeners[t]?this._oneTimeListeners[t].slice():[];s<u.length;s+=1){var l=u[s];i(t,l,n._oneTimeListeners),l.call(n,e)}this._eventedParent&&this._eventedParent.fire(t,o.extend({},e,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData))}else o.endsWith(t,"error")&&console.error(e&&e.error||e||"Empty error event");return this},a.prototype.listens=function(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)},a.prototype.setEventedParent=function(t,e){return this._eventedParent=t,this._eventedParentData=e,this},e.exports=a},{"./util":275}],261:[function(t,e,n){"use strict";function r(t,e){return e.max-t.max}function i(t,e,n,r){this.p=new a(t,e),this.h=n,this.d=function(t,e){for(var n=!1,r=1/0,i=0;i<e.length;i++)for(var o=e[i],a=0,u=o.length,l=u-1;a<u;l=a++){var c=o[a],h=o[l];c.y>t.y!=h.y>t.y&&t.x<(h.x-c.x)*(t.y-c.y)/(h.y-c.y)+c.x&&(n=!n),r=Math.min(r,s(t,c,h))}return(n?1:-1)*Math.sqrt(r)}(this.p,r),this.max=this.d+this.h*Math.SQRT2}var o=t("tinyqueue"),a=t("@mapbox/point-geometry"),s=t("./intersection_tests").distToSegmentSquared;e.exports=function(t,e,n){void 0===e&&(e=1),void 0===n&&(n=!1);for(var s=1/0,u=1/0,l=-1/0,c=-1/0,h=t[0],p=0;p<h.length;p++){var f=h[p];(!p||f.x<s)&&(s=f.x),(!p||f.y<u)&&(u=f.y),(!p||f.x>l)&&(l=f.x),(!p||f.y>c)&&(c=f.y)}var d=Math.min(l-s,c-u),m=d/2,g=new o(null,r);if(0===d)return new a(s,u);for(var y=s;y<l;y+=d)for(var v=u;v<c;v+=d)g.push(new i(y+m,v+m,m,t));for(var _=function(t){for(var e=0,n=0,r=0,o=t[0],a=0,s=o.length,u=s-1;a<s;u=a++){var l=o[a],c=o[u],h=l.x*c.y-c.x*l.y;n+=(l.x+c.x)*h,r+=(l.y+c.y)*h,e+=3*h}return new i(n/e,r/e,0,t)}(t),b=g.length;g.length;){var x=g.pop();(x.d>_.d||!_.d)&&(_=x,n&&console.log("found best %d after %d probes",Math.round(1e4*x.d)/1e4,b)),x.max-_.d<=e||(g.push(new i(x.p.x-(m=x.h/2),x.p.y-m,m,t)),g.push(new i(x.p.x+m,x.p.y-m,m,t)),g.push(new i(x.p.x-m,x.p.y+m,m,t)),g.push(new i(x.p.x+m,x.p.y+m,m,t)),b+=4)}return n&&(console.log("num probes: "+b),console.log("best distance: "+_.d)),_.p}},{"./intersection_tests":264,"@mapbox/point-geometry":4,tinyqueue:33}],262:[function(t,e,n){"use strict";var r,i=t("./worker_pool");e.exports=function(){return r||(r=new i),r}},{"./worker_pool":279}],263:[function(t,e,n){"use strict";function r(t,e,n,r){var i=e.width,o=e.height;if(r){if(r.length!==i*o*n)throw new RangeError("mismatched image size")}else r=new Uint8Array(i*o*n);return t.width=i,t.height=o,t.data=r,t}function i(t,e,n){var i=e.width,a=e.height;if(i!==t.width||a!==t.height){var s=r({},{width:i,height:a},n);o(t,s,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,i),height:Math.min(t.height,a)},n),t.width=i,t.height=a,t.data=s.data}}function o(t,e,n,r,i,o){if(0===i.width||0===i.height)return e;if(i.width>t.width||i.height>t.height||n.x>t.width-i.width||n.y>t.height-i.height)throw new RangeError("out of range source coordinates for image copy");if(i.width>e.width||i.height>e.height||r.x>e.width-i.width||r.y>e.height-i.height)throw new RangeError("out of range destination coordinates for image copy");for(var a=t.data,s=e.data,u=0;u<i.height;u++)for(var l=((n.y+u)*t.width+n.x)*o,c=((r.y+u)*e.width+r.x)*o,h=0;h<i.width*o;h++)s[c+h]=a[l+h];return e}var a=t("./web_worker_transfer").register,s=function(t,e){r(this,t,1,e)};s.prototype.resize=function(t){i(this,t,1)},s.prototype.clone=function(){return new s({width:this.width,height:this.height},new Uint8Array(this.data))},s.copy=function(t,e,n,r,i){o(t,e,n,r,i,1)};var u=function(t,e){r(this,t,4,e)};u.prototype.resize=function(t){i(this,t,4)},u.prototype.clone=function(){return new u({width:this.width,height:this.height},new Uint8Array(this.data))},u.copy=function(t,e,n,r,i){o(t,e,n,r,i,4)},a("AlphaImage",s),a("RGBAImage",u),e.exports={AlphaImage:s,RGBAImage:u}},{"./web_worker_transfer":278}],264:[function(t,e,n){"use strict";function r(t,e,n){if(t.length>1){if(i(t,e))return!0;for(var r=0;r<e.length;r++)if(a(e[r],t,n))return!0}for(var o=0;o<t.length;o++)if(a(t[o],e,n))return!0;return!1}function i(t,e){if(0===t.length||0===e.length)return!1;for(var n=0;n<t.length-1;n++)for(var r=t[n],i=t[n+1],a=0;a<e.length-1;a++)if(o(r,i,e[a],e[a+1]))return!0;return!1}function o(t,e,n,r){return c(t,n,r)!==c(e,n,r)&&c(t,e,n)!==c(t,e,r)}function a(t,e,n){var r=n*n;if(1===e.length)return t.distSqr(e[0])<r;for(var i=1;i<e.length;i++)if(s(t,e[i-1],e[i])<r)return!0;return!1}function s(t,e,n){var r=e.distSqr(n);if(0===r)return t.distSqr(e);var i=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/r;return t.distSqr(i<0?e:i>1?n:n.sub(e)._mult(i)._add(e))}function u(t,e){for(var n,r,i,o=!1,a=0;a<t.length;a++)for(var s=0,u=(n=t[a]).length-1;s<n.length;u=s++)(r=n[s]).y>e.y!=(i=n[u]).y>e.y&&e.x<(i.x-r.x)*(e.y-r.y)/(i.y-r.y)+r.x&&(o=!o);return o}function l(t,e){for(var n=!1,r=0,i=t.length-1;r<t.length;i=r++){var o=t[r],a=t[i];o.y>e.y!=a.y>e.y&&e.x<(a.x-o.x)*(e.y-o.y)/(a.y-o.y)+o.x&&(n=!n)}return n}var c=t("./util").isCounterClockwise;e.exports={multiPolygonIntersectsBufferedMultiPoint:function(t,e,n){for(var r=0;r<t.length;r++)for(var i=t[r],o=0;o<e.length;o++)for(var s=e[o],u=0;u<s.length;u++){var c=s[u];if(l(i,c))return!0;if(a(c,i,n))return!0}return!1},multiPolygonIntersectsMultiPolygon:function(t,e){if(1===t.length&&1===t[0].length)return u(e,t[0][0]);for(var n=0;n<e.length;n++)for(var r=e[n],o=0;o<r.length;o++)if(u(t,r[o]))return!0;for(var a=0;a<t.length;a++){for(var s=t[a],l=0;l<s.length;l++)if(u(e,s[l]))return!0;for(var c=0;c<e.length;c++)if(i(s,e[c]))return!0}return!1},multiPolygonIntersectsBufferedMultiLine:function(t,e,n){for(var i=0;i<e.length;i++)for(var o=e[i],a=0;a<t.length;a++){var s=t[a];if(s.length>=3)for(var u=0;u<o.length;u++)if(l(s,o[u]))return!0;if(r(s,o,n))return!0}return!1},polygonIntersectsPolygon:function(t,e){for(var n=0;n<t.length;n++)if(l(e,t[n]))return!0;for(var r=0;r<e.length;r++)if(l(t,e[r]))return!0;return!!i(t,e)},distToSegmentSquared:s}},{"./util":275}],265:[function(t,e,n){"use strict";e.exports={"Latin-1 Supplement":function(t){return t>=128&&t<=255},Arabic:function(t){return t>=1536&&t<=1791},"Arabic Supplement":function(t){return t>=1872&&t<=1919},"Arabic Extended-A":function(t){return t>=2208&&t<=2303},"Hangul Jamo":function(t){return t>=4352&&t<=4607},"Unified Canadian Aboriginal Syllabics":function(t){return t>=5120&&t<=5759},"Unified Canadian Aboriginal Syllabics Extended":function(t){return t>=6320&&t<=6399},"General Punctuation":function(t){return t>=8192&&t<=8303},"Letterlike Symbols":function(t){return t>=8448&&t<=8527},"Number Forms":function(t){return t>=8528&&t<=8591},"Miscellaneous Technical":function(t){return t>=8960&&t<=9215},"Control Pictures":function(t){return t>=9216&&t<=9279},"Optical Character Recognition":function(t){return t>=9280&&t<=9311},"Enclosed Alphanumerics":function(t){return t>=9312&&t<=9471},"Geometric Shapes":function(t){return t>=9632&&t<=9727},"Miscellaneous Symbols":function(t){return t>=9728&&t<=9983},"Miscellaneous Symbols and Arrows":function(t){return t>=11008&&t<=11263},"CJK Radicals Supplement":function(t){return t>=11904&&t<=12031},"Kangxi Radicals":function(t){return t>=12032&&t<=12255},"Ideographic Description Characters":function(t){return t>=12272&&t<=12287},"CJK Symbols and Punctuation":function(t){return t>=12288&&t<=12351},Hiragana:function(t){return t>=12352&&t<=12447},Katakana:function(t){return t>=12448&&t<=12543},Bopomofo:function(t){return t>=12544&&t<=12591},"Hangul Compatibility Jamo":function(t){return t>=12592&&t<=12687},Kanbun:function(t){return t>=12688&&t<=12703},"Bopomofo Extended":function(t){return t>=12704&&t<=12735},"CJK Strokes":function(t){return t>=12736&&t<=12783},"Katakana Phonetic Extensions":function(t){return t>=12784&&t<=12799},"Enclosed CJK Letters and Months":function(t){return t>=12800&&t<=13055},"CJK Compatibility":function(t){return t>=13056&&t<=13311},"CJK Unified Ideographs Extension A":function(t){return t>=13312&&t<=19903},"Yijing Hexagram Symbols":function(t){return t>=19904&&t<=19967},"CJK Unified Ideographs":function(t){return t>=19968&&t<=40959},"Yi Syllables":function(t){return t>=40960&&t<=42127},"Yi Radicals":function(t){return t>=42128&&t<=42191},"Hangul Jamo Extended-A":function(t){return t>=43360&&t<=43391},"Hangul Syllables":function(t){return t>=44032&&t<=55215},"Hangul Jamo Extended-B":function(t){return t>=55216&&t<=55295},"Private Use Area":function(t){return t>=57344&&t<=63743},"CJK Compatibility Ideographs":function(t){return t>=63744&&t<=64255},"Arabic Presentation Forms-A":function(t){return t>=64336&&t<=65023},"Vertical Forms":function(t){return t>=65040&&t<=65055},"CJK Compatibility Forms":function(t){return t>=65072&&t<=65103},"Small Form Variants":function(t){return t>=65104&&t<=65135},"Arabic Presentation Forms-B":function(t){return t>=65136&&t<=65279},"Halfwidth and Fullwidth Forms":function(t){return t>=65280&&t<=65519}}},{}],266:[function(t,e,n){"use strict";var r=function(t,e){this.max=t,this.onRemove=e,this.reset()};r.prototype.reset=function(){var t=this;for(var e in t.data)t.onRemove(t.data[e]);return this.data={},this.order=[],this},r.prototype.add=function(t,e){if(this.has(t))this.order.splice(this.order.indexOf(t),1),this.data[t]=e,this.order.push(t);else if(this.data[t]=e,this.order.push(t),this.order.length>this.max){var n=this.getAndRemove(this.order[0]);n&&this.onRemove(n)}return this},r.prototype.has=function(t){return t in this.data},r.prototype.keys=function(){return this.order},r.prototype.getAndRemove=function(t){if(!this.has(t))return null;var e=this.data[t];return delete this.data[t],this.order.splice(this.order.indexOf(t),1),e},r.prototype.get=function(t){return this.has(t)?this.data[t]:null},r.prototype.remove=function(t){if(!this.has(t))return this;var e=this.data[t];return delete this.data[t],this.onRemove(e),this.order.splice(this.order.indexOf(t),1),this},r.prototype.setMaxSize=function(t){var e=this;for(this.max=t;this.order.length>this.max;){var n=e.getAndRemove(e.order[0]);n&&e.onRemove(n)}return this},e.exports=r},{}],267:[function(t,e,n){"use strict";function r(t,e){var n=o(s.API_URL);if(t.protocol=n.protocol,t.authority=n.authority,"/"!==n.path&&(t.path=""+n.path+t.path),!s.REQUIRE_ACCESS_TOKEN)return a(t);if(!(e=e||s.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+l);if("s"===e[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+l);return t.params.push("access_token="+e),a(t)}function i(t){return 0===t.indexOf("mapbox:")}function o(t){var e=t.match(h);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function a(t){var e=t.params.length?"?"+t.params.join("&"):"";return t.protocol+"://"+t.authority+t.path+e}var s=t("./config"),u=t("./browser"),l="See https://www.mapbox.com/api-documentation/#access-tokens";n.isMapboxURL=i,n.normalizeStyleURL=function(t,e){if(!i(t))return t;var n=o(t);return n.path="/styles/v1"+n.path,r(n,e)},n.normalizeGlyphsURL=function(t,e){if(!i(t))return t;var n=o(t);return n.path="/fonts/v1"+n.path,r(n,e)},n.normalizeSourceURL=function(t,e){if(!i(t))return t;var n=o(t);return n.path="/v4/"+n.authority+".json",n.params.push("secure"),r(n,e)},n.normalizeSpriteURL=function(t,e,n,s){var u=o(t);return i(t)?(u.path="/styles/v1"+u.path+"/sprite"+e+n,r(u,s)):(u.path+=""+e+n,a(u))};var c=/(\.(png|jpg)\d*)(?=$)/;n.normalizeTileURL=function(t,e,n){if(!e||!i(e))return t;var r=o(t);return r.path=r.path.replace(c,(u.devicePixelRatio>=2||512===n?"@2x":"")+(u.supportsWebp?".webp":"$1")),function(t){for(var e=0;e<t.length;e++)0===t[e].indexOf("access_token=tk.")&&(t[e]="access_token="+(s.ACCESS_TOKEN||""))}(r.params),a(r)};var h=/^(\w+):\/\/([^\/?]*)(\/[^?]+)?\??(.+)?/},{"./browser":252,"./config":256}],268:[function(t,e,n){"use strict";e.exports={getEntriesByName:function(t){return!(!performance||!performance.getEntriesByName)&&performance.getEntriesByName(t)}}},{}],269:[function(t,e,n){"use strict";var r=t("./is_char_in_unicode_block");e.exports.allowsIdeographicBreaking=function(t){for(var e=0,r=t;e<r.length;e+=1)if(!n.charAllowsIdeographicBreaking(r[e].charCodeAt(0)))return!1;return!0},e.exports.allowsVerticalWritingMode=function(t){for(var e=0,r=t;e<r.length;e+=1)if(n.charHasUprightVerticalOrientation(r[e].charCodeAt(0)))return!0;return!1},e.exports.allowsLetterSpacing=function(t){for(var e=0,r=t;e<r.length;e+=1)if(!n.charAllowsLetterSpacing(r[e].charCodeAt(0)))return!1;return!0},e.exports.charAllowsLetterSpacing=function(t){return!(r.Arabic(t)||r["Arabic Supplement"](t)||r["Arabic Extended-A"](t)||r["Arabic Presentation Forms-A"](t)||r["Arabic Presentation Forms-B"](t))},e.exports.charAllowsIdeographicBreaking=function(t){return!(t<11904||!(r["Bopomofo Extended"](t)||r.Bopomofo(t)||r["CJK Compatibility Forms"](t)||r["CJK Compatibility Ideographs"](t)||r["CJK Compatibility"](t)||r["CJK Radicals Supplement"](t)||r["CJK Strokes"](t)||r["CJK Symbols and Punctuation"](t)||r["CJK Unified Ideographs Extension A"](t)||r["CJK Unified Ideographs"](t)||r["Enclosed CJK Letters and Months"](t)||r["Halfwidth and Fullwidth Forms"](t)||r.Hiragana(t)||r["Ideographic Description Characters"](t)||r["Kangxi Radicals"](t)||r["Katakana Phonetic Extensions"](t)||r.Katakana(t)||r["Vertical Forms"](t)||r["Yi Radicals"](t)||r["Yi Syllables"](t)))},n.charHasUprightVerticalOrientation=function(t){return!(746!==t&&747!==t&&(t<4352||!(r["Bopomofo Extended"](t)||r.Bopomofo(t)||r["CJK Compatibility Forms"](t)&&!(t>=65097&&t<=65103)||r["CJK Compatibility Ideographs"](t)||r["CJK Compatibility"](t)||r["CJK Radicals Supplement"](t)||r["CJK Strokes"](t)||!(!r["CJK Symbols and Punctuation"](t)||t>=12296&&t<=12305||t>=12308&&t<=12319||12336===t)||r["CJK Unified Ideographs Extension A"](t)||r["CJK Unified Ideographs"](t)||r["Enclosed CJK Letters and Months"](t)||r["Hangul Compatibility Jamo"](t)||r["Hangul Jamo Extended-A"](t)||r["Hangul Jamo Extended-B"](t)||r["Hangul Jamo"](t)||r["Hangul Syllables"](t)||r.Hiragana(t)||r["Ideographic Description Characters"](t)||r.Kanbun(t)||r["Kangxi Radicals"](t)||r["Katakana Phonetic Extensions"](t)||r.Katakana(t)&&12540!==t||!(!r["Halfwidth and Fullwidth Forms"](t)||65288===t||65289===t||65293===t||t>=65306&&t<=65310||65339===t||65341===t||65343===t||t>=65371&&t<=65503||65507===t||t>=65512&&t<=65519)||!(!r["Small Form Variants"](t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||r["Unified Canadian Aboriginal Syllabics"](t)||r["Unified Canadian Aboriginal Syllabics Extended"](t)||r["Vertical Forms"](t)||r["Yijing Hexagram Symbols"](t)||r["Yi Syllables"](t)||r["Yi Radicals"](t))))},n.charHasNeutralVerticalOrientation=function(t){return!!(r["Latin-1 Supplement"](t)&&(167===t||169===t||174===t||177===t||188===t||189===t||190===t||215===t||247===t)||r["General Punctuation"](t)&&(8214===t||8224===t||8225===t||8240===t||8241===t||8251===t||8252===t||8258===t||8263===t||8264===t||8265===t||8273===t)||r["Letterlike Symbols"](t)||r["Number Forms"](t)||r["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||9003===t||t>=9085&&t<=9114||t>=9150&&t<=9165||9167===t||t>=9169&&t<=9179||t>=9186&&t<=9215)||r["Control Pictures"](t)&&9251!==t||r["Optical Character Recognition"](t)||r["Enclosed Alphanumerics"](t)||r["Geometric Shapes"](t)||r["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||r["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||r["CJK Symbols and Punctuation"](t)||r.Katakana(t)||r["Private Use Area"](t)||r["CJK Compatibility Forms"](t)||r["Small Form Variants"](t)||r["Halfwidth and Fullwidth Forms"](t)||8734===t||8756===t||8757===t||t>=9984&&t<=10087||t>=10102&&t<=10131||65532===t||65533===t)},n.charHasRotatedVerticalOrientation=function(t){return!(n.charHasUprightVerticalOrientation(t)||n.charHasNeutralVerticalOrientation(t))}},{"./is_char_in_unicode_block":265}],270:[function(t,e,n){"use strict";var r=t("../geo/lng_lat");e.exports=function(t,e,n){if(t=new r(t.lng,t.lat),e){var i=new r(t.lng-360,t.lat),o=new r(t.lng+360,t.lat),a=n.locationPoint(t).distSqr(e);n.locationPoint(i).distSqr(e)<a?t=i:n.locationPoint(o).distSqr(e)<a&&(t=o)}for(;Math.abs(t.lng-n.center.lng)>180;){var s=n.locationPoint(t);if(s.x>=0&&s.y>=0&&s.x<=n.width&&s.y<=n.height)break;t.lng>n.center.lng?t.lng-=360:t.lng+=360}return t}},{"../geo/lng_lat":62}],271:[function(t,e,n){"use strict";function r(t,e){return Math.ceil(t/e)*e}var i={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},o=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};o.serialize=function(t,e){return t._trim(),e&&(t.isTransferred=!0,e.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}},o.deserialize=function(t){var e=Object.create(this.prototype);return e.arrayBuffer=t.arrayBuffer,e.length=t.length,e.capacity=t.arrayBuffer.byteLength/e.bytesPerElement,e._refreshViews(),e},o.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},o.prototype.clear=function(){this.length=0},o.prototype.resize=function(t){this.reserve(t),this.length=t},o.prototype.reserve=function(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var e=this.uint8;this._refreshViews(),e&&this.uint8.set(e)}},o.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")},e.exports.StructArray=o,e.exports.Struct=function(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},e.exports.viewTypes=i,e.exports.createLayout=function(t,e){void 0===e&&(e=1);var n=0,o=0;return{members:t.map(function(t){var a=function(t){return i[t].BYTES_PER_ELEMENT}(t.type),s=n=r(n,Math.max(e,a)),u=t.components||1;return o=Math.max(o,a),n+=a*u,{name:t.name,type:t.type,components:u,offset:s}}),size:r(n,Math.max(o,e)),alignment:e}}},{}],272:[function(t,e,n){"use strict";e.exports=function(t,e){var n=!1,r=0,i=function(){r=0,n&&(t(),r=setTimeout(i,e),n=!1)};return function(){return n=!0,r||i(),r}}},{}],273:[function(t,e,n){"use strict";function r(t,e){if(t.row>e.row){var n=t;t=e,e=n}return{x0:t.column,y0:t.row,x1:e.column,y1:e.row,dx:e.column-t.column,dy:e.row-t.row}}function i(t,e,n,r,i){var o=Math.max(n,Math.floor(e.y0)),a=Math.min(r,Math.ceil(e.y1));if(t.x0===e.x0&&t.y0===e.y0?t.x0+e.dy/t.dy*t.dx<e.x1:t.x1-e.dy/t.dy*t.dx<e.x0){var s=t;t=e,e=s}for(var u=t.dx/t.dy,l=e.dx/e.dy,c=t.dx>0,h=e.dx<0,p=o;p<a;p++){var f=u*Math.max(0,Math.min(t.dy,p+c-t.y0))+t.x0,d=l*Math.max(0,Math.min(e.dy,p+h-e.y0))+e.x0;i(Math.floor(d),Math.ceil(f),p)}}function o(t,e,n,o,a,s){var u,l=r(t,e),c=r(e,n),h=r(n,t);l.dy>c.dy&&(u=l,l=c,c=u),l.dy>h.dy&&(u=l,l=h,h=u),c.dy>h.dy&&(u=c,c=h,h=u),l.dy&&i(h,l,o,a,s),c.dy&&i(h,c,o,a,s)}t("../geo/coordinate");var a=t("../source/tile_id").OverscaledTileID;e.exports=function(t,e,n,r){function i(e,i,o){var l,c,h;if(o>=0&&o<=s)for(l=e;l<i;l++)0!==(c=Math.floor(l/s))&&!0!==r||(h=new a(n,c,t,(l%s+s)%s,o),u[h.key]=h)}void 0===r&&(r=!0);var s=1<<t,u={};return o(e[0],e[1],e[2],0,s,i),o(e[2],e[3],e[0],0,s,i),Object.keys(u).map(function(t){return u[t]})}},{"../geo/coordinate":61,"../source/tile_id":114}],274:[function(t,e,n){"use strict";e.exports=function(t,e){return e.replace(/{([^{}]+)}/g,function(e,n){return n in t?String(t[n]):""})}},{}],275:[function(t,e,n){"use strict";var r=t("@mapbox/unitbezier"),i=t("../geo/coordinate");t("@mapbox/point-geometry"),n.easeCubicInOut=function(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)},n.bezier=function(t,e,n,i){var o=new r(t,e,n,i);return function(t){return o.solve(t)}},n.ease=n.bezier(.25,.1,.25,1),n.clamp=function(t,e,n){return Math.min(n,Math.max(e,t))},n.wrap=function(t,e,n){var r=n-e,i=((t-e)%r+r)%r+e;return i===e?n:i},n.asyncAll=function(t,e,n){if(!t.length)return n(null,[]);var r=t.length,i=new Array(t.length),o=null;t.forEach(function(t,a){e(t,function(t,e){t&&(o=t),i[a]=e,0==--r&&n(o,i)})})},n.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},n.keysDifference=function(t,e){var n=[];for(var r in t)r in e||n.push(r);return n},n.extend=function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];for(var r=0,i=e;r<i.length;r+=1){var o=i[r];for(var a in o)t[a]=o[a]}return t},n.pick=function(t,e){for(var n={},r=0;r<e.length;r++){var i=e[r];i in t&&(n[i]=t[i])}return n};var o=1;n.uniqueId=function(){return o++},n.bindAll=function(t,e){t.forEach(function(t){e[t]&&(e[t]=e[t].bind(e))})},n.getCoordinatesCenter=function(t){for(var e=1/0,n=1/0,r=-1/0,o=-1/0,a=0;a<t.length;a++)e=Math.min(e,t[a].column),n=Math.min(n,t[a].row),r=Math.max(r,t[a].column),o=Math.max(o,t[a].row);var s=Math.max(r-e,o-n),u=Math.max(0,Math.floor(-Math.log(s)/Math.LN2));return new i((e+r)/2,(n+o)/2,0).zoomTo(u)},n.endsWith=function(t,e){return-1!==t.indexOf(e,t.length-e.length)},n.mapObject=function(t,e,n){var r={};for(var i in t)r[i]=e.call(n||this,t[i],i,t);return r},n.filterObject=function(t,e,n){var r={};for(var i in t)e.call(n||this,t[i],i,t)&&(r[i]=t[i]);return r},n.deepEqual=t("../style-spec/util/deep_equal"),n.clone=function(t){return Array.isArray(t)?t.map(n.clone):"object"==typeof t&&t?n.mapObject(t,n.clone):t},n.arraysIntersect=function(t,e){for(var n=0;n<t.length;n++)if(e.indexOf(t[n])>=0)return!0;return!1};var a={};n.warnOnce=function(t){a[t]||("undefined"!=typeof console&&console.warn(t),a[t]=!0)},n.isCounterClockwise=function(t,e,n){return(n.y-t.y)*(e.x-t.x)>(e.y-t.y)*(n.x-t.x)},n.calculateSignedArea=function(t){for(var e=0,n=0,r=t.length,i=r-1,o=void 0,a=void 0;n<r;i=n++)e+=((a=t[i]).x-(o=t[n]).x)*(o.y+a.y);return e},n.isClosedPolygon=function(t){if(t.length<4)return!1;var e=t[0],r=t[t.length-1];return!(Math.abs(e.x-r.x)>0||Math.abs(e.y-r.y)>0)&&Math.abs(n.calculateSignedArea(t))>.01},n.sphericalToCartesian=function(t){var e=t[0],n=t[1],r=t[2];return n+=90,n*=Math.PI/180,r*=Math.PI/180,{x:e*Math.cos(n)*Math.sin(r),y:e*Math.sin(n)*Math.sin(r),z:e*Math.cos(r)}},n.parseCacheControl=function(t){var e={};if(t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(t,n,r,i){var o=r||i;return e[n]=!o||o.toLowerCase(),""}),e["max-age"]){var n=parseInt(e["max-age"],10);isNaN(n)?delete e["max-age"]:e["max-age"]=n}return e}},{"../geo/coordinate":61,"../style-spec/util/deep_equal":155,"@mapbox/point-geometry":4,"@mapbox/unitbezier":7}],276:[function(t,e,n){"use strict";var r=function(t,e,n,r){this.type="Feature",this._vectorTileFeature=t,t._z=e,t._x=n,t._y=r,this.properties=t.properties,null!=t.id&&(this.id=t.id)},i={geometry:{}};i.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},i.geometry.set=function(t){this._geometry=t},r.prototype.toJSON=function(){var t={geometry:this.geometry};for(var e in this)"_geometry"!==e&&"_vectorTileFeature"!==e&&(t[e]=this[e]);return t},Object.defineProperties(r.prototype,i),e.exports=r},{}],277:[function(t,e,n){"use strict";var r=t("./script_detection");e.exports=function(t){for(var n="",i=0;i<t.length;i++){var o=t.charCodeAt(i+1)||null,a=t.charCodeAt(i-1)||null;o&&r.charHasRotatedVerticalOrientation(o)&&!e.exports.lookup[t[i+1]]||a&&r.charHasRotatedVerticalOrientation(a)&&!e.exports.lookup[t[i-1]]||!e.exports.lookup[t[i]]?n+=t[i]:n+=e.exports.lookup[t[i]]}return n},e.exports.lookup={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"}},{"./script_detection":269}],278:[function(t,e,n){"use strict";function r(t,e,n){void 0===n&&(n={}),Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),m[t]={klass:e,omit:n.omit||[],shallow:n.shallow||[]}}var i=t("grid-index"),o=t("../style-spec/util/color"),a=t("../style-spec/expression"),s=a.StylePropertyFunction,u=a.StyleExpression,l=a.StyleExpressionWithErrorHandling,c=a.ZoomDependentExpression,h=a.ZoomConstantExpression,p=t("../style-spec/expression/compound_expression").CompoundExpression,f=t("../style-spec/expression/definitions"),d=t("./window").ImageData,m={};for(var g in r("Object",Object),i.serialize=function(t,e){var n=t.toArrayBuffer();return e&&e.push(n),n},i.deserialize=function(t){return new i(t)},r("Grid",i),r("Color",o),r("StylePropertyFunction",s),r("StyleExpression",u,{omit:["_evaluator"]}),r("StyleExpressionWithErrorHandling",l,{omit:["_evaluator"]}),r("ZoomDependentExpression",c),r("ZoomConstantExpression",h),r("CompoundExpression",p,{omit:["_evaluate"]}),f)f[g]._classRegistryKey||r("Expression_"+g,f[g]);e.exports={register:r,serialize:function t(e,n){if(null===e||void 0===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(e instanceof ArrayBuffer)return n&&n.push(e),e;if(ArrayBuffer.isView(e)){var r=e;return n&&n.push(r.buffer),r}if(e instanceof d)return n&&n.push(e.data.buffer),e;if(Array.isArray(e)){for(var i=[],o=0,a=e;o<a.length;o+=1)i.push(t(a[o],n));return i}if("object"==typeof e){var s=e.constructor,u=s._classRegistryKey;if(!u)throw new Error("can't serialize object of unregistered class");var l={};if(s.serialize)l._serialized=s.serialize(e,n);else for(var c in e)if(e.hasOwnProperty(c)&&!(m[u].omit.indexOf(c)>=0)){var h=e[c];l[c]=m[u].shallow.indexOf(c)>=0?h:t(h,n)}return{name:u,properties:l}}throw new Error("can't serialize object of type "+typeof e)},deserialize:function t(e){if(null===e||void 0===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||e instanceof ArrayBuffer||ArrayBuffer.isView(e)||e instanceof d)return e;if(Array.isArray(e))return e.map(function(e){return t(e)});if("object"==typeof e){var n=e.name,r=e.properties;if(!n)throw new Error("can't deserialize object of anonymous class");var i=m[n].klass;if(!i)throw new Error("can't deserialize unregistered class "+n);if(i.deserialize)return i.deserialize(r._serialized);for(var o=Object.create(i.prototype),a=0,s=Object.keys(r);a<s.length;a+=1){var u=s[a];o[u]=m[n].shallow.indexOf(u)>=0?r[u]:t(r[u])}return o}throw new Error("can't deserialize object of type "+typeof e)}}},{"../style-spec/expression":139,"../style-spec/expression/compound_expression":123,"../style-spec/expression/definitions":131,"../style-spec/util/color":153,"./window":254,"grid-index":24}],279:[function(t,e,n){"use strict";var r=t("./web_worker"),i=function(){this.active={}};i.prototype.acquire=function(e){if(!this.workers){var n=t("../").workerCount;for(this.workers=[];this.workers.length<n;)this.workers.push(new r)}return this.active[e]=!0,this.workers.slice()},i.prototype.release=function(t){delete this.active[t],0===Object.keys(this.active).length&&(this.workers.forEach(function(t){t.terminate()}),this.workers=null)},e.exports=i},{"../":73,"./web_worker":253}]},{},[73])(73)},t.exports=i()},NGRF:function(t,e,n){"use strict";e.a=function(t){return null!=t&&"object"==typeof t}},NdV9:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("AP4T"),i=n("fgj+");r.Observable.from=i.a},NePw:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r={e:{}}},Oryw:function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r=n("6Xbx"),i=n("AP4T"),o=n("8Ut3"),a=n("Ecq+"),s=n("3iOE"),u=function(t){function e(e,n){t.call(this),this.array=e,this.scheduler=n,n||1!==e.length||(this._isScalar=!0,this.value=e[0])}return Object(r.c)(e,t),e.create=function(t,n){return new e(t,n)},e.of=function(){for(var t=[],n=0;n<arguments.length;n++)t[n-0]=arguments[n];var r=t[t.length-1];Object(s.a)(r)?t.pop():r=null;var i=t.length;return i>1?new e(t,r):1===i?new o.a(t[0],r):new a.a(r)},e.dispatch=function(t){var e=t.array,n=t.index,r=t.subscriber;n>=t.count?r.complete():(r.next(e[n]),r.closed||(t.index=n+1,this.schedule(t)))},e.prototype._subscribe=function(t){var n=this.array,r=n.length,i=this.scheduler;if(i)return i.schedule(e.dispatch,0,{array:n,index:0,count:r,subscriber:t});for(var o=0;o<r&&!t.closed;o++)t.next(n[o]);t.complete()},e}(i.Observable)},PAZ8:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("AP4T"),i=function(){function t(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}return t.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},t.prototype.do=function(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}},t.prototype.accept=function(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)},t.prototype.toObservable=function(){switch(this.kind){case"N":return r.Observable.of(this.value);case"E":return r.Observable.throw(this.error);case"C":return r.Observable.empty()}throw new Error("unexpected notification kind value")},t.createNext=function(e){return"undefined"!=typeof e?new t("N",e):t.undefinedValueNotification},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}()},R1KX:function(t,e,n){"use strict";(function(t,r){var i,o=n("psmC");i="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof t?t:r;var a=Object(o.a)(i);e.a=a}).call(e,n("fRUx"),n("qhgb")(t))},RSzd:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("AP4T"),i=n("5jKg");r.Observable.prototype.switchMap=function(t,e){return Object(i.a)(t,e)(this)}},SBUM:function(t,e,n){"use strict";e.invariant=function(t,e,n){if(!t){var r=e;throw n&&(r=-1!==e.indexOf("%s")?e.replace("%s",n):r=e+": "+n),new Error(r)}}},TO51:function(t,e,n){"use strict";var r=n("6Xbx"),i=n("AP4T"),o=n("E9/g"),a=n("qLnt"),s=n("Upor"),u=function(t){function e(e,n){t.call(this),this.subject=e,this.subscriber=n,this.closed=!1}return Object(r.c)(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},e}(a.a),l=n("V7AE");n.d(e,"b",function(){return c}),n.d(e,"a",function(){return h});var c=function(t){function e(e){t.call(this,e),this.destination=e}return Object(r.c)(e,t),e}(o.a),h=function(t){function e(){t.call(this),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}return Object(r.c)(e,t),e.prototype[l.a]=function(){return new c(this)},e.prototype.lift=function(t){var e=new p(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new s.a;if(!this.isStopped)for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].next(t)},e.prototype.error=function(t){if(this.closed)throw new s.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new s.a;this.isStopped=!0;for(var t=this.observers,e=t.length,n=t.slice(),r=0;r<e;r++)n[r].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new s.a;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new s.a;return this.hasError?(t.error(this.thrownError),a.a.EMPTY):this.isStopped?(t.complete(),a.a.EMPTY):(this.observers.push(t),new u(this,t))},e.prototype.asObservable=function(){var t=new i.Observable;return t.source=this,t},e.create=function(t,e){return new p(t,e)},e}(i.Observable),p=function(t){function e(e,n){t.call(this),this.destination=e,this.source=n}return Object(r.c)(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):a.a.EMPTY},e}(h)},URbD:function(t,e,n){"use strict";e.a=function(){return Object(r.a)()(this)};var r=n("eIqN")},Upor:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("6Xbx"),i=function(t){function e(){var e=t.call(this,"object unsubscribed");this.name=e.name="ObjectUnsubscribedError",this.stack=e.stack,this.message=e.message}return Object(r.c)(e,t),e}(Error)},V7AE:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("xIGM").a.Symbol,i="function"==typeof r&&"function"==typeof r.for?r.for("rxSubscriber"):"@@rxSubscriber"},Wi6i:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("AP4T"),i=n("6S6c");r.Observable.prototype.filter=i.a},X3fp:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(t){var e=t.Symbol;if("function"==typeof e)return e.iterator||(e.iterator=e("iterator polyfill")),e.iterator;var n=t.Set;if(n&&"function"==typeof(new n)["@@iterator"])return"@@iterator";var r=t.Map;if(r)for(var i=Object.getOwnPropertyNames(r.prototype),o=0;o<i.length;++o){var a=i[o];if("entries"!==a&&"size"!==a&&r.prototype[a]===r.prototype.entries)return a}return"@@iterator"}(n("xIGM").a)},YuZA:function(t,e){function n(t){return Promise.resolve().then(function(){throw new Error("Cannot find module '"+t+"'.")})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="YuZA"},bywS:function(t,e,n){"use strict";var r=n("wP3s");function i(t){return t}e.a=function(t){return void 0===t&&(t=Number.POSITIVE_INFINITY),Object(r.a)(i,null,t)}},cDNt:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("LMZF"),i=n("6KUg"),o="EDIT_FILTER_TEXT",a="SELECT_FOUNTAIN",s="HIGHLIGHT_FOUNTAIN",u="SELECT_FOUNTAIN_SUCCESS",l="DESELECT_FOUNTAIN",c="TOGGLE_LIST",h="SET_USER_LOCATION",p="RETURN_TO_ROOT",f="UPDATE_FILTER_CATEGORIES",d=n("hZMJ"),m={filterText:"",filterCategories:{onlyOlderThan:null,onlyHistoric:!1,onlySpringwater:!1,filterText:""},showList:!1,city:"zurich",mode:"map",fountainId:"",fountainSelected:{type:"Feature",geometry:{type:"Point",coordinates:[0,0]},properties:{nummer:0,bezeichnung:"default fountain"}},lang:"en",userLocation:[8.542197,47.366628],fountainHighlighted:null};function g(t,e){switch(e.type){case o:return Object(d.tassign)(t,{filterText:e.text});case s:return null!==t.fountainSelected&&null!==e.payload&&t.fountainSelected.properties.nummer==e.payload.properties.nummer?Object(d.tassign)(t,{fountainHighlighted:null}):Object(d.tassign)(t,{fountainHighlighted:e.payload});case a:return Object(d.tassign)(t,{fountainSelected:e.payload,fountainHighlighted:null,showList:!1,mode:"details"});case u:return Object(d.tassign)(t,{fountainSelected:e.payload,mode:"details"});case l:return Object(d.tassign)(t,{mode:"map"});case h:return Object(d.tassign)(t,{userLocation:e.payload});case c:return Object(d.tassign)(t,{showList:e.payload});case p:return Object(d.tassign)(t,{showList:!1,mode:"map"});case f:return Object(d.tassign)(t,{filterCategories:e.payload});default:return t}}var y=function(){return function(t,e){var n=Object(r.isDevMode)()?[e.enhancer()]:[];t.configureStore(g,m,[],n)}}(),v=n("6Xbx"),_=function(){function t(t,e,n){this.ngRedux=n,this.title="app",this.mobileQuery=e.matchMedia("(max-width: 900px)"),this._mobileQueryListener=function(){return t.detectChanges()},this.mobileQuery.addListener(this._mobileQueryListener)}return t.prototype.ngOnInit=function(){var t=this;this.showList.subscribe(function(e){t.mobileQuery.matches&&(e?t.listDrawer.open({openedVia:"mouse"}):t.listDrawer.close())}),setTimeout(function(){t.mobileQuery.matches||t.listDrawer.open()},500)},t.prototype.closeList=function(){this.ngRedux.dispatch({type:c,payload:!1})},t.prototype.toggleDetails=function(t){t?this.detailsDrawer.open():this.detailsDrawer.close()},t.prototype.ngOnDestroy=function(){this.mobileQuery.removeListener(this._mobileQueryListener)},Object(v.b)([Object(i.select)(),Object(v.d)("design:type",Object)],t.prototype,"mode",void 0),Object(v.b)([Object(i.select)(),Object(v.d)("design:type",Object)],t.prototype,"showList",void 0),t}(),b=function(){},x=function(){function t(e){var n=this;this._subject=new r.EventEmitter,this._platformStrategy=e;var i=this._platformStrategy.getBaseHref();this._baseHref=t.stripTrailingSlash(w(i)),this._platformStrategy.onPopState(function(t){n._subject.emit({url:n.path(!0),pop:!0,type:t.type})})}return t.prototype.path=function(t){return void 0===t&&(t=!1),this.normalize(this._platformStrategy.path(t))},t.prototype.isCurrentPathEqualTo=function(e,n){return void 0===n&&(n=""),this.path()==this.normalize(e+t.normalizeQueryParams(n))},t.prototype.normalize=function(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,w(e)))},t.prototype.prepareExternalUrl=function(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)},t.prototype.go=function(t,e){void 0===e&&(e=""),this._platformStrategy.pushState(null,"",t,e)},t.prototype.replaceState=function(t,e){void 0===e&&(e=""),this._platformStrategy.replaceState(null,"",t,e)},t.prototype.forward=function(){this._platformStrategy.forward()},t.prototype.back=function(){this._platformStrategy.back()},t.prototype.subscribe=function(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})},t.normalizeQueryParams=function(t){return t&&"?"!==t[0]?"?"+t:t},t.joinWithSlash=function(t,e){if(0==t.length)return e;if(0==e.length)return t;var n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e},t.stripTrailingSlash=function(t){var e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)},t}();function w(t){return t.replace(/\/index.html$/,"")}var E=["en",[["a","p"],["AM","PM"]],[["AM","PM"],,],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",,"{1} 'at' {0}"],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"$","US Dollar",function(t){var e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}],C={},S=function(){var t={Decimal:0,Percent:1,Currency:2,Scientific:3};return t[t.Decimal]="Decimal",t[t.Percent]="Percent",t[t.Currency]="Currency",t[t.Scientific]="Scientific",t}(),I=function(){var t={Zero:0,One:1,Two:2,Few:3,Many:4,Other:5};return t[t.Zero]="Zero",t[t.One]="One",t[t.Two]="Two",t[t.Few]="Few",t[t.Many]="Many",t[t.Other]="Other",t}(),T=function(){var t={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};return t[t.Decimal]="Decimal",t[t.Group]="Group",t[t.List]="List",t[t.PercentSign]="PercentSign",t[t.PlusSign]="PlusSign",t[t.MinusSign]="MinusSign",t[t.Exponential]="Exponential",t[t.SuperscriptingExponent]="SuperscriptingExponent",t[t.PerMille]="PerMille",t[t.Infinity]="Infinity",t[t.NaN]="NaN",t[t.TimeSeparator]="TimeSeparator",t[t.CurrencyDecimal]="CurrencyDecimal",t[t.CurrencyGroup]="CurrencyGroup",t}();function k(t,e){var n=O(t),r=n[13][e];if("undefined"==typeof r){if(e===T.CurrencyDecimal)return n[13][T.Decimal];if(e===T.CurrencyGroup)return n[13][T.Group]}return r}function O(t){var e=t.toLowerCase().replace(/_/g,"-"),n=C[e];if(n)return n;var r=e.split("-")[0];if(n=C[r])return n;if("en"===r)return E;throw new Error('Missing locale data for the locale "'+t+'".')}var P=new r.InjectionToken("UseV4Plurals"),A=function(){},M=function(t){function e(e,n){var r=t.call(this)||this;return r.locale=e,r.deprecatedPluralFn=n,r}return Object(v.c)(e,t),e.prototype.getPluralCategory=function(t,e){switch(this.deprecatedPluralFn?this.deprecatedPluralFn(e||this.locale,t):function(t){return O(t)[17]}(e||this.locale)(t)){case I.Zero:return"zero";case I.One:return"one";case I.Two:return"two";case I.Few:return"few";case I.Many:return"many";default:return"other"}},e}(A);function R(t,e){e=encodeURIComponent(e);for(var n=0,r=t.split(";");n<r.length;n++){var i=r[n],o=i.indexOf("="),a=-1==o?[i,""]:[i.slice(0,o),i.slice(o+1)],s=a[1];if(a[0].trim()===e)return decodeURIComponent(s)}return null}var L=function(){function t(t,e,n,r){this._iterableDiffers=t,this._keyValueDiffers=e,this._ngEl=n,this._renderer=r,this._initialClasses=[]}return Object.defineProperty(t.prototype,"klass",{set:function(t){this._applyInitialClasses(!0),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyInitialClasses(!1),this._applyClasses(this._rawClass,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngClass",{set:function(t){this._cleanupClasses(this._rawClass),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(Object(r["\u0275isListLikeIterable"])(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())},enumerable:!0,configurable:!0}),t.prototype.ngDoCheck=function(){if(this._iterableDiffer){var t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){var e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}},t.prototype._cleanupClasses=function(t){this._applyClasses(t,!0),this._applyInitialClasses(!1)},t.prototype._applyKeyValueChanges=function(t){var e=this;t.forEachAddedItem(function(t){return e._toggleClass(t.key,t.currentValue)}),t.forEachChangedItem(function(t){return e._toggleClass(t.key,t.currentValue)}),t.forEachRemovedItem(function(t){t.previousValue&&e._toggleClass(t.key,!1)})},t.prototype._applyIterableChanges=function(t){var e=this;t.forEachAddedItem(function(t){if("string"!=typeof t.item)throw new Error("NgClass can only toggle CSS classes expressed as strings, got "+Object(r["\u0275stringify"])(t.item));e._toggleClass(t.item,!0)}),t.forEachRemovedItem(function(t){return e._toggleClass(t.item,!1)})},t.prototype._applyInitialClasses=function(t){var e=this;this._initialClasses.forEach(function(n){return e._toggleClass(n,!t)})},t.prototype._applyClasses=function(t,e){var n=this;t&&(Array.isArray(t)||t instanceof Set?t.forEach(function(t){return n._toggleClass(t,!e)}):Object.keys(t).forEach(function(r){null!=t[r]&&n._toggleClass(r,!e)}))},t.prototype._toggleClass=function(t,e){var n=this;(t=t.trim())&&t.split(/\s+/g).forEach(function(t){e?n._renderer.addClass(n._ngEl.nativeElement,t):n._renderer.removeClass(n._ngEl.nativeElement,t)})},t}(),N=function(){function t(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}return Object.defineProperty(t.prototype,"first",{get:function(){return 0===this.index},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"last",{get:function(){return this.index===this.count-1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"even",{get:function(){return this.index%2==0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"odd",{get:function(){return!this.even},enumerable:!0,configurable:!0}),t}(),D=function(){function t(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._differ=null}return Object.defineProperty(t.prototype,"ngForTrackBy",{get:function(){return this._trackByFn},set:function(t){Object(r.isDevMode)()&&null!=t&&"function"!=typeof t&&console&&console.warn&&console.warn("trackBy must be a function, but received "+JSON.stringify(t)+". See https://angular.io/docs/ts/latest/api/common/index/NgFor-directive.html#!#change-propagation for more information."),this._trackByFn=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngForTemplate",{set:function(t){t&&(this._template=t)},enumerable:!0,configurable:!0}),t.prototype.ngOnChanges=function(t){if("ngForOf"in t){var e=t.ngForOf.currentValue;if(!this._differ&&e)try{this._differ=this._differs.find(e).create(this.ngForTrackBy)}catch(t){throw new Error("Cannot find a differ supporting object '"+e+"' of type '"+((n=e).name||typeof n)+"'. NgFor only supports binding to Iterables such as Arrays.")}}var n},t.prototype.ngDoCheck=function(){if(this._differ){var t=this._differ.diff(this.ngForOf);t&&this._applyChanges(t)}},t.prototype._applyChanges=function(t){var e=this,n=[];t.forEachOperation(function(t,r,i){if(null==t.previousIndex){var o=e._viewContainer.createEmbeddedView(e._template,new N(null,e.ngForOf,-1,-1),i),a=new F(t,o);n.push(a)}else null==i?e._viewContainer.remove(r):(o=e._viewContainer.get(r),e._viewContainer.move(o,i),a=new F(t,o),n.push(a))});for(var r=0;r<n.length;r++)this._perViewChange(n[r].view,n[r].record);r=0;for(var i=this._viewContainer.length;r<i;r++){var o=this._viewContainer.get(r);o.context.index=r,o.context.count=i}t.forEachIdentityChange(function(t){e._viewContainer.get(t.currentIndex).context.$implicit=t.item})},t.prototype._perViewChange=function(t,e){t.context.$implicit=e.item},t}(),F=function(t,e){this.record=t,this.view=e},z=function(){function t(t,e){this._viewContainer=t,this._context=new j,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}return Object.defineProperty(t.prototype,"ngIf",{set:function(t){this._context.$implicit=this._context.ngIf=t,this._updateView()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngIfThen",{set:function(t){this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngIfElse",{set:function(t){this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()},enumerable:!0,configurable:!0}),t.prototype._updateView=function(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))},t}(),j=function(){this.$implicit=null,this.ngIf=null},B=function(){function t(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}return t.prototype.create=function(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)},t.prototype.destroy=function(){this._created=!1,this._viewContainerRef.clear()},t.prototype.enforceState=function(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()},t}(),V=function(){function t(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}return Object.defineProperty(t.prototype,"ngSwitch",{set:function(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)},enumerable:!0,configurable:!0}),t.prototype._addCase=function(){return this._caseCount++},t.prototype._addDefault=function(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)},t.prototype._matchCase=function(t){var e=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||e,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),e},t.prototype._updateDefaultCases=function(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(var e=0;e<this._defaultViews.length;e++)this._defaultViews[e].enforceState(t)}},t}(),q=function(){function t(t,e,n){this.ngSwitch=n,n._addCase(),this._view=new B(t,e)}return t.prototype.ngDoCheck=function(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))},t}(),U=function(){return function(t,e,n){n._addDefault(new B(t,e))}}(),G=function(){function t(t,e,n){this._differs=t,this._ngEl=e,this._renderer=n}return Object.defineProperty(t.prototype,"ngStyle",{set:function(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())},enumerable:!0,configurable:!0}),t.prototype.ngDoCheck=function(){if(this._differ){var t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}},t.prototype._applyChanges=function(t){var e=this;t.forEachRemovedItem(function(t){return e._setStyle(t.key,null)}),t.forEachAddedItem(function(t){return e._setStyle(t.key,t.currentValue)}),t.forEachChangedItem(function(t){return e._setStyle(t.key,t.currentValue)})},t.prototype._setStyle=function(t,e){var n=t.split("."),r=n[0],i=n[1];null!=(e=null!=e&&i?""+e+i:e)?this._renderer.setStyle(this._ngEl.nativeElement,r,e):this._renderer.removeStyle(this._ngEl.nativeElement,r)},t}();function X(t,e){return Error("InvalidPipeArgument: '"+e+"' for pipe '"+Object(r["\u0275stringify"])(t)+"'")}var H=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function Y(t){var e=parseInt(t);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+t);return e}var Z,W,K=function(){function t(){}return t.prototype.createSubscription=function(t,e){return t.subscribe({next:e,error:function(t){throw t}})},t.prototype.dispose=function(t){t.unsubscribe()},t.prototype.onDestroy=function(t){t.unsubscribe()},t}(),J=new(function(){function t(){}return t.prototype.createSubscription=function(t,e){return t.then(e,function(t){throw t})},t.prototype.dispose=function(t){},t.prototype.onDestroy=function(t){},t}()),Q=new K,$=function(){function t(t){this._ref=t,this._latestValue=null,this._latestReturnedValue=null,this._subscription=null,this._obj=null,this._strategy=null}return t.prototype.ngOnDestroy=function(){this._subscription&&this._dispose()},t.prototype.transform=function(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue===this._latestReturnedValue?this._latestReturnedValue:(this._latestReturnedValue=this._latestValue,r.WrappedValue.wrap(this._latestValue)):(t&&this._subscribe(t),this._latestReturnedValue=this._latestValue,this._latestValue)},t.prototype._subscribe=function(t){var e=this;this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,function(n){return e._updateLatestValue(t,n)})},t.prototype._selectStrategy=function(e){if(Object(r["\u0275isPromise"])(e))return J;if(Object(r["\u0275isObservable"])(e))return Q;throw X(t,e)},t.prototype._dispose=function(){this._strategy.dispose(this._subscription),this._latestValue=null,this._latestReturnedValue=null,this._subscription=null,this._obj=null},t.prototype._updateLatestValue=function(t,e){t===this._obj&&(this._latestValue=e,this._ref.markForCheck())},t}(),tt=function(){function t(t){this._locale=t}return t.prototype.transform=function(e,n,r){if(function(t){return null==t||""===t||t!=t}(e))return null;var i=function(t,e,n,r,i){void 0===i&&(i=null);var o,a={str:null},s=function(t,e){return O(t)[14][e]}(e,n);if("string"!=typeof t||isNaN(+t-parseFloat(t))){if("number"!=typeof t)return a.error=t+" is not a number",a;o=t}else o=+t;var u=function(t,e){void 0===e&&(e="-");var n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=t.split(";"),i=r[0],o=r[1],a=-1!==i.indexOf(".")?i.split("."):[i.substring(0,i.lastIndexOf("0")+1),i.substring(i.lastIndexOf("0")+1)],s=a[0],u=a[1]||"";n.posPre=s.substr(0,s.indexOf("#"));for(var l=0;l<u.length;l++){var c=u.charAt(l);"0"===c?n.minFrac=n.maxFrac=l+1:"#"===c?n.maxFrac=l+1:n.posSuf+=c}var h=s.split(",");if(n.gSize=h[1]?h[1].length:0,n.lgSize=h[2]||h[1]?(h[2]||h[1]).length:0,o){var p=i.length-n.posPre.length-n.posSuf.length,f=o.indexOf("#");n.negPre=o.substr(0,f).replace(/'/g,""),n.negSuf=o.substr(f+p).replace(/'/g,"")}else n.negPre=e+n.posPre,n.negSuf=n.posSuf;return n}(s,k(e,T.MinusSign)),l="",c=!1;if(isFinite(o)){var h=function(t){var e,n,r,i,o,a=Math.abs(t)+"",s=0;for((n=a.indexOf("."))>-1&&(a=a.replace(".","")),(r=a.search(/e/i))>0?(n<0&&(n=r),n+=+a.slice(r+1),a=a.substring(0,r)):n<0&&(n=a.length),r=0;"0"===a.charAt(r);r++);if(r===(o=a.length))e=[0],n=1;else{for(o--;"0"===a.charAt(o);)o--;for(n-=r,e=[],i=0;r<=o;r++,i++)e[i]=+a.charAt(r)}return n>22&&(e=e.splice(0,21),s=n-1,n=1),{digits:e,exponent:s,integerLen:n}}(o);n===S.Percent&&(h=function(t){if(0===t.digits[0])return t;var e=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(0===e?t.digits.push(0,0):1===e&&t.digits.push(0),t.integerLen+=2),t}(h));var p=u.minInt,f=u.minFrac,d=u.maxFrac;if(r){var m=r.match(H);if(null===m)return a.error=r+" is not a valid digit info",a;var g=m[1],y=m[3],v=m[5];null!=g&&(p=Y(g)),null!=y&&(f=Y(y)),null!=v?d=Y(v):null!=y&&f>d&&(d=f)}!function(t,e,n){if(e>n)throw new Error("The minimum number of digits after fraction ("+e+") is higher than the maximum ("+n+").");var r=t.digits,i=r.length-t.integerLen,o=Math.min(Math.max(e,i),n),a=o+t.integerLen,s=r[a];if(a>0){r.splice(Math.max(t.integerLen,a));for(var u=a;u<r.length;u++)r[u]=0}else{i=Math.max(0,i),t.integerLen=1,r.length=Math.max(1,a=o+1),r[0]=0;for(var l=1;l<a;l++)r[l]=0}if(s>=5)if(a-1<0){for(var c=0;c>a;c--)r.unshift(0),t.integerLen++;r.unshift(1),t.integerLen++}else r[a-1]++;for(;i<Math.max(0,o);i++)r.push(0);var h=0!==o,p=e+t.integerLen,f=r.reduceRight(function(t,e,n,r){return r[n]=(e+=t)<10?e:e-10,h&&(0===r[n]&&n>=p?r.pop():h=!1),e>=10?1:0},0);f&&(r.unshift(f),t.integerLen++)}(h,f,d);var _=h.digits,b=h.integerLen,x=h.exponent,w=[];for(c=_.every(function(t){return!t});b<p;b++)_.unshift(0);for(;b<0;b++)_.unshift(0);b>0?w=_.splice(b,_.length):(w=_,_=[0]);var E=[];for(_.length>=u.lgSize&&E.unshift(_.splice(-u.lgSize,_.length).join(""));_.length>u.gSize;)E.unshift(_.splice(-u.gSize,_.length).join(""));_.length&&E.unshift(_.join("")),l=E.join(k(e,i?T.CurrencyGroup:T.Group)),w.length&&(l+=k(e,i?T.CurrencyDecimal:T.Decimal)+w.join("")),x&&(l+=k(e,T.Exponential)+"+"+x)}else l=k(e,T.Infinity);return l=o<0&&!c?u.negPre+l+u.negSuf:u.posPre+l+u.posSuf,n===S.Currency&&null!==i?(a.str=l.replace("\xa4",i).replace("\xa4",""),a):n===S.Percent?(a.str=l.replace(new RegExp("%","g"),k(e,T.PercentSign)),a):(a.str=l,a)}(e,r=r||this._locale,S.Decimal,n),o=i.str,a=i.error;if(a)throw X(t,a);return o},t}(),et=function(){function t(){}return t.prototype.transform=function(e,n,r){if(null==e)return e;if(!this.supports(e))throw X(t,e);return e.slice(n,r)},t.prototype.supports=function(t){return"string"==typeof t||Array.isArray(t)},t}(),nt=function(){},rt=new r.InjectionToken("DocumentToken"),it="undefined"!=typeof Intl&&Intl.v8BreakIterator,ot=function(){return function(){this.isBrowser="object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!it)&&!!CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}();function at(){if(null==Z&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){return Z=!0}}))}finally{Z=Z||!1}return Z}var st=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function ut(){if(W)return W;if("object"!=typeof document||!document)return W=new Set(st);var t=document.createElement("input");return W=new Set(st.filter(function(e){return t.setAttribute("type",e),t.type===e}))}var lt=function(){},ct=n("TO51"),ht=n("AP4T"),pt=n("Oryw"),ft=pt.a.of,dt=n("8ofh"),mt=n("B1iP"),gt=n("NePw"),yt=n("qLnt"),vt=Object.prototype.toString,_t=function(t){function e(e,n,r,i){t.call(this),this.sourceObj=e,this.eventName=n,this.selector=r,this.options=i}return Object(v.c)(e,t),e.create=function(t,n,r,i){return Object(mt.a)(r)&&(i=r,r=void 0),new e(t,n,i,r)},e.setupSubscription=function(t,n,r,i,o){var a;if(function(t){return!!t&&"[object NodeList]"===vt.call(t)}(t)||function(t){return!!t&&"[object HTMLCollection]"===vt.call(t)}(t))for(var s=0,u=t.length;s<u;s++)e.setupSubscription(t[s],n,r,i,o);else if(function(t){return!!t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(t)){var l=t;t.addEventListener(n,r,o),a=function(){return l.removeEventListener(n,r)}}else if(function(t){return!!t&&"function"==typeof t.on&&"function"==typeof t.off}(t)){var c=t;t.on(n,r),a=function(){return c.off(n,r)}}else{if(!function(t){return!!t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(t))throw new TypeError("Invalid event target");var h=t;t.addListener(n,r),a=function(){return h.removeListener(n,r)}}i.add(new yt.a(a))},e.prototype._subscribe=function(t){var n=this.selector;e.setupSubscription(this.sourceObj,this.eventName,n?function(){for(var e=[],r=0;r<arguments.length;r++)e[r-0]=arguments[r];var i=Object(dt.a)(n).apply(void 0,e);i===gt.a?t.error(gt.a.e):t.next(i)}:function(e){return t.next(e)},t,this.options)},e}(ht.Observable).create,bt=n("xIGM"),xt=function(t){function e(e,n){t.call(this,e,n),this.scheduler=e,this.work=n,this.pending=!1}return Object(v.c)(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t,this.pending=!0;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this},e.prototype.requestAsyncId=function(t,e,n){return void 0===n&&(n=0),bt.a.setInterval(t.flush.bind(t,this),n)},e.prototype.recycleAsyncId=function(t,e,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return e;bt.a.clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var n=!1,r=void 0;try{this.work(t)}catch(t){n=!0,r=!!t&&t||new Error(t)}if(n)return this.unsubscribe(),r},e.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},e}(function(t){function e(e,n){t.call(this)}return Object(v.c)(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(yt.a)),wt=new(function(t){function e(){t.apply(this,arguments),this.actions=[],this.active=!1,this.scheduled=void 0}return Object(v.c)(e,t),e.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}},e}(function(){function t(e,n){void 0===n&&(n=t.now),this.SchedulerAction=e,this.now=n}return t.prototype.schedule=function(t,e,n){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(n,e)},t.now=Date.now?Date.now:function(){return+new Date},t}()))(xt),Et=n("lI6h"),Ct=n("qgI0"),St=function(){function t(t){this.durationSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new It(t,this.durationSelector))},t}(),It=function(t){function e(e,n){t.call(this,e),this.durationSelector=n,this.hasValue=!1}return Object(v.c)(e,t),e.prototype._next=function(t){if(this.value=t,this.hasValue=!0,!this.throttled){var e=Object(dt.a)(this.durationSelector)(t);if(e===gt.a)this.destination.error(gt.a.e);else{var n=Object(Ct.a)(this,e);n.closed?this.clearThrottle():this.add(this.throttled=n)}}},e.prototype.clearThrottle=function(){var t=this.value,e=this.hasValue,n=this.throttled;n&&(this.remove(n),this.throttled=null,n.unsubscribe()),e&&(this.value=null,this.hasValue=!1,this.destination.next(t))},e.prototype.notifyNext=function(t,e,n,r){this.clearThrottle()},e.prototype.notifyComplete=function(){this.clearThrottle()},e}(Et.a),Tt=n("1j/l"),kt=n("3iOE"),Ot=function(t){function e(e,n,r){var i,o;void 0===e&&(e=0),t.call(this),this.period=-1,this.dueTime=0,i=n,!Object(Tt.a)(i)&&i-parseFloat(i)+1>=0?this.period=Number(n)<1?1:Number(n):Object(kt.a)(n)&&(r=n),Object(kt.a)(r)||(r=wt),this.scheduler=r,this.dueTime=(o=e)instanceof Date&&!isNaN(+o)?+e-this.scheduler.now():e}return Object(v.c)(e,t),e.create=function(t,n,r){return void 0===t&&(t=0),new e(t,n,r)},e.dispatch=function(t){var e=t.index,n=t.period,r=t.subscriber;if(r.next(e),!r.closed){if(-1===n)return r.complete();t.index=e+1,this.schedule(t,n)}},e.prototype._subscribe=function(t){return this.scheduler.schedule(e.dispatch,this.dueTime,{index:0,period:this.period,subscriber:t})},e}(ht.Observable).create;function Pt(t,e){return void 0===e&&(e=wt),n=function(){return Ot(t,e)},function(t){return t.lift(new St(n))};var n}var At=n("LaOa"),Mt=n("2kLc"),Rt=function(){function t(t,e){this._ngZone=t,this._platform=e,this._scrolled=new ct.a,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map}return t.prototype.register=function(t){var e=this,n=t.elementScrolled().subscribe(function(){return e._scrolled.next(t)});this.scrollContainers.set(t,n)},t.prototype.deregister=function(t){var e=this.scrollContainers.get(t);e&&(e.unsubscribe(),this.scrollContainers.delete(t))},t.prototype.scrolled=function(t){var e=this;return void 0===t&&(t=20),this._platform.isBrowser?ht.Observable.create(function(n){e._globalSubscription||e._addGlobalListener();var r=t>0?e._scrolled.pipe(Pt(t)).subscribe(n):e._scrolled.subscribe(n);return e._scrolledCount++,function(){r.unsubscribe(),e._scrolledCount--,e._scrolledCount||e._removeGlobalListener()}}):ft()},t.prototype.ngOnDestroy=function(){var t=this;this._removeGlobalListener(),this.scrollContainers.forEach(function(e,n){return t.deregister(n)})},t.prototype.ancestorScrolled=function(t,e){var n=this.getAncestorScrollContainers(t);return this.scrolled(e).pipe(Object(At.a)(function(t){return!t||n.indexOf(t)>-1}))},t.prototype.getAncestorScrollContainers=function(t){var e=this,n=[];return this.scrollContainers.forEach(function(r,i){e._scrollableContainsElement(i,t)&&n.push(i)}),n},t.prototype._scrollableContainsElement=function(t,e){var n=e.nativeElement,r=t.getElementRef().nativeElement;do{if(n==r)return!0}while(n=n.parentElement);return!1},t.prototype._addGlobalListener=function(){var t=this;this._globalSubscription=this._ngZone.runOutsideAngular(function(){return _t(window.document,"scroll").subscribe(function(){return t._scrolled.next()})})},t.prototype._removeGlobalListener=function(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)},t}();function Lt(t,e,n){return t||new Rt(e,n)}var Nt=function(){function t(t,e,n){var r=this;this._elementRef=t,this._scroll=e,this._ngZone=n,this._elementScrolled=new ct.a,this._scrollListener=function(t){return r._elementScrolled.next(t)}}return t.prototype.ngOnInit=function(){var t=this;this._ngZone.runOutsideAngular(function(){t.getElementRef().nativeElement.addEventListener("scroll",t._scrollListener)}),this._scroll.register(this)},t.prototype.ngOnDestroy=function(){this._scroll.deregister(this),this._scrollListener&&this.getElementRef().nativeElement.removeEventListener("scroll",this._scrollListener)},t.prototype.elementScrolled=function(){return this._elementScrolled.asObservable()},t.prototype.getElementRef=function(){return this._elementRef},t}(),Dt=function(){function t(t,e){var n=this;this._change=t.isBrowser?e.runOutsideAngular(function(){return Object(Mt.a)(_t(window,"resize"),_t(window,"orientationchange"))}):ft(),this._invalidateCache=this.change().subscribe(function(){return n._updateViewportSize()})}return t.prototype.ngOnDestroy=function(){this._invalidateCache.unsubscribe()},t.prototype.getViewportSize=function(){return this._viewportSize||this._updateViewportSize(),{width:this._viewportSize.width,height:this._viewportSize.height}},t.prototype.getViewportRect=function(){var t=this.getViewportScrollPosition(),e=this.getViewportSize(),n=e.width,r=e.height;return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+n,height:r,width:n}},t.prototype.getViewportScrollPosition=function(){var t=document.documentElement.getBoundingClientRect();return{top:-t.top||document.body.scrollTop||window.scrollY||document.documentElement.scrollTop||0,left:-t.left||document.body.scrollLeft||window.scrollX||document.documentElement.scrollLeft||0}},t.prototype.change=function(t){return void 0===t&&(t=20),t>0?this._change.pipe(Pt(t)):this._change},t.prototype._updateViewportSize=function(){this._viewportSize={width:window.innerWidth,height:window.innerHeight}},t}();function Ft(t,e,n){return t||new Dt(e,n)}var zt=function(){},jt=new r.InjectionToken("cdk-dir-doc"),Bt=function(){return function(t){this.value="ltr",this.change=new r.EventEmitter,t&&(this.value=(t.body?t.body.dir:null)||(t.documentElement?t.documentElement.dir:null)||"ltr")}}(),Vt=function(){};function qt(){throw Error("Host already has a portal attached")}var Ut=function(){function t(){}return t.prototype.attach=function(t){return null==t&&function(){throw Error("Attempting to attach a portal to a null PortalOutlet")}(),t.hasAttached()&&qt(),this._attachedHost=t,t.attach(this)},t.prototype.detach=function(){var t=this._attachedHost;null==t?function(){throw Error("Attempting to detach a portal that is not attached to a host")}():(this._attachedHost=null,t.detach())},Object.defineProperty(t.prototype,"isAttached",{get:function(){return null!=this._attachedHost},enumerable:!0,configurable:!0}),t.prototype.setAttachedHost=function(t){this._attachedHost=t},t}(),Gt=function(t){function e(e,n,r){var i=t.call(this)||this;return i.component=e,i.viewContainerRef=n,i.injector=r,i}return Object(v.c)(e,t),e}(Ut),Xt=function(t){function e(e,n,r){var i=t.call(this)||this;return i.templateRef=e,i.viewContainerRef=n,i.context=r,i}return Object(v.c)(e,t),Object.defineProperty(e.prototype,"origin",{get:function(){return this.templateRef.elementRef},enumerable:!0,configurable:!0}),e.prototype.attach=function(e,n){return void 0===n&&(n=this.context),this.context=n,t.prototype.attach.call(this,e)},e.prototype.detach=function(){return this.context=void 0,t.prototype.detach.call(this)},e}(Ut),Ht=function(){function t(){this._isDisposed=!1}return t.prototype.hasAttached=function(){return!!this._attachedPortal},t.prototype.attach=function(t){return t||function(){throw Error("Must provide a portal to attach")}(),this.hasAttached()&&qt(),this._isDisposed&&function(){throw Error("This PortalOutlet has already been disposed")}(),t instanceof Gt?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof Xt?(this._attachedPortal=t,this.attachTemplatePortal(t)):void function(){throw Error("Attempting to attach an unknown Portal type. BasePortalOutlet accepts either a ComponentPortal or a TemplatePortal.")}()},t.prototype.detach=function(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()},t.prototype.dispose=function(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0},t.prototype.setDisposeFn=function(t){this._disposeFn=t},t.prototype._invokeDisposeFn=function(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)},t}(),Yt=function(t){function e(e,n,r,i){var o=t.call(this)||this;return o.outletElement=e,o._componentFactoryResolver=n,o._appRef=r,o._defaultInjector=i,o}return Object(v.c)(e,t),e.prototype.attachComponentPortal=function(t){var e,n=this,r=this._componentFactoryResolver.resolveComponentFactory(t.component);return t.viewContainerRef?(e=t.viewContainerRef.createComponent(r,t.viewContainerRef.length,t.injector||t.viewContainerRef.parentInjector),this.setDisposeFn(function(){return e.destroy()})):(e=r.create(t.injector||this._defaultInjector),this._appRef.attachView(e.hostView),this.setDisposeFn(function(){n._appRef.detachView(e.hostView),e.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(e)),e},e.prototype.attachTemplatePortal=function(t){var e=this,n=t.viewContainerRef,r=n.createEmbeddedView(t.templateRef,t.context);return r.detectChanges(),r.rootNodes.forEach(function(t){return e.outletElement.appendChild(t)}),this.setDisposeFn(function(){var t=n.indexOf(r);-1!==t&&n.remove(t)}),r},e.prototype.dispose=function(){t.prototype.dispose.call(this),null!=this.outletElement.parentNode&&this.outletElement.parentNode.removeChild(this.outletElement)},e.prototype._getComponentRootNode=function(t){return t.hostView.rootNodes[0]},e}(Ht),Zt=function(t){function e(e,n){var i=t.call(this)||this;return i._componentFactoryResolver=e,i._viewContainerRef=n,i._isInitialized=!1,i.attached=new r.EventEmitter,i}return Object(v.c)(e,t),Object.defineProperty(e.prototype,"_deprecatedPortal",{get:function(){return this.portal},set:function(t){this.portal=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_deprecatedPortalHost",{get:function(){return this.portal},set:function(t){this.portal=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"portal",{get:function(){return this._attachedPortal},set:function(e){(!this.hasAttached()||e||this._isInitialized)&&(this.hasAttached()&&t.prototype.detach.call(this),e&&t.prototype.attach.call(this,e),this._attachedPortal=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"attachedRef",{get:function(){return this._attachedRef},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){this._isInitialized=!0},e.prototype.ngOnDestroy=function(){t.prototype.dispose.call(this),this._attachedPortal=null,this._attachedRef=null},e.prototype.attachComponentPortal=function(e){e.setAttachedHost(this);var n=null!=e.viewContainerRef?e.viewContainerRef:this._viewContainerRef,r=this._componentFactoryResolver.resolveComponentFactory(e.component),i=n.createComponent(r,n.length,e.injector||n.parentInjector);return t.prototype.setDisposeFn.call(this,function(){return i.destroy()}),this._attachedPortal=e,this._attachedRef=i,this.attached.emit(i),i},e.prototype.attachTemplatePortal=function(e){var n=this;e.setAttachedHost(this);var r=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context);return t.prototype.setDisposeFn.call(this,function(){return n._viewContainerRef.clear()}),this._attachedPortal=e,this._attachedRef=r,this.attached.emit(r),r},e}(Ht),Wt=function(){},Kt=function(){function t(t,e){this._parentInjector=t,this._customTokens=e}return t.prototype.get=function(t,e){var n=this._customTokens.get(t);return"undefined"!=typeof n?n:this._parentInjector.get(t,e)},t}(),Jt=n("E9/g"),Qt=function(t){function e(){var e=t.call(this,"argument out of range");this.name=e.name="ArgumentOutOfRangeError",this.stack=e.stack,this.message=e.message}return Object(v.c)(e,t),e}(Error),$t=n("Ecq+");function te(t){return function(e){return 0===t?new $t.a:e.lift(new ee(t))}}var ee=function(){function t(t){if(this.total=t,this.total<0)throw new Qt}return t.prototype.call=function(t,e){return e.subscribe(new ne(t,this.total))},t}(),ne=function(t){function e(e,n){t.call(this,e),this.total=n,this.count=0}return Object(v.c)(e,t),e.prototype._next=function(t){var e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))},e}(Jt.a);function re(t){return null!=t&&""+t!="false"}function ie(t,e){return void 0===e&&(e=0),function(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}(t)?Number(t):e}var oe=27,ae=function(){function t(){}return t.prototype.enable=function(){},t.prototype.disable=function(){},t.prototype.attach=function(){},t}(),se=function(){return function(t){var e=this;this.scrollStrategy=new ae,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.direction="ltr",t&&Object.keys(t).filter(function(e){return"undefined"!=typeof t[e]}).forEach(function(n){return e[n]=t[n]})}}(),ue=function(t,e,n,r){this.offsetX=n,this.offsetY=r,this.originX=t.originX,this.originY=t.originY,this.overlayX=e.overlayX,this.overlayY=e.overlayY};function le(){return Error("Scroll strategy has already been attached.")}var ce=function(){function t(t,e,n,r){var i=this;this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=n,this._config=r,this._scrollSubscription=null,this._detach=function(){i.disable(),i._overlayRef.hasAttached()&&i._ngZone.run(function(){return i._overlayRef.detach()})}}return t.prototype.attach=function(t){if(this._overlayRef)throw le();this._overlayRef=t},t.prototype.enable=function(){var t=this;if(!this._scrollSubscription){var e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(function(){var e=t._viewportRuler.getViewportScrollPosition().top;Math.abs(e-t._initialScrollPosition)>t._config.threshold?t._detach():t._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}},t.prototype.disable=function(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)},t}(),he=function(){function t(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}return t.prototype.attach=function(){},t.prototype.enable=function(){if(this._canBeEnabled()){var t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=-this._previousScrollPosition.left+"px",t.style.top=-this._previousScrollPosition.top+"px",t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}},t.prototype.disable=function(){if(this._isEnabled){var t=this._document.documentElement,e=this._document.body,n=t.style.scrollBehavior||"",r=e.style.scrollBehavior||"";this._isEnabled=!1,t.style.left=this._previousHTMLStyles.left,t.style.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),t.style.scrollBehavior=e.style.scrollBehavior="auto",window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),t.style.scrollBehavior=n,e.style.scrollBehavior=r}},t.prototype._canBeEnabled=function(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;var t=this._document.body,e=this._viewportRuler.getViewportSize();return t.scrollHeight>e.height||t.scrollWidth>e.width},t}();function pe(t,e){return e.some(function(e){return t.bottom<e.top||t.top>e.bottom||t.right<e.left||t.left>e.right})}function fe(t,e){return e.some(function(e){return t.top<e.top||t.bottom>e.bottom||t.left<e.left||t.right>e.right})}var de=function(){function t(t,e,n,r){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=n,this._config=r,this._scrollSubscription=null}return t.prototype.attach=function(t){if(this._overlayRef)throw le();this._overlayRef=t},t.prototype.enable=function(){var t=this;this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(function(){if(t._overlayRef.updatePosition(),t._config&&t._config.autoClose){var e=t._overlayRef.overlayElement.getBoundingClientRect(),n=t._viewportRuler.getViewportSize(),r=n.width,i=n.height;pe(e,[{width:r,height:i,bottom:i,right:r,top:0,left:0}])&&(t.disable(),t._ngZone.run(function(){return t._overlayRef.detach()}))}}))},t.prototype.disable=function(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)},t}(),me=function(){return function(t,e,n,r){var i=this;this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=n,this.noop=function(){return new ae},this.close=function(t){return new ce(i._scrollDispatcher,i._ngZone,i._viewportRuler,t)},this.block=function(){return new he(i._viewportRuler,i._document)},this.reposition=function(t){return new de(i._scrollDispatcher,i._viewportRuler,i._ngZone,t)},this._document=r}}(),ge=function(){function t(t,e,n,r,i,o){this._portalOutlet=t,this._pane=e,this._config=n,this._ngZone=r,this._keyboardDispatcher=i,this._document=o,this._backdropElement=null,this._backdropClick=new ct.a,this._attachments=new ct.a,this._detachments=new ct.a,this._keydownEvents=new ct.a,n.scrollStrategy&&n.scrollStrategy.attach(this)}return Object.defineProperty(t.prototype,"overlayElement",{get:function(){return this._pane},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"backdropElement",{get:function(){return this._backdropElement},enumerable:!0,configurable:!0}),t.prototype.attach=function(t){var e=this,n=this._portalOutlet.attach(t);return this._config.positionStrategy&&this._config.positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._config.scrollStrategy&&this._config.scrollStrategy.enable(),this._ngZone.onStable.asObservable().pipe(te(1)).subscribe(function(){e.hasAttached()&&e.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&(Array.isArray(this._config.panelClass)?this._config.panelClass.forEach(function(t){return e._pane.classList.add(t)}):this._pane.classList.add(this._config.panelClass)),this._attachments.next(),this._keyboardDispatcher.add(this),n},t.prototype.detach=function(){if(this.hasAttached()){this.detachBackdrop(),this._togglePointerEvents(!1),this._config.positionStrategy&&this._config.positionStrategy.detach&&this._config.positionStrategy.detach(),this._config.scrollStrategy&&this._config.scrollStrategy.disable();var t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),t}},t.prototype.dispose=function(){var t=this.hasAttached();this._config.positionStrategy&&this._config.positionStrategy.dispose(),this._config.scrollStrategy&&this._config.scrollStrategy.disable(),this.detachBackdrop(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),t&&this._detachments.next(),this._detachments.complete()},t.prototype.hasAttached=function(){return this._portalOutlet.hasAttached()},t.prototype.backdropClick=function(){return this._backdropClick.asObservable()},t.prototype.attachments=function(){return this._attachments.asObservable()},t.prototype.detachments=function(){return this._detachments.asObservable()},t.prototype.keydownEvents=function(){return this._keydownEvents.asObservable()},t.prototype.getConfig=function(){return this._config},t.prototype.updatePosition=function(){this._config.positionStrategy&&this._config.positionStrategy.apply()},t.prototype.updateSize=function(t){this._config=Object(v.a)({},this._config,t),this._updateElementSize()},t.prototype.setDirection=function(t){this._config=Object(v.a)({},this._config,{direction:t}),this._updateElementDirection()},t.prototype._updateElementDirection=function(){this._pane.setAttribute("dir",this._config.direction)},t.prototype._updateElementSize=function(){(this._config.width||0===this._config.width)&&(this._pane.style.width=ye(this._config.width)),(this._config.height||0===this._config.height)&&(this._pane.style.height=ye(this._config.height)),(this._config.minWidth||0===this._config.minWidth)&&(this._pane.style.minWidth=ye(this._config.minWidth)),(this._config.minHeight||0===this._config.minHeight)&&(this._pane.style.minHeight=ye(this._config.minHeight)),(this._config.maxWidth||0===this._config.maxWidth)&&(this._pane.style.maxWidth=ye(this._config.maxWidth)),(this._config.maxHeight||0===this._config.maxHeight)&&(this._pane.style.maxHeight=ye(this._config.maxHeight))},t.prototype._togglePointerEvents=function(t){this._pane.style.pointerEvents=t?"auto":"none"},t.prototype._attachBackdrop=function(){var t=this;this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._backdropElement.classList.add(this._config.backdropClass),this._pane.parentElement.insertBefore(this._backdropElement,this._pane),this._backdropElement.addEventListener("click",function(e){return t._backdropClick.next(e)}),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(function(){requestAnimationFrame(function(){t._backdropElement&&t._backdropElement.classList.add("cdk-overlay-backdrop-showing")})}):this._backdropElement.classList.add("cdk-overlay-backdrop-showing")},t.prototype._updateStackingOrder=function(){this._pane.nextSibling&&this._pane.parentNode.appendChild(this._pane)},t.prototype.detachBackdrop=function(){var t=this,e=this._backdropElement;if(e){var n=function(){e&&e.parentNode&&e.parentNode.removeChild(e),t._backdropElement==e&&(t._backdropElement=null)};e.classList.remove("cdk-overlay-backdrop-showing"),this._config.backdropClass&&e.classList.remove(this._config.backdropClass),e.addEventListener("transitionend",n),e.style.pointerEvents="none",this._ngZone.runOutsideAngular(function(){setTimeout(n,500)})}},t}();function ye(t){return"string"==typeof t?t:t+"px"}var ve=function(){function t(t,e,n,r,i){this._connectedTo=n,this._viewportRuler=r,this._document=i,this._dir="ltr",this._offsetX=0,this._offsetY=0,this.scrollables=[],this._resizeSubscription=yt.a.EMPTY,this._preferredPositions=[],this._applied=!1,this._positionLocked=!1,this._onPositionChange=new ct.a,this._origin=this._connectedTo.nativeElement,this.withFallbackPosition(t,e)}return Object.defineProperty(t.prototype,"_isRtl",{get:function(){return"rtl"===this._dir},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onPositionChange",{get:function(){return this._onPositionChange.asObservable()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"positions",{get:function(){return this._preferredPositions},enumerable:!0,configurable:!0}),t.prototype.attach=function(t){var e=this;this._overlayRef=t,this._pane=t.overlayElement,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(function(){return e.apply()})},t.prototype.dispose=function(){this._applied=!1,this._resizeSubscription.unsubscribe(),this._onPositionChange.complete()},t.prototype.detach=function(){this._applied=!1,this._resizeSubscription.unsubscribe()},t.prototype.apply=function(){if(this._applied&&this._positionLocked&&this._lastConnectedPosition)this.recalculateLastPosition();else{this._applied=!0;for(var t,e,n=this._pane,r=this._origin.getBoundingClientRect(),i=n.getBoundingClientRect(),o=this._viewportRuler.getViewportSize(),a=0,s=this._preferredPositions;a<s.length;a++){var u=s[a],l=this._getOriginConnectionPoint(r,u),c=this._getOverlayPoint(l,i,o,u);if(c.fitsInViewport)return this._setElementPosition(n,i,c,u),void(this._lastConnectedPosition=u);(!t||t.visibleArea<c.visibleArea)&&(t=c,e=u)}this._setElementPosition(n,i,t,e)}},t.prototype.recalculateLastPosition=function(){if(this._lastConnectedPosition){var t=this._origin.getBoundingClientRect(),e=this._pane.getBoundingClientRect(),n=this._viewportRuler.getViewportSize(),r=this._lastConnectedPosition||this._preferredPositions[0],i=this._getOriginConnectionPoint(t,r),o=this._getOverlayPoint(i,e,n,r);this._setElementPosition(this._pane,e,o,r)}},t.prototype.withScrollableContainers=function(t){this.scrollables=t},t.prototype.withFallbackPosition=function(t,e,n,r){var i=new ue(t,e,n,r);return this._preferredPositions.push(i),this},t.prototype.withDirection=function(t){return this._dir=t,this},t.prototype.withOffsetX=function(t){return this._offsetX=t,this},t.prototype.withOffsetY=function(t){return this._offsetY=t,this},t.prototype.withLockedPosition=function(t){return this._positionLocked=t,this},t.prototype.withPositions=function(t){return this._preferredPositions=t.slice(),this},t.prototype.setOrigin=function(t){return this._origin=t.nativeElement,this},t.prototype._getStartX=function(t){return this._isRtl?t.right:t.left},t.prototype._getEndX=function(t){return this._isRtl?t.left:t.right},t.prototype._getOriginConnectionPoint=function(t,e){var n=this._getStartX(t),r=this._getEndX(t);return{x:"center"==e.originX?n+t.width/2:"start"==e.originX?n:r,y:"center"==e.originY?t.top+t.height/2:"top"==e.originY?t.top:t.bottom}},t.prototype._getOverlayPoint=function(t,e,n,r){var i=t.x+("center"==r.overlayX?-e.width/2:"start"===r.overlayX?this._isRtl?-e.width:0:this._isRtl?0:-e.width)+("undefined"==typeof r.offsetX?this._offsetX:r.offsetX),o=t.y+("center"==r.overlayY?-e.height/2:"top"==r.overlayY?0:-e.height)+("undefined"==typeof r.offsetY?this._offsetY:r.offsetY),a=0-o,s=o+e.height-n.height,u=this._subtractOverflows(e.width,0-i,i+e.width-n.width)*this._subtractOverflows(e.height,a,s);return{x:i,y:o,fitsInViewport:e.width*e.height===u,visibleArea:u}},t.prototype._getScrollVisibility=function(t){var e=this._origin.getBoundingClientRect(),n=t.getBoundingClientRect(),r=this.scrollables.map(function(t){return t.getElementRef().nativeElement.getBoundingClientRect()});return{isOriginClipped:fe(e,r),isOriginOutsideView:pe(e,r),isOverlayClipped:fe(n,r),isOverlayOutsideView:pe(n,r)}},t.prototype._setElementPosition=function(t,e,n,r){var i,o="bottom"===r.overlayY?"bottom":"top",a="top"===o?n.y:this._document.documentElement.clientHeight-(n.y+e.height),s="left"==(i="rtl"===this._dir?"end"===r.overlayX?"left":"right":"end"===r.overlayX?"right":"left")?n.x:this._document.documentElement.clientWidth-(n.x+e.width);["top","bottom","left","right"].forEach(function(e){return t.style[e]=null}),t.style[o]=a+"px",t.style[i]=s+"px";var u=new function(t,e){this.connectionPair=t,this.scrollableViewProperties=e}(r,this._getScrollVisibility(t));this._onPositionChange.next(u)},t.prototype._subtractOverflows=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.reduce(function(t,e){return t-Math.max(e,0)},t)},t}(),_e=function(){function t(t){this._document=t,this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height="",this._wrapper=null}return t.prototype.attach=function(t){var e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height})},t.prototype.top=function(t){return void 0===t&&(t=""),this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this},t.prototype.left=function(t){return void 0===t&&(t=""),this._rightOffset="",this._leftOffset=t,this._justifyContent="flex-start",this},t.prototype.bottom=function(t){return void 0===t&&(t=""),this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this},t.prototype.right=function(t){return void 0===t&&(t=""),this._leftOffset="",this._rightOffset=t,this._justifyContent="flex-end",this},t.prototype.width=function(t){return void 0===t&&(t=""),this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this},t.prototype.height=function(t){return void 0===t&&(t=""),this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this},t.prototype.centerHorizontally=function(t){return void 0===t&&(t=""),this.left(t),this._justifyContent="center",this},t.prototype.centerVertically=function(t){return void 0===t&&(t=""),this.top(t),this._alignItems="center",this},t.prototype.apply=function(){if(this._overlayRef.hasAttached()){var t=this._overlayRef.overlayElement;!this._wrapper&&t.parentNode&&(this._wrapper=this._document.createElement("div"),this._wrapper.classList.add("cdk-global-overlay-wrapper"),t.parentNode.insertBefore(this._wrapper,t),this._wrapper.appendChild(t));var e=t.style,n=t.parentNode.style,r=this._overlayRef.getConfig();e.position=this._cssPosition,e.marginLeft="100%"===r.width?"0":this._leftOffset,e.marginTop="100%"===r.height?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=this._rightOffset,n.justifyContent="100%"===r.width?"flex-start":this._justifyContent,n.alignItems="100%"===r.height?"flex-start":this._alignItems}},t.prototype.dispose=function(){this._wrapper&&this._wrapper.parentNode&&(this._wrapper.parentNode.removeChild(this._wrapper),this._wrapper=null)},t}(),be=function(){function t(t,e){this._viewportRuler=t,this._document=e}return t.prototype.global=function(){return new _e(this._document)},t.prototype.connectedTo=function(t,e,n){return new ve(e,n,t,this._viewportRuler,this._document)},t}(),xe=function(){function t(t){this._document=t,this._attachedOverlays=[]}return t.prototype.ngOnDestroy=function(){this._unsubscribeFromKeydownEvents()},t.prototype.add=function(t){this._keydownEventSubscription||this._subscribeToKeydownEvents(),this._attachedOverlays.push(t)},t.prototype.remove=function(t){var e=this._attachedOverlays.indexOf(t);e>-1&&this._attachedOverlays.splice(e,1),0===this._attachedOverlays.length&&this._unsubscribeFromKeydownEvents()},t.prototype._subscribeToKeydownEvents=function(){var t=this,e=_t(this._document.body,"keydown",!0);this._keydownEventSubscription=e.pipe(Object(At.a)(function(){return!!t._attachedOverlays.length})).subscribe(function(e){t._selectOverlayFromEvent(e)._keydownEvents.next(e)})},t.prototype._unsubscribeFromKeydownEvents=function(){this._keydownEventSubscription&&(this._keydownEventSubscription.unsubscribe(),this._keydownEventSubscription=null)},t.prototype._selectOverlayFromEvent=function(t){return this._attachedOverlays.find(function(e){return e.overlayElement===t.target||e.overlayElement.contains(t.target)})||this._attachedOverlays[this._attachedOverlays.length-1]},t}();function we(t,e){return t||new xe(e)}var Ee=function(){function t(t){this._document=t}return t.prototype.ngOnDestroy=function(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)},t.prototype.getContainerElement=function(){return this._containerElement||this._createContainer(),this._containerElement},t.prototype._createContainer=function(){var t=this._document.createElement("div");t.classList.add("cdk-overlay-container"),this._document.body.appendChild(t),this._containerElement=t},t}();function Ce(t,e){return t||new Ee(e)}var Se=0,Ie=function(){function t(t,e,n,r,i,o,a,s,u){this.scrollStrategies=t,this._overlayContainer=e,this._componentFactoryResolver=n,this._positionBuilder=r,this._keyboardDispatcher=i,this._appRef=o,this._injector=a,this._ngZone=s,this._document=u}return t.prototype.create=function(t){var e=this._createPaneElement(),n=this._createPortalOutlet(e);return new ge(n,e,new se(t),this._ngZone,this._keyboardDispatcher,this._document)},t.prototype.position=function(){return this._positionBuilder},t.prototype._createPaneElement=function(){var t=this._document.createElement("div");return t.id="cdk-overlay-"+Se++,t.classList.add("cdk-overlay-pane"),this._overlayContainer.getContainerElement().appendChild(t),t},t.prototype._createPortalOutlet=function(t){return new Yt(t,this._componentFactoryResolver,this._appRef,this._injector)},t}(),Te=[new ue({originX:"start",originY:"bottom"},{overlayX:"start",overlayY:"top"}),new ue({originX:"start",originY:"top"},{overlayX:"start",overlayY:"bottom"}),new ue({originX:"end",originY:"top"},{overlayX:"end",overlayY:"bottom"}),new ue({originX:"end",originY:"bottom"},{overlayX:"end",overlayY:"top"})],ke=new r.InjectionToken("cdk-connected-overlay-scroll-strategy");function Oe(t){return function(){return t.scrollStrategies.reposition()}}var Pe=function(t){this.elementRef=t},Ae=function(){function t(t,e,n,i,o){this._overlay=t,this._scrollStrategy=i,this._dir=o,this._hasBackdrop=!1,this._backdropSubscription=yt.a.EMPTY,this._offsetX=0,this._offsetY=0,this.scrollStrategy=this._scrollStrategy(),this.open=!1,this.backdropClick=new r.EventEmitter,this.positionChange=new r.EventEmitter,this.attach=new r.EventEmitter,this.detach=new r.EventEmitter,this._templatePortal=new Xt(e,n)}return Object.defineProperty(t.prototype,"offsetX",{get:function(){return this._offsetX},set:function(t){this._offsetX=t,this._position&&this._position.withOffsetX(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"offsetY",{get:function(){return this._offsetY},set:function(t){this._offsetY=t,this._position&&this._position.withOffsetY(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasBackdrop",{get:function(){return this._hasBackdrop},set:function(t){this._hasBackdrop=re(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_deprecatedOrigin",{get:function(){return this.origin},set:function(t){this.origin=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_deprecatedPositions",{get:function(){return this.positions},set:function(t){this.positions=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_deprecatedOffsetX",{get:function(){return this.offsetX},set:function(t){this.offsetX=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_deprecatedOffsetY",{get:function(){return this.offsetY},set:function(t){this.offsetY=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_deprecatedWidth",{get:function(){return this.width},set:function(t){this.width=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_deprecatedHeight",{get:function(){return this.height},set:function(t){this.height=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_deprecatedMinWidth",{get:function(){return this.minWidth},set:function(t){this.minWidth=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_deprecatedMinHeight",{get:function(){return this.minHeight},set:function(t){this.minHeight=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_deprecatedBackdropClass",{get:function(){return this.backdropClass},set:function(t){this.backdropClass=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_deprecatedScrollStrategy",{get:function(){return this.scrollStrategy},set:function(t){this.scrollStrategy=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_deprecatedOpen",{get:function(){return this.open},set:function(t){this.open=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_deprecatedHasBackdrop",{get:function(){return this.hasBackdrop},set:function(t){this.hasBackdrop=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"overlayRef",{get:function(){return this._overlayRef},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dir",{get:function(){return this._dir?this._dir.value:"ltr"},enumerable:!0,configurable:!0}),t.prototype.ngOnDestroy=function(){this._destroyOverlay()},t.prototype.ngOnChanges=function(t){this._position&&((t.positions||t._deprecatedPositions)&&this._position.withPositions(this.positions),(t.origin||t._deprecatedOrigin)&&(this._position.setOrigin(this.origin.elementRef),this.open&&this._position.apply())),(t.open||t._deprecatedOpen)&&(this.open?this._attachOverlay():this._detachOverlay())},t.prototype._createOverlay=function(){this.positions&&this.positions.length||(this.positions=Te),this._overlayRef=this._overlay.create(this._buildConfig())},t.prototype._buildConfig=function(){var t=this._position=this._createPositionStrategy(),e=new se({positionStrategy:t,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(e.width=this.width),(this.height||0===this.height)&&(e.height=this.height),(this.minWidth||0===this.minWidth)&&(e.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(e.minHeight=this.minHeight),this.backdropClass&&(e.backdropClass=this.backdropClass),e},t.prototype._createPositionStrategy=function(){for(var t=this,e=this.positions[0],n={originX:e.originX,originY:e.originY},r={overlayX:e.overlayX,overlayY:e.overlayY},i=this._overlay.position().connectedTo(this.origin.elementRef,n,r).withOffsetX(this.offsetX).withOffsetY(this.offsetY),o=1;o<this.positions.length;o++)i.withFallbackPosition({originX:this.positions[o].originX,originY:this.positions[o].originY},{overlayX:this.positions[o].overlayX,overlayY:this.positions[o].overlayY});return i.onPositionChange.subscribe(function(e){return t.positionChange.emit(e)}),i},t.prototype._attachOverlay=function(){var t=this;this._overlayRef?this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}):(this._createOverlay(),this._overlayRef.keydownEvents().subscribe(function(e){e.keyCode===oe&&t._detachOverlay()})),this._position.withDirection(this.dir),this._overlayRef.setDirection(this.dir),this._overlayRef.hasAttached()||(this._overlayRef.attach(this._templatePortal),this.attach.emit()),this.hasBackdrop&&(this._backdropSubscription=this._overlayRef.backdropClick().subscribe(function(){t.backdropClick.emit()}))},t.prototype._detachOverlay=function(){this._overlayRef&&(this._overlayRef.detach(),this.detach.emit()),this._backdropSubscription.unsubscribe()},t.prototype._destroyOverlay=function(){this._overlayRef&&this._overlayRef.dispose(),this._backdropSubscription.unsubscribe()},t}(),Me=function(){};function Re(t,e){return void 0===e&&(e=wt),function(n){return n.lift(new Le(t,e))}}var Le=function(){function t(t,e){this.dueTime=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new Ne(t,this.dueTime,this.scheduler))},t}(),Ne=function(t){function e(e,n,r){t.call(this,e),this.dueTime=n,this.scheduler=r,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}return Object(v.c)(e,t),e.prototype._next=function(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(De,this.dueTime,this))},e.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},e.prototype.debouncedNext=function(){this.clearDebounce(),this.hasValue&&(this.destination.next(this.lastValue),this.lastValue=null,this.hasValue=!1)},e.prototype.clearDebounce=function(){var t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)},e}(Jt.a);function De(t){t.debouncedNext()}var Fe=n("qqDE");function ze(t,e,n){return function(r){return r.lift(new je(t,e,n))}}var je=function(){function t(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}return t.prototype.call=function(t,e){return e.subscribe(new Be(t,this.nextOrObserver,this.error,this.complete))},t}(),Be=function(t){function e(e,n,r,i){t.call(this,e);var o=new Jt.a(n,r,i);o.syncErrorThrowable=!0,this.add(o),this.safeSubscriber=o}return Object(v.c)(e,t),e.prototype._next=function(t){var e=this.safeSubscriber;e.next(t),e.syncErrorThrown?this.destination.error(e.syncErrorValue):this.destination.next(t)},e.prototype._error=function(t){var e=this.safeSubscriber;e.error(t),this.destination.error(e.syncErrorThrown?e.syncErrorValue:t)},e.prototype._complete=function(){var t=this.safeSubscriber;t.complete(),t.syncErrorThrown?this.destination.error(t.syncErrorValue):this.destination.complete()},e}(Jt.a),Ve=function(){function t(t){this._platform=t}return t.prototype.isDisabled=function(t){return t.hasAttribute("disabled")},t.prototype.isVisible=function(t){return function(t){return!!(t.offsetWidth||t.offsetHeight||"function"==typeof t.getClientRects&&t.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility},t.prototype.isTabbable=function(t){if(!this._platform.isBrowser)return!1;var e=function(t){try{return t.frameElement}catch(t){return null}}(t.ownerDocument.defaultView||window);if(e){var n=e&&e.nodeName.toLowerCase();if(-1===Ue(e))return!1;if((this._platform.BLINK||this._platform.WEBKIT)&&"object"===n)return!1;if((this._platform.BLINK||this._platform.WEBKIT)&&!this.isVisible(e))return!1}var r=t.nodeName.toLowerCase(),i=Ue(t);if(t.hasAttribute("contenteditable"))return-1!==i;if("iframe"===r)return!1;if("audio"===r){if(!t.hasAttribute("controls"))return!1;if(this._platform.BLINK)return!0}if("video"===r){if(!t.hasAttribute("controls")&&this._platform.TRIDENT)return!1;if(this._platform.BLINK||this._platform.FIREFOX)return!0}return("object"!==r||!this._platform.BLINK&&!this._platform.WEBKIT)&&!(this._platform.WEBKIT&&this._platform.IOS&&!function(t){var e=t.nodeName.toLowerCase(),n="input"===e&&t.type;return"text"===n||"password"===n||"select"===e||"textarea"===e}(t))&&t.tabIndex>=0},t.prototype.isFocusable=function(t){return function(t){return!function(t){return function(t){return"input"==t.nodeName.toLowerCase()}(t)&&"hidden"==t.type}(t)&&(function(t){var e=t.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(t)||function(t){return function(t){return"a"==t.nodeName.toLowerCase()}(t)&&t.hasAttribute("href")}(t)||t.hasAttribute("contenteditable")||qe(t))}(t)&&!this.isDisabled(t)&&this.isVisible(t)},t}();function qe(t){if(!t.hasAttribute("tabindex")||void 0===t.tabIndex)return!1;var e=t.getAttribute("tabindex");return"-32768"!=e&&!(!e||isNaN(parseInt(e,10)))}function Ue(t){if(!qe(t))return null;var e=parseInt(t.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}var Ge=function(){function t(t,e,n,r,i){void 0===i&&(i=!1),this._element=t,this._checker=e,this._ngZone=n,this._document=r,this._enabled=!0,i||this.attachAnchors()}return Object.defineProperty(t.prototype,"enabled",{get:function(){return this._enabled},set:function(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._startAnchor.tabIndex=this._endAnchor.tabIndex=this._enabled?0:-1)},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){this._startAnchor&&this._startAnchor.parentNode&&this._startAnchor.parentNode.removeChild(this._startAnchor),this._endAnchor&&this._endAnchor.parentNode&&this._endAnchor.parentNode.removeChild(this._endAnchor),this._startAnchor=this._endAnchor=null},t.prototype.attachAnchors=function(){var t=this;this._startAnchor||(this._startAnchor=this._createAnchor()),this._endAnchor||(this._endAnchor=this._createAnchor()),this._ngZone.runOutsideAngular(function(){t._startAnchor.addEventListener("focus",function(){t.focusLastTabbableElement()}),t._endAnchor.addEventListener("focus",function(){t.focusFirstTabbableElement()}),t._element.parentNode&&(t._element.parentNode.insertBefore(t._startAnchor,t._element),t._element.parentNode.insertBefore(t._endAnchor,t._element.nextSibling))})},t.prototype.focusInitialElementWhenReady=function(){var t=this;return new Promise(function(e){t._executeOnStable(function(){return e(t.focusInitialElement())})})},t.prototype.focusFirstTabbableElementWhenReady=function(){var t=this;return new Promise(function(e){t._executeOnStable(function(){return e(t.focusFirstTabbableElement())})})},t.prototype.focusLastTabbableElementWhenReady=function(){var t=this;return new Promise(function(e){t._executeOnStable(function(){return e(t.focusLastTabbableElement())})})},t.prototype._getRegionBoundary=function(t){for(var e=this._element.querySelectorAll("[cdk-focus-region-"+t+"], [cdkFocusRegion"+t+"], [cdk-focus-"+t+"]"),n=0;n<e.length;n++)e[n].hasAttribute("cdk-focus-"+t)?console.warn("Found use of deprecated attribute 'cdk-focus-"+t+"', use 'cdkFocusRegion"+t+"' instead.",e[n]):e[n].hasAttribute("cdk-focus-region-"+t)&&console.warn("Found use of deprecated attribute 'cdk-focus-region-"+t+"', use 'cdkFocusRegion"+t+"' instead.",e[n]);return"start"==t?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)},t.prototype.focusInitialElement=function(){var t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");return this._element.hasAttribute("cdk-focus-initial")&&console.warn("Found use of deprecated attribute 'cdk-focus-initial', use 'cdkFocusInitial' instead.",this._element),t?(t.focus(),!0):this.focusFirstTabbableElement()},t.prototype.focusFirstTabbableElement=function(){var t=this._getRegionBoundary("start");return t&&t.focus(),!!t},t.prototype.focusLastTabbableElement=function(){var t=this._getRegionBoundary("end");return t&&t.focus(),!!t},t.prototype._getFirstTabbableElement=function(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;for(var e=t.children||t.childNodes,n=0;n<e.length;n++){var r=e[n].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[n]):null;if(r)return r}return null},t.prototype._getLastTabbableElement=function(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;for(var e=t.children||t.childNodes,n=e.length-1;n>=0;n--){var r=e[n].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[n]):null;if(r)return r}return null},t.prototype._createAnchor=function(){var t=this._document.createElement("div");return t.tabIndex=this._enabled?0:-1,t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t},t.prototype._executeOnStable=function(t){this._ngZone.isStable?t():this._ngZone.onStable.asObservable().pipe(te(1)).subscribe(t)},t}(),Xe=function(){function t(t,e,n){this._checker=t,this._ngZone=e,this._document=n}return t.prototype.create=function(t,e){return void 0===e&&(e=!1),new Ge(t,this._checker,this._ngZone,this._document,e)},t}();function He(t,e){return(t.getAttribute(e)||"").match(/\S+/g)||[]}var Ye=0,Ze=new Map,We=null,Ke=function(){function t(t){this._document=t}return t.prototype.describe=function(t,e){t.nodeType===this._document.ELEMENT_NODE&&e.trim()&&(Ze.has(e)||this._createMessageElement(e),this._isElementDescribedByMessage(t,e)||this._addMessageReference(t,e))},t.prototype.removeDescription=function(t,e){if(t.nodeType===this._document.ELEMENT_NODE&&e.trim()){this._isElementDescribedByMessage(t,e)&&this._removeMessageReference(t,e);var n=Ze.get(e);n&&0===n.referenceCount&&this._deleteMessageElement(e),We&&0===We.childNodes.length&&this._deleteMessagesContainer()}},t.prototype.ngOnDestroy=function(){for(var t=this._document.querySelectorAll("[cdk-describedby-host]"),e=0;e<t.length;e++)this._removeCdkDescribedByReferenceIds(t[e]),t[e].removeAttribute("cdk-describedby-host");We&&this._deleteMessagesContainer(),Ze.clear()},t.prototype._createMessageElement=function(t){var e=this._document.createElement("div");e.setAttribute("id","cdk-describedby-message-"+Ye++),e.appendChild(this._document.createTextNode(t)),We||this._createMessagesContainer(),We.appendChild(e),Ze.set(t,{messageElement:e,referenceCount:0})},t.prototype._deleteMessageElement=function(t){var e=Ze.get(t),n=e&&e.messageElement;We&&n&&We.removeChild(n),Ze.delete(t)},t.prototype._createMessagesContainer=function(){(We=this._document.createElement("div")).setAttribute("id","cdk-describedby-message-container"),We.setAttribute("aria-hidden","true"),We.style.display="none",this._document.body.appendChild(We)},t.prototype._deleteMessagesContainer=function(){We&&We.parentNode&&(We.parentNode.removeChild(We),We=null)},t.prototype._removeCdkDescribedByReferenceIds=function(t){var e=He(t,"aria-describedby").filter(function(t){return 0!=t.indexOf("cdk-describedby-message")});t.setAttribute("aria-describedby",e.join(" "))},t.prototype._addMessageReference=function(t,e){var n,r,i,o,a=Ze.get(e);i=a.messageElement.id,(o=He(n=t,r="aria-describedby")).some(function(t){return t.trim()==i.trim()})||(o.push(i.trim()),n.setAttribute(r,o.join(" "))),t.setAttribute("cdk-describedby-host",""),a.referenceCount++},t.prototype._removeMessageReference=function(t,e){var n,r,i,o,a=Ze.get(e);a.referenceCount--,i=a.messageElement.id,o=He(n=t,r="aria-describedby").filter(function(t){return t!=i.trim()}),n.setAttribute(r,o.join(" ")),t.removeAttribute("cdk-describedby-host")},t.prototype._isElementDescribedByMessage=function(t,e){var n=He(t,"aria-describedby"),r=Ze.get(e),i=r&&r.messageElement.id;return!!i&&-1!=n.indexOf(i)},t}();function Je(t,e){return t||new Ke(e)}var Qe=function(){function t(t){var e=this;this._items=t,this._activeItemIndex=-1,this._wrap=!1,this._letterKeyStream=new ct.a,this._typeaheadSubscription=yt.a.EMPTY,this._vertical=!0,this._pressedLetters=[],this.tabOut=new ct.a,this.change=new ct.a,t.changes.subscribe(function(t){if(e._activeItem){var n=t.toArray().indexOf(e._activeItem);n>-1&&n!==e._activeItemIndex&&(e._activeItemIndex=n)}})}return t.prototype.withWrap=function(){return this._wrap=!0,this},t.prototype.withVerticalOrientation=function(t){return void 0===t&&(t=!0),this._vertical=t,this},t.prototype.withHorizontalOrientation=function(t){return this._horizontal=t,this},t.prototype.withTypeAhead=function(t){var e=this;if(void 0===t&&(t=200),this._items.length&&this._items.some(function(t){return"function"!=typeof t.getLabel}))throw Error("ListKeyManager items in typeahead mode must implement the `getLabel` method.");return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(ze(function(t){return e._pressedLetters.push(t)}),Re(t),Object(At.a)(function(){return e._pressedLetters.length>0}),Object(Fe.a)(function(){return e._pressedLetters.join("")})).subscribe(function(t){for(var n=e._items.toArray(),r=1;r<n.length+1;r++){var i=(e._activeItemIndex+r)%n.length,o=n[i];if(!o.disabled&&0===o.getLabel().toUpperCase().trim().indexOf(t)){e.setActiveItem(i);break}}e._pressedLetters=[]}),this},t.prototype.setActiveItem=function(t){var e=this._activeItemIndex;this._activeItemIndex=t,this._activeItem=this._items.toArray()[t],this._activeItemIndex!==e&&this.change.next(t)},t.prototype.onKeydown=function(t){var e=t.keyCode;switch(e){case 9:return void this.tabOut.next();case 40:if(this._vertical){this.setNextItemActive();break}case 38:if(this._vertical){this.setPreviousItemActive();break}case 39:if("ltr"===this._horizontal){this.setNextItemActive();break}if("rtl"===this._horizontal){this.setPreviousItemActive();break}case 37:if("ltr"===this._horizontal){this.setPreviousItemActive();break}if("rtl"===this._horizontal){this.setNextItemActive();break}default:return void(t.key&&1===t.key.length?this._letterKeyStream.next(t.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e)))}this._pressedLetters=[],t.preventDefault()},Object.defineProperty(t.prototype,"activeItemIndex",{get:function(){return this._activeItemIndex},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activeItem",{get:function(){return this._activeItem},enumerable:!0,configurable:!0}),t.prototype.setFirstItemActive=function(){this._setActiveItemByIndex(0,1)},t.prototype.setLastItemActive=function(){this._setActiveItemByIndex(this._items.length-1,-1)},t.prototype.setNextItemActive=function(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)},t.prototype.setPreviousItemActive=function(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)},t.prototype.updateActiveItemIndex=function(t){this._activeItemIndex=t},t.prototype._setActiveItemByDelta=function(t,e){void 0===e&&(e=this._items.toArray()),this._wrap?this._setActiveInWrapMode(t,e):this._setActiveInDefaultMode(t,e)},t.prototype._setActiveInWrapMode=function(t,e){this._activeItemIndex=(this._activeItemIndex+t+e.length)%e.length,e[this._activeItemIndex].disabled?this._setActiveInWrapMode(t,e):this.setActiveItem(this._activeItemIndex)},t.prototype._setActiveInDefaultMode=function(t,e){this._setActiveItemByIndex(this._activeItemIndex+t,t,e)},t.prototype._setActiveItemByIndex=function(t,e,n){if(void 0===n&&(n=this._items.toArray()),n[t]){for(;n[t].disabled;)if(!n[t+=e])return;this.setActiveItem(t)}},t}(),$e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(v.c)(e,t),e.prototype.setActiveItem=function(e){this.activeItem&&this.activeItem.setInactiveStyles(),t.prototype.setActiveItem.call(this,e),this.activeItem&&this.activeItem.setActiveStyles()},e}(Qe),tn=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._origin="program",e}return Object(v.c)(e,t),e.prototype.setFocusOrigin=function(t){return this._origin=t,this},e.prototype.setActiveItem=function(e){t.prototype.setActiveItem.call(this,e),this.activeItem&&this.activeItem.focus(this._origin)},e}(Qe),en=new r.InjectionToken("liveAnnouncerElement"),nn=function(){function t(t,e){this._document=e,this._liveElement=t||this._createLiveElement()}return t.prototype.announce=function(t,e){var n=this;return void 0===e&&(e="polite"),this._liveElement.textContent="",this._liveElement.setAttribute("aria-live",e),new Promise(function(e){setTimeout(function(){n._liveElement.textContent=t,e()},100)})},t.prototype.ngOnDestroy=function(){this._liveElement&&this._liveElement.parentNode&&this._liveElement.parentNode.removeChild(this._liveElement)},t.prototype._createLiveElement=function(){var t=this._document.createElement("div");return t.classList.add("cdk-visually-hidden"),t.setAttribute("aria-atomic","true"),t.setAttribute("aria-live","polite"),this._document.body.appendChild(t),t},t}();function rn(t,e,n){return t||new nn(e,n)}var on=function(){function t(t,e){this._ngZone=t,this._platform=e,this._origin=null,this._windowFocused=!1,this._elementInfo=new Map,this._unregisterGlobalListeners=function(){},this._monitoredElementCount=0}return t.prototype.monitor=function(t,e,n){var i=this;if(e instanceof r.Renderer2||(n=e),n=!!n,!this._platform.isBrowser)return ft(null);if(this._elementInfo.has(t)){var o=this._elementInfo.get(t);return o.checkChildren=n,o.subject.asObservable()}var a={unlisten:function(){},checkChildren:n,subject:new ct.a};this._elementInfo.set(t,a),this._incrementMonitoredElementCount();var s=function(e){return i._onFocus(e,t)},u=function(e){return i._onBlur(e,t)};return this._ngZone.runOutsideAngular(function(){t.addEventListener("focus",s,!0),t.addEventListener("blur",u,!0)}),a.unlisten=function(){t.removeEventListener("focus",s,!0),t.removeEventListener("blur",u,!0)},a.subject.asObservable()},t.prototype.stopMonitoring=function(t){var e=this._elementInfo.get(t);e&&(e.unlisten(),e.subject.complete(),this._setClasses(t),this._elementInfo.delete(t),this._decrementMonitoredElementCount())},t.prototype.focusVia=function(t,e){this._setOriginForCurrentEventQueue(e),t.focus()},t.prototype.ngOnDestroy=function(){var t=this;this._elementInfo.forEach(function(e,n){return t.stopMonitoring(n)})},t.prototype._registerGlobalListeners=function(){var t=this;if(this._platform.isBrowser){var e=function(){t._lastTouchTarget=null,t._setOriginForCurrentEventQueue("keyboard")},n=function(){t._lastTouchTarget||t._setOriginForCurrentEventQueue("mouse")},r=function(e){null!=t._touchTimeoutId&&clearTimeout(t._touchTimeoutId),t._lastTouchTarget=e.target,t._touchTimeoutId=setTimeout(function(){return t._lastTouchTarget=null},650)},i=function(){t._windowFocused=!0,t._windowFocusTimeoutId=setTimeout(function(){return t._windowFocused=!1},0)};this._ngZone.runOutsideAngular(function(){document.addEventListener("keydown",e,!0),document.addEventListener("mousedown",n,!0),document.addEventListener("touchstart",r,!at()||{passive:!0,capture:!0}),window.addEventListener("focus",i)}),this._unregisterGlobalListeners=function(){document.removeEventListener("keydown",e,!0),document.removeEventListener("mousedown",n,!0),document.removeEventListener("touchstart",r,!at()||{passive:!0,capture:!0}),window.removeEventListener("focus",i),clearTimeout(t._windowFocusTimeoutId),clearTimeout(t._touchTimeoutId),clearTimeout(t._originTimeoutId)}}},t.prototype._toggleClass=function(t,e,n){n?t.classList.add(e):t.classList.remove(e)},t.prototype._setClasses=function(t,e){this._elementInfo.get(t)&&(this._toggleClass(t,"cdk-focused",!!e),this._toggleClass(t,"cdk-touch-focused","touch"===e),this._toggleClass(t,"cdk-keyboard-focused","keyboard"===e),this._toggleClass(t,"cdk-mouse-focused","mouse"===e),this._toggleClass(t,"cdk-program-focused","program"===e))},t.prototype._setOriginForCurrentEventQueue=function(t){var e=this;this._origin=t,this._originTimeoutId=setTimeout(function(){return e._origin=null},0)},t.prototype._wasCausedByTouch=function(t){var e=t.target;return this._lastTouchTarget instanceof Node&&e instanceof Node&&(e===this._lastTouchTarget||e.contains(this._lastTouchTarget))},t.prototype._onFocus=function(t,e){var n=this._elementInfo.get(e);n&&(n.checkChildren||e===t.target)&&(this._origin||(this._origin=this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:this._wasCausedByTouch(t)?"touch":"program"),this._setClasses(e,this._origin),n.subject.next(this._origin),this._lastFocusOrigin=this._origin,this._origin=null)},t.prototype._onBlur=function(t,e){var n=this._elementInfo.get(e);!n||n.checkChildren&&t.relatedTarget instanceof Node&&e.contains(t.relatedTarget)||(this._setClasses(e),n.subject.next(null))},t.prototype._incrementMonitoredElementCount=function(){1==++this._monitoredElementCount&&this._registerGlobalListeners()},t.prototype._decrementMonitoredElementCount=function(){--this._monitoredElementCount||(this._unregisterGlobalListeners(),this._unregisterGlobalListeners=function(){})},t}();function an(t,e,n){return t||new on(e,n)}var sn=function(){},un=null;function ln(){return un}var cn,hn={class:"className",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"},pn={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},fn={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"};r["\u0275global"].Node&&(cn=r["\u0275global"].Node.prototype.contains||function(t){return!!(16&this.compareDocumentPosition(t))});var dn,mn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(v.c)(e,t),e.prototype.parse=function(t){throw new Error("parse not implemented")},e.makeCurrent=function(){var t;t=new e,un||(un=t)},e.prototype.hasProperty=function(t,e){return e in t},e.prototype.setProperty=function(t,e,n){t[e]=n},e.prototype.getProperty=function(t,e){return t[e]},e.prototype.invoke=function(t,e,n){var r;(r=t)[e].apply(r,n)},e.prototype.logError=function(t){window.console&&(console.error?console.error(t):console.log(t))},e.prototype.log=function(t){window.console&&window.console.log&&window.console.log(t)},e.prototype.logGroup=function(t){window.console&&window.console.group&&window.console.group(t)},e.prototype.logGroupEnd=function(){window.console&&window.console.groupEnd&&window.console.groupEnd()},Object.defineProperty(e.prototype,"attrToPropMap",{get:function(){return hn},enumerable:!0,configurable:!0}),e.prototype.contains=function(t,e){return cn.call(t,e)},e.prototype.querySelector=function(t,e){return t.querySelector(e)},e.prototype.querySelectorAll=function(t,e){return t.querySelectorAll(e)},e.prototype.on=function(t,e,n){t.addEventListener(e,n,!1)},e.prototype.onAndCancel=function(t,e,n){return t.addEventListener(e,n,!1),function(){t.removeEventListener(e,n,!1)}},e.prototype.dispatchEvent=function(t,e){t.dispatchEvent(e)},e.prototype.createMouseEvent=function(t){var e=this.getDefaultDocument().createEvent("MouseEvent");return e.initEvent(t,!0,!0),e},e.prototype.createEvent=function(t){var e=this.getDefaultDocument().createEvent("Event");return e.initEvent(t,!0,!0),e},e.prototype.preventDefault=function(t){t.preventDefault(),t.returnValue=!1},e.prototype.isPrevented=function(t){return t.defaultPrevented||null!=t.returnValue&&!t.returnValue},e.prototype.getInnerHTML=function(t){return t.innerHTML},e.prototype.getTemplateContent=function(t){return"content"in t&&this.isTemplateElement(t)?t.content:null},e.prototype.getOuterHTML=function(t){return t.outerHTML},e.prototype.nodeName=function(t){return t.nodeName},e.prototype.nodeValue=function(t){return t.nodeValue},e.prototype.type=function(t){return t.type},e.prototype.content=function(t){return this.hasProperty(t,"content")?t.content:t},e.prototype.firstChild=function(t){return t.firstChild},e.prototype.nextSibling=function(t){return t.nextSibling},e.prototype.parentElement=function(t){return t.parentNode},e.prototype.childNodes=function(t){return t.childNodes},e.prototype.childNodesAsList=function(t){for(var e=t.childNodes,n=new Array(e.length),r=0;r<e.length;r++)n[r]=e[r];return n},e.prototype.clearNodes=function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},e.prototype.appendChild=function(t,e){t.appendChild(e)},e.prototype.removeChild=function(t,e){t.removeChild(e)},e.prototype.replaceChild=function(t,e,n){t.replaceChild(e,n)},e.prototype.remove=function(t){return t.parentNode&&t.parentNode.removeChild(t),t},e.prototype.insertBefore=function(t,e,n){t.insertBefore(n,e)},e.prototype.insertAllBefore=function(t,e,n){n.forEach(function(n){return t.insertBefore(n,e)})},e.prototype.insertAfter=function(t,e,n){t.insertBefore(n,e.nextSibling)},e.prototype.setInnerHTML=function(t,e){t.innerHTML=e},e.prototype.getText=function(t){return t.textContent},e.prototype.setText=function(t,e){t.textContent=e},e.prototype.getValue=function(t){return t.value},e.prototype.setValue=function(t,e){t.value=e},e.prototype.getChecked=function(t){return t.checked},e.prototype.setChecked=function(t,e){t.checked=e},e.prototype.createComment=function(t){return this.getDefaultDocument().createComment(t)},e.prototype.createTemplate=function(t){var e=this.getDefaultDocument().createElement("template");return e.innerHTML=t,e},e.prototype.createElement=function(t,e){return(e=e||this.getDefaultDocument()).createElement(t)},e.prototype.createElementNS=function(t,e,n){return(n=n||this.getDefaultDocument()).createElementNS(t,e)},e.prototype.createTextNode=function(t,e){return(e=e||this.getDefaultDocument()).createTextNode(t)},e.prototype.createScriptTag=function(t,e,n){var r=(n=n||this.getDefaultDocument()).createElement("SCRIPT");return r.setAttribute(t,e),r},e.prototype.createStyleElement=function(t,e){var n=(e=e||this.getDefaultDocument()).createElement("style");return this.appendChild(n,this.createTextNode(t,e)),n},e.prototype.createShadowRoot=function(t){return t.createShadowRoot()},e.prototype.getShadowRoot=function(t){return t.shadowRoot},e.prototype.getHost=function(t){return t.host},e.prototype.clone=function(t){return t.cloneNode(!0)},e.prototype.getElementsByClassName=function(t,e){return t.getElementsByClassName(e)},e.prototype.getElementsByTagName=function(t,e){return t.getElementsByTagName(e)},e.prototype.classList=function(t){return Array.prototype.slice.call(t.classList,0)},e.prototype.addClass=function(t,e){t.classList.add(e)},e.prototype.removeClass=function(t,e){t.classList.remove(e)},e.prototype.hasClass=function(t,e){return t.classList.contains(e)},e.prototype.setStyle=function(t,e,n){t.style[e]=n},e.prototype.removeStyle=function(t,e){t.style[e]=""},e.prototype.getStyle=function(t,e){return t.style[e]},e.prototype.hasStyle=function(t,e,n){var r=this.getStyle(t,e)||"";return n?r==n:r.length>0},e.prototype.tagName=function(t){return t.tagName},e.prototype.attributeMap=function(t){for(var e=new Map,n=t.attributes,r=0;r<n.length;r++){var i=n.item(r);e.set(i.name,i.value)}return e},e.prototype.hasAttribute=function(t,e){return t.hasAttribute(e)},e.prototype.hasAttributeNS=function(t,e,n){return t.hasAttributeNS(e,n)},e.prototype.getAttribute=function(t,e){return t.getAttribute(e)},e.prototype.getAttributeNS=function(t,e,n){return t.getAttributeNS(e,n)},e.prototype.setAttribute=function(t,e,n){t.setAttribute(e,n)},e.prototype.setAttributeNS=function(t,e,n,r){t.setAttributeNS(e,n,r)},e.prototype.removeAttribute=function(t,e){t.removeAttribute(e)},e.prototype.removeAttributeNS=function(t,e,n){t.removeAttributeNS(e,n)},e.prototype.templateAwareRoot=function(t){return this.isTemplateElement(t)?this.content(t):t},e.prototype.createHtmlDocument=function(){return document.implementation.createHTMLDocument("fakeTitle")},e.prototype.getDefaultDocument=function(){return document},e.prototype.getBoundingClientRect=function(t){try{return t.getBoundingClientRect()}catch(t){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}},e.prototype.getTitle=function(t){return t.title},e.prototype.setTitle=function(t,e){t.title=e||""},e.prototype.elementMatches=function(t,e){return!!this.isElementNode(t)&&(t.matches&&t.matches(e)||t.msMatchesSelector&&t.msMatchesSelector(e)||t.webkitMatchesSelector&&t.webkitMatchesSelector(e))},e.prototype.isTemplateElement=function(t){return this.isElementNode(t)&&"TEMPLATE"===t.nodeName},e.prototype.isTextNode=function(t){return t.nodeType===Node.TEXT_NODE},e.prototype.isCommentNode=function(t){return t.nodeType===Node.COMMENT_NODE},e.prototype.isElementNode=function(t){return t.nodeType===Node.ELEMENT_NODE},e.prototype.hasShadowRoot=function(t){return null!=t.shadowRoot&&t instanceof HTMLElement},e.prototype.isShadowRoot=function(t){return t instanceof DocumentFragment},e.prototype.importIntoDoc=function(t){return document.importNode(this.templateAwareRoot(t),!0)},e.prototype.adoptNode=function(t){return document.adoptNode(t)},e.prototype.getHref=function(t){return t.getAttribute("href")},e.prototype.getEventKey=function(t){var e=t.key;if(null==e){if(null==(e=t.keyIdentifier))return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&fn.hasOwnProperty(e)&&(e=fn[e]))}return pn[e]||e},e.prototype.getGlobalEventTarget=function(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null},e.prototype.getHistory=function(){return window.history},e.prototype.getLocation=function(){return window.location},e.prototype.getBaseHref=function(t){var e,n=gn||(gn=document.querySelector("base"))?gn.getAttribute("href"):null;return null==n?null:(e=n,dn||(dn=document.createElement("a")),dn.setAttribute("href",e),"/"===dn.pathname.charAt(0)?dn.pathname:"/"+dn.pathname)},e.prototype.resetBaseElement=function(){gn=null},e.prototype.getUserAgent=function(){return window.navigator.userAgent},e.prototype.setData=function(t,e,n){this.setAttribute(t,"data-"+e,n)},e.prototype.getData=function(t,e){return this.getAttribute(t,"data-"+e)},e.prototype.getComputedStyle=function(t){return getComputedStyle(t)},e.prototype.supportsWebAnimation=function(){return"function"==typeof Element.prototype.animate},e.prototype.performanceNow=function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()},e.prototype.supportsCookies=function(){return!0},e.prototype.getCookie=function(t){return R(document.cookie,t)},e.prototype.setCookie=function(t,e){document.cookie=encodeURIComponent(t)+"="+encodeURIComponent(e)},e}(function(t){function e(){var e=t.call(this)||this;e._animationPrefix=null,e._transitionEnd=null;try{var n=e.createElement("div",document);if(null!=e.getStyle(n,"animationName"))e._animationPrefix="";else for(var r=["Webkit","Moz","O","ms"],i=0;i<r.length;i++)if(null!=e.getStyle(n,r[i]+"AnimationName")){e._animationPrefix="-"+r[i].toLowerCase()+"-";break}var o={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};Object.keys(o).forEach(function(t){null!=e.getStyle(n,t)&&(e._transitionEnd=o[t])})}catch(t){e._animationPrefix=null,e._transitionEnd=null}return e}return Object(v.c)(e,t),e.prototype.getDistributedNodes=function(t){return t.getDistributedNodes()},e.prototype.resolveAndSetHref=function(t,e,n){t.href=null==n?e:e+"/../"+n},e.prototype.supportsDOMEvents=function(){return!0},e.prototype.supportsNativeShadowDOM=function(){return"function"==typeof document.body.createShadowRoot},e.prototype.getAnimationPrefix=function(){return this._animationPrefix?this._animationPrefix:""},e.prototype.getTransitionEnd=function(){return this._transitionEnd?this._transitionEnd:""},e.prototype.supportsAnimation=function(){return null!=this._animationPrefix&&null!=this._transitionEnd},e}(function(){function t(){this.resourceLoaderType=null}return Object.defineProperty(t.prototype,"attrToPropMap",{get:function(){return this._attrToPropMap},set:function(t){this._attrToPropMap=t},enumerable:!0,configurable:!0}),t}())),gn=null,yn=rt;function vn(){return!!window.history.pushState}var _n=function(t){function e(e){var n=t.call(this)||this;return n._doc=e,n._init(),n}return Object(v.c)(e,t),e.prototype._init=function(){this.location=ln().getLocation(),this._history=ln().getHistory()},e.prototype.getBaseHrefFromDOM=function(){return ln().getBaseHref(this._doc)},e.prototype.onPopState=function(t){ln().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)},e.prototype.onHashChange=function(t){ln().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)},Object.defineProperty(e.prototype,"pathname",{get:function(){return this.location.pathname},set:function(t){this.location.pathname=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"search",{get:function(){return this.location.search},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hash",{get:function(){return this.location.hash},enumerable:!0,configurable:!0}),e.prototype.pushState=function(t,e,n){vn()?this._history.pushState(t,e,n):this.location.hash=n},e.prototype.replaceState=function(t,e,n){vn()?this._history.replaceState(t,e,n):this.location.hash=n},e.prototype.forward=function(){this._history.forward()},e.prototype.back=function(){this._history.back()},e.ctorParameters=function(){return[{type:void 0,decorators:[{type:r.Inject,args:[yn]}]}]},e}(b),bn=function(){function t(t){this._doc=t,this._dom=ln()}return t.prototype.addTag=function(t,e){return void 0===e&&(e=!1),t?this._getOrCreateElement(t,e):null},t.prototype.addTags=function(t,e){var n=this;return void 0===e&&(e=!1),t?t.reduce(function(t,r){return r&&t.push(n._getOrCreateElement(r,e)),t},[]):[]},t.prototype.getTag=function(t){return t&&this._dom.querySelector(this._doc,"meta["+t+"]")||null},t.prototype.getTags=function(t){if(!t)return[];var e=this._dom.querySelectorAll(this._doc,"meta["+t+"]");return e?[].slice.call(e):[]},t.prototype.updateTag=function(t,e){if(!t)return null;e=e||this._parseSelector(t);var n=this.getTag(e);return n?this._setMetaElementAttributes(t,n):this._getOrCreateElement(t,!0)},t.prototype.removeTag=function(t){this.removeTagElement(this.getTag(t))},t.prototype.removeTagElement=function(t){t&&this._dom.remove(t)},t.prototype._getOrCreateElement=function(t,e){if(void 0===e&&(e=!1),!e){var n=this._parseSelector(t),r=this.getTag(n);if(r&&this._containsAttributes(t,r))return r}var i=this._dom.createElement("meta");this._setMetaElementAttributes(t,i);var o=this._dom.getElementsByTagName(this._doc,"head")[0];return this._dom.appendChild(o,i),i},t.prototype._setMetaElementAttributes=function(t,e){var n=this;return Object.keys(t).forEach(function(r){return n._dom.setAttribute(e,r,t[r])}),e},t.prototype._parseSelector=function(t){var e=t.name?"name":"property";return e+'="'+t[e]+'"'},t.prototype._containsAttributes=function(t,e){var n=this;return Object.keys(t).every(function(r){return n._dom.getAttribute(e,r)===t[r]})},t}(),xn=new r.InjectionToken("TRANSITION_ID"),wn=[{provide:r.APP_INITIALIZER,useFactory:function(t,e,n){return function(){n.get(r.ApplicationInitStatus).donePromise.then(function(){var n=ln();Array.prototype.slice.apply(n.querySelectorAll(e,"style[ng-transition]")).filter(function(e){return n.getAttribute(e,"ng-transition")===t}).forEach(function(t){return n.remove(t)})})}},deps:[xn,yn,r.Injector],multi:!0}],En=function(){function t(){}return t.init=function(){Object(r.setTestabilityGetter)(new t)},t.prototype.addToWindow=function(t){r["\u0275global"].getAngularTestability=function(e,n){void 0===n&&(n=!0);var r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r["\u0275global"].getAllAngularTestabilities=function(){return t.getAllTestabilities()},r["\u0275global"].getAllAngularRootElements=function(){return t.getAllRootElements()},r["\u0275global"].frameworkStabilizers||(r["\u0275global"].frameworkStabilizers=[]),r["\u0275global"].frameworkStabilizers.push(function(t){var e=r["\u0275global"].getAllAngularTestabilities(),n=e.length,i=!1,o=function(e){i=i||e,0==--n&&t(i)};e.forEach(function(t){t.whenStable(o)})})},t.prototype.findTestabilityInTree=function(t,e,n){if(null==e)return null;var r=t.getTestability(e);return null!=r?r:n?ln().isShadowRoot(e)?this.findTestabilityInTree(t,ln().getHost(e),!0):this.findTestabilityInTree(t,ln().parentElement(e),!0):null},t}(),Cn=function(){function t(t){this._doc=t}return t.prototype.getTitle=function(){return ln().getTitle(this._doc)},t.prototype.setTitle=function(t){ln().setTitle(this._doc,t)},t}();function Sn(t,e){"undefined"!=typeof COMPILED&&COMPILED||((r["\u0275global"].ng=r["\u0275global"].ng||{})[t]=e)}var In={ApplicationRef:r.ApplicationRef,NgZone:r.NgZone};function Tn(t){return Object(r.getDebugNode)(t)}var kn=new r.InjectionToken("EventManagerPlugins"),On=function(){function t(t,e){var n=this;this._zone=e,this._eventNameToPlugin=new Map,t.forEach(function(t){return t.manager=n}),this._plugins=t.slice().reverse()}return t.prototype.addEventListener=function(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)},t.prototype.addGlobalEventListener=function(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)},t.prototype.getZone=function(){return this._zone},t.prototype._findPluginFor=function(t){var e=this._eventNameToPlugin.get(t);if(e)return e;for(var n=this._plugins,r=0;r<n.length;r++){var i=n[r];if(i.supports(t))return this._eventNameToPlugin.set(t,i),i}throw new Error("No event manager plugin found for event "+t)},t}(),Pn=function(){function t(t){this._doc=t}return t.prototype.addGlobalEventListener=function(t,e,n){var r=ln().getGlobalEventTarget(this._doc,t);if(!r)throw new Error("Unsupported event target "+r+" for event "+e);return this.addEventListener(r,e,n)},t}(),An=function(){function t(){this._stylesSet=new Set}return t.prototype.addStyles=function(t){var e=this,n=new Set;t.forEach(function(t){e._stylesSet.has(t)||(e._stylesSet.add(t),n.add(t))}),this.onStylesAdded(n)},t.prototype.onStylesAdded=function(t){},t.prototype.getAllStyles=function(){return Array.from(this._stylesSet)},t}(),Mn=function(t){function e(e){var n=t.call(this)||this;return n._doc=e,n._hostNodes=new Set,n._styleNodes=new Set,n._hostNodes.add(e.head),n}return Object(v.c)(e,t),e.prototype._addStylesToHost=function(t,e){var n=this;t.forEach(function(t){var r=n._doc.createElement("style");r.textContent=t,n._styleNodes.add(e.appendChild(r))})},e.prototype.addHost=function(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)},e.prototype.removeHost=function(t){this._hostNodes.delete(t)},e.prototype.onStylesAdded=function(t){var e=this;this._hostNodes.forEach(function(n){return e._addStylesToHost(t,n)})},e.prototype.ngOnDestroy=function(){this._styleNodes.forEach(function(t){return ln().remove(t)})},e}(An),Rn={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Ln=/%COMP%/g,Nn="_nghost-%COMP%",Dn="_ngcontent-%COMP%";function Fn(t,e,n){for(var r=0;r<e.length;r++){var i=e[r];Array.isArray(i)?Fn(t,i,n):(i=i.replace(Ln,t),n.push(i))}return n}function zn(t){return function(e){!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}var jn=function(){function t(t,e){this.eventManager=t,this.sharedStylesHost=e,this.rendererByCompId=new Map,this.defaultRenderer=new Bn(t)}return t.prototype.createRenderer=function(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.ViewEncapsulation.Emulated:var n=this.rendererByCompId.get(e.id);return n||(n=new Gn(this.eventManager,this.sharedStylesHost,e),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n;case r.ViewEncapsulation.Native:return new Xn(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){var i=Fn(e.id,e.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}},t.prototype.begin=function(){},t.prototype.end=function(){},t}(),Bn=function(){function t(t){this.eventManager=t,this.data=Object.create(null)}return t.prototype.destroy=function(){},t.prototype.createElement=function(t,e){return e?document.createElementNS(Rn[e],t):document.createElement(t)},t.prototype.createComment=function(t){return document.createComment(t)},t.prototype.createText=function(t){return document.createTextNode(t)},t.prototype.appendChild=function(t,e){t.appendChild(e)},t.prototype.insertBefore=function(t,e,n){t&&t.insertBefore(e,n)},t.prototype.removeChild=function(t,e){t&&t.removeChild(e)},t.prototype.selectRootElement=function(t){var e="string"==typeof t?document.querySelector(t):t;if(!e)throw new Error('The selector "'+t+'" did not match any elements');return e.textContent="",e},t.prototype.parentNode=function(t){return t.parentNode},t.prototype.nextSibling=function(t){return t.nextSibling},t.prototype.setAttribute=function(t,e,n,r){if(r){e=r+":"+e;var i=Rn[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)},t.prototype.removeAttribute=function(t,e,n){if(n){var r=Rn[n];r?t.removeAttributeNS(r,e):t.removeAttribute(n+":"+e)}else t.removeAttribute(e)},t.prototype.addClass=function(t,e){t.classList.add(e)},t.prototype.removeClass=function(t,e){t.classList.remove(e)},t.prototype.setStyle=function(t,e,n,i){i&r.RendererStyleFlags2.DashCase?t.style.setProperty(e,n,i&r.RendererStyleFlags2.Important?"important":""):t.style[e]=n},t.prototype.removeStyle=function(t,e,n){n&r.RendererStyleFlags2.DashCase?t.style.removeProperty(e):t.style[e]=""},t.prototype.setProperty=function(t,e,n){qn(e,"property"),t[e]=n},t.prototype.setValue=function(t,e){t.nodeValue=e},t.prototype.listen=function(t,e,n){return qn(e,"listener"),"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,zn(n)):this.eventManager.addEventListener(t,e,zn(n))},t}(),Vn="@".charCodeAt(0);function qn(t,e){if(t.charCodeAt(0)===Vn)throw new Error("Found the synthetic "+e+" "+t+'. Please include either "BrowserAnimationsModule" or "NoopAnimationsModule" in your application.')}var Un,Gn=function(t){function e(e,n,r){var i=t.call(this,e)||this;i.component=r;var o=Fn(r.id,r.styles,[]);return n.addStyles(o),i.contentAttr=Dn.replace(Ln,r.id),i.hostAttr=Nn.replace(Ln,r.id),i}return Object(v.c)(e,t),e.prototype.applyToHost=function(e){t.prototype.setAttribute.call(this,e,this.hostAttr,"")},e.prototype.createElement=function(e,n){var r=t.prototype.createElement.call(this,e,n);return t.prototype.setAttribute.call(this,r,this.contentAttr,""),r},e}(Bn),Xn=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;o.sharedStylesHost=n,o.hostEl=r,o.component=i,o.shadowRoot=r.createShadowRoot(),o.sharedStylesHost.addHost(o.shadowRoot);for(var a=Fn(i.id,i.styles,[]),s=0;s<a.length;s++){var u=document.createElement("style");u.textContent=a[s],o.shadowRoot.appendChild(u)}return o}return Object(v.c)(e,t),e.prototype.nodeOrShadowRoot=function(t){return t===this.hostEl?this.shadowRoot:t},e.prototype.destroy=function(){this.sharedStylesHost.removeHost(this.shadowRoot)},e.prototype.appendChild=function(e,n){return t.prototype.appendChild.call(this,this.nodeOrShadowRoot(e),n)},e.prototype.insertBefore=function(e,n,r){return t.prototype.insertBefore.call(this,this.nodeOrShadowRoot(e),n,r)},e.prototype.removeChild=function(e,n){return t.prototype.removeChild.call(this,this.nodeOrShadowRoot(e),n)},e.prototype.parentNode=function(e){return this.nodeOrShadowRoot(t.prototype.parentNode.call(this,this.nodeOrShadowRoot(e)))},e}(Bn),Hn="undefined"!=typeof Zone&&Zone.__symbol__||function(t){return"__zone_symbol__"+t},Yn=Hn("addEventListener"),Zn=Hn("removeEventListener"),Wn={},Kn="__zone_symbol__propagationStopped";"undefined"!=typeof Zone&&Zone[Hn("BLACK_LISTED_EVENTS")]&&(Un={});var Jn=function(t){return!!Un&&Un.hasOwnProperty(t)},Qn=function(t){var e=Wn[t.type];if(e){var n=this[e];if(n){var r=[t];if(1===n.length)return(a=n[0]).zone!==Zone.current?a.zone.run(a.handler,this,r):a.handler.apply(this,r);for(var i=n.slice(),o=0;o<i.length&&!0!==t[Kn];o++){var a;(a=i[o]).zone!==Zone.current?a.zone.run(a.handler,this,r):a.handler.apply(this,r)}}}},$n=function(t){function e(e,n){var r=t.call(this,e)||this;return r.ngZone=n,r.patchEvent(),r}return Object(v.c)(e,t),e.prototype.patchEvent=function(){if(Event&&Event.prototype&&!Event.prototype.__zone_symbol__stopImmediatePropagation){var t=Event.prototype.__zone_symbol__stopImmediatePropagation=Event.prototype.stopImmediatePropagation;Event.prototype.stopImmediatePropagation=function(){this&&(this[Kn]=!0),t&&t.apply(this,arguments)}}},e.prototype.supports=function(t){return!0},e.prototype.addEventListener=function(t,e,n){var i=this,o=n;if(!t[Yn]||r.NgZone.isInAngularZone()&&!Jn(e))t.addEventListener(e,o,!1);else{var a=Wn[e];a||(a=Wn[e]=Hn("ANGULAR"+e+"FALSE"));var s=t[a],u=s&&s.length>0;s||(s=t[a]=[]);var l=Jn(e)?Zone.root:Zone.current;if(0===s.length)s.push({zone:l,handler:o});else{for(var c=!1,h=0;h<s.length;h++)if(s[h].handler===o){c=!0;break}c||s.push({zone:l,handler:o})}u||t[Yn](e,Qn,!1)}return function(){return i.removeEventListener(t,e,o)}},e.prototype.removeEventListener=function(t,e,n){var r=t[Zn];if(!r)return t.removeEventListener.apply(t,[e,n,!1]);var i=Wn[e],o=i&&t[i];if(!o)return t.removeEventListener.apply(t,[e,n,!1]);for(var a=!1,s=0;s<o.length;s++)if(o[s].handler===n){a=!0,o.splice(s,1);break}a?0===o.length&&r.apply(t,[e,Qn,!1]):t.removeEventListener.apply(t,[e,n,!1])},e}(Pn),tr={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0},er=new r.InjectionToken("HammerGestureConfig"),nr=function(){function t(){this.events=[],this.overrides={}}return t.prototype.buildHammer=function(t){var e=new Hammer(t);for(var n in e.get("pinch").set({enable:!0}),e.get("rotate").set({enable:!0}),this.overrides)e.get(n).set(this.overrides[n]);return e},t}(),rr=function(t){function e(e,n){var r=t.call(this,e)||this;return r._config=n,r}return Object(v.c)(e,t),e.prototype.supports=function(t){if(!tr.hasOwnProperty(t.toLowerCase())&&!this.isCustomEvent(t))return!1;if(!window.Hammer)throw new Error("Hammer.js is not loaded, can not bind "+t+" event");return!0},e.prototype.addEventListener=function(t,e,n){var r=this,i=this.manager.getZone();return e=e.toLowerCase(),i.runOutsideAngular(function(){var o=r._config.buildHammer(t),a=function(t){i.runGuarded(function(){n(t)})};return o.on(e,a),function(){return o.off(e,a)}})},e.prototype.isCustomEvent=function(t){return this._config.events.indexOf(t)>-1},e}(Pn),ir=["alt","control","meta","shift"],or={alt:function(t){return t.altKey},control:function(t){return t.ctrlKey},meta:function(t){return t.metaKey},shift:function(t){return t.shiftKey}},ar=function(t){function e(e){return t.call(this,e)||this}return Object(v.c)(e,t),e.prototype.supports=function(t){return null!=e.parseEventName(t)},e.prototype.addEventListener=function(t,n,r){var i=e.parseEventName(n),o=e.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(function(){return ln().onAndCancel(t,i.domEventName,o)})},e.parseEventName=function(t){var n=t.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;var i=e._normalizeKey(n.pop()),o="";if(ir.forEach(function(t){var e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;var a={};return a.domEventName=r,a.fullKey=o,a},e.getEventFullKey=function(t){var e="",n=ln().getEventKey(t);return" "===(n=n.toLowerCase())?n="space":"."===n&&(n="dot"),ir.forEach(function(r){r!=n&&(0,or[r])(t)&&(e+=r+".")}),e+=n},e.eventCallback=function(t,n,r){return function(i){e.getEventFullKey(i)===t&&r.runGuarded(function(){return n(i)})}},e._normalizeKey=function(t){switch(t){case"esc":return"escape";default:return t}},e}(Pn),sr=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,ur=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function lr(t){return(t=String(t)).match(sr)||t.match(ur)?t:(Object(r.isDevMode)()&&ln().log("WARNING: sanitizing unsafe URL value "+t+" (see http://g.co/ng/security#xss)"),"unsafe:"+t)}var cr=null,hr=null;function pr(t){for(var e={},n=0,r=t.split(",");n<r.length;n++)e[r[n]]=!0;return e}function fr(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n={},r=0,i=t;r<i.length;r++){var o=i[r];for(var a in o)o.hasOwnProperty(a)&&(n[a]=!0)}return n}var dr=pr("area,br,col,hr,img,wbr"),mr=pr("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),gr=pr("rp,rt"),yr=fr(gr,mr),vr=fr(dr,fr(mr,pr("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),fr(gr,pr("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),yr),_r=pr("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),br=pr("srcset"),xr=fr(_r,br,pr("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width")),wr=function(){function t(){this.sanitizedSomething=!1,this.buf=[]}return t.prototype.sanitizeChildren=function(t){for(var e=t.firstChild;e;)if(hr.isElementNode(e)?this.startElement(e):hr.isTextNode(e)?this.chars(hr.nodeValue(e)):this.sanitizedSomething=!0,hr.firstChild(e))e=hr.firstChild(e);else for(;e;){hr.isElementNode(e)&&this.endElement(e);var n=Er(e,hr.nextSibling(e));if(n){e=n;break}e=Er(e,hr.parentElement(e))}return this.buf.join("")},t.prototype.startElement=function(t){var e=this,n=hr.nodeName(t).toLowerCase();vr.hasOwnProperty(n)?(this.buf.push("<"),this.buf.push(n),hr.attributeMap(t).forEach(function(t,n){var r,i=n.toLowerCase();xr.hasOwnProperty(i)?(_r[i]&&(t=lr(t)),br[i]&&(r=t,t=(r=String(r)).split(",").map(function(t){return lr(t.trim())}).join(", ")),e.buf.push(" "),e.buf.push(n),e.buf.push('="'),e.buf.push(Ir(t)),e.buf.push('"')):e.sanitizedSomething=!0}),this.buf.push(">")):this.sanitizedSomething=!0},t.prototype.endElement=function(t){var e=hr.nodeName(t).toLowerCase();vr.hasOwnProperty(e)&&!dr.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))},t.prototype.chars=function(t){this.buf.push(Ir(t))},t}();function Er(t,e){if(e&&hr.contains(t,e))throw new Error("Failed to sanitize html because the element is clobbered: "+hr.getOuterHTML(t));return e}var Cr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Sr=/([^\#-~ |!])/g;function Ir(t){return t.replace(/&/g,"&amp;").replace(Cr,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(Sr,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Tr(t){hr.attributeMap(t).forEach(function(e,n){"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||hr.removeAttribute(t,n)});for(var e=0,n=hr.childNodesAsList(t);e<n.length;e++){var r=n[e];hr.isElementNode(r)&&Tr(r)}}var kr=new RegExp("^([-,.\"'%_!# a-zA-Z0-9]+|(?:(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|3d)?|(?:rgb|hsl)a?|(?:repeating-)?(?:linear|radial)-gradient|(?:calc|attr))\\([-0-9.%, #a-zA-Z]+\\))$","g"),Or=/^url\(([^)]+)\)$/,Pr=function(){},Ar=function(t){function e(e){var n=t.call(this)||this;return n._doc=e,n}return Object(v.c)(e,t),e.prototype.sanitize=function(t,e){if(null==e)return null;switch(t){case r.SecurityContext.NONE:return e;case r.SecurityContext.HTML:return e instanceof Rr?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"HTML"),function(t,e){try{var n=function(){if(cr)return cr;var t=(hr=ln()).createElement("template");if("content"in t)return t;var e=hr.createHtmlDocument();if(null==(cr=hr.querySelector(e,"body"))){var n=hr.createElement("html",e);cr=hr.createElement("body",e),hr.appendChild(n,cr),hr.appendChild(e,n)}return cr}(),i=e?String(e):"",o=5,a=i;do{if(0===o)throw new Error("Failed to sanitize html because the input is unstable");o--,hr.setInnerHTML(n,i=a),t.documentMode&&Tr(n),a=hr.getInnerHTML(n)}while(i!==a);for(var s=new wr,u=s.sanitizeChildren(hr.getTemplateContent(n)||n),l=hr.getTemplateContent(n)||n,c=0,h=hr.childNodesAsList(l);c<h.length;c++)hr.removeChild(l,h[c]);return Object(r.isDevMode)()&&s.sanitizedSomething&&hr.log("WARNING: sanitizing HTML stripped some content (see http://g.co/ng/security#xss)."),u}catch(t){throw cr=null,t}}(this._doc,String(e)));case r.SecurityContext.STYLE:return e instanceof Lr?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"Style"),function(t){if(!(t=String(t).trim()))return"";var e=t.match(Or);return e&&lr(e[1])===e[1]||t.match(kr)&&function(t){for(var e=!0,n=!0,r=0;r<t.length;r++){var i=t.charAt(r);"'"===i&&n?e=!e:'"'===i&&e&&(n=!n)}return e&&n}(t)?t:(Object(r.isDevMode)()&&ln().log("WARNING: sanitizing unsafe style value "+t+" (see http://g.co/ng/security#xss)."),"unsafe")}(e));case r.SecurityContext.SCRIPT:if(e instanceof Nr)return e.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(e,"Script"),new Error("unsafe value used in a script context");case r.SecurityContext.URL:return e instanceof Fr||e instanceof Dr?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"URL"),lr(String(e)));case r.SecurityContext.RESOURCE_URL:if(e instanceof Fr)return e.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(e,"ResourceURL"),new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error("Unexpected SecurityContext "+t+" (see http://g.co/ng/security#xss)")}},e.prototype.checkNotSafeValue=function(t,e){if(t instanceof Mr)throw new Error("Required a safe "+e+", got a "+t.getTypeName()+" (see http://g.co/ng/security#xss)")},e.prototype.bypassSecurityTrustHtml=function(t){return new Rr(t)},e.prototype.bypassSecurityTrustStyle=function(t){return new Lr(t)},e.prototype.bypassSecurityTrustScript=function(t){return new Nr(t)},e.prototype.bypassSecurityTrustUrl=function(t){return new Dr(t)},e.prototype.bypassSecurityTrustResourceUrl=function(t){return new Fr(t)},e}(Pr),Mr=function(){function t(t){this.changingThisBreaksApplicationSecurity=t}return t.prototype.toString=function(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"},t}(),Rr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(v.c)(e,t),e.prototype.getTypeName=function(){return"HTML"},e}(Mr),Lr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(v.c)(e,t),e.prototype.getTypeName=function(){return"Style"},e}(Mr),Nr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(v.c)(e,t),e.prototype.getTypeName=function(){return"Script"},e}(Mr),Dr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(v.c)(e,t),e.prototype.getTypeName=function(){return"URL"},e}(Mr),Fr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(v.c)(e,t),e.prototype.getTypeName=function(){return"ResourceURL"},e}(Mr),zr=[{provide:r.PLATFORM_ID,useValue:"browser"},{provide:r.PLATFORM_INITIALIZER,useValue:function(){mn.makeCurrent(),En.init()},multi:!0},{provide:b,useClass:_n,deps:[yn]},{provide:yn,useFactory:function(){return document},deps:[]}],jr=Object(r.createPlatformFactory)(r.platformCore,"browser",zr);function Br(){return new r.ErrorHandler}var Vr=function(){function t(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}return t.withServerTransition=function(e){return{ngModule:t,providers:[{provide:r.APP_ID,useValue:e.appId},{provide:xn,useExisting:r.APP_ID},wn]}},t}();"undefined"!=typeof window&&window;var qr=new r.InjectionToken("mat-sanity-checks"),Ur=function(){function t(t){this._sanityChecksEnabled=t,this._hasDoneGlobalChecks=!1,this._hasCheckedHammer=!1,this._document="object"==typeof document&&document?document:null,this._window="object"==typeof window&&window?window:null,this._areChecksEnabled()&&!this._hasDoneGlobalChecks&&(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._hasDoneGlobalChecks=!0)}return t.prototype._areChecksEnabled=function(){return this._sanityChecksEnabled&&Object(r.isDevMode)()&&!this._isTestEnv()},t.prototype._isTestEnv=function(){return this._window&&(this._window.__karma__||this._window.jasmine)},t.prototype._checkDoctypeIsDefined=function(){this._document&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")},t.prototype._checkThemeIsPresent=function(){if(this._document&&"function"==typeof getComputedStyle){var t=this._document.createElement("div");t.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(t);var e=getComputedStyle(t);e&&"none"!==e.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(t)}},t.prototype._checkHammerIsAvailable=function(){!this._hasCheckedHammer&&this._window&&(this._areChecksEnabled()&&!this._window.Hammer&&console.warn("Could not find HammerJS. Certain Angular Material components may not work correctly."),this._hasCheckedHammer=!0)},t}();function Gr(t){return function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=t.apply(this,e)||this;return r._disabled=!1,r}return Object(v.c)(e,t),Object.defineProperty(e.prototype,"disabled",{get:function(){return this._disabled},set:function(t){this._disabled=re(t)},enumerable:!0,configurable:!0}),e}(t)}function Xr(t,e){return function(t){function n(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=t.apply(this,n)||this;return i.color=e,i}return Object(v.c)(n,t),Object.defineProperty(n.prototype,"color",{get:function(){return this._color},set:function(t){var n=t||e;n!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove("mat-"+this._color),n&&this._elementRef.nativeElement.classList.add("mat-"+n),this._color=n)},enumerable:!0,configurable:!0}),n}(t)}function Hr(t){return function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=t.apply(this,e)||this;return r._disableRipple=!1,r}return Object(v.c)(e,t),Object.defineProperty(e.prototype,"disableRipple",{get:function(){return this._disableRipple},set:function(t){this._disableRipple=re(t)},enumerable:!0,configurable:!0}),e}(t)}function Yr(t,e){return void 0===e&&(e=0),function(t){function n(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=t.apply(this,n)||this;return i._tabIndex=e,i}return Object(v.c)(n,t),Object.defineProperty(n.prototype,"tabIndex",{get:function(){return this.disabled?-1:this._tabIndex},set:function(t){this._tabIndex=null!=t?t:e},enumerable:!0,configurable:!0}),n}(t)}function Zr(t){return function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=t.apply(this,e)||this;return r.errorState=!1,r.stateChanges=new ct.a,r}return Object(v.c)(e,t),e.prototype.updateErrorState=function(){var t=this.errorState,e=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);e!==t&&(this.errorState=e,this.stateChanges.next())},e}(t)}var Wr=function(){function t(){}return t.prototype.isErrorState=function(t,e){return!!(t&&t.invalid&&(t.touched||e&&e.submitted))},t}(),Kr=new r.InjectionToken("MAT_HAMMER_OPTIONS"),Jr=function(t){function e(e,n){var r=t.call(this)||this;return r._hammerOptions=e,r._hammer="undefined"!=typeof window?window.Hammer:null,r.events=r._hammer?["longpress","slide","slidestart","slideend","slideright","slideleft"]:[],n&&n._checkHammerIsAvailable(),r}return Object(v.c)(e,t),e.prototype.buildHammer=function(t){var e=new this._hammer(t,this._hammerOptions||void 0),n=new this._hammer.Pan,r=new this._hammer.Swipe,i=new this._hammer.Press,o=this._createRecognizer(n,{event:"slide",threshold:0},r),a=this._createRecognizer(i,{event:"longpress",time:500});return n.recognizeWith(r),e.add([r,i,n,o,a]),e},e.prototype._createRecognizer=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=new t.constructor(e);return n.push(t),n.forEach(function(t){return i.recognizeWith(t)}),i},e}(nr),Qr=function(){},$r=function(){var t={FADING_IN:0,VISIBLE:1,FADING_OUT:2,HIDDEN:3};return t[t.FADING_IN]="FADING_IN",t[t.VISIBLE]="VISIBLE",t[t.FADING_OUT]="FADING_OUT",t[t.HIDDEN]="HIDDEN",t}(),ti=function(){function t(t,e,n){this._renderer=t,this.element=e,this.config=n,this.state=$r.HIDDEN}return t.prototype.fadeOut=function(){this._renderer.fadeOutRipple(this)},t}(),ei={enterDuration:450,exitDuration:400},ni=800,ri=function(){function t(t,e,n,r){var i=this;this._target=t,this._ngZone=e,this._isPointerDown=!1,this._triggerEvents=new Map,this._activeRipples=new Set,this._eventOptions=!!at()&&{passive:!0},this.onMousedown=function(t){var e=i._lastTouchStartEvent&&Date.now()<i._lastTouchStartEvent+ni;i._target.rippleDisabled||e||(i._isPointerDown=!0,i.fadeInRipple(t.clientX,t.clientY,i._target.rippleConfig))},this.onTouchStart=function(t){i._target.rippleDisabled||(i._lastTouchStartEvent=Date.now(),i._isPointerDown=!0,i.fadeInRipple(t.touches[0].clientX,t.touches[0].clientY,i._target.rippleConfig))},this.onPointerUp=function(){i._isPointerDown&&(i._isPointerDown=!1,i._activeRipples.forEach(function(t){!t.config.persistent&&(t.state===$r.VISIBLE||t.config.terminateOnPointerUp&&t.state===$r.FADING_IN)&&t.fadeOut()}))},r.isBrowser&&(this._containerElement=n.nativeElement,this._triggerEvents.set("mousedown",this.onMousedown),this._triggerEvents.set("mouseup",this.onPointerUp),this._triggerEvents.set("mouseleave",this.onPointerUp),this._triggerEvents.set("touchstart",this.onTouchStart),this._triggerEvents.set("touchend",this.onPointerUp))}return t.prototype.fadeInRipple=function(t,e,n){var r=this;void 0===n&&(n={});var i=this._containerElement.getBoundingClientRect(),o=Object(v.a)({},ei,n.animation);n.centered&&(t=i.left+i.width/2,e=i.top+i.height/2);var a=n.radius||function(t,e,n){var r=Math.max(Math.abs(t-n.left),Math.abs(t-n.right)),i=Math.max(Math.abs(e-n.top),Math.abs(e-n.bottom));return Math.sqrt(r*r+i*i)}(t,e,i),s=t-i.left,u=e-i.top,l=o.enterDuration/(n.speedFactor||1),c=document.createElement("div");c.classList.add("mat-ripple-element"),c.style.left=s-a+"px",c.style.top=u-a+"px",c.style.height=2*a+"px",c.style.width=2*a+"px",c.style.backgroundColor=n.color||null,c.style.transitionDuration=l+"ms",this._containerElement.appendChild(c),window.getComputedStyle(c).getPropertyValue("opacity"),c.style.transform="scale(1)";var h=new ti(this,c,n);return h.state=$r.FADING_IN,this._activeRipples.add(h),this.runTimeoutOutsideZone(function(){h.state=$r.VISIBLE,n.persistent||r._isPointerDown||h.fadeOut()},l),h},t.prototype.fadeOutRipple=function(t){if(this._activeRipples.delete(t)){var e=t.element,n=Object(v.a)({},ei,t.config.animation);e.style.transitionDuration=n.exitDuration+"ms",e.style.opacity="0",t.state=$r.FADING_OUT,this.runTimeoutOutsideZone(function(){t.state=$r.HIDDEN,e.parentNode.removeChild(e)},n.exitDuration)}},t.prototype.fadeOutAll=function(){this._activeRipples.forEach(function(t){return t.fadeOut()})},t.prototype.setupTriggerEvents=function(t){var e=this;t&&t!==this._triggerElement&&(this._removeTriggerEvents(),this._ngZone.runOutsideAngular(function(){e._triggerEvents.forEach(function(n,r){return t.addEventListener(r,n,e._eventOptions)})}),this._triggerElement=t)},t.prototype.runTimeoutOutsideZone=function(t,e){void 0===e&&(e=0),this._ngZone.runOutsideAngular(function(){return setTimeout(t,e)})},t.prototype._removeTriggerEvents=function(){var t=this;this._triggerElement&&this._triggerEvents.forEach(function(e,n){t._triggerElement.removeEventListener(n,e,t._eventOptions)})},t}(),ii=new r.InjectionToken("mat-ripple-global-options"),oi=function(){function t(t,e,n,r){this._elementRef=t,this.radius=0,this.speedFactor=1,this._disabled=!1,this._isInitialized=!1,this._globalOptions=r||{},this._rippleRenderer=new ri(this,e,t,n)}return Object.defineProperty(t.prototype,"disabled",{get:function(){return this._disabled},set:function(t){this._disabled=t,this._setupTriggerEventsIfEnabled()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"trigger",{get:function(){return this._trigger||this._elementRef.nativeElement},set:function(t){this._trigger=t,this._setupTriggerEventsIfEnabled()},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()},t.prototype.ngOnDestroy=function(){this._rippleRenderer._removeTriggerEvents()},t.prototype.launch=function(t,e,n){return this._rippleRenderer.fadeInRipple(t,e,Object(v.a)({},this.rippleConfig,n))},t.prototype.fadeOutAll=function(){this._rippleRenderer.fadeOutAll()},Object.defineProperty(t.prototype,"rippleConfig",{get:function(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object(v.a)({},this._globalOptions.animation,this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp,speedFactor:this.speedFactor*(this._globalOptions.baseSpeedFactor||1)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rippleDisabled",{get:function(){return this.disabled||!!this._globalOptions.disabled},enumerable:!0,configurable:!0}),t.prototype._setupTriggerEventsIfEnabled=function(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)},t}(),ai=function(){},si=function(){this.state="unchecked",this.disabled=!1},ui=function(){},li=0,ci=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._labelId="mat-optgroup-label-"+li++,e}return Object(v.c)(e,t),e}(Gr(function(){})),hi=0,pi=new r.InjectionToken("MAT_OPTION_PARENT_COMPONENT"),fi=function(){function t(t,e,n,i){this._element=t,this._changeDetectorRef=e,this._parent=n,this.group=i,this._selected=!1,this._active=!1,this._disabled=!1,this._id="mat-option-"+hi++,this._mostRecentViewValue="",this.onSelectionChange=new r.EventEmitter,this._stateChanges=new ct.a}return Object.defineProperty(t.prototype,"multiple",{get:function(){return this._parent&&this._parent.multiple},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selected",{get:function(){return this._selected},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disabled",{get:function(){return this.group&&this.group.disabled||this._disabled},set:function(t){this._disabled=re(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disableRipple",{get:function(){return this._parent&&this._parent.disableRipple},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"active",{get:function(){return this._active},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"viewValue",{get:function(){return(this._getHostElement().textContent||"").trim()},enumerable:!0,configurable:!0}),t.prototype.select=function(){this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent()},t.prototype.deselect=function(){this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent()},t.prototype.focus=function(){var t=this._getHostElement();"function"==typeof t.focus&&t.focus()},t.prototype.setActiveStyles=function(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())},t.prototype.setInactiveStyles=function(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())},t.prototype.getLabel=function(){return this.viewValue},t.prototype._handleKeydown=function(t){13!==t.keyCode&&32!==t.keyCode||(this._selectViaInteraction(),t.preventDefault())},t.prototype._selectViaInteraction=function(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))},t.prototype._getTabIndex=function(){return this.disabled?"-1":"0"},t.prototype._getHostElement=function(){return this._element.nativeElement},t.prototype.ngAfterViewChecked=function(){if(this._selected){var t=this.viewValue;t!==this._mostRecentViewValue&&(this._mostRecentViewValue=t,this._stateChanges.next())}},t.prototype._emitSelectionChangeEvent=function(t){void 0===t&&(t=!1),this.onSelectionChange.emit(new function(t,e){void 0===e&&(e=!1),this.source=t,this.isUserInput=e}(this,t))},t}();function di(t,e,n){if(n.length){for(var r=e.toArray(),i=n.toArray(),o=0,a=0;a<t+1;a++)r[a].group&&r[a].group===i[o]&&o++;return o}return 0}var mi=function(){},gi=new r.InjectionToken("mat-label-global-options"),yi=function(t){function e(e){t.call(this),this.observableFactory=e}return Object(v.c)(e,t),e.create=function(t){return new e(t)},e.prototype._subscribe=function(t){return new vi(t,this.observableFactory)},e}(ht.Observable),vi=function(t){function e(e,n){t.call(this,e),this.factory=n,this.tryDefer()}return Object(v.c)(e,t),e.prototype.tryDefer=function(){try{this._callFactory()}catch(t){this._error(t)}},e.prototype._callFactory=function(){var t=this.factory();t&&this.add(Object(Ct.a)(this,t))},e}(Et.a),_i=yi.create,bi=n("8Ut3"),xi=n("fgj+"),wi=n("bywS");function Ei(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return function(e){var n=t[t.length-1];Object(kt.a)(n)?t.pop():n=null;var r=t.length;return function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return 1===t.length||2===t.length&&Object(kt.a)(t[1])?Object(xi.a)(t[0]):Object(wi.a)(1)(ft.apply(void 0,t))}(1===r?new bi.a(t[0],n):r>1?new pt.a(t,n):new $t.a(n),e)}}var Ci=function(){},Si="*";function Ii(t,e){return void 0===e&&(e=null),{type:2,steps:t,options:e}}function Ti(t){return{type:6,styles:t,offset:null}}function ki(t){Promise.resolve(null).then(t)}var Oi=function(){function t(){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this.parentPlayer=null,this.totalTime=0}return t.prototype._onFinish=function(){this._finished||(this._finished=!0,this._onDoneFns.forEach(function(t){return t()}),this._onDoneFns=[])},t.prototype.onStart=function(t){this._onStartFns.push(t)},t.prototype.onDone=function(t){this._onDoneFns.push(t)},t.prototype.onDestroy=function(t){this._onDestroyFns.push(t)},t.prototype.hasStarted=function(){return this._started},t.prototype.init=function(){},t.prototype.play=function(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0},t.prototype.triggerMicrotask=function(){var t=this;ki(function(){return t._onFinish()})},t.prototype._onStart=function(){this._onStartFns.forEach(function(t){return t()}),this._onStartFns=[]},t.prototype.pause=function(){},t.prototype.restart=function(){},t.prototype.finish=function(){this._onFinish()},t.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(function(t){return t()}),this._onDestroyFns=[])},t.prototype.reset=function(){},t.prototype.setPosition=function(t){},t.prototype.getPosition=function(){return 0},t.prototype.triggerCallback=function(t){var e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(function(t){return t()}),e.length=0},t}(),Pi=function(){function t(t){var e=this;this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;var n=0,r=0,i=0,o=this.players.length;0==o?ki(function(){return e._onFinish()}):this.players.forEach(function(t){t.onDone(function(){++n==o&&e._onFinish()}),t.onDestroy(function(){++r==o&&e._onDestroy()}),t.onStart(function(){++i==o&&e._onStart()})}),this.totalTime=this.players.reduce(function(t,e){return Math.max(t,e.totalTime)},0)}return t.prototype._onFinish=function(){this._finished||(this._finished=!0,this._onDoneFns.forEach(function(t){return t()}),this._onDoneFns=[])},t.prototype.init=function(){this.players.forEach(function(t){return t.init()})},t.prototype.onStart=function(t){this._onStartFns.push(t)},t.prototype._onStart=function(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(function(t){return t()}),this._onStartFns=[])},t.prototype.onDone=function(t){this._onDoneFns.push(t)},t.prototype.onDestroy=function(t){this._onDestroyFns.push(t)},t.prototype.hasStarted=function(){return this._started},t.prototype.play=function(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(function(t){return t.play()})},t.prototype.pause=function(){this.players.forEach(function(t){return t.pause()})},t.prototype.restart=function(){this.players.forEach(function(t){return t.restart()})},t.prototype.finish=function(){this._onFinish(),this.players.forEach(function(t){return t.finish()})},t.prototype.destroy=function(){this._onDestroy()},t.prototype._onDestroy=function(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(function(t){return t.destroy()}),this._onDestroyFns.forEach(function(t){return t()}),this._onDestroyFns=[])},t.prototype.reset=function(){this.players.forEach(function(t){return t.reset()}),this._destroyed=!1,this._finished=!1,this._started=!1},t.prototype.setPosition=function(t){var e=t*this.totalTime;this.players.forEach(function(t){var n=t.totalTime?Math.min(1,e/t.totalTime):1;t.setPosition(n)})},t.prototype.getPosition=function(){var t=0;return this.players.forEach(function(e){var n=e.getPosition();t=Math.min(n,t)}),t},t.prototype.beforeDestroy=function(){this.players.forEach(function(t){t.beforeDestroy&&t.beforeDestroy()})},t.prototype.triggerCallback=function(t){var e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(function(t){return t()}),e.length=0},t}(),Ai="!";function Mi(){throw Error("Attempting to attach dialog content after content is already attached")}var Ri=function(t){function e(e,n,i,o){var a=t.call(this)||this;return a._elementRef=e,a._focusTrapFactory=n,a._changeDetectorRef=i,a._document=o,a._elementFocusedBeforeDialogWasOpened=null,a._state="enter",a._animationStateChanged=new r.EventEmitter,a._ariaLabelledBy=null,a}return Object(v.c)(e,t),e.prototype.attachComponentPortal=function(t){return this._portalOutlet.hasAttached()&&Mi(),this._savePreviouslyFocusedElement(),this._portalOutlet.attachComponentPortal(t)},e.prototype.attachTemplatePortal=function(t){return this._portalOutlet.hasAttached()&&Mi(),this._savePreviouslyFocusedElement(),this._portalOutlet.attachTemplatePortal(t)},e.prototype._trapFocus=function(){this._focusTrap||(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement)),this._config.autoFocus&&this._focusTrap.focusInitialElementWhenReady()},e.prototype._restoreFocus=function(){var t=this._elementFocusedBeforeDialogWasOpened;t&&"function"==typeof t.focus&&t.focus(),this._focusTrap&&this._focusTrap.destroy()},e.prototype._savePreviouslyFocusedElement=function(){var t=this;this._document&&(this._elementFocusedBeforeDialogWasOpened=this._document.activeElement,this._elementRef.nativeElement.focus&&Promise.resolve().then(function(){return t._elementRef.nativeElement.focus()}))},e.prototype._onAnimationDone=function(t){"enter"===t.toState?this._trapFocus():"exit"===t.toState&&this._restoreFocus(),this._animationStateChanged.emit(t)},e.prototype._onAnimationStart=function(t){this._animationStateChanged.emit(t)},e.prototype._startExitAnimation=function(){this._state="exit",this._changeDetectorRef.markForCheck()},e}(Ht),Li=0,Ni=function(){function t(t,e,n,r){void 0===r&&(r="mat-dialog-"+Li++);var i=this;this._overlayRef=t,this._containerInstance=e,this.id=r,this.disableClose=this._containerInstance._config.disableClose,this._afterOpen=new ct.a,this._afterClosed=new ct.a,this._beforeClose=new ct.a,this._locationChanges=yt.a.EMPTY,e._id=r,e._animationStateChanged.pipe(Object(At.a)(function(t){return"done"===t.phaseName&&"enter"===t.toState}),te(1)).subscribe(function(){i._afterOpen.next(),i._afterOpen.complete()}),e._animationStateChanged.pipe(Object(At.a)(function(t){return"done"===t.phaseName&&"exit"===t.toState}),te(1)).subscribe(function(){i._overlayRef.dispose(),i._locationChanges.unsubscribe(),i._afterClosed.next(i._result),i._afterClosed.complete(),i.componentInstance=null}),t.keydownEvents().pipe(Object(At.a)(function(t){return t.keyCode===oe&&!i.disableClose})).subscribe(function(){return i.close()}),n&&(this._locationChanges=n.subscribe(function(){i._containerInstance._config.closeOnNavigation&&i.close()}))}return t.prototype.close=function(t){var e=this;this._result=t,this._containerInstance._animationStateChanged.pipe(Object(At.a)(function(t){return"start"===t.phaseName}),te(1)).subscribe(function(){e._beforeClose.next(t),e._beforeClose.complete(),e._overlayRef.detachBackdrop()}),this._containerInstance._startExitAnimation()},t.prototype.afterOpen=function(){return this._afterOpen.asObservable()},t.prototype.afterClosed=function(){return this._afterClosed.asObservable()},t.prototype.beforeClose=function(){return this._beforeClose.asObservable()},t.prototype.backdropClick=function(){return this._overlayRef.backdropClick()},t.prototype.keydownEvents=function(){return this._overlayRef.keydownEvents()},t.prototype.updatePosition=function(t){var e=this._getPositionStrategy();return t&&(t.left||t.right)?t.left?e.left(t.left):e.right(t.right):e.centerHorizontally(),t&&(t.top||t.bottom)?t.top?e.top(t.top):e.bottom(t.bottom):e.centerVertically(),this._overlayRef.updatePosition(),this},t.prototype.updateSize=function(t,e){return void 0===t&&(t="auto"),void 0===e&&(e="auto"),this._getPositionStrategy().width(t).height(e),this._overlayRef.updatePosition(),this},t.prototype._getPositionStrategy=function(){return this._overlayRef.getConfig().positionStrategy},t}(),Di=new r.InjectionToken("MatDialogData"),Fi=new r.InjectionToken("mat-dialog-default-options"),zi=new r.InjectionToken("mat-dialog-scroll-strategy");function ji(t){return function(){return t.scrollStrategies.block()}}var Bi=function(){function t(t,e,n,r,i,o,a){var s=this;this._overlay=t,this._injector=e,this._location=n,this._defaultOptions=r,this._scrollStrategy=i,this._parentDialog=o,this._overlayContainer=a,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new ct.a,this._afterOpenAtThisLevel=new ct.a,this._ariaHiddenElements=new Map,this.afterAllClosed=_i(function(){return s.openDialogs.length?s._afterAllClosed:s._afterAllClosed.pipe(Ei(void 0))})}return Object.defineProperty(t.prototype,"openDialogs",{get:function(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"afterOpen",{get:function(){return this._parentDialog?this._parentDialog.afterOpen:this._afterOpenAtThisLevel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_afterAllClosed",{get:function(){var t=this._parentDialog;return t?t._afterAllClosed:this._afterAllClosedAtThisLevel},enumerable:!0,configurable:!0}),t.prototype.open=function(t,e){var n=this;if((e=function(t,e){return Object(v.a)({},e,t)}(e,this._defaultOptions||new function(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.direction="ltr",this.ariaDescribedBy=null,this.ariaLabel=null,this.autoFocus=!0,this.closeOnNavigation=!0})).id&&this.getDialogById(e.id))throw Error('Dialog with id "'+e.id+'" exists already. The dialog id must be unique.');var r=this._createOverlay(e),i=this._attachDialogContainer(r,e),o=this._attachDialogContent(t,i,r,e);return this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(o),o.afterClosed().subscribe(function(){return n._removeOpenDialog(o)}),this.afterOpen.next(o),o},t.prototype.closeAll=function(){for(var t=this.openDialogs.length;t--;)this.openDialogs[t].close()},t.prototype.getDialogById=function(t){return this.openDialogs.find(function(e){return e.id===t})},t.prototype._createOverlay=function(t){var e=this._getOverlayConfig(t);return this._overlay.create(e)},t.prototype._getOverlayConfig=function(t){var e=new se({positionStrategy:this._overlay.position().global(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight});return t.backdropClass&&(e.backdropClass=t.backdropClass),e},t.prototype._attachDialogContainer=function(t,e){var n=new Gt(Ri,e.viewContainerRef),r=t.attach(n);return r.instance._config=e,r.instance},t.prototype._attachDialogContent=function(t,e,n,i){var o=new Ni(n,e,this._location,i.id);if(i.hasBackdrop&&n.backdropClick().subscribe(function(){o.disableClose||o.close()}),t instanceof r.TemplateRef)e.attachTemplatePortal(new Xt(t,null,{$implicit:i.data,dialogRef:o}));else{var a=this._createInjector(i,o,e),s=e.attachComponentPortal(new Gt(t,void 0,a));o.componentInstance=s.instance}return o.updateSize(i.width,i.height).updatePosition(i.position),o},t.prototype._createInjector=function(t,e,n){var r=t&&t.viewContainerRef&&t.viewContainerRef.injector,i=new WeakMap;return i.set(Ni,e),i.set(Ri,n),i.set(Di,t.data),i.set(Bt,{value:t.direction,change:ft()}),new Kt(r||this._injector,i)},t.prototype._removeOpenDialog=function(t){var e=this.openDialogs.indexOf(t);e>-1&&(this.openDialogs.splice(e,1),this.openDialogs.length||(this._ariaHiddenElements.forEach(function(t,e){t?e.setAttribute("aria-hidden",t):e.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._afterAllClosed.next()))},t.prototype._hideNonDialogContentFromAssistiveTechnology=function(){var t=this._overlayContainer.getContainerElement();if(t.parentElement)for(var e=t.parentElement.children,n=e.length-1;n>-1;n--){var r=e[n];r===t||"SCRIPT"===r.nodeName||"STYLE"===r.nodeName||r.hasAttribute("aria-live")||(this._ariaHiddenElements.set(r,r.getAttribute("aria-hidden")),r.setAttribute("aria-hidden","true"))}},t}(),Vi=function(){},qi=r["\u0275crt"]({encapsulation:2,styles:[".mat-dialog-container{box-shadow:0 11px 15px -7px rgba(0,0,0,.2),0 24px 38px 3px rgba(0,0,0,.14),0 9px 46px 8px rgba(0,0,0,.12);display:block;padding:24px;border-radius:2px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%}@media screen and (-ms-high-contrast:active){.mat-dialog-container{outline:solid 1px}}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch;-webkit-backface-visibility:hidden;backface-visibility:hidden}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:12px 0;display:flex;flex-wrap:wrap}.mat-dialog-actions:last-child{margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button+.mat-button,.mat-dialog-actions .mat-button+.mat-raised-button,.mat-dialog-actions .mat-raised-button+.mat-button,.mat-dialog-actions .mat-raised-button+.mat-raised-button{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button+.mat-button,[dir=rtl] .mat-dialog-actions .mat-button+.mat-raised-button,[dir=rtl] .mat-dialog-actions .mat-raised-button+.mat-button,[dir=rtl] .mat-dialog-actions .mat-raised-button+.mat-raised-button{margin-left:0;margin-right:8px}"],data:{animation:[{type:7,name:"slideDialog",definitions:[{type:0,name:"enter",styles:{type:6,styles:{transform:"none",opacity:1},offset:null},options:void 0},{type:0,name:"void",styles:{type:6,styles:{transform:"translate3d(0, 25%, 0) scale(0.9)",opacity:0},offset:null},options:void 0},{type:0,name:"exit",styles:{type:6,styles:{transform:"translate3d(0, 25%, 0)",opacity:0},offset:null},options:void 0},{type:1,expr:"* => *",animation:{type:4,styles:null,timings:"400ms cubic-bezier(0.25, 0.8, 0.25, 1)"},options:null}],options:{}}]}});function Ui(t){return r["\u0275vid"](0,[(t()(),r["\u0275and"](0,null,null,0))],null,null)}function Gi(t){return r["\u0275vid"](0,[r["\u0275qud"](402653184,1,{_portalOutlet:0}),(t()(),r["\u0275and"](16777216,null,null,1,null,Ui)),r["\u0275did"](2,212992,[[1,4]],0,Zt,[r.ComponentFactoryResolver,r.ViewContainerRef],{portal:[0,"portal"]},null)],function(t,e){t(e,2,0,"")},null)}var Xi=r["\u0275ccf"]("mat-dialog-container",Ri,function(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,1,"mat-dialog-container",[["class","mat-dialog-container"],["tabindex","-1"]],[[1,"id",0],[1,"role",0],[1,"aria-labelledby",0],[1,"aria-label",0],[1,"aria-describedby",0],[40,"@slideDialog",0]],[["component","@slideDialog.start"],["component","@slideDialog.done"]],function(t,e,n){var i=!0;return"component:@slideDialog.start"===e&&(i=!1!==r["\u0275nov"](t,1)._onAnimationStart(n)&&i),"component:@slideDialog.done"===e&&(i=!1!==r["\u0275nov"](t,1)._onAnimationDone(n)&&i),i},Gi,qi)),r["\u0275did"](1,49152,null,0,Ri,[r.ElementRef,Xe,r.ChangeDetectorRef,[2,rt]],null,null)],null,function(t,e){t(e,0,0,r["\u0275nov"](e,1)._id,null==r["\u0275nov"](e,1)._config?null:r["\u0275nov"](e,1)._config.role,null!=r["\u0275nov"](e,1)._config&&r["\u0275nov"](e,1)._config.ariaLabel?null:r["\u0275nov"](e,1)._ariaLabelledBy,null==r["\u0275nov"](e,1)._config?null:r["\u0275nov"](e,1)._config.ariaLabel,(null==r["\u0275nov"](e,1)._config?null:r["\u0275nov"](e,1)._config.ariaDescribedBy)||null,r["\u0275nov"](e,1)._state)})},{},{},[]),Hi="accent",Yi="primary",Zi=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],Wi=function(t){function e(e,n,r){var i=t.call(this,e)||this;i._platform=n,i._focusMonitor=r,i._isRoundButton=i._hasHostAttributes("mat-fab","mat-mini-fab"),i._isIconButton=i._hasHostAttributes("mat-icon-button");for(var o=0,a=Zi;o<a.length;o++){var s=a[o];i._hasHostAttributes(s)&&e.nativeElement.classList.add(s)}return i._focusMonitor.monitor(i._elementRef.nativeElement,!0),i._isRoundButton?i.color=Hi:i._hasHostAttributes("mat-flat-button")&&(i.color=Yi),i}return Object(v.c)(e,t),e.prototype.ngOnDestroy=function(){this._focusMonitor.stopMonitoring(this._elementRef.nativeElement)},e.prototype.focus=function(){this._getHostElement().focus()},e.prototype._getHostElement=function(){return this._elementRef.nativeElement},e.prototype._isRippleDisabled=function(){return this.disableRipple||this.disabled},e.prototype._hasHostAttributes=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return!!this._platform.isBrowser&&e.some(function(e){return t._getHostElement().hasAttribute(e)})},e}(Xr(Gr(Hr(function(t){this._elementRef=t})))),Ki=function(){},Ji=r["\u0275crt"]({encapsulation:2,styles:[".mat-button,.mat-fab,.mat-flat-button,.mat-icon-button,.mat-mini-fab,.mat-raised-button,.mat-stroked-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:0;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:88px;line-height:36px;padding:0 16px;border-radius:2px}[disabled].mat-button,[disabled].mat-fab,[disabled].mat-flat-button,[disabled].mat-icon-button,[disabled].mat-mini-fab,[disabled].mat-raised-button,[disabled].mat-stroked-button{cursor:default}.cdk-keyboard-focused.mat-button .mat-button-focus-overlay,.cdk-keyboard-focused.mat-fab .mat-button-focus-overlay,.cdk-keyboard-focused.mat-flat-button .mat-button-focus-overlay,.cdk-keyboard-focused.mat-icon-button .mat-button-focus-overlay,.cdk-keyboard-focused.mat-mini-fab .mat-button-focus-overlay,.cdk-keyboard-focused.mat-raised-button .mat-button-focus-overlay,.cdk-keyboard-focused.mat-stroked-button .mat-button-focus-overlay,.cdk-program-focused.mat-button .mat-button-focus-overlay,.cdk-program-focused.mat-fab .mat-button-focus-overlay,.cdk-program-focused.mat-flat-button .mat-button-focus-overlay,.cdk-program-focused.mat-icon-button .mat-button-focus-overlay,.cdk-program-focused.mat-mini-fab .mat-button-focus-overlay,.cdk-program-focused.mat-raised-button .mat-button-focus-overlay,.cdk-program-focused.mat-stroked-button .mat-button-focus-overlay{opacity:1}.mat-button::-moz-focus-inner,.mat-fab::-moz-focus-inner,.mat-flat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-mini-fab::-moz-focus-inner,.mat-raised-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner{border:0}.mat-fab,.mat-mini-fab,.mat-raised-button{transform:translate3d(0,0,0);transition:background .4s cubic-bezier(.25,.8,.25,1),box-shadow 280ms cubic-bezier(.4,0,.2,1)}.mat-fab:not([class*=mat-elevation-z]),.mat-mini-fab:not([class*=mat-elevation-z]),.mat-raised-button:not([class*=mat-elevation-z]){box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)}.mat-fab:not([disabled]):active:not([class*=mat-elevation-z]),.mat-mini-fab:not([disabled]):active:not([class*=mat-elevation-z]),.mat-raised-button:not([disabled]):active:not([class*=mat-elevation-z]){box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}[disabled].mat-fab,[disabled].mat-mini-fab,[disabled].mat-raised-button{box-shadow:none}.mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{transition:none;opacity:0}.mat-button:hover .mat-button-focus-overlay,.mat-stroked-button:hover .mat-button-focus-overlay{opacity:1}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button:not([class*=mat-elevation-z]){box-shadow:0 0 0 0 rgba(0,0,0,.2),0 0 0 0 rgba(0,0,0,.14),0 0 0 0 rgba(0,0,0,.12)}.mat-flat-button:not([class*=mat-elevation-z]){box-shadow:0 0 0 0 rgba(0,0,0,.2),0 0 0 0 rgba(0,0,0,.14),0 0 0 0 rgba(0,0,0,.12)}.mat-fab{min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab:not([class*=mat-elevation-z]){box-shadow:0 3px 5px -1px rgba(0,0,0,.2),0 6px 10px 0 rgba(0,0,0,.14),0 1px 18px 0 rgba(0,0,0,.12)}.mat-fab:not([disabled]):active:not([class*=mat-elevation-z]){box-shadow:0 7px 8px -4px rgba(0,0,0,.2),0 12px 17px 2px rgba(0,0,0,.14),0 5px 22px 4px rgba(0,0,0,.12)}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab:not([class*=mat-elevation-z]){box-shadow:0 3px 5px -1px rgba(0,0,0,.2),0 6px 10px 0 rgba(0,0,0,.14),0 1px 18px 0 rgba(0,0,0,.12)}.mat-mini-fab:not([disabled]):active:not([class*=mat-elevation-z]){box-shadow:0 7px 8px -4px rgba(0,0,0,.2),0 12px 17px 2px rgba(0,0,0,.14),0 5px 22px 4px rgba(0,0,0,.12)}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button .mat-icon,.mat-icon-button i{line-height:24px}.mat-button,.mat-fab,.mat-icon-button,.mat-mini-fab,.mat-raised-button{color:currentColor}.mat-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*{vertical-align:middle}.mat-button-focus-overlay,.mat-button-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-button-focus-overlay{background-color:rgba(0,0,0,.12);border-radius:inherit;opacity:0;transition:opacity .2s cubic-bezier(.35,0,.25,1),background-color .2s cubic-bezier(.35,0,.25,1)}@media screen and (-ms-high-contrast:active){.mat-button-focus-overlay{background-color:rgba(255,255,255,.5)}}.mat-button-ripple-round{border-radius:50%;z-index:1}@media screen and (-ms-high-contrast:active){.mat-button,.mat-fab,.mat-flat-button,.mat-icon-button,.mat-mini-fab,.mat-raised-button{outline:solid 1px}}"],data:{}});function Qi(t){return r["\u0275vid"](2,[r["\u0275qud"](402653184,1,{ripple:0}),(t()(),r["\u0275eld"](1,0,null,null,1,"span",[["class","mat-button-wrapper"]],null,null,null,null,null)),r["\u0275ncd"](null,0),(t()(),r["\u0275eld"](3,0,null,null,1,"div",[["class","mat-button-ripple mat-ripple"],["matRipple",""]],[[2,"mat-button-ripple-round",null],[2,"mat-ripple-unbounded",null]],null,null,null,null)),r["\u0275did"](4,212992,[[1,4]],0,oi,[r.ElementRef,r.NgZone,ot,[2,ii]],{centered:[0,"centered"],disabled:[1,"disabled"],trigger:[2,"trigger"]},null),(t()(),r["\u0275eld"](5,0,null,null,0,"div",[["class","mat-button-focus-overlay"]],null,null,null,null,null))],function(t,e){var n=e.component;t(e,4,0,n._isIconButton,n._isRippleDisabled(),n._getHostElement())},function(t,e){var n=e.component;t(e,3,0,n._isRoundButton||n._isIconButton,r["\u0275nov"](e,4).unbounded)})}var $i=function(){function t(t){this.selector=t}return t.prototype.call=function(t,e){return e.subscribe(new to(t,this.selector,this.caught))},t}(),to=function(t){function e(e,n,r){t.call(this,e),this.selector=n,this.caught=r}return Object(v.c)(e,t),e.prototype.error=function(e){if(!this.isStopped){var n=void 0;try{n=this.selector(e,this.caught)}catch(e){return void t.prototype.error.call(this,e)}this._unsubscribeAndRecycle(),this.add(Object(Ct.a)(this,n))}},e}(Et.a),eo=function(){function t(t){this.callback=t}return t.prototype.call=function(t,e){return e.subscribe(new no(t,this.callback))},t}(),no=function(t){function e(e,n){t.call(this,e),this.add(new yt.a(n))}return Object(v.c)(e,t),e}(Jt.a),ro=n("eIqN"),io=n("wP3s"),oo=n("6S6c"),ao=n("dmC+"),so=function(){},uo=function(){},lo=function(){function t(t){var e=this;this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?function(){e.headers=new Map,t.split("\n").forEach(function(t){var n=t.indexOf(":");if(n>0){var r=t.slice(0,n),i=r.toLowerCase(),o=t.slice(n+1).trim();e.maybeSetNormalizedName(r,i),e.headers.has(i)?e.headers.get(i).push(o):e.headers.set(i,[o])}})}:function(){e.headers=new Map,Object.keys(t).forEach(function(n){var r=t[n],i=n.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(e.headers.set(i,r),e.maybeSetNormalizedName(n,i))})}:this.headers=new Map}return t.prototype.has=function(t){return this.init(),this.headers.has(t.toLowerCase())},t.prototype.get=function(t){this.init();var e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null},t.prototype.keys=function(){return this.init(),Array.from(this.normalizedNames.values())},t.prototype.getAll=function(t){return this.init(),this.headers.get(t.toLowerCase())||null},t.prototype.append=function(t,e){return this.clone({name:t,value:e,op:"a"})},t.prototype.set=function(t,e){return this.clone({name:t,value:e,op:"s"})},t.prototype.delete=function(t,e){return this.clone({name:t,value:e,op:"d"})},t.prototype.maybeSetNormalizedName=function(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)},t.prototype.init=function(){var e=this;this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(function(t){return e.applyUpdate(t)}),this.lazyUpdate=null))},t.prototype.copyFrom=function(t){var e=this;t.init(),Array.from(t.headers.keys()).forEach(function(n){e.headers.set(n,t.headers.get(n)),e.normalizedNames.set(n,t.normalizedNames.get(n))})},t.prototype.clone=function(e){var n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n},t.prototype.applyUpdate=function(t){var e=t.name.toLowerCase();switch(t.op){case"a":case"s":var n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);var r=("a"===t.op?this.headers.get(e):void 0)||[];r.push.apply(r,n),this.headers.set(e,r);break;case"d":var i=t.value;if(i){var o=this.headers.get(e);if(!o)return;0===(o=o.filter(function(t){return-1===i.indexOf(t)})).length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,o)}else this.headers.delete(e),this.normalizedNames.delete(e)}},t.prototype.forEach=function(t){var e=this;this.init(),Array.from(this.normalizedNames.keys()).forEach(function(n){return t(e.normalizedNames.get(n),e.headers.get(n))})},t}(),co=function(){function t(){}return t.prototype.encodeKey=function(t){return ho(t)},t.prototype.encodeValue=function(t){return ho(t)},t.prototype.decodeKey=function(t){return decodeURIComponent(t)},t.prototype.decodeValue=function(t){return decodeURIComponent(t)},t}();function ho(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}var po=function(){function t(t){void 0===t&&(t={});var e,n,r,i=this;if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new co,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=(e=t.fromString,n=this.encoder,r=new Map,e.length>0&&e.split("&").forEach(function(t){var e=t.indexOf("="),i=-1==e?[n.decodeKey(t),""]:[n.decodeKey(t.slice(0,e)),n.decodeValue(t.slice(e+1))],o=i[0],a=i[1],s=r.get(o)||[];s.push(a),r.set(o,s)}),r)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(function(e){var n=t.fromObject[e];i.map.set(e,Array.isArray(n)?n:[n])})):this.map=null}return t.prototype.has=function(t){return this.init(),this.map.has(t)},t.prototype.get=function(t){this.init();var e=this.map.get(t);return e?e[0]:null},t.prototype.getAll=function(t){return this.init(),this.map.get(t)||null},t.prototype.keys=function(){return this.init(),Array.from(this.map.keys())},t.prototype.append=function(t,e){return this.clone({param:t,value:e,op:"a"})},t.prototype.set=function(t,e){return this.clone({param:t,value:e,op:"s"})},t.prototype.delete=function(t,e){return this.clone({param:t,value:e,op:"d"})},t.prototype.toString=function(){var t=this;return this.init(),this.keys().map(function(e){var n=t.encoder.encodeKey(e);return t.map.get(e).map(function(e){return n+"="+t.encoder.encodeValue(e)}).join("&")}).join("&")},t.prototype.clone=function(e){var n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat([e]),n},t.prototype.init=function(){var t=this;null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(function(e){return t.map.set(e,t.cloneFrom.map.get(e))}),this.updates.forEach(function(e){switch(e.op){case"a":case"s":var n=("a"===e.op?t.map.get(e.param):void 0)||[];n.push(e.value),t.map.set(e.param,n);break;case"d":if(void 0===e.value){t.map.delete(e.param);break}var r=t.map.get(e.param)||[],i=r.indexOf(e.value);-1!==i&&r.splice(i,1),r.length>0?t.map.set(e.param,r):t.map.delete(e.param)}}),this.cloneFrom=null)},t}();function fo(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function mo(t){return"undefined"!=typeof Blob&&t instanceof Blob}function go(t){return"undefined"!=typeof FormData&&t instanceof FormData}var yo=function(){function t(t,e,n,r){var i;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,i=r):i=n,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.params&&(this.params=i.params)),this.headers||(this.headers=new lo),this.params){var o=this.params.toString();if(0===o.length)this.urlWithParams=e;else{var a=e.indexOf("?");this.urlWithParams=e+(-1===a?"?":a<e.length-1?"&":"")+o}}else this.params=new po,this.urlWithParams=e}return t.prototype.serializeBody=function(){return null===this.body?null:fo(this.body)||mo(this.body)||go(this.body)||"string"==typeof this.body?this.body:this.body instanceof po?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()},t.prototype.detectContentTypeHeader=function(){return null===this.body?null:go(this.body)?null:mo(this.body)?this.body.type||null:fo(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof po?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null},t.prototype.clone=function(e){void 0===e&&(e={});var n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=void 0!==e.body?e.body:this.body,a=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,s=void 0!==e.reportProgress?e.reportProgress:this.reportProgress,u=e.headers||this.headers,l=e.params||this.params;return void 0!==e.setHeaders&&(u=Object.keys(e.setHeaders).reduce(function(t,n){return t.set(n,e.setHeaders[n])},u)),e.setParams&&(l=Object.keys(e.setParams).reduce(function(t,n){return t.set(n,e.setParams[n])},l)),new t(n,r,o,{params:l,headers:u,reportProgress:s,responseType:i,withCredentials:a})},t}(),vo=function(){var t={Sent:0,UploadProgress:1,ResponseHeader:2,DownloadProgress:3,Response:4,User:5};return t[t.Sent]="Sent",t[t.UploadProgress]="UploadProgress",t[t.ResponseHeader]="ResponseHeader",t[t.DownloadProgress]="DownloadProgress",t[t.Response]="Response",t[t.User]="User",t}(),_o=function(){return function(t,e,n){void 0===e&&(e=200),void 0===n&&(n="OK"),this.headers=t.headers||new lo,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}(),bo=function(t){function e(e){void 0===e&&(e={});var n=t.call(this,e)||this;return n.type=vo.ResponseHeader,n}return Object(v.c)(e,t),e.prototype.clone=function(t){return void 0===t&&(t={}),new e({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})},e}(_o),xo=function(t){function e(e){void 0===e&&(e={});var n=t.call(this,e)||this;return n.type=vo.Response,n.body=void 0!==e.body?e.body:null,n}return Object(v.c)(e,t),e.prototype.clone=function(t){return void 0===t&&(t={}),new e({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})},e}(_o),wo=function(t){function e(e){var n=t.call(this,e,0,"Unknown Error")||this;return n.name="HttpErrorResponse",n.ok=!1,n.message=n.status>=200&&n.status<300?"Http failure during parsing for "+(e.url||"(unknown url)"):"Http failure response for "+(e.url||"(unknown url)")+": "+e.status+" "+e.statusText,n.error=e.error||null,n}return Object(v.c)(e,t),e}(_o);function Eo(t,e){return{body:e,headers:t.headers,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}var Co=function(){function t(t){this.handler=t}return t.prototype.request=function(t,e,n){var r,i=this;if(void 0===n&&(n={}),t instanceof yo)r=t;else{var o;o=n.headers instanceof lo?n.headers:new lo(n.headers);var a=void 0;n.params&&(a=n.params instanceof po?n.params:new po({fromObject:n.params})),r=new yo(t,e,void 0!==n.body?n.body:null,{headers:o,params:a,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}var s=(function(t,e){return function(t,e){return Object(io.a)(t,e,1)}(t,e)(this)}).call(ft(r),function(t){return i.handler.handle(t)});if(t instanceof yo||"events"===n.observe)return s;var u=oo.a.call(s,function(t){return t instanceof xo});switch(n.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return ao.a.call(u,function(t){if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body});case"blob":return ao.a.call(u,function(t){if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body});case"text":return ao.a.call(u,function(t){if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body});case"json":default:return ao.a.call(u,function(t){return t.body})}case"response":return u;default:throw new Error("Unreachable: unhandled observe type "+n.observe+"}")}},t.prototype.delete=function(t,e){return void 0===e&&(e={}),this.request("DELETE",t,e)},t.prototype.get=function(t,e){return void 0===e&&(e={}),this.request("GET",t,e)},t.prototype.head=function(t,e){return void 0===e&&(e={}),this.request("HEAD",t,e)},t.prototype.jsonp=function(t,e){return this.request("JSONP",t,{params:(new po).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})},t.prototype.options=function(t,e){return void 0===e&&(e={}),this.request("OPTIONS",t,e)},t.prototype.patch=function(t,e,n){return void 0===n&&(n={}),this.request("PATCH",t,Eo(n,e))},t.prototype.post=function(t,e,n){return void 0===n&&(n={}),this.request("POST",t,Eo(n,e))},t.prototype.put=function(t,e,n){return void 0===n&&(n={}),this.request("PUT",t,Eo(n,e))},t}(),So=function(){function t(t,e){this.next=t,this.interceptor=e}return t.prototype.handle=function(t){return this.interceptor.intercept(t,this.next)},t}(),Io=new r.InjectionToken("HTTP_INTERCEPTORS"),To=function(){function t(){}return t.prototype.intercept=function(t,e){return e.handle(t)},t}(),ko=/^\)\]\}',?\n/,Oo=function(){},Po=function(){function t(){}return t.prototype.build=function(){return new XMLHttpRequest},t}(),Ao=function(){function t(t){this.xhrFactory=t}return t.prototype.handle=function(t){var e=this;if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without JsonpClientModule installed.");return new ht.Observable(function(n){var r=e.xhrFactory.build();if(r.open(t.method,t.urlWithParams),t.withCredentials&&(r.withCredentials=!0),t.headers.forEach(function(t,e){return r.setRequestHeader(t,e.join(","))}),t.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){var i=t.detectContentTypeHeader();null!==i&&r.setRequestHeader("Content-Type",i)}if(t.responseType){var o=t.responseType.toLowerCase();r.responseType="json"!==o?o:"text"}var a=t.serializeBody(),s=null,u=function(){if(null!==s)return s;var e=1223===r.status?204:r.status,n=r.statusText||"OK",i=new lo(r.getAllResponseHeaders()),o=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(r)||t.url;return s=new bo({headers:i,status:e,statusText:n,url:o})},l=function(){var e=u(),i=e.headers,o=e.status,a=e.statusText,s=e.url,l=null;204!==o&&(l="undefined"==typeof r.response?r.responseText:r.response),0===o&&(o=l?200:0);var c=o>=200&&o<300;if("json"===t.responseType&&"string"==typeof l){var h=l;l=l.replace(ko,"");try{l=""!==l?JSON.parse(l):null}catch(t){l=h,c&&(c=!1,l={error:t,text:l})}}c?(n.next(new xo({body:l,headers:i,status:o,statusText:a,url:s||void 0})),n.complete()):n.error(new wo({error:l,headers:i,status:o,statusText:a,url:s||void 0}))},c=function(t){var e=new wo({error:t,status:r.status||0,statusText:r.statusText||"Unknown Error"});n.error(e)},h=!1,p=function(e){h||(n.next(u()),h=!0);var i={type:vo.DownloadProgress,loaded:e.loaded};e.lengthComputable&&(i.total=e.total),"text"===t.responseType&&r.responseText&&(i.partialText=r.responseText),n.next(i)},f=function(t){var e={type:vo.UploadProgress,loaded:t.loaded};t.lengthComputable&&(e.total=t.total),n.next(e)};return r.addEventListener("load",l),r.addEventListener("error",c),t.reportProgress&&(r.addEventListener("progress",p),null!==a&&r.upload&&r.upload.addEventListener("progress",f)),r.send(a),n.next({type:vo.Sent}),function(){r.removeEventListener("error",c),r.removeEventListener("load",l),t.reportProgress&&(r.removeEventListener("progress",p),null!==a&&r.upload&&r.upload.removeEventListener("progress",f)),r.abort()}})},t}(),Mo=new r.InjectionToken("XSRF_COOKIE_NAME"),Ro=new r.InjectionToken("XSRF_HEADER_NAME"),Lo=function(){},No=function(){function t(t,e,n){this.doc=t,this.platform=e,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}return t.prototype.getToken=function(){if("server"===this.platform)return null;var t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=R(t,this.cookieName),this.lastCookieString=t),this.lastToken},t}(),Do=function(){function t(t,e){this.tokenService=t,this.headerName=e}return t.prototype.intercept=function(t,e){var n=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e.handle(t);var r=this.tokenService.getToken();return null===r||t.headers.has(this.headerName)||(t=t.clone({headers:t.headers.set(this.headerName,r)})),e.handle(t)},t}(),Fo=function(){function t(t,e){this.backend=t,this.injector=e,this.chain=null}return t.prototype.handle=function(t){if(null===this.chain){var e=this.injector.get(Io,[]);this.chain=e.reduceRight(function(t,e){return new So(t,e)},this.backend)}return this.chain.handle(t)},t}(),zo=function(){function t(){}return t.disable=function(){return{ngModule:t,providers:[{provide:Do,useClass:To}]}},t.withOptions=function(e){return void 0===e&&(e={}),{ngModule:t,providers:[e.cookieName?{provide:Mo,useValue:e.cookieName}:[],e.headerName?{provide:Ro,useValue:e.headerName}:[]]}},t}(),jo=function(){},Bo=function(t){function e(e,n){t.call(this),this.sources=e,this.resultSelector=n}return Object(v.c)(e,t),e.create=function(){for(var t=[],n=0;n<arguments.length;n++)t[n-0]=arguments[n];if(null===t||0===arguments.length)return new $t.a;var r=null;return"function"==typeof t[t.length-1]&&(r=t.pop()),1===t.length&&Object(Tt.a)(t[0])&&(t=t[0]),0===t.length?new $t.a:new e(t,r)},e.prototype._subscribe=function(t){return new Vo(t,this.sources,this.resultSelector)},e}(ht.Observable),Vo=function(t){function e(e,n,r){t.call(this,e),this.sources=n,this.resultSelector=r,this.completed=0,this.haveValues=0;var i=n.length;this.total=i,this.values=new Array(i);for(var o=0;o<i;o++){var a=n[o],s=Object(Ct.a)(this,a,null,o);s&&(s.outerIndex=o,this.add(s))}}return Object(v.c)(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.values[n]=e,i._hasValue||(i._hasValue=!0,this.haveValues++)},e.prototype.notifyComplete=function(t){var e=this.destination,n=this.haveValues,r=this.resultSelector,i=this.values,o=i.length;if(t._hasValue){if(this.completed++,this.completed===o){if(n===o){var a=r?r.apply(this,i):i;e.next(a)}e.complete()}}else e.complete()},e}(Et.a),qo=Bo.create,Uo=function(t){function e(e,n){t.call(this),this.error=e,this.scheduler=n}return Object(v.c)(e,t),e.create=function(t,n){return new e(t,n)},e.dispatch=function(t){t.subscriber.error(t.error)},e.prototype._subscribe=function(t){var n=this.error,r=this.scheduler;if(t.syncErrorThrowable=!0,r)return r.schedule(e.dispatch,0,{error:n,subscriber:t});t.error(n)},e}(ht.Observable).create;function Go(t){return Error('Unable to find icon with the name "'+t+'"')}function Xo(t){return Error("The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was \""+t+'".')}var Ho=function(t){this.url=t,this.svgElement=null},Yo=function(){function t(t,e,n){this._httpClient=t,this._sanitizer=e,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._defaultFontSetClass="material-icons",this._document=n}return t.prototype.addSvgIcon=function(t,e){return this.addSvgIconInNamespace("",t,e)},t.prototype.addSvgIconInNamespace=function(t,e,n){var r=Ko(t,e);return this._svgIconConfigs.set(r,new Ho(n)),this},t.prototype.addSvgIconSet=function(t){return this.addSvgIconSetInNamespace("",t)},t.prototype.addSvgIconSetInNamespace=function(t,e){var n=new Ho(e),r=this._iconSetConfigs.get(t);return r?r.push(n):this._iconSetConfigs.set(t,[n]),this},t.prototype.registerFontClassAlias=function(t,e){return void 0===e&&(e=t),this._fontCssClassesByAlias.set(t,e),this},t.prototype.classNameForFontAlias=function(t){return this._fontCssClassesByAlias.get(t)||t},t.prototype.setDefaultFontSetClass=function(t){return this._defaultFontSetClass=t,this},t.prototype.getDefaultFontSetClass=function(){return this._defaultFontSetClass},t.prototype.getSvgIconFromUrl=function(t){var e=this,n=this._sanitizer.sanitize(r.SecurityContext.RESOURCE_URL,t);if(!n)throw Xo(t);var i=this._cachedIconsByUrl.get(n);return i?ft(Wo(i)):this._loadSvgIconFromConfig(new Ho(t)).pipe(ze(function(t){return e._cachedIconsByUrl.set(n,t)}),Object(Fe.a)(function(t){return Wo(t)}))},t.prototype.getNamedSvgIcon=function(t,e){void 0===e&&(e="");var n=Ko(e,t),r=this._svgIconConfigs.get(n);if(r)return this._getSvgFromConfig(r);var i=this._iconSetConfigs.get(e);return i?this._getSvgFromIconSetConfigs(t,i):Uo(Go(n))},t.prototype._getSvgFromConfig=function(t){return t.svgElement?ft(Wo(t.svgElement)):this._loadSvgIconFromConfig(t).pipe(ze(function(e){return t.svgElement=e}),Object(Fe.a)(function(t){return Wo(t)}))},t.prototype._getSvgFromIconSetConfigs=function(t,e){var n=this,i=this._extractIconWithNameFromAnySet(t,e);if(i)return ft(i);var o=e.filter(function(t){return!t.svgElement}).map(function(t){return n._loadSvgIconSetFromConfig(t).pipe((e=function(e){var i=n._sanitizer.sanitize(r.SecurityContext.RESOURCE_URL,t.url);return console.log("Loading icon set URL: "+i+" failed: "+e),ft(null)},function(t){var n=new $i(e),r=t.lift(n);return n.caught=r}));var e});return qo(o).pipe(Object(Fe.a)(function(){var r=n._extractIconWithNameFromAnySet(t,e);if(!r)throw Go(t);return r}))},t.prototype._extractIconWithNameFromAnySet=function(t,e){for(var n=e.length-1;n>=0;n--){var r=e[n];if(r.svgElement){var i=this._extractSvgIconFromSet(r.svgElement,t);if(i)return i}}return null},t.prototype._loadSvgIconFromConfig=function(t){var e=this;return this._fetchUrl(t.url).pipe(Object(Fe.a)(function(t){return e._createSvgElementForSingleIcon(t)}))},t.prototype._loadSvgIconSetFromConfig=function(t){var e=this;return t.svgElement?ft(t.svgElement):this._fetchUrl(t.url).pipe(Object(Fe.a)(function(n){return t.svgElement||(t.svgElement=e._svgElementFromString(n)),t.svgElement}))},t.prototype._createSvgElementForSingleIcon=function(t){var e=this._svgElementFromString(t);return this._setSvgAttributes(e),e},t.prototype._extractSvgIconFromSet=function(t,e){var n=t.querySelector("#"+e);if(!n)return null;var r=n.cloneNode(!0);if(r.id="","svg"===r.nodeName.toLowerCase())return this._setSvgAttributes(r);if("symbol"===r.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(r));var i=this._svgElementFromString("<svg></svg>");return i.appendChild(r),this._setSvgAttributes(i)},t.prototype._svgElementFromString=function(t){if(this._document||"undefined"!=typeof document){var e=(this._document||document).createElement("DIV");e.innerHTML=t;var n=e.querySelector("svg");if(!n)throw Error("<svg> tag not found");return n}throw new Error("MatIconRegistry could not resolve document.")},t.prototype._toSvgElement=function(t){for(var e=this._svgElementFromString("<svg></svg>"),n=0;n<t.childNodes.length;n++)t.childNodes[n].nodeType===this._document.ELEMENT_NODE&&e.appendChild(t.childNodes[n].cloneNode(!0));return e},t.prototype._setSvgAttributes=function(t){return t.getAttribute("xmlns")||t.setAttribute("xmlns","http://www.w3.org/2000/svg"),t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),t},t.prototype._fetchUrl=function(t){var e=this;if(!this._httpClient)throw Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.");var n=this._sanitizer.sanitize(r.SecurityContext.RESOURCE_URL,t);if(!n)throw Xo(t);var i=this._inProgressUrlFetches.get(n);if(i)return i;var o,a=this._httpClient.get(n,{responseType:"text"}).pipe((o=function(){return e._inProgressUrlFetches.delete(n)},function(t){return t.lift(new eo(o))}),Object(ro.a)());return this._inProgressUrlFetches.set(n,a),a},t}();function Zo(t,e,n,r){return t||new Yo(e,n,r)}function Wo(t){return t.cloneNode(!0)}function Ko(t,e){return t+":"+e}var Jo=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i._iconRegistry=n,r||e.nativeElement.setAttribute("aria-hidden","true"),i}return Object(v.c)(e,t),Object.defineProperty(e.prototype,"fontSet",{get:function(){return this._fontSet},set:function(t){this._fontSet=this._cleanupFontValue(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fontIcon",{get:function(){return this._fontIcon},set:function(t){this._fontIcon=this._cleanupFontValue(t)},enumerable:!0,configurable:!0}),e.prototype._splitIconName=function(t){if(!t)return["",""];var e=t.split(":");switch(e.length){case 1:return["",e[0]];case 2:return e;default:throw Error('Invalid icon name: "'+t+'"')}},e.prototype.ngOnChanges=function(t){var e=this;if(t.svgIcon)if(this.svgIcon){var n=this._splitIconName(this.svgIcon);this._iconRegistry.getNamedSvgIcon(n[1],n[0]).pipe(te(1)).subscribe(function(t){return e._setSvgElement(t)},function(t){return console.log("Error retrieving icon: "+t.message)})}else this._clearSvgElement();this._usingFontIcon()&&this._updateFontIconClasses()},e.prototype.ngOnInit=function(){this._usingFontIcon()&&this._updateFontIconClasses()},e.prototype._usingFontIcon=function(){return!this.svgIcon},e.prototype._setSvgElement=function(t){this._clearSvgElement(),this._elementRef.nativeElement.appendChild(t)},e.prototype._clearSvgElement=function(){for(var t=this._elementRef.nativeElement,e=t.childNodes.length,n=0;n<e;n++)t.removeChild(t.childNodes[n])},e.prototype._updateFontIconClasses=function(){if(this._usingFontIcon()){var t=this._elementRef.nativeElement,e=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();e!=this._previousFontSetClass&&(this._previousFontSetClass&&t.classList.remove(this._previousFontSetClass),e&&t.classList.add(e),this._previousFontSetClass=e),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}},e.prototype._cleanupFontValue=function(t){return"string"==typeof t?t.trim().split(" ")[0]:t},e}(Xr(function(t){this._elementRef=t})),Qo=function(){},$o=r["\u0275crt"]({encapsulation:2,styles:[".mat-icon{background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}"],data:{}});function ta(t){return r["\u0275vid"](2,[r["\u0275ncd"](null,0)],null,null)}var ea=n("5jKg");n("PAZ8");var na=n("KRwF").a.create,ra=function(){function t(){}return Object.defineProperty(t.prototype,"value",{get:function(){return this.control?this.control.value:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"valid",{get:function(){return this.control?this.control.valid:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"invalid",{get:function(){return this.control?this.control.invalid:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pending",{get:function(){return this.control?this.control.pending:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disabled",{get:function(){return this.control?this.control.disabled:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"enabled",{get:function(){return this.control?this.control.enabled:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"errors",{get:function(){return this.control?this.control.errors:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pristine",{get:function(){return this.control?this.control.pristine:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dirty",{get:function(){return this.control?this.control.dirty:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"touched",{get:function(){return this.control?this.control.touched:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"status",{get:function(){return this.control?this.control.status:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"untouched",{get:function(){return this.control?this.control.untouched:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"statusChanges",{get:function(){return this.control?this.control.statusChanges:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"valueChanges",{get:function(){return this.control?this.control.valueChanges:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return null},enumerable:!0,configurable:!0}),t.prototype.reset=function(t){void 0===t&&(t=void 0),this.control&&this.control.reset(t)},t.prototype.hasError=function(t,e){return!!this.control&&this.control.hasError(t,e)},t.prototype.getError=function(t,e){return this.control?this.control.getError(t,e):null},t}(),ia=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(v.c)(e,t),Object.defineProperty(e.prototype,"formDirective",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return null},enumerable:!0,configurable:!0}),e}(ra);function oa(t){return null==t||0===t.length}var aa=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,sa=function(){function t(){}return t.min=function(t){return function(e){if(oa(e.value)||oa(t))return null;var n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}},t.max=function(t){return function(e){if(oa(e.value)||oa(t))return null;var n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}},t.required=function(t){return oa(t.value)?{required:!0}:null},t.requiredTrue=function(t){return!0===t.value?null:{required:!0}},t.email=function(t){return aa.test(t.value)?null:{email:!0}},t.minLength=function(t){return function(e){if(oa(e.value))return null;var n=e.value?e.value.length:0;return n<t?{minlength:{requiredLength:t,actualLength:n}}:null}},t.maxLength=function(t){return function(e){var n=e.value?e.value.length:0;return n>t?{maxlength:{requiredLength:t,actualLength:n}}:null}},t.pattern=function(e){return e?("string"==typeof e?(r="","^"!==e.charAt(0)&&(r+="^"),r+=e,"$"!==e.charAt(e.length-1)&&(r+="$"),n=new RegExp(r)):(r=e.toString(),n=e),function(t){if(oa(t.value))return null;var e=t.value;return n.test(e)?null:{pattern:{requiredPattern:r,actualValue:e}}}):t.nullValidator;var n,r},t.nullValidator=function(t){return null},t.compose=function(t){if(!t)return null;var e=t.filter(ua);return 0==e.length?null:function(t){return ca(function(t,n){return e.map(function(e){return e(t)})}(t))}},t.composeAsync=function(t){if(!t)return null;var e=t.filter(ua);return 0==e.length?null:function(t){var n=function(t,n){return e.map(function(e){return e(t)})}(t).map(la);return ao.a.call(qo(n),ca)}},t}();function ua(t){return null!=t}function la(t){var e=Object(r["\u0275isPromise"])(t)?na(t):t;if(!Object(r["\u0275isObservable"])(e))throw new Error("Expected validator to return Promise or Observable.");return e}function ca(t){var e=t.reduce(function(t,e){return null!=e?Object(v.a)({},t,e):t},{});return 0===Object.keys(e).length?null:e}var ha=new r.InjectionToken("NgValueAccessor"),pa=function(){function t(t,e){this._renderer=t,this._elementRef=e,this.onChange=function(t){},this.onTouched=function(){}}return t.prototype.writeValue=function(t){this._renderer.setProperty(this._elementRef.nativeElement,"checked",t)},t.prototype.registerOnChange=function(t){this.onChange=t},t.prototype.registerOnTouched=function(t){this.onTouched=t},t.prototype.setDisabledState=function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)},t}(),fa=new r.InjectionToken("CompositionEventMode"),da=function(){function t(t,e,n){var r;this._renderer=t,this._elementRef=e,this._compositionMode=n,this.onChange=function(t){},this.onTouched=function(){},this._composing=!1,null==this._compositionMode&&(this._compositionMode=(r=ln()?ln().getUserAgent():"",!/android (\d+)/.test(r.toLowerCase())))}return t.prototype.writeValue=function(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)},t.prototype.registerOnChange=function(t){this.onChange=t},t.prototype.registerOnTouched=function(t){this.onTouched=t},t.prototype.setDisabledState=function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)},t.prototype._handleInput=function(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)},t.prototype._compositionStart=function(){this._composing=!0},t.prototype._compositionEnd=function(t){this._composing=!1,this._compositionMode&&this.onChange(t)},t}();function ma(t){return t.validate?function(e){return t.validate(e)}:t}function ga(t){return t.validate?function(e){return t.validate(e)}:t}var ya=function(){function t(t,e){this._renderer=t,this._elementRef=e,this.onChange=function(t){},this.onTouched=function(){}}return t.prototype.writeValue=function(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)},t.prototype.registerOnChange=function(t){this.onChange=function(e){t(""==e?null:parseFloat(e))}},t.prototype.registerOnTouched=function(t){this.onTouched=t},t.prototype.setDisabledState=function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)},t}();function va(){throw new Error("unimplemented")}var _a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._parent=null,e.name=null,e.valueAccessor=null,e._rawValidators=[],e._rawAsyncValidators=[],e}return Object(v.c)(e,t),Object.defineProperty(e.prototype,"validator",{get:function(){return va()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"asyncValidator",{get:function(){return va()},enumerable:!0,configurable:!0}),e}(ra),ba=function(){function t(){this._accessors=[]}return t.prototype.add=function(t,e){this._accessors.push([t,e])},t.prototype.remove=function(t){for(var e=this._accessors.length-1;e>=0;--e)if(this._accessors[e][1]===t)return void this._accessors.splice(e,1)},t.prototype.select=function(t){var e=this;this._accessors.forEach(function(n){e._isSameGroup(n,t)&&n[1]!==t&&n[1].fireUncheck(t.value)})},t.prototype._isSameGroup=function(t,e){return!!t[0].control&&t[0]._parent===e._control._parent&&t[1].name===e.name},t}(),xa=function(){function t(t,e,n,r){this._renderer=t,this._elementRef=e,this._registry=n,this._injector=r,this.onChange=function(){},this.onTouched=function(){}}return t.prototype.ngOnInit=function(){this._control=this._injector.get(_a),this._checkName(),this._registry.add(this._control,this)},t.prototype.ngOnDestroy=function(){this._registry.remove(this)},t.prototype.writeValue=function(t){this._state=t===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)},t.prototype.registerOnChange=function(t){var e=this;this._fn=t,this.onChange=function(){t(e.value),e._registry.select(e)}},t.prototype.fireUncheck=function(t){this.writeValue(t)},t.prototype.registerOnTouched=function(t){this.onTouched=t},t.prototype.setDisabledState=function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)},t.prototype._checkName=function(){this.name&&this.formControlName&&this.name!==this.formControlName&&this._throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)},t.prototype._throwNameError=function(){throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')},t}();function wa(t,e){return e.path.concat([t])}function Ea(t,e){t||Ta(e,"Cannot find control with"),e.valueAccessor||Ta(e,"No value accessor for form control with"),t.validator=sa.compose([t.validator,e.validator]),t.asyncValidator=sa.composeAsync([t.asyncValidator,e.asyncValidator]),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(function(n){t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&Ca(t,e)})}(t,e),function(t,e){t.registerOnChange(function(t,n){e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(function(){t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&Ca(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),e.valueAccessor.setDisabledState&&t.registerOnDisabledChange(function(t){e.valueAccessor.setDisabledState(t)}),e._rawValidators.forEach(function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange(function(){return t.updateValueAndValidity()})}),e._rawAsyncValidators.forEach(function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange(function(){return t.updateValueAndValidity()})})}function Ca(t,e){e.viewToModelUpdate(t._pendingValue),t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),t._pendingChange=!1}function Sa(t,e){null==t&&Ta(e,"Cannot find control with"),t.validator=sa.compose([t.validator,e.validator]),t.asyncValidator=sa.composeAsync([t.asyncValidator,e.asyncValidator])}function Ia(t){return Ta(t,"There is no FormControl instance attached to form control element with")}function Ta(t,e){var n;throw n=t.path.length>1?"path: '"+t.path.join(" -> ")+"'":t.path[0]?"name: '"+t.path+"'":"unspecified name attribute",new Error(e+" "+n)}function ka(t){return null!=t?sa.compose(t.map(ma)):null}function Oa(t){return null!=t?sa.composeAsync(t.map(ga)):null}var Pa=[pa,function(){function t(t,e){this._renderer=t,this._elementRef=e,this.onChange=function(t){},this.onTouched=function(){}}return t.prototype.writeValue=function(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(t))},t.prototype.registerOnChange=function(t){this.onChange=function(e){t(""==e?null:parseFloat(e))}},t.prototype.registerOnTouched=function(t){this.onTouched=t},t.prototype.setDisabledState=function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)},t}(),ya,function(){function t(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=function(t){},this.onTouched=function(){},this._compareWith=r["\u0275looseIdentical"]}return Object.defineProperty(t.prototype,"compareWith",{set:function(t){if("function"!=typeof t)throw new Error("compareWith must be a function, but received "+JSON.stringify(t));this._compareWith=t},enumerable:!0,configurable:!0}),t.prototype.writeValue=function(t){this.value=t;var e=this._getOptionId(t);null==e&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);var n=function(t,e){return null==t?""+e:(e&&"object"==typeof e&&(e="Object"),(t+": "+e).slice(0,50))}(e,t);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)},t.prototype.registerOnChange=function(t){var e=this;this.onChange=function(n){e.value=e._getOptionValue(n),t(e.value)}},t.prototype.registerOnTouched=function(t){this.onTouched=t},t.prototype.setDisabledState=function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)},t.prototype._registerOption=function(){return(this._idCounter++).toString()},t.prototype._getOptionId=function(t){for(var e=0,n=Array.from(this._optionMap.keys());e<n.length;e++){var r=n[e];if(this._compareWith(this._optionMap.get(r),t))return r}return null},t.prototype._getOptionValue=function(t){var e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e):t},t}(),function(){function t(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=function(t){},this.onTouched=function(){},this._compareWith=r["\u0275looseIdentical"]}return Object.defineProperty(t.prototype,"compareWith",{set:function(t){if("function"!=typeof t)throw new Error("compareWith must be a function, but received "+JSON.stringify(t));this._compareWith=t},enumerable:!0,configurable:!0}),t.prototype.writeValue=function(t){var e,n=this;if(this.value=t,Array.isArray(t)){var r=t.map(function(t){return n._getOptionId(t)});e=function(t,e){t._setSelected(r.indexOf(e.toString())>-1)}}else e=function(t,e){t._setSelected(!1)};this._optionMap.forEach(e)},t.prototype.registerOnChange=function(t){var e=this;this.onChange=function(n){var r=[];if(n.hasOwnProperty("selectedOptions"))for(var i=n.selectedOptions,o=0;o<i.length;o++){var a=i.item(o),s=e._getOptionValue(a.value);r.push(s)}else for(i=n.options,o=0;o<i.length;o++)(a=i.item(o)).selected&&(s=e._getOptionValue(a.value),r.push(s));e.value=r,t(r)}},t.prototype.registerOnTouched=function(t){this.onTouched=t},t.prototype.setDisabledState=function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)},t.prototype._registerOption=function(t){var e=(this._idCounter++).toString();return this._optionMap.set(e,t),e},t.prototype._getOptionId=function(t){for(var e=0,n=Array.from(this._optionMap.keys());e<n.length;e++){var r=n[e];if(this._compareWith(this._optionMap.get(r)._value,t))return r}return null},t.prototype._getOptionValue=function(t){var e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e)._value:t},t}(),xa];function Aa(t,e){t._syncPendingControls(),e.forEach(function(t){var e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)})}function Ma(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)}var Ra=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(v.c)(e,t),e.prototype.ngOnInit=function(){this._checkParentType(),this.formDirective.addFormGroup(this)},e.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeFormGroup(this)},Object.defineProperty(e.prototype,"control",{get:function(){return this.formDirective.getFormGroup(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return wa(this.name,this._parent)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"validator",{get:function(){return ka(this._validators)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"asyncValidator",{get:function(){return Oa(this._asyncValidators)},enumerable:!0,configurable:!0}),e.prototype._checkParentType=function(){},e}(ia),La=function(t){function e(e){return t.call(this,e)||this}return Object(v.c)(e,t),e}(function(){function t(t){this._cd=t}return Object.defineProperty(t.prototype,"ngClassUntouched",{get:function(){return!!this._cd.control&&this._cd.control.untouched},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngClassTouched",{get:function(){return!!this._cd.control&&this._cd.control.touched},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngClassPristine",{get:function(){return!!this._cd.control&&this._cd.control.pristine},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngClassDirty",{get:function(){return!!this._cd.control&&this._cd.control.dirty},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngClassValid",{get:function(){return!!this._cd.control&&this._cd.control.valid},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngClassInvalid",{get:function(){return!!this._cd.control&&this._cd.control.invalid},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngClassPending",{get:function(){return!!this._cd.control&&this._cd.control.pending},enumerable:!0,configurable:!0}),t}());function Na(t){var e=Fa(t)?t.validators:t;return Array.isArray(e)?ka(e):e||null}function Da(t,e){var n=Fa(e)?e.asyncValidators:t;return Array.isArray(n)?Oa(n):n||null}function Fa(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}var za=function(){function t(t,e){this.validator=t,this.asyncValidator=e,this._onCollectionChange=function(){},this.pristine=!0,this.touched=!1,this._onDisabledChange=[]}return Object.defineProperty(t.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"valid",{get:function(){return"VALID"===this.status},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"invalid",{get:function(){return"INVALID"===this.status},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pending",{get:function(){return"PENDING"==this.status},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disabled",{get:function(){return"DISABLED"===this.status},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"enabled",{get:function(){return"DISABLED"!==this.status},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dirty",{get:function(){return!this.pristine},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"untouched",{get:function(){return!this.touched},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"updateOn",{get:function(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"},enumerable:!0,configurable:!0}),t.prototype.setValidators=function(t){this.validator=Na(t)},t.prototype.setAsyncValidators=function(t){this.asyncValidator=Da(t)},t.prototype.clearValidators=function(){this.validator=null},t.prototype.clearAsyncValidators=function(){this.asyncValidator=null},t.prototype.markAsTouched=function(t){void 0===t&&(t={}),this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)},t.prototype.markAsUntouched=function(t){void 0===t&&(t={}),this.touched=!1,this._pendingTouched=!1,this._forEachChild(function(t){t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)},t.prototype.markAsDirty=function(t){void 0===t&&(t={}),this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)},t.prototype.markAsPristine=function(t){void 0===t&&(t={}),this.pristine=!0,this._pendingDirty=!1,this._forEachChild(function(t){t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)},t.prototype.markAsPending=function(t){void 0===t&&(t={}),this.status="PENDING",this._parent&&!t.onlySelf&&this._parent.markAsPending(t)},t.prototype.disable=function(t){void 0===t&&(t={}),this.status="DISABLED",this.errors=null,this._forEachChild(function(t){t.disable({onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(!!t.onlySelf),this._onDisabledChange.forEach(function(t){return t(!0)})},t.prototype.enable=function(t){void 0===t&&(t={}),this.status="VALID",this._forEachChild(function(t){t.enable({onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(!!t.onlySelf),this._onDisabledChange.forEach(function(t){return t(!1)})},t.prototype._updateAncestors=function(t){this._parent&&!t&&(this._parent.updateValueAndValidity(),this._parent._updatePristine(),this._parent._updateTouched())},t.prototype.setParent=function(t){this._parent=t},t.prototype.updateValueAndValidity=function(t){void 0===t&&(t={}),this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),"VALID"!==this.status&&"PENDING"!==this.status||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)},t.prototype._updateTreeValidity=function(t){void 0===t&&(t={emitEvent:!0}),this._forEachChild(function(e){return e._updateTreeValidity(t)}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})},t.prototype._setInitialStatus=function(){this.status=this._allControlsDisabled()?"DISABLED":"VALID"},t.prototype._runValidator=function(){return this.validator?this.validator(this):null},t.prototype._runAsyncValidator=function(t){var e=this;if(this.asyncValidator){this.status="PENDING";var n=la(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(function(n){return e.setErrors(n,{emitEvent:t})})}},t.prototype._cancelExistingSubscription=function(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()},t.prototype.setErrors=function(t,e){void 0===e&&(e={}),this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)},t.prototype.get=function(t){return function(t,e,n){return null==e?null:(e instanceof Array||(e=e.split(".")),e instanceof Array&&0===e.length?null:e.reduce(function(t,e){return t instanceof Ba?t.controls[e]||null:t instanceof Va&&t.at(e)||null},t))}(this,t)},t.prototype.getError=function(t,e){var n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null},t.prototype.hasError=function(t,e){return!!this.getError(t,e)},Object.defineProperty(t.prototype,"root",{get:function(){for(var t=this;t._parent;)t=t._parent;return t},enumerable:!0,configurable:!0}),t.prototype._updateControlsErrors=function(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)},t.prototype._initObservables=function(){this.valueChanges=new r.EventEmitter,this.statusChanges=new r.EventEmitter},t.prototype._calculateStatus=function(){return this._allControlsDisabled()?"DISABLED":this.errors?"INVALID":this._anyControlsHaveStatus("PENDING")?"PENDING":this._anyControlsHaveStatus("INVALID")?"INVALID":"VALID"},t.prototype._anyControlsHaveStatus=function(t){return this._anyControls(function(e){return e.status===t})},t.prototype._anyControlsDirty=function(){return this._anyControls(function(t){return t.dirty})},t.prototype._anyControlsTouched=function(){return this._anyControls(function(t){return t.touched})},t.prototype._updatePristine=function(t){void 0===t&&(t={}),this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)},t.prototype._updateTouched=function(t){void 0===t&&(t={}),this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)},t.prototype._isBoxedValue=function(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t},t.prototype._registerOnCollectionChange=function(t){this._onCollectionChange=t},t.prototype._setUpdateStrategy=function(t){Fa(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)},t}(),ja=function(t){function e(e,n,r){void 0===e&&(e=null);var i=t.call(this,Na(n),Da(r,n))||this;return i._onChange=[],i._applyFormState(e),i._setUpdateStrategy(n),i.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),i._initObservables(),i}return Object(v.c)(e,t),e.prototype.setValue=function(t,e){var n=this;void 0===e&&(e={}),this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(function(t){return t(n.value,!1!==e.emitViewToModelChange)}),this.updateValueAndValidity(e)},e.prototype.patchValue=function(t,e){void 0===e&&(e={}),this.setValue(t,e)},e.prototype.reset=function(t,e){void 0===t&&(t=null),void 0===e&&(e={}),this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1},e.prototype._updateValue=function(){},e.prototype._anyControls=function(t){return!1},e.prototype._allControlsDisabled=function(){return this.disabled},e.prototype.registerOnChange=function(t){this._onChange.push(t)},e.prototype._clearChangeFns=function(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=function(){}},e.prototype.registerOnDisabledChange=function(t){this._onDisabledChange.push(t)},e.prototype._forEachChild=function(t){},e.prototype._syncPendingControls=function(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))},e.prototype._applyFormState=function(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t},e}(za),Ba=function(t){function e(e,n,r){var i=t.call(this,Na(n),Da(r,n))||this;return i.controls=e,i._initObservables(),i._setUpdateStrategy(n),i._setUpControls(),i.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),i}return Object(v.c)(e,t),e.prototype.registerControl=function(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)},e.prototype.addControl=function(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()},e.prototype.removeControl=function(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(function(){}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()},e.prototype.setControl=function(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(function(){}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()},e.prototype.contains=function(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled},e.prototype.setValue=function(t,e){var n=this;void 0===e&&(e={}),this._checkAllValuesPresent(t),Object.keys(t).forEach(function(r){n._throwIfControlMissing(r),n.controls[r].setValue(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)},e.prototype.patchValue=function(t,e){var n=this;void 0===e&&(e={}),Object.keys(t).forEach(function(r){n.controls[r]&&n.controls[r].patchValue(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)},e.prototype.reset=function(t,e){void 0===t&&(t={}),void 0===e&&(e={}),this._forEachChild(function(n,r){n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e),this._updatePristine(e),this._updateTouched(e)},e.prototype.getRawValue=function(){return this._reduceChildren({},function(t,e,n){return t[n]=e instanceof ja?e.value:e.getRawValue(),t})},e.prototype._syncPendingControls=function(){var t=this._reduceChildren(!1,function(t,e){return!!e._syncPendingControls()||t});return t&&this.updateValueAndValidity({onlySelf:!0}),t},e.prototype._throwIfControlMissing=function(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error("Cannot find form control with name: "+t+".")},e.prototype._forEachChild=function(t){var e=this;Object.keys(this.controls).forEach(function(n){return t(e.controls[n],n)})},e.prototype._setUpControls=function(){var t=this;this._forEachChild(function(e){e.setParent(t),e._registerOnCollectionChange(t._onCollectionChange)})},e.prototype._updateValue=function(){this.value=this._reduceValue()},e.prototype._anyControls=function(t){var e=this,n=!1;return this._forEachChild(function(r,i){n=n||e.contains(i)&&t(r)}),n},e.prototype._reduceValue=function(){var t=this;return this._reduceChildren({},function(e,n,r){return(n.enabled||t.disabled)&&(e[r]=n.value),e})},e.prototype._reduceChildren=function(t,e){var n=t;return this._forEachChild(function(t,r){n=e(n,t,r)}),n},e.prototype._allControlsDisabled=function(){for(var t=0,e=Object.keys(this.controls);t<e.length;t++)if(this.controls[e[t]].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled},e.prototype._checkAllValuesPresent=function(t){this._forEachChild(function(e,n){if(void 0===t[n])throw new Error("Must supply a value for form control with name: '"+n+"'.")})},e}(za),Va=function(t){function e(e,n,r){var i=t.call(this,Na(n),Da(r,n))||this;return i.controls=e,i._initObservables(),i._setUpdateStrategy(n),i._setUpControls(),i.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),i}return Object(v.c)(e,t),e.prototype.at=function(t){return this.controls[t]},e.prototype.push=function(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()},e.prototype.insert=function(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()},e.prototype.removeAt=function(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(function(){}),this.controls.splice(t,1),this.updateValueAndValidity()},e.prototype.setControl=function(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(function(){}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()},Object.defineProperty(e.prototype,"length",{get:function(){return this.controls.length},enumerable:!0,configurable:!0}),e.prototype.setValue=function(t,e){var n=this;void 0===e&&(e={}),this._checkAllValuesPresent(t),t.forEach(function(t,r){n._throwIfControlMissing(r),n.at(r).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)},e.prototype.patchValue=function(t,e){var n=this;void 0===e&&(e={}),t.forEach(function(t,r){n.at(r)&&n.at(r).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)},e.prototype.reset=function(t,e){void 0===t&&(t=[]),void 0===e&&(e={}),this._forEachChild(function(n,r){n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e),this._updatePristine(e),this._updateTouched(e)},e.prototype.getRawValue=function(){return this.controls.map(function(t){return t instanceof ja?t.value:t.getRawValue()})},e.prototype._syncPendingControls=function(){var t=this.controls.reduce(function(t,e){return!!e._syncPendingControls()||t},!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t},e.prototype._throwIfControlMissing=function(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error("Cannot find form control at index "+t)},e.prototype._forEachChild=function(t){this.controls.forEach(function(e,n){t(e,n)})},e.prototype._updateValue=function(){var t=this;this.value=this.controls.filter(function(e){return e.enabled||t.disabled}).map(function(t){return t.value})},e.prototype._anyControls=function(t){return this.controls.some(function(e){return e.enabled&&t(e)})},e.prototype._setUpControls=function(){var t=this;this._forEachChild(function(e){return t._registerControl(e)})},e.prototype._checkAllValuesPresent=function(t){this._forEachChild(function(e,n){if(void 0===t[n])throw new Error("Must supply a value for form control at index: "+n+".")})},e.prototype._allControlsDisabled=function(){for(var t=0,e=this.controls;t<e.length;t++)if(e[t].enabled)return!1;return this.controls.length>0||this.disabled},e.prototype._registerControl=function(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)},e}(za),qa=Promise.resolve(null),Ua=function(t){function e(e,n){var i=t.call(this)||this;return i.submitted=!1,i._directives=[],i.ngSubmit=new r.EventEmitter,i.form=new Ba({},ka(e),Oa(n)),i}return Object(v.c)(e,t),e.prototype.ngAfterViewInit=function(){this._setUpdateStrategy()},Object.defineProperty(e.prototype,"formDirective",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"control",{get:function(){return this.form},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"controls",{get:function(){return this.form.controls},enumerable:!0,configurable:!0}),e.prototype.addControl=function(t){var e=this;qa.then(function(){var n=e._findContainer(t.path);t.control=n.registerControl(t.name,t.control),Ea(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),e._directives.push(t)})},e.prototype.getControl=function(t){return this.form.get(t.path)},e.prototype.removeControl=function(t){var e=this;qa.then(function(){var n=e._findContainer(t.path);n&&n.removeControl(t.name),Ma(e._directives,t)})},e.prototype.addFormGroup=function(t){var e=this;qa.then(function(){var n=e._findContainer(t.path),r=new Ba({});Sa(r,t),n.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})})},e.prototype.removeFormGroup=function(t){var e=this;qa.then(function(){var n=e._findContainer(t.path);n&&n.removeControl(t.name)})},e.prototype.getFormGroup=function(t){return this.form.get(t.path)},e.prototype.updateModel=function(t,e){var n=this;qa.then(function(){n.form.get(t.path).setValue(e)})},e.prototype.setValue=function(t){this.control.setValue(t)},e.prototype.onSubmit=function(t){return this.submitted=!0,Aa(this.form,this._directives),this.ngSubmit.emit(t),!1},e.prototype.onReset=function(){this.resetForm()},e.prototype.resetForm=function(t){void 0===t&&(t=void 0),this.form.reset(t),this.submitted=!1},e.prototype._setUpdateStrategy=function(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)},e.prototype._findContainer=function(t){return t.pop(),t.length?this.form.get(t):this.form},e}(ia),Ga='\n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });',Xa='\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',Ha='\n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>',Ya=function(){function t(){}return t.modelParentException=function(){throw new Error('\n      ngModel cannot be used to register form controls with a parent formGroup directive.  Try using\n      formGroup\'s partner directive "formControlName" instead.  Example:\n\n      '+Ga+'\n\n      Or, if you\'d like to avoid registering this form control, indicate that it\'s standalone in ngModelOptions:\n\n      Example:\n\n      \n    <div [formGroup]="myGroup">\n       <input formControlName="firstName">\n       <input [(ngModel)]="showMoreControls" [ngModelOptions]="{standalone: true}">\n    </div>\n  ')},t.formGroupNameException=function(){throw new Error("\n      ngModel cannot be used to register form controls with a parent formGroupName or formArrayName directive.\n\n      Option 1: Use formControlName instead of ngModel (reactive strategy):\n\n      "+Xa+"\n\n      Option 2:  Update ngModel's parent be ngModelGroup (template-driven strategy):\n\n      "+Ha)},t.missingNameException=function(){throw new Error('If ngModel is used within a form tag, either the name attribute must be set or the form\n      control must be defined as \'standalone\' in ngModelOptions.\n\n      Example 1: <input [(ngModel)]="person.firstName" name="first">\n      Example 2: <input [(ngModel)]="person.firstName" [ngModelOptions]="{standalone: true}">')},t.modelGroupParentException=function(){throw new Error("\n      ngModelGroup cannot be used with a parent formGroup directive.\n\n      Option 1: Use formGroupName instead of ngModelGroup (reactive strategy):\n\n      "+Xa+"\n\n      Option 2:  Use a regular form tag instead of the formGroup directive (template-driven strategy):\n\n      "+Ha)},t}(),Za=function(t){function e(e,n,r){var i=t.call(this)||this;return i._parent=e,i._validators=n,i._asyncValidators=r,i}return Object(v.c)(e,t),e.prototype._checkParentType=function(){this._parent instanceof e||this._parent instanceof Ua||Ya.modelGroupParentException()},e}(Ra),Wa=Promise.resolve(null),Ka=function(t){function e(e,n,i,o){var a=t.call(this)||this;return a.control=new ja,a._registered=!1,a.update=new r.EventEmitter,a._parent=e,a._rawValidators=n||[],a._rawAsyncValidators=i||[],a.valueAccessor=function(t,e){if(!e)return null;var n=void 0,r=void 0,i=void 0;return e.forEach(function(e){var o;e.constructor===da?n=e:(o=e,Pa.some(function(t){return o.constructor===t})?(r&&Ta(t,"More than one built-in value accessor matches form control with"),r=e):(i&&Ta(t,"More than one custom value accessor matches form control with"),i=e))}),i||r||n||(Ta(t,"No valid value accessor for form control with"),null)}(a,o),a}return Object(v.c)(e,t),e.prototype.ngOnChanges=function(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),function(t,e){if(!t.hasOwnProperty("model"))return!1;var n=t.model;return!!n.isFirstChange()||!Object(r["\u0275looseIdentical"])(e,n.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)},e.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeControl(this)},Object.defineProperty(e.prototype,"path",{get:function(){return this._parent?wa(this.name,this._parent):[this.name]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"validator",{get:function(){return ka(this._rawValidators)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"asyncValidator",{get:function(){return Oa(this._rawAsyncValidators)},enumerable:!0,configurable:!0}),e.prototype.viewToModelUpdate=function(t){this.viewModel=t,this.update.emit(t)},e.prototype._setUpControl=function(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0},e.prototype._setUpdateStrategy=function(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)},e.prototype._isStandalone=function(){return!this._parent||!(!this.options||!this.options.standalone)},e.prototype._setUpStandalone=function(){Ea(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})},e.prototype._checkForErrors=function(){this._isStandalone()||this._checkParentType(),this._checkName()},e.prototype._checkParentType=function(){!(this._parent instanceof Za)&&this._parent instanceof Ra?Ya.formGroupNameException():this._parent instanceof Za||this._parent instanceof Ua||Ya.modelParentException()},e.prototype._checkName=function(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()||this.name||Ya.missingNameException()},e.prototype._updateValue=function(t){var e=this;Wa.then(function(){e.control.setValue(t,{emitViewToModelChange:!1})})},e.prototype._updateDisabled=function(t){var e=this,n=t.isDisabled.currentValue,r=""===n||n&&"false"!==n;Wa.then(function(){r&&!e.control.disabled?e.control.disable():!r&&e.control.disabled&&e.control.enable()})},e}(_a),Ja=function(){function t(){}return t.controlParentException=function(){throw new Error("formControlName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      "+Ga)},t.ngModelGroupException=function(){throw new Error('formControlName cannot be used with an ngModelGroup parent. It is only compatible with parents\n       that also have a "form" prefix: formGroupName, formArrayName, or formGroup.\n\n       Option 1:  Update the parent to be formGroupName (reactive form strategy)\n\n        '+Xa+"\n\n        Option 2: Use ngModel instead of formControlName (template-driven strategy)\n\n        "+Ha)},t.missingFormException=function(){throw new Error("formGroup expects a FormGroup instance. Please pass one in.\n\n       Example:\n\n       "+Ga)},t.groupParentException=function(){throw new Error("formGroupName must be used with a parent formGroup directive.  You'll want to add a formGroup\n      directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      "+Xa)},t.arrayParentException=function(){throw new Error('formArrayName must be used with a parent formGroup directive.  You\'ll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n        Example:\n\n        \n    <div [formGroup]="myGroup">\n      <div formArrayName="cities">\n        <div *ngFor="let city of cityArray.controls; index as i">\n          <input [formControlName]="i">\n        </div>\n      </div>\n    </div>\n\n    In your class:\n\n    this.cityArray = new FormArray([new FormControl(\'SF\')]);\n    this.myGroup = new FormGroup({\n      cities: this.cityArray\n    });')},t.disabledAttrWarning=function(){console.warn("\n      It looks like you're using the disabled attribute with a reactive form directive. If you set disabled to true\n      when you set up this control in your component class, the disabled attribute will actually be set in the DOM for\n      you. We recommend using this approach to avoid 'changed after checked' errors.\n       \n      Example: \n      form = new FormGroup({\n        first: new FormControl({value: 'Nancy', disabled: true}, Validators.required),\n        last: new FormControl('Drew', Validators.required)\n      });\n    ")},t}(),Qa=function(t){function e(e,n){var i=t.call(this)||this;return i._validators=e,i._asyncValidators=n,i.submitted=!1,i.directives=[],i.form=null,i.ngSubmit=new r.EventEmitter,i}return Object(v.c)(e,t),e.prototype.ngOnChanges=function(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations())},Object.defineProperty(e.prototype,"formDirective",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"control",{get:function(){return this.form},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return[]},enumerable:!0,configurable:!0}),e.prototype.addControl=function(t){var e=this.form.get(t.path);return Ea(e,t),e.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),e},e.prototype.getControl=function(t){return this.form.get(t.path)},e.prototype.removeControl=function(t){Ma(this.directives,t)},e.prototype.addFormGroup=function(t){var e=this.form.get(t.path);Sa(e,t),e.updateValueAndValidity({emitEvent:!1})},e.prototype.removeFormGroup=function(t){},e.prototype.getFormGroup=function(t){return this.form.get(t.path)},e.prototype.addFormArray=function(t){var e=this.form.get(t.path);Sa(e,t),e.updateValueAndValidity({emitEvent:!1})},e.prototype.removeFormArray=function(t){},e.prototype.getFormArray=function(t){return this.form.get(t.path)},e.prototype.updateModel=function(t,e){this.form.get(t.path).setValue(e)},e.prototype.onSubmit=function(t){return this.submitted=!0,Aa(this.form,this.directives),this.ngSubmit.emit(t),!1},e.prototype.onReset=function(){this.resetForm()},e.prototype.resetForm=function(t){void 0===t&&(t=void 0),this.form.reset(t),this.submitted=!1},e.prototype._updateDomValue=function(){var t=this;this.directives.forEach(function(e){var n=t.form.get(e.path);e.control!==n&&(function(t,e){e.valueAccessor.registerOnChange(function(){return Ia(e)}),e.valueAccessor.registerOnTouched(function(){return Ia(e)}),e._rawValidators.forEach(function(t){t.registerOnValidatorChange&&t.registerOnValidatorChange(null)}),e._rawAsyncValidators.forEach(function(t){t.registerOnValidatorChange&&t.registerOnValidatorChange(null)}),t&&t._clearChangeFns()}(e.control,e),n&&Ea(n,e),e.control=n)}),this.form._updateTreeValidity({emitEvent:!1})},e.prototype._updateRegistrations=function(){var t=this;this.form._registerOnCollectionChange(function(){return t._updateDomValue()}),this._oldForm&&this._oldForm._registerOnCollectionChange(function(){}),this._oldForm=this.form},e.prototype._updateValidators=function(){var t=ka(this._validators);this.form.validator=sa.compose([this.form.validator,t]);var e=Oa(this._asyncValidators);this.form.asyncValidator=sa.composeAsync([this.form.asyncValidator,e])},e.prototype._checkFormPresent=function(){this.form||Ja.missingFormException()},e}(ia),$a=function(){},ts=function(){},es=function(){};function ns(t){return Error("A hint was already declared for 'align=\""+t+"\"'.")}var rs=function(){},is=0,os=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i._elementRef=e,i._changeDetectorRef=n,i._showAlwaysAnimate=!1,i._subscriptAnimationState="",i._hintLabel="",i._hintLabelId="mat-hint-"+is++,i._labelOptions=r||{},i.floatLabel=i._labelOptions.float||"auto",i}return Object(v.c)(e,t),Object.defineProperty(e.prototype,"dividerColor",{get:function(){return this.color},set:function(t){this.color=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hideRequiredMarker",{get:function(){return this._hideRequiredMarker},set:function(t){this._hideRequiredMarker=re(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_shouldAlwaysFloat",{get:function(){return"always"===this._floatLabel&&!this._showAlwaysAnimate},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_canLabelFloat",{get:function(){return"never"!==this._floatLabel},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hintLabel",{get:function(){return this._hintLabel},set:function(t){this._hintLabel=t,this._processHints()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"floatPlaceholder",{get:function(){return this._floatLabel},set:function(t){this.floatLabel=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"floatLabel",{get:function(){return this._floatLabel},set:function(t){t!==this._floatLabel&&(this._floatLabel=t||this._labelOptions.float||"auto",this._changeDetectorRef.markForCheck())},enumerable:!0,configurable:!0}),e.prototype.ngAfterContentInit=function(){var t=this;this._validateControlChild(),this._control.controlType&&this._elementRef.nativeElement.classList.add("mat-form-field-type-"+this._control.controlType),this._control.stateChanges.pipe(Ei(null)).subscribe(function(){t._validatePlaceholders(),t._syncDescribedByIds(),t._changeDetectorRef.markForCheck()});var e=this._control.ngControl;e&&e.valueChanges&&e.valueChanges.subscribe(function(){t._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(Ei(null)).subscribe(function(){t._processHints(),t._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(Ei(null)).subscribe(function(){t._syncDescribedByIds(),t._changeDetectorRef.markForCheck()})},e.prototype.ngAfterContentChecked=function(){this._validateControlChild()},e.prototype.ngAfterViewInit=function(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()},e.prototype._shouldForward=function(t){var e=this._control?this._control.ngControl:null;return e&&e[t]},e.prototype._hasPlaceholder=function(){return!(!this._control.placeholder&&!this._placeholderChild)},e.prototype._hasLabel=function(){return!!this._labelChild},e.prototype._shouldLabelFloat=function(){return this._canLabelFloat&&(this._control.shouldLabelFloat||this._control.shouldPlaceholderFloat||this._shouldAlwaysFloat)},e.prototype._hideControlPlaceholder=function(){return!this._hasLabel()||!this._shouldLabelFloat()},e.prototype._hasFloatingLabel=function(){return this._hasLabel()||this._hasPlaceholder()},e.prototype._getDisplayedMessages=function(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"},e.prototype._animateAndLockLabel=function(){var t=this;this._hasFloatingLabel()&&this._canLabelFloat&&(this._showAlwaysAnimate=!0,this._floatLabel="always",_t(this._label.nativeElement,"transitionend").pipe(te(1)).subscribe(function(){t._showAlwaysAnimate=!1}),this._changeDetectorRef.markForCheck())},e.prototype._validatePlaceholders=function(){if(this._control.placeholder&&this._placeholderChild)throw Error("Placeholder attribute and child element were both specified.")},e.prototype._processHints=function(){this._validateHints(),this._syncDescribedByIds()},e.prototype._validateHints=function(){var t,e,n=this;this._hintChildren&&this._hintChildren.forEach(function(r){if("start"===r.align){if(t||n.hintLabel)throw ns("start");t=r}else if("end"===r.align){if(e)throw ns("end");e=r}})},e.prototype._syncDescribedByIds=function(){if(this._control){var t=[];if("hint"===this._getDisplayedMessages()){var e=this._hintChildren?this._hintChildren.find(function(t){return"start"===t.align}):null,n=this._hintChildren?this._hintChildren.find(function(t){return"end"===t.align}):null;e?t.push(e.id):this._hintLabel&&t.push(this._hintLabelId),n&&t.push(n.id)}else this._errorChildren&&(t=this._errorChildren.map(function(t){return t.id}));this._control.setDescribedByIds(t)}},e.prototype._validateControlChild=function(){if(!this._control)throw Error("mat-form-field must contain a MatFormFieldControl.")},e}(Xr(function(t){this._elementRef=t},"primary")),as=function(){},ss=function(){function t(t,e,n){void 0===t&&(t=!1),void 0===n&&(n=!0);var r=this;this._multiple=t,this._emitChanges=n,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.onChange=this._emitChanges?new ct.a:null,e&&e.length&&(t?e.forEach(function(t){return r._markSelected(t)}):this._markSelected(e[0]),this._selectedToEmit.length=0)}return Object.defineProperty(t.prototype,"selected",{get:function(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected},enumerable:!0,configurable:!0}),t.prototype.select=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._verifyValueAssignment(e),e.forEach(function(e){return t._markSelected(e)}),this._emitChangeEvent()},t.prototype.deselect=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._verifyValueAssignment(e),e.forEach(function(e){return t._unmarkSelected(e)}),this._emitChangeEvent()},t.prototype.toggle=function(t){this.isSelected(t)?this.deselect(t):this.select(t)},t.prototype.clear=function(){this._unmarkAll(),this._emitChangeEvent()},t.prototype.isSelected=function(t){return this._selection.has(t)},t.prototype.isEmpty=function(){return 0===this._selection.size},t.prototype.hasValue=function(){return!this.isEmpty()},t.prototype.sort=function(t){this._multiple&&this._selected&&this._selected.sort(t)},t.prototype._emitChangeEvent=function(){if(this._selected=null,this._selectedToEmit.length||this._deselectedToEmit.length){var t=new us(this,this._selectedToEmit,this._deselectedToEmit);this.onChange&&this.onChange.next(t),this._deselectedToEmit=[],this._selectedToEmit=[]}},t.prototype._markSelected=function(t){this.isSelected(t)||(this._multiple||this._unmarkAll(),this._selection.add(t),this._emitChanges&&this._selectedToEmit.push(t))},t.prototype._unmarkSelected=function(t){this.isSelected(t)&&(this._selection.delete(t),this._emitChanges&&this._deselectedToEmit.push(t))},t.prototype._unmarkAll=function(){var t=this;this.isEmpty()||this._selection.forEach(function(e){return t._unmarkSelected(e)})},t.prototype._verifyValueAssignment=function(t){if(t.length>1&&!this._multiple)throw Error("Cannot pass multiple values into SelectionModel with single-value mode.")},t}(),us=function(t,e,n){this.source=t,this.added=e,this.removed=n},ls=function(){function t(){this._listeners=[]}return t.prototype.notify=function(t,e){for(var n=0,r=this._listeners;n<r.length;n++)(0,r[n])(t,e)},t.prototype.listen=function(t){var e=this;return this._listeners.push(t),function(){e._listeners=e._listeners.filter(function(e){return t!==e})}},t.prototype.ngOnDestroy=function(){this._listeners=[]},t}();function cs(t){return t||new ls}var hs=function(){},ps=function(){},fs=function(){function t(){}return t.prototype.create=function(t){return"undefined"==typeof MutationObserver?null:new MutationObserver(t)},t}(),ds=function(){function t(t,e,n){this._mutationObserverFactory=t,this._elementRef=e,this._ngZone=n,this._disabled=!1,this.event=new r.EventEmitter,this._debouncer=new ct.a}return Object.defineProperty(t.prototype,"disabled",{get:function(){return this._disabled},set:function(t){this._disabled=re(t)},enumerable:!0,configurable:!0}),t.prototype.ngAfterContentInit=function(){var t=this;this.debounce>0?this._ngZone.runOutsideAngular(function(){t._debouncer.pipe(Re(t.debounce)).subscribe(function(e){return t.event.emit(e)})}):this._debouncer.subscribe(function(e){return t.event.emit(e)}),this._observer=this._ngZone.runOutsideAngular(function(){return t._mutationObserverFactory.create(function(e){t._debouncer.next(e)})}),this.disabled||this._enable()},t.prototype.ngOnChanges=function(t){t.disabled&&(t.disabled.currentValue?this._disable():this._enable())},t.prototype.ngOnDestroy=function(){this._disable(),this._debouncer.complete()},t.prototype._disable=function(){this._observer&&this._observer.disconnect()},t.prototype._enable=function(){this._observer&&this._observer.observe(this._elementRef.nativeElement,{characterData:!0,childList:!0,subtree:!0})},t}(),ms=function(){},gs=new r.InjectionToken("mat-checkbox-click-action"),ys=0,vs=function(){var t={Init:0,Checked:1,Unchecked:2,Indeterminate:3};return t[t.Init]="Init",t[t.Checked]="Checked",t[t.Unchecked]="Unchecked",t[t.Indeterminate]="Indeterminate",t}(),_s=function(t){function e(e,n,i,o,a){var s=t.call(this,e)||this;return s._changeDetectorRef=n,s._focusMonitor=i,s._clickAction=a,s.ariaLabel="",s.ariaLabelledby=null,s._uniqueId="mat-checkbox-"+ ++ys,s.id=s._uniqueId,s.labelPosition="after",s.name=null,s.change=new r.EventEmitter,s.indeterminateChange=new r.EventEmitter,s._onTouched=function(){},s._currentAnimationClass="",s._currentCheckState=vs.Init,s._controlValueAccessorChangeFn=function(){},s._checked=!1,s._indeterminate=!1,s.tabIndex=parseInt(o)||0,s}return Object(v.c)(e,t),Object.defineProperty(e.prototype,"inputId",{get:function(){return(this.id||this._uniqueId)+"-input"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"required",{get:function(){return this._required},set:function(t){this._required=re(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"align",{get:function(){return"after"==this.labelPosition?"start":"end"},set:function(t){this.labelPosition="start"==t?"after":"before"},enumerable:!0,configurable:!0}),e.prototype.ngAfterViewInit=function(){var t=this;this._focusMonitor.monitor(this._inputElement.nativeElement).subscribe(function(e){return t._onInputFocusChange(e)})},e.prototype.ngOnDestroy=function(){this._focusMonitor.stopMonitoring(this._inputElement.nativeElement)},Object.defineProperty(e.prototype,"checked",{get:function(){return this._checked},set:function(t){t!=this.checked&&(this._checked=t,this._changeDetectorRef.markForCheck())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"indeterminate",{get:function(){return this._indeterminate},set:function(t){var e=t!=this._indeterminate;this._indeterminate=t,e&&(this._transitionCheckState(this._indeterminate?vs.Indeterminate:this.checked?vs.Checked:vs.Unchecked),this.indeterminateChange.emit(this._indeterminate))},enumerable:!0,configurable:!0}),e.prototype._isRippleDisabled=function(){return this.disableRipple||this.disabled},e.prototype._onLabelTextChange=function(){this._changeDetectorRef.markForCheck()},e.prototype.writeValue=function(t){this.checked=!!t},e.prototype.registerOnChange=function(t){this._controlValueAccessorChangeFn=t},e.prototype.registerOnTouched=function(t){this._onTouched=t},e.prototype.setDisabledState=function(t){this.disabled=t,this._changeDetectorRef.markForCheck()},e.prototype._getAriaChecked=function(){return this.checked?"true":this.indeterminate?"mixed":"false"},e.prototype._transitionCheckState=function(t){var e=this._currentCheckState,n=this._elementRef.nativeElement;e!==t&&(this._currentAnimationClass.length>0&&n.classList.remove(this._currentAnimationClass),this._currentAnimationClass=this._getAnimationClassForCheckStateTransition(e,t),this._currentCheckState=t,this._currentAnimationClass.length>0&&n.classList.add(this._currentAnimationClass))},e.prototype._emitChangeEvent=function(){var t=new function(){};t.source=this,t.checked=this.checked,this._controlValueAccessorChangeFn(this.checked),this.change.emit(t)},e.prototype._onInputFocusChange=function(t){this._focusRipple||"keyboard"!==t?t||(this._removeFocusRipple(),this._onTouched()):this._focusRipple=this.ripple.launch(0,0,{persistent:!0})},e.prototype.toggle=function(){this.checked=!this.checked},e.prototype._onInputClick=function(t){var e=this;t.stopPropagation(),this.disabled||"noop"===this._clickAction?this.disabled||"noop"!==this._clickAction||(this._inputElement.nativeElement.checked=this.checked,this._inputElement.nativeElement.indeterminate=this.indeterminate):(this.indeterminate&&"check"!==this._clickAction&&Promise.resolve().then(function(){e._indeterminate=!1,e.indeterminateChange.emit(e._indeterminate)}),this.toggle(),this._transitionCheckState(this._checked?vs.Checked:vs.Unchecked),this._emitChangeEvent())},e.prototype.focus=function(){this._focusMonitor.focusVia(this._inputElement.nativeElement,"keyboard")},e.prototype._onInteractionEvent=function(t){t.stopPropagation()},e.prototype._getAnimationClassForCheckStateTransition=function(t,e){var n="";switch(t){case vs.Init:if(e===vs.Checked)n="unchecked-checked";else{if(e!=vs.Indeterminate)return"";n="unchecked-indeterminate"}break;case vs.Unchecked:n=e===vs.Checked?"unchecked-checked":"unchecked-indeterminate";break;case vs.Checked:n=e===vs.Unchecked?"checked-unchecked":"checked-indeterminate";break;case vs.Indeterminate:n=e===vs.Checked?"indeterminate-checked":"indeterminate-unchecked"}return"mat-checkbox-anim-"+n},e.prototype._removeFocusRipple=function(){this._focusRipple&&(this._focusRipple.fadeOut(),this._focusRipple=null)},e}(Yr(Xr(Hr(Gr(function(t){this._elementRef=t})),"accent"))),bs=function(){};function xs(t){return function(e){return e.lift(new ws(t))}}var ws=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){return e.subscribe(new Es(t,this.notifier))},t}(),Es=function(t){function e(e,n){t.call(this,e),this.notifier=n,this.add(Object(Ct.a)(this,n))}return Object(v.c)(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.complete()},e.prototype.notifyComplete=function(){},e}(Et.a),Cs=["button","checkbox","file","hidden","image","radio","range","reset","submit"],Ss=0,Is=function(t){function e(e,n,r,i,o,a,s){var u=t.call(this,a,i,o,r)||this;return u._elementRef=e,u._platform=n,u.ngControl=r,u._uid="mat-input-"+Ss++,u._isServer=!1,u.focused=!1,u.stateChanges=new ct.a,u.controlType="mat-input",u._disabled=!1,u.placeholder="",u._required=!1,u._type="text",u._readonly=!1,u._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(function(t){return ut().has(t)}),u._inputValueAccessor=s||u._elementRef.nativeElement,u._previousNativeValue=u.value,u.id=u.id,n.IOS&&e.nativeElement.addEventListener("keyup",function(t){var e=t.target;e.value||e.selectionStart||e.selectionEnd||(e.setSelectionRange(1,1),e.setSelectionRange(0,0))}),u._isServer=!u._platform.isBrowser,u}return Object(v.c)(e,t),Object.defineProperty(e.prototype,"disabled",{get:function(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled},set:function(t){this._disabled=re(t),this.focused&&(this.focused=!1,this.stateChanges.next())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._id},set:function(t){this._id=t||this._uid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"required",{get:function(){return this._required},set:function(t){this._required=re(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(t){this._type=t||"text",this._validateType(),!this._isTextarea()&&ut().has(this._type)&&(this._elementRef.nativeElement.type=this._type)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._inputValueAccessor.value},set:function(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readonly",{get:function(){return this._readonly},set:function(t){this._readonly=re(t)},enumerable:!0,configurable:!0}),e.prototype.ngOnChanges=function(){this.stateChanges.next()},e.prototype.ngOnDestroy=function(){this.stateChanges.complete()},e.prototype.ngDoCheck=function(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue()},e.prototype.focus=function(){this._elementRef.nativeElement.focus()},e.prototype._focusChanged=function(t){t===this.focused||this.readonly||(this.focused=t,this.stateChanges.next())},e.prototype._onInput=function(){},e.prototype._dirtyCheckNativeValue=function(){var t=this.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())},e.prototype._validateType=function(){if(Cs.indexOf(this._type)>-1)throw Error('Input type "'+this._type+"\" isn't supported by matInput.")},e.prototype._isNeverEmpty=function(){return this._neverEmptyInputTypes.indexOf(this._type)>-1},e.prototype._isBadInput=function(){var t=this._elementRef.nativeElement.validity;return t&&t.badInput},e.prototype._isTextarea=function(){var t=this._elementRef.nativeElement,e=this._platform.isBrowser?t.nodeName:t.name;return!!e&&"textarea"===e.toLowerCase()},Object.defineProperty(e.prototype,"empty",{get:function(){return!this._isNeverEmpty()&&!this._elementRef.nativeElement.value&&!this._isBadInput()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shouldLabelFloat",{get:function(){return this.focused||!this.empty},enumerable:!0,configurable:!0}),e.prototype.setDescribedByIds=function(t){this._ariaDescribedby=t.join(" ")},e.prototype.onContainerClick=function(){this.focus()},e}(Zr(function(t,e,n,r){this._defaultErrorStateMatcher=t,this._parentForm=e,this._parentFormGroup=n,this.ngControl=r})),Ts=function(){},ks=function(){function t(){this._vertical=!1,this._inset=!1}return Object.defineProperty(t.prototype,"vertical",{get:function(){return this._vertical},set:function(t){this._vertical=re(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inset",{get:function(){return this._inset},set:function(t){this._inset=re(t)},enumerable:!0,configurable:!0}),t}(),Os=function(){},Ps=0,As=function(){},Ms=0,Rs=function(t){function e(e,n,r,i){var o=t.call(this,e,n,r)||this;return o._viewContainerRef=i,o._hideToggle=!1,o._inputChanges=new ct.a,o._headerId="mat-expansion-panel-header-"+Ms++,o.accordion=e,o}return Object(v.c)(e,t),Object.defineProperty(e.prototype,"hideToggle",{get:function(){return this._hideToggle},set:function(t){this._hideToggle=re(t)},enumerable:!0,configurable:!0}),e.prototype._getHideToggle=function(){return this.accordion?this.accordion.hideToggle:this.hideToggle},e.prototype._hasSpacing=function(){return!!this.accordion&&"default"===(this.expanded?this.accordion.displayMode:this._getExpandedState())},e.prototype._getExpandedState=function(){return this.expanded?"expanded":"collapsed"},e.prototype.ngAfterContentInit=function(){var t=this;this._lazyContent&&this.opened.pipe(Ei(null),Object(At.a)(function(){return t.expanded&&!t._portal}),te(1)).subscribe(function(){t._portal=new Xt(t._lazyContent._template,t._viewContainerRef)})},e.prototype.ngOnChanges=function(t){this._inputChanges.next(t)},e.prototype.ngOnDestroy=function(){t.prototype.ngOnDestroy.call(this),this._inputChanges.complete()},e.prototype._bodyAnimation=function(t){var e=t.element.classList,n=t.phaseName,r=t.toState;"done"===n&&"expanded"===r?e.add("mat-expanded"):"start"===n&&"collapsed"===r&&e.remove("mat-expanded")},e}(function(){function t(t,e,n){var i=this;this.accordion=t,this._changeDetectorRef=e,this._expansionDispatcher=n,this.closed=new r.EventEmitter,this.opened=new r.EventEmitter,this.destroyed=new r.EventEmitter,this.expandedChange=new r.EventEmitter,this.id="cdk-accordion-child-"+Ps++,this._expanded=!1,this._disabled=!1,this._removeUniqueSelectionListener=function(){},this._removeUniqueSelectionListener=n.listen(function(t,e){i.accordion&&!i.accordion.multi&&i.accordion.id===e&&i.id!==t&&(i.expanded=!1)})}return Object.defineProperty(t.prototype,"expanded",{get:function(){return this._expanded},set:function(t){t=re(t),this._expanded!==t&&(this._expanded=t,this.expandedChange.emit(t),t?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disabled",{get:function(){return this._disabled},set:function(t){this._disabled=re(t)},enumerable:!0,configurable:!0}),t.prototype.ngOnDestroy=function(){this.destroyed.emit(),this._removeUniqueSelectionListener()},t.prototype.toggle=function(){this.disabled||(this.expanded=!this.expanded)},t.prototype.close=function(){this.disabled||(this.expanded=!1)},t.prototype.open=function(){this.disabled||(this.expanded=!0)},t}()),Ls=function(){function t(t,e,n,r){var i=this;this.panel=t,this._element=e,this._focusMonitor=n,this._changeDetectorRef=r,this._parentChangeSubscription=yt.a.EMPTY,this._parentChangeSubscription=Object(Mt.a)(t.opened,t.closed,t._inputChanges.pipe(Object(At.a)(function(t){return!(!t.hideToggle&&!t.disabled)}))).subscribe(function(){return i._changeDetectorRef.markForCheck()}),n.monitor(e.nativeElement)}return t.prototype._toggle=function(){this.panel.toggle()},t.prototype._isExpanded=function(){return this.panel.expanded},t.prototype._getExpandedState=function(){return this.panel._getExpandedState()},t.prototype._getPanelId=function(){return this.panel.id},t.prototype._showToggle=function(){return!this.panel.hideToggle&&!this.panel.disabled},t.prototype._keydown=function(t){switch(t.keyCode){case 32:case 13:t.preventDefault(),this._toggle();break;default:return}},t.prototype.ngOnDestroy=function(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element.nativeElement)},t}(),Ns=function(){},Ds=function(){},Fs=function(){},zs=function(t){function e(e,n,r){var i=t.call(this)||this;return i._elementRef=e,i._focusMonitor=r,i._hovered=new ct.a,i._highlighted=!1,i._triggersSubmenu=!1,r&&r.monitor(i._getHostElement(),!1),i._document=n,i}return Object(v.c)(e,t),e.prototype.focus=function(t){void 0===t&&(t="program"),this._focusMonitor?this._focusMonitor.focusVia(this._getHostElement(),t):this._getHostElement().focus()},e.prototype.ngOnDestroy=function(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._getHostElement()),this._hovered.complete()},e.prototype._getTabIndex=function(){return this.disabled?"-1":"0"},e.prototype._getHostElement=function(){return this._elementRef.nativeElement},e.prototype._checkDisabled=function(t){this.disabled&&(t.preventDefault(),t.stopPropagation())},e.prototype._emitHoverEvent=function(){this.disabled||this._hovered.next(this)},e.prototype.getLabel=function(){var t=this._elementRef.nativeElement,e=this._document?this._document.TEXT_NODE:3,n="";if(t.childNodes)for(var r=t.childNodes.length,i=0;i<r;i++)t.childNodes[i].nodeType===e&&(n+=t.childNodes[i].textContent);return n.trim()},e}(Hr(Gr(function(){}))),js=new r.InjectionToken("mat-menu-default-options"),Bs=function(){function t(t,e,n){this._elementRef=t,this._ngZone=e,this._defaultOptions=n,this._xPosition=this._defaultOptions.xPosition,this._yPosition=this._defaultOptions.yPosition,this._tabSubscription=yt.a.EMPTY,this._classList={},this._panelAnimationState="void",this._overlapTrigger=this._defaultOptions.overlapTrigger,this.closed=new r.EventEmitter,this.close=this.closed}return Object.defineProperty(t.prototype,"xPosition",{get:function(){return this._xPosition},set:function(t){"before"!==t&&"after"!==t&&function(){throw Error('x-position value must be either \'before\' or after\'.\n      Example: <mat-menu x-position="before" #menu="matMenu"></mat-menu>')}(),this._xPosition=t,this.setPositionClasses()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"yPosition",{get:function(){return this._yPosition},set:function(t){"above"!==t&&"below"!==t&&function(){throw Error('y-position value must be either \'above\' or below\'.\n      Example: <mat-menu y-position="above" #menu="matMenu"></mat-menu>')}(),this._yPosition=t,this.setPositionClasses()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"overlapTrigger",{get:function(){return this._overlapTrigger},set:function(t){this._overlapTrigger=re(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"panelClass",{set:function(t){t&&t.length&&(this._classList=t.split(" ").reduce(function(t,e){return t[e]=!0,t},{}),this._elementRef.nativeElement.className="",this.setPositionClasses())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"classList",{get:function(){return this.panelClass},set:function(t){this.panelClass=t},enumerable:!0,configurable:!0}),t.prototype.ngAfterContentInit=function(){var t=this;this._keyManager=new tn(this.items).withWrap().withTypeAhead(),this._tabSubscription=this._keyManager.tabOut.subscribe(function(){return t.close.emit("keydown")})},t.prototype.ngOnDestroy=function(){this._tabSubscription.unsubscribe(),this.closed.complete()},t.prototype._hovered=function(){var t=this;return this.items?this.items.changes.pipe(Ei(this.items),Object(ea.a)(function(t){return Mt.a.apply(void 0,t.map(function(t){return t._hovered}))})):this._ngZone.onStable.asObservable().pipe(te(1),Object(ea.a)(function(){return t._hovered()}))},t.prototype._handleKeydown=function(t){switch(t.keyCode){case oe:this.closed.emit("keydown"),t.stopPropagation();break;case 37:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case 39:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:this._keyManager.onKeydown(t)}},t.prototype.focusFirstItem=function(t){var e=this;void 0===t&&(t="program"),this.lazyContent?this._ngZone.onStable.asObservable().pipe(te(1)).subscribe(function(){return e._keyManager.setFocusOrigin(t).setFirstItemActive()}):this._keyManager.setFocusOrigin(t).setFirstItemActive()},t.prototype.resetActiveItem=function(){this._keyManager.setActiveItem(-1)},t.prototype.setPositionClasses=function(t,e){void 0===t&&(t=this.xPosition),void 0===e&&(e=this.yPosition),this._classList["mat-menu-before"]="before"===t,this._classList["mat-menu-after"]="after"===t,this._classList["mat-menu-above"]="above"===e,this._classList["mat-menu-below"]="below"===e},t.prototype.setElevation=function(t){var e="mat-elevation-z"+(2+t),n=Object.keys(this._classList).find(function(t){return t.startsWith("mat-elevation-z")});n&&n!==this._previousElevation||(this._previousElevation&&(this._classList[this._previousElevation]=!1),this._classList[e]=!0,this._previousElevation=e)},t.prototype._startAnimation=function(){this._panelAnimationState="enter-start"},t.prototype._resetAnimation=function(){this._panelAnimationState="void"},t.prototype._onAnimationDone=function(t){"enter-start"===t.toState&&(this._panelAnimationState="enter")},t}(),Vs=new r.InjectionToken("mat-menu-scroll-strategy");function qs(t){return function(){return t.scrollStrategies.reposition()}}var Us=function(){function t(t,e,n,i,o,a,s,u){this._overlay=t,this._element=e,this._viewContainerRef=n,this._scrollStrategy=i,this._parentMenu=o,this._menuItemInstance=a,this._dir=s,this._focusMonitor=u,this._overlayRef=null,this._menuOpen=!1,this._closeSubscription=yt.a.EMPTY,this._hoverSubscription=yt.a.EMPTY,this._openedByMouse=!1,this.menuOpened=new r.EventEmitter,this.onMenuOpen=this.menuOpened,this.menuClosed=new r.EventEmitter,this.onMenuClose=this.menuClosed,a&&(a._triggersSubmenu=this.triggersSubmenu())}return Object.defineProperty(t.prototype,"_deprecatedMatMenuTriggerFor",{get:function(){return this.menu},set:function(t){this.menu=t},enumerable:!0,configurable:!0}),t.prototype.ngAfterContentInit=function(){var t=this;this._checkMenu(),this.menu.close.subscribe(function(e){t._destroyMenu(),"click"===e&&t._parentMenu&&t._parentMenu.closed.emit(e)}),this.triggersSubmenu()&&(this._hoverSubscription=this._parentMenu._hovered().pipe(Object(At.a)(function(e){return e===t._menuItemInstance})).subscribe(function(){t._openedByMouse=!0,t.openMenu()}))},t.prototype.ngOnDestroy=function(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._cleanUpSubscriptions()},Object.defineProperty(t.prototype,"menuOpen",{get:function(){return this._menuOpen},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dir",{get:function(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"},enumerable:!0,configurable:!0}),t.prototype.triggersSubmenu=function(){return!(!this._menuItemInstance||!this._parentMenu)},t.prototype.toggleMenu=function(){return this._menuOpen?this.closeMenu():this.openMenu()},t.prototype.openMenu=function(){var t=this;this._menuOpen||(this._createOverlay().attach(this._portal),this.menu.lazyContent&&this.menu.lazyContent.attach(this.menuData),this._closeSubscription=this._menuClosingActions().subscribe(function(){return t.closeMenu()}),this._initMenu(),this.menu instanceof Bs&&this.menu._startAnimation())},t.prototype.closeMenu=function(){this.menu.close.emit()},t.prototype.focus=function(t){void 0===t&&(t="program"),this._focusMonitor?this._focusMonitor.focusVia(this._element.nativeElement,t):this._element.nativeElement.focus()},t.prototype._destroyMenu=function(){this._overlayRef&&this.menuOpen&&(this._resetMenu(),this._closeSubscription.unsubscribe(),this._overlayRef.detach(),this.menu instanceof Bs&&this.menu._resetAnimation())},t.prototype._initMenu=function(){this.menu.parentMenu=this.triggersSubmenu()?this._parentMenu:void 0,this.menu.direction=this.dir,this._setMenuElevation(),this._setIsMenuOpen(!0),this.menu.focusFirstItem(this._openedByMouse?"mouse":"program")},t.prototype._setMenuElevation=function(){if(this.menu.setElevation){for(var t=0,e=this.menu.parentMenu;e;)t++,e=e.parentMenu;this.menu.setElevation(t)}},t.prototype._resetMenu=function(){this._setIsMenuOpen(!1),this._openedByMouse?this.triggersSubmenu()||this.focus("mouse"):this.focus(),this._openedByMouse=!1},t.prototype._setIsMenuOpen=function(t){this._menuOpen=t,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&(this._menuItemInstance._highlighted=t)},t.prototype._checkMenu=function(){this.menu||function(){throw Error('mat-menu-trigger: must pass in an mat-menu instance.\n\n    Example:\n      <mat-menu #menu="matMenu"></mat-menu>\n      <button [matMenuTriggerFor]="menu"></button>')}()},t.prototype._createOverlay=function(){if(!this._overlayRef){this._portal=new Xt(this.menu.templateRef,this._viewContainerRef);var t=this._getOverlayConfig();this._subscribeToPositions(t.positionStrategy),this._overlayRef=this._overlay.create(t)}return this._overlayRef},t.prototype._getOverlayConfig=function(){return new se({positionStrategy:this._getPosition(),hasBackdrop:!this.triggersSubmenu(),backdropClass:"cdk-overlay-transparent-backdrop",direction:this.dir,scrollStrategy:this._scrollStrategy()})},t.prototype._subscribeToPositions=function(t){var e=this;t.onPositionChange.subscribe(function(t){e.menu.setPositionClasses("start"===t.connectionPair.overlayX?"after":"before","top"===t.connectionPair.overlayY?"below":"above")})},t.prototype._getPosition=function(){var t="before"===this.menu.xPosition?["end","start"]:["start","end"],e=t[0],n=t[1],r="above"===this.menu.yPosition?["bottom","top"]:["top","bottom"],i=r[0],o=r[1],a=[i,o],s=a[0],u=a[1],l=[e,n],c=l[0],h=l[1],p=0;return this.triggersSubmenu()?(h=e="before"===this.menu.xPosition?"start":"end",n=c="end"===e?"start":"end",p="bottom"===i?8:-8):this.menu.overlapTrigger||(s="top"===i?"bottom":"top",u="top"===o?"bottom":"top"),this._overlay.position().connectedTo(this._element,{originX:e,originY:s},{overlayX:c,overlayY:i}).withDirection(this.dir).withOffsetY(p).withFallbackPosition({originX:n,originY:s},{overlayX:h,overlayY:i}).withFallbackPosition({originX:e,originY:u},{overlayX:c,overlayY:o},void 0,-p).withFallbackPosition({originX:n,originY:u},{overlayX:h,overlayY:o},void 0,-p)},t.prototype._cleanUpSubscriptions=function(){this._closeSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()},t.prototype._menuClosingActions=function(){var t=this,e=this._overlayRef.backdropClick(),n=this._overlayRef.detachments(),r=this._parentMenu?this._parentMenu.close:ft(),i=this._parentMenu?this._parentMenu._hovered().pipe(Object(At.a)(function(e){return e!==t._menuItemInstance}),Object(At.a)(function(){return t._menuOpen})):ft();return Object(Mt.a)(e,r,i,n)},t.prototype._handleMousedown=function(t){(function(t){return 0===t.buttons})(t)||(this._openedByMouse=!0,this.triggersSubmenu()&&t.preventDefault())},t.prototype._handleKeydown=function(t){var e=t.keyCode;this.triggersSubmenu()&&(39===e&&"ltr"===this.dir||37===e&&"rtl"===this.dir)&&this.openMenu()},t.prototype._handleClick=function(t){this.triggersSubmenu()?(t.stopPropagation(),this.openMenu()):this.toggleMenu()},t}(),Gs=function(){},Xs=0,Hs=new r.InjectionToken("mat-select-scroll-strategy");function Ys(t){return function(){return t.scrollStrategies.reposition()}}var Zs=function(t){function e(e,n,i,o,a,s,u,l,c,h,p,f){var d=t.call(this,a,o,u,l,h)||this;return d._viewportRuler=e,d._changeDetectorRef=n,d._ngZone=i,d._dir=s,d._parentFormField=c,d.ngControl=h,d._scrollStrategyFactory=f,d._panelOpen=!1,d._required=!1,d._scrollTop=0,d._multiple=!1,d._compareWith=function(t,e){return t===e},d._uid="mat-select-"+Xs++,d._destroy=new ct.a,d._triggerFontSize=0,d._onChange=function(){},d._onTouched=function(){},d._optionIds="",d._transformOrigin="top",d._panelDoneAnimating=!1,d._scrollStrategy=d._scrollStrategyFactory(),d._offsetY=0,d._positions=[{originX:"start",originY:"top",overlayX:"start",overlayY:"top"},{originX:"start",originY:"bottom",overlayX:"start",overlayY:"bottom"}],d.focused=!1,d.controlType="mat-select",d.ariaLabel="",d.optionSelectionChanges=_i(function(){return d.options?Mt.a.apply(void 0,d.options.map(function(t){return t.onSelectionChange})):d._ngZone.onStable.asObservable().pipe(te(1),Object(ea.a)(function(){return d.optionSelectionChanges}))}),d.openedChange=new r.EventEmitter,d.onOpen=d._openedStream,d.onClose=d._closedStream,d.selectionChange=new r.EventEmitter,d.change=d.selectionChange,d.valueChange=new r.EventEmitter,d.ngControl&&(d.ngControl.valueAccessor=d),d.tabIndex=parseInt(p)||0,d.id=d.id,d}return Object(v.c)(e,t),Object.defineProperty(e.prototype,"placeholder",{get:function(){return this._placeholder},set:function(t){this._placeholder=t,this.stateChanges.next()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"required",{get:function(){return this._required},set:function(t){this._required=re(t),this.stateChanges.next()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"multiple",{get:function(){return this._multiple},set:function(t){if(this._selectionModel)throw Error("Cannot change `multiple` mode of select after initialization.");this._multiple=re(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"compareWith",{get:function(){return this._compareWith},set:function(t){if("function"!=typeof t)throw Error("`compareWith` must be a function.");this._compareWith=t,this._selectionModel&&this._initializeSelection()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(t){t!==this._value&&(this.writeValue(t),this._value=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._id},set:function(t){this._id=t||this._uid,this.stateChanges.next()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_openedStream",{get:function(){return this.openedChange.pipe(Object(At.a)(function(t){return t}),Object(Fe.a)(function(){}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_closedStream",{get:function(){return this.openedChange.pipe(Object(At.a)(function(t){return!t}),Object(Fe.a)(function(){}))},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){this._selectionModel=new ss(this.multiple,void 0,!1),this.stateChanges.next()},e.prototype.ngAfterContentInit=function(){var t=this;this._initKeyManager(),this.options.changes.pipe(Ei(null),xs(this._destroy)).subscribe(function(){t._resetOptions(),t._initializeSelection()})},e.prototype.ngDoCheck=function(){this.ngControl&&this.updateErrorState()},e.prototype.ngOnChanges=function(t){t.disabled&&this.stateChanges.next()},e.prototype.ngOnDestroy=function(){this._destroy.next(),this._destroy.complete(),this.stateChanges.complete()},e.prototype.toggle=function(){this.panelOpen?this.close():this.open()},e.prototype.open=function(){var t=this;!this.disabled&&this.options&&this.options.length&&(this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._triggerFontSize=parseInt(getComputedStyle(this.trigger.nativeElement)["font-size"]),this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._calculateOverlayPosition(),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck(),this._ngZone.onStable.asObservable().pipe(te(1)).subscribe(function(){t._triggerFontSize&&t.overlayDir.overlayRef&&t.overlayDir.overlayRef.overlayElement&&(t.overlayDir.overlayRef.overlayElement.style.fontSize=t._triggerFontSize+"px")}))},e.prototype.close=function(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())},e.prototype.writeValue=function(t){this.options&&this._setSelectionByValue(t)},e.prototype.registerOnChange=function(t){this._onChange=t},e.prototype.registerOnTouched=function(t){this._onTouched=t},e.prototype.setDisabledState=function(t){this.disabled=t,this._changeDetectorRef.markForCheck(),this.stateChanges.next()},Object.defineProperty(e.prototype,"panelOpen",{get:function(){return this._panelOpen},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selected",{get:function(){return this.multiple?this._selectionModel.selected:this._selectionModel.selected[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"triggerValue",{get:function(){if(this.empty)return"";if(this._multiple){var t=this._selectionModel.selected.map(function(t){return t.viewValue});return this._isRtl()&&t.reverse(),t.join(", ")}return this._selectionModel.selected[0].viewValue},enumerable:!0,configurable:!0}),e.prototype._isRtl=function(){return!!this._dir&&"rtl"===this._dir.value},e.prototype._handleKeydown=function(t){this.disabled||(this.panelOpen?this._handleOpenKeydown(t):this._handleClosedKeydown(t))},e.prototype._handleClosedKeydown=function(t){var e=t.keyCode;13===e||32===e||(this.multiple||t.altKey)&&(40===e||38===e||37===e||39===e)?(t.preventDefault(),this.open()):this.multiple||this._keyManager.onKeydown(t)},e.prototype._handleOpenKeydown=function(t){var e=t.keyCode,n=40===e||38===e,r=this._keyManager;if(36===e||35===e)t.preventDefault(),36===e?r.setFirstItemActive():r.setLastItemActive();else if(n&&t.altKey)t.preventDefault(),this.close();else if(13!==e&&32!==e||!r.activeItem){var i=r.activeItemIndex;r.onKeydown(t),this._multiple&&n&&t.shiftKey&&r.activeItem&&r.activeItemIndex!==i&&r.activeItem._selectViaInteraction()}else t.preventDefault(),r.activeItem._selectViaInteraction()},e.prototype._onPanelDone=function(){this.panelOpen?(this._scrollTop=0,this.openedChange.emit(!0)):(this.openedChange.emit(!1),this._panelDoneAnimating=!1,this.overlayDir.offsetX=0,this._changeDetectorRef.markForCheck())},e.prototype._onFadeInDone=function(){this._panelDoneAnimating=this.panelOpen,this._changeDetectorRef.markForCheck()},e.prototype._onFocus=function(){this.disabled||(this.focused=!0,this.stateChanges.next())},e.prototype._onBlur=function(){this.focused=!1,this.disabled||this.panelOpen||(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())},e.prototype._onAttached=function(){var t=this;this.overlayDir.positionChange.pipe(te(1)).subscribe(function(){t._changeDetectorRef.detectChanges(),t._calculateOverlayOffsetX(),t.panel.nativeElement.scrollTop=t._scrollTop})},e.prototype._getPanelTheme=function(){return this._parentFormField?"mat-"+this._parentFormField.color:""},Object.defineProperty(e.prototype,"empty",{get:function(){return!this._selectionModel||this._selectionModel.isEmpty()},enumerable:!0,configurable:!0}),e.prototype._initializeSelection=function(){var t=this;Promise.resolve().then(function(){t._setSelectionByValue(t.ngControl?t.ngControl.value:t._value)})},e.prototype._setSelectionByValue=function(t,e){var n=this;if(void 0===e&&(e=!1),this.multiple&&t){if(!Array.isArray(t))throw Error("Value must be an array in multiple-selection mode.");this._clearSelection(),t.forEach(function(t){return n._selectValue(t,e)}),this._sortValues()}else{this._clearSelection();var r=this._selectValue(t,e);r&&this._keyManager.setActiveItem(this.options.toArray().indexOf(r))}this._changeDetectorRef.markForCheck()},e.prototype._selectValue=function(t,e){var n=this;void 0===e&&(e=!1);var i=this.options.find(function(e){try{return null!=e.value&&n._compareWith(e.value,t)}catch(t){return Object(r.isDevMode)()&&console.warn(t),!1}});return i&&(e?i._selectViaInteraction():i.select(),this._selectionModel.select(i),this.stateChanges.next()),i},e.prototype._clearSelection=function(t){this._selectionModel.clear(),this.options.forEach(function(e){e!==t&&e.deselect()}),this.stateChanges.next()},e.prototype._initKeyManager=function(){var t=this;this._keyManager=new $e(this.options).withTypeAhead().withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._keyManager.tabOut.pipe(xs(this._destroy)).subscribe(function(){return t.close()}),this._keyManager.change.pipe(xs(this._destroy)).subscribe(function(){t._panelOpen&&t.panel?t._scrollActiveOptionIntoView():t._panelOpen||t.multiple||!t._keyManager.activeItem||t._keyManager.activeItem._selectViaInteraction()})},e.prototype._resetOptions=function(){var t=this,e=Object(Mt.a)(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(xs(e),Object(At.a)(function(t){return t.isUserInput})).subscribe(function(e){t._onSelect(e.source),!t.multiple&&t._panelOpen&&(t.close(),t.focus())}),Mt.a.apply(void 0,this.options.map(function(t){return t._stateChanges})).pipe(xs(e)).subscribe(function(){t._changeDetectorRef.markForCheck(),t.stateChanges.next()}),this._setOptionIds()},e.prototype._onSelect=function(t){var e=this._selectionModel.isSelected(t);this.multiple?(this._selectionModel.toggle(t),this.stateChanges.next(),e?t.deselect():t.select(),this._keyManager.setActiveItem(this._getOptionIndex(t)),this._sortValues()):(this._clearSelection(null==t.value?void 0:t),null==t.value?this._propagateChanges(t.value):(this._selectionModel.select(t),this.stateChanges.next())),e!==this._selectionModel.isSelected(t)&&this._propagateChanges()},e.prototype._sortValues=function(){var t=this;this._multiple&&(this._selectionModel.clear(),this.options.forEach(function(e){e.selected&&t._selectionModel.select(e)}),this.stateChanges.next())},e.prototype._propagateChanges=function(t){var e;e=this.multiple?this.selected.map(function(t){return t.value}):this.selected?this.selected.value:t,this._value=e,this.valueChange.emit(e),this._onChange(e),this.selectionChange.emit(new function(t,e){this.source=t,this.value=e}(this,e)),this._changeDetectorRef.markForCheck()},e.prototype._setOptionIds=function(){this._optionIds=this.options.map(function(t){return t.id}).join(" ")},e.prototype._highlightCorrectOption=function(){this._keyManager&&(this.empty?this._keyManager.setFirstItemActive():this._keyManager.setActiveItem(this._getOptionIndex(this._selectionModel.selected[0])))},e.prototype._scrollActiveOptionIntoView=function(){var t,e,n,r=this._keyManager.activeItemIndex||0,i=di(r,this.options,this.optionGroups);this.panel.nativeElement.scrollTop=(256,(n=(r+i)*(t=this._getItemHeight()))<(e=this.panel.nativeElement.scrollTop)?n:n+t>e+256?Math.max(0,n-256+t):e)},e.prototype.focus=function(){this._elementRef.nativeElement.focus()},e.prototype._getOptionIndex=function(t){return this.options.reduce(function(e,n,r){return void 0===e?t===n?r:void 0:e},void 0)},e.prototype._calculateOverlayPosition=function(){var t=this._getItemHeight(),e=this._getItemCount(),n=Math.min(e*t,256),r=e*t-n,i=this.empty?0:this._getOptionIndex(this._selectionModel.selected[0]);i+=di(i,this.options,this.optionGroups);var o=n/2;this._scrollTop=this._calculateOverlayScroll(i,o,r),this._offsetY=this._calculateOverlayOffsetY(i,o,r),this._checkOverlayWithinViewport(r)},e.prototype._calculateOverlayScroll=function(t,e,n){var r=this._getItemHeight();return Math.min(Math.max(0,r*t-e+r/2),n)},Object.defineProperty(e.prototype,"_ariaLabel",{get:function(){return this.ariaLabelledby?null:this.ariaLabel||this.placeholder},enumerable:!0,configurable:!0}),e.prototype._getAriaActiveDescendant=function(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null},e.prototype._calculateOverlayOffsetX=function(){var t,e=this.overlayDir.overlayRef.overlayElement.getBoundingClientRect(),n=this._viewportRuler.getViewportSize(),r=this._isRtl(),i=this.multiple?60:32;if(this.multiple)t=44;else{var o=this._selectionModel.selected[0]||this.options.first;t=o&&o.group?32:16}r||(t*=-1);var a=0-(e.left+t-(r?i:0)),s=e.right+t-n.width+(r?0:i);a>0?t+=a+8:s>0&&(t-=s+8),this.overlayDir.offsetX=t,this.overlayDir.overlayRef.updatePosition()},e.prototype._calculateOverlayOffsetY=function(t,e,n){var r=this._getItemHeight(),i=(r-this._triggerRect.height)/2,o=Math.floor(256/r);return-1*(0===this._scrollTop?t*r:this._scrollTop===n?(t-(this._getItemCount()-o))*r+(r-(this._getItemCount()*r-256)%r):e-r/2)-i},e.prototype._checkOverlayWithinViewport=function(t){var e=this._getItemHeight(),n=this._viewportRuler.getViewportSize(),r=this._triggerRect.top-8,i=n.height-this._triggerRect.bottom-8,o=Math.abs(this._offsetY),a=Math.min(this._getItemCount()*e,256)-o-this._triggerRect.height;a>i?this._adjustPanelUp(a,i):o>r?this._adjustPanelDown(o,r,t):this._transformOrigin=this._getOriginBasedOnOption()},e.prototype._adjustPanelUp=function(t,e){var n=Math.round(t-e);this._scrollTop-=n,this._offsetY-=n,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop<=0&&(this._scrollTop=0,this._offsetY=0,this._transformOrigin="50% bottom 0px")},e.prototype._adjustPanelDown=function(t,e,n){var r=Math.round(t-e);if(this._scrollTop+=r,this._offsetY+=r,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop>=n)return this._scrollTop=n,this._offsetY=0,void(this._transformOrigin="50% top 0px")},e.prototype._getOriginBasedOnOption=function(){var t=this._getItemHeight(),e=(t-this._triggerRect.height)/2;return"50% "+(Math.abs(this._offsetY)-e+t/2)+"px 0px"},e.prototype._getItemCount=function(){return this.options.length+this.optionGroups.length},e.prototype._getItemHeight=function(){return 3*this._triggerFontSize},e.prototype.setDescribedByIds=function(t){this._ariaDescribedby=t.join(" ")},e.prototype.onContainerClick=function(){this.focus(),this.open()},Object.defineProperty(e.prototype,"shouldPlaceholderFloat",{get:function(){return this._panelOpen||!this.empty},enumerable:!0,configurable:!0}),e}(Hr(Yr(Gr(Zr(function(t,e,n,r,i){this._elementRef=t,this._defaultErrorStateMatcher=e,this._parentForm=n,this._parentFormGroup=r,this.ngControl=i}))))),Ws=function(){},Ks=new Map,Js=function(){function t(t){this.platform=t,this._matchMedia=this.platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Qs}return t.prototype.matchMedia=function(t){return this.platform.WEBKIT&&function(t){if(!Ks.has(t))try{var e=document.createElement("style");e.setAttribute("type","text/css"),e.sheet||e.appendChild(document.createTextNode("@media "+t+" {.fx-query-test{ }}")),document.getElementsByTagName("head")[0].appendChild(e),Ks.set(t,e)}catch(t){console.error(t)}}(t),this._matchMedia(t)},t}();function Qs(t){return{matches:"all"===t||""===t,media:t,addListener:function(){},removeListener:function(){}}}function $s(t){throw Error("A drawer was already declared for 'position=\""+t+"\"'")}var tu=new r.InjectionToken("MAT_DRAWER_DEFAULT_AUTOSIZE"),eu=function(){function t(t,e){this._changeDetectorRef=t,this._container=e,this._margins={left:null,right:null}}return t.prototype.ngAfterContentInit=function(){var t=this;this._container._contentMargins.subscribe(function(e){t._margins=e,t._changeDetectorRef.markForCheck()})},t}(),nu=function(){function t(t,e,n,i,o){var a=this;this._elementRef=t,this._focusTrapFactory=e,this._focusMonitor=n,this._platform=i,this._doc=o,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._animationStarted=new r.EventEmitter,this._animationState="void",this.openedChange=new r.EventEmitter(!0),this.onOpen=this._openedStream,this.onClose=this._closedStream,this.onPositionChanged=new r.EventEmitter,this.onAlignChanged=new r.EventEmitter,this._modeChanged=new ct.a,this._opened=!1,this.openedChange.subscribe(function(t){t?(a._doc&&(a._elementFocusedBeforeDrawerWasOpened=a._doc.activeElement),a._isFocusTrapEnabled&&a._focusTrap&&a._trapFocus()):a._restoreFocus()})}return Object.defineProperty(t.prototype,"position",{get:function(){return this._position},set:function(t){(t="end"===t?"end":"start")!=this._position&&(this._position=t,this.onAlignChanged.emit(),this.onPositionChanged.emit())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"align",{get:function(){return this.position},set:function(t){this.position=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mode",{get:function(){return this._mode},set:function(t){this._mode=t,this._modeChanged.next()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disableClose",{get:function(){return this._disableClose},set:function(t){this._disableClose=re(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_openedStream",{get:function(){return this.openedChange.pipe(Object(At.a)(function(t){return t}),Object(Fe.a)(function(){}))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"openedStart",{get:function(){return this._animationStarted.pipe(Object(At.a)(function(t){return t.fromState!==t.toState&&0===t.toState.indexOf("open")}),Object(Fe.a)(function(){}))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_closedStream",{get:function(){return this.openedChange.pipe(Object(At.a)(function(t){return!t}),Object(Fe.a)(function(){}))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"closedStart",{get:function(){return this._animationStarted.pipe(Object(At.a)(function(t){return t.fromState!==t.toState&&"void"===t.toState}),Object(Fe.a)(function(){}))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_isFocusTrapEnabled",{get:function(){return this.opened&&"side"!==this.mode},enumerable:!0,configurable:!0}),t.prototype._trapFocus=function(){var t=this;this._focusTrap.focusInitialElementWhenReady().then(function(e){e||"function"!=typeof t._elementRef.nativeElement.focus||t._elementRef.nativeElement.focus()})},t.prototype._restoreFocus=function(){var t=this._doc&&this._doc.activeElement;t&&this._elementRef.nativeElement.contains(t)&&(this._elementFocusedBeforeDrawerWasOpened instanceof HTMLElement?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,this._openedVia):this._elementRef.nativeElement.blur()),this._elementFocusedBeforeDrawerWasOpened=null,this._openedVia=null},t.prototype.ngAfterContentInit=function(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._focusTrap.enabled=this._isFocusTrapEnabled},t.prototype.ngAfterContentChecked=function(){this._platform.isBrowser&&(this._enableAnimations=!0)},t.prototype.ngOnDestroy=function(){this._focusTrap&&this._focusTrap.destroy()},Object.defineProperty(t.prototype,"opened",{get:function(){return this._opened},set:function(t){this.toggle(re(t))},enumerable:!0,configurable:!0}),t.prototype.open=function(t){return this.toggle(!0,t)},t.prototype.close=function(){return this.toggle(!1)},t.prototype.toggle=function(t,e){var n=this;return void 0===t&&(t=!this.opened),void 0===e&&(e="program"),this._opened=t,t?(this._animationState=this._enableAnimations?"open":"open-instant",this._openedVia=e):(this._animationState="void",this._restoreFocus()),this._focusTrap&&(this._focusTrap.enabled=this._isFocusTrapEnabled),new Promise(function(t){n.openedChange.pipe(te(1)).subscribe(function(e){t(new function(t,e){this.type=t,this.animationFinished=e}(e?"open":"close",!0))})})},t.prototype.handleKeydown=function(t){t.keyCode!==oe||this.disableClose||(this.close(),t.stopPropagation())},t.prototype._onAnimationStart=function(t){this._animationStarted.emit(t)},t.prototype._onAnimationEnd=function(t){var e=t.fromState,n=t.toState;(0===n.indexOf("open")&&"void"===e||"void"===n&&0===e.indexOf("open"))&&this.openedChange.emit(this._opened)},Object.defineProperty(t.prototype,"_width",{get:function(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0},enumerable:!0,configurable:!0}),t}(),ru=function(){function t(t,e,n,i,o){void 0===o&&(o=!1);var a=this;this._dir=t,this._element=e,this._ngZone=n,this._changeDetectorRef=i,this.backdropClick=new r.EventEmitter,this._destroyed=new ct.a,this._doCheckSubject=new ct.a,this._contentMargins=new ct.a,t&&t.change.pipe(xs(this._destroyed)).subscribe(function(){a._validateDrawers(),a._updateContentMargins()}),this._autosize=o}return Object.defineProperty(t.prototype,"start",{get:function(){return this._start},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"end",{get:function(){return this._end},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autosize",{get:function(){return this._autosize},set:function(t){this._autosize=re(t)},enumerable:!0,configurable:!0}),t.prototype.ngAfterContentInit=function(){var t=this;this._drawers.changes.pipe(Ei(null)).subscribe(function(){t._validateDrawers(),t._drawers.forEach(function(e){t._watchDrawerToggle(e),t._watchDrawerPosition(e),t._watchDrawerMode(e)}),(!t._drawers.length||t._isDrawerOpen(t._start)||t._isDrawerOpen(t._end))&&t._updateContentMargins(),t._changeDetectorRef.markForCheck()}),this._doCheckSubject.pipe(Re(10),xs(this._destroyed)).subscribe(function(){return t._updateContentMargins()})},t.prototype.ngOnDestroy=function(){this._doCheckSubject.complete(),this._destroyed.next(),this._destroyed.complete()},t.prototype.open=function(){this._drawers.forEach(function(t){return t.open()})},t.prototype.close=function(){this._drawers.forEach(function(t){return t.close()})},t.prototype.ngDoCheck=function(){var t=this;this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(function(){return t._doCheckSubject.next()})},t.prototype._watchDrawerToggle=function(t){var e=this;t._animationStarted.pipe(xs(this._drawers.changes),Object(At.a)(function(t){return t.fromState!==t.toState})).subscribe(function(t){"open-instant"!==t.toState&&e._element.nativeElement.classList.add("mat-drawer-transition"),e._updateContentMargins(),e._changeDetectorRef.markForCheck()}),"side"!==t.mode&&t.openedChange.pipe(xs(this._drawers.changes)).subscribe(function(){return e._setContainerClass(t.opened)})},t.prototype._watchDrawerPosition=function(t){var e=this;t&&t.onPositionChanged.pipe(xs(this._drawers.changes)).subscribe(function(){e._ngZone.onMicrotaskEmpty.asObservable().pipe(te(1)).subscribe(function(){e._validateDrawers()})})},t.prototype._watchDrawerMode=function(t){var e=this;t&&t._modeChanged.pipe(xs(Object(Mt.a)(this._drawers.changes,this._destroyed))).subscribe(function(){e._updateContentMargins(),e._changeDetectorRef.markForCheck()})},t.prototype._setContainerClass=function(t){t?this._element.nativeElement.classList.add("mat-drawer-opened"):this._element.nativeElement.classList.remove("mat-drawer-opened")},t.prototype._validateDrawers=function(){var t=this;this._start=this._end=null,this._drawers.forEach(function(e){"end"==e.position?(null!=t._end&&$s("end"),t._end=e):(null!=t._start&&$s("start"),t._start=e)}),this._right=this._left=null,this._dir&&"ltr"!=this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)},t.prototype._isPushed=function(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode},t.prototype._onBackdropClicked=function(){this.backdropClick.emit(),this._closeModalDrawer()},t.prototype._closeModalDrawer=function(){[this._start,this._end].filter(function(t){return t&&!t.disableClose&&"side"!==t.mode}).forEach(function(t){return t.close()})},t.prototype._isShowingBackdrop=function(){return this._isDrawerOpen(this._start)&&"side"!=this._start.mode||this._isDrawerOpen(this._end)&&"side"!=this._end.mode},t.prototype._isDrawerOpen=function(t){return null!=t&&t.opened},t.prototype._updateContentMargins=function(){var t=this,e=0,n=0;if(this._left&&this._left.opened&&("side"==this._left.mode?e+=this._left._width:"push"==this._left.mode&&(e+=r=this._left._width,n-=r)),this._right&&this._right.opened)if("side"==this._right.mode)n+=this._right._width;else if("push"==this._right.mode){var r;n+=r=this._right._width,e-=r}this._ngZone.run(function(){return t._contentMargins.next({left:e,right:n})})},t}(),iu=function(t){function e(e,n){return t.call(this,e,n)||this}return Object(v.c)(e,t),e}(eu),ou=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._fixedInViewport=!1,e._fixedTopGap=0,e._fixedBottomGap=0,e}return Object(v.c)(e,t),Object.defineProperty(e.prototype,"fixedInViewport",{get:function(){return this._fixedInViewport},set:function(t){this._fixedInViewport=re(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fixedTopGap",{get:function(){return this._fixedTopGap},set:function(t){this._fixedTopGap=ie(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fixedBottomGap",{get:function(){return this._fixedBottomGap},set:function(t){this._fixedBottomGap=ie(t)},enumerable:!0,configurable:!0}),e}(nu),au=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(v.c)(e,t),e}(ru),su=function(){},uu=function(t){function e(e,n,i,o,a){var s=t.call(this,e)||this;return s._focusMonitor=n,s._changeDetectorRef=i,s._dir=o,s._invert=!1,s._max=100,s._min=0,s._step=1,s._thumbLabel=!1,s._tickInterval=0,s._value=null,s._vertical=!1,s.change=new r.EventEmitter,s.input=new r.EventEmitter,s.onTouched=function(){},s._percent=0,s._isSliding=!1,s._isActive=!1,s._tickIntervalPercent=0,s._sliderDimensions=null,s._controlValueAccessorChangeFn=function(){},s._dirChangeSubscription=yt.a.EMPTY,s.tabIndex=parseInt(a)||0,s}return Object(v.c)(e,t),Object.defineProperty(e.prototype,"invert",{get:function(){return this._invert},set:function(t){this._invert=re(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"max",{get:function(){return this._max},set:function(t){this._max=ie(t,this._max),this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"min",{get:function(){return this._min},set:function(t){this._min=ie(t,this._min),null===this._value&&(this.value=this._min),this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"step",{get:function(){return this._step},set:function(t){this._step=ie(t,this._step),this._step%1!=0&&(this._roundLabelTo=this._step.toString().split(".").pop().length),this._changeDetectorRef.markForCheck()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"thumbLabel",{get:function(){return this._thumbLabel},set:function(t){this._thumbLabel=re(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_thumbLabelDeprecated",{get:function(){return this._thumbLabel},set:function(t){this._thumbLabel=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tickInterval",{get:function(){return this._tickInterval},set:function(t){this._tickInterval="auto"===t?"auto":"number"==typeof t||"string"==typeof t?ie(t,this._tickInterval):0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_tickIntervalDeprecated",{get:function(){return this.tickInterval},set:function(t){this.tickInterval=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return null===this._value&&(this.value=this._min),this._value},set:function(t){t!==this._value&&(this._value=ie(t),this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"vertical",{get:function(){return this._vertical},set:function(t){this._vertical=re(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayValue",{get:function(){return this._roundLabelTo&&this.value&&this.value%1!=0?this.value.toFixed(this._roundLabelTo):this.value||0},enumerable:!0,configurable:!0}),e.prototype.focus=function(){this._focusHostElement()},e.prototype.blur=function(){this._blurHostElement()},Object.defineProperty(e.prototype,"percent",{get:function(){return this._clamp(this._percent)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_invertAxis",{get:function(){return this.vertical?!this.invert:this.invert},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_isMinValue",{get:function(){return 0===this.percent},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_thumbGap",{get:function(){return this.disabled?7:this._isMinValue&&!this.thumbLabel?this._isActive?10:7:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_trackBackgroundStyles",{get:function(){var t=this.vertical?"Y":"X";return{transform:"translate"+t+"("+(this._invertMouseCoords?"-":"")+this._thumbGap+"px) scale"+t+"("+(1-this.percent)+")"}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_trackFillStyles",{get:function(){var t=this.vertical?"Y":"X";return{transform:"translate"+t+"("+(this._invertMouseCoords?"":"-")+this._thumbGap+"px) scale"+t+"("+this.percent+")"}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_ticksContainerStyles",{get:function(){return{transform:"translate"+(this.vertical?"Y":"X")+"("+(this.vertical||"rtl"!=this._direction?"-":"")+this._tickIntervalPercent/2*100+"%)"}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_ticksStyles",{get:function(){var t=100*this._tickIntervalPercent,e={backgroundSize:this.vertical?"2px "+t+"%":t+"% 2px",transform:"translateZ(0) translate"+(this.vertical?"Y":"X")+"("+(this.vertical||"rtl"!=this._direction?"":"-")+t/2+"%)"+(this.vertical||"rtl"!=this._direction?"":" rotate(180deg)")};return this._isMinValue&&this._thumbGap&&(e["padding"+(this.vertical?this._invertAxis?"Bottom":"Top":this._invertAxis?"Right":"Left")]=this._thumbGap+"px"),e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_thumbContainerStyles",{get:function(){return{transform:"translate"+(this.vertical?"Y":"X")+"(-"+100*(("rtl"!=this._direction||this.vertical?this._invertAxis:!this._invertAxis)?this.percent:1-this.percent)+"%)"}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_invertMouseCoords",{get:function(){return"rtl"!=this._direction||this.vertical?this._invertAxis:!this._invertAxis},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_direction",{get:function(){return this._dir&&"rtl"==this._dir.value?"rtl":"ltr"},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){var t=this;this._focusMonitor.monitor(this._elementRef.nativeElement,!0).subscribe(function(e){t._isActive=!!e&&"keyboard"!==e,t._changeDetectorRef.detectChanges()}),this._dir&&(this._dirChangeSubscription=this._dir.change.subscribe(function(){t._changeDetectorRef.markForCheck()}))},e.prototype.ngOnDestroy=function(){this._focusMonitor.stopMonitoring(this._elementRef.nativeElement),this._dirChangeSubscription.unsubscribe()},e.prototype._onMouseenter=function(){this.disabled||(this._sliderDimensions=this._getSliderDimensions(),this._updateTickIntervalPercent())},e.prototype._onClick=function(t){if(!this.disabled){var e=this.value;this._isSliding=!1,this._focusHostElement(),this._updateValueFromPosition({x:t.clientX,y:t.clientY}),e!=this.value&&(this._emitInputEvent(),this._emitChangeEvent())}},e.prototype._onSlide=function(t){if(!this.disabled){this._isSliding||this._onSlideStart(null),t.preventDefault();var e=this.value;this._updateValueFromPosition({x:t.center.x,y:t.center.y}),e!=this.value&&this._emitInputEvent()}},e.prototype._onSlideStart=function(t){this.disabled||this._isSliding||(this._onMouseenter(),this._isSliding=!0,this._focusHostElement(),this._valueOnSlideStart=this.value,t&&(this._updateValueFromPosition({x:t.center.x,y:t.center.y}),t.preventDefault()))},e.prototype._onSlideEnd=function(){this._isSliding=!1,this._valueOnSlideStart==this.value||this.disabled||this._emitChangeEvent(),this._valueOnSlideStart=null},e.prototype._onFocus=function(){this._sliderDimensions=this._getSliderDimensions(),this._updateTickIntervalPercent()},e.prototype._onBlur=function(){this.onTouched()},e.prototype._onKeydown=function(t){if(!this.disabled){var e=this.value;switch(t.keyCode){case 33:this._increment(10);break;case 34:this._increment(-10);break;case 35:this.value=this.max;break;case 36:this.value=this.min;break;case 37:this._increment("rtl"==this._direction?1:-1);break;case 38:this._increment(1);break;case 39:this._increment("rtl"==this._direction?-1:1);break;case 40:this._increment(-1);break;default:return}e!=this.value&&(this._emitInputEvent(),this._emitChangeEvent()),this._isSliding=!0,t.preventDefault()}},e.prototype._onKeyup=function(){this._isSliding=!1},e.prototype._increment=function(t){this.value=this._clamp((this.value||0)+this.step*t,this.min,this.max)},e.prototype._updateValueFromPosition=function(t){if(this._sliderDimensions){var e=this._clamp(((this.vertical?t.y:t.x)-(this.vertical?this._sliderDimensions.top:this._sliderDimensions.left))/(this.vertical?this._sliderDimensions.height:this._sliderDimensions.width));this._invertMouseCoords&&(e=1-e);var n=this._calculateValue(e),r=Math.round((n-this.min)/this.step)*this.step+this.min;this.value=this._clamp(r,this.min,this.max)}},e.prototype._emitChangeEvent=function(){this._controlValueAccessorChangeFn(this.value),this.change.emit(this._createChangeEvent())},e.prototype._emitInputEvent=function(){this.input.emit(this._createChangeEvent())},e.prototype._updateTickIntervalPercent=function(){if(this.tickInterval&&this._sliderDimensions)if("auto"==this.tickInterval){var t=this.vertical?this._sliderDimensions.height:this._sliderDimensions.width,e=Math.ceil(30/(t*this.step/(this.max-this.min)));this._tickIntervalPercent=e*this.step/t}else this._tickIntervalPercent=this.tickInterval*this.step/(this.max-this.min)},e.prototype._createChangeEvent=function(t){void 0===t&&(t=this.value);var e=new function(){};return e.source=this,e.value=t,e},e.prototype._calculatePercentage=function(t){return((t||0)-this.min)/(this.max-this.min)},e.prototype._calculateValue=function(t){return this.min+t*(this.max-this.min)},e.prototype._clamp=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=1),Math.max(e,Math.min(t,n))},e.prototype._getSliderDimensions=function(){return this._sliderWrapper?this._sliderWrapper.nativeElement.getBoundingClientRect():null},e.prototype._focusHostElement=function(){this._elementRef.nativeElement.focus()},e.prototype._blurHostElement=function(){this._elementRef.nativeElement.blur()},e.prototype.writeValue=function(t){this.value=t},e.prototype.registerOnChange=function(t){this._controlValueAccessorChangeFn=t},e.prototype.registerOnTouched=function(t){this.onTouched=t},e.prototype.setDisabledState=function(t){this.disabled=t},e}(Yr(Xr(Gr(function(t){this._elementRef=t}),"accent"))),lu=function(){};n("eoFs");var cu=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i._platform=n,i._document=r,i}return Object(v.c)(e,t),e.prototype.ngAfterViewInit=function(){var t=this;Object(r.isDevMode)()&&this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(function(){return t._checkToolbarMixedModes()}))},e.prototype._checkToolbarMixedModes=function(){var t=this;this._toolbarRows.length&&[].slice.call(this._elementRef.nativeElement.childNodes).filter(function(t){return!(t.classList&&t.classList.contains("mat-toolbar-row"))}).filter(function(e){return e.nodeType!==(t._document?t._document.COMMENT_NODE:8)}).some(function(t){return t.textContent.trim()})&&function(){throw Error("MatToolbar: Attempting to combine different toolbar modes. Either specify multiple `<mat-toolbar-row>` elements explicitly or just place content inside of a `<mat-toolbar>` for a single row.")}()},e}(Xr(function(t){this._elementRef=t})),hu=function(){},pu=function(){function t(t,e){this.dialog=t,this.ngRedux=e,this.detailsToggle=new r.EventEmitter}return t.prototype.toggleDetails=function(){this.detailsToggle.emit(!0)},t.prototype.returnToRoot=function(){this.ngRedux.dispatch({type:p})},t.prototype.ngOnInit=function(){},t}(),fu=n("kP2E"),du=r["\u0275crt"]({encapsulation:0,styles:[["#fountain-toolbar[_ngcontent-%COMP%]{right:0}button[_ngcontent-%COMP%]{display:inline-block}"]],data:{}});function mu(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,25,"div",[["id","fountain-toolbar"]],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,["\n  "])),(t()(),r["\u0275eld"](2,0,null,null,6,"button",[["color","primary"],["mat-raised-button",""]],[[8,"disabled",0]],null,null,Qi,Ji)),r["\u0275did"](3,180224,null,0,Wi,[r.ElementRef,ot,on],{color:[0,"color"]},null),(t()(),r["\u0275ted"](-1,0,["\n    "])),(t()(),r["\u0275eld"](5,0,null,0,2,"mat-icon",[["class","mat-icon"],["role","img"]],null,null,null,ta,$o)),r["\u0275did"](6,638976,null,0,Jo,[r.ElementRef,Yo,[8,null]],null,null),(t()(),r["\u0275ted"](-1,0,["navigation"])),(t()(),r["\u0275ted"](-1,0,["navigate\n  "])),(t()(),r["\u0275ted"](-1,null,["\n  "])),(t()(),r["\u0275eld"](10,0,null,null,6,"button",[["color","primary"],["mat-raised-button",""]],[[8,"disabled",0]],[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.toggleDetails()&&r),r},Qi,Ji)),r["\u0275did"](11,180224,null,0,Wi,[r.ElementRef,ot,on],{color:[0,"color"]},null),(t()(),r["\u0275ted"](-1,0,["\n    "])),(t()(),r["\u0275eld"](13,0,null,0,2,"mat-icon",[["class","mat-icon"],["role","img"]],null,null,null,ta,$o)),r["\u0275did"](14,638976,null,0,Jo,[r.ElementRef,Yo,[8,null]],null,null),(t()(),r["\u0275ted"](-1,0,["local_library"])),(t()(),r["\u0275ted"](-1,0,["details\n  "])),(t()(),r["\u0275ted"](-1,null,["\n  "])),(t()(),r["\u0275eld"](18,0,null,null,6,"button",[["color","warn"],["mat-raised-button",""]],[[8,"disabled",0]],[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.returnToRoot()&&r),r},Qi,Ji)),r["\u0275did"](19,180224,null,0,Wi,[r.ElementRef,ot,on],{color:[0,"color"]},null),(t()(),r["\u0275ted"](-1,0,["\n    "])),(t()(),r["\u0275eld"](21,0,null,0,2,"mat-icon",[["class","mat-icon"],["role","img"]],null,null,null,ta,$o)),r["\u0275did"](22,638976,null,0,Jo,[r.ElementRef,Yo,[8,null]],null,null),(t()(),r["\u0275ted"](-1,0,["close"])),(t()(),r["\u0275ted"](-1,0,["close\n  "])),(t()(),r["\u0275ted"](-1,null,["\n"])),(t()(),r["\u0275ted"](-1,null,["\n\n"]))],function(t,e){t(e,3,0,"primary"),t(e,6,0),t(e,11,0,"primary"),t(e,14,0),t(e,19,0,"warn"),t(e,22,0)},function(t,e){t(e,2,0,r["\u0275nov"](e,3).disabled||null),t(e,10,0,r["\u0275nov"](e,11).disabled||null),t(e,18,0,r["\u0275nov"](e,19).disabled||null)})}var gu=r["\u0275crt"]({encapsulation:2,styles:[],data:{}});function yu(t){return r["\u0275vid"](2,[r["\u0275ncd"](null,0)],null,null)}var vu=r["\u0275crt"]({encapsulation:2,styles:[],data:{animation:[{type:7,name:"transform",definitions:[{type:0,name:"open, open-instant",styles:{type:6,styles:{transform:"translate3d(0, 0, 0)",visibility:"visible"},offset:null},options:void 0},{type:0,name:"void",styles:{type:6,styles:{visibility:"hidden"},offset:null},options:void 0},{type:1,expr:"void => open-instant",animation:{type:4,styles:null,timings:"0ms"},options:null},{type:1,expr:"void <=> open, open-instant => void",animation:{type:4,styles:null,timings:"400ms cubic-bezier(0.25, 0.8, 0.25, 1)"},options:null}],options:{}}]}});function _u(t){return r["\u0275vid"](2,[r["\u0275ncd"](null,0)],null,null)}var bu=r["\u0275crt"]({encapsulation:2,styles:[".mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-opened{overflow:hidden}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:.4s;transition-timing-function:cubic-bezier(.25,.8,.25,1);transition-property:background-color,visibility}@media screen and (-ms-high-contrast:active){.mat-drawer-backdrop{opacity:.5}}.mat-drawer-content{-webkit-backface-visibility:hidden;backface-visibility:hidden;position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:.4s;transition-timing-function:cubic-bezier(.25,.8,.25,1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%,0,0)}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%,0,0)}[dir=rtl] .mat-drawer{transform:translate3d(100%,0,0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%,0,0)}.mat-drawer:not(.mat-drawer-side){box-shadow:0 8px 10px -5px rgba(0,0,0,.2),0 16px 24px 2px rgba(0,0,0,.14),0 6px 30px 5px rgba(0,0,0,.12)}.mat-sidenav-fixed{position:fixed}"],data:{}});function xu(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,3,"mat-sidenav-content",[["cdkScrollable",""],["class","mat-drawer-content mat-sidenav-content"]],[[4,"margin-left","px"],[4,"margin-right","px"]],null,null,yu,gu)),r["\u0275did"](1,212992,[[1,4]],0,Nt,[r.ElementRef,Rt,r.NgZone],null,null),r["\u0275did"](2,1097728,null,0,iu,[r.ChangeDetectorRef,au],null,null),r["\u0275ncd"](0,2)],function(t,e){t(e,1,0)},function(t,e){t(e,0,0,r["\u0275nov"](e,2)._margins.left,r["\u0275nov"](e,2)._margins.right)})}function wu(t){return r["\u0275vid"](2,[r["\u0275qud"](671088640,1,{scrollable:0}),(t()(),r["\u0275eld"](1,0,null,null,0,"div",[["class","mat-drawer-backdrop"]],[[2,"mat-drawer-shown",null]],[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component._onBackdropClicked()&&r),r},null,null)),r["\u0275ncd"](null,0),r["\u0275ncd"](null,1),(t()(),r["\u0275and"](16777216,null,null,1,null,xu)),r["\u0275did"](5,16384,null,0,z,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(t,e){t(e,5,0,!e.component._content)},function(t,e){t(e,1,0,e.component._isShowingBackdrop())})}var Eu=r["\u0275crt"]({encapsulation:2,styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none}.mat-form-field-prefix .mat-icon,.mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-prefix .mat-icon-button,.mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform:perspective(100px);-ms-transform:none;transform-origin:0 0;transition:transform .4s cubic-bezier(.25,.8,.25,1),color .4s cubic-bezier(.25,.8,.25,1),width .4s cubic-bezier(.25,.8,.25,1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label,.mat-form-field-empty.mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-placeholder-wrapper .mat-form-field-placeholder,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-placeholder-wrapper .mat-form-field-placeholder{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-placeholder-wrapper .mat-form-field-placeholder,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-placeholder-wrapper .mat-form-field-placeholder{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;height:1px;width:100%}.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.mat-form-field-underline .mat-form-field-ripple{position:absolute;top:0;left:0;width:100%;height:2px;transform-origin:50%;transform:scaleX(.5);visibility:hidden;opacity:0;transition:background-color .3s cubic-bezier(.55,0,.55,.2)}.mat-form-field-invalid:not(.mat-focused) .mat-form-field-underline .mat-form-field-ripple{height:1px}.mat-focused .mat-form-field-underline .mat-form-field-ripple,.mat-form-field-invalid .mat-form-field-underline .mat-form-field-ripple{visibility:visible;opacity:1;transform:scaleX(1);transition:transform .3s cubic-bezier(.25,.8,.25,1),opacity .1s cubic-bezier(.25,.8,.25,1),background-color .3s cubic-bezier(.25,.8,.25,1)}.mat-form-field-subscript-wrapper{position:absolute;width:100%;overflow:hidden}.mat-form-field-label-wrapper .mat-icon,.mat-form-field-subscript-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}",".mat-input-element{font:inherit;background:0 0;color:currentColor;border:none;outline:0;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element::-ms-clear,.mat-input-element::-ms-reveal{display:none}.mat-input-element[type=date]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=month]::after,.mat-input-element[type=time]::after,.mat-input-element[type=week]::after{content:' ';white-space:pre;width:1px}.mat-input-element::placeholder{transition:color .4s .133s cubic-bezier(.25,.8,.25,1)}.mat-input-element::-moz-placeholder{transition:color .4s .133s cubic-bezier(.25,.8,.25,1)}.mat-input-element::-webkit-input-placeholder{transition:color .4s .133s cubic-bezier(.25,.8,.25,1)}.mat-input-element:-ms-input-placeholder{transition:color .4s .133s cubic-bezier(.25,.8,.25,1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent!important;transition:none}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent!important;transition:none}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent!important;transition:none}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent!important;transition:none}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-autosize{resize:none}"],data:{animation:[{type:7,name:"transitionMessages",definitions:[{type:0,name:"enter",styles:{type:6,styles:{opacity:1,transform:"translateY(0%)"},offset:null},options:void 0},{type:1,expr:"void => enter",animation:[{type:6,styles:{opacity:0,transform:"translateY(-100%)"},offset:null},{type:4,styles:null,timings:"300ms cubic-bezier(0.55, 0, 0.55, 0.2)"}],options:null}],options:{}}]}});function Cu(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,1,"div",[["class","mat-input-prefix mat-form-field-prefix"]],null,null,null,null,null)),r["\u0275ncd"](null,0)],null,null)}function Su(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,2,null,null,null,null,null,null,null)),r["\u0275ncd"](null,2),(t()(),r["\u0275ted"](2,null,["",""]))],null,function(t,e){t(e,2,0,e.component._control.placeholder)})}function Iu(t){return r["\u0275vid"](0,[r["\u0275ncd"](null,3),(t()(),r["\u0275and"](0,null,null,0))],null,null)}function Tu(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,1,"span",[["aria-hidden","true"],["class","mat-placeholder-required mat-form-field-required-marker"]],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,["\xa0*"]))],null,null)}function ku(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,[[4,0],["label",1]],null,7,"label",[["class","mat-form-field-label mat-input-placeholder mat-form-field-placeholder"]],[[1,"for",0],[1,"aria-owns",0],[2,"mat-empty",null],[2,"mat-form-field-empty",null],[2,"mat-accent",null],[2,"mat-warn",null]],null,null,null,null)),r["\u0275did"](1,16384,null,0,V,[],{ngSwitch:[0,"ngSwitch"]},null),(t()(),r["\u0275and"](16777216,null,null,1,null,Su)),r["\u0275did"](3,278528,null,0,q,[r.ViewContainerRef,r.TemplateRef,V],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),r["\u0275and"](16777216,null,null,1,null,Iu)),r["\u0275did"](5,278528,null,0,q,[r.ViewContainerRef,r.TemplateRef,V],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),r["\u0275and"](16777216,null,null,1,null,Tu)),r["\u0275did"](7,16384,null,0,z,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(t,e){var n=e.component;t(e,1,0,n._hasLabel()),t(e,3,0,!1),t(e,5,0,!0),t(e,7,0,!n.hideRequiredMarker&&n._control.required&&!n._control.disabled)},function(t,e){var n=e.component;t(e,0,0,n._control.id,n._control.id,n._control.empty&&!n._shouldAlwaysFloat,n._control.empty&&!n._shouldAlwaysFloat,"accent"==n.color,"warn"==n.color)})}function Ou(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,1,"div",[["class","mat-input-suffix mat-form-field-suffix"]],null,null,null,null,null)),r["\u0275ncd"](null,4)],null,null)}function Pu(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,1,"div",[],[[24,"@transitionMessages",0]],null,null,null,null)),r["\u0275ncd"](null,5)],null,function(t,e){t(e,0,0,e.component._subscriptAnimationState)})}function Au(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,1,"div",[["class","mat-hint"]],[[8,"id",0]],null,null,null,null)),(t()(),r["\u0275ted"](1,null,["",""]))],null,function(t,e){var n=e.component;t(e,0,0,n._hintLabelId),t(e,1,0,n.hintLabel)})}function Mu(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,5,"div",[["class","mat-input-hint-wrapper mat-form-field-hint-wrapper"]],[[24,"@transitionMessages",0]],null,null,null,null)),(t()(),r["\u0275and"](16777216,null,null,1,null,Au)),r["\u0275did"](2,16384,null,0,z,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null),r["\u0275ncd"](null,6),(t()(),r["\u0275eld"](4,0,null,null,0,"div",[["class","mat-input-hint-spacer mat-form-field-hint-spacer"]],null,null,null,null,null)),r["\u0275ncd"](null,7)],function(t,e){t(e,2,0,e.component.hintLabel)},function(t,e){t(e,0,0,e.component._subscriptAnimationState)})}function Ru(t){return r["\u0275vid"](2,[r["\u0275qud"](402653184,1,{underlineRef:0}),r["\u0275qud"](402653184,2,{_connectionContainerRef:0}),r["\u0275qud"](402653184,3,{_inputContainerRef:0}),r["\u0275qud"](671088640,4,{_label:0}),(t()(),r["\u0275eld"](4,0,null,null,18,"div",[["class","mat-input-wrapper mat-form-field-wrapper"]],null,null,null,null,null)),(t()(),r["\u0275eld"](5,0,[[2,0],["connectionContainer",1]],null,9,"div",[["class","mat-input-flex mat-form-field-flex"]],null,[[null,"click"]],function(t,e,n){var r=!0,i=t.component;return"click"===e&&(r=!1!==(i._control.onContainerClick&&i._control.onContainerClick(n))&&r),r},null,null)),(t()(),r["\u0275and"](16777216,null,null,1,null,Cu)),r["\u0275did"](7,16384,null,0,z,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),r["\u0275eld"](8,0,[[3,0],["inputContainer",1]],null,4,"div",[["class","mat-input-infix mat-form-field-infix"]],null,null,null,null,null)),r["\u0275ncd"](null,1),(t()(),r["\u0275eld"](10,0,null,null,2,"span",[["class","mat-form-field-label-wrapper mat-input-placeholder-wrapper mat-form-field-placeholder-wrapper"]],null,null,null,null,null)),(t()(),r["\u0275and"](16777216,null,null,1,null,ku)),r["\u0275did"](12,16384,null,0,z,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),r["\u0275and"](16777216,null,null,1,null,Ou)),r["\u0275did"](14,16384,null,0,z,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),r["\u0275eld"](15,0,[[1,0],["underline",1]],null,1,"div",[["class","mat-input-underline mat-form-field-underline"]],null,null,null,null,null)),(t()(),r["\u0275eld"](16,0,null,null,0,"span",[["class","mat-input-ripple mat-form-field-ripple"]],[[2,"mat-accent",null],[2,"mat-warn",null]],null,null,null,null)),(t()(),r["\u0275eld"](17,0,null,null,5,"div",[["class","mat-input-subscript-wrapper mat-form-field-subscript-wrapper"]],null,null,null,null,null)),r["\u0275did"](18,16384,null,0,V,[],{ngSwitch:[0,"ngSwitch"]},null),(t()(),r["\u0275and"](16777216,null,null,1,null,Pu)),r["\u0275did"](20,278528,null,0,q,[r.ViewContainerRef,r.TemplateRef,V],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),r["\u0275and"](16777216,null,null,1,null,Mu)),r["\u0275did"](22,278528,null,0,q,[r.ViewContainerRef,r.TemplateRef,V],{ngSwitchCase:[0,"ngSwitchCase"]},null)],function(t,e){var n=e.component;t(e,7,0,n._prefixChildren.length),t(e,12,0,n._hasFloatingLabel()),t(e,14,0,n._suffixChildren.length),t(e,18,0,n._getDisplayedMessages()),t(e,20,0,"error"),t(e,22,0,"hint")},function(t,e){var n=e.component;t(e,16,0,"accent"==n.color,"warn"==n.color)})}var Lu=r["\u0275crt"]({encapsulation:2,styles:[".mat-select{display:inline-block;width:100%;outline:0}.mat-select-trigger{display:inline-table;cursor:pointer;position:relative;box-sizing:border-box}.mat-select-disabled .mat-select-trigger{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.mat-select-value{display:table-cell;max-width:0;width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-select-arrow-wrapper{display:table-cell;vertical-align:middle}.mat-select-arrow{width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;margin:0 4px}.mat-select-panel{-webkit-backface-visibility:hidden;backface-visibility:hidden;min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;padding-top:0;padding-bottom:0;max-height:256px;min-width:100%}.mat-select-panel:not([class*=mat-elevation-z]){box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}@media screen and (-ms-high-contrast:active){.mat-select-panel{outline:solid 1px}}.mat-select-panel .mat-optgroup-label,.mat-select-panel .mat-option{font-size:inherit;line-height:3em;height:3em}.mat-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-form-field-flex{cursor:pointer}.mat-form-field-type-mat-select .mat-form-field-label{width:calc(100% - 18px)}.mat-select-placeholder{transition:color .4s .133s cubic-bezier(.25,.8,.25,1)}.mat-form-field-hide-placeholder .mat-select-placeholder{color:transparent;transition:none}"],data:{animation:[{type:7,name:"transformPanel",definitions:[{type:0,name:"showing",styles:{type:6,styles:{opacity:1,minWidth:"calc(100% + 32px)",transform:"scaleY(1)"},offset:null},options:void 0},{type:0,name:"showing-multiple",styles:{type:6,styles:{opacity:1,minWidth:"calc(100% + 64px)",transform:"scaleY(1)"},offset:null},options:void 0},{type:1,expr:"void => *",animation:[{type:6,styles:{opacity:0,minWidth:"100%",transform:"scaleY(0)"},offset:null},{type:4,styles:null,timings:"150ms cubic-bezier(0.25, 0.8, 0.25, 1)"}],options:null},{type:1,expr:"* => void",animation:[{type:4,styles:{type:6,styles:{opacity:0},offset:null},timings:"250ms 100ms linear"}],options:null}],options:{}},{type:7,name:"fadeInContent",definitions:[{type:0,name:"showing",styles:{type:6,styles:{opacity:1},offset:null},options:void 0},{type:1,expr:"void => showing",animation:[{type:6,styles:{opacity:0},offset:null},{type:4,styles:null,timings:"150ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)"}],options:null}],options:{}}]}});function Nu(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,1,"span",[["class","mat-select-placeholder"]],null,null,null,null,null)),(t()(),r["\u0275ted"](1,null,["",""]))],null,function(t,e){t(e,1,0,e.component.placeholder||"\xa0")})}function Du(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),r["\u0275ted"](1,null,["",""]))],null,function(t,e){t(e,1,0,e.component.triggerValue)})}function Fu(t){return r["\u0275vid"](0,[r["\u0275ncd"](null,0),(t()(),r["\u0275and"](0,null,null,0))],null,null)}function zu(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,5,"span",[["class","mat-select-value-text"]],null,null,null,null,null)),r["\u0275did"](1,16384,null,0,V,[],{ngSwitch:[0,"ngSwitch"]},null),(t()(),r["\u0275and"](16777216,null,null,1,null,Du)),r["\u0275did"](3,16384,null,0,U,[r.ViewContainerRef,r.TemplateRef,V],null,null),(t()(),r["\u0275and"](16777216,null,null,1,null,Fu)),r["\u0275did"](5,278528,null,0,q,[r.ViewContainerRef,r.TemplateRef,V],{ngSwitchCase:[0,"ngSwitchCase"]},null)],function(t,e){t(e,1,0,!!e.component.customTrigger),t(e,5,0,!0)},null)}function ju(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,[[2,0],["panel",1]],null,3,"div",[],[[24,"@transformPanel",0],[4,"transformOrigin",null],[2,"mat-select-panel-done-animating",null],[4,"font-size","px"]],[[null,"@transformPanel.done"],[null,"keydown"]],function(t,e,n){var r=!0,i=t.component;return"@transformPanel.done"===e&&(r=!1!==i._onPanelDone()&&r),"keydown"===e&&(r=!1!==i._handleKeydown(n)&&r),r},null,null)),r["\u0275did"](1,278528,null,0,L,[r.IterableDiffers,r.KeyValueDiffers,r.ElementRef,r.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(t()(),r["\u0275eld"](2,0,null,null,1,"div",[["class","mat-select-content"]],[[24,"@fadeInContent",0]],[[null,"@fadeInContent.done"]],function(t,e,n){var r=!0;return"@fadeInContent.done"===e&&(r=!1!==t.component._onFadeInDone()&&r),r},null,null)),r["\u0275ncd"](null,1)],function(t,e){var n=e.component;t(e,1,0,r["\u0275inlineInterpolate"](1,"mat-select-panel ",n._getPanelTheme(),""),n.panelClass)},function(t,e){var n=e.component;t(e,0,0,n.multiple?"showing-multiple":"showing",n._transformOrigin,n._panelDoneAnimating,n._triggerFontSize),t(e,2,0,"showing")})}function Bu(t){return r["\u0275vid"](2,[r["\u0275qud"](402653184,1,{trigger:0}),r["\u0275qud"](671088640,2,{panel:0}),r["\u0275qud"](402653184,3,{overlayDir:0}),(t()(),r["\u0275eld"](3,0,[[1,0],["trigger",1]],null,9,"div",[["aria-hidden","true"],["cdk-overlay-origin",""],["class","mat-select-trigger"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.toggle()&&r),r},null,null)),r["\u0275did"](4,16384,[["origin",4]],0,Pe,[r.ElementRef],null,null),(t()(),r["\u0275eld"](5,0,null,null,5,"div",[["class","mat-select-value"]],null,null,null,null,null)),r["\u0275did"](6,16384,null,0,V,[],{ngSwitch:[0,"ngSwitch"]},null),(t()(),r["\u0275and"](16777216,null,null,1,null,Nu)),r["\u0275did"](8,278528,null,0,q,[r.ViewContainerRef,r.TemplateRef,V],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),r["\u0275and"](16777216,null,null,1,null,zu)),r["\u0275did"](10,278528,null,0,q,[r.ViewContainerRef,r.TemplateRef,V],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),r["\u0275eld"](11,0,null,null,1,"div",[["class","mat-select-arrow-wrapper"]],null,null,null,null,null)),(t()(),r["\u0275eld"](12,0,null,null,0,"div",[["class","mat-select-arrow"]],null,null,null,null,null)),(t()(),r["\u0275and"](16777216,null,null,1,function(t,e,n){var r=!0,i=t.component;return"backdropClick"===e&&(r=!1!==i.close()&&r),"attach"===e&&(r=!1!==i._onAttached()&&r),"detach"===e&&(r=!1!==i.close()&&r),r},ju)),r["\u0275did"](14,671744,[[3,4]],0,Ae,[Ie,r.TemplateRef,r.ViewContainerRef,ke,[2,Bt]],{_deprecatedOrigin:[0,"_deprecatedOrigin"],_deprecatedPositions:[1,"_deprecatedPositions"],_deprecatedOffsetY:[2,"_deprecatedOffsetY"],_deprecatedMinWidth:[3,"_deprecatedMinWidth"],_deprecatedBackdropClass:[4,"_deprecatedBackdropClass"],_deprecatedScrollStrategy:[5,"_deprecatedScrollStrategy"],_deprecatedOpen:[6,"_deprecatedOpen"],_deprecatedHasBackdrop:[7,"_deprecatedHasBackdrop"]},{backdropClick:"backdropClick",attach:"attach",detach:"detach"})],function(t,e){var n=e.component;t(e,6,0,n.empty),t(e,8,0,!0),t(e,10,0,!1),t(e,14,0,r["\u0275nov"](e,4),n._positions,n._offsetY,null==n._triggerRect?null:n._triggerRect.width,"cdk-overlay-transparent-backdrop",n._scrollStrategy,n.panelOpen,"")},null)}var Vu=r["\u0275crt"]({encapsulation:2,styles:[".mat-option{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;position:relative;cursor:pointer;outline:0;display:flex;flex-direction:row;max-width:100%;box-sizing:border-box;align-items:center}.mat-option[disabled]{cursor:default}[dir=rtl] .mat-option{text-align:right}.mat-option .mat-icon{margin-right:16px}[dir=rtl] .mat-option .mat-icon{margin-left:16px;margin-right:0}.mat-option[aria-disabled=true]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:32px}[dir=rtl] .mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:16px;padding-right:32px}.mat-option-text{display:inline-block;flex-grow:1;overflow:hidden;text-overflow:ellipsis}.mat-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}@media screen and (-ms-high-contrast:active){.mat-option-ripple{opacity:.5}}.mat-option-pseudo-checkbox{margin-right:8px}[dir=rtl] .mat-option-pseudo-checkbox{margin-left:8px;margin-right:0}"],data:{}});function qu(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,1,"mat-pseudo-checkbox",[["class","mat-option-pseudo-checkbox mat-pseudo-checkbox"]],[[2,"mat-pseudo-checkbox-indeterminate",null],[2,"mat-pseudo-checkbox-checked",null],[2,"mat-pseudo-checkbox-disabled",null]],null,null,Xu,Gu)),r["\u0275did"](1,49152,null,0,si,[],{state:[0,"state"],disabled:[1,"disabled"]},null)],function(t,e){var n=e.component;t(e,1,0,n.selected?"checked":"",n.disabled)},function(t,e){t(e,0,0,"indeterminate"===r["\u0275nov"](e,1).state,"checked"===r["\u0275nov"](e,1).state,r["\u0275nov"](e,1).disabled)})}function Uu(t){return r["\u0275vid"](2,[(t()(),r["\u0275and"](16777216,null,null,1,null,qu)),r["\u0275did"](1,16384,null,0,z,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),r["\u0275eld"](2,0,null,null,1,"span",[["class","mat-option-text"]],null,null,null,null,null)),r["\u0275ncd"](null,0),(t()(),r["\u0275eld"](4,0,null,null,1,"div",[["class","mat-option-ripple mat-ripple"],["mat-ripple",""]],[[2,"mat-ripple-unbounded",null]],null,null,null,null)),r["\u0275did"](5,212992,null,0,oi,[r.ElementRef,r.NgZone,ot,[2,ii]],{disabled:[0,"disabled"],trigger:[1,"trigger"]},null)],function(t,e){var n=e.component;t(e,1,0,n.multiple),t(e,5,0,n.disabled||n.disableRipple,n._getHostElement())},function(t,e){t(e,4,0,r["\u0275nov"](e,5).unbounded)})}var Gu=r["\u0275crt"]({encapsulation:2,styles:[".mat-pseudo-checkbox{width:20px;height:20px;border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0,0,.2,.1),background-color 90ms cubic-bezier(0,0,.2,.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:'';border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0,0,.2,.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{top:9px;left:2px;width:16px;opacity:1}.mat-pseudo-checkbox-checked::after{top:5px;left:3px;width:12px;height:5px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1}"],data:{}});function Xu(t){return r["\u0275vid"](2,[],null,null)}var Hu=r["\u0275crt"]({encapsulation:2,styles:[".mat-divider{display:block;margin:0;border-top-width:1px;border-top-style:solid}.mat-divider.mat-divider-vertical{border-top:0;border-right-width:1px;border-right-style:solid}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}"],data:{}});function Yu(t){return r["\u0275vid"](2,[],null,null)}var Zu=function(){function t(){this.menuToggle=new r.EventEmitter}return t.prototype.toggleMenu=function(){this.menuToggle.emit(!0)},t.prototype.ngOnInit=function(){},Object(v.b)([Object(i.select)(),Object(v.d)("design:type",Object)],t.prototype,"lang",void 0),t}(),Wu=r["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function Ku(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,85,"div",[["style","margin: 30px;"]],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,["\n  "])),(t()(),r["\u0275eld"](2,0,null,null,0,"img",[["src","/assets/logo.png"]],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,[" "])),(t()(),r["\u0275eld"](4,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,["\n  "])),(t()(),r["\u0275eld"](6,0,null,null,30,"mat-form-field",[["class","mat-input-container mat-form-field"]],[[2,"mat-input-invalid",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-focused",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,Ru,Eu)),r["\u0275did"](7,7389184,null,7,os,[r.ElementRef,r.ChangeDetectorRef,[2,gi]],null,null),r["\u0275qud"](335544320,1,{_control:0}),r["\u0275qud"](335544320,2,{_placeholderChild:0}),r["\u0275qud"](335544320,3,{_labelChild:0}),r["\u0275qud"](603979776,4,{_errorChildren:1}),r["\u0275qud"](603979776,5,{_hintChildren:1}),r["\u0275qud"](603979776,6,{_prefixChildren:1}),r["\u0275qud"](603979776,7,{_suffixChildren:1}),(t()(),r["\u0275ted"](-1,1,["\n    "])),(t()(),r["\u0275eld"](16,0,null,1,19,"mat-select",[["class","mat-select"],["placeholder","City"],["role","listbox"],["value","(lang | async)"]],[[1,"id",0],[1,"tabindex",0],[1,"aria-label",0],[1,"aria-labelledby",0],[1,"aria-required",0],[1,"aria-disabled",0],[1,"aria-invalid",0],[1,"aria-owns",0],[1,"aria-multiselectable",0],[1,"aria-describedby",0],[1,"aria-activedescendant",0],[2,"mat-select-disabled",null],[2,"mat-select-invalid",null],[2,"mat-select-required",null]],[[null,"keydown"],[null,"focus"],[null,"blur"]],function(t,e,n){var i=!0;return"keydown"===e&&(i=!1!==r["\u0275nov"](t,17)._handleKeydown(n)&&i),"focus"===e&&(i=!1!==r["\u0275nov"](t,17)._onFocus()&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,17)._onBlur()&&i),i},Bu,Lu)),r["\u0275did"](17,2080768,null,3,Zs,[Dt,r.ChangeDetectorRef,r.NgZone,Wr,r.ElementRef,[2,Bt],[2,Ua],[2,Qa],[2,os],[8,null],[8,null],Hs],{placeholder:[0,"placeholder"],value:[1,"value"]},null),r["\u0275qud"](603979776,8,{options:1}),r["\u0275qud"](603979776,9,{optionGroups:1}),r["\u0275qud"](335544320,10,{customTrigger:0}),r["\u0275prd"](2048,[[1,4]],es,null,[Zs]),r["\u0275prd"](2048,null,pi,null,[Zs]),(t()(),r["\u0275ted"](-1,1,["\n      "])),(t()(),r["\u0275eld"](24,0,null,1,2,"mat-option",[["class","mat-option"],["role","option"],["value","zurich"]],[[1,"tabindex",0],[2,"mat-selected",null],[2,"mat-option-multiple",null],[2,"mat-active",null],[8,"id",0],[1,"aria-selected",0],[1,"aria-disabled",0],[2,"mat-option-disabled",null]],[[null,"click"],[null,"keydown"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r["\u0275nov"](t,25)._selectViaInteraction()&&i),"keydown"===e&&(i=!1!==r["\u0275nov"](t,25)._handleKeydown(n)&&i),i},Uu,Vu)),r["\u0275did"](25,8437760,[[8,4]],0,fi,[r.ElementRef,r.ChangeDetectorRef,[2,pi],[2,ci]],{value:[0,"value"]},null),(t()(),r["\u0275ted"](-1,0,["Zurich"])),(t()(),r["\u0275ted"](-1,1,["\n      "])),(t()(),r["\u0275eld"](28,0,null,1,2,"mat-option",[["class","mat-option"],["role","option"],["value","luzern"]],[[1,"tabindex",0],[2,"mat-selected",null],[2,"mat-option-multiple",null],[2,"mat-active",null],[8,"id",0],[1,"aria-selected",0],[1,"aria-disabled",0],[2,"mat-option-disabled",null]],[[null,"click"],[null,"keydown"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r["\u0275nov"](t,29)._selectViaInteraction()&&i),"keydown"===e&&(i=!1!==r["\u0275nov"](t,29)._handleKeydown(n)&&i),i},Uu,Vu)),r["\u0275did"](29,8437760,[[8,4]],0,fi,[r.ElementRef,r.ChangeDetectorRef,[2,pi],[2,ci]],{value:[0,"value"]},null),(t()(),r["\u0275ted"](-1,0,["Lucerne"])),(t()(),r["\u0275ted"](-1,1,["\n      "])),(t()(),r["\u0275eld"](32,0,null,1,2,"mat-option",[["class","mat-option"],["role","option"],["value","geneva"]],[[1,"tabindex",0],[2,"mat-selected",null],[2,"mat-option-multiple",null],[2,"mat-active",null],[8,"id",0],[1,"aria-selected",0],[1,"aria-disabled",0],[2,"mat-option-disabled",null]],[[null,"click"],[null,"keydown"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r["\u0275nov"](t,33)._selectViaInteraction()&&i),"keydown"===e&&(i=!1!==r["\u0275nov"](t,33)._handleKeydown(n)&&i),i},Uu,Vu)),r["\u0275did"](33,8437760,[[8,4]],0,fi,[r.ElementRef,r.ChangeDetectorRef,[2,pi],[2,ci]],{value:[0,"value"]},null),(t()(),r["\u0275ted"](-1,0,["Geneva"])),(t()(),r["\u0275ted"](-1,1,["\n    "])),(t()(),r["\u0275ted"](-1,1,["\n  "])),(t()(),r["\u0275ted"](-1,null,["\n  "])),(t()(),r["\u0275eld"](38,0,null,null,1,"mat-divider",[["class","mat-divider"],["role","separator"]],[[1,"aria-orientation",0],[2,"mat-divider-vertical",null],[2,"mat-divider-inset",null]],null,null,Yu,Hu)),r["\u0275did"](39,49152,null,0,ks,[],null,null),(t()(),r["\u0275ted"](-1,null,["\n  "])),(t()(),r["\u0275eld"](41,0,null,null,30,"mat-form-field",[["class","mat-input-container mat-form-field"]],[[2,"mat-input-invalid",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-focused",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,Ru,Eu)),r["\u0275did"](42,7389184,null,7,os,[r.ElementRef,r.ChangeDetectorRef,[2,gi]],null,null),r["\u0275qud"](335544320,11,{_control:0}),r["\u0275qud"](335544320,12,{_placeholderChild:0}),r["\u0275qud"](335544320,13,{_labelChild:0}),r["\u0275qud"](603979776,14,{_errorChildren:1}),r["\u0275qud"](603979776,15,{_hintChildren:1}),r["\u0275qud"](603979776,16,{_prefixChildren:1}),r["\u0275qud"](603979776,17,{_suffixChildren:1}),(t()(),r["\u0275ted"](-1,1,["\n    "])),(t()(),r["\u0275eld"](51,0,null,1,19,"mat-select",[["class","mat-select"],["placeholder","Language"],["role","listbox"],["value","(lang | async)"]],[[1,"id",0],[1,"tabindex",0],[1,"aria-label",0],[1,"aria-labelledby",0],[1,"aria-required",0],[1,"aria-disabled",0],[1,"aria-invalid",0],[1,"aria-owns",0],[1,"aria-multiselectable",0],[1,"aria-describedby",0],[1,"aria-activedescendant",0],[2,"mat-select-disabled",null],[2,"mat-select-invalid",null],[2,"mat-select-required",null]],[[null,"keydown"],[null,"focus"],[null,"blur"]],function(t,e,n){var i=!0;return"keydown"===e&&(i=!1!==r["\u0275nov"](t,52)._handleKeydown(n)&&i),"focus"===e&&(i=!1!==r["\u0275nov"](t,52)._onFocus()&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,52)._onBlur()&&i),i},Bu,Lu)),r["\u0275did"](52,2080768,null,3,Zs,[Dt,r.ChangeDetectorRef,r.NgZone,Wr,r.ElementRef,[2,Bt],[2,Ua],[2,Qa],[2,os],[8,null],[8,null],Hs],{placeholder:[0,"placeholder"],value:[1,"value"]},null),r["\u0275qud"](603979776,18,{options:1}),r["\u0275qud"](603979776,19,{optionGroups:1}),r["\u0275qud"](335544320,20,{customTrigger:0}),r["\u0275prd"](2048,[[11,4]],es,null,[Zs]),r["\u0275prd"](2048,null,pi,null,[Zs]),(t()(),r["\u0275ted"](-1,1,["\n      "])),(t()(),r["\u0275eld"](59,0,null,1,2,"mat-option",[["class","mat-option"],["role","option"],["value","FR"]],[[1,"tabindex",0],[2,"mat-selected",null],[2,"mat-option-multiple",null],[2,"mat-active",null],[8,"id",0],[1,"aria-selected",0],[1,"aria-disabled",0],[2,"mat-option-disabled",null]],[[null,"click"],[null,"keydown"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r["\u0275nov"](t,60)._selectViaInteraction()&&i),"keydown"===e&&(i=!1!==r["\u0275nov"](t,60)._handleKeydown(n)&&i),i},Uu,Vu)),r["\u0275did"](60,8437760,[[18,4]],0,fi,[r.ElementRef,r.ChangeDetectorRef,[2,pi],[2,ci]],{value:[0,"value"]},null),(t()(),r["\u0275ted"](-1,0,["FR"])),(t()(),r["\u0275ted"](-1,1,["\n      "])),(t()(),r["\u0275eld"](63,0,null,1,2,"mat-option",[["class","mat-option"],["role","option"],["value","DE"]],[[1,"tabindex",0],[2,"mat-selected",null],[2,"mat-option-multiple",null],[2,"mat-active",null],[8,"id",0],[1,"aria-selected",0],[1,"aria-disabled",0],[2,"mat-option-disabled",null]],[[null,"click"],[null,"keydown"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r["\u0275nov"](t,64)._selectViaInteraction()&&i),"keydown"===e&&(i=!1!==r["\u0275nov"](t,64)._handleKeydown(n)&&i),i},Uu,Vu)),r["\u0275did"](64,8437760,[[18,4]],0,fi,[r.ElementRef,r.ChangeDetectorRef,[2,pi],[2,ci]],{value:[0,"value"]},null),(t()(),r["\u0275ted"](-1,0,["DE"])),(t()(),r["\u0275ted"](-1,1,["\n      "])),(t()(),r["\u0275eld"](67,0,null,1,2,"mat-option",[["class","mat-option"],["role","option"],["value","EN"]],[[1,"tabindex",0],[2,"mat-selected",null],[2,"mat-option-multiple",null],[2,"mat-active",null],[8,"id",0],[1,"aria-selected",0],[1,"aria-disabled",0],[2,"mat-option-disabled",null]],[[null,"click"],[null,"keydown"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r["\u0275nov"](t,68)._selectViaInteraction()&&i),"keydown"===e&&(i=!1!==r["\u0275nov"](t,68)._handleKeydown(n)&&i),i},Uu,Vu)),r["\u0275did"](68,8437760,[[18,4]],0,fi,[r.ElementRef,r.ChangeDetectorRef,[2,pi],[2,ci]],{value:[0,"value"]},null),(t()(),r["\u0275ted"](-1,0,["EN"])),(t()(),r["\u0275ted"](-1,1,["\n    "])),(t()(),r["\u0275ted"](-1,1,["\n  "])),(t()(),r["\u0275ted"](-1,null,["\n  "])),(t()(),r["\u0275eld"](73,0,null,null,1,"h4",[],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,["About this app"])),(t()(),r["\u0275ted"](-1,null,["\n  "])),(t()(),r["\u0275eld"](76,0,null,null,4,"p",[],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,["\n    Proximap is a responsive web app for finding nearby public infrastructure, and uses drinking fountains as a showcase example. It aims to communicate data from open government data repositories and the Wikicommons websites. Check out "])),(t()(),r["\u0275eld"](78,0,null,null,1,"a",[["href","//water-fountains.org"]],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,["water-fountains.org"])),(t()(),r["\u0275ted"](-1,null,[" for more information on the overall project.\n  "])),(t()(),r["\u0275ted"](-1,null,["\n  "])),(t()(),r["\u0275eld"](82,0,null,null,2,"button",[["color","warn"],["mat-raised-button",""]],[[8,"disabled",0]],[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.toggleMenu()&&r),r},Qi,Ji)),r["\u0275did"](83,180224,null,0,Wi,[r.ElementRef,ot,on],{color:[0,"color"]},null),(t()(),r["\u0275ted"](-1,0,["close"])),(t()(),r["\u0275ted"](-1,null,["\n"])),(t()(),r["\u0275ted"](-1,null,["\n\n"]))],function(t,e){t(e,17,0,"City","(lang | async)"),t(e,25,0,"zurich"),t(e,29,0,"luzern"),t(e,33,0,"geneva"),t(e,52,0,"Language","(lang | async)"),t(e,60,0,"FR"),t(e,64,0,"DE"),t(e,68,0,"EN"),t(e,83,0,"warn")},function(t,e){t(e,6,1,[r["\u0275nov"](e,7)._control.errorState,r["\u0275nov"](e,7)._control.errorState,r["\u0275nov"](e,7)._canLabelFloat,r["\u0275nov"](e,7)._shouldLabelFloat(),r["\u0275nov"](e,7)._hideControlPlaceholder(),r["\u0275nov"](e,7)._control.disabled,r["\u0275nov"](e,7)._control.focused,r["\u0275nov"](e,7)._shouldForward("untouched"),r["\u0275nov"](e,7)._shouldForward("touched"),r["\u0275nov"](e,7)._shouldForward("pristine"),r["\u0275nov"](e,7)._shouldForward("dirty"),r["\u0275nov"](e,7)._shouldForward("valid"),r["\u0275nov"](e,7)._shouldForward("invalid"),r["\u0275nov"](e,7)._shouldForward("pending")]),t(e,16,1,[r["\u0275nov"](e,17).id,r["\u0275nov"](e,17).tabIndex,r["\u0275nov"](e,17)._ariaLabel,r["\u0275nov"](e,17).ariaLabelledby,r["\u0275nov"](e,17).required.toString(),r["\u0275nov"](e,17).disabled.toString(),r["\u0275nov"](e,17).errorState,r["\u0275nov"](e,17).panelOpen?r["\u0275nov"](e,17)._optionIds:null,r["\u0275nov"](e,17).multiple,r["\u0275nov"](e,17)._ariaDescribedby||null,r["\u0275nov"](e,17)._getAriaActiveDescendant(),r["\u0275nov"](e,17).disabled,r["\u0275nov"](e,17).errorState,r["\u0275nov"](e,17).required]),t(e,24,0,r["\u0275nov"](e,25)._getTabIndex(),r["\u0275nov"](e,25).selected,r["\u0275nov"](e,25).multiple,r["\u0275nov"](e,25).active,r["\u0275nov"](e,25).id,r["\u0275nov"](e,25).selected.toString(),r["\u0275nov"](e,25).disabled.toString(),r["\u0275nov"](e,25).disabled),t(e,28,0,r["\u0275nov"](e,29)._getTabIndex(),r["\u0275nov"](e,29).selected,r["\u0275nov"](e,29).multiple,r["\u0275nov"](e,29).active,r["\u0275nov"](e,29).id,r["\u0275nov"](e,29).selected.toString(),r["\u0275nov"](e,29).disabled.toString(),r["\u0275nov"](e,29).disabled),t(e,32,0,r["\u0275nov"](e,33)._getTabIndex(),r["\u0275nov"](e,33).selected,r["\u0275nov"](e,33).multiple,r["\u0275nov"](e,33).active,r["\u0275nov"](e,33).id,r["\u0275nov"](e,33).selected.toString(),r["\u0275nov"](e,33).disabled.toString(),r["\u0275nov"](e,33).disabled),t(e,38,0,r["\u0275nov"](e,39).vertical?"vertical":"horizontal",r["\u0275nov"](e,39).vertical,r["\u0275nov"](e,39).inset),t(e,41,1,[r["\u0275nov"](e,42)._control.errorState,r["\u0275nov"](e,42)._control.errorState,r["\u0275nov"](e,42)._canLabelFloat,r["\u0275nov"](e,42)._shouldLabelFloat(),r["\u0275nov"](e,42)._hideControlPlaceholder(),r["\u0275nov"](e,42)._control.disabled,r["\u0275nov"](e,42)._control.focused,r["\u0275nov"](e,42)._shouldForward("untouched"),r["\u0275nov"](e,42)._shouldForward("touched"),r["\u0275nov"](e,42)._shouldForward("pristine"),r["\u0275nov"](e,42)._shouldForward("dirty"),r["\u0275nov"](e,42)._shouldForward("valid"),r["\u0275nov"](e,42)._shouldForward("invalid"),r["\u0275nov"](e,42)._shouldForward("pending")]),t(e,51,1,[r["\u0275nov"](e,52).id,r["\u0275nov"](e,52).tabIndex,r["\u0275nov"](e,52)._ariaLabel,r["\u0275nov"](e,52).ariaLabelledby,r["\u0275nov"](e,52).required.toString(),r["\u0275nov"](e,52).disabled.toString(),r["\u0275nov"](e,52).errorState,r["\u0275nov"](e,52).panelOpen?r["\u0275nov"](e,52)._optionIds:null,r["\u0275nov"](e,52).multiple,r["\u0275nov"](e,52)._ariaDescribedby||null,r["\u0275nov"](e,52)._getAriaActiveDescendant(),r["\u0275nov"](e,52).disabled,r["\u0275nov"](e,52).errorState,r["\u0275nov"](e,52).required]),t(e,59,0,r["\u0275nov"](e,60)._getTabIndex(),r["\u0275nov"](e,60).selected,r["\u0275nov"](e,60).multiple,r["\u0275nov"](e,60).active,r["\u0275nov"](e,60).id,r["\u0275nov"](e,60).selected.toString(),r["\u0275nov"](e,60).disabled.toString(),r["\u0275nov"](e,60).disabled),t(e,63,0,r["\u0275nov"](e,64)._getTabIndex(),r["\u0275nov"](e,64).selected,r["\u0275nov"](e,64).multiple,r["\u0275nov"](e,64).active,r["\u0275nov"](e,64).id,r["\u0275nov"](e,64).selected.toString(),r["\u0275nov"](e,64).disabled.toString(),r["\u0275nov"](e,64).disabled),t(e,67,0,r["\u0275nov"](e,68)._getTabIndex(),r["\u0275nov"](e,68).selected,r["\u0275nov"](e,68).multiple,r["\u0275nov"](e,68).active,r["\u0275nov"](e,68).id,r["\u0275nov"](e,68).selected.toString(),r["\u0275nov"](e,68).disabled.toString(),r["\u0275nov"](e,68).disabled),t(e,82,0,r["\u0275nov"](e,83).disabled||null)})}var Ju=r["\u0275crt"]({encapsulation:2,styles:[".mat-menu-panel{-webkit-backface-visibility:hidden;backface-visibility:hidden;min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;max-height:calc(100vh - 48px);border-radius:2px;outline:0}.mat-menu-panel:not([class*=mat-elevation-z]){box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)}.mat-menu-panel.mat-menu-after.mat-menu-below{transform-origin:left top}.mat-menu-panel.mat-menu-after.mat-menu-above{transform-origin:left bottom}.mat-menu-panel.mat-menu-before.mat-menu-below{transform-origin:right top}.mat-menu-panel.mat-menu-before.mat-menu-above{transform-origin:right bottom}[dir=rtl] .mat-menu-panel.mat-menu-after.mat-menu-below{transform-origin:right top}[dir=rtl] .mat-menu-panel.mat-menu-after.mat-menu-above{transform-origin:right bottom}[dir=rtl] .mat-menu-panel.mat-menu-before.mat-menu-below{transform-origin:left top}[dir=rtl] .mat-menu-panel.mat-menu-before.mat-menu-above{transform-origin:left bottom}.mat-menu-panel.ng-animating{pointer-events:none}@media screen and (-ms-high-contrast:active){.mat-menu-panel{outline:solid 1px}}.mat-menu-content{padding-top:8px;padding-bottom:8px}.mat-menu-item{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:0;border:none;-webkit-tap-highlight-color:transparent;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;position:relative}.mat-menu-item[disabled]{cursor:default}[dir=rtl] .mat-menu-item{text-align:right}.mat-menu-item .mat-icon{margin-right:16px}[dir=rtl] .mat-menu-item .mat-icon{margin-left:16px;margin-right:0}.mat-menu-item .mat-icon{vertical-align:middle}.mat-menu-item-submenu-trigger{padding-right:32px}.mat-menu-item-submenu-trigger::after{width:0;height:0;border-style:solid;border-width:5px 0 5px 5px;border-color:transparent transparent transparent currentColor;content:'';display:inline-block;position:absolute;top:50%;right:16px;transform:translateY(-50%)}[dir=rtl] .mat-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}[dir=rtl] .mat-menu-item-submenu-trigger::after{right:auto;left:16px;transform:rotateY(180deg) translateY(-50%)}button.mat-menu-item{width:100%}.mat-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}"],data:{animation:[{type:7,name:"transformMenu",definitions:[{type:0,name:"void",styles:{type:6,styles:{opacity:0,transform:"scale(0.01, 0.01)"},offset:null},options:void 0},{type:0,name:"enter-start",styles:{type:6,styles:{opacity:1,transform:"scale(1, 0.5)"},offset:null},options:void 0},{type:0,name:"enter",styles:{type:6,styles:{transform:"scale(1, 1)"},offset:null},options:void 0},{type:1,expr:"void => enter-start",animation:{type:4,styles:null,timings:"100ms linear"},options:null},{type:1,expr:"enter-start => enter",animation:{type:4,styles:null,timings:"300ms cubic-bezier(0.25, 0.8, 0.25, 1)"},options:null},{type:1,expr:"* => void",animation:{type:4,styles:{type:6,styles:{opacity:0},offset:null},timings:"150ms 50ms linear"},options:null}],options:{}},{type:7,name:"fadeInItems",definitions:[{type:0,name:"showing",styles:{type:6,styles:{opacity:1},offset:null},options:void 0},{type:1,expr:"void => *",animation:[{type:6,styles:{opacity:0},offset:null},{type:4,styles:null,timings:"400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)"}],options:null}],options:{}}]}});function Qu(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,3,"div",[["class","mat-menu-panel"],["role","menu"],["tabindex","-1"]],[[24,"@transformMenu",0]],[[null,"keydown"],[null,"click"],[null,"@transformMenu.done"]],function(t,e,n){var r=!0,i=t.component;return"keydown"===e&&(r=!1!==i._handleKeydown(n)&&r),"click"===e&&(r=!1!==i.closed.emit("click")&&r),"@transformMenu.done"===e&&(r=!1!==i._onAnimationDone(n)&&r),r},null,null)),r["\u0275did"](1,278528,null,0,L,[r.IterableDiffers,r.KeyValueDiffers,r.ElementRef,r.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(t()(),r["\u0275eld"](2,0,null,null,1,"div",[["class","mat-menu-content"]],[[24,"@fadeInItems",0]],null,null,null,null)),r["\u0275ncd"](null,0)],function(t,e){t(e,1,0,"mat-menu-panel",e.component._classList)},function(t,e){t(e,0,0,e.component._panelAnimationState),t(e,2,0,"showing")})}function $u(t){return r["\u0275vid"](2,[r["\u0275qud"](402653184,1,{templateRef:0}),(t()(),r["\u0275and"](0,[[1,2]],null,0,null,Qu))],null,null)}var tl=r["\u0275crt"]({encapsulation:2,styles:[],data:{}});function el(t){return r["\u0275vid"](2,[r["\u0275ncd"](null,0),(t()(),r["\u0275eld"](1,0,null,null,1,"div",[["class","mat-menu-ripple mat-ripple"],["matRipple",""]],[[2,"mat-ripple-unbounded",null]],null,null,null,null)),r["\u0275did"](2,212992,null,0,oi,[r.ElementRef,r.NgZone,ot,[2,ii]],{disabled:[0,"disabled"],trigger:[1,"trigger"]},null)],function(t,e){var n=e.component;t(e,2,0,n.disableRipple||n.disabled,n._getHostElement())},function(t,e){t(e,1,0,r["\u0275nov"](e,2).unbounded)})}var nl=r["\u0275crt"]({encapsulation:2,styles:[".mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}.mat-toolbar-multiple-rows{min-height:64px}.mat-toolbar-row,.mat-toolbar-single-row{height:64px}@media (max-width:599px){.mat-toolbar-multiple-rows{min-height:56px}.mat-toolbar-row,.mat-toolbar-single-row{height:56px}}"],data:{}});function rl(t){return r["\u0275vid"](2,[r["\u0275ncd"](null,0),r["\u0275ncd"](null,1)],null,null)}var il=function(){function t(t,e,n){this.ngRedux=n,this.menuToggle=new r.EventEmitter,this.mobileQuery=e.matchMedia("(max-width: 900px)"),this._mobileQueryListener=function(){return t.detectChanges()},this.mobileQuery.addListener(this._mobileQueryListener)}return t.prototype.ngOnInit=function(){},t.prototype.toggleMenu=function(){this.menuToggle.emit(!0)},t.prototype.applyTextFilter=function(t){this.ngRedux.dispatch({type:o,text:t})},t.prototype.toggleList=function(t){this.ngRedux.dispatch({type:c,payload:t})},t.prototype.returnToRoot=function(){this.ngRedux.dispatch({type:p})},Object(v.b)([Object(i.select)(),Object(v.d)("design:type",Object)],t.prototype,"showList",void 0),Object(v.b)([Object(i.select)(),Object(v.d)("design:type",Object)],t.prototype,"filterText",void 0),Object(v.b)([Object(i.select)(),Object(v.d)("design:type",Object)],t.prototype,"mode",void 0),t}(),ol=r["\u0275crt"]({encapsulation:0,styles:[[".navbar-logo[_ngcontent-%COMP%]{height:75%}.show-logo[_ngcontent-%COMP%]{background:url(/assets/logo.png) no-repeat 50%;background-size:125px}"]],data:{}});function al(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,6,"button",[["mat-icon-button",""]],[[8,"disabled",0]],[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.toggleList(!0)&&r),r},Qi,Ji)),r["\u0275did"](1,180224,null,0,Wi,[r.ElementRef,ot,on],null,null),(t()(),r["\u0275ted"](-1,0,["\n    "])),(t()(),r["\u0275eld"](3,0,null,0,2,"mat-icon",[["class","mat-icon"],["role","img"]],null,null,null,ta,$o)),r["\u0275did"](4,638976,null,0,Jo,[r.ElementRef,Yo,[8,null]],null,null),(t()(),r["\u0275ted"](-1,0,["search"])),(t()(),r["\u0275ted"](-1,0,["\n  "]))],function(t,e){t(e,4,0)},function(t,e){t(e,0,0,r["\u0275nov"](e,1).disabled||null)})}function sl(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,47,"span",[],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,["\n\n    "])),(t()(),r["\u0275eld"](2,0,null,null,12,"mat-menu",[],null,null,null,$u,Ju)),r["\u0275did"](3,1228800,[["langMenu",4]],2,Bs,[r.ElementRef,r.NgZone,js],null,null),r["\u0275qud"](603979776,2,{items:1}),r["\u0275qud"](335544320,3,{lazyContent:0}),(t()(),r["\u0275ted"](-1,0,["\n      "])),(t()(),r["\u0275eld"](7,0,null,0,2,"button",[["class","mat-menu-item"],["mat-menu-item",""],["role","menuitem"]],[[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r["\u0275nov"](t,8)._checkDisabled(n)&&i),"mouseenter"===e&&(i=!1!==r["\u0275nov"](t,8)._emitHoverEvent()&&i),i},el,tl)),r["\u0275did"](8,180224,[[2,4]],0,zs,[r.ElementRef,rt,on],null,null),(t()(),r["\u0275ted"](-1,0,["FR"])),(t()(),r["\u0275ted"](-1,0,["\n      "])),(t()(),r["\u0275eld"](11,0,null,0,2,"button",[["class","mat-menu-item"],["mat-menu-item",""],["role","menuitem"]],[[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r["\u0275nov"](t,12)._checkDisabled(n)&&i),"mouseenter"===e&&(i=!1!==r["\u0275nov"](t,12)._emitHoverEvent()&&i),i},el,tl)),r["\u0275did"](12,180224,[[2,4]],0,zs,[r.ElementRef,rt,on],null,null),(t()(),r["\u0275ted"](-1,0,["DE"])),(t()(),r["\u0275ted"](-1,0,["\n    "])),(t()(),r["\u0275ted"](-1,null,["\n    "])),(t()(),r["\u0275eld"](16,16777216,null,null,3,"button",[["aria-haspopup","true"],["mat-button",""]],[[8,"disabled",0]],[[null,"mousedown"],[null,"keydown"],[null,"click"]],function(t,e,n){var i=!0;return"mousedown"===e&&(i=!1!==r["\u0275nov"](t,18)._handleMousedown(n)&&i),"keydown"===e&&(i=!1!==r["\u0275nov"](t,18)._handleKeydown(n)&&i),"click"===e&&(i=!1!==r["\u0275nov"](t,18)._handleClick(n)&&i),i},Qi,Ji)),r["\u0275did"](17,180224,null,0,Wi,[r.ElementRef,ot,on],null,null),r["\u0275did"](18,1196032,null,0,Us,[Ie,r.ElementRef,r.ViewContainerRef,Vs,[2,Bs],[8,null],[2,Bt],on],{menu:[0,"menu"]},null),(t()(),r["\u0275ted"](-1,0,["EN"])),(t()(),r["\u0275ted"](-1,null,["\n\n    "])),(t()(),r["\u0275eld"](21,0,null,null,12,"mat-menu",[],null,null,null,$u,Ju)),r["\u0275did"](22,1228800,[["cityMenu",4]],2,Bs,[r.ElementRef,r.NgZone,js],null,null),r["\u0275qud"](603979776,4,{items:1}),r["\u0275qud"](335544320,5,{lazyContent:0}),(t()(),r["\u0275ted"](-1,0,["\n      "])),(t()(),r["\u0275eld"](26,0,null,0,2,"button",[["class","mat-menu-item"],["mat-menu-item",""],["role","menuitem"]],[[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r["\u0275nov"](t,27)._checkDisabled(n)&&i),"mouseenter"===e&&(i=!1!==r["\u0275nov"](t,27)._emitHoverEvent()&&i),i},el,tl)),r["\u0275did"](27,180224,[[4,4]],0,zs,[r.ElementRef,rt,on],null,null),(t()(),r["\u0275ted"](-1,0,["Geneva"])),(t()(),r["\u0275ted"](-1,0,["\n      "])),(t()(),r["\u0275eld"](30,0,null,0,2,"button",[["class","mat-menu-item"],["mat-menu-item",""],["role","menuitem"]],[[2,"mat-menu-item-highlighted",null],[2,"mat-menu-item-submenu-trigger",null],[1,"tabindex",0],[1,"aria-disabled",0],[1,"disabled",0]],[[null,"click"],[null,"mouseenter"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r["\u0275nov"](t,31)._checkDisabled(n)&&i),"mouseenter"===e&&(i=!1!==r["\u0275nov"](t,31)._emitHoverEvent()&&i),i},el,tl)),r["\u0275did"](31,180224,[[4,4]],0,zs,[r.ElementRef,rt,on],null,null),(t()(),r["\u0275ted"](-1,0,["Lucerne"])),(t()(),r["\u0275ted"](-1,0,["\n    "])),(t()(),r["\u0275ted"](-1,null,["\n    "])),(t()(),r["\u0275eld"](35,16777216,null,null,3,"button",[["aria-haspopup","true"],["mat-button",""]],[[8,"disabled",0]],[[null,"mousedown"],[null,"keydown"],[null,"click"]],function(t,e,n){var i=!0;return"mousedown"===e&&(i=!1!==r["\u0275nov"](t,37)._handleMousedown(n)&&i),"keydown"===e&&(i=!1!==r["\u0275nov"](t,37)._handleKeydown(n)&&i),"click"===e&&(i=!1!==r["\u0275nov"](t,37)._handleClick(n)&&i),i},Qi,Ji)),r["\u0275did"](36,180224,null,0,Wi,[r.ElementRef,ot,on],null,null),r["\u0275did"](37,1196032,null,0,Us,[Ie,r.ElementRef,r.ViewContainerRef,Vs,[2,Bs],[8,null],[2,Bt],on],{menu:[0,"menu"]},null),(t()(),r["\u0275ted"](-1,0,["Zurich"])),(t()(),r["\u0275ted"](-1,null,["\n      "])),(t()(),r["\u0275eld"](40,0,null,null,6,"button",[["mat-icon-button",""]],[[8,"disabled",0]],null,null,Qi,Ji)),r["\u0275did"](41,180224,null,0,Wi,[r.ElementRef,ot,on],null,null),(t()(),r["\u0275ted"](-1,0,["\n      "])),(t()(),r["\u0275eld"](43,0,null,0,2,"mat-icon",[["class","mat-icon"],["role","img"]],null,null,null,ta,$o)),r["\u0275did"](44,638976,null,0,Jo,[r.ElementRef,Yo,[8,null]],null,null),(t()(),r["\u0275ted"](-1,0,["information"])),(t()(),r["\u0275ted"](-1,0,["\n    "])),(t()(),r["\u0275ted"](-1,null,["\n  "]))],function(t,e){t(e,18,0,r["\u0275nov"](e,3)),t(e,37,0,r["\u0275nov"](e,22)),t(e,44,0)},function(t,e){t(e,7,0,r["\u0275nov"](e,8)._highlighted,r["\u0275nov"](e,8)._triggersSubmenu,r["\u0275nov"](e,8)._getTabIndex(),r["\u0275nov"](e,8).disabled.toString(),r["\u0275nov"](e,8).disabled||null),t(e,11,0,r["\u0275nov"](e,12)._highlighted,r["\u0275nov"](e,12)._triggersSubmenu,r["\u0275nov"](e,12)._getTabIndex(),r["\u0275nov"](e,12).disabled.toString(),r["\u0275nov"](e,12).disabled||null),t(e,16,0,r["\u0275nov"](e,17).disabled||null),t(e,26,0,r["\u0275nov"](e,27)._highlighted,r["\u0275nov"](e,27)._triggersSubmenu,r["\u0275nov"](e,27)._getTabIndex(),r["\u0275nov"](e,27).disabled.toString(),r["\u0275nov"](e,27).disabled||null),t(e,30,0,r["\u0275nov"](e,31)._highlighted,r["\u0275nov"](e,31)._triggersSubmenu,r["\u0275nov"](e,31)._getTabIndex(),r["\u0275nov"](e,31).disabled.toString(),r["\u0275nov"](e,31).disabled||null),t(e,35,0,r["\u0275nov"](e,36).disabled||null),t(e,40,0,r["\u0275nov"](e,41).disabled||null)})}function ul(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,6,"button",[["mat-icon-button",""]],[[8,"disabled",0]],[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.returnToRoot()&&r),r},Qi,Ji)),r["\u0275did"](1,180224,null,0,Wi,[r.ElementRef,ot,on],null,null),(t()(),r["\u0275ted"](-1,0,["\n    "])),(t()(),r["\u0275eld"](3,0,null,0,2,"mat-icon",[["class","mat-icon"],["role","img"]],null,null,null,ta,$o)),r["\u0275did"](4,638976,null,0,Jo,[r.ElementRef,Yo,[8,null]],null,null),(t()(),r["\u0275ted"](-1,0,["close"])),(t()(),r["\u0275ted"](-1,0,["\n  "]))],function(t,e){t(e,4,0)},function(t,e){t(e,0,0,r["\u0275nov"](e,1).disabled||null)})}function ll(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,5,"button",[["mat-icon-button",""]],[[8,"disabled",0]],[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.toggleMenu()&&r),r},Qi,Ji)),r["\u0275did"](1,180224,null,0,Wi,[r.ElementRef,ot,on],null,null),(t()(),r["\u0275ted"](-1,0,["\n    "])),(t()(),r["\u0275eld"](3,0,null,0,2,"mat-icon",[["class","mat-icon"],["role","img"]],null,null,null,ta,$o)),r["\u0275did"](4,638976,null,0,Jo,[r.ElementRef,Yo,[8,null]],null,null),(t()(),r["\u0275ted"](-1,0,["menu"]))],function(t,e){t(e,4,0)},function(t,e){t(e,0,0,r["\u0275nov"](e,1).disabled||null)})}function cl(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,29,"mat-toolbar",[["class","show-logo mat-toolbar"]],[[2,"mat-toolbar-multiple-rows",null],[2,"mat-toolbar-single-row",null]],null,null,rl,nl)),r["\u0275did"](1,278528,null,0,L,[r.IterableDiffers,r.KeyValueDiffers,r.ElementRef,r.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),r["\u0275pid"](131072,$,[r.ChangeDetectorRef]),r["\u0275pod"](3,{"details-mode":0}),r["\u0275did"](4,4243456,null,1,cu,[r.ElementRef,ot,rt],null,null),r["\u0275qud"](603979776,1,{_toolbarRows:1}),(t()(),r["\u0275ted"](-1,0,["\n  "])),(t()(),r["\u0275and"](16777216,null,0,2,null,al)),r["\u0275did"](8,16384,null,0,z,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null),r["\u0275pid"](131072,$,[r.ChangeDetectorRef]),(t()(),r["\u0275ted"](-1,0,["\n  "])),(t()(),r["\u0275eld"](11,0,null,0,0,"span",[["style","flex: 1 1 auto;"]],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,0,["\n\n  "])),(t()(),r["\u0275ted"](-1,0,["\n  "])),(t()(),r["\u0275and"](16777216,null,0,2,null,sl)),r["\u0275did"](15,16384,null,0,z,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null),r["\u0275pid"](131072,$,[r.ChangeDetectorRef]),(t()(),r["\u0275ted"](-1,0,["\n  "])),(t()(),r["\u0275ted"](-1,0,["\n  "])),(t()(),r["\u0275and"](16777216,null,0,3,null,ul)),r["\u0275did"](20,16384,null,0,z,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null),r["\u0275pid"](131072,$,[r.ChangeDetectorRef]),r["\u0275pid"](131072,$,[r.ChangeDetectorRef]),(t()(),r["\u0275ted"](-1,0,["\n  "])),(t()(),r["\u0275ted"](-1,0,["\n  "])),(t()(),r["\u0275and"](16777216,null,0,3,null,ll)),r["\u0275did"](26,16384,null,0,z,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null),r["\u0275pid"](131072,$,[r.ChangeDetectorRef]),r["\u0275pid"](131072,$,[r.ChangeDetectorRef]),(t()(),r["\u0275ted"](-1,0,["\n\n"])),(t()(),r["\u0275ted"](-1,null,["\n"]))],function(t,e){var n=e.component;t(e,1,0,"show-logo",t(e,3,0,"details"==r["\u0275unv"](e,1,1,r["\u0275nov"](e,2).transform(n.mode)))),t(e,8,0,n.mobileQuery.matches&&!r["\u0275unv"](e,8,0,r["\u0275nov"](e,9).transform(n.showList))),t(e,15,0,"map"==r["\u0275unv"](e,15,0,r["\u0275nov"](e,16).transform(n.mode))&&!n.mobileQuery.matches),t(e,20,0,"map"!=r["\u0275unv"](e,20,0,r["\u0275nov"](e,21).transform(n.mode))||r["\u0275unv"](e,20,0,r["\u0275nov"](e,22).transform(n.showList))&&n.mobileQuery.matches),t(e,26,0,"map"==r["\u0275unv"](e,26,0,r["\u0275nov"](e,27).transform(n.mode))&&!r["\u0275unv"](e,26,0,r["\u0275nov"](e,28).transform(n.showList))&&n.mobileQuery.matches)},function(t,e){t(e,0,0,r["\u0275nov"](e,4)._toolbarRows.length,!r["\u0275nov"](e,4)._toolbarRows.length)})}var hl=r["\u0275crt"]({encapsulation:2,styles:[".mat-slider{display:inline-block;position:relative;box-sizing:border-box;padding:8px;outline:0;vertical-align:middle}.mat-slider-wrapper{position:absolute}.mat-slider-track-wrapper{position:absolute;top:0;left:0;overflow:hidden}.mat-slider-track-fill{position:absolute;transform-origin:0 0;transition:transform .4s cubic-bezier(.25,.8,.25,1),background-color .4s cubic-bezier(.25,.8,.25,1)}.mat-slider-track-background{position:absolute;transform-origin:100% 100%;transition:transform .4s cubic-bezier(.25,.8,.25,1),background-color .4s cubic-bezier(.25,.8,.25,1)}.mat-slider-ticks-container{position:absolute;left:0;top:0;overflow:hidden}.mat-slider-ticks{background-repeat:repeat;background-clip:content-box;box-sizing:border-box;opacity:0;transition:opacity .4s cubic-bezier(.25,.8,.25,1)}.mat-slider-thumb-container{position:absolute;z-index:1;transition:transform .4s cubic-bezier(.25,.8,.25,1)}.mat-slider-focus-ring{position:absolute;width:30px;height:30px;border-radius:50%;transform:scale(0);opacity:0;transition:transform .4s cubic-bezier(.25,.8,.25,1),background-color .4s cubic-bezier(.25,.8,.25,1),opacity .4s cubic-bezier(.25,.8,.25,1)}.cdk-keyboard-focused .mat-slider-focus-ring,.cdk-program-focused .mat-slider-focus-ring{transform:scale(1);opacity:1}.mat-slider:not(.mat-slider-disabled) .mat-slider-thumb,.mat-slider:not(.mat-slider-disabled) .mat-slider-thumb-label{cursor:-webkit-grab;cursor:grab}.mat-slider-sliding:not(.mat-slider-disabled) .mat-slider-thumb,.mat-slider-sliding:not(.mat-slider-disabled) .mat-slider-thumb-label,.mat-slider:not(.mat-slider-disabled) .mat-slider-thumb-label:active,.mat-slider:not(.mat-slider-disabled) .mat-slider-thumb:active{cursor:-webkit-grabbing;cursor:grabbing}.mat-slider-thumb{position:absolute;right:-10px;bottom:-10px;box-sizing:border-box;width:20px;height:20px;border:3px solid transparent;border-radius:50%;transform:scale(.7);transition:transform .4s cubic-bezier(.25,.8,.25,1),background-color .4s cubic-bezier(.25,.8,.25,1),border-color .4s cubic-bezier(.25,.8,.25,1)}.mat-slider-thumb-label{display:none;align-items:center;justify-content:center;position:absolute;width:28px;height:28px;border-radius:50%;transition:transform .4s cubic-bezier(.25,.8,.25,1),border-radius .4s cubic-bezier(.25,.8,.25,1),background-color .4s cubic-bezier(.25,.8,.25,1)}.mat-slider-thumb-label-text{z-index:1;opacity:0;transition:opacity .4s cubic-bezier(.25,.8,.25,1)}.mat-slider-sliding .mat-slider-thumb-container,.mat-slider-sliding .mat-slider-track-background,.mat-slider-sliding .mat-slider-track-fill{transition-duration:0s}.mat-slider-has-ticks .mat-slider-wrapper::after{content:'';position:absolute;border-width:0;border-style:solid;opacity:0;transition:opacity .4s cubic-bezier(.25,.8,.25,1)}.mat-slider-has-ticks.cdk-focused:not(.mat-slider-hide-last-tick) .mat-slider-wrapper::after,.mat-slider-has-ticks:hover:not(.mat-slider-hide-last-tick) .mat-slider-wrapper::after{opacity:1}.mat-slider-has-ticks.cdk-focused:not(.mat-slider-disabled) .mat-slider-ticks,.mat-slider-has-ticks:hover:not(.mat-slider-disabled) .mat-slider-ticks{opacity:1}.mat-slider-thumb-label-showing .mat-slider-focus-ring{transform:scale(0);opacity:0}.mat-slider-thumb-label-showing .mat-slider-thumb-label{display:flex}.mat-slider-axis-inverted .mat-slider-track-fill{transform-origin:100% 100%}.mat-slider-axis-inverted .mat-slider-track-background{transform-origin:0 0}.mat-slider:not(.mat-slider-disabled).cdk-focused.mat-slider-thumb-label-showing .mat-slider-thumb{transform:scale(0)}.mat-slider:not(.mat-slider-disabled).cdk-focused .mat-slider-thumb-label{border-radius:50% 50% 0}.mat-slider:not(.mat-slider-disabled).cdk-focused .mat-slider-thumb-label-text{opacity:1}.mat-slider:not(.mat-slider-disabled).cdk-mouse-focused .mat-slider-thumb,.mat-slider:not(.mat-slider-disabled).cdk-program-focused .mat-slider-thumb,.mat-slider:not(.mat-slider-disabled).cdk-touch-focused .mat-slider-thumb{border-width:2px;transform:scale(1)}.mat-slider-disabled .mat-slider-focus-ring{transform:scale(0);opacity:0}.mat-slider-disabled .mat-slider-thumb{border-width:4px;transform:scale(.5)}.mat-slider-disabled .mat-slider-thumb-label{display:none}.mat-slider-horizontal{height:48px;min-width:128px}.mat-slider-horizontal .mat-slider-wrapper{height:2px;top:23px;left:8px;right:8px}.mat-slider-horizontal .mat-slider-wrapper::after{height:2px;border-left-width:2px;right:0;top:0}.mat-slider-horizontal .mat-slider-track-wrapper{height:2px;width:100%}.mat-slider-horizontal .mat-slider-track-fill{height:2px;width:100%;transform:scaleX(0)}.mat-slider-horizontal .mat-slider-track-background{height:2px;width:100%;transform:scaleX(1)}.mat-slider-horizontal .mat-slider-ticks-container{height:2px;width:100%}@media screen and (-ms-high-contrast:active){.mat-slider-horizontal .mat-slider-ticks-container{height:0;outline:solid 2px;top:1px}}.mat-slider-horizontal .mat-slider-ticks{height:2px;width:100%}.mat-slider-horizontal .mat-slider-thumb-container{width:100%;height:0;top:50%}.mat-slider-horizontal .mat-slider-focus-ring{top:-15px;right:-15px}.mat-slider-horizontal .mat-slider-thumb-label{right:-14px;top:-40px;transform:translateY(26px) scale(.01) rotate(45deg)}.mat-slider-horizontal .mat-slider-thumb-label-text{transform:rotate(-45deg)}.mat-slider-horizontal.cdk-focused .mat-slider-thumb-label{transform:rotate(45deg)}.mat-slider-vertical{width:48px;min-height:128px}.mat-slider-vertical .mat-slider-wrapper{width:2px;top:8px;bottom:8px;left:23px}.mat-slider-vertical .mat-slider-wrapper::after{width:2px;border-top-width:2px;bottom:0;left:0}.mat-slider-vertical .mat-slider-track-wrapper{height:100%;width:2px}.mat-slider-vertical .mat-slider-track-fill{height:100%;width:2px;transform:scaleY(0)}.mat-slider-vertical .mat-slider-track-background{height:100%;width:2px;transform:scaleY(1)}.mat-slider-vertical .mat-slider-ticks-container{width:2px;height:100%}@media screen and (-ms-high-contrast:active){.mat-slider-vertical .mat-slider-ticks-container{width:0;outline:solid 2px;left:1px}}.mat-slider-vertical .mat-slider-focus-ring{bottom:-15px;left:-15px}.mat-slider-vertical .mat-slider-ticks{width:2px;height:100%}.mat-slider-vertical .mat-slider-thumb-container{height:100%;width:0;left:50%}.mat-slider-vertical .mat-slider-thumb{-webkit-backface-visibility:hidden;backface-visibility:hidden}.mat-slider-vertical .mat-slider-thumb-label{bottom:-14px;left:-40px;transform:translateX(26px) scale(.01) rotate(-45deg)}.mat-slider-vertical .mat-slider-thumb-label-text{transform:rotate(45deg)}.mat-slider-vertical.cdk-focused .mat-slider-thumb-label{transform:rotate(-45deg)}[dir=rtl] .mat-slider-wrapper::after{left:0;right:auto}[dir=rtl] .mat-slider-horizontal .mat-slider-track-fill{transform-origin:100% 100%}[dir=rtl] .mat-slider-horizontal .mat-slider-track-background{transform-origin:0 0}[dir=rtl] .mat-slider-horizontal.mat-slider-axis-inverted .mat-slider-track-fill{transform-origin:0 0}[dir=rtl] .mat-slider-horizontal.mat-slider-axis-inverted .mat-slider-track-background{transform-origin:100% 100%}"],data:{}});function pl(t){return r["\u0275vid"](2,[r["\u0275qud"](402653184,1,{_sliderWrapper:0}),(t()(),r["\u0275eld"](1,0,[[1,0],["sliderWrapper",1]],null,16,"div",[["class","mat-slider-wrapper"]],null,null,null,null,null)),(t()(),r["\u0275eld"](2,0,null,null,4,"div",[["class","mat-slider-track-wrapper"]],null,null,null,null,null)),(t()(),r["\u0275eld"](3,0,null,null,1,"div",[["class","mat-slider-track-background"]],null,null,null,null,null)),r["\u0275did"](4,278528,null,0,G,[r.KeyValueDiffers,r.ElementRef,r.Renderer2],{ngStyle:[0,"ngStyle"]},null),(t()(),r["\u0275eld"](5,0,null,null,1,"div",[["class","mat-slider-track-fill"]],null,null,null,null,null)),r["\u0275did"](6,278528,null,0,G,[r.KeyValueDiffers,r.ElementRef,r.Renderer2],{ngStyle:[0,"ngStyle"]},null),(t()(),r["\u0275eld"](7,0,null,null,3,"div",[["class","mat-slider-ticks-container"]],null,null,null,null,null)),r["\u0275did"](8,278528,null,0,G,[r.KeyValueDiffers,r.ElementRef,r.Renderer2],{ngStyle:[0,"ngStyle"]},null),(t()(),r["\u0275eld"](9,0,null,null,1,"div",[["class","mat-slider-ticks"]],null,null,null,null,null)),r["\u0275did"](10,278528,null,0,G,[r.KeyValueDiffers,r.ElementRef,r.Renderer2],{ngStyle:[0,"ngStyle"]},null),(t()(),r["\u0275eld"](11,0,null,null,6,"div",[["class","mat-slider-thumb-container"]],null,null,null,null,null)),r["\u0275did"](12,278528,null,0,G,[r.KeyValueDiffers,r.ElementRef,r.Renderer2],{ngStyle:[0,"ngStyle"]},null),(t()(),r["\u0275eld"](13,0,null,null,0,"div",[["class","mat-slider-focus-ring"]],null,null,null,null,null)),(t()(),r["\u0275eld"](14,0,null,null,0,"div",[["class","mat-slider-thumb"]],null,null,null,null,null)),(t()(),r["\u0275eld"](15,0,null,null,2,"div",[["class","mat-slider-thumb-label"]],null,null,null,null,null)),(t()(),r["\u0275eld"](16,0,null,null,1,"span",[["class","mat-slider-thumb-label-text"]],null,null,null,null,null)),(t()(),r["\u0275ted"](17,null,["",""]))],function(t,e){var n=e.component;t(e,4,0,n._trackBackgroundStyles),t(e,6,0,n._trackFillStyles),t(e,8,0,n._ticksContainerStyles),t(e,10,0,n._ticksStyles),t(e,12,0,n._thumbContainerStyles)},function(t,e){t(e,17,0,e.component.displayValue)})}var fl=r["\u0275crt"]({encapsulation:2,styles:[".mat-expansion-panel{transition:box-shadow 280ms cubic-bezier(.4,0,.2,1);box-sizing:content-box;display:block;margin:0;transition:margin 225ms cubic-bezier(.4,0,.2,1)}.mat-expansion-panel:not([class*=mat-elevation-z]){box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)}.mat-expansion-panel-content{overflow:hidden}.mat-expansion-panel-content.mat-expanded{overflow:visible}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion .mat-expansion-panel-spacing:first-child{margin-top:0}.mat-accordion .mat-expansion-panel-spacing:last-child{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px}.mat-action-row button.mat-button{margin-left:8px}[dir=rtl] .mat-action-row button.mat-button{margin-left:0;margin-right:8px}"],data:{animation:[{type:7,name:"bodyExpansion",definitions:[{type:0,name:"collapsed",styles:{type:6,styles:{height:"0px",visibility:"hidden"},offset:null},options:void 0},{type:0,name:"expanded",styles:{type:6,styles:{height:"*",visibility:"visible"},offset:null},options:void 0},{type:1,expr:"expanded <=> collapsed",animation:{type:4,styles:null,timings:"225ms cubic-bezier(0.4,0.0,0.2,1)"},options:null}],options:{}}]}});function dl(t){return r["\u0275vid"](0,[(t()(),r["\u0275and"](0,null,null,0))],null,null)}function ml(t){return r["\u0275vid"](2,[r["\u0275ncd"](null,0),(t()(),r["\u0275eld"](1,0,[["body",1]],null,5,"div",[["class","mat-expansion-panel-content"],["role","region"]],[[24,"@bodyExpansion",0],[2,"mat-expanded",null],[1,"aria-labelledby",0],[8,"id",0]],[[null,"@bodyExpansion.done"],[null,"@bodyExpansion.start"]],function(t,e,n){var r=!0,i=t.component;return"@bodyExpansion.done"===e&&(r=!1!==i._bodyAnimation(n)&&r),"@bodyExpansion.start"===e&&(r=!1!==i._bodyAnimation(n)&&r),r},null,null)),(t()(),r["\u0275eld"](2,0,null,null,3,"div",[["class","mat-expansion-panel-body"]],null,null,null,null,null)),r["\u0275ncd"](null,1),(t()(),r["\u0275and"](16777216,null,null,1,null,dl)),r["\u0275did"](5,212992,null,0,Zt,[r.ComponentFactoryResolver,r.ViewContainerRef],{portal:[0,"portal"]},null),r["\u0275ncd"](null,2)],function(t,e){t(e,5,0,e.component._portal)},function(t,e){var n=e.component;t(e,1,0,n._getExpandedState(),n.expanded,n._headerId,n.id)})}var gl=r["\u0275crt"]({encapsulation:2,styles:[".mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:0}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-expansion-panel-header-description,.mat-expansion-panel-header-title{display:flex;flex-grow:1;margin-right:16px}[dir=rtl] .mat-expansion-panel-header-description,[dir=rtl] .mat-expansion-panel-header-title{margin-right:0;margin-left:16px}.mat-expansion-panel-header-description{flex-grow:2}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:'';display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle}"],data:{animation:[{type:7,name:"indicatorRotate",definitions:[{type:0,name:"collapsed",styles:{type:6,styles:{transform:"rotate(0deg)"},offset:null},options:void 0},{type:0,name:"expanded",styles:{type:6,styles:{transform:"rotate(180deg)"},offset:null},options:void 0},{type:1,expr:"expanded <=> collapsed",animation:{type:4,styles:null,timings:"225ms cubic-bezier(0.4,0.0,0.2,1)"},options:null}],options:{}},{type:7,name:"expansionHeight",definitions:[{type:0,name:"collapsed",styles:{type:6,styles:{height:"{{collapsedHeight}}"},offset:null},options:{params:{collapsedHeight:"48px"}}},{type:0,name:"expanded",styles:{type:6,styles:{height:"{{expandedHeight}}"},offset:null},options:{params:{expandedHeight:"64px"}}},{type:1,expr:"expanded <=> collapsed",animation:{type:4,styles:null,timings:"225ms cubic-bezier(0.4,0.0,0.2,1)"},options:null}],options:{}}]}});function yl(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,0,"span",[["class","mat-expansion-indicator"]],[[24,"@indicatorRotate",0]],null,null,null,null))],null,function(t,e){t(e,0,0,e.component._getExpandedState())})}function vl(t){return r["\u0275vid"](2,[(t()(),r["\u0275eld"](0,0,null,null,3,"span",[["class","mat-content"]],null,null,null,null,null)),r["\u0275ncd"](null,0),r["\u0275ncd"](null,1),r["\u0275ncd"](null,2),(t()(),r["\u0275and"](16777216,null,null,1,null,yl)),r["\u0275did"](5,16384,null,0,z,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(t,e){t(e,5,0,e.component._showToggle())},null)}var _l=r["\u0275crt"]({encapsulation:2,styles:["@keyframes mat-checkbox-fade-in-background{0%{opacity:0}50%{opacity:1}}@keyframes mat-checkbox-fade-out-background{0%,50%{opacity:1}100%{opacity:0}}@keyframes mat-checkbox-unchecked-checked-checkmark-path{0%,50%{stroke-dashoffset:22.91026}50%{animation-timing-function:cubic-bezier(0,0,.2,.1)}100%{stroke-dashoffset:0}}@keyframes mat-checkbox-unchecked-indeterminate-mixedmark{0%,68.2%{transform:scaleX(0)}68.2%{animation-timing-function:cubic-bezier(0,0,0,1)}100%{transform:scaleX(1)}}@keyframes mat-checkbox-checked-unchecked-checkmark-path{from{animation-timing-function:cubic-bezier(.4,0,1,1);stroke-dashoffset:0}to{stroke-dashoffset:-22.91026}}@keyframes mat-checkbox-checked-indeterminate-checkmark{from{animation-timing-function:cubic-bezier(0,0,.2,.1);opacity:1;transform:rotate(0)}to{opacity:0;transform:rotate(45deg)}}@keyframes mat-checkbox-indeterminate-checked-checkmark{from{animation-timing-function:cubic-bezier(.14,0,0,1);opacity:0;transform:rotate(45deg)}to{opacity:1;transform:rotate(360deg)}}@keyframes mat-checkbox-checked-indeterminate-mixedmark{from{animation-timing-function:cubic-bezier(0,0,.2,.1);opacity:0;transform:rotate(-45deg)}to{opacity:1;transform:rotate(0)}}@keyframes mat-checkbox-indeterminate-checked-mixedmark{from{animation-timing-function:cubic-bezier(.14,0,0,1);opacity:1;transform:rotate(0)}to{opacity:0;transform:rotate(315deg)}}@keyframes mat-checkbox-indeterminate-unchecked-mixedmark{0%{animation-timing-function:linear;opacity:1;transform:scaleX(1)}100%,32.8%{opacity:0;transform:scaleX(0)}}.mat-checkbox-checkmark,.mat-checkbox-mixedmark{width:calc(100% - 4px)}.mat-checkbox-background,.mat-checkbox-frame{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:2px;box-sizing:border-box;pointer-events:none}.mat-checkbox{transition:background .4s cubic-bezier(.25,.8,.25,1),box-shadow 280ms cubic-bezier(.4,0,.2,1);cursor:pointer}.mat-checkbox-layout{cursor:inherit;align-items:baseline;vertical-align:middle;display:inline-flex;white-space:nowrap}.mat-checkbox-inner-container{display:inline-block;height:20px;line-height:0;margin:auto;margin-right:8px;order:0;position:relative;vertical-align:middle;white-space:nowrap;width:20px;flex-shrink:0}[dir=rtl] .mat-checkbox-inner-container{margin-left:8px;margin-right:auto}.mat-checkbox-inner-container-no-side-margin{margin-left:0;margin-right:0}.mat-checkbox-frame{background-color:transparent;transition:border-color 90ms cubic-bezier(0,0,.2,.1);border-width:2px;border-style:solid}.mat-checkbox-background{align-items:center;display:inline-flex;justify-content:center;transition:background-color 90ms cubic-bezier(0,0,.2,.1),opacity 90ms cubic-bezier(0,0,.2,.1)}.mat-checkbox-checkmark{top:0;left:0;right:0;bottom:0;position:absolute;width:100%}.mat-checkbox-checkmark-path{stroke-dashoffset:22.91026;stroke-dasharray:22.91026;stroke-width:2.66667px}.mat-checkbox-mixedmark{height:2px;opacity:0;transform:scaleX(0) rotate(0)}.mat-checkbox-label-before .mat-checkbox-inner-container{order:1;margin-left:8px;margin-right:auto}[dir=rtl] .mat-checkbox-label-before .mat-checkbox-inner-container{margin-left:auto;margin-right:8px}.mat-checkbox-checked .mat-checkbox-checkmark{opacity:1}.mat-checkbox-checked .mat-checkbox-checkmark-path{stroke-dashoffset:0}.mat-checkbox-checked .mat-checkbox-mixedmark{transform:scaleX(1) rotate(-45deg)}.mat-checkbox-indeterminate .mat-checkbox-checkmark{opacity:0;transform:rotate(45deg)}.mat-checkbox-indeterminate .mat-checkbox-checkmark-path{stroke-dashoffset:0}.mat-checkbox-indeterminate .mat-checkbox-mixedmark{opacity:1;transform:scaleX(1) rotate(0)}.mat-checkbox-unchecked .mat-checkbox-background{background-color:transparent}.mat-checkbox-disabled{cursor:default}.mat-checkbox-anim-unchecked-checked .mat-checkbox-background{animation:180ms linear 0s mat-checkbox-fade-in-background}.mat-checkbox-anim-unchecked-checked .mat-checkbox-checkmark-path{animation:180ms linear 0s mat-checkbox-unchecked-checked-checkmark-path}.mat-checkbox-anim-unchecked-indeterminate .mat-checkbox-background{animation:180ms linear 0s mat-checkbox-fade-in-background}.mat-checkbox-anim-unchecked-indeterminate .mat-checkbox-mixedmark{animation:90ms linear 0s mat-checkbox-unchecked-indeterminate-mixedmark}.mat-checkbox-anim-checked-unchecked .mat-checkbox-background{animation:180ms linear 0s mat-checkbox-fade-out-background}.mat-checkbox-anim-checked-unchecked .mat-checkbox-checkmark-path{animation:90ms linear 0s mat-checkbox-checked-unchecked-checkmark-path}.mat-checkbox-anim-checked-indeterminate .mat-checkbox-checkmark{animation:90ms linear 0s mat-checkbox-checked-indeterminate-checkmark}.mat-checkbox-anim-checked-indeterminate .mat-checkbox-mixedmark{animation:90ms linear 0s mat-checkbox-checked-indeterminate-mixedmark}.mat-checkbox-anim-indeterminate-checked .mat-checkbox-checkmark{animation:.5s linear 0s mat-checkbox-indeterminate-checked-checkmark}.mat-checkbox-anim-indeterminate-checked .mat-checkbox-mixedmark{animation:.5s linear 0s mat-checkbox-indeterminate-checked-mixedmark}.mat-checkbox-anim-indeterminate-unchecked .mat-checkbox-background{animation:180ms linear 0s mat-checkbox-fade-out-background}.mat-checkbox-anim-indeterminate-unchecked .mat-checkbox-mixedmark{animation:.3s linear 0s mat-checkbox-indeterminate-unchecked-mixedmark}.mat-checkbox-input{bottom:0;left:50%}.mat-checkbox-ripple{position:absolute;left:calc(50% - 25px);top:calc(50% - 25px);height:50px;width:50px;z-index:1;pointer-events:none}"],data:{}});function bl(t){return r["\u0275vid"](2,[r["\u0275qud"](402653184,1,{_inputElement:0}),r["\u0275qud"](402653184,2,{ripple:0}),(t()(),r["\u0275eld"](2,0,[["label",1]],null,15,"label",[["class","mat-checkbox-layout"]],[[1,"for",0]],null,null,null,null)),(t()(),r["\u0275eld"](3,0,null,null,9,"div",[["class","mat-checkbox-inner-container"]],[[2,"mat-checkbox-inner-container-no-side-margin",null]],null,null,null,null)),(t()(),r["\u0275eld"](4,0,[[1,0],["input",1]],null,0,"input",[["class","mat-checkbox-input cdk-visually-hidden"],["type","checkbox"]],[[8,"id",0],[8,"required",0],[8,"checked",0],[1,"value",0],[8,"disabled",0],[1,"name",0],[8,"tabIndex",0],[8,"indeterminate",0],[1,"aria-label",0],[1,"aria-labelledby",0],[1,"aria-checked",0]],[[null,"change"],[null,"click"]],function(t,e,n){var r=!0,i=t.component;return"change"===e&&(r=!1!==i._onInteractionEvent(n)&&r),"click"===e&&(r=!1!==i._onInputClick(n)&&r),r},null,null)),(t()(),r["\u0275eld"](5,0,null,null,2,"div",[["class","mat-checkbox-ripple mat-ripple"],["matRipple",""]],[[2,"mat-ripple-unbounded",null]],null,null,null,null)),r["\u0275did"](6,212992,[[2,4]],0,oi,[r.ElementRef,r.NgZone,ot,[2,ii]],{centered:[0,"centered"],radius:[1,"radius"],animation:[2,"animation"],disabled:[3,"disabled"],trigger:[4,"trigger"]},null),r["\u0275pod"](7,{enterDuration:0}),(t()(),r["\u0275eld"](8,0,null,null,0,"div",[["class","mat-checkbox-frame"]],null,null,null,null,null)),(t()(),r["\u0275eld"](9,0,null,null,3,"div",[["class","mat-checkbox-background"]],null,null,null,null,null)),(t()(),r["\u0275eld"](10,0,null,null,1,":svg:svg",[[":xml:space","preserve"],["class","mat-checkbox-checkmark"],["focusable","false"],["version","1.1"],["viewBox","0 0 24 24"]],null,null,null,null,null)),(t()(),r["\u0275eld"](11,0,null,null,0,":svg:path",[["class","mat-checkbox-checkmark-path"],["d","M4.1,12.7 9,17.6 20.3,6.3"],["fill","none"],["stroke","white"]],null,null,null,null,null)),(t()(),r["\u0275eld"](12,0,null,null,0,"div",[["class","mat-checkbox-mixedmark"]],null,null,null,null,null)),(t()(),r["\u0275eld"](13,0,[["checkboxLabel",1]],null,4,"span",[["class","mat-checkbox-label"]],null,[[null,"cdkObserveContent"]],function(t,e,n){var r=!0;return"cdkObserveContent"===e&&(r=!1!==t.component._onLabelTextChange()&&r),r},null,null)),r["\u0275did"](14,1720320,null,0,ds,[fs,r.ElementRef,r.NgZone],null,{event:"cdkObserveContent"}),(t()(),r["\u0275eld"](15,0,null,null,1,"span",[["style","display:none"]],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,["\xa0"])),r["\u0275ncd"](null,0)],function(t,e){var n=e.component;t(e,6,0,!0,25,t(e,7,0,150),n._isRippleDisabled(),r["\u0275nov"](e,2))},function(t,e){var n=e.component;t(e,2,0,n.inputId),t(e,3,0,!r["\u0275nov"](e,13).textContent||!r["\u0275nov"](e,13).textContent.trim()),t(e,4,1,[n.inputId,n.required,n.checked,n.value,n.disabled,n.name,n.tabIndex,n.indeterminate,n.ariaLabel,n.ariaLabelledby,n._getAriaChecked()]),t(e,5,0,r["\u0275nov"](e,6).unbounded)})}var xl=function(){function t(t){this.ngRedux=t,this.onlyOlderThan=!1,this.ageLimit=2e3,this.onlyHistoric=!1,this.onlySpringwater=!1,this.filterCount=0,this.filterText=""}return t.prototype.updateFilters=function(){this.ngRedux.dispatch({type:f,payload:{onlyOlderThan:null!==this.onlyOlderThan?this.ageLimit:null,onlyHistoric:this.onlyHistoric,onlySpringwater:this.onlySpringwater,filterText:this.filterText}}),this.filterCount=(this.onlyOlderThan?1:0)+(this.onlyHistoric?1:0)+(this.onlySpringwater?1:0)+(""!==this.filterText?1:0)},t.prototype.ngOnInit=function(){},Object(v.b)([Object(i.select)(),Object(v.d)("design:type",Object)],t.prototype,"filterCategories",void 0),t}(),wl=r["\u0275crt"]({encapsulation:0,styles:[[".filter-holder[_ngcontent-%COMP%]{\r\n  \r\n  }.filter-counter[_ngcontent-%COMP%]{color:#fff;background-color:#d9423d;border-radius:10px;padding-left:10px;padding-right:10px;margin-left:10px;line-height:24px}"]],data:{}});function El(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,10,"span",[["matSuffix",""]],null,null,null,null,null)),r["\u0275did"](1,16384,[[8,4]],0,rs,[],null,null),(t()(),r["\u0275ted"](-1,null,["\n            "])),(t()(),r["\u0275eld"](3,0,null,null,6,"button",[["mat-icon-button",""]],[[8,"disabled",0]],[[null,"click"]],function(t,e,n){var r=!0,i=t.component;return"click"===e&&(i.filterText="",r=!1!==i.updateFilters()&&r),r},Qi,Ji)),r["\u0275did"](4,180224,null,0,Wi,[r.ElementRef,ot,on],null,null),(t()(),r["\u0275ted"](-1,0,["\n              "])),(t()(),r["\u0275eld"](6,0,null,0,2,"mat-icon",[["class","mat-icon"],["role","img"]],null,null,null,ta,$o)),r["\u0275did"](7,638976,null,0,Jo,[r.ElementRef,Yo,[8,null]],null,null),(t()(),r["\u0275ted"](-1,0,["close"])),(t()(),r["\u0275ted"](-1,0,["\n            "])),(t()(),r["\u0275ted"](-1,null,["\n          "]))],function(t,e){t(e,7,0)},function(t,e){t(e,3,0,r["\u0275nov"](e,4).disabled||null)})}function Cl(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,5,"mat-slider",[["class","mat-slider"],["max","2010"],["min","1200"],["role","slider"],["step","100"],["thumbLabel","true"],["tick-interval","1"],["value","2000"]],[[8,"tabIndex",0],[1,"aria-disabled",0],[1,"aria-valuemax",0],[1,"aria-valuemin",0],[1,"aria-valuenow",0],[1,"aria-orientation",0],[2,"mat-slider-disabled",null],[2,"mat-slider-has-ticks",null],[2,"mat-slider-horizontal",null],[2,"mat-slider-axis-inverted",null],[2,"mat-slider-sliding",null],[2,"mat-slider-thumb-label-showing",null],[2,"mat-slider-vertical",null],[2,"mat-slider-min-value",null],[2,"mat-slider-hide-last-tick",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"focus"],[null,"blur"],[null,"click"],[null,"keydown"],[null,"keyup"],[null,"mouseenter"],[null,"slide"],[null,"slideend"],[null,"slidestart"]],function(t,e,n){var i=!0,o=t.component;return"focus"===e&&(i=!1!==r["\u0275nov"](t,1)._onFocus()&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,1)._onBlur()&&i),"click"===e&&(i=!1!==r["\u0275nov"](t,1)._onClick(n)&&i),"keydown"===e&&(i=!1!==r["\u0275nov"](t,1)._onKeydown(n)&&i),"keyup"===e&&(i=!1!==r["\u0275nov"](t,1)._onKeyup()&&i),"mouseenter"===e&&(i=!1!==r["\u0275nov"](t,1)._onMouseenter()&&i),"slide"===e&&(i=!1!==r["\u0275nov"](t,1)._onSlide(n)&&i),"slideend"===e&&(i=!1!==r["\u0275nov"](t,1)._onSlideEnd()&&i),"slidestart"===e&&(i=!1!==r["\u0275nov"](t,1)._onSlideStart(n)&&i),"ngModelChange"===e&&(i=!1!==(o.ageLimit=n)&&i),"change"===e&&(i=!1!==o.updateFilters()&&i),i},pl,hl)),r["\u0275did"](1,245760,null,0,uu,[r.ElementRef,on,r.ChangeDetectorRef,[2,Bt],[8,null]],{disabled:[0,"disabled"],max:[1,"max"],min:[2,"min"],step:[3,"step"],thumbLabel:[4,"thumbLabel"],_tickIntervalDeprecated:[5,"_tickIntervalDeprecated"],value:[6,"value"]},{change:"change"}),r["\u0275prd"](1024,null,ha,function(t){return[t]},[uu]),r["\u0275did"](3,671744,null,0,Ka,[[8,null],[8,null],[8,null],[2,ha]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),r["\u0275prd"](2048,null,_a,null,[Ka]),r["\u0275did"](5,16384,null,0,La,[_a],null,null)],function(t,e){var n=e.component;t(e,1,0,!n.onlyOlderThan,"2010","1200","100","true","1","2000"),t(e,3,0,!n.onlyOlderThan,n.ageLimit)},function(t,e){t(e,0,1,[r["\u0275nov"](e,1).tabIndex,r["\u0275nov"](e,1).disabled,r["\u0275nov"](e,1).max,r["\u0275nov"](e,1).min,r["\u0275nov"](e,1).value,r["\u0275nov"](e,1).vertical?"vertical":"horizontal",r["\u0275nov"](e,1).disabled,r["\u0275nov"](e,1).tickInterval,!r["\u0275nov"](e,1).vertical,r["\u0275nov"](e,1)._invertAxis,r["\u0275nov"](e,1)._isSliding,r["\u0275nov"](e,1).thumbLabel,r["\u0275nov"](e,1).vertical,r["\u0275nov"](e,1)._isMinValue,r["\u0275nov"](e,1).disabled||r["\u0275nov"](e,1)._isMinValue&&r["\u0275nov"](e,1)._thumbGap&&r["\u0275nov"](e,1)._invertAxis,r["\u0275nov"](e,5).ngClassUntouched,r["\u0275nov"](e,5).ngClassTouched,r["\u0275nov"](e,5).ngClassPristine,r["\u0275nov"](e,5).ngClassDirty,r["\u0275nov"](e,5).ngClassValid,r["\u0275nov"](e,5).ngClassInvalid,r["\u0275nov"](e,5).ngClassPending])})}function Sl(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,16777216,null,null,78,"mat-expansion-panel",[["class","filter-holder mat-expansion-panel"]],[[2,"mat-expanded",null],[2,"mat-expansion-panel-spacing",null]],null,null,ml,fl)),r["\u0275did"](1,1753088,null,1,Rs,[[8,null],r.ChangeDetectorRef,ls,r.ViewContainerRef],null,null),r["\u0275qud"](335544320,1,{_lazyContent:0}),(t()(),r["\u0275ted"](-1,1,["\n  "])),(t()(),r["\u0275eld"](4,0,null,0,15,"mat-expansion-panel-header",[["class","mat-expansion-panel-header"],["role","button"]],[[1,"id",0],[1,"tabindex",0],[1,"aria-controls",0],[1,"aria-expanded",0],[1,"aria-disabled",0],[2,"mat-expanded",null],[40,"@expansionHeight",0]],[[null,"click"],[null,"keydown"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r["\u0275nov"](t,5)._toggle()&&i),"keydown"===e&&(i=!1!==r["\u0275nov"](t,5)._keydown(n)&&i),i},vl,gl)),r["\u0275did"](5,180224,null,0,Ls,[Rs,r.ElementRef,on,r.ChangeDetectorRef],null,null),r["\u0275pod"](6,{collapsedHeight:0,expandedHeight:1}),r["\u0275pod"](7,{value:0,params:1}),(t()(),r["\u0275ted"](-1,2,["\n    "])),(t()(),r["\u0275eld"](9,0,null,0,9,"mat-panel-title",[["class","mat-expansion-panel-header-title"]],null,null,null,null,null)),r["\u0275did"](10,16384,null,0,Ns,[],null,null),(t()(),r["\u0275ted"](-1,null,["\n      "])),(t()(),r["\u0275eld"](12,0,null,null,2,"mat-icon",[["class","mat-icon"],["role","img"]],null,null,null,ta,$o)),r["\u0275did"](13,638976,null,0,Jo,[r.ElementRef,Yo,[8,null]],null,null),(t()(),r["\u0275ted"](-1,0,["filter_list"])),(t()(),r["\u0275ted"](-1,null,["\n      filters "])),(t()(),r["\u0275eld"](16,0,null,null,1,"span",[["class","filter-counter"]],null,null,null,null,null)),(t()(),r["\u0275ted"](17,null,["",""])),(t()(),r["\u0275ted"](-1,null,["\n    "])),(t()(),r["\u0275ted"](-1,2,["\n  "])),(t()(),r["\u0275ted"](-1,1,["\n      "])),(t()(),r["\u0275eld"](21,0,null,1,56,"section",[["class","filter-box"]],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,["\n        "])),(t()(),r["\u0275eld"](23,0,null,null,21,"mat-form-field",[["class","mat-input-container mat-form-field"]],[[2,"mat-input-invalid",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-focused",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,Ru,Eu)),r["\u0275did"](24,7389184,null,7,os,[r.ElementRef,r.ChangeDetectorRef,[2,gi]],null,null),r["\u0275qud"](335544320,2,{_control:0}),r["\u0275qud"](335544320,3,{_placeholderChild:0}),r["\u0275qud"](335544320,4,{_labelChild:0}),r["\u0275qud"](603979776,5,{_errorChildren:1}),r["\u0275qud"](603979776,6,{_hintChildren:1}),r["\u0275qud"](603979776,7,{_prefixChildren:1}),r["\u0275qud"](603979776,8,{_suffixChildren:1}),(t()(),r["\u0275ted"](-1,1,["\n          "])),(t()(),r["\u0275eld"](33,0,null,1,7,"input",[["class","mat-input-element mat-form-field-autofill-control"],["matInput",""],["placeholder","full text search"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"mat-input-server",null],[1,"id",0],[8,"placeholder",0],[8,"disabled",0],[8,"required",0],[8,"readOnly",0],[1,"aria-describedby",0],[1,"aria-invalid",0],[1,"aria-required",0]],[[null,"ngModelChange"],[null,"keyup"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"focus"]],function(t,e,n){var i=!0,o=t.component;return"input"===e&&(i=!1!==r["\u0275nov"](t,34)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,34).onTouched()&&i),"compositionstart"===e&&(i=!1!==r["\u0275nov"](t,34)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r["\u0275nov"](t,34)._compositionEnd(n.target.value)&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,39)._focusChanged(!1)&&i),"focus"===e&&(i=!1!==r["\u0275nov"](t,39)._focusChanged(!0)&&i),"input"===e&&(i=!1!==r["\u0275nov"](t,39)._onInput()&&i),"ngModelChange"===e&&(i=!1!==(o.filterText=n)&&i),"keyup"===e&&(i=!1!==o.updateFilters()&&i),i},null,null)),r["\u0275did"](34,16384,null,0,da,[r.Renderer2,r.ElementRef,[2,fa]],null,null),r["\u0275prd"](1024,null,ha,function(t){return[t]},[da]),r["\u0275did"](36,671744,null,0,Ka,[[8,null],[8,null],[8,null],[2,ha]],{model:[0,"model"]},{update:"ngModelChange"}),r["\u0275prd"](2048,null,_a,null,[Ka]),r["\u0275did"](38,16384,null,0,La,[_a],null,null),r["\u0275did"](39,933888,null,0,Is,[r.ElementRef,ot,[2,_a],[2,Ua],[2,Qa],Wr,[8,null]],{placeholder:[0,"placeholder"]},null),r["\u0275prd"](2048,[[2,4]],es,null,[Is]),(t()(),r["\u0275ted"](-1,1,["\n          "])),(t()(),r["\u0275and"](16777216,null,4,1,null,El)),r["\u0275did"](43,16384,null,0,z,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),r["\u0275ted"](-1,1,["\n        "])),(t()(),r["\u0275ted"](-1,null,["\n\n          "])),(t()(),r["\u0275eld"](46,0,null,null,6,"mat-checkbox",[["class","mat-checkbox"]],[[8,"id",0],[2,"mat-checkbox-indeterminate",null],[2,"mat-checkbox-checked",null],[2,"mat-checkbox-disabled",null],[2,"mat-checkbox-label-before",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"]],function(t,e,n){var r=!0,i=t.component;return"ngModelChange"===e&&(r=!1!==(i.onlySpringwater=n)&&r),"change"===e&&(r=!1!==i.updateFilters()&&r),r},bl,_l)),r["\u0275did"](47,4374528,null,0,_s,[r.ElementRef,r.ChangeDetectorRef,on,[8,null],[2,gs]],null,{change:"change"}),r["\u0275prd"](1024,null,ha,function(t){return[t]},[_s]),r["\u0275did"](49,671744,null,0,Ka,[[8,null],[8,null],[8,null],[2,ha]],{model:[0,"model"]},{update:"ngModelChange"}),r["\u0275prd"](2048,null,_a,null,[Ka]),r["\u0275did"](51,16384,null,0,La,[_a],null,null),(t()(),r["\u0275ted"](-1,0,[" only spring water"])),(t()(),r["\u0275eld"](53,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,["\n          "])),(t()(),r["\u0275eld"](55,0,null,null,6,"mat-checkbox",[["class","mat-checkbox"]],[[8,"id",0],[2,"mat-checkbox-indeterminate",null],[2,"mat-checkbox-checked",null],[2,"mat-checkbox-disabled",null],[2,"mat-checkbox-label-before",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"]],function(t,e,n){var r=!0,i=t.component;return"ngModelChange"===e&&(r=!1!==(i.onlyHistoric=n)&&r),"change"===e&&(r=!1!==i.updateFilters()&&r),r},bl,_l)),r["\u0275did"](56,4374528,null,0,_s,[r.ElementRef,r.ChangeDetectorRef,on,[8,null],[2,gs]],null,{change:"change"}),r["\u0275prd"](1024,null,ha,function(t){return[t]},[_s]),r["\u0275did"](58,671744,null,0,Ka,[[8,null],[8,null],[8,null],[2,ha]],{model:[0,"model"]},{update:"ngModelChange"}),r["\u0275prd"](2048,null,_a,null,[Ka]),r["\u0275did"](60,16384,null,0,La,[_a],null,null),(t()(),r["\u0275ted"](-1,0,[" only historic"])),(t()(),r["\u0275ted"](-1,null,["\n        "])),(t()(),r["\u0275eld"](63,0,null,null,6,"mat-checkbox",[["class","mat-checkbox"]],[[8,"id",0],[2,"mat-checkbox-indeterminate",null],[2,"mat-checkbox-checked",null],[2,"mat-checkbox-disabled",null],[2,"mat-checkbox-label-before",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"]],function(t,e,n){var r=!0,i=t.component;return"ngModelChange"===e&&(r=!1!==(i.onlyOlderThan=n)&&r),"change"===e&&(r=!1!==i.updateFilters()&&r),r},bl,_l)),r["\u0275did"](64,4374528,null,0,_s,[r.ElementRef,r.ChangeDetectorRef,on,[8,null],[2,gs]],null,{change:"change"}),r["\u0275prd"](1024,null,ha,function(t){return[t]},[_s]),r["\u0275did"](66,671744,null,0,Ka,[[8,null],[8,null],[8,null],[2,ha]],{model:[0,"model"]},{update:"ngModelChange"}),r["\u0275prd"](2048,null,_a,null,[Ka]),r["\u0275did"](68,16384,null,0,La,[_a],null,null),(t()(),r["\u0275ted"](69,0,[" only built before ",""])),(t()(),r["\u0275eld"](70,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,["\n          "])),(t()(),r["\u0275and"](16777216,null,null,1,null,Cl)),r["\u0275did"](73,16384,null,0,z,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),r["\u0275ted"](-1,null,["\n        "])),(t()(),r["\u0275eld"](75,0,null,null,1,"mat-divider",[["class","mat-divider"],["role","separator"]],[[1,"aria-orientation",0],[2,"mat-divider-vertical",null],[2,"mat-divider-inset",null]],null,null,Yu,Hu)),r["\u0275did"](76,49152,null,0,ks,[],null,null),(t()(),r["\u0275ted"](-1,null,["\n      "])),(t()(),r["\u0275ted"](-1,1,["\n\n\n"])),(t()(),r["\u0275ted"](-1,null,["\n"]))],function(t,e){var n=e.component;t(e,13,0),t(e,36,0,n.filterText),t(e,39,0,"full text search"),t(e,43,0,""!=n.filterText),t(e,49,0,n.onlySpringwater),t(e,58,0,n.onlyHistoric),t(e,66,0,n.onlyOlderThan),t(e,73,0,n.onlyOlderThan)},function(t,e){var n=e.component;t(e,0,0,r["\u0275nov"](e,1).expanded,r["\u0275nov"](e,1)._hasSpacing()),t(e,4,0,r["\u0275nov"](e,5).panel._headerId,r["\u0275nov"](e,5).panel.disabled?-1:0,r["\u0275nov"](e,5)._getPanelId(),r["\u0275nov"](e,5)._isExpanded(),r["\u0275nov"](e,5).panel.disabled,r["\u0275nov"](e,5)._isExpanded(),t(e,7,0,r["\u0275nov"](e,5)._getExpandedState(),t(e,6,0,r["\u0275nov"](e,5).collapsedHeight,r["\u0275nov"](e,5).expandedHeight))),t(e,17,0,n.filterCount),t(e,23,1,[r["\u0275nov"](e,24)._control.errorState,r["\u0275nov"](e,24)._control.errorState,r["\u0275nov"](e,24)._canLabelFloat,r["\u0275nov"](e,24)._shouldLabelFloat(),r["\u0275nov"](e,24)._hideControlPlaceholder(),r["\u0275nov"](e,24)._control.disabled,r["\u0275nov"](e,24)._control.focused,r["\u0275nov"](e,24)._shouldForward("untouched"),r["\u0275nov"](e,24)._shouldForward("touched"),r["\u0275nov"](e,24)._shouldForward("pristine"),r["\u0275nov"](e,24)._shouldForward("dirty"),r["\u0275nov"](e,24)._shouldForward("valid"),r["\u0275nov"](e,24)._shouldForward("invalid"),r["\u0275nov"](e,24)._shouldForward("pending")]),t(e,33,1,[r["\u0275nov"](e,38).ngClassUntouched,r["\u0275nov"](e,38).ngClassTouched,r["\u0275nov"](e,38).ngClassPristine,r["\u0275nov"](e,38).ngClassDirty,r["\u0275nov"](e,38).ngClassValid,r["\u0275nov"](e,38).ngClassInvalid,r["\u0275nov"](e,38).ngClassPending,r["\u0275nov"](e,39)._isServer,r["\u0275nov"](e,39).id,r["\u0275nov"](e,39).placeholder,r["\u0275nov"](e,39).disabled,r["\u0275nov"](e,39).required,r["\u0275nov"](e,39).readonly,r["\u0275nov"](e,39)._ariaDescribedby||null,r["\u0275nov"](e,39).errorState,r["\u0275nov"](e,39).required.toString()]),t(e,46,1,[r["\u0275nov"](e,47).id,r["\u0275nov"](e,47).indeterminate,r["\u0275nov"](e,47).checked,r["\u0275nov"](e,47).disabled,"before"==r["\u0275nov"](e,47).labelPosition,r["\u0275nov"](e,51).ngClassUntouched,r["\u0275nov"](e,51).ngClassTouched,r["\u0275nov"](e,51).ngClassPristine,r["\u0275nov"](e,51).ngClassDirty,r["\u0275nov"](e,51).ngClassValid,r["\u0275nov"](e,51).ngClassInvalid,r["\u0275nov"](e,51).ngClassPending]),t(e,55,1,[r["\u0275nov"](e,56).id,r["\u0275nov"](e,56).indeterminate,r["\u0275nov"](e,56).checked,r["\u0275nov"](e,56).disabled,"before"==r["\u0275nov"](e,56).labelPosition,r["\u0275nov"](e,60).ngClassUntouched,r["\u0275nov"](e,60).ngClassTouched,r["\u0275nov"](e,60).ngClassPristine,r["\u0275nov"](e,60).ngClassDirty,r["\u0275nov"](e,60).ngClassValid,r["\u0275nov"](e,60).ngClassInvalid,r["\u0275nov"](e,60).ngClassPending]),t(e,63,1,[r["\u0275nov"](e,64).id,r["\u0275nov"](e,64).indeterminate,r["\u0275nov"](e,64).checked,r["\u0275nov"](e,64).disabled,"before"==r["\u0275nov"](e,64).labelPosition,r["\u0275nov"](e,68).ngClassUntouched,r["\u0275nov"](e,68).ngClassTouched,r["\u0275nov"](e,68).ngClassPristine,r["\u0275nov"](e,68).ngClassDirty,r["\u0275nov"](e,68).ngClassValid,r["\u0275nov"](e,68).ngClassInvalid,r["\u0275nov"](e,68).ngClassPending]),t(e,69,0,n.ageLimit),t(e,75,0,r["\u0275nov"](e,76).vertical?"vertical":"horizontal",r["\u0275nov"](e,76).vertical,r["\u0275nov"](e,76).inset)})}var Il=r["\u0275crt"]({encapsulation:2,styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(.4,0,.2,1);display:block;position:relative;padding:24px;border-radius:2px}.mat-card:not([class*=mat-elevation-z]){box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)}.mat-card .mat-divider{position:absolute;left:0;width:100%}[dir=rtl] .mat-card .mat-divider{left:auto;right:0}.mat-card .mat-divider.mat-divider-inset{position:static;margin:0}@media screen and (-ms-high-contrast:active){.mat-card{outline:solid 1px}}.mat-card-flat{box-shadow:none}.mat-card-actions,.mat-card-content,.mat-card-subtitle,.mat-card-title{display:block;margin-bottom:16px}.mat-card-actions{margin-left:-16px;margin-right:-16px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 48px);margin:0 -24px 16px -24px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-footer{display:block;margin:0 -24px -24px -24px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button{margin:0 4px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header-text{margin:0 8px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0}.mat-card-lg-image,.mat-card-md-image,.mat-card-sm-image{margin:-8px 0}.mat-card-title-group{display:flex;justify-content:space-between;margin:0 -8px}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}@media (max-width:599px){.mat-card{padding:24px 16px}.mat-card-actions{margin-left:-8px;margin-right:-8px}.mat-card-image{width:calc(100% + 32px);margin:16px -16px}.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}.mat-card-header{margin:-8px 0 0 0}.mat-card-footer{margin-left:-16px;margin-right:-16px}}.mat-card-content>:first-child,.mat-card>:first-child{margin-top:0}.mat-card-content>:last-child:not(.mat-card-footer),.mat-card>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-24px}.mat-card>.mat-card-actions:last-child{margin-bottom:-16px;padding-bottom:0}.mat-card-actions .mat-button:first-child,.mat-card-actions .mat-raised-button:first-child{margin-left:0;margin-right:0}.mat-card-subtitle:not(:first-child),.mat-card-title:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}"],data:{}});function Tl(t){return r["\u0275vid"](2,[r["\u0275ncd"](null,0),r["\u0275ncd"](null,1)],null,null)}var kl=n("CRau"),Ol=function(){function t(t,e){var n=this;this.http=t,this.ngRedux=e,this._fountainSelected=null,this._fountainsAll=null,this._fountainsFiltered=null,this.fountainSelectedSuccess=new r.EventEmitter,this.fountainsLoadedSuccess=new r.EventEmitter,this.fountainsFilteredSuccess=new r.EventEmitter,this.userLocation.subscribe(function(t){n.sortByProximity(t)}),this.filterCategories.subscribe(function(t){n.filterFountains(t)}),this.loadCityData()}return Object.defineProperty(t.prototype,"fountainsAll",{get:function(){return this._fountainsAll},enumerable:!0,configurable:!0}),t.prototype.loadCityData=function(){var t=this;this.http.get("../assets/brunnen.json").subscribe(function(e){e.features.forEach(function(t){t.properties.bezeichnung||(t.properties.bezeichnung="Unnamed fountain")}),t._fountainsAll=e,t.fountainsLoadedSuccess.emit(e),t.sortByProximity(t.ngRedux.getState().userLocation),t.selectCurrentFountain()})},t.prototype.filterFountains=function(t){var e=this;null!==this._fountainsAll&&(this._fountainsFiltered=this._fountainsAll.features.filter(function(n){var r=e.normalize(n.properties.bezeichnung),i=e.normalize(n.properties.nummer);return(r.indexOf(t.filterText)>-1||i.indexOf(t.filterText)>-1)&&(!t.onlySpringwater||"Quellwasser"==n.properties.wasserart_txt)&&(null==t.onlyOlderThan||null!==n.properties.historisches_baujahr&&n.properties.historisches_baujahr<=t.onlyOlderThan)&&!0}),this.fountainsFilteredSuccess.emit(this._fountainsFiltered))},t.prototype.sortByProximity=function(t){if(null!==this._fountainsAll){var e={type:"Feature",geometry:{type:"Point",coordinates:t},properties:{}};this._fountainsAll.features.forEach(function(t){t.properties.distanceFromUser=Object(kl.distance)(t,e)}),this._fountainsAll.features.sort(function(t,e){return t.properties.distanceFromUser-e.properties.distanceFromUser});var n=this.ngRedux.getState().filterCategories;this.filterFountains(n)}},t.prototype.selectCurrentFountain=function(){var t=this.ngRedux.getState().fountainId;if(null!==t&&null!==this._fountainsAll){var e=this._fountainsAll.features.filter(function(e){return e.properties.nummer==t});e.length>0&&this.ngRedux.dispatch({type:u,payload:e[0]})}},t.prototype.normalize=function(t){return t?t.trim().toLowerCase():""},Object(v.b)([Object(i.select)(),Object(v.d)("design:type",Object)],t.prototype,"filterText",void 0),Object(v.b)([Object(i.select)(),Object(v.d)("design:type",Object)],t.prototype,"filterCategories",void 0),Object(v.b)([Object(i.select)(),Object(v.d)("design:type",Object)],t.prototype,"fountainId",void 0),Object(v.b)([Object(i.select)(),Object(v.d)("design:type",Object)],t.prototype,"userLocation",void 0),t}(),Pl=function(){function t(t,e){this.dataService=t,this.ngRedux=e,this.fountains=[]}return t.prototype.ngOnInit=function(){var t=this;this.dataService.fountainsFilteredSuccess.subscribe(function(e){t.fountains=e})},t.prototype.selectFountain=function(t){this.ngRedux.dispatch({type:a,payload:t})},t.prototype.highlightFountain=function(t){this.ngRedux.dispatch({type:s,payload:t})},t}(),Al=r["\u0275crt"]({encapsulation:0,styles:[["mat-card.fountain-list-element[_ngcontent-%COMP%]:hover{background-color:#dbdbdb;cursor:pointer}.fountain-count[_ngcontent-%COMP%]{text-align:center;padding:10px;background-color:#efefef}"]],data:{}});function Ml(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,14,"mat-card",[["class","fountain-list-element mat-card"],["disableRipple","false"],["style","list-style: none;"]],null,[[null,"mouseenter"],[null,"click"]],function(t,e,n){var r=!0,i=t.component;return"mouseenter"===e&&(r=!1!==i.highlightFountain(t.context.$implicit)&&r),"click"===e&&(r=!1!==i.selectFountain(t.context.$implicit)&&r),r},Tl,Il)),r["\u0275did"](1,49152,null,0,hs,[],null,null),(t()(),r["\u0275ted"](-1,0,["\n      "])),(t()(),r["\u0275eld"](3,0,null,0,3,"h4",[],null,null,null,null,null)),(t()(),r["\u0275ted"](4,null,["\n        "," (~","m)\n      "])),r["\u0275pid"](0,et,[]),r["\u0275ppd"](6,2),(t()(),r["\u0275ted"](-1,0,["\n      "])),(t()(),r["\u0275eld"](8,0,null,0,5,"p",[],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,[" "])),(t()(),r["\u0275eld"](10,0,null,null,2,"span",[["class","water-type"]],null,null,null,null,null)),r["\u0275did"](11,278528,null,0,L,[r.IterableDiffers,r.KeyValueDiffers,r.ElementRef,r.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(t()(),r["\u0275ted"](12,null,["",""])),(t()(),r["\u0275ted"](13,null,[" Baujahr: ",""])),(t()(),r["\u0275ted"](-1,0,["\n    "]))],function(t,e){t(e,11,0,"water-type",r["\u0275inlineInterpolate"](1,"",e.context.$implicit.properties.wasserart_txt,""))},function(t,e){t(e,4,0,e.context.$implicit.properties.bezeichnung&&e.context.$implicit.properties.bezeichnung.length>15?r["\u0275unv"](e,4,0,r["\u0275nov"](e,5).transform(e.context.$implicit.properties.bezeichnung,0,15))+"..":e.context.$implicit.properties.bezeichnung,r["\u0275unv"](e,4,1,t(e,6,0,r["\u0275nov"](e.parent,0),1e3*e.context.$implicit.properties.distanceFromUser,"1.0-0"))),t(e,12,0,e.context.$implicit.properties.wasserart_txt),t(e,13,0,e.context.$implicit.properties.historisches_baujahr)})}function Rl(t){return r["\u0275vid"](0,[r["\u0275pid"](0,tt,[r.LOCALE_ID]),(t()(),r["\u0275eld"](1,0,null,null,22,"div",[["class","list-holder"]],null,[[null,"mouseleave"]],function(t,e,n){var r=!0;return"mouseleave"===e&&(r=!1!==t.component.highlightFountain(null)&&r),r},null,null)),(t()(),r["\u0275ted"](-1,null,["\n    "])),(t()(),r["\u0275and"](16777216,null,null,2,null,Ml)),r["\u0275did"](4,802816,null,0,D,[r.ViewContainerRef,r.TemplateRef,r.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),r["\u0275pid"](0,et,[]),(t()(),r["\u0275ted"](-1,null,["\n    "])),(t()(),r["\u0275eld"](7,0,null,null,12,"mat-card",[["class","fountain-list-element mat-card"],["disableRipple","false"],["style","list-style: none;"]],null,null,null,Tl,Il)),r["\u0275did"](8,49152,null,0,hs,[],null,null),(t()(),r["\u0275ted"](-1,0,["\n      "])),(t()(),r["\u0275eld"](10,0,null,0,1,"h4",[],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,["Missing fountain?"])),(t()(),r["\u0275ted"](-1,0,["\n      "])),(t()(),r["\u0275eld"](13,0,null,0,5,"p",[],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,["\n        "])),(t()(),r["\u0275eld"](15,0,null,null,2,"button",[["class","close-fountain"],["color","basic"],["mat-raised-button",""]],[[8,"disabled",0]],null,null,Qi,Ji)),r["\u0275did"](16,180224,null,0,Wi,[r.ElementRef,ot,on],{color:[0,"color"]},null),(t()(),r["\u0275ted"](-1,0,["report missing fountain"])),(t()(),r["\u0275ted"](-1,null,["\n      "])),(t()(),r["\u0275ted"](-1,0,["\n    "])),(t()(),r["\u0275ted"](-1,null,["\n  "])),(t()(),r["\u0275eld"](21,0,null,null,1,"div",[["class","fountain-count"]],null,null,null,null,null)),(t()(),r["\u0275ted"](22,null,["\n    showing "," of "," fountains\n  "])),(t()(),r["\u0275ted"](-1,null,["\n"])),(t()(),r["\u0275ted"](-1,null,["\n\n"]))],function(t,e){var n=e.component;t(e,4,0,r["\u0275unv"](e,4,0,r["\u0275nov"](e,5).transform(n.fountains,0,10))),t(e,16,0,"basic")},function(t,e){var n=e.component;t(e,15,0,r["\u0275nov"](e,16).disabled||null),t(e,22,0,n.fountains.length>10?10:n.fountains.length,n.fountains.length)})}var Ll=function(){function t(t){this.ngRedux=t,this.title="This is the detail of fountain ",this.closeDetails=new r.EventEmitter}return t.prototype.closeDetailsEvent=function(){this.closeDetails.emit()},t.prototype.ngOnInit=function(){var t=this;this.mode.subscribe(function(e){"map"==e&&t.closeDetails.emit()})},Object(v.b)([Object(i.select)("fountainSelected"),Object(v.d)("design:type",Object)],t.prototype,"fountain",void 0),Object(v.b)([Object(i.select)(),Object(v.d)("design:type",Object)],t.prototype,"mode",void 0),t}(),Nl=r["\u0275crt"]({encapsulation:0,styles:[[".holder[_ngcontent-%COMP%]{background-color:#fff;padding:50px;bottom:0;top:0;width:100%}button.close-fountain[_ngcontent-%COMP%]{float:right}img.gsv[_ngcontent-%COMP%]{width:80%}"]],data:{}});function Dl(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,2,"p",[],null,null,null,null,null)),(t()(),r["\u0275ted"](1,null,["Bezeichnung: ",""])),r["\u0275pid"](131072,$,[r.ChangeDetectorRef])],null,function(t,e){var n=e.component;t(e,1,0,r["\u0275unv"](e,1,0,r["\u0275nov"](e,2).transform(n.fountain)).properties.bezeichnung)})}function Fl(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,25,"div",[["class","holder"]],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,["\n  "])),(t()(),r["\u0275eld"](2,0,null,null,2,"button",[["class","close-fountain"],["color","warn"],["mat-raised-button",""]],[[8,"disabled",0]],[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.closeDetailsEvent()&&r),r},Qi,Ji)),r["\u0275did"](3,180224,null,0,Wi,[r.ElementRef,ot,on],{color:[0,"color"]},null),(t()(),r["\u0275ted"](-1,0,["close"])),(t()(),r["\u0275ted"](-1,null,["\n  "])),(t()(),r["\u0275eld"](6,0,null,null,2,"h1",[],null,null,null,null,null)),(t()(),r["\u0275ted"](7,null,["",""])),r["\u0275pid"](131072,$,[r.ChangeDetectorRef]),(t()(),r["\u0275ted"](-1,null,["\n  "])),(t()(),r["\u0275eld"](10,0,null,null,2,"h2",[],null,null,null,null,null)),(t()(),r["\u0275ted"](11,null,["",""])),r["\u0275pid"](131072,$,[r.ChangeDetectorRef]),(t()(),r["\u0275ted"](-1,null,["\n  "])),(t()(),r["\u0275and"](16777216,null,null,2,null,Dl)),r["\u0275did"](15,16384,null,0,z,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null),r["\u0275pid"](131072,$,[r.ChangeDetectorRef]),(t()(),r["\u0275ted"](-1,null,["\n  "])),(t()(),r["\u0275eld"](18,0,null,null,2,"p",[],null,null,null,null,null)),(t()(),r["\u0275ted"](19,null,["Historisches Baujahr: ",""])),r["\u0275pid"](131072,$,[r.ChangeDetectorRef]),(t()(),r["\u0275ted"](-1,null,["\n\n\n\n  "])),(t()(),r["\u0275eld"](22,0,null,null,2,"img",[["class","gsv"]],[[8,"src",4]],null,null,null,null)),r["\u0275pid"](131072,$,[r.ChangeDetectorRef]),r["\u0275pid"](131072,$,[r.ChangeDetectorRef]),(t()(),r["\u0275ted"](-1,null,["\n\n"])),(t()(),r["\u0275ted"](-1,null,["\n\n"]))],function(t,e){var n=e.component;t(e,3,0,"warn"),t(e,15,0,r["\u0275unv"](e,15,0,r["\u0275nov"](e,16).transform(n.fountain)).properties.bezeichnung)},function(t,e){var n=e.component;t(e,2,0,r["\u0275nov"](e,3).disabled||null),t(e,7,0,r["\u0275unv"](e,7,0,r["\u0275nov"](e,8).transform(n.fountain)).properties.brunnenart_txt),t(e,11,0,r["\u0275unv"](e,11,0,r["\u0275nov"](e,12).transform(n.fountain)).properties.wasserart_txt),t(e,19,0,r["\u0275unv"](e,19,0,r["\u0275nov"](e,20).transform(n.fountain)).properties.historisches_baujahr),t(e,22,0,r["\u0275inlineInterpolate"](2,"https://maps.googleapis.com/maps/api/streetview?size=400x250&location=",r["\u0275unv"](e,22,0,r["\u0275nov"](e,23).transform(n.fountain)).geometry.coordinates[1],",",r["\u0275unv"](e,22,0,r["\u0275nov"](e,24).transform(n.fountain)).geometry.coordinates[0],"&fov=120&key=AIzaSyCITz2QveQZtY3INHqHcFiBQz0pJZnY3G0"))})}var zl=n("N/q0"),jl=function(){function t(t,e,n){this.dataService=t,this.mc=e,this.ngRedux=n,this.fountains=[]}return t.prototype.selectFountain=function(t){this.ngRedux.dispatch({type:a,payload:t})},t.prototype.setUserLocation=function(t){this.ngRedux.dispatch({type:h,payload:t})},t.prototype.highlightFountain=function(t){this.ngRedux.dispatch({type:s,payload:t})},t.prototype.deselectFountain=function(){this.ngRedux.dispatch({type:l})},t.prototype.zoomToFountain=function(t){this.map.flyTo({center:[t.geometry.coordinates[0],t.geometry.coordinates[1]],zoom:this.mc.map.maxZoom,pitch:55,bearing:40,maxDuration:2500})},t.prototype.zoomOut=function(){this.map.flyTo({zoom:this.mc.map.zoom,pitch:this.mc.map.pitch,bearing:0,maxDuration:2500})},t.prototype.initializeMap=function(){var t=this;zl.accessToken="pk.eyJ1Ijoid2F0ZXItZm91bnRhaW5zIiwiYSI6ImNqZGZ1cDR4bTA5OGcyeGxuamYzZnI2c20ifQ.aE2ji5z01HuLBGXNYraZYQ",this.map=new zl.Map(Object.assign(this.mc.map,{container:"map"})).on("load",function(){var e=t.dataService.fountainsAll;e&&t.loadData(e)}),this.highlightPopup=new zl.Popup({closeButton:!1,closeOnClick:!1,offset:10}),this.selectPopup=new zl.Popup({closeButton:!1,closeOnClick:!1,offset:10});var e=document.createElement("div");e.className="marker",e.style.backgroundImage="url(/assets/user_icon.png)",e.style.backgroundSize="cover",e.style.backgroundPosition="center",e.style.backgroundRepeat="no-repeat",e.style.width="30px",e.style.height="37px",this.userMarker=new zl.Marker(e).setLngLat(this.ngRedux.getState().userLocation).addTo(this.map)},t.prototype.resizeMap=function(){},t.prototype.ngOnInit=function(){var t=this;this.initializeMap(),this.mode.subscribe(function(e){switch(setTimeout(function(){return t.map.resize()},200),e){case"map":t.selectPopup.remove(),t.zoomOut()}}),this.dataService.fountainsLoadedSuccess.subscribe(function(e){t.map.isStyleLoaded()&&t.loadData(e)}),this.fountainSelected.subscribe(function(e){t.map.isStyleLoaded()&&(t.zoomToFountain(e),t.showSelectedPopupOnMap(e))}),this.dataService.fountainsFilteredSuccess.subscribe(function(e){t.map.isStyleLoaded()&&t.filterMappedFountains(e)}),this.fountainHighlighted.subscribe(function(e){t.map.isStyleLoaded()&&t.highlightFountainOnMap(e)}),this.userLocation.subscribe(function(e){t.userMarker.setLngLat(e),t.map.flyTo({center:e,maxDuration:1500})})},t.prototype.highlightFountainOnMap=function(t){var e=this;t?(this.highlightPopup.setLngLat(t.geometry.coordinates),this.highlightPopup.setHTML("<h3>"+t.properties.bezeichnung+"</h3>"),this.highlightPopup.addTo(this.map)):setTimeout(function(){e.highlightPopup.remove()},100)},t.prototype.showSelectedPopupOnMap=function(t){t?(this.selectPopup.setLngLat(t.geometry.coordinates),this.selectPopup.setHTML("<h3>"+t.properties.bezeichnung+"</h3><p>~"+(1e3*t.properties.distanceFromUser).toLocaleString()+'m away <br><span class=" water-type '+t.properties.wasserart_txt+'">'+t.properties.wasserart_txt+"</span><br/>Baujahr: "+t.properties.historisches_baujahr+"</p>"),this.selectPopup.addTo(this.map)):this.selectPopup.remove()},t.prototype.filterMappedFountains=function(t){this.map.setFilter("fountains",["match",["get","nummer"],t.map(function(t){return t.properties.nummer}),!0,!1]),this.highlightFountainOnMap(t[0])},t.prototype.loadData=function(t){var e=this;this.map.addSource("fountains-src",{type:"geojson",data:t}),this.map.addLayer({id:"fountains",type:"circle",source:"fountains-src",paint:{"circle-radius":["interpolate",["linear"],["zoom"],12,2,16,10,18,60],"circle-pitch-alignment":"map","circle-opacity":["interpolate",["linear"],["zoom"],16,1,18,.6],"circle-color":["match",["get","wasserart_txt"],"Quellwasser","#017eac","Verteilnetz","#014b62","#1b1b1b"],"circle-stroke-color":"white","circle-stroke-width":1}}),this.map.addLayer({id:"fountain-icons",source:"fountains-src",type:"symbol",layout:{"icon-image":"drinking-water-15","icon-padding":0,"icon-allow-overlap":!0},paint:{"icon-opacity":["interpolate",["linear"],["zoom"],16,0,17,1]}}),this.map.on("click","fountains",function(t){e.selectFountain(t.features[0]),t.originalEvent.stopPropagation()}),this.map.on("mouseenter","fountains",function(t){e.highlightFountain(t.features[0])}),this.map.on("mouseleave","fountains",function(){e.highlightFountain(null)}),this.map.on("mouseenter","fountains",function(){e.map.getCanvas().style.cursor="pointer"}),this.map.on("mouseleave","fountains",function(){e.map.getCanvas().style.cursor=""}),this.map.on("dblclick",function(t){e.setUserLocation([t.lngLat.lng,t.lngLat.lat])}),this.map.on("click",function(){e.map.isMoving()||e.deselectFountain()})},Object(v.b)([Object(i.select)(),Object(v.d)("design:type",Object)],t.prototype,"showList",void 0),Object(v.b)([Object(i.select)(),Object(v.d)("design:type",Object)],t.prototype,"mode",void 0),Object(v.b)([Object(i.select)(),Object(v.d)("design:type",Object)],t.prototype,"fountainId",void 0),Object(v.b)([Object(i.select)(),Object(v.d)("design:type",Object)],t.prototype,"fountainSelected",void 0),Object(v.b)([Object(i.select)(),Object(v.d)("design:type",Object)],t.prototype,"fountainHighlighted",void 0),Object(v.b)([Object(i.select)(),Object(v.d)("design:type",Object)],t.prototype,"userLocation",void 0),t}(),Bl=function(){return function(){this.map={zoom:15,pitch:0,center:[8.5417,47.3769],minZoom:12,maxZoom:18,style:"mapbox://styles/water-fountains/cjdfuslg5ftqo2squxk76q8pl",hash:!1,pitchWithRotate:!0},this.fountainMarker={iconUrl:"../../assets/fountainIcon.png",iconSize:new zl.Point(8,24),iconAnchor:new zl.Point(4,24),shadowUrl:"../../assets/fountainIconShadow.png",shadowSize:new zl.Point(21,29),shadowAnchor:new zl.Point(9,22)}}}(),Vl=r["\u0275crt"]({encapsulation:0,styles:[["#map[_ngcontent-%COMP%]{height:100%;width:100%}"]],data:{}});function ql(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,0,"div",[["id","map"]],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,["\n"]))],null,null)}var Ul=r["\u0275crt"]({encapsulation:0,styles:[['.app-holder[_ngcontent-%COMP%]{display:-ms-grid;display:grid;grid-template-areas:"top" "map-details";-ms-grid-columns:100%;grid-template-columns:100%;-ms-grid-rows:auto 1fr;grid-template-rows:auto 1fr;grid-gap:0;height:100vh}app-navbar[_ngcontent-%COMP%]{-ms-grid-row:1;-ms-grid-column:1;grid-area:top}mat-sidenav-container[_ngcontent-%COMP%]{-ms-grid-row:2;-ms-grid-column:1;grid-area:map-details;height:100%;width:100%}.list-holder[_ngcontent-%COMP%]{width:300px;display:-ms-grid;display:grid;grid-template:"filter" "list";-ms-grid-rows:auto 1fr;grid-template-rows:auto 1fr;grid-gap:0;min-height:0}app-list[_ngcontent-%COMP%]{grid-area:list;overflow-y:auto}app-filter[_ngcontent-%COMP%]{grid-area:filter}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\napp-fountain-toolbar[_ngcontent-%COMP%]{padding:30px;right:0;bottom:0;position:absolute;z-index:2}']],data:{}});function Gl(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,1,"app-fountain-toolbar",[],null,[[null,"detailsToggle"]],function(t,e,n){var i=!0;return"detailsToggle"===e&&(i=!1!==r["\u0275nov"](t.parent,51).toggle()&&i),i},mu,du)),r["\u0275did"](1,114688,null,0,pu,[Bi,fu.NgRedux],null,{detailsToggle:"detailsToggle"})],function(t,e){t(e,1,0)},null)}function Xl(t){return r["\u0275vid"](0,[r["\u0275qud"](402653184,1,{listDrawer:0}),r["\u0275qud"](402653184,2,{detailsDrawer:0}),r["\u0275qud"](402653184,3,{map:0}),(t()(),r["\u0275eld"](3,0,null,null,70,"mat-sidenav-container",[["class","mat-drawer-container mat-sidenav-container"]],null,null,null,wu,bu)),r["\u0275did"](4,1490944,null,2,au,[[2,Bt],r.ElementRef,r.NgZone,r.ChangeDetectorRef,tu],null,null),r["\u0275qud"](603979776,4,{_drawers:1}),r["\u0275qud"](335544320,5,{_content:0}),(t()(),r["\u0275ted"](-1,2,["\n  "])),(t()(),r["\u0275eld"](8,0,null,0,5,"mat-sidenav",[["class","mat-drawer mat-sidenav"],["fixedInViewport","true"],["mode","over"],["position","end"],["tabIndex","-1"]],[[40,"@transform",0],[1,"align",0],[2,"mat-drawer-end",null],[2,"mat-drawer-over",null],[2,"mat-drawer-push",null],[2,"mat-drawer-side",null],[2,"mat-sidenav-fixed",null],[4,"top","px"],[4,"bottom","px"]],[["component","@transform.start"],["component","@transform.done"],[null,"keydown"]],function(t,e,n){var i=!0;return"component:@transform.start"===e&&(i=!1!==r["\u0275nov"](t,9)._onAnimationStart(n)&&i),"component:@transform.done"===e&&(i=!1!==r["\u0275nov"](t,9)._onAnimationEnd(n)&&i),"keydown"===e&&(i=!1!==r["\u0275nov"](t,9).handleKeydown(n)&&i),i},_u,vu)),r["\u0275did"](9,3325952,[[4,4],["appMenuMobile",4]],0,ou,[r.ElementRef,Xe,on,ot,[2,rt]],{position:[0,"position"],mode:[1,"mode"],fixedInViewport:[2,"fixedInViewport"]},null),(t()(),r["\u0275ted"](-1,0,["\n    "])),(t()(),r["\u0275eld"](11,0,null,0,1,"app-mobile-menu",[],null,[[null,"menuToggle"]],function(t,e,n){var i=!0;return"menuToggle"===e&&(i=!1!==r["\u0275nov"](t,9).toggle()&&i),i},Ku,Wu)),r["\u0275did"](12,114688,null,0,Zu,[],null,{menuToggle:"menuToggle"}),(t()(),r["\u0275ted"](-1,0,["\n  "])),(t()(),r["\u0275ted"](-1,2,["\n  "])),(t()(),r["\u0275eld"](15,0,null,1,57,"mat-sidenav-content",[["class","mat-drawer-content mat-sidenav-content"]],[[4,"margin-left","px"],[4,"margin-right","px"]],null,null,yu,gu)),r["\u0275did"](16,1097728,[[5,4]],0,iu,[r.ChangeDetectorRef,au],null,null),(t()(),r["\u0275ted"](-1,0,["\n    "])),(t()(),r["\u0275eld"](18,0,null,0,53,"div",[["class","app-holder"]],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,["\n      "])),(t()(),r["\u0275ted"](-1,null,["\n      "])),(t()(),r["\u0275eld"](21,0,null,null,1,"app-navbar",[],null,[[null,"menuToggle"]],function(t,e,n){var i=!0;return"menuToggle"===e&&(i=!1!==r["\u0275nov"](t,9).toggle()&&i),i},cl,ol)),r["\u0275did"](22,114688,null,0,il,[r.ChangeDetectorRef,Js,fu.NgRedux],null,{menuToggle:"menuToggle"}),(t()(),r["\u0275ted"](-1,null,["\n      "])),(t()(),r["\u0275ted"](-1,null,["\n      "])),(t()(),r["\u0275eld"](25,0,null,null,45,"mat-sidenav-container",[["class","mat-drawer-container mat-sidenav-container"]],null,[[null,"backdropClick"]],function(t,e,n){var r=!0;return"backdropClick"===e&&(r=!1!==t.component.closeList()&&r),r},wu,bu)),r["\u0275did"](26,1490944,null,2,au,[[2,Bt],r.ElementRef,r.NgZone,r.ChangeDetectorRef,tu],null,{backdropClick:"backdropClick"}),r["\u0275qud"](603979776,6,{_drawers:1}),r["\u0275qud"](335544320,7,{_content:0}),(t()(),r["\u0275ted"](-1,2,["\n        "])),(t()(),r["\u0275ted"](-1,2,["\n        "])),(t()(),r["\u0275eld"](31,0,null,0,8,"mat-sidenav",[["class","list-holder list-mobile mat-drawer mat-sidenav"],["disableClose","true"],["opened","false"],["position","start"],["tabIndex","-1"]],[[40,"@transform",0],[1,"align",0],[2,"mat-drawer-end",null],[2,"mat-drawer-over",null],[2,"mat-drawer-push",null],[2,"mat-drawer-side",null],[2,"mat-sidenav-fixed",null],[4,"top","px"],[4,"bottom","px"]],[["component","@transform.start"],["component","@transform.done"],[null,"keydown"]],function(t,e,n){var i=!0;return"component:@transform.start"===e&&(i=!1!==r["\u0275nov"](t,32)._onAnimationStart(n)&&i),"component:@transform.done"===e&&(i=!1!==r["\u0275nov"](t,32)._onAnimationEnd(n)&&i),"keydown"===e&&(i=!1!==r["\u0275nov"](t,32).handleKeydown(n)&&i),i},_u,vu)),r["\u0275did"](32,3325952,[[6,4],[1,4],["listDrawer",4]],0,ou,[r.ElementRef,Xe,on,ot,[2,rt]],{position:[0,"position"],mode:[1,"mode"],disableClose:[2,"disableClose"],opened:[3,"opened"]},null),(t()(),r["\u0275ted"](-1,0,["\n          "])),(t()(),r["\u0275eld"](34,0,null,0,1,"app-filter",[],null,null,null,Sl,wl)),r["\u0275did"](35,114688,null,0,xl,[fu.NgRedux],null,null),(t()(),r["\u0275ted"](-1,0,["\n          "])),(t()(),r["\u0275eld"](37,0,null,0,1,"app-list",[],null,null,null,Rl,Al)),r["\u0275did"](38,114688,null,0,Pl,[Ol,fu.NgRedux],null,null),(t()(),r["\u0275ted"](-1,0,["\n        "])),(t()(),r["\u0275ted"](-1,2,["\n        "])),(t()(),r["\u0275ted"](-1,2,["\n        "])),(t()(),r["\u0275eld"](42,0,null,1,27,"mat-sidenav-content",[["class","mat-drawer-content mat-sidenav-content"]],[[4,"margin-left","px"],[4,"margin-right","px"]],null,null,yu,gu)),r["\u0275did"](43,1097728,[[7,4],[5,4]],0,iu,[r.ChangeDetectorRef,au],null,null),(t()(),r["\u0275ted"](-1,0,["\n          "])),(t()(),r["\u0275eld"](45,0,null,0,23,"mat-sidenav-container",[["class","map-and-details mat-drawer-container mat-sidenav-container"]],null,null,null,wu,bu)),r["\u0275did"](46,1490944,null,2,au,[[2,Bt],r.ElementRef,r.NgZone,r.ChangeDetectorRef,tu],null,null),r["\u0275qud"](603979776,8,{_drawers:1}),r["\u0275qud"](335544320,9,{_content:0}),(t()(),r["\u0275ted"](-1,2,["\n            "])),(t()(),r["\u0275eld"](50,0,null,0,5,"mat-sidenav",[["class","mat-drawer mat-sidenav"],["disableClose","true"],["opened","false"],["position","start"],["tabIndex","-1"]],[[40,"@transform",0],[1,"align",0],[2,"mat-drawer-end",null],[2,"mat-drawer-over",null],[2,"mat-drawer-push",null],[2,"mat-drawer-side",null],[2,"mat-sidenav-fixed",null],[4,"top","px"],[4,"bottom","px"]],[["component","@transform.start"],["component","@transform.done"],[null,"keydown"]],function(t,e,n){var i=!0;return"component:@transform.start"===e&&(i=!1!==r["\u0275nov"](t,51)._onAnimationStart(n)&&i),"component:@transform.done"===e&&(i=!1!==r["\u0275nov"](t,51)._onAnimationEnd(n)&&i),"keydown"===e&&(i=!1!==r["\u0275nov"](t,51).handleKeydown(n)&&i),i},_u,vu)),r["\u0275did"](51,3325952,[[8,4],[2,4],["detailsDrawer",4]],0,ou,[r.ElementRef,Xe,on,ot,[2,rt]],{position:[0,"position"],mode:[1,"mode"],disableClose:[2,"disableClose"],opened:[3,"opened"]},null),(t()(),r["\u0275ted"](-1,0,["\n              "])),(t()(),r["\u0275eld"](53,0,null,0,1,"app-detail",[],null,[[null,"closeDetails"]],function(t,e,n){var i=!0;return"closeDetails"===e&&(i=!1!==r["\u0275nov"](t,51).close()&&i),i},Fl,Nl)),r["\u0275did"](54,114688,null,0,Ll,[fu.NgRedux],null,{closeDetails:"closeDetails"}),(t()(),r["\u0275ted"](-1,0,["\n            "])),(t()(),r["\u0275ted"](-1,2,["\n            "])),(t()(),r["\u0275eld"](57,0,null,1,10,"mat-sidenav-content",[["class","mat-drawer-content mat-sidenav-content"]],[[4,"margin-left","px"],[4,"margin-right","px"]],null,null,yu,gu)),r["\u0275did"](58,1097728,[[9,4],[7,4],[5,4]],0,iu,[r.ChangeDetectorRef,au],null,null),(t()(),r["\u0275ted"](-1,0,["\n              "])),(t()(),r["\u0275eld"](60,0,null,0,2,"app-map",[],null,null,null,ql,Vl)),r["\u0275did"](61,114688,[[3,4],["map",4]],0,jl,[Ol,Bl,fu.NgRedux],null,null),(t()(),r["\u0275ted"](-1,null,["\n              "])),(t()(),r["\u0275ted"](-1,0,["\n              "])),(t()(),r["\u0275and"](16777216,null,0,2,null,Gl)),r["\u0275did"](65,16384,null,0,z,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null),r["\u0275pid"](131072,$,[r.ChangeDetectorRef]),(t()(),r["\u0275ted"](-1,0,["\n            "])),(t()(),r["\u0275ted"](-1,2,["\n\n          "])),(t()(),r["\u0275ted"](-1,0,["\n        "])),(t()(),r["\u0275ted"](-1,2,["\n\n      "])),(t()(),r["\u0275ted"](-1,null,["\n    "])),(t()(),r["\u0275ted"](-1,0,["\n  "])),(t()(),r["\u0275ted"](-1,2,["\n"])),(t()(),r["\u0275ted"](-1,null,["\n"]))],function(t,e){var n=e.component;t(e,4,0),t(e,9,0,"end","over","true"),t(e,12,0),t(e,22,0),t(e,26,0),t(e,32,0,"start",n.mobileQuery.matches?"over":"side","true","false"),t(e,35,0),t(e,38,0),t(e,46,0),t(e,51,0,"start",n.mobileQuery.matches?"over":"side","true","false"),t(e,54,0),t(e,61,0),t(e,65,0,"details"==r["\u0275unv"](e,65,0,r["\u0275nov"](e,66).transform(n.mode)))},function(t,e){t(e,8,0,r["\u0275nov"](e,9)._animationState,null,"end"===r["\u0275nov"](e,9).position,"over"===r["\u0275nov"](e,9).mode,"push"===r["\u0275nov"](e,9).mode,"side"===r["\u0275nov"](e,9).mode,r["\u0275nov"](e,9).fixedInViewport,r["\u0275nov"](e,9).fixedInViewport?r["\u0275nov"](e,9).fixedTopGap:null,r["\u0275nov"](e,9).fixedInViewport?r["\u0275nov"](e,9).fixedBottomGap:null),t(e,15,0,r["\u0275nov"](e,16)._margins.left,r["\u0275nov"](e,16)._margins.right),t(e,31,0,r["\u0275nov"](e,32)._animationState,null,"end"===r["\u0275nov"](e,32).position,"over"===r["\u0275nov"](e,32).mode,"push"===r["\u0275nov"](e,32).mode,"side"===r["\u0275nov"](e,32).mode,r["\u0275nov"](e,32).fixedInViewport,r["\u0275nov"](e,32).fixedInViewport?r["\u0275nov"](e,32).fixedTopGap:null,r["\u0275nov"](e,32).fixedInViewport?r["\u0275nov"](e,32).fixedBottomGap:null),t(e,42,0,r["\u0275nov"](e,43)._margins.left,r["\u0275nov"](e,43)._margins.right),t(e,50,0,r["\u0275nov"](e,51)._animationState,null,"end"===r["\u0275nov"](e,51).position,"over"===r["\u0275nov"](e,51).mode,"push"===r["\u0275nov"](e,51).mode,"side"===r["\u0275nov"](e,51).mode,r["\u0275nov"](e,51).fixedInViewport,r["\u0275nov"](e,51).fixedInViewport?r["\u0275nov"](e,51).fixedTopGap:null,r["\u0275nov"](e,51).fixedInViewport?r["\u0275nov"](e,51).fixedBottomGap:null),t(e,57,0,r["\u0275nov"](e,58)._margins.left,r["\u0275nov"](e,58)._margins.right)})}var Hl=r["\u0275ccf"]("app-root",_,function(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,1,"app-root",[],null,null,null,Xl,Ul)),r["\u0275did"](1,245760,null,0,_,[r.ChangeDetectorRef,Js,fu.NgRedux],null,null)],function(t,e){t(e,1,0)},null)},{},{},[]);function Yl(t){switch(t.length){case 0:return new Oi;case 1:return t[0];default:return new Pi(t)}}function Zl(t,e,n,r,i,o){void 0===i&&(i={}),void 0===o&&(o={});var a=[],s=[],u=-1,l=null;if(r.forEach(function(t){var n=t.offset,r=n==u,c=r&&l||{};Object.keys(t).forEach(function(n){var r=n,s=t[n];if("offset"!==n)switch(r=e.normalizePropertyName(r,a),s){case Ai:s=i[n];break;case Si:s=o[n];break;default:s=e.normalizeStyleValue(n,r,s,a)}c[r]=s}),r||s.push(c),l=c,u=n}),a.length)throw new Error("Unable to animate due to the following errors:\n - "+a.join("\n - "));return s}function Wl(t,e,n,r){switch(e){case"start":t.onStart(function(){return r(n&&Kl(n,"start",t.totalTime))});break;case"done":t.onDone(function(){return r(n&&Kl(n,"done",t.totalTime))});break;case"destroy":t.onDestroy(function(){return r(n&&Kl(n,"destroy",t.totalTime))})}}function Kl(t,e,n){var r=Jl(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,void 0==n?t.totalTime:n),i=t._data;return null!=i&&(r._data=i),r}function Jl(t,e,n,r,i,o){return void 0===i&&(i=""),void 0===o&&(o=0),{element:t,triggerName:e,fromState:n,toState:r,phaseName:i,totalTime:o}}function Ql(t,e,n){var r;return t instanceof Map?(r=t.get(e))||t.set(e,r=n):(r=t[e])||(r=t[e]=n),r}function $l(t){var e=t.indexOf(":");return[t.substring(1,e),t.substr(e+1)]}var tc=function(t,e){return!1},ec=function(t,e){return!1},nc=function(t,e,n){return[]};if("undefined"!=typeof Element){if(tc=function(t,e){return t.contains(e)},Element.prototype.matches)ec=function(t,e){return t.matches(e)};else{var rc=Element.prototype,ic=rc.matchesSelector||rc.mozMatchesSelector||rc.msMatchesSelector||rc.oMatchesSelector||rc.webkitMatchesSelector;ic&&(ec=function(t,e){return ic.apply(t,[e])})}nc=function(t,e,n){var r=[];if(n)r.push.apply(r,t.querySelectorAll(e));else{var i=t.querySelector(e);i&&r.push(i)}return r}}var oc=null,ac=!1;function sc(t){oc||(oc=uc()||{},ac=!!oc.style&&"WebkitAppearance"in oc.style);var e=!0;return oc.style&&!function(t){return"ebkit"==t.substring(1,6)}(t)&&!(e=t in oc.style)&&ac&&(e="Webkit"+t.charAt(0).toUpperCase()+t.substr(1)in oc.style),e}function uc(){return"undefined"!=typeof document?document.body:null}var lc=ec,cc=tc,hc=nc,pc=function(){function t(){}return t.prototype.validateStyleProperty=function(t){return sc(t)},t.prototype.matchesElement=function(t,e){return lc(t,e)},t.prototype.containsElement=function(t,e){return cc(t,e)},t.prototype.query=function(t,e,n){return hc(t,e,n)},t.prototype.computeStyle=function(t,e,n){return n||""},t.prototype.animate=function(t,e,n,r,i,o){return void 0===o&&(o=[]),new Oi},t}(),fc=function(){function t(){}return t.NOOP=new pc,t}(),dc=1e3;function mc(t){if("number"==typeof t)return t;var e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:gc(parseFloat(e[1]),e[2])}function gc(t,e){switch(e){case"s":return t*dc;default:return t}}function yc(t,e,n){return t.hasOwnProperty("duration")?t:function(t,e,n){var r,i=0,o="";if("string"==typeof t){var a=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push('The provided timing value "'+t+'" is invalid.'),{duration:0,delay:0,easing:""};r=gc(parseFloat(a[1]),a[2]);var s=a[3];null!=s&&(i=gc(Math.floor(parseFloat(s)),a[4]));var u=a[5];u&&(o=u)}else r=t;if(!n){var l=!1,c=e.length;r<0&&(e.push("Duration values below 0 are not allowed for this animation step."),l=!0),i<0&&(e.push("Delay values below 0 are not allowed for this animation step."),l=!0),l&&e.splice(c,0,'The provided timing value "'+t+'" is invalid.')}return{duration:r,delay:i,easing:o}}(t,e,n)}function vc(t,e){return void 0===e&&(e={}),Object.keys(t).forEach(function(n){e[n]=t[n]}),e}function _c(t,e,n){if(void 0===n&&(n={}),e)for(var r in t)n[r]=t[r];else vc(t,n);return n}function bc(t,e){t.style&&Object.keys(e).forEach(function(n){var r=kc(n);t.style[r]=e[n]})}function xc(t,e){t.style&&Object.keys(e).forEach(function(e){var n=kc(e);t.style[n]=""})}function wc(t){return Array.isArray(t)?1==t.length?t[0]:Ii(t):t}var Ec=new RegExp("{{\\s*(.+?)\\s*}}","g");function Cc(t){var e=[];if("string"==typeof t){for(var n=t.toString(),r=void 0;r=Ec.exec(n);)e.push(r[1]);Ec.lastIndex=0}return e}function Sc(t,e,n){var r=t.toString(),i=r.replace(Ec,function(t,r){var i=e[r];return e.hasOwnProperty(r)||(n.push("Please provide a value for the animation param "+r),i=""),i.toString()});return i==r?t:i}function Ic(t){for(var e=[],n=t.next();!n.done;)e.push(n.value),n=t.next();return e}var Tc=/-+([a-z0-9])/g;function kc(t){return t.replace(Tc,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t[1].toUpperCase()})}function Oc(t,e,n){switch(e.type){case 7:return t.visitTrigger(e,n);case 0:return t.visitState(e,n);case 1:return t.visitTransition(e,n);case 2:return t.visitSequence(e,n);case 3:return t.visitGroup(e,n);case 4:return t.visitAnimate(e,n);case 5:return t.visitKeyframes(e,n);case 6:return t.visitStyle(e,n);case 8:return t.visitReference(e,n);case 9:return t.visitAnimateChild(e,n);case 10:return t.visitAnimateRef(e,n);case 11:return t.visitQuery(e,n);case 12:return t.visitStagger(e,n);default:throw new Error("Unable to resolve animation metadata node #"+e.type)}}var Pc="*",Ac=new Set(["true","1"]),Mc=new Set(["false","0"]);function Rc(t,e){var n=Ac.has(t)||Mc.has(t),r=Ac.has(e)||Mc.has(e);return function(i,o){var a=t==Pc||t==i,s=e==Pc||e==o;return!a&&n&&"boolean"==typeof i&&(a=i?Ac.has(t):Mc.has(t)),!s&&r&&"boolean"==typeof o&&(s=o?Ac.has(e):Mc.has(e)),a&&s}}var Lc=new RegExp("s*:selfs*,?","g");function Nc(t,e,n){return new Dc(t).build(e,n)}var Dc=function(){function t(t){this._driver=t}return t.prototype.build=function(t,e){var n=new Fc(e);return this._resetContextStyleTimingState(n),Oc(this,wc(t),n)},t.prototype._resetContextStyleTimingState=function(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0},t.prototype.visitTrigger=function(t,e){var n=this,r=e.queryCount=0,i=e.depCount=0,o=[],a=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(function(t){if(n._resetContextStyleTimingState(e),0==t.type){var s=t,u=s.name;u.split(/\s*,\s*/).forEach(function(t){s.name=t,o.push(n.visitState(s,e))}),s.name=u}else if(1==t.type){var l=n.visitTransition(t,e);r+=l.queryCount,i+=l.depCount,a.push(l)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:o,transitions:a,queryCount:r,depCount:i,options:null}},t.prototype.visitState=function(t,e){var n=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(n.containsDynamicStyles){var i=new Set,o=r||{};if(n.styles.forEach(function(t){if(zc(t)){var e=t;Object.keys(e).forEach(function(t){Cc(e[t]).forEach(function(t){o.hasOwnProperty(t)||i.add(t)})})}}),i.size){var a=Ic(i.values());e.errors.push('state("'+t.name+'", ...) must define default values for all the following style substitutions: '+a.join(", "))}}return{type:0,name:t.name,style:n,options:r?{params:r}:null}},t.prototype.visitTransition=function(t,e){e.queryCount=0,e.depCount=0;var n,r,i,o=Oc(this,wc(t.animation),e);return{type:1,matchers:(n=t.expr,r=e.errors,i=[],"string"==typeof n?n.split(/\s*,\s*/).forEach(function(t){return function(t,e,n){if(":"==t[0]){var r=function(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return function(t,e){return parseFloat(e)>parseFloat(t)};case":decrement":return function(t,e){return parseFloat(e)<parseFloat(t)};default:return e.push('The transition alias value "'+t+'" is not supported'),"* => *"}}(t,n);if("function"==typeof r)return void e.push(r);t=r}var i=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return n.push('The provided transition expression "'+t+'" is not supported'),e;var o=i[1],a=i[2],s=i[3];e.push(Rc(o,s)),"<"!=a[0]||o==Pc&&s==Pc||e.push(Rc(s,o))}(t,i,r)}):i.push(n),i),animation:o,queryCount:e.queryCount,depCount:e.depCount,options:jc(t.options)}},t.prototype.visitSequence=function(t,e){var n=this;return{type:2,steps:t.steps.map(function(t){return Oc(n,t,e)}),options:jc(t.options)}},t.prototype.visitGroup=function(t,e){var n=this,r=e.currentTime,i=0,o=t.steps.map(function(t){e.currentTime=r;var o=Oc(n,t,e);return i=Math.max(i,e.currentTime),o});return e.currentTime=i,{type:3,steps:o,options:jc(t.options)}},t.prototype.visitAnimate=function(t,e){var n,r=function(t,e){var n=null;if(t.hasOwnProperty("duration"))n=t;else if("number"==typeof t)return Bc(yc(t,e).duration,0,"");var r=t;if(r.split(/\s+/).some(function(t){return"{"==t.charAt(0)&&"{"==t.charAt(1)})){var i=Bc(0,0,"");return i.dynamic=!0,i.strValue=r,i}return Bc((n=n||yc(r,e)).duration,n.delay,n.easing)}(t.timings,e.errors);e.currentAnimateTimings=r;var i=t.styles?t.styles:Ti({});if(5==i.type)n=this.visitKeyframes(i,e);else{var o=t.styles,a=!1;if(!o){a=!0;var s={};r.easing&&(s.easing=r.easing),o=Ti(s)}e.currentTime+=r.duration+r.delay;var u=this.visitStyle(o,e);u.isEmptyStep=a,n=u}return e.currentAnimateTimings=null,{type:4,timings:r,style:n,options:null}},t.prototype.visitStyle=function(t,e){var n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n},t.prototype._makeStyleAst=function(t,e){var n=[];Array.isArray(t.styles)?t.styles.forEach(function(t){"string"==typeof t?t==Si?n.push(t):e.errors.push("The provided style string value "+t+" is not allowed."):n.push(t)}):n.push(t.styles);var r=!1,i=null;return n.forEach(function(t){if(zc(t)){var e=t,n=e.easing;if(n&&(i=n,delete e.easing),!r)for(var o in e)if(e[o].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:n,easing:i,offset:t.offset,containsDynamicStyles:r,options:null}},t.prototype._validateStyleAst=function(t,e){var n=this,r=e.currentAnimateTimings,i=e.currentTime,o=e.currentTime;r&&o>0&&(o-=r.duration+r.delay),t.styles.forEach(function(t){"string"!=typeof t&&Object.keys(t).forEach(function(r){if(n._driver.validateStyleProperty(r)){var a,s,u,l=e.collectedStyles[e.currentQuerySelector],c=l[r],h=!0;c&&(o!=i&&o>=c.startTime&&i<=c.endTime&&(e.errors.push('The CSS property "'+r+'" that exists between the times of "'+c.startTime+'ms" and "'+c.endTime+'ms" is also being animated in a parallel animation between the times of "'+o+'ms" and "'+i+'ms"'),h=!1),o=c.startTime),h&&(l[r]={startTime:o,endTime:i}),e.options&&(a=e.errors,s=e.options.params||{},(u=Cc(t[r])).length&&u.forEach(function(t){s.hasOwnProperty(t)||a.push("Unable to resolve the local animation param "+t+" in the given list of values")}))}else e.errors.push('The provided animation property "'+r+'" is not a supported CSS property for animations')})})},t.prototype.visitKeyframes=function(t,e){var n=this,r={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),r;var i=0,o=[],a=!1,s=!1,u=0,l=t.steps.map(function(t){var r=n._makeStyleAst(t,e),l=null!=r.offset?r.offset:function(t){if("string"==typeof t)return null;var e=null;if(Array.isArray(t))t.forEach(function(t){if(zc(t)&&t.hasOwnProperty("offset")){var n=t;e=parseFloat(n.offset),delete n.offset}});else if(zc(t)&&t.hasOwnProperty("offset")){var n=t;e=parseFloat(n.offset),delete n.offset}return e}(r.styles),c=0;return null!=l&&(i++,c=r.offset=l),s=s||c<0||c>1,a=a||c<u,u=c,o.push(c),r});s&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),a&&e.errors.push("Please ensure that all keyframe offsets are in order");var c=t.steps.length,h=0;i>0&&i<c?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==i&&(h=1/(c-1));var p=c-1,f=e.currentTime,d=e.currentAnimateTimings,m=d.duration;return l.forEach(function(t,i){var a=h>0?i==p?1:h*i:o[i],s=a*m;e.currentTime=f+d.delay+s,d.duration=s,n._validateStyleAst(t,e),t.offset=a,r.styles.push(t)}),r},t.prototype.visitReference=function(t,e){return{type:8,animation:Oc(this,wc(t.animation),e),options:jc(t.options)}},t.prototype.visitAnimateChild=function(t,e){return e.depCount++,{type:9,options:jc(t.options)}},t.prototype.visitAnimateRef=function(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:jc(t.options)}},t.prototype.visitQuery=function(t,e){var n=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;var i=function(t){var e=!!t.split(/\s*,\s*/).find(function(t){return":self"==t});return e&&(t=t.replace(Lc,"")),[t=t.replace(/@\*/g,".ng-trigger").replace(/@\w+/g,function(t){return".ng-trigger-"+t.substr(1)}).replace(/:animating/g,".ng-animating"),e]}(t.selector),o=i[0],a=i[1];e.currentQuerySelector=n.length?n+" "+o:o,Ql(e.collectedStyles,e.currentQuerySelector,{});var s=Oc(this,wc(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:o,limit:r.limit||0,optional:!!r.optional,includeSelf:a,animation:s,originalSelector:t.selector,options:jc(t.options)}},t.prototype.visitStagger=function(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");var n="full"===t.timings?{duration:0,delay:0,easing:"full"}:yc(t.timings,e.errors,!0);return{type:12,animation:Oc(this,wc(t.animation),e),timings:n,options:null}},t}(),Fc=function(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null};function zc(t){return!Array.isArray(t)&&"object"==typeof t}function jc(t){var e;return t?(t=vc(t)).params&&(t.params=(e=t.params)?vc(e):null):t={},t}function Bc(t,e,n){return{duration:t,delay:e,easing:n}}function Vc(t,e,n,r,i,o,a,s){return void 0===a&&(a=null),void 0===s&&(s=!1),{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:a,subTimeline:s}}var qc=function(){function t(){this._map=new Map}return t.prototype.consume=function(t){var e=this._map.get(t);return e?this._map.delete(t):e=[],e},t.prototype.append=function(t,e){var n=this._map.get(t);n||this._map.set(t,n=[]),n.push.apply(n,e)},t.prototype.has=function(t){return this._map.has(t)},t.prototype.clear=function(){this._map.clear()},t}(),Uc=new RegExp(":enter","g"),Gc=new RegExp(":leave","g");function Xc(t,e,n,r,i,o,a,s,u,l){return void 0===o&&(o={}),void 0===a&&(a={}),void 0===l&&(l=[]),(new Hc).buildKeyframes(t,e,n,r,i,o,a,s,u,l)}var Hc=function(){function t(){}return t.prototype.buildKeyframes=function(t,e,n,r,i,o,a,s,u,l){void 0===l&&(l=[]),u=u||new qc;var c=new Zc(t,e,u,r,i,l,[]);c.options=s,c.currentTimeline.setStyles([o],null,c.errors,s),Oc(this,n,c);var h=c.timelines.filter(function(t){return t.containsAnimation()});if(h.length&&Object.keys(a).length){var p=h[h.length-1];p.allowOnlyTimelineStyles()||p.setStyles([a],null,c.errors,s)}return h.length?h.map(function(t){return t.buildKeyframes()}):[Vc(e,[],[],[],0,0,"",!1)]},t.prototype.visitTrigger=function(t,e){},t.prototype.visitState=function(t,e){},t.prototype.visitTransition=function(t,e){},t.prototype.visitAnimateChild=function(t,e){var n=e.subInstructions.consume(e.element);if(n){var r=e.createSubContext(t.options),i=e.currentTimeline.currentTime,o=this._visitSubInstructions(n,r,r.options);i!=o&&e.transformIntoNewTimeline(o)}e.previousNode=t},t.prototype.visitAnimateRef=function(t,e){var n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t},t.prototype._visitSubInstructions=function(t,e,n){var r=e.currentTimeline.currentTime,i=null!=n.duration?mc(n.duration):null,o=null!=n.delay?mc(n.delay):null;return 0!==i&&t.forEach(function(t){var n=e.appendInstructionToTimeline(t,i,o);r=Math.max(r,n.duration+n.delay)}),r},t.prototype.visitReference=function(t,e){e.updateOptions(t.options,!0),Oc(this,t.animation,e),e.previousNode=t},t.prototype.visitSequence=function(t,e){var n=this,r=e.subContextCount,i=e,o=t.options;if(o&&(o.params||o.delay)&&((i=e.createSubContext(o)).transformIntoNewTimeline(),null!=o.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=Yc);var a=mc(o.delay);i.delayNextStep(a)}t.steps.length&&(t.steps.forEach(function(t){return Oc(n,t,i)}),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),e.previousNode=t},t.prototype.visitGroup=function(t,e){var n=this,r=[],i=e.currentTimeline.currentTime,o=t.options&&t.options.delay?mc(t.options.delay):0;t.steps.forEach(function(a){var s=e.createSubContext(t.options);o&&s.delayNextStep(o),Oc(n,a,s),i=Math.max(i,s.currentTimeline.currentTime),r.push(s.currentTimeline)}),r.forEach(function(t){return e.currentTimeline.mergeTimelineCollectedStyles(t)}),e.transformIntoNewTimeline(i),e.previousNode=t},t.prototype._visitTiming=function(t,e){if(t.dynamic){var n=t.strValue;return yc(e.params?Sc(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}},t.prototype.visitAnimate=function(t,e){var n=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),r.snapshotCurrentStyles());var i=t.style;5==i.type?this.visitKeyframes(i,e):(e.incrementTime(n.duration),this.visitStyle(i,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t},t.prototype.visitStyle=function(t,e){var n=e.currentTimeline,r=e.currentAnimateTimings;!r&&n.getCurrentStyleProperties().length&&n.forwardFrame();var i=r&&r.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(i):n.setStyles(t.styles,i,e.errors,e.options),e.previousNode=t},t.prototype.visitKeyframes=function(t,e){var n=e.currentAnimateTimings,r=e.currentTimeline.duration,i=n.duration,o=e.createSubContext().currentTimeline;o.easing=n.easing,t.styles.forEach(function(t){o.forwardTime((t.offset||0)*i),o.setStyles(t.styles,t.easing,e.errors,e.options),o.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(o),e.transformIntoNewTimeline(r+i),e.previousNode=t},t.prototype.visitQuery=function(t,e){var n=this,r=e.currentTimeline.currentTime,i=t.options||{},o=i.delay?mc(i.delay):0;o&&(6===e.previousNode.type||0==r&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=Yc);var a=r,s=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!i.optional,e.errors);e.currentQueryTotal=s.length;var u=null;s.forEach(function(r,i){e.currentQueryIndex=i;var s=e.createSubContext(t.options,r);o&&s.delayNextStep(o),r===e.element&&(u=s.currentTimeline),Oc(n,t.animation,s),s.currentTimeline.applyStylesToKeyframe(),a=Math.max(a,s.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(a),u&&(e.currentTimeline.mergeTimelineCollectedStyles(u),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t},t.prototype.visitStagger=function(t,e){var n=e.parentContext,r=e.currentTimeline,i=t.timings,o=Math.abs(i.duration),a=o*(e.currentQueryTotal-1),s=o*e.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":s=a-s;break;case"full":s=n.currentStaggerTime}var u=e.currentTimeline;s&&u.delayNextStep(s);var l=u.currentTime;Oc(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=r.currentTime-l+(r.startTime-n.currentTimeline.startTime)},t}(),Yc={},Zc=function(){function t(t,e,n,r,i,o,a,s){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=i,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Yc,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=s||new Wc(this._driver,e,0),a.push(this.currentTimeline)}return Object.defineProperty(t.prototype,"params",{get:function(){return this.options.params},enumerable:!0,configurable:!0}),t.prototype.updateOptions=function(t,e){var n=this;if(t){var r=t,i=this.options;null!=r.duration&&(i.duration=mc(r.duration)),null!=r.delay&&(i.delay=mc(r.delay));var o=r.params;if(o){var a=i.params;a||(a=this.options.params={}),Object.keys(o).forEach(function(t){e&&a.hasOwnProperty(t)||(a[t]=Sc(o[t],a,n.errors))})}}},t.prototype._copyOptions=function(){var t={};if(this.options){var e=this.options.params;if(e){var n=t.params={};Object.keys(e).forEach(function(t){n[t]=e[t]})}}return t},t.prototype.createSubContext=function(e,n,r){void 0===e&&(e=null);var i=n||this.element,o=new t(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o},t.prototype.transformIntoNewTimeline=function(t){return this.previousNode=Yc,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline},t.prototype.appendInstructionToTimeline=function(t,e,n){var r={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+t.delay,easing:""},i=new Kc(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(i),r},t.prototype.incrementTime=function(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)},t.prototype.delayNextStep=function(t){t>0&&this.currentTimeline.delayNextStep(t)},t.prototype.invokeQuery=function(t,e,n,r,i,o){var a=[];if(r&&a.push(this.element),t.length>0){t=(t=t.replace(Uc,"."+this._enterClassName)).replace(Gc,"."+this._leaveClassName);var s=this._driver.query(this.element,t,1!=n);0!==n&&(s=n<0?s.slice(s.length+n,s.length):s.slice(0,n)),a.push.apply(a,s)}return i||0!=a.length||o.push('`query("'+e+'")` returned zero elements. (Use `query("'+e+'", { optional: true })` if you wish to allow this.)'),a},t}(),Wc=function(){function t(t,e,n,r){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}return t.prototype.containsAnimation=function(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}},t.prototype.getCurrentStyleProperties=function(){return Object.keys(this._currentKeyframe)},Object.defineProperty(t.prototype,"currentTime",{get:function(){return this.startTime+this.duration},enumerable:!0,configurable:!0}),t.prototype.delayNextStep=function(t){var e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t},t.prototype.fork=function(e,n){return this.applyStylesToKeyframe(),new t(this._driver,e,n||this.currentTime,this._elementTimelineStylesLookup)},t.prototype._loadKeyframe=function(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))},t.prototype.forwardFrame=function(){this.duration+=1,this._loadKeyframe()},t.prototype.forwardTime=function(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()},t.prototype._updateStyle=function(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}},t.prototype.allowOnlyTimelineStyles=function(){return this._currentEmptyStepKeyframe!==this._currentKeyframe},t.prototype.applyEmptyStep=function(t){var e=this;t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(function(t){e._backFill[t]=e._globalTimelineStyles[t]||Si,e._currentKeyframe[t]=Si}),this._currentEmptyStepKeyframe=this._currentKeyframe},t.prototype.setStyles=function(t,e,n,r){var i=this;e&&(this._previousKeyframe.easing=e);var o=r&&r.params||{},a=function(t,e){var n,r={};return t.forEach(function(t){"*"===t?(n=n||Object.keys(e)).forEach(function(t){r[t]=Si}):_c(t,!1,r)}),r}(t,this._globalTimelineStyles);Object.keys(a).forEach(function(t){var e=Sc(a[t],o,n);i._pendingStyles[t]=e,i._localTimelineStyles.hasOwnProperty(t)||(i._backFill[t]=i._globalTimelineStyles.hasOwnProperty(t)?i._globalTimelineStyles[t]:Si),i._updateStyle(t,e)})},t.prototype.applyStylesToKeyframe=function(){var t=this,e=this._pendingStyles,n=Object.keys(e);0!=n.length&&(this._pendingStyles={},n.forEach(function(n){t._currentKeyframe[n]=e[n]}),Object.keys(this._localTimelineStyles).forEach(function(e){t._currentKeyframe.hasOwnProperty(e)||(t._currentKeyframe[e]=t._localTimelineStyles[e])}))},t.prototype.snapshotCurrentStyles=function(){var t=this;Object.keys(this._localTimelineStyles).forEach(function(e){var n=t._localTimelineStyles[e];t._pendingStyles[e]=n,t._updateStyle(e,n)})},t.prototype.getFinalKeyframe=function(){return this._keyframes.get(this.duration)},Object.defineProperty(t.prototype,"properties",{get:function(){var t=[];for(var e in this._currentKeyframe)t.push(e);return t},enumerable:!0,configurable:!0}),t.prototype.mergeTimelineCollectedStyles=function(t){var e=this;Object.keys(t._styleSummary).forEach(function(n){var r=e._styleSummary[n],i=t._styleSummary[n];(!r||i.time>r.time)&&e._updateStyle(n,i.value)})},t.prototype.buildKeyframes=function(){var t=this;this.applyStylesToKeyframe();var e=new Set,n=new Set,r=1===this._keyframes.size&&0===this.duration,i=[];this._keyframes.forEach(function(o,a){var s=_c(o,!0);Object.keys(s).forEach(function(t){var r=s[t];r==Ai?e.add(t):r==Si&&n.add(t)}),r||(s.offset=a/t.duration),i.push(s)});var o=e.size?Ic(e.values()):[],a=n.size?Ic(n.values()):[];if(r){var s=i[0],u=vc(s);s.offset=0,u.offset=1,i=[s,u]}return Vc(this.element,i,o,a,this.duration,this.startTime,this.easing,!1)},t}(),Kc=function(t){function e(e,n,r,i,o,a,s){void 0===s&&(s=!1);var u=t.call(this,e,n,a.delay)||this;return u.element=n,u.keyframes=r,u.preStyleProps=i,u.postStyleProps=o,u._stretchStartingKeyframe=s,u.timings={duration:a.duration,delay:a.delay,easing:a.easing},u}return Object(v.c)(e,t),e.prototype.containsAnimation=function(){return this.keyframes.length>1},e.prototype.buildKeyframes=function(){var t=this.keyframes,e=this.timings,n=e.delay,r=e.duration,i=e.easing;if(this._stretchStartingKeyframe&&n){var o=[],a=r+n,s=n/a,u=_c(t[0],!1);u.offset=0,o.push(u);var l=_c(t[0],!1);l.offset=Jc(s),o.push(l);for(var c=t.length-1,h=1;h<=c;h++){var p=_c(t[h],!1);p.offset=Jc((n+p.offset*r)/a),o.push(p)}r=a,n=0,i="",t=o}return Vc(this.element,t,this.preStyleProps,this.postStyleProps,r,n,i,!0)},e}(Wc);function Jc(t,e){void 0===e&&(e=3);var n=Math.pow(10,e-1);return Math.round(t*n)/n}var Qc=function(){},$c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(v.c)(e,t),e.prototype.normalizePropertyName=function(t,e){return kc(t)},e.prototype.normalizeStyleValue=function(t,e,n,r){var i="",o=n.toString().trim();if(th[e]&&0!==n&&"0"!==n)if("number"==typeof n)i="px";else{var a=n.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&r.push("Please provide a CSS unit value for "+t+":"+n)}return o+i},e}(Qc),th=function(t){var e={};return"width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",").forEach(function(t){return e[t]=!0}),e}();function eh(t,e,n,r,i,o,a,s,u,l,c,h){return{type:0,element:t,triggerName:e,isRemovalTransition:i,fromState:n,fromStyles:o,toState:r,toStyles:a,timelines:s,queriedElements:u,preStyleProps:l,postStyleProps:c,errors:h}}var nh={},rh=function(){function t(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}return t.prototype.match=function(t,e){return function(t,e,n){return t.some(function(t){return t(e,n)})}(this.ast.matchers,t,e)},t.prototype.buildStyles=function(t,e,n){var r=this._stateStyles["*"],i=this._stateStyles[t],o=r?r.buildStyles(e,n):{};return i?i.buildStyles(e,n):o},t.prototype.build=function(t,e,n,r,i,o,a,s,u){var l=[],c=this.ast.options&&this.ast.options.params||nh,h=this.buildStyles(n,a&&a.params||nh,l),p=s&&s.params||nh,f=this.buildStyles(r,p,l),d=new Set,m=new Map,g=new Map,y="void"===r,_={params:Object(v.a)({},c,p)},b=Xc(t,e,this.ast.animation,i,o,h,f,_,u,l);if(l.length)return eh(e,this._triggerName,n,r,y,h,f,[],[],m,g,l);b.forEach(function(t){var n=t.element,r=Ql(m,n,{});t.preStyleProps.forEach(function(t){return r[t]=!0});var i=Ql(g,n,{});t.postStyleProps.forEach(function(t){return i[t]=!0}),n!==e&&d.add(n)});var x=Ic(d.values());return eh(e,this._triggerName,n,r,y,h,f,b,x,m,g)},t}(),ih=function(){function t(t,e){this.styles=t,this.defaultParams=e}return t.prototype.buildStyles=function(t,e){var n={},r=vc(this.defaultParams);return Object.keys(t).forEach(function(e){var n=t[e];null!=n&&(r[e]=n)}),this.styles.styles.forEach(function(t){if("string"!=typeof t){var i=t;Object.keys(i).forEach(function(t){var o=i[t];o.length>1&&(o=Sc(o,r,e)),n[t]=o})}}),n},t}(),oh=function(){function t(t,e){var n=this;this.name=t,this.ast=e,this.transitionFactories=[],this.states={},e.states.forEach(function(t){n.states[t.name]=new ih(t.style,t.options&&t.options.params||{})}),ah(this.states,"true","1"),ah(this.states,"false","0"),e.transitions.forEach(function(e){n.transitionFactories.push(new rh(t,e,n.states))}),this.fallbackTransition=new rh(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[function(t,e){return!0}],options:null,queryCount:0,depCount:0},this.states)}return Object.defineProperty(t.prototype,"containsQueries",{get:function(){return this.ast.queryCount>0},enumerable:!0,configurable:!0}),t.prototype.matchTransition=function(t,e){return this.transitionFactories.find(function(n){return n.match(t,e)})||null},t.prototype.matchStyles=function(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)},t}();function ah(t,e,n){t.hasOwnProperty(e)?t.hasOwnProperty(n)||(t[n]=t[e]):t.hasOwnProperty(n)&&(t[e]=t[n])}var sh=new qc,uh=function(){function t(t,e){this._driver=t,this._normalizer=e,this._animations={},this._playersById={},this.players=[]}return t.prototype.register=function(t,e){var n=[],r=Nc(this._driver,e,n);if(n.length)throw new Error("Unable to build the animation due to the following errors: "+n.join("\n"));this._animations[t]=r},t.prototype._buildPlayer=function(t,e,n){var r=t.element,i=Zl(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(r,i,t.duration,t.delay,t.easing,[])},t.prototype.create=function(t,e,n){var r=this;void 0===n&&(n={});var i,o=[],a=this._animations[t],s=new Map;if(a?(i=Xc(this._driver,e,a,"ng-enter","ng-leave",{},{},n,sh,o)).forEach(function(t){var e=Ql(s,t.element,{});t.postStyleProps.forEach(function(t){return e[t]=null})}):(o.push("The requested animation doesn't exist or has already been destroyed"),i=[]),o.length)throw new Error("Unable to create the animation due to the following errors: "+o.join("\n"));s.forEach(function(t,e){Object.keys(t).forEach(function(n){t[n]=r._driver.computeStyle(e,n,Si)})});var u=Yl(i.map(function(t){var e=s.get(t.element);return r._buildPlayer(t,{},e)}));return this._playersById[t]=u,u.onDestroy(function(){return r.destroy(t)}),this.players.push(u),u},t.prototype.destroy=function(t){var e=this._getPlayer(t);e.destroy(),delete this._playersById[t];var n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)},t.prototype._getPlayer=function(t){var e=this._playersById[t];if(!e)throw new Error("Unable to find the timeline player referenced by "+t);return e},t.prototype.listen=function(t,e,n,r){var i=Jl(e,"","","");return Wl(this._getPlayer(t),n,i,r),function(){}},t.prototype.command=function(t,e,n,r){if("register"!=n)if("create"!=n){var i=this._getPlayer(t);switch(n){case"play":i.play();break;case"pause":i.pause();break;case"reset":i.reset();break;case"restart":i.restart();break;case"finish":i.finish();break;case"init":i.init();break;case"setPosition":i.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}else this.create(t,e,r[0]||{});else this.register(t,r[0])},t}(),lh=[],ch={namespaceId:"",setForRemoval:null,hasAnimation:!1,removedBeforeQueried:!1},hh={namespaceId:"",setForRemoval:null,hasAnimation:!1,removedBeforeQueried:!0},ph="__ng_removed",fh=function(){function t(t,e){void 0===e&&(e=""),this.namespaceId=e;var n=t&&t.hasOwnProperty("value");if(this.value=function(t){return null!=t?t:null}(n?t.value:t),n){var r=vc(t);delete r.value,this.options=r}else this.options={};this.options.params||(this.options.params={})}return Object.defineProperty(t.prototype,"params",{get:function(){return this.options.params},enumerable:!0,configurable:!0}),t.prototype.absorbOptions=function(t){var e=t.params;if(e){var n=this.options.params;Object.keys(e).forEach(function(t){null==n[t]&&(n[t]=e[t])})}},t}(),dh=new fh("void"),mh=new fh("DELETED"),gh=function(){function t(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,Ch(e,this._hostClassName)}return t.prototype.listen=function(t,e,n,r){var i,o=this;if(!this._triggers.hasOwnProperty(e))throw new Error('Unable to listen on the animation trigger event "'+n+'" because the animation trigger "'+e+"\" doesn't exist!");if(null==n||0==n.length)throw new Error('Unable to listen on the animation trigger "'+e+'" because the provided event is undefined!');if("start"!=(i=n)&&"done"!=i)throw new Error('The provided animation trigger event "'+n+'" for the animation trigger "'+e+'" is not supported!');var a=Ql(this._elementListeners,t,[]),s={name:e,phase:n,callback:r};a.push(s);var u=Ql(this._engine.statesByElement,t,{});return u.hasOwnProperty(e)||(Ch(t,"ng-trigger"),Ch(t,"ng-trigger-"+e),u[e]=dh),function(){o._engine.afterFlush(function(){var t=a.indexOf(s);t>=0&&a.splice(t,1),o._triggers[e]||delete u[e]})}},t.prototype.register=function(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)},t.prototype._getTrigger=function(t){var e=this._triggers[t];if(!e)throw new Error('The provided animation trigger "'+t+'" has not been registered!');return e},t.prototype.trigger=function(t,e,n,r){var i=this;void 0===r&&(r=!0);var o=this._getTrigger(e),a=new vh(this.id,e,t),s=this._engine.statesByElement.get(t);s||(Ch(t,"ng-trigger"),Ch(t,"ng-trigger-"+e),this._engine.statesByElement.set(t,s={}));var u=s[e],l=new fh(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&u&&l.absorbOptions(u.options),s[e]=l,u){if(u===mh)return a}else u=dh;if("void"===l.value||u.value!==l.value){var c=Ql(this._engine.playersByElement,t,[]);c.forEach(function(t){t.namespaceId==i.id&&t.triggerName==e&&t.queued&&t.destroy()});var h=o.matchTransition(u.value,l.value),p=!1;if(!h){if(!r)return;h=o.fallbackTransition,p=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:h,fromState:u,toState:l,player:a,isFallbackTransition:p}),p||(Ch(t,"ng-animate-queued"),a.onStart(function(){Sh(t,"ng-animate-queued")})),a.onDone(function(){var e=i.players.indexOf(a);e>=0&&i.players.splice(e,1);var n=i._engine.playersByElement.get(t);if(n){var r=n.indexOf(a);r>=0&&n.splice(r,1)}}),this.players.push(a),c.push(a),a}if(!function(t,e){var n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(var i=0;i<n.length;i++){var o=n[i];if(!e.hasOwnProperty(o)||t[o]!==e[o])return!1}return!0}(u.params,l.params)){var f=[],d=o.matchStyles(u.value,u.params,f),m=o.matchStyles(l.value,l.params,f);f.length?this._engine.reportError(f):this._engine.afterFlush(function(){xc(t,d),bc(t,m)})}},t.prototype.deregister=function(t){var e=this;delete this._triggers[t],this._engine.statesByElement.forEach(function(e,n){delete e[t]}),this._elementListeners.forEach(function(n,r){e._elementListeners.set(r,n.filter(function(e){return e.name!=t}))})},t.prototype.clearElementCache=function(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);var e=this._engine.playersByElement.get(t);e&&(e.forEach(function(t){return t.destroy()}),this._engine.playersByElement.delete(t))},t.prototype._signalRemovalForInnerTriggers=function(t,e,n){var r=this;void 0===n&&(n=!1),this._engine.driver.query(t,".ng-trigger",!0).forEach(function(t){if(!t[ph]){var n=r._engine.fetchNamespacesByElement(t);n.size?n.forEach(function(n){return n.triggerLeaveAnimation(t,e,!1,!0)}):r.clearElementCache(t)}})},t.prototype.triggerLeaveAnimation=function(t,e,n,r){var i=this,o=this._engine.statesByElement.get(t);if(o){var a=[];if(Object.keys(o).forEach(function(e){if(i._triggers[e]){var n=i.trigger(t,e,"void",r);n&&a.push(n)}}),a.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),n&&Yl(a).onDone(function(){return i._engine.processLeaveNode(t)}),!0}return!1},t.prototype.prepareLeaveAnimationListeners=function(t){var e=this,n=this._elementListeners.get(t);if(n){var r=new Set;n.forEach(function(n){var i=n.name;if(!r.has(i)){r.add(i);var o=e._triggers[i].fallbackTransition,a=e._engine.statesByElement.get(t)[i]||dh,s=new fh("void"),u=new vh(e.id,i,t);e._engine.totalQueuedPlayers++,e._queue.push({element:t,triggerName:i,transition:o,fromState:a,toState:s,player:u,isFallbackTransition:!0})}})}},t.prototype.removeNode=function(t,e){var n=this,r=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e,!0),!this.triggerLeaveAnimation(t,e,!0)){var i=!1;if(r.totalAnimations){var o=r.players.length?r.playersByQueriedElement.get(t):[];if(o&&o.length)i=!0;else for(var a=t;a=a.parentNode;)if(r.statesByElement.get(a)){i=!0;break}}this.prepareLeaveAnimationListeners(t),i?r.markElementAsRemoved(this.id,t,!1,e):(r.afterFlush(function(){return n.clearElementCache(t)}),r.destroyInnerAnimations(t),r._onRemovalComplete(t,e))}},t.prototype.insertNode=function(t,e){Ch(t,this._hostClassName)},t.prototype.drainQueuedTransitions=function(t){var e=this,n=[];return this._queue.forEach(function(r){var i=r.player;if(!i.destroyed){var o=r.element,a=e._elementListeners.get(o);a&&a.forEach(function(e){if(e.name==r.triggerName){var n=Jl(o,r.triggerName,r.fromState.value,r.toState.value);n._data=t,Wl(r.player,e.phase,n,e.callback)}}),i.markedForDestroy?e._engine.afterFlush(function(){i.destroy()}):n.push(r)}}),this._queue=[],n.sort(function(t,n){var r=t.transition.ast.depCount,i=n.transition.ast.depCount;return 0==r||0==i?r-i:e._engine.driver.containsElement(t.element,n.element)?1:-1})},t.prototype.destroy=function(t){this.players.forEach(function(t){return t.destroy()}),this._signalRemovalForInnerTriggers(this.hostElement,t)},t.prototype.elementContainsData=function(t){var e=!1;return this._elementListeners.has(t)&&(e=!0),!!this._queue.find(function(e){return e.element===t})||e},t}(),yh=function(){function t(t,e){this.driver=t,this._normalizer=e,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=function(t,e){}}return t.prototype._onRemovalComplete=function(t,e){this.onRemovalComplete(t,e)},Object.defineProperty(t.prototype,"queuedPlayers",{get:function(){var t=[];return this._namespaceList.forEach(function(e){e.players.forEach(function(e){e.queued&&t.push(e)})}),t},enumerable:!0,configurable:!0}),t.prototype.createNamespace=function(t,e){var n=new gh(t,e,this);return e.parentNode?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n},t.prototype._balanceNamespaceList=function(t,e){var n=this._namespaceList.length-1;if(n>=0){for(var r=!1,i=n;i>=0;i--)if(this.driver.containsElement(this._namespaceList[i].hostElement,e)){this._namespaceList.splice(i+1,0,t),r=!0;break}r||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t},t.prototype.register=function(t,e){var n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n},t.prototype.registerTrigger=function(t,e,n){var r=this._namespaceLookup[t];r&&r.register(e,n)&&this.totalAnimations++},t.prototype.destroy=function(t,e){var n=this;if(t){var r=this._fetchNamespace(t);this.afterFlush(function(){n.namespacesByHostElement.delete(r.hostElement),delete n._namespaceLookup[t];var e=n._namespaceList.indexOf(r);e>=0&&n._namespaceList.splice(e,1)}),this.afterFlushAnimationsDone(function(){return r.destroy(e)})}},t.prototype._fetchNamespace=function(t){return this._namespaceLookup[t]},t.prototype.fetchNamespacesByElement=function(t){var e=new Set,n=this.statesByElement.get(t);if(n)for(var r=Object.keys(n),i=0;i<r.length;i++){var o=n[r[i]].namespaceId;if(o){var a=this._fetchNamespace(o);a&&e.add(a)}}return e},t.prototype.trigger=function(t,e,n,r){return!!_h(e)&&(this._fetchNamespace(t).trigger(e,n,r),!0)},t.prototype.insertNode=function(t,e,n,r){if(_h(e)){var i=e[ph];i&&i.setForRemoval&&(i.setForRemoval=!1),t&&this._fetchNamespace(t).insertNode(e,n),r&&this.collectEnterElement(e)}},t.prototype.collectEnterElement=function(t){this.collectedEnterElements.push(t)},t.prototype.markElementAsDisabled=function(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Ch(t,"ng-animate-disabled")):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),Sh(t,"ng-animate-disabled"))},t.prototype.removeNode=function(t,e,n){if(_h(e)){var r=t?this._fetchNamespace(t):null;r?r.removeNode(e,n):this.markElementAsRemoved(t,e,!1,n)}else this._onRemovalComplete(e,n)},t.prototype.markElementAsRemoved=function(t,e,n,r){this.collectedLeaveElements.push(e),e[ph]={namespaceId:t,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1}},t.prototype.listen=function(t,e,n,r,i){return _h(e)?this._fetchNamespace(t).listen(e,n,r,i):function(){}},t.prototype._buildInstruction=function(t,e,n,r){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,r,t.fromState.options,t.toState.options,e)},t.prototype.destroyInnerAnimations=function(t){var e=this,n=this.driver.query(t,".ng-trigger",!0);n.forEach(function(t){return e.destroyActiveAnimationsForElement(t)}),0!=this.playersByQueriedElement.size&&(n=this.driver.query(t,".ng-animating",!0)).forEach(function(t){return e.finishActiveQueriedAnimationOnElement(t)})},t.prototype.destroyActiveAnimationsForElement=function(t){var e=this.playersByElement.get(t);e&&e.forEach(function(t){t.queued?t.markedForDestroy=!0:t.destroy()});var n=this.statesByElement.get(t);n&&Object.keys(n).forEach(function(t){return n[t]=mh})},t.prototype.finishActiveQueriedAnimationOnElement=function(t){var e=this.playersByQueriedElement.get(t);e&&e.forEach(function(t){return t.finish()})},t.prototype.whenRenderingDone=function(){var t=this;return new Promise(function(e){if(t.players.length)return Yl(t.players).onDone(function(){return e()});e()})},t.prototype.processLeaveNode=function(t){var e=this,n=t[ph];if(n&&n.setForRemoval){if(t[ph]=ch,n.namespaceId){this.destroyInnerAnimations(t);var r=this._fetchNamespace(n.namespaceId);r&&r.clearElementCache(t)}this._onRemovalComplete(t,n.setForRemoval)}this.driver.matchesElement(t,".ng-animate-disabled")&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(function(n){e.markElementAsDisabled(t,!1)})},t.prototype.flush=function(t){var e=this;void 0===t&&(t=-1);var n=[];if(this.newHostElements.size&&(this.newHostElements.forEach(function(t,n){return e._balanceNamespaceList(t,n)}),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(var r=0;r<this.collectedEnterElements.length;r++)Ch(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){var i=[];try{n=this._flushAnimations(i,t)}finally{for(r=0;r<i.length;r++)i[r]()}}else for(r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(function(t){return t()}),this._flushFns=[],this._whenQuietFns.length){var o=this._whenQuietFns;this._whenQuietFns=[],n.length?Yl(n).onDone(function(){o.forEach(function(t){return t()})}):o.forEach(function(t){return t()})}},t.prototype.reportError=function(t){throw new Error("Unable to process animations due to the following failed trigger transitions\n "+t.join("\n"))},t.prototype._flushAnimations=function(t,e){var n=this,r=new qc,i=[],o=new Map,a=[],s=new Map,u=new Map,l=new Map,c=new Set;this.disabledNodes.forEach(function(t){c.add(t);for(var e=n.driver.query(t,".ng-animate-queued",!0),r=0;r<e.length;r++)c.add(e[r])});var h=uc(),p=Array.from(this.statesByElement.keys()),f=wh(p,this.collectedEnterElements),d=new Map,m=0;f.forEach(function(t,e){var n="ng-enter"+m++;d.set(e,n),t.forEach(function(t){return Ch(t,n)})});for(var g=[],y=new Set,_=new Set,b=0;b<this.collectedLeaveElements.length;b++)(F=(D=this.collectedLeaveElements[b])[ph])&&F.setForRemoval&&(g.push(D),y.add(D),F.hasAnimation?this.driver.query(D,".ng-star-inserted",!0).forEach(function(t){return y.add(t)}):_.add(D));var x=new Map,w=wh(p,Array.from(y));w.forEach(function(t,e){var n="ng-leave"+m++;x.set(e,n),t.forEach(function(t){return Ch(t,n)})}),t.push(function(){f.forEach(function(t,e){var n=d.get(e);t.forEach(function(t){return Sh(t,n)})}),w.forEach(function(t,e){var n=x.get(e);t.forEach(function(t){return Sh(t,n)})}),g.forEach(function(t){n.processLeaveNode(t)})});for(var E=[],C=[],S=this._namespaceList.length-1;S>=0;S--)this._namespaceList[S].drainQueuedTransitions(e).forEach(function(t){var e=t.player;E.push(e);var o=t.element;if(h&&n.driver.containsElement(h,o)){var c=x.get(o),p=d.get(o),f=n._buildInstruction(t,r,p,c);if(f.errors&&f.errors.length)C.push(f);else{if(t.isFallbackTransition)return e.onStart(function(){return xc(o,f.fromStyles)}),e.onDestroy(function(){return bc(o,f.toStyles)}),void i.push(e);f.timelines.forEach(function(t){return t.stretchStartingKeyframe=!0}),r.append(o,f.timelines),a.push({instruction:f,player:e,element:o}),f.queriedElements.forEach(function(t){return Ql(s,t,[]).push(e)}),f.preStyleProps.forEach(function(t,e){var n=Object.keys(t);if(n.length){var r=u.get(e);r||u.set(e,r=new Set),n.forEach(function(t){return r.add(t)})}}),f.postStyleProps.forEach(function(t,e){var n=Object.keys(t),r=l.get(e);r||l.set(e,r=new Set),n.forEach(function(t){return r.add(t)})})}}else e.destroy()});if(C.length){var I=[];C.forEach(function(t){I.push("@"+t.triggerName+" has failed due to:\n"),t.errors.forEach(function(t){return I.push("- "+t+"\n")})}),E.forEach(function(t){return t.destroy()}),this.reportError(I)}var T=new Map,k=new Map;a.forEach(function(t){var e=t.element;r.has(e)&&(k.set(e,e),n._beforeAnimationBuild(t.player.namespaceId,t.instruction,T))}),i.forEach(function(t){var e=t.element;n._getPreviousPlayers(e,!1,t.namespaceId,t.triggerName,null).forEach(function(t){Ql(T,e,[]).push(t),t.destroy()})});var O=g.filter(function(t){return Th(t,u,l)}),P=new Map;xh(P,this.driver,_,l,Si).forEach(function(t){Th(t,u,l)&&O.push(t)});var A=new Map;f.forEach(function(t,e){xh(A,n.driver,new Set(t),u,Ai)}),O.forEach(function(t){var e=P.get(t),n=A.get(t);P.set(t,Object(v.a)({},e,n))});var M=[],R=[],L={};a.forEach(function(t){var e=t.element,a=t.player,s=t.instruction;if(r.has(e)){if(c.has(e))return a.onDestroy(function(){return bc(e,s.toStyles)}),void i.push(a);var u=L;if(k.size>1){for(var l=e,h=[];l=l.parentNode;){var p=k.get(l);if(p){u=p;break}h.push(l)}h.forEach(function(t){return k.set(t,u)})}var f=n._buildAnimation(a.namespaceId,s,T,o,A,P);if(a.setRealPlayer(f),u===L)M.push(a);else{var d=n.playersByElement.get(u);d&&d.length&&(a.parentPlayer=Yl(d)),i.push(a)}}else xc(e,s.fromStyles),a.onDestroy(function(){return bc(e,s.toStyles)}),R.push(a),c.has(e)&&i.push(a)}),R.forEach(function(t){var e=o.get(t.element);if(e&&e.length){var n=Yl(e);t.setRealPlayer(n)}}),i.forEach(function(t){t.parentPlayer?t.syncPlayerEvents(t.parentPlayer):t.destroy()});for(var N=0;N<g.length;N++){var D,F=(D=g[N])[ph];if(Sh(D,"ng-leave"),!F||!F.hasAnimation){var z=[];if(s.size){var j=s.get(D);j&&j.length&&z.push.apply(z,j);for(var B=this.driver.query(D,".ng-animating",!0),V=0;V<B.length;V++){var q=s.get(B[V]);q&&q.length&&z.push.apply(z,q)}}var U=z.filter(function(t){return!t.destroyed});U.length?Ih(this,D,U):this.processLeaveNode(D)}}return g.length=0,M.forEach(function(t){n.players.push(t),t.onDone(function(){t.destroy();var e=n.players.indexOf(t);n.players.splice(e,1)}),t.play()}),M},t.prototype.elementContainsData=function(t,e){var n=!1,r=e[ph];return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n},t.prototype.afterFlush=function(t){this._flushFns.push(t)},t.prototype.afterFlushAnimationsDone=function(t){this._whenQuietFns.push(t)},t.prototype._getPreviousPlayers=function(t,e,n,r,i){var o=[];if(e){var a=this.playersByQueriedElement.get(t);a&&(o=a)}else{var s=this.playersByElement.get(t);if(s){var u=!i||"void"==i;s.forEach(function(t){t.queued||(u||t.triggerName==r)&&o.push(t)})}}return(n||r)&&(o=o.filter(function(t){return!(n&&n!=t.namespaceId||r&&r!=t.triggerName)})),o},t.prototype._beforeAnimationBuild=function(t,e,n){for(var r=e.element,i=e.isRemovalTransition?void 0:t,o=e.isRemovalTransition?void 0:e.triggerName,a=function(t){var a=t.element,u=a!==r,l=Ql(n,a,[]);s._getPreviousPlayers(a,u,i,o,e.toState).forEach(function(t){var e=t.getRealPlayer();e.beforeDestroy&&e.beforeDestroy(),t.destroy(),l.push(t)})},s=this,u=0,l=e.timelines;u<l.length;u++)a(l[u]);xc(r,e.fromStyles)},t.prototype._buildAnimation=function(t,e,n,r,i,o){var a=this,s=e.triggerName,u=e.element,l=[],c=new Set,h=new Set,p=e.timelines.map(function(e){var p=e.element;c.add(p);var f=p[ph];if(f&&f.removedBeforeQueried)return new Oi;var d,m,g=p!==u,y=(d=(n.get(p)||lh).map(function(t){return t.getRealPlayer()}),m=[],function t(e,n){for(var r=0;r<e.length;r++){var i=e[r];i instanceof Pi?t(i.players,n):n.push(i)}}(d,m),m).filter(function(t){return!!t.element&&t.element===p}),v=i.get(p),_=o.get(p),b=Zl(0,a._normalizer,0,e.keyframes,v,_),x=a._buildPlayer(e,b,y);if(e.subTimeline&&r&&h.add(p),g){var w=new vh(t,s,p);w.setRealPlayer(x),l.push(w)}return x});l.forEach(function(t){Ql(a.playersByQueriedElement,t.element,[]).push(t),t.onDone(function(){return function(t,e,n){var r;if(t instanceof Map){if(r=t.get(e)){if(r.length){var i=r.indexOf(n);r.splice(i,1)}0==r.length&&t.delete(e)}}else(r=t[e])&&(r.length&&(i=r.indexOf(n),r.splice(i,1)),0==r.length&&delete t[e]);return r}(a.playersByQueriedElement,t.element,t)})}),c.forEach(function(t){return Ch(t,"ng-animating")});var f=Yl(p);return f.onDestroy(function(){c.forEach(function(t){return Sh(t,"ng-animating")}),bc(u,e.toStyles)}),h.forEach(function(t){Ql(r,t,[]).push(f)}),f},t.prototype._buildPlayer=function(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new Oi},t}(),vh=function(){function t(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n,this._player=new Oi,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.queued=!0}return t.prototype.setRealPlayer=function(t){var e=this;this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(function(n){e._queuedCallbacks[n].forEach(function(e){return Wl(t,n,void 0,e)})}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.queued=!1)},t.prototype.getRealPlayer=function(){return this._player},t.prototype.syncPlayerEvents=function(t){var e=this,n=this._player;n.triggerCallback&&t.onStart(function(){return n.triggerCallback("start")}),t.onDone(function(){return e.finish()}),t.onDestroy(function(){return e.destroy()})},t.prototype._queueEvent=function(t,e){Ql(this._queuedCallbacks,t,[]).push(e)},t.prototype.onDone=function(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)},t.prototype.onStart=function(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)},t.prototype.onDestroy=function(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)},t.prototype.init=function(){this._player.init()},t.prototype.hasStarted=function(){return!this.queued&&this._player.hasStarted()},t.prototype.play=function(){!this.queued&&this._player.play()},t.prototype.pause=function(){!this.queued&&this._player.pause()},t.prototype.restart=function(){!this.queued&&this._player.restart()},t.prototype.finish=function(){this._player.finish()},t.prototype.destroy=function(){this.destroyed=!0,this._player.destroy()},t.prototype.reset=function(){!this.queued&&this._player.reset()},t.prototype.setPosition=function(t){this.queued||this._player.setPosition(t)},t.prototype.getPosition=function(){return this.queued?0:this._player.getPosition()},Object.defineProperty(t.prototype,"totalTime",{get:function(){return this._player.totalTime},enumerable:!0,configurable:!0}),t.prototype.triggerCallback=function(t){var e=this._player;e.triggerCallback&&e.triggerCallback(t)},t}();function _h(t){return t&&1===t.nodeType}function bh(t,e){var n=t.style.display;return t.style.display=null!=e?e:"none",n}function xh(t,e,n,r,i){var o=[];n.forEach(function(t){return o.push(bh(t))});var a=[];r.forEach(function(n,r){var o={};n.forEach(function(t){var n=o[t]=e.computeStyle(r,t,i);n&&0!=n.length||(r[ph]=hh,a.push(r))}),t.set(r,o)});var s=0;return n.forEach(function(t){return bh(t,o[s++])}),a}function wh(t,e){var n=new Map;if(t.forEach(function(t){return n.set(t,[])}),0==e.length)return n;var r=new Set(e),i=new Map;return e.forEach(function(t){var e=function t(e){if(!e)return 1;var o=i.get(e);if(o)return o;var a=e.parentNode;return o=n.has(a)?a:r.has(a)?1:t(a),i.set(e,o),o}(t);1!==e&&n.get(e).push(t)}),n}var Eh="$$classes";function Ch(t,e){if(t.classList)t.classList.add(e);else{var n=t[Eh];n||(n=t[Eh]={}),n[e]=!0}}function Sh(t,e){if(t.classList)t.classList.remove(e);else{var n=t[Eh];n&&delete n[e]}}function Ih(t,e,n){Yl(n).onDone(function(){return t.processLeaveNode(e)})}function Th(t,e,n){var r=n.get(t);if(!r)return!1;var i=e.get(t);return i?r.forEach(function(t){return i.add(t)}):e.set(t,r),n.delete(t),!0}var kh=function(){function t(t,e){var n=this;this._driver=t,this._triggerCache={},this.onRemovalComplete=function(t,e){},this._transitionEngine=new yh(t,e),this._timelineEngine=new uh(t,e),this._transitionEngine.onRemovalComplete=function(t,e){return n.onRemovalComplete(t,e)}}return t.prototype.registerTrigger=function(t,e,n,r,i){var o=t+"-"+r,a=this._triggerCache[o];if(!a){var s=[],u=Nc(this._driver,i,s);if(s.length)throw new Error('The animation trigger "'+r+'" has failed to build due to the following errors:\n - '+s.join("\n - "));a=function(t,e){return new oh(t,e)}(r,u),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(e,r,a)},t.prototype.register=function(t,e){this._transitionEngine.register(t,e)},t.prototype.destroy=function(t,e){this._transitionEngine.destroy(t,e)},t.prototype.onInsert=function(t,e,n,r){this._transitionEngine.insertNode(t,e,n,r)},t.prototype.onRemove=function(t,e,n){this._transitionEngine.removeNode(t,e,n)},t.prototype.disableAnimations=function(t,e){this._transitionEngine.markElementAsDisabled(t,e)},t.prototype.process=function(t,e,n,r){if("@"==n.charAt(0)){var i=$l(n);this._timelineEngine.command(i[0],e,i[1],r)}else this._transitionEngine.trigger(t,e,n,r)},t.prototype.listen=function(t,e,n,r,i){if("@"==n.charAt(0)){var o=$l(n);return this._timelineEngine.listen(o[0],e,o[1],i)}return this._transitionEngine.listen(t,e,n,r,i)},t.prototype.flush=function(t){void 0===t&&(t=-1),this._transitionEngine.flush(t)},Object.defineProperty(t.prototype,"players",{get:function(){return this._transitionEngine.players.concat(this._timelineEngine.players)},enumerable:!0,configurable:!0}),t.prototype.whenRenderingDone=function(){return this._transitionEngine.whenRenderingDone()},t}(),Oh=function(){function t(t,e,n,r){void 0===r&&(r=[]);var i=this;this.element=t,this.keyframes=e,this.options=n,this.previousPlayers=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.previousStyles={},this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay,(0===this._duration||0===this._delay)&&r.forEach(function(t){var e=t.currentSnapshot;Object.keys(e).forEach(function(t){return i.previousStyles[t]=e[t]})})}return t.prototype._onFinish=function(){this._finished||(this._finished=!0,this._onDoneFns.forEach(function(t){return t()}),this._onDoneFns=[])},t.prototype.init=function(){this._buildPlayer(),this._preparePlayerBeforeStart()},t.prototype._buildPlayer=function(){var t=this;if(!this._initialized){this._initialized=!0;var e=this.keyframes.map(function(t){return _c(t,!1)}),n=Object.keys(this.previousStyles);if(n.length&&e.length){var r=e[0],i=[];if(n.forEach(function(e){r.hasOwnProperty(e)||i.push(e),r[e]=t.previousStyles[e]}),i.length)for(var o=this,a=function(){var t=e[s];i.forEach(function(e){t[e]=Ph(o.element,e)})},s=1;s<e.length;s++)a()}this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",function(){return t._onFinish()})}},t.prototype._preparePlayerBeforeStart=function(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()},t.prototype._triggerWebAnimation=function(t,e,n){return t.animate(e,n)},t.prototype.onStart=function(t){this._onStartFns.push(t)},t.prototype.onDone=function(t){this._onDoneFns.push(t)},t.prototype.onDestroy=function(t){this._onDestroyFns.push(t)},t.prototype.play=function(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(function(t){return t()}),this._onStartFns=[],this._started=!0),this.domPlayer.play()},t.prototype.pause=function(){this.init(),this.domPlayer.pause()},t.prototype.finish=function(){this.init(),this._onFinish(),this.domPlayer.finish()},t.prototype.reset=function(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1},t.prototype._resetDomPlayerState=function(){this.domPlayer&&this.domPlayer.cancel()},t.prototype.restart=function(){this.reset(),this.play()},t.prototype.hasStarted=function(){return this._started},t.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._onDestroyFns.forEach(function(t){return t()}),this._onDestroyFns=[])},t.prototype.setPosition=function(t){this.domPlayer.currentTime=t*this.time},t.prototype.getPosition=function(){return this.domPlayer.currentTime/this.time},Object.defineProperty(t.prototype,"totalTime",{get:function(){return this._delay+this._duration},enumerable:!0,configurable:!0}),t.prototype.beforeDestroy=function(){var t=this,e={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(function(n){"offset"!=n&&(e[n]=t._finished?t._finalKeyframe[n]:Ph(t.element,n))}),this.currentSnapshot=e},t.prototype.triggerCallback=function(t){var e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(function(t){return t()}),e.length=0},t}();function Ph(t,e){return window.getComputedStyle(t)[e]}var Ah=function(){function t(){}return t.prototype.validateStyleProperty=function(t){return sc(t)},t.prototype.matchesElement=function(t,e){return lc(t,e)},t.prototype.containsElement=function(t,e){return cc(t,e)},t.prototype.query=function(t,e,n){return hc(t,e,n)},t.prototype.computeStyle=function(t,e,n){return window.getComputedStyle(t)[e]},t.prototype.animate=function(t,e,n,r,i,o){void 0===o&&(o=[]);var a={duration:n,delay:r,fill:0==r?"both":"forwards"};i&&(a.easing=i);var s=o.filter(function(t){return t instanceof Oh});return new Oh(t,e,a,s)},t}(),Mh=function(t){function e(e,n){var i=t.call(this)||this;return i._nextAnimationId=0,i._renderer=e.createRenderer(n.body,{id:"0",encapsulation:r.ViewEncapsulation.None,styles:[],data:{animation:[]}}),i}return Object(v.c)(e,t),e.prototype.build=function(t){var e=this._nextAnimationId.toString();this._nextAnimationId++;var n=Array.isArray(t)?Ii(t):t;return Nh(this._renderer,null,e,"register",[n]),new Rh(e,this._renderer)},e}(Ci),Rh=function(t){function e(e,n){var r=t.call(this)||this;return r._id=e,r._renderer=n,r}return Object(v.c)(e,t),e.prototype.create=function(t,e){return new Lh(this._id,t,e||{},this._renderer)},e}(function(){}),Lh=function(){function t(t,e,n,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}return t.prototype._listen=function(t,e){return this._renderer.listen(this.element,"@@"+this.id+":"+t,e)},t.prototype._command=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return Nh(this._renderer,this.element,this.id,t,e)},t.prototype.onDone=function(t){this._listen("done",t)},t.prototype.onStart=function(t){this._listen("start",t)},t.prototype.onDestroy=function(t){this._listen("destroy",t)},t.prototype.init=function(){this._command("init")},t.prototype.hasStarted=function(){return this._started},t.prototype.play=function(){this._command("play"),this._started=!0},t.prototype.pause=function(){this._command("pause")},t.prototype.restart=function(){this._command("restart")},t.prototype.finish=function(){this._command("finish")},t.prototype.destroy=function(){this._command("destroy")},t.prototype.reset=function(){this._command("reset")},t.prototype.setPosition=function(t){this._command("setPosition",t)},t.prototype.getPosition=function(){return 0},t}();function Nh(t,e,n,r,i){return t.setProperty(e,"@@"+n+":"+r,i)}var Dh=function(){function t(t,e,n){this.delegate=t,this.engine=e,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,e.onRemovalComplete=function(t,e){e&&e.parentNode(t)&&e.removeChild(t.parentNode,t)}}return t.prototype.createRenderer=function(t,e){var n=this,r=this.delegate.createRenderer(t,e);if(!(t&&e&&e.data&&e.data.animation)){var i=this._rendererCache.get(r);return i||(i=new Fh("",r,this.engine),this._rendererCache.set(r,i)),i}var o=e.id,a=e.id+"-"+this._currentId;return this._currentId++,this.engine.register(a,t),e.data.animation.forEach(function(e){return n.engine.registerTrigger(o,a,t,e.name,e)}),new zh(this,a,r,this.engine)},t.prototype.begin=function(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()},t.prototype._scheduleCountTask=function(){var t=this;Zone.current.scheduleMicroTask("incremenet the animation microtask",function(){return t._microtaskId++})},t.prototype.scheduleListenerCallback=function(t,e,n){var r=this;t>=0&&t<this._microtaskId?this._zone.run(function(){return e(n)}):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(function(){r._zone.run(function(){r._animationCallbacksBuffer.forEach(function(t){(0,t[0])(t[1])}),r._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([e,n]))},t.prototype.end=function(){var t=this;this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(function(){t._scheduleCountTask(),t.engine.flush(t._microtaskId)}),this.delegate.end&&this.delegate.end()},t.prototype.whenRenderingDone=function(){return this.engine.whenRenderingDone()},t}(),Fh=function(){function t(t,e,n){this.namespaceId=t,this.delegate=e,this.engine=n,this.destroyNode=this.delegate.destroyNode?function(t){return e.destroyNode(t)}:null}return Object.defineProperty(t.prototype,"data",{get:function(){return this.delegate.data},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()},t.prototype.createElement=function(t,e){return this.delegate.createElement(t,e)},t.prototype.createComment=function(t){return this.delegate.createComment(t)},t.prototype.createText=function(t){return this.delegate.createText(t)},t.prototype.appendChild=function(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)},t.prototype.insertBefore=function(t,e,n){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,!0)},t.prototype.removeChild=function(t,e){this.engine.onRemove(this.namespaceId,e,this.delegate)},t.prototype.selectRootElement=function(t){return this.delegate.selectRootElement(t)},t.prototype.parentNode=function(t){return this.delegate.parentNode(t)},t.prototype.nextSibling=function(t){return this.delegate.nextSibling(t)},t.prototype.setAttribute=function(t,e,n,r){this.delegate.setAttribute(t,e,n,r)},t.prototype.removeAttribute=function(t,e,n){this.delegate.removeAttribute(t,e,n)},t.prototype.addClass=function(t,e){this.delegate.addClass(t,e)},t.prototype.removeClass=function(t,e){this.delegate.removeClass(t,e)},t.prototype.setStyle=function(t,e,n,r){this.delegate.setStyle(t,e,n,r)},t.prototype.removeStyle=function(t,e,n){this.delegate.removeStyle(t,e,n)},t.prototype.setProperty=function(t,e,n){"@"==e.charAt(0)&&"@.disabled"==e?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)},t.prototype.setValue=function(t,e){this.delegate.setValue(t,e)},t.prototype.listen=function(t,e,n){return this.delegate.listen(t,e,n)},t.prototype.disableAnimations=function(t,e){this.engine.disableAnimations(t,e)},t}(),zh=function(t){function e(e,n,r,i){var o=t.call(this,n,r,i)||this;return o.factory=e,o.namespaceId=n,o}return Object(v.c)(e,t),e.prototype.setProperty=function(t,e,n){"@"==e.charAt(0)?"."==e.charAt(1)&&"@.disabled"==e?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.substr(1),n):this.delegate.setProperty(t,e,n)},e.prototype.listen=function(t,e,n){var r,i,o,a=this;if("@"==e.charAt(0)){var s=function(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(t),u=e.substr(1),l="";return"@"!=u.charAt(0)&&(u=(i=u,o=i.indexOf("."),r=[i.substring(0,o),i.substr(o+1)])[0],l=r[1]),this.engine.listen(this.namespaceId,s,u,l,function(t){a.factory.scheduleListenerCallback(t._data||-1,n,t)})}return this.delegate.listen(t,e,n)},e}(Fh),jh=function(t){function e(e,n){return t.call(this,e,n)||this}return Object(v.c)(e,t),e}(kh);function Bh(){return"undefined"!=typeof Element&&"function"==typeof Element.prototype.animate?new Ah:new pc}function Vh(){return new $c}function qh(t,e,n){return new Dh(t,e,n)}var Uh=function(){},Gh=n("5JxN"),Xh=n("eaoh"),Hh=r["\u0275cmf"](y,[_],function(t){return r["\u0275mod"]([r["\u0275mpd"](512,r.ComponentFactoryResolver,r["\u0275CodegenComponentFactoryResolver"],[[8,[Xi,Hl]],[3,r.ComponentFactoryResolver],r.NgModuleRef]),r["\u0275mpd"](5120,r.LOCALE_ID,r["\u0275q"],[[3,r.LOCALE_ID]]),r["\u0275mpd"](4608,A,M,[r.LOCALE_ID,[2,P]]),r["\u0275mpd"](4608,r.Compiler,r.Compiler,[]),r["\u0275mpd"](5120,r.APP_ID,r["\u0275i"],[]),r["\u0275mpd"](5120,r.IterableDiffers,r["\u0275n"],[]),r["\u0275mpd"](5120,r.KeyValueDiffers,r["\u0275o"],[]),r["\u0275mpd"](4608,Pr,Ar,[rt]),r["\u0275mpd"](6144,r.Sanitizer,null,[Pr]),r["\u0275mpd"](4608,er,Jr,[[2,Kr],[2,Ur]]),r["\u0275mpd"](5120,kn,function(t,e,n,r,i){return[new $n(t,e),new ar(n),new rr(r,i)]},[rt,r.NgZone,rt,rt,er]),r["\u0275mpd"](4608,On,On,[kn,r.NgZone]),r["\u0275mpd"](135680,Mn,Mn,[rt]),r["\u0275mpd"](4608,jn,jn,[On,Mn]),r["\u0275mpd"](5120,fc,Bh,[]),r["\u0275mpd"](5120,Qc,Vh,[]),r["\u0275mpd"](4608,kh,jh,[fc,Qc]),r["\u0275mpd"](5120,r.RendererFactory2,qh,[jn,kh,r.NgZone]),r["\u0275mpd"](6144,An,null,[Mn]),r["\u0275mpd"](4608,r.Testability,r.Testability,[r.NgZone]),r["\u0275mpd"](4608,bn,bn,[rt]),r["\u0275mpd"](4608,Cn,Cn,[rt]),r["\u0275mpd"](4608,Lo,No,[rt,r.PLATFORM_ID,Mo]),r["\u0275mpd"](4608,Do,Do,[Lo,Ro]),r["\u0275mpd"](5120,Io,function(t){return[t]},[Do]),r["\u0275mpd"](4608,Po,Po,[]),r["\u0275mpd"](6144,Oo,null,[Po]),r["\u0275mpd"](4608,Ao,Ao,[Oo]),r["\u0275mpd"](6144,uo,null,[Ao]),r["\u0275mpd"](4608,so,Fo,[uo,r.Injector]),r["\u0275mpd"](4608,Co,Co,[so]),r["\u0275mpd"](4608,ba,ba,[]),r["\u0275mpd"](4608,Ci,Mh,[r.RendererFactory2,yn]),r["\u0275mpd"](6144,jt,null,[rt]),r["\u0275mpd"](4608,Bt,Bt,[[2,jt]]),r["\u0275mpd"](4608,ot,ot,[]),r["\u0275mpd"](4608,Ve,Ve,[ot]),r["\u0275mpd"](4608,Xe,Xe,[Ve,r.NgZone,rt]),r["\u0275mpd"](136192,Ke,Je,[[3,Ke],rt]),r["\u0275mpd"](5120,nn,rn,[[3,nn],[2,en],rt]),r["\u0275mpd"](5120,on,an,[[3,on],r.NgZone,ot]),r["\u0275mpd"](5120,Rt,Lt,[[3,Rt],r.NgZone,ot]),r["\u0275mpd"](5120,Dt,Ft,[[3,Dt],ot,r.NgZone]),r["\u0275mpd"](4608,me,me,[Rt,Dt,r.NgZone,rt]),r["\u0275mpd"](5120,Ee,Ce,[[3,Ee],rt]),r["\u0275mpd"](4608,be,be,[Dt,rt]),r["\u0275mpd"](5120,xe,we,[[3,xe],rt]),r["\u0275mpd"](4608,Ie,Ie,[me,Ee,r.ComponentFactoryResolver,be,xe,r.ApplicationRef,r.Injector,r.NgZone,rt]),r["\u0275mpd"](5120,ke,Oe,[Ie]),r["\u0275mpd"](5120,Vs,qs,[Ie]),r["\u0275mpd"](5120,Hs,Ys,[Ie]),r["\u0275mpd"](4608,Wr,Wr,[]),r["\u0275mpd"](5120,Yo,Zo,[[3,Yo],[2,Co],Pr,[2,rt]]),r["\u0275mpd"](5120,zi,ji,[Ie]),r["\u0275mpd"](4608,Bi,Bi,[Ie,r.Injector,[2,x],[2,Fi],zi,[3,Bi],Ee]),r["\u0275mpd"](4608,fs,fs,[]),r["\u0275mpd"](5120,ls,cs,[[3,ls]]),r["\u0275mpd"](4608,Ol,Ol,[Co,fu.NgRedux]),r["\u0275mpd"](4608,Bl,Bl,[]),r["\u0275mpd"](4608,Js,Js,[ot]),r["\u0275mpd"](512,nt,nt,[]),r["\u0275mpd"](1024,r.ErrorHandler,Br,[]),r["\u0275mpd"](1024,r.APP_INITIALIZER,function(t){return[(e=t,Sn("probe",Tn),Sn("coreTokens",Object(v.a)({},In,(e||[]).reduce(function(t,e){return t[e.name]=e.token,t},{}))),function(){return Tn})];var e},[[2,r.NgProbeToken]]),r["\u0275mpd"](512,r.ApplicationInitStatus,r.ApplicationInitStatus,[[2,r.APP_INITIALIZER]]),r["\u0275mpd"](131584,r.ApplicationRef,r.ApplicationRef,[r.NgZone,r["\u0275Console"],r.Injector,r.ErrorHandler,r.ComponentFactoryResolver,r.ApplicationInitStatus]),r["\u0275mpd"](512,r.ApplicationModule,r.ApplicationModule,[r.ApplicationRef]),r["\u0275mpd"](512,Vr,Vr,[[3,Vr]]),r["\u0275mpd"](512,Gh.NgReduxModule,Gh.NgReduxModule,[]),r["\u0275mpd"](512,zo,zo,[]),r["\u0275mpd"](512,jo,jo,[]),r["\u0275mpd"](512,$a,$a,[]),r["\u0275mpd"](512,ts,ts,[]),r["\u0275mpd"](512,Uh,Uh,[]),r["\u0275mpd"](512,Vt,Vt,[]),r["\u0275mpd"](256,qr,!0,[]),r["\u0275mpd"](512,Ur,Ur,[[2,qr]]),r["\u0275mpd"](512,lt,lt,[]),r["\u0275mpd"](512,ai,ai,[]),r["\u0275mpd"](512,sn,sn,[]),r["\u0275mpd"](512,Ki,Ki,[]),r["\u0275mpd"](512,hu,hu,[]),r["\u0275mpd"](512,Wt,Wt,[]),r["\u0275mpd"](512,zt,zt,[]),r["\u0275mpd"](512,Me,Me,[]),r["\u0275mpd"](512,Gs,Gs,[]),r["\u0275mpd"](512,ui,ui,[]),r["\u0275mpd"](512,mi,mi,[]),r["\u0275mpd"](512,as,as,[]),r["\u0275mpd"](512,Ws,Ws,[]),r["\u0275mpd"](512,Ts,Ts,[]),r["\u0275mpd"](512,su,su,[]),r["\u0275mpd"](512,Qo,Qo,[]),r["\u0275mpd"](512,Os,Os,[]),r["\u0275mpd"](512,Qr,Qr,[]),r["\u0275mpd"](512,Fs,Fs,[]),r["\u0275mpd"](512,Vi,Vi,[]),r["\u0275mpd"](512,ms,ms,[]),r["\u0275mpd"](512,bs,bs,[]),r["\u0275mpd"](512,lu,lu,[]),r["\u0275mpd"](512,As,As,[]),r["\u0275mpd"](512,Ds,Ds,[]),r["\u0275mpd"](512,ps,ps,[]),r["\u0275mpd"](1024,fu.NgRedux,Gh._ngReduxFactory,[r.NgZone]),r["\u0275mpd"](512,Xh.DevToolsExtension,Xh.DevToolsExtension,[r.ApplicationRef,fu.NgRedux]),r["\u0275mpd"](512,y,y,[fu.NgRedux,Xh.DevToolsExtension]),r["\u0275mpd"](256,Mo,"XSRF-TOKEN",[]),r["\u0275mpd"](256,Ro,"X-XSRF-TOKEN",[]),r["\u0275mpd"](256,js,{overlapTrigger:!0,xPosition:"after",yPosition:"below"},[]),r["\u0275mpd"](256,tu,!1,[])])});Object(r.enableProdMode)(),jr().bootstrapModuleFactory(Hh).catch(function(t){return console.log(t)})},"dmC+":function(t,e,n){"use strict";e.a=function(t,e){return Object(r.a)(t,e)(this)};var r=n("qqDE")},eIqN:function(t,e,n){"use strict";var r=n("6Xbx"),i=n("TO51"),o=n("AP4T"),a=n("E9/g"),s=n("qLnt");function u(){return function(t){return t.lift(new l(t))}}var l=function(){function t(t){this.connectable=t}return t.prototype.call=function(t,e){var n=this.connectable;n._refCount++;var r=new c(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i},t}(),c=function(t){function e(e,n){t.call(this,e),this.connectable=n}return Object(r.c)(e,t),e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,e>1)this.connection=null;else{var n=this.connection,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null},e}(a.a),h=function(t){function e(e,n){t.call(this),this.source=e,this.subjectFactory=n,this._refCount=0,this._isComplete=!1}return Object(r.c)(e,t),e.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},e.prototype.getSubject=function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject},e.prototype.connect=function(){var t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new s.a).add(this.source.subscribe(new f(this.getSubject(),this))),t.closed?(this._connection=null,t=s.a.EMPTY):this._connection=t),t},e.prototype.refCount=function(){return u()(this)},e}(o.Observable).prototype,p={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:h._subscribe},_isComplete:{value:h._isComplete,writable:!0},getSubject:{value:h.getSubject},connect:{value:h.connect},refCount:{value:h.refCount}},f=function(t){function e(e,n){t.call(this,e),this.connectable=n}return Object(r.c)(e,t),e.prototype._error=function(e){this._unsubscribe(),t.prototype._error.call(this,e)},e.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}},e}(i.b);function d(){return new i.a}e.a=function(){return function(t){return u()((e=d,function(t){var n;n="function"==typeof e?e:function(){return e};var r=Object.create(t,p);return r.source=t,r.subjectFactory=n,r})(t));var e}}},eaoh:function(t,e,n){"use strict";var r=n("LMZF"),i=(n("kP2E"),n("LMZF")),o="undefined"!=typeof window?window:this;e.DevToolsExtension=function(){function t(t,e){var n=this;this.appRef=t,this.ngRedux=e,this.enhancer=function(t){var e;return n.isEnabled()?(o.devToolsExtension.listen(function(t){var r=t.type;"START"===r?e=n.ngRedux.subscribe(function(){i.NgZone.isInAngularZone()||n.appRef.tick()}):"STOP"===r&&e()}),o.devToolsExtension(t)):null}}return t.prototype.isEnabled=function(){return o&&o.devToolsExtension},t.decorators=[{type:r.Injectable}],t}()},eoFs:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"BehaviorSubject",function(){return a});var r=n("6Xbx"),i=n("TO51"),o=n("Upor"),a=function(t){function e(e){t.call(this),this._value=e}return Object(r.c)(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(e){var n=t.prototype._subscribe.call(this,e);return n&&!n.closed&&e.next(this._value),n},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new o.a;return this._value},e.prototype.next=function(e){t.prototype.next.call(this,this._value=e)},e}(i.a)},fRUx:function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},"fgj+":function(t,e,n){"use strict";var r=n("6Xbx"),i=n("1j/l"),o=n("kQVV"),a=n("mHG6"),s=n("KRwF"),u=n("xIGM"),l=n("AP4T"),c=n("X3fp"),h=function(t){function e(e,n){if(t.call(this),this.scheduler=n,null==e)throw new Error("iterator cannot be null.");this.iterator=d(e)}return Object(r.c)(e,t),e.create=function(t,n){return new e(t,n)},e.dispatch=function(t){var e=t.index,n=t.iterator,r=t.subscriber;if(t.hasError)r.error(t.error);else{var i=n.next();i.done?r.complete():(r.next(i.value),t.index=e+1,r.closed?"function"==typeof n.return&&n.return():this.schedule(t))}},e.prototype._subscribe=function(t){var n=this.iterator,r=this.scheduler;if(r)return r.schedule(e.dispatch,0,{index:0,iterator:n,subscriber:t});for(;;){var i=n.next();if(i.done){t.complete();break}if(t.next(i.value),t.closed){"function"==typeof n.return&&n.return();break}}},e}(l.Observable),p=function(){function t(t,e,n){void 0===e&&(e=0),void 0===n&&(n=t.length),this.str=t,this.idx=e,this.len=n}return t.prototype[c.a]=function(){return this},t.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.str.charAt(this.idx++)}:{done:!0,value:void 0}},t}(),f=function(){function t(t,e,n){void 0===e&&(e=0),void 0===n&&(n=function(e){var n,r,i=+t.length;return isNaN(i)?0:0!==i&&"number"==typeof(n=i)&&u.a.isFinite(n)?(i=(0==(r=+i)?r:isNaN(r)?r:r<0?-1:1)*Math.floor(Math.abs(i)))<=0?0:i>m?m:i:i}()),this.arr=t,this.idx=e,this.len=n}return t.prototype[c.a]=function(){return this},t.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.arr[this.idx++]}:{done:!0,value:void 0}},t}();function d(t){var e=t[c.a];if(!e&&"string"==typeof t)return new p(t);if(!e&&void 0!==t.length)return new f(t);if(!e)throw new TypeError("object is not iterable");return t[c.a]()}var m=Math.pow(2,53)-1,g=n("Oryw"),y=n("8Ut3"),v=n("Ecq+"),_=function(t){function e(e,n){t.call(this),this.arrayLike=e,this.scheduler=n,n||1!==e.length||(this._isScalar=!0,this.value=e[0])}return Object(r.c)(e,t),e.create=function(t,n){var r=t.length;return 0===r?new v.a:1===r?new y.a(t[0],n):new e(t,n)},e.dispatch=function(t){var e=t.arrayLike,n=t.index,r=t.subscriber;r.closed||(n>=t.length?r.complete():(r.next(e[n]),t.index=n+1,this.schedule(t)))},e.prototype._subscribe=function(t){var n=this.arrayLike,r=this.scheduler,i=n.length;if(r)return r.schedule(e.dispatch,0,{arrayLike:n,index:0,length:i,subscriber:t});for(var o=0;o<i&&!t.closed;o++)t.next(n[o]);t.complete()},e}(l.Observable),b=n("E9/g"),x=n("PAZ8"),w=function(t){function e(e,n,r){void 0===r&&(r=0),t.call(this,e),this.scheduler=n,this.delay=r}return Object(r.c)(e,t),e.dispatch=function(t){t.notification.observe(t.destination),this.unsubscribe()},e.prototype.scheduleMessage=function(t){this.add(this.scheduler.schedule(e.dispatch,this.delay,new E(t,this.destination)))},e.prototype._next=function(t){this.scheduleMessage(x.a.createNext(t))},e.prototype._error=function(t){this.scheduleMessage(x.a.createError(t))},e.prototype._complete=function(){this.scheduleMessage(x.a.createComplete())},e}(b.a),E=function(t,e){this.notification=t,this.destination=e},C=n("mz3w"),S=function(t){function e(e,n){t.call(this,null),this.ish=e,this.scheduler=n}return Object(r.c)(e,t),e.create=function(t,n){if(null!=t){if("function"==typeof t[C.a])return t instanceof l.Observable&&!n?t:new e(t,n);if(Object(i.a)(t))return new g.a(t,n);if(Object(a.a)(t))return new s.a(t,n);if("function"==typeof t[c.a]||"string"==typeof t)return new h(t,n);if(Object(o.a)(t))return new _(t,n)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")},e.prototype._subscribe=function(t){var e=this.ish,n=this.scheduler;return null==n?e[C.a]().subscribe(t):e[C.a]().subscribe(new w(t,n,0))},e}(l.Observable);n.d(e,"a",function(){return I});var I=S.create},grVA:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r={closed:!0,next:function(t){},error:function(t){throw t},complete:function(){}}},hZMJ:function(t,e,n){"use strict";e.tassign=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return Object.assign.apply(Object,[{},t].concat(e))}},kP2E:function(t,e,n){"use strict";var r=n("AYro"),i=n("AP4T"),o=n("eoFs");n("GQSG"),n("Wi6i"),n("NdV9"),n("ABGK"),n("RSzd");var a=n("/UCc"),s=n("C0ll"),u=n("SBUM"),l=n("FScj"),c=["string","string[]","number","symbol","function"],h="Expected selector to be one of:\n    "+c.join(",")+". Instead recieved %s";e.NgRedux=function(){function t(e){var n=this;this.ngZone=e,this._store=null,this._store$=null,this.getState=function(){return n._store.getState()},this.subscribe=function(t){return n._store.subscribe(t)},this.replaceReducer=function(t){return n._store.replaceReducer(t)},this.dispatch=function(t){return u.invariant(!!n._store,"Dispatch failed: did you forget to configure your store? https://github.com/angular-redux/ng2-redux/blob/master/README.md#quick-start"),n.ngZone.run(function(){return n._store.dispatch(t)})},t.instance=this,this._store$=new o.BehaviorSubject(null).filter(function(t){return null!==t}).switchMap(function(t){return i.Observable.from(t)})}return t.prototype.configureStore=function(t,e,n,i){void 0===n&&(n=[]),void 0===i&&(i=[]),u.invariant(!this._store,"Store already configured!");var o=r.compose.apply(void 0,[r.applyMiddleware.apply(void 0,n)].concat(i))(r.createStore)(t,e);this.setStore(o)},t.prototype.provideStore=function(t){u.invariant(!this._store,"Store already configured!"),this.setStore(t)},t.prototype.select=function(t,e){if(!t)return this._store$.distinctUntilChanged(e);var n;u.invariant(c.indexOf(typeof(n=t),0)>=0||Array.isArray(n),h,t);var r=this._store$.distinctUntilChanged();return("string"==typeof t||"number"==typeof t||"symbol"==typeof t?r.map(function(e){return e[t]}):Array.isArray(t)?r.map(function(e){return l.getIn(e,t)}):r.map(t)).distinctUntilChanged(e)},t.prototype.getStateSlice=function(t,e){var n=e(t);return u.invariant(a.isPlainObject(n),"`mapStateToScope` must return an object. Instead received %s.",n),n},t.prototype.setStore=function(t){this._store=t,this._store$.next(t),this._defaultMapStateToTarget=function(){return{}},this._defaultMapDispatchToTarget=function(t){return{dispatch:t}};var e=s.omit(t,["dispatch","getState","subscribe","replaceReducer"]);Object.assign(this,e)},t}()},kQVV:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(t){return t&&"number"==typeof t.length}},lBzb:function(t,e,n){"use strict";var r=n("kP2E");e.select=function(t,e){return function(n,i){var o=t;t||(o=i.lastIndexOf("$")===i.length-1?i.substring(0,i.length-1):i),delete n[i]&&Object.defineProperty(n,i,{get:function(){return r.NgRedux.instance.select(o,e)},enumerable:!0,configurable:!0})}}},lI6h:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("6Xbx"),i=function(t){function e(){t.apply(this,arguments)}return Object(r.c)(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(n("E9/g").a)},mHG6:function(t,e,n){"use strict";e.a=function(t){return t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}},mz3w:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(t){var e,r=n("xIGM").a.Symbol;return"function"==typeof r?r.observable?e=r.observable:(e=r("observable"),r.observable=e):e="@@observable",e}()},psmC:function(t,e,n){"use strict";e.a=function(t){var e,n=t.Symbol;return"function"==typeof n?n.observable?e=n.observable:(e=n("observable"),n.observable=e):e="@@observable",e}},qLnt:function(t,e,n){"use strict";var r=n("1j/l"),i=n("NGRF"),o=n("B1iP"),a=n("8ofh"),s=n("NePw"),u=n("6Xbx"),l=function(t){function e(e){t.call(this),this.errors=e;var n=Error.call(this,e?e.length+" errors occurred during unsubscription:\n  "+e.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"");this.name=n.name="UnsubscriptionError",this.stack=n.stack,this.message=n.message}return Object(u.c)(e,t),e}(Error);n.d(e,"a",function(){return c});var c=function(){function t(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}var e;return t.prototype.unsubscribe=function(){var t,e=!1;if(!this.closed){var n=this._parent,u=this._parents,c=this._unsubscribe,p=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var f=-1,d=u?u.length:0;n;)n.remove(this),n=++f<d&&u[f]||null;if(Object(o.a)(c)&&Object(a.a)(c).call(this)===s.a&&(e=!0,t=t||(s.a.e instanceof l?h(s.a.e.errors):[s.a.e])),Object(r.a)(p))for(f=-1,d=p.length;++f<d;){var m=p[f];if(Object(i.a)(m)&&Object(a.a)(m.unsubscribe).call(m)===s.a){e=!0,t=t||[];var g=s.a.e;g instanceof l?t=t.concat(h(g.errors)):t.push(g)}}if(e)throw new l(t)}},t.prototype.add=function(e){if(!e||e===t.EMPTY)return t.EMPTY;if(e===this)return this;var n=e;switch(typeof e){case"function":n=new t(e);case"object":if(n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if("function"!=typeof n._addParent){var r=n;(n=new t)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(n),n._addParent(this),n},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}},t.prototype._addParent=function(t){var e=this._parent,n=this._parents;e&&e!==t?n?-1===n.indexOf(t)&&n.push(t):this._parents=[t]:this._parent=t},t.EMPTY=((e=new t).closed=!0,e),t}();function h(t){return t.reduce(function(t,e){return t.concat(e instanceof l?e.errors:e)},[])}},qgI0:function(t,e,n){"use strict";var r=n("xIGM"),i=n("kQVV"),o=n("mHG6"),a=n("NGRF"),s=n("AP4T"),u=n("X3fp"),l=n("6Xbx"),c=function(t){function e(e,n,r){t.call(this),this.parent=e,this.outerValue=n,this.outerIndex=r,this.index=0}return Object(l.c)(e,t),e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(n("E9/g").a),h=n("mz3w");e.a=function(t,e,n,l){var p=new c(t,n,l);if(p.closed)return null;if(e instanceof s.Observable)return e._isScalar?(p.next(e.value),p.complete(),null):(p.syncErrorThrowable=!0,e.subscribe(p));if(Object(i.a)(e)){for(var f=0,d=e.length;f<d&&!p.closed;f++)p.next(e[f]);p.closed||p.complete()}else{if(Object(o.a)(e))return e.then(function(t){p.closed||(p.next(t),p.complete())},function(t){return p.error(t)}).then(null,function(t){r.a.setTimeout(function(){throw t})}),p;if(e&&"function"==typeof e[u.a])for(var m=e[u.a]();;){var g=m.next();if(g.done){p.complete();break}if(p.next(g.value),p.closed)break}else if(e&&"function"==typeof e[h.a]){var y=e[h.a]();if("function"==typeof y.subscribe)return y.subscribe(new c(t,n,l));p.error(new TypeError("Provided object does not correctly implement Symbol.observable"))}else{var v=Object(a.a)(e)?"an invalid object":"'"+e+"'";p.error(new TypeError("You provided "+v+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable."))}}return null}},qhgb:function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},qqDE:function(t,e,n){"use strict";e.a=function(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}};var r=n("6Xbx"),i=n("E9/g"),o=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.project,this.thisArg))},t}(),a=function(t){function e(e,n,r){t.call(this,e),this.project=n,this.count=0,this.thisArg=r||this}return Object(r.c)(e,t),e.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(i.a)},wP3s:function(t,e,n){"use strict";e.a=function(t,e,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),function(r){return"number"==typeof e&&(n=e,e=null),r.lift(new a(t,e,n))}};var r=n("6Xbx"),i=n("qgI0"),o=n("lI6h"),a=function(){function t(t,e,n){void 0===n&&(n=Number.POSITIVE_INFINITY),this.project=t,this.resultSelector=e,this.concurrent=n}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.project,this.resultSelector,this.concurrent))},t}(),s=function(t){function e(e,n,r,i){void 0===i&&(i=Number.POSITIVE_INFINITY),t.call(this,e),this.project=n,this.resultSelector=r,this.concurrent=i,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return Object(r.c)(e,t),e.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},e.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(t){return void this.destination.error(t)}this.active++,this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){this.add(Object(i.a)(this,t,e,n))},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},e.prototype.notifyNext=function(t,e,n,r,i){this.resultSelector?this._notifyResultSelector(t,e,n,r):this.destination.next(e)},e.prototype._notifyResultSelector=function(t,e,n,r){var i;try{i=this.resultSelector(t,e,n,r)}catch(t){return void this.destination.error(t)}this.destination.next(i)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(o.a)},xIGM:function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return o});var r="undefined"!=typeof window&&window,i="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,o=r||"undefined"!=typeof t&&t||i}).call(e,n("fRUx"))}},[0]);